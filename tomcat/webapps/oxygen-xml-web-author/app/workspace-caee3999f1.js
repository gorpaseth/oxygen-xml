/**
 * Copyright (c) 2018 Syncro Soft SRL - All Rights Reserved.
 *
 * This file contains proprietary and confidential source code.
 * Unauthorized copying of this file, via any medium, is strictly prohibited.
 */

'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};var COMPILED=!0,goog=goog||{};goog.global=this;goog.isDef=function(a){return void 0!==a};goog.isString=function(a){return"string"==typeof a};goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};
goog.exportPath_=function(a,b,c){a=a.split(".");c=c||goog.global;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&goog.isDef(b)?c[d]=b:c=c[d]&&c[d]!==Object.prototype[d]?c[d]:c[d]={}};
goog.define=function(a,b){if(!COMPILED){var c=goog.global.CLOSURE_UNCOMPILED_DEFINES,d=goog.global.CLOSURE_DEFINES;c&&void 0===c.nodeType&&Object.prototype.hasOwnProperty.call(c,a)?b=c[a]:d&&void 0===d.nodeType&&Object.prototype.hasOwnProperty.call(d,a)&&(b=d[a])}goog.exportPath_(a,b);return b};goog.DEBUG=!1;goog.LOCALE="en";goog.TRUSTED_SITE=!0;goog.STRICT_MODE_COMPATIBLE=!1;goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG;goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1;
goog.provide=function(a){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");if(!COMPILED&&goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');goog.constructNamespace_(a)};goog.constructNamespace_=function(a,b){if(!COMPILED){delete goog.implicitNamespaces_[a];for(var c=a;(c=c.substring(0,c.lastIndexOf(".")))&&!goog.getObjectByName(c);)goog.implicitNamespaces_[c]=!0}goog.exportPath_(a,b)};
goog.getScriptNonce=function(a){if(a&&a!=goog.global)return goog.getScriptNonce_(a.document);null===goog.cspNonce_&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document));return goog.cspNonce_};goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/;goog.cspNonce_=null;goog.getScriptNonce_=function(a){return(a=a.querySelector&&a.querySelector("script[nonce]"))&&(a=a.nonce||a.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(a)?a:""};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;
goog.module=function(a){if(!goog.isString(a)||!a||-1==a.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+a+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");
if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=a;if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a]}};goog.module.get=function(a){return goog.module.getInternal_(a)};
goog.module.getInternal_=function(a){if(!COMPILED){if(a in goog.loadedModules_)return goog.loadedModules_[a].exports;if(!goog.implicitNamespaces_[a])return a=goog.getObjectByName(a),null!=a?a:null}return null};goog.ModuleType={ES6:"es6",GOOG:"goog"};goog.moduleLoaderState_=null;goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()};goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG};
goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var a=goog.global.$jscomp;return a?"function"!=typeof a.getCurrentModulePath?!1:!!a.getCurrentModulePath():!1};
goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInGoogModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0};
goog.declareModuleId=function(a){if(!COMPILED){if(!goog.isInEs6ModuleLoader_())throw Error("goog.declareModuleId may only be called from within an ES6 module");if(goog.moduleLoaderState_&&goog.moduleLoaderState_.moduleName)throw Error("goog.declareModuleId may only be called once per module.");if(a in goog.loadedModules_)throw Error('Module with namespace "'+a+'" already exists.');}if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=a;else{var b=goog.global.$jscomp;if(!b||"function"!=typeof b.getCurrentModulePath)throw Error('Module with namespace "'+
a+'" has been loaded incorrectly.');b=b.require(b.getCurrentModulePath());goog.loadedModules_[a]={exports:b,type:goog.ModuleType.ES6,moduleId:a}}};goog.module.declareNamespace=goog.declareModuleId;goog.setTestOnly=function(a){if(goog.DISALLOW_TEST_ONLY_CODE)throw a=a||"",Error("Importing test-only code into non-debug environment"+(a?": "+a:"."));};goog.forwardDeclare=function(a){};
COMPILED||(goog.isProvided_=function(a){return a in goog.loadedModules_||!goog.implicitNamespaces_[a]&&goog.isDefAndNotNull(goog.getObjectByName(a))},goog.implicitNamespaces_={"goog.module":!0});goog.getObjectByName=function(a,b){a=a.split(".");b=b||goog.global;for(var c=0;c<a.length;c++)if(b=b[a[c]],!goog.isDefAndNotNull(b))return null;return b};goog.globalize=function(a,b){b=b||goog.global;for(var c in a)b[c]=a[c]};
goog.addDependency=function(a,b,c,d){!COMPILED&&goog.DEPENDENCIES_ENABLED&&goog.debugLoader_.addDependency(a,b,c,d)};goog.ENABLE_DEBUG_LOADER=!0;goog.logToConsole_=function(a){goog.global.console&&goog.global.console.error(a)};
goog.require=function(a){if(!COMPILED){goog.ENABLE_DEBUG_LOADER&&goog.debugLoader_.requested(a);if(goog.isProvided_(a)){if(goog.isInModuleLoader_())return goog.module.getInternal_(a)}else if(goog.ENABLE_DEBUG_LOADER){var b=goog.moduleLoaderState_;goog.moduleLoaderState_=null;try{goog.debugLoader_.load_(a)}finally{goog.moduleLoaderState_=b}}return null}};goog.requireType=function(a){return{}};goog.basePath="";goog.nullFunction=function(){};
goog.abstractMethod=function(){throw Error("unimplemented abstract method");};goog.addSingletonGetter=function(a){a.instance_=void 0;a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.LOAD_MODULE_USING_EVAL=!0;goog.SEAL_MODULE_EXPORTS=goog.DEBUG;goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;goog.TRANSPILE="detect";
goog.ASSUME_ES_MODULES_TRANSPILED=!1;goog.TRANSPILE_TO_LANGUAGE="";goog.TRANSPILER="transpile.js";goog.hasBadLetScoping=null;goog.useSafari10Workaround=function(){if(null==goog.hasBadLetScoping){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(b){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping};goog.workaroundSafari10EvalBug=function(a){return"(function(){"+a+"\n;})();\n"};
goog.loadModule=function(a){var b=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG};if(goog.isFunction(a))var c=a.call(void 0,{});else if(goog.isString(a))goog.useSafari10Workaround()&&(a=goog.workaroundSafari10EvalBug(a)),c=goog.loadModuleFromSource_.call(void 0,a);else throw Error("Invalid module definition");var d=goog.moduleLoaderState_.moduleName;if(goog.isString(d)&&d)goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(d,
c):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof c&&null!=c&&Object.seal(c),goog.loadedModules_[d]={exports:c,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName};else throw Error('Invalid module name "'+d+'"');}finally{goog.moduleLoaderState_=b}};goog.loadModuleFromSource_=function(a){eval(a);return{}};goog.normalizePath_=function(a){a=a.split("/");for(var b=0;b<a.length;)"."==a[b]?a.splice(b,1):b&&".."==a[b]&&a[b-1]&&".."!=a[b-1]?a.splice(--b,2):b++;return a.join("/")};
goog.loadFileSync_=function(a){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(a);try{var b=new goog.global.XMLHttpRequest;b.open("get",a,!1);b.send();return 0==b.status||200==b.status?b.responseText:null}catch(c){return null}};
goog.transpile_=function(a,b,c){var d=goog.global.$jscomp;d||(goog.global.$jscomp=d={});var e=d.transpile;if(!e){var f=goog.basePath+goog.TRANSPILER,g=goog.loadFileSync_(f);if(g){(function(){eval(g+"\n//# sourceURL="+f)}).call(goog.global);if(goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=
goog.global.$gwtExport.$jscomp.transpile;d=goog.global.$jscomp;e=d.transpile}}e||(e=d.transpile=function(a,b){goog.logToConsole_(b+" requires transpilation but no transpiler was found.");return a});return e(a,b,c)};
goog.typeOf=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isFunction=function(a){return"function"==goog.typeOf(a)};
goog.isObject=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(a){return!!a[goog.UID_PROPERTY_]};goog.removeUid=function(a){null!==a&&"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;
goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if("function"===typeof a.clone)return a.clone();b="array"==b?[]:{};for(var c in a)b[c]=goog.cloneObject(a[c]);return b}return a};goog.bindNative_=function(a,b,c){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}};goog.bind=function(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}};goog.mixin=function(a,b){for(var c in b)a[c]=b[c]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval){if(null==goog.evalWorksForGlobals_){try{goog.global.eval("var _evalTest_ = 1;")}catch(d){}if("undefined"!=typeof goog.global._evalTest_){try{delete goog.global._evalTest_}catch(d){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(a);else{var b=goog.global.document,c=b.createElement("SCRIPT");c.type="text/javascript";c.defer=
!1;c.appendChild(b.createTextNode(a));b.head.appendChild(c);b.head.removeChild(c)}}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;
goog.getCssName=function(a,b){if("."==String(a).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+a);var c=function(a){return goog.cssNameMapping_[a]||a},d=function(a){a=a.split("-");for(var b=[],d=0;d<a.length;d++)b.push(c(a[d]));return b.join("-")};d=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?c:d:function(a){return a};a=b?a+"-"+d(b):d(a);return goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(a):a};
goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,b){b&&(a=a.replace(/\{\$([^}]+)}/g,function(a,d){return null!=b&&d in b?b[d]:a}));return a};goog.getMsgWithFallback=function(a,b){return a};goog.exportSymbol=function(a,b,c){goog.exportPath_(a,b,c)};goog.exportProperty=function(a,b,c){a[b]=c};
goog.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.base=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};
goog.base=function(a,b,c){var d=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!d)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if("undefined"!==typeof d.superClass_){for(var e=Array(arguments.length-1),f=1;f<arguments.length;f++)e[f-1]=arguments[f];return d.superClass_.constructor.apply(a,e)}if("string"!=typeof b&&"symbol"!=typeof b)throw Error("method names provided to goog.base must be a string or a symbol");
e=Array(arguments.length-2);for(f=2;f<arguments.length;f++)e[f-2]=arguments[f];f=!1;for(var g=a.constructor;g;g=g.superClass_&&g.superClass_.constructor)if(g.prototype[b]===d)f=!0;else if(f)return g.prototype[b].apply(a,e);if(a[b]===d)return a.constructor.prototype[b].apply(a,e);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");a.call(goog.global)};
COMPILED||(goog.global.COMPILED=COMPILED);goog.defineClass=function(a,b){var c=b.constructor,d=b.statics;c&&c!=Object.prototype.constructor||(c=function(){throw Error("cannot instantiate an interface (no constructor defined).");});c=goog.defineClass.createSealingConstructor_(c,a);a&&goog.inherits(c,a);delete b.constructor;delete b.statics;goog.defineClass.applyProperties_(c.prototype,b);null!=d&&(d instanceof Function?d(c):goog.defineClass.applyProperties_(c,d));return c};
goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG;goog.defineClass.createSealingConstructor_=function(a,b){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return a;var c=!goog.defineClass.isUnsealable_(b),d=function(){var b=a.apply(this,arguments)||this;b[goog.UID_PROPERTY_]=b[goog.UID_PROPERTY_];this.constructor===d&&c&&Object.seal instanceof Function&&Object.seal(b);return b};return d};goog.defineClass.isUnsealable_=function(a){return a&&a.prototype&&a.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]};
goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");goog.defineClass.applyProperties_=function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);for(var d=0;d<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;d++)c=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[d],Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};
goog.tagUnsealableClass=function(a){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(a.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)};goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable";
!COMPILED&&goog.DEPENDENCIES_ENABLED&&(goog.inHtmlDocument_=function(){var a=goog.global.document;return null!=a&&"write"in a},goog.isDocumentLoading_=function(){var a=goog.global.document;return a.attachEvent?"complete"!=a.readyState:"loading"==a.readyState},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH)&&goog.isString(goog.global.CLOSURE_BASE_PATH))goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_()){var a=goog.global.document,b=a.currentScript;
a=b?[b]:a.getElementsByTagName("SCRIPT");for(b=a.length-1;0<=b;--b){var c=a[b].src,d=c.lastIndexOf("?");d=-1==d?c.length:d;if("base.js"==c.substr(d-7,7)){goog.basePath=c.substr(0,d-7);break}}}},goog.findBasePath_(),goog.Transpiler=function(){this.requiresTranspilation_=null;this.transpilationTarget_=goog.TRANSPILE_TO_LANGUAGE},goog.Transpiler.prototype.createRequiresTranspilation_=function(){function a(a,b){e?d[a]=!0:b()?(c=a,d[a]=!1):e=d[a]=!0}function b(a){try{return!!eval(a)}catch(h){return!1}}
var c="es3",d={es3:!1},e=!1,f=goog.global.navigator&&goog.global.navigator.userAgent?goog.global.navigator.userAgent:"";a("es5",function(){return b("[1,].length==1")});a("es6",function(){return f.match(/Edge\/(\d+)(\.\d)*/i)?!1:b('(()=>{"use strict";class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()')});
a("es7",function(){return b("2 ** 2 == 4")});a("es8",function(){return b("async () => 1, true")});a("es9",function(){return b("({...rest} = {}), true")});a("es_next",function(){return!1});return{target:c,map:d}},goog.Transpiler.prototype.needsTranspile=function(a,b){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1;if(!this.requiresTranspilation_){var c=this.createRequiresTranspilation_();this.requiresTranspilation_=c.map;this.transpilationTarget_=this.transpilationTarget_||
c.target}if(a in this.requiresTranspilation_)return this.requiresTranspilation_[a]?!0:!goog.inHtmlDocument_()||"es6"!=b||"noModule"in goog.global.document.createElement("script")?!1:!0;throw Error("Unknown language mode: "+a);},goog.Transpiler.prototype.transpile=function(a,b){return goog.transpile_(a,b,this.transpilationTarget_)},goog.transpiler_=new goog.Transpiler,goog.protectScriptTag_=function(a){return a.replace(/<\/(SCRIPT)/ig,"\\x3c/$1")},goog.DebugLoader_=function(){this.dependencies_={};
this.idToPath_={};this.written_={};this.loadingDeps_=[];this.depsToLoad_=[];this.paused_=!1;this.factory_=new goog.DependencyFactory(goog.transpiler_);this.deferredCallbacks_={};this.deferredQueue_=[]},goog.DebugLoader_.prototype.bootstrap=function(a,b){function c(){d&&(goog.global.setTimeout(d,0),d=null)}var d=b;if(a.length){b=[];for(var e=0;e<a.length;e++){var f=this.getPathFromDeps_(a[e]);if(!f)throw Error("Unregonized namespace: "+a[e]);b.push(this.dependencies_[f])}f=goog.require;var g=0;for(e=
0;e<a.length;e++)f(a[e]),b[e].onLoad(function(){++g==a.length&&c()})}else c()},goog.DebugLoader_.prototype.loadClosureDeps=function(){this.depsToLoad_.push(this.factory_.createDependency(goog.normalizePath_(goog.basePath+"deps.js"),"deps.js",[],[],{},!1));this.loadDeps_()},goog.DebugLoader_.prototype.requested=function(a,b){(a=this.getPathFromDeps_(a))&&(b||this.areDepsLoaded_(this.dependencies_[a].requires))&&(b=this.deferredCallbacks_[a])&&(delete this.deferredCallbacks_[a],b())},goog.DebugLoader_.prototype.setDependencyFactory=
function(a){this.factory_=a},goog.DebugLoader_.prototype.load_=function(a){if(this.getPathFromDeps_(a)){var b=this,c=[],d=function(a){var e=b.getPathFromDeps_(a);if(!e)throw Error("Bad dependency path or symbol: "+a);if(!b.written_[e]){b.written_[e]=!0;a=b.dependencies_[e];for(e=0;e<a.requires.length;e++)goog.isProvided_(a.requires[e])||d(a.requires[e]);c.push(a)}};d(a);a=!!this.depsToLoad_.length;this.depsToLoad_=this.depsToLoad_.concat(c);this.paused_||a||this.loadDeps_()}else throw a="goog.require could not find: "+
a,goog.logToConsole_(a),Error(a);},goog.DebugLoader_.prototype.loadDeps_=function(){for(var a=this,b=this.paused_;this.depsToLoad_.length&&!b;)(function(){var c=!1,d=a.depsToLoad_.shift(),e=!1;a.loading_(d);var f={pause:function(){if(c)throw Error("Cannot call pause after the call to load.");b=!0},resume:function(){c?a.resume_():b=!1},loaded:function(){if(e)throw Error("Double call to loaded.");e=!0;a.loaded_(d)},pending:function(){for(var b=[],c=0;c<a.loadingDeps_.length;c++)b.push(a.loadingDeps_[c]);
return b},setModuleState:function(a){goog.moduleLoaderState_={type:a,moduleName:"",declareLegacyNamespace:!1}},registerEs6ModuleExports:function(a,b,c){c&&(goog.loadedModules_[c]={exports:b,type:goog.ModuleType.ES6,moduleId:c||""})},registerGoogModuleExports:function(a,b){goog.loadedModules_[a]={exports:b,type:goog.ModuleType.GOOG,moduleId:a}},clearModuleState:function(){goog.moduleLoaderState_=null},defer:function(b){if(c)throw Error("Cannot register with defer after the call to load.");a.defer_(d,
b)},areDepsLoaded:function(){return a.areDepsLoaded_(d.requires)}};try{d.load(f)}finally{c=!0}})();b&&this.pause_()},goog.DebugLoader_.prototype.pause_=function(){this.paused_=!0},goog.DebugLoader_.prototype.resume_=function(){this.paused_&&(this.paused_=!1,this.loadDeps_())},goog.DebugLoader_.prototype.loading_=function(a){this.loadingDeps_.push(a)},goog.DebugLoader_.prototype.loaded_=function(a){for(var b=0;b<this.loadingDeps_.length;b++)if(this.loadingDeps_[b]==a){this.loadingDeps_.splice(b,1);
break}for(b=0;b<this.deferredQueue_.length;b++)if(this.deferredQueue_[b]==a.path){this.deferredQueue_.splice(b,1);break}if(this.loadingDeps_.length==this.deferredQueue_.length&&!this.depsToLoad_.length)for(;this.deferredQueue_.length;)this.requested(this.deferredQueue_.shift(),!0);a.loaded()},goog.DebugLoader_.prototype.areDepsLoaded_=function(a){for(var b=0;b<a.length;b++){var c=this.getPathFromDeps_(a[b]);if(!c||!(c in this.deferredCallbacks_||goog.isProvided_(a[b])))return!1}return!0},goog.DebugLoader_.prototype.getPathFromDeps_=
function(a){return a in this.idToPath_?this.idToPath_[a]:a in this.dependencies_?a:null},goog.DebugLoader_.prototype.defer_=function(a,b){this.deferredCallbacks_[a.path]=b;this.deferredQueue_.push(a.path)},goog.LoadController=function(){},goog.LoadController.prototype.pause=function(){},goog.LoadController.prototype.resume=function(){},goog.LoadController.prototype.loaded=function(){},goog.LoadController.prototype.pending=function(){},goog.LoadController.prototype.registerEs6ModuleExports=function(a,
b,c){},goog.LoadController.prototype.setModuleState=function(a){},goog.LoadController.prototype.clearModuleState=function(){},goog.LoadController.prototype.defer=function(a){},goog.LoadController.prototype.areDepsLoaded=function(){},goog.Dependency=function(a,b,c,d,e){this.path=a;this.relativePath=b;this.provides=c;this.requires=d;this.loadFlags=e;this.loaded_=!1;this.loadCallbacks_=[]},goog.Dependency.prototype.getPathName=function(){var a=this.path,b=a.indexOf("://");0<=b&&(a=a.substring(b+3),b=
a.indexOf("/"),0<=b&&(a=a.substring(b+1)));return a},goog.Dependency.prototype.onLoad=function(a){this.loaded_?a():this.loadCallbacks_.push(a)},goog.Dependency.prototype.loaded=function(){this.loaded_=!0;var a=this.loadCallbacks_;this.loadCallbacks_=[];for(var b=0;b<a.length;b++)a[b]()},goog.Dependency.defer_=!1,goog.Dependency.callbackMap_={},goog.Dependency.registerCallback_=function(a){var b=Math.random().toString(32);goog.Dependency.callbackMap_[b]=a;return b},goog.Dependency.unregisterCallback_=
function(a){delete goog.Dependency.callbackMap_[a]},goog.Dependency.callback_=function(a,b){if(a in goog.Dependency.callbackMap_){for(var c=goog.Dependency.callbackMap_[a],d=[],e=1;e<arguments.length;e++)d.push(arguments[e]);c.apply(void 0,d)}else throw Error("Callback key "+a+" does not exist (was base.js loaded more than once?).");},goog.Dependency.prototype.load=function(a){if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?a.loaded():a.pause();else if(goog.inHtmlDocument_()){var b=
goog.global.document;if("complete"==b.readyState&&!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING){if(/\bdeps.js$/.test(this.path)){a.loaded();return}throw Error('Cannot write "'+this.path+'" after document load');}if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&goog.isDocumentLoading_()){var c=goog.Dependency.registerCallback_(function(b){goog.DebugLoader_.IS_OLD_IE_&&"complete"!=b.readyState||(goog.Dependency.unregisterCallback_(c),a.loaded())}),d=!goog.DebugLoader_.IS_OLD_IE_&&goog.getScriptNonce()?
' nonce="'+goog.getScriptNonce()+'"':"";d='<script src="'+this.path+'" '+(goog.DebugLoader_.IS_OLD_IE_?"onreadystatechange":"onload")+"=\"goog.Dependency.callback_('"+c+'\', this)" type="text/javascript" '+(goog.Dependency.defer_?"defer":"")+d+">\x3c/script>";b.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(d):d)}else{var e=b.createElement("script");e.defer=goog.Dependency.defer_;e.async=!1;e.type="text/javascript";(d=goog.getScriptNonce())&&e.setAttribute("nonce",d);goog.DebugLoader_.IS_OLD_IE_?
(a.pause(),e.onreadystatechange=function(){if("loaded"==e.readyState||"complete"==e.readyState)a.loaded(),a.resume()}):e.onload=function(){e.onload=null;a.loaded()};e.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(this.path):this.path;b.head.appendChild(e)}}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),"deps.js"==this.relativePath?(goog.logToConsole_("Consider setting CLOSURE_IMPORT_SCRIPT before loading base.js, or setting CLOSURE_NO_DEPS to true."),
a.loaded()):a.pause()},goog.Es6ModuleDependency=function(a,b,c,d,e){goog.Dependency.call(this,a,b,c,d,e)},goog.inherits(goog.Es6ModuleDependency,goog.Dependency),goog.Es6ModuleDependency.prototype.load=function(a){function b(a,b){a=b?'<script type="module" crossorigin>'+b+"\x3c/script>":'<script type="module" crossorigin src="'+a+'">\x3c/script>';d.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(a):a)}function c(a,b){var c=d.createElement("script");c.defer=!0;c.async=!1;c.type=
"module";c.setAttribute("crossorigin",!0);var e=goog.getScriptNonce();e&&c.setAttribute("nonce",e);b?c.textContent=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScript(b):b:c.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(a):a;d.head.appendChild(c)}if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?a.loaded():a.pause();else if(goog.inHtmlDocument_()){var d=goog.global.document,e=this;if(goog.isDocumentLoading_()){var f=b;goog.Dependency.defer_=
!0}else f=c;var g=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(g);a.setModuleState(goog.ModuleType.ES6)});f(void 0,'goog.Dependency.callback_("'+g+'")');f(this.path,void 0);var h=goog.Dependency.registerCallback_(function(b){goog.Dependency.unregisterCallback_(h);a.registerEs6ModuleExports(e.path,b,goog.moduleLoaderState_.moduleName)});f(void 0,'import * as m from "'+this.path+'"; goog.Dependency.callback_("'+h+'", m)');var k=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(k);
a.clearModuleState();a.loaded()});f(void 0,'goog.Dependency.callback_("'+k+'")')}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),a.pause()},goog.TransformedDependency=function(a,b,c,d,e){goog.Dependency.call(this,a,b,c,d,e);this.contents_=null;this.lazyFetch_=!goog.inHtmlDocument_()||!("noModule"in goog.global.document.createElement("script"))},goog.inherits(goog.TransformedDependency,goog.Dependency),goog.TransformedDependency.prototype.load=function(a){function b(){e.contents_=
goog.loadFileSync_(e.path);e.contents_&&(e.contents_=e.transform(e.contents_),e.contents_&&(e.contents_+="\n//# sourceURL="+e.path))}function c(){e.lazyFetch_&&b();if(e.contents_){f&&a.setModuleState(goog.ModuleType.ES6);try{var c=e.contents_;e.contents_=null;goog.globalEval(c);if(f)var d=goog.moduleLoaderState_.moduleName}finally{f&&a.clearModuleState()}f&&goog.global.$jscomp.require.ensure([e.getPathName()],function(){a.registerEs6ModuleExports(e.path,goog.global.$jscomp.require(e.getPathName()),
d)});a.loaded()}}function d(){var a=goog.global.document,b=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(b);c()}),d='<script type="text/javascript">'+goog.protectScriptTag_('goog.Dependency.callback_("'+b+'");')+"\x3c/script>";a.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(d):d)}var e=this;if(goog.global.CLOSURE_IMPORT_SCRIPT)b(),this.contents_&&goog.global.CLOSURE_IMPORT_SCRIPT("",this.contents_)?(this.contents_=null,a.loaded()):a.pause();
else{var f=this.loadFlags.module==goog.ModuleType.ES6;this.lazyFetch_||b();var g=1<a.pending().length,h=g&&goog.DebugLoader_.IS_OLD_IE_;g=goog.Dependency.defer_&&(g||goog.isDocumentLoading_());if(h||g)a.defer(function(){c()});else{var k=goog.global.document;h=goog.inHtmlDocument_()&&"ActiveXObject"in goog.global;if(f&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()&&!h){goog.Dependency.defer_=!0;a.pause();var l=k.onreadystatechange;k.onreadystatechange=function(){"interactive"==k.readyState&&(k.onreadystatechange=
l,c(),a.resume());goog.isFunction(l)&&l.apply(void 0,arguments)}}else!goog.DebugLoader_.IS_OLD_IE_&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()?d():c()}}},goog.TransformedDependency.prototype.transform=function(a){},goog.TranspiledDependency=function(a,b,c,d,e,f){goog.TransformedDependency.call(this,a,b,c,d,e);this.transpiler=f},goog.inherits(goog.TranspiledDependency,goog.TransformedDependency),goog.TranspiledDependency.prototype.transform=function(a){return this.transpiler.transpile(a,this.getPathName())},
goog.PreTranspiledEs6ModuleDependency=function(a,b,c,d,e){goog.TransformedDependency.call(this,a,b,c,d,e)},goog.inherits(goog.PreTranspiledEs6ModuleDependency,goog.TransformedDependency),goog.PreTranspiledEs6ModuleDependency.prototype.transform=function(a){return a},goog.GoogModuleDependency=function(a,b,c,d,e,f,g){goog.TransformedDependency.call(this,a,b,c,d,e);this.needsTranspile_=f;this.transpiler_=g},goog.inherits(goog.GoogModuleDependency,goog.TransformedDependency),goog.GoogModuleDependency.prototype.transform=
function(a){this.needsTranspile_&&(a=this.transpiler_.transpile(a,this.getPathName()));return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(a+"\n//# sourceURL="+this.path+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+a+"\n;return exports});\n//# sourceURL="+this.path+"\n"},goog.DebugLoader_.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.DebugLoader_.prototype.addDependency=function(a,b,
c,d){b=b||[];a=a.replace(/\\/g,"/");var e=goog.normalizePath_(goog.basePath+a);d&&"boolean"!==typeof d||(d=d?{module:goog.ModuleType.GOOG}:{});c=this.factory_.createDependency(e,a,b,c,d,goog.transpiler_.needsTranspile(d.lang||"es3",d.module));this.dependencies_[e]=c;for(c=0;c<b.length;c++)this.idToPath_[b[c]]=e;this.idToPath_[a]=e},goog.DependencyFactory=function(a){this.transpiler=a},goog.DependencyFactory.prototype.createDependency=function(a,b,c,d,e,f){return e.module==goog.ModuleType.GOOG?new goog.GoogModuleDependency(a,
b,c,d,e,f,this.transpiler):f?new goog.TranspiledDependency(a,b,c,d,e,this.transpiler):e.module==goog.ModuleType.ES6?"never"==goog.TRANSPILE&&goog.ASSUME_ES_MODULES_TRANSPILED?new goog.PreTranspiledEs6ModuleDependency(a,b,c,d,e):new goog.Es6ModuleDependency(a,b,c,d,e):new goog.Dependency(a,b,c,d,e)},goog.debugLoader_=new goog.DebugLoader_,goog.loadClosureDeps=function(){goog.debugLoader_.loadClosureDeps()},goog.setDependencyFactory=function(a){goog.debugLoader_.setDependencyFactory(a)},goog.global.CLOSURE_NO_DEPS||
goog.debugLoader_.loadClosureDeps(),goog.bootstrap=function(a,b){goog.debugLoader_.bootstrap(a,b)});goog.TRUSTED_TYPES_POLICY_NAME="";goog.identity_=function(a){return a};goog.createTrustedTypesPolicy=function(a){return"undefined"!==typeof TrustedTypes&&TrustedTypes.createPolicy?TrustedTypes.createPolicy(a,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_,createURL:goog.identity_}):null};
goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):null;goog.debug={};goog.debug.Error=function(a){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a));this.reportErrorToServer=!0};goog.inherits(goog.debug.Error,Error);goog.debug.Error.prototype.name="CustomError";goog.dom={};goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};goog.asserts={};goog.asserts.ENABLE_ASSERTS=goog.DEBUG;goog.asserts.AssertionError=function(a,b){goog.debug.Error.call(this,goog.asserts.subs_(a,b));this.messagePattern=a};goog.inherits(goog.asserts.AssertionError,goog.debug.Error);goog.asserts.AssertionError.prototype.name="AssertionError";goog.asserts.DEFAULT_ERROR_HANDLER=function(a){throw a;};goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER;
goog.asserts.subs_=function(a,b){a=a.split("%s");for(var c="",d=a.length-1,e=0;e<d;e++)c+=a[e]+(e<b.length?b[e]:"%s");return c+a[d]};goog.asserts.doAssertFailure_=function(a,b,c,d){var e="Assertion failed";if(c){e+=": "+c;var f=d}else a&&(e+=": "+a,f=b);a=new goog.asserts.AssertionError(""+e,f||[]);goog.asserts.errorHandler_(a)};goog.asserts.setErrorHandler=function(a){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=a)};
goog.asserts.assert=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!a&&goog.asserts.doAssertFailure_("",null,b,Array.prototype.slice.call(arguments,2));return a};goog.asserts.fail=function(a,b){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))};
goog.asserts.assertNumber=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(a)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2));return a};goog.asserts.assertString=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!goog.isString(a)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.assertFunction=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(a)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2));return a};goog.asserts.assertObject=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!goog.isObject(a)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.assertArray=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!goog.isArray(a)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2));return a};goog.asserts.assertBoolean=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(a)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.assertElement=function(a,b,c){!goog.asserts.ENABLE_ASSERTS||goog.isObject(a)&&a.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.assertInstanceof=function(a,b,c,d){!goog.asserts.ENABLE_ASSERTS||a instanceof b||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(b),goog.asserts.getType_(a)],c,Array.prototype.slice.call(arguments,3));return a};goog.asserts.assertFinite=function(a,b,c){!goog.asserts.ENABLE_ASSERTS||"number"==typeof a&&isFinite(a)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[a],b,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.assertObjectPrototypeIsIntact=function(){for(var a in Object.prototype)goog.asserts.fail(a+" should not be enumerable in Object.prototype.")};goog.asserts.getType_=function(a){return a instanceof Function?a.displayName||a.name||"unknown type name":a instanceof Object?a.constructor.displayName||a.constructor.name||Object.prototype.toString.call(a):null===a?"null":typeof a};goog.array={};goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE;goog.array.ASSUME_NATIVE_FUNCTIONS=!1;goog.array.peek=function(a){return a[a.length-1]};goog.array.last=goog.array.peek;
goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(a,b,c){goog.asserts.assert(null!=a.length);return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(goog.isString(a))return goog.isString(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1};
goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(a,b,c){goog.asserts.assert(null!=a.length);return Array.prototype.lastIndexOf.call(a,b,null==c?a.length-1:c)}:function(a,b,c){c=null==c?a.length-1:c;0>c&&(c=Math.max(0,a.length+c));if(goog.isString(a))return goog.isString(b)&&1==b.length?a.lastIndexOf(b,c):-1;for(;0<=c;c--)if(c in a&&a[c]===b)return c;return-1};
goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(a,b,c){goog.asserts.assert(null!=a.length);Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=goog.isString(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};goog.array.forEachRight=function(a,b,c){var d=a.length,e=goog.isString(a)?a.split(""):a;for(--d;0<=d;--d)d in e&&b.call(c,e[d],d,a)};
goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(a,b,c){goog.asserts.assert(null!=a.length);return Array.prototype.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=goog.isString(a)?a.split(""):a,h=0;h<d;h++)if(h in g){var k=g[h];b.call(c,k,h,a)&&(e[f++]=k)}return e};
goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(a,b,c){goog.asserts.assert(null!=a.length);return Array.prototype.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=goog.isString(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e};
goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(a,b,c,d){goog.asserts.assert(null!=a.length);d&&(b=goog.bind(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;goog.array.forEach(a,function(c,g){e=b.call(d,e,c,g,a)});return e};
goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(a,b,c,d){goog.asserts.assert(null!=a.length);goog.asserts.assert(null!=b);d&&(b=goog.bind(b,d));return Array.prototype.reduceRight.call(a,b,c)}:function(a,b,c,d){var e=c;goog.array.forEachRight(a,function(c,g){e=b.call(d,e,c,g,a)});return e};
goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(a,b,c){goog.asserts.assert(null!=a.length);return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=goog.isString(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(a,b,c){goog.asserts.assert(null!=a.length);return Array.prototype.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=goog.isString(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0};goog.array.count=function(a,b,c){var d=0;goog.array.forEach(a,function(a,f,g){b.call(c,a,f,g)&&++d},c);return d};
goog.array.find=function(a,b,c){b=goog.array.findIndex(a,b,c);return 0>b?null:goog.isString(a)?a.charAt(b):a[b]};goog.array.findIndex=function(a,b,c){for(var d=a.length,e=goog.isString(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1};goog.array.findRight=function(a,b,c){b=goog.array.findIndexRight(a,b,c);return 0>b?null:goog.isString(a)?a.charAt(b):a[b]};
goog.array.findIndexRight=function(a,b,c){var d=a.length,e=goog.isString(a)?a.split(""):a;for(--d;0<=d;d--)if(d in e&&b.call(c,e[d],d,a))return d;return-1};goog.array.contains=function(a,b){return 0<=goog.array.indexOf(a,b)};goog.array.isEmpty=function(a){return 0==a.length};goog.array.clear=function(a){if(!goog.isArray(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0};goog.array.insert=function(a,b){goog.array.contains(a,b)||a.push(b)};
goog.array.insertAt=function(a,b,c){goog.array.splice(a,c,0,b)};goog.array.insertArrayAt=function(a,b,c){goog.partial(goog.array.splice,a,c,0).apply(null,b)};goog.array.insertBefore=function(a,b,c){var d;2==arguments.length||0>(d=goog.array.indexOf(a,c))?a.push(b):goog.array.insertAt(a,b,d)};goog.array.remove=function(a,b){b=goog.array.indexOf(a,b);var c;(c=0<=b)&&goog.array.removeAt(a,b);return c};
goog.array.removeLast=function(a,b){b=goog.array.lastIndexOf(a,b);return 0<=b?(goog.array.removeAt(a,b),!0):!1};goog.array.removeAt=function(a,b){goog.asserts.assert(null!=a.length);return 1==Array.prototype.splice.call(a,b,1).length};goog.array.removeIf=function(a,b,c){b=goog.array.findIndex(a,b,c);return 0<=b?(goog.array.removeAt(a,b),!0):!1};goog.array.removeAllIf=function(a,b,c){var d=0;goog.array.forEachRight(a,function(e,f){b.call(c,e,f,a)&&goog.array.removeAt(a,f)&&d++});return d};
goog.array.concat=function(a){return Array.prototype.concat.apply([],arguments)};goog.array.join=function(a){return Array.prototype.concat.apply([],arguments)};goog.array.toArray=function(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]};goog.array.clone=goog.array.toArray;goog.array.extend=function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(goog.isArrayLike(d)){var e=a.length||0,f=d.length||0;a.length=e+f;for(var g=0;g<f;g++)a[e+g]=d[g]}else a.push(d)}};
goog.array.splice=function(a,b,c,d){goog.asserts.assert(null!=a.length);return Array.prototype.splice.apply(a,goog.array.slice(arguments,1))};goog.array.slice=function(a,b,c){goog.asserts.assert(null!=a.length);return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)};
goog.array.removeDuplicates=function(a,b,c){b=b||a;var d=function(a){return goog.isObject(a)?"o"+goog.getUid(a):(typeof a).charAt(0)+a};c=c||d;d={};for(var e=0,f=0;f<a.length;){var g=a[f++],h=c(g);Object.prototype.hasOwnProperty.call(d,h)||(d[h]=!0,b[e++]=g)}b.length=e};goog.array.binarySearch=function(a,b,c){return goog.array.binarySearch_(a,c||goog.array.defaultCompare,!1,b)};goog.array.binarySelect=function(a,b,c){return goog.array.binarySearch_(a,b,!0,void 0,c)};
goog.array.binarySearch_=function(a,b,c,d,e){for(var f=0,g=a.length,h;f<g;){var k=f+g>>1;var l=c?b.call(e,a[k],k,a):b(d,a[k]);0<l?f=k+1:(g=k,h=!l)}return h?f:~f};goog.array.sort=function(a,b){a.sort(b||goog.array.defaultCompare)};goog.array.stableSort=function(a,b){for(var c=Array(a.length),d=0;d<a.length;d++)c[d]={index:d,value:a[d]};var e=b||goog.array.defaultCompare;goog.array.sort(c,function(a,b){return e(a.value,b.value)||a.index-b.index});for(d=0;d<a.length;d++)a[d]=c[d].value};
goog.array.sortByKey=function(a,b,c){var d=c||goog.array.defaultCompare;goog.array.sort(a,function(a,c){return d(b(a),b(c))})};goog.array.sortObjectsByKey=function(a,b,c){goog.array.sortByKey(a,function(a){return a[b]},c)};goog.array.isSorted=function(a,b,c){b=b||goog.array.defaultCompare;for(var d=1;d<a.length;d++){var e=b(a[d-1],a[d]);if(0<e||0==e&&c)return!1}return!0};
goog.array.equals=function(a,b,c){if(!goog.isArrayLike(a)||!goog.isArrayLike(b)||a.length!=b.length)return!1;var d=a.length;c=c||goog.array.defaultCompareEquality;for(var e=0;e<d;e++)if(!c(a[e],b[e]))return!1;return!0};goog.array.compare3=function(a,b,c){c=c||goog.array.defaultCompare;for(var d=Math.min(a.length,b.length),e=0;e<d;e++){var f=c(a[e],b[e]);if(0!=f)return f}return goog.array.defaultCompare(a.length,b.length)};goog.array.defaultCompare=function(a,b){return a>b?1:a<b?-1:0};
goog.array.inverseDefaultCompare=function(a,b){return-goog.array.defaultCompare(a,b)};goog.array.defaultCompareEquality=function(a,b){return a===b};goog.array.binaryInsert=function(a,b,c){c=goog.array.binarySearch(a,b,c);return 0>c?(goog.array.insertAt(a,b,-(c+1)),!0):!1};goog.array.binaryRemove=function(a,b,c){b=goog.array.binarySearch(a,b,c);return 0<=b?goog.array.removeAt(a,b):!1};
goog.array.bucket=function(a,b,c){for(var d={},e=0;e<a.length;e++){var f=a[e],g=b.call(c,f,e,a);goog.isDef(g)&&(d[g]||(d[g]=[])).push(f)}return d};goog.array.toObject=function(a,b,c){var d={};goog.array.forEach(a,function(e,f){d[b.call(c,e,f,a)]=e});return d};goog.array.range=function(a,b,c){var d=[],e=0,f=a;c=c||1;void 0!==b&&(e=a,f=b);if(0>c*(f-e))return[];if(0<c)for(a=e;a<f;a+=c)d.push(a);else for(a=e;a>f;a+=c)d.push(a);return d};
goog.array.repeat=function(a,b){for(var c=[],d=0;d<b;d++)c[d]=a;return c};goog.array.flatten=function(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if(goog.isArray(d))for(var e=0;e<d.length;e+=8192){var f=goog.array.slice(d,e,e+8192);f=goog.array.flatten.apply(null,f);for(var g=0;g<f.length;g++)b.push(f[g])}else b.push(d)}return b};
goog.array.rotate=function(a,b){goog.asserts.assert(null!=a.length);a.length&&(b%=a.length,0<b?Array.prototype.unshift.apply(a,a.splice(-b,b)):0>b&&Array.prototype.push.apply(a,a.splice(0,-b)));return a};goog.array.moveItem=function(a,b,c){goog.asserts.assert(0<=b&&b<a.length);goog.asserts.assert(0<=c&&c<a.length);b=Array.prototype.splice.call(a,b,1);Array.prototype.splice.call(a,c,0,b[0])};
goog.array.zip=function(a){if(!arguments.length)return[];for(var b=[],c=arguments[0].length,d=1;d<arguments.length;d++)arguments[d].length<c&&(c=arguments[d].length);for(d=0;d<c;d++){for(var e=[],f=0;f<arguments.length;f++)e.push(arguments[f][d]);b.push(e)}return b};goog.array.shuffle=function(a,b){b=b||Math.random;for(var c=a.length-1;0<c;c--){var d=Math.floor(b()*(c+1)),e=a[c];a[c]=a[d];a[d]=e}};goog.array.copyByIndex=function(a,b){var c=[];goog.array.forEach(b,function(b){c.push(a[b])});return c};
goog.array.concatMap=function(a,b,c){return goog.array.concat.apply([],goog.array.map(a,b,c))};goog.object={};goog.object.is=function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b};goog.object.forEach=function(a,b,c){for(var d in a)b.call(c,a[d],d,a)};goog.object.filter=function(a,b,c){var d={},e;for(e in a)b.call(c,a[e],e,a)&&(d[e]=a[e]);return d};goog.object.map=function(a,b,c){var d={},e;for(e in a)d[e]=b.call(c,a[e],e,a);return d};goog.object.some=function(a,b,c){for(var d in a)if(b.call(c,a[d],d,a))return!0;return!1};
goog.object.every=function(a,b,c){for(var d in a)if(!b.call(c,a[d],d,a))return!1;return!0};goog.object.getCount=function(a){var b=0,c;for(c in a)b++;return b};goog.object.getAnyKey=function(a){for(var b in a)return b};goog.object.getAnyValue=function(a){for(var b in a)return a[b]};goog.object.contains=function(a,b){return goog.object.containsValue(a,b)};goog.object.getValues=function(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};
goog.object.getKeys=function(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b};goog.object.getValueByKeys=function(a,b){var c=goog.isArrayLike(b),d=c?b:arguments;for(c=c?0:1;c<d.length;c++){if(null==a)return;a=a[d[c]]}return a};goog.object.containsKey=function(a,b){return null!==a&&b in a};goog.object.containsValue=function(a,b){for(var c in a)if(a[c]==b)return!0;return!1};goog.object.findKey=function(a,b,c){for(var d in a)if(b.call(c,a[d],d,a))return d};
goog.object.findValue=function(a,b,c){return(b=goog.object.findKey(a,b,c))&&a[b]};goog.object.isEmpty=function(a){for(var b in a)return!1;return!0};goog.object.clear=function(a){for(var b in a)delete a[b]};goog.object.remove=function(a,b){var c;(c=b in a)&&delete a[b];return c};goog.object.add=function(a,b,c){if(null!==a&&b in a)throw Error('The object already contains the key "'+b+'"');goog.object.set(a,b,c)};goog.object.get=function(a,b,c){return null!==a&&b in a?a[b]:c};
goog.object.set=function(a,b,c){a[b]=c};goog.object.setIfUndefined=function(a,b,c){return b in a?a[b]:a[b]=c};goog.object.setWithReturnValueIfNotSet=function(a,b,c){if(b in a)return a[b];c=c();return a[b]=c};goog.object.equals=function(a,b){for(var c in a)if(!(c in b)||a[c]!==b[c])return!1;for(c in b)if(!(c in a))return!1;return!0};goog.object.clone=function(a){var b={},c;for(c in a)b[c]=a[c];return b};
goog.object.unsafeClone=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(goog.isFunction(a.clone))return a.clone();b="array"==b?[]:{};for(var c in a)b[c]=goog.object.unsafeClone(a[c]);return b}return a};goog.object.transpose=function(a){var b={},c;for(c in a)b[a[c]]=c;return b};goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
goog.object.extend=function(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<goog.object.PROTOTYPE_FIELDS_.length;f++)c=goog.object.PROTOTYPE_FIELDS_[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};
goog.object.create=function(a){var b=arguments.length;if(1==b&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(b%2)throw Error("Uneven number of arguments");for(var c={},d=0;d<b;d+=2)c[arguments[d]]=arguments[d+1];return c};goog.object.createSet=function(a){var b=arguments.length;if(1==b&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};
goog.object.createImmutableView=function(a){var b=a;Object.isFrozen&&!Object.isFrozen(a)&&(b=Object.create(a),Object.freeze(b));return b};goog.object.isImmutableView=function(a){return!!Object.isFrozen&&Object.isFrozen(a)};
goog.object.getAllPropertyNames=function(a,b,c){if(!a)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(a);for(var d={};a&&(a!==Object.prototype||b)&&(a!==Function.prototype||c);){for(var e=Object.getOwnPropertyNames(a),f=0;f<e.length;f++)d[e[f]]=!0;a=Object.getPrototypeOf(a)}return goog.object.getKeys(d)};goog.debug.entryPointRegistry={};goog.debug.EntryPointMonitor=function(){};goog.debug.entryPointRegistry.refList_=[];goog.debug.entryPointRegistry.monitors_=[];goog.debug.entryPointRegistry.monitorsMayExist_=!1;goog.debug.entryPointRegistry.register=function(a){goog.debug.entryPointRegistry.refList_[goog.debug.entryPointRegistry.refList_.length]=a;if(goog.debug.entryPointRegistry.monitorsMayExist_)for(var b=goog.debug.entryPointRegistry.monitors_,c=0;c<b.length;c++)a(goog.bind(b[c].wrap,b[c]))};
goog.debug.entryPointRegistry.monitorAll=function(a){goog.debug.entryPointRegistry.monitorsMayExist_=!0;for(var b=goog.bind(a.wrap,a),c=0;c<goog.debug.entryPointRegistry.refList_.length;c++)goog.debug.entryPointRegistry.refList_[c](b);goog.debug.entryPointRegistry.monitors_.push(a)};
goog.debug.entryPointRegistry.unmonitorAllIfPossible=function(a){var b=goog.debug.entryPointRegistry.monitors_;goog.asserts.assert(a==b[b.length-1],"Only the most recent monitor can be unwrapped.");a=goog.bind(a.unwrap,a);for(var c=0;c<goog.debug.entryPointRegistry.refList_.length;c++)goog.debug.entryPointRegistry.refList_[c](a);b.length--};goog.debug.errorcontext={};goog.debug.errorcontext.addErrorContext=function(a,b,c){a[goog.debug.errorcontext.CONTEXT_KEY_]||(a[goog.debug.errorcontext.CONTEXT_KEY_]={});a[goog.debug.errorcontext.CONTEXT_KEY_][b]=c};goog.debug.errorcontext.getErrorContext=function(a){return a[goog.debug.errorcontext.CONTEXT_KEY_]||{}};goog.debug.errorcontext.CONTEXT_KEY_="__closure__error__context__984382";goog.string={};goog.string.internal={};goog.string.internal.startsWith=function(a,b){return 0==a.lastIndexOf(b,0)};goog.string.internal.endsWith=function(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c};goog.string.internal.caseInsensitiveStartsWith=function(a,b){return 0==goog.string.internal.caseInsensitiveCompare(b,a.substr(0,b.length))};goog.string.internal.caseInsensitiveEndsWith=function(a,b){return 0==goog.string.internal.caseInsensitiveCompare(b,a.substr(a.length-b.length,b.length))};
goog.string.internal.caseInsensitiveEquals=function(a,b){return a.toLowerCase()==b.toLowerCase()};goog.string.internal.isEmptyOrWhitespace=function(a){return/^[\s\xa0]*$/.test(a)};goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};goog.string.internal.caseInsensitiveCompare=function(a,b){a=String(a).toLowerCase();b=String(b).toLowerCase();return a<b?-1:a==b?0:1};
goog.string.internal.newLineToBr=function(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")};
goog.string.internal.htmlEscape=function(a,b){if(b)a=a.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{if(!goog.string.internal.ALL_RE_.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(goog.string.internal.AMP_RE_,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(goog.string.internal.LT_RE_,
"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(goog.string.internal.GT_RE_,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(goog.string.internal.QUOT_RE_,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(goog.string.internal.NULL_RE_,"&#0;"))}return a};goog.string.internal.AMP_RE_=/&/g;goog.string.internal.LT_RE_=/</g;goog.string.internal.GT_RE_=/>/g;goog.string.internal.QUOT_RE_=/"/g;goog.string.internal.SINGLE_QUOTE_RE_=/'/g;
goog.string.internal.NULL_RE_=/\x00/g;goog.string.internal.ALL_RE_=/[\x00&<>"']/;goog.string.internal.whitespaceEscape=function(a,b){return goog.string.internal.newLineToBr(a.replace(/  /g," &#160;"),b)};goog.string.internal.contains=function(a,b){return-1!=a.indexOf(b)};goog.string.internal.caseInsensitiveContains=function(a,b){return goog.string.internal.contains(a.toLowerCase(),b.toLowerCase())};
goog.string.internal.compareVersions=function(a,b){var c=0;a=goog.string.internal.trim(String(a)).split(".");b=goog.string.internal.trim(String(b)).split(".");for(var d=Math.max(a.length,b.length),e=0;0==c&&e<d;e++){var f=a[e]||"",g=b[e]||"";do{f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""];g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""];if(0==f[0].length&&0==g[0].length)break;c=0==f[1].length?0:parseInt(f[1],10);var h=0==g[1].length?0:parseInt(g[1],10);c=goog.string.internal.compareElements_(c,h)||goog.string.internal.compareElements_(0==
f[2].length,0==g[2].length)||goog.string.internal.compareElements_(f[2],g[2]);f=f[3];g=g[3]}while(0==c)}return c};goog.string.internal.compareElements_=function(a,b){return a<b?-1:a>b?1:0};goog.labs={};goog.labs.userAgent={};goog.labs.userAgent.util={};goog.labs.userAgent.util.getNativeUserAgentString_=function(){var a=goog.labs.userAgent.util.getNavigator_();return a&&(a=a.userAgent)?a:""};goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator};goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_();goog.labs.userAgent.util.setUserAgent=function(a){goog.labs.userAgent.util.userAgent_=a||goog.labs.userAgent.util.getNativeUserAgentString_()};
goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_};goog.labs.userAgent.util.matchUserAgent=function(a){var b=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.contains(b,a)};goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(a){var b=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.caseInsensitiveContains(b,a)};
goog.labs.userAgent.util.extractVersionTuples=function(a){for(var b=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,c=[],d;d=b.exec(a);)c.push([d[1],d[2],d[3]||void 0]);return c};goog.labs.userAgent.browser={};goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")};goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")};goog.labs.userAgent.browser.matchEdge_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")};
goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")||goog.labs.userAgent.util.matchUserAgent("FxiOS")};
goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdge_()||goog.labs.userAgent.browser.matchFirefox_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))};goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")};
goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&!goog.labs.userAgent.browser.matchFirefox_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")};
goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdge_()};goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())};
goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_;goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_;goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdge_;goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_;goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_;goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_;goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_;
goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_;goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_;goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")};
goog.labs.userAgent.browser.getVersion=function(){function a(a){a=goog.array.find(a,d);return c[a]||""}var b=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(b);b=goog.labs.userAgent.util.extractVersionTuples(b);var c={};goog.array.forEach(b,function(a){c[a[0]]=a[1]});var d=goog.partial(goog.object.containsKey,c);return goog.labs.userAgent.browser.isOpera()?a(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?a(["Edge"]):
goog.labs.userAgent.browser.isChrome()?a(["Chrome","CriOS"]):(b=b[2])&&b[1]||""};goog.labs.userAgent.browser.isVersionOrHigher=function(a){return 0<=goog.string.internal.compareVersions(goog.labs.userAgent.browser.getVersion(),a)};
goog.labs.userAgent.browser.getIEVersion_=function(a){var b=/rv: *([\d\.]*)/.exec(a);if(b&&b[1])return b[1];b="";var c=/MSIE +([\d\.]+)/.exec(a);if(c&&c[1])if(a=/Trident\/(\d.\d)/.exec(a),"7.0"==c[1])if(a&&a[1])switch(a[1]){case "4.0":b="8.0";break;case "5.0":b="9.0";break;case "6.0":b="10.0";break;case "7.0":b="11.0"}else b="7.0";else b=c[1];return b};goog.string.DETECT_DOUBLE_ESCAPING=!1;goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1;goog.string.Unicode={NBSP:"\u00a0"};goog.string.startsWith=goog.string.internal.startsWith;goog.string.endsWith=goog.string.internal.endsWith;goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith;goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith;goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals;
goog.string.subs=function(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")};goog.string.collapseWhitespace=function(a){return a.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")};goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace;goog.string.isEmptyString=function(a){return 0==a.length};goog.string.isEmpty=goog.string.isEmptyOrWhitespace;goog.string.isEmptyOrWhitespaceSafe=function(a){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(a))};
goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe;goog.string.isBreakingWhitespace=function(a){return!/[^\t\n\r ]/.test(a)};goog.string.isAlpha=function(a){return!/[^a-zA-Z]/.test(a)};goog.string.isNumeric=function(a){return!/[^0-9]/.test(a)};goog.string.isAlphaNumeric=function(a){return!/[^a-zA-Z0-9]/.test(a)};goog.string.isSpace=function(a){return" "==a};goog.string.isUnicodeChar=function(a){return 1==a.length&&" "<=a&&"~">=a||"\u0080"<=a&&"\ufffd">=a};
goog.string.stripNewlines=function(a){return a.replace(/(\r\n|\r|\n)+/g," ")};goog.string.canonicalizeNewlines=function(a){return a.replace(/(\r\n|\r|\n)/g,"\n")};goog.string.normalizeWhitespace=function(a){return a.replace(/\xa0|\s/g," ")};goog.string.normalizeSpaces=function(a){return a.replace(/\xa0|[ \t]+/g," ")};goog.string.collapseBreakingSpaces=function(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};goog.string.trim=goog.string.internal.trim;
goog.string.trimLeft=function(a){return a.replace(/^[\s\xa0]+/,"")};goog.string.trimRight=function(a){return a.replace(/[\s\xa0]+$/,"")};goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare;
goog.string.numberAwareCompare_=function(a,b,c){if(a==b)return 0;if(!a)return-1;if(!b)return 1;for(var d=a.toLowerCase().match(c),e=b.toLowerCase().match(c),f=Math.min(d.length,e.length),g=0;g<f;g++){c=d[g];var h=e[g];if(c!=h)return a=parseInt(c,10),!isNaN(a)&&(b=parseInt(h,10),!isNaN(b)&&a-b)?a-b:c<h?-1:1}return d.length!=e.length?d.length-e.length:a<b?-1:1};goog.string.intAwareCompare=function(a,b){return goog.string.numberAwareCompare_(a,b,/\d+|\D+/g)};
goog.string.floatAwareCompare=function(a,b){return goog.string.numberAwareCompare_(a,b,/\d+|\.\d+|\D+/g)};goog.string.numerateCompare=goog.string.floatAwareCompare;goog.string.urlEncode=function(a){return encodeURIComponent(String(a))};goog.string.urlDecode=function(a){return decodeURIComponent(a.replace(/\+/g," "))};goog.string.newLineToBr=goog.string.internal.newLineToBr;
goog.string.htmlEscape=function(a,b){a=goog.string.internal.htmlEscape(a,b);goog.string.DETECT_DOUBLE_ESCAPING&&(a=a.replace(goog.string.E_RE_,"&#101;"));return a};goog.string.E_RE_=/e/g;goog.string.unescapeEntities=function(a){return goog.string.contains(a,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(a):goog.string.unescapePureXmlEntities_(a):a};
goog.string.unescapeEntitiesWithDocument=function(a,b){return goog.string.contains(a,"&")?goog.string.unescapeEntitiesUsingDom_(a,b):a};
goog.string.unescapeEntitiesUsingDom_=function(a,b){var c={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'};var d=b?b.createElement("div"):goog.global.document.createElement("div");return a.replace(goog.string.HTML_ENTITY_PATTERN_,function(a,b){var e=c[a];if(e)return e;"#"==b.charAt(0)&&(b=Number("0"+b.substr(1)),isNaN(b)||(e=String.fromCharCode(b)));e||(d.innerHTML=a+" ",e=d.firstChild.nodeValue.slice(0,-1));return c[a]=e})};
goog.string.unescapePureXmlEntities_=function(a){return a.replace(/&([^;]+);/g,function(a,c){switch(c){case "amp":return"&";case "lt":return"<";case "gt":return">";case "quot":return'"';default:return"#"!=c.charAt(0)||(c=Number("0"+c.substr(1)),isNaN(c))?a:String.fromCharCode(c)}})};goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g;goog.string.whitespaceEscape=function(a,b){return goog.string.newLineToBr(a.replace(/  /g," &#160;"),b)};
goog.string.preserveSpaces=function(a){return a.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)};goog.string.stripQuotes=function(a,b){for(var c=b.length,d=0;d<c;d++){var e=1==c?b:b.charAt(d);if(a.charAt(0)==e&&a.charAt(a.length-1)==e)return a.substring(1,a.length-1)}return a};goog.string.truncate=function(a,b,c){c&&(a=goog.string.unescapeEntities(a));a.length>b&&(a=a.substring(0,b-3)+"...");c&&(a=goog.string.htmlEscape(a));return a};
goog.string.truncateMiddle=function(a,b,c,d){c&&(a=goog.string.unescapeEntities(a));if(d&&a.length>b){d>b&&(d=b);var e=a.length-d;a=a.substring(0,b-d)+"..."+a.substring(e)}else a.length>b&&(d=Math.floor(b/2),e=a.length-d,a=a.substring(0,d+b%2)+"..."+a.substring(e));c&&(a=goog.string.htmlEscape(a));return a};goog.string.specialEscapeChars_={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\","<":"<"};goog.string.jsEscapeCache_={"'":"\\'"};
goog.string.quote=function(a){a=String(a);for(var b=['"'],c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0);b[c+1]=goog.string.specialEscapeChars_[d]||(31<e&&127>e?d:goog.string.escapeChar(d))}b.push('"');return b.join("")};goog.string.escapeString=function(a){for(var b=[],c=0;c<a.length;c++)b[c]=goog.string.escapeChar(a.charAt(c));return b.join("")};
goog.string.escapeChar=function(a){if(a in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[a];if(a in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[a]=goog.string.specialEscapeChars_[a];var b=a.charCodeAt(0);if(31<b&&127>b)var c=a;else{if(256>b){if(c="\\x",16>b||256<b)c+="0"}else c="\\u",4096>b&&(c+="0");c+=b.toString(16).toUpperCase()}return goog.string.jsEscapeCache_[a]=c};goog.string.contains=goog.string.internal.contains;goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains;
goog.string.countOf=function(a,b){return a&&b?a.split(b).length-1:0};goog.string.removeAt=function(a,b,c){var d=a;0<=b&&b<a.length&&0<c&&(d=a.substr(0,b)+a.substr(b+c,a.length-b-c));return d};goog.string.remove=function(a,b){return a.replace(b,"")};goog.string.removeAll=function(a,b){b=new RegExp(goog.string.regExpEscape(b),"g");return a.replace(b,"")};goog.string.replaceAll=function(a,b,c){b=new RegExp(goog.string.regExpEscape(b),"g");return a.replace(b,c.replace(/\$/g,"$$$$"))};
goog.string.regExpEscape=function(a){return String(a).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};goog.string.repeat=String.prototype.repeat?function(a,b){return a.repeat(b)}:function(a,b){return Array(b+1).join(a)};goog.string.padNumber=function(a,b,c){a=goog.isDef(c)?a.toFixed(c):String(a);c=a.indexOf(".");-1==c&&(c=a.length);return goog.string.repeat("0",Math.max(0,b-c))+a};goog.string.makeSafe=function(a){return null==a?"":String(a)};
goog.string.buildString=function(a){return Array.prototype.join.call(arguments,"")};goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)};goog.string.compareVersions=goog.string.internal.compareVersions;goog.string.hashCode=function(a){for(var b=0,c=0;c<a.length;++c)b=31*b+a.charCodeAt(c)>>>0;return b};goog.string.uniqueStringCounter_=2147483648*Math.random()|0;
goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++};goog.string.toNumber=function(a){var b=Number(a);return 0==b&&goog.string.isEmptyOrWhitespace(a)?NaN:b};goog.string.isLowerCamelCase=function(a){return/^[a-z]+([A-Z][a-z]*)*$/.test(a)};goog.string.isUpperCamelCase=function(a){return/^([A-Z][a-z]*)+$/.test(a)};goog.string.toCamelCase=function(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})};
goog.string.toSelectorCase=function(a){return String(a).replace(/([A-Z])/g,"-$1").toLowerCase()};goog.string.toTitleCase=function(a,b){b=goog.isString(b)?goog.string.regExpEscape(b):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};goog.string.capitalize=function(a){return String(a.charAt(0)).toUpperCase()+String(a.substr(1)).toLowerCase()};
goog.string.parseInt=function(a){isFinite(a)&&(a=String(a));return goog.isString(a)?/^\s*-?0x/i.test(a)?parseInt(a,16):parseInt(a,10):NaN};goog.string.splitLimit=function(a,b,c){a=a.split(b);for(var d=[];0<c&&a.length;)d.push(a.shift()),c--;a.length&&d.push(a.join(b));return d};goog.string.lastComponent=function(a,b){if(b)"string"==typeof b&&(b=[b]);else return a;for(var c=-1,d=0;d<b.length;d++)if(""!=b[d]){var e=a.lastIndexOf(b[d]);e>c&&(c=e)}return-1==c?a:a.slice(c+1)};
goog.string.editDistance=function(a,b){var c=[],d=[];if(a==b)return 0;if(!a.length||!b.length)return Math.max(a.length,b.length);for(var e=0;e<b.length+1;e++)c[e]=e;for(e=0;e<a.length;e++){d[0]=e+1;for(var f=0;f<b.length;f++)d[f+1]=Math.min(d[f]+1,c[f+1]+1,c[f]+Number(a[e]!=b[f]));for(f=0;f<c.length;f++)c[f]=d[f]}return d[b.length]};goog.labs.userAgent.engine={};goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")};goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")};goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")};
goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()};goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()};
goog.labs.userAgent.engine.getVersion=function(){var a=goog.labs.userAgent.util.getUserAgent();if(a){a=goog.labs.userAgent.util.extractVersionTuples(a);var b=goog.labs.userAgent.engine.getEngineTuple_(a);if(b)return"Gecko"==b[0]?goog.labs.userAgent.engine.getVersionForKey_(a,"Firefox"):b[1];a=a[0];var c;if(a&&(c=a[2])&&(c=/Trident\/([^\s;]+)/.exec(c)))return c[1]}return""};
goog.labs.userAgent.engine.getEngineTuple_=function(a){if(!goog.labs.userAgent.engine.isEdge())return a[1];for(var b=0;b<a.length;b++){var c=a[b];if("Edge"==c[0])return c}};goog.labs.userAgent.engine.isVersionOrHigher=function(a){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),a)};goog.labs.userAgent.engine.getVersionForKey_=function(a,b){return(a=goog.array.find(a,function(a){return b==a[0]}))&&a[1]||""};goog.labs.userAgent.platform={};goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")};goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")};goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")};goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")};
goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()};goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")};goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")};goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")};
goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")};goog.labs.userAgent.platform.isChromecast=function(){return goog.labs.userAgent.util.matchUserAgent("CrKey")};goog.labs.userAgent.platform.isKaiOS=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("KaiOS")};goog.labs.userAgent.platform.isGo2Phone=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("GAFP")};
goog.labs.userAgent.platform.getVersion=function(){var a=goog.labs.userAgent.util.getUserAgent(),b="";goog.labs.userAgent.platform.isWindows()?(b=/Windows (?:NT|Phone) ([0-9.]+)/,b=(a=b.exec(a))?a[1]:"0.0"):goog.labs.userAgent.platform.isIos()?(b=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/,b=(a=b.exec(a))&&a[1].replace(/_/g,".")):goog.labs.userAgent.platform.isMacintosh()?(b=/Mac OS X ([0-9_.]+)/,b=(a=b.exec(a))?a[1].replace(/_/g,"."):"10"):goog.labs.userAgent.platform.isAndroid()?(b=/Android\s+([^\);]+)(\)|;)/,
b=(a=b.exec(a))&&a[1]):goog.labs.userAgent.platform.isChromeOS()&&(b=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/,b=(a=b.exec(a))&&a[1]);return b||""};goog.labs.userAgent.platform.isVersionOrHigher=function(a){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),a)};goog.reflect={};goog.reflect.object=function(a,b){return b};goog.reflect.objectProperty=function(a,b){return a};goog.reflect.sinkValue=function(a){goog.reflect.sinkValue[" "](a);return a};goog.reflect.sinkValue[" "]=goog.nullFunction;goog.reflect.canAccessProperty=function(a,b){try{return goog.reflect.sinkValue(a[b]),!0}catch(c){}return!1};goog.reflect.cache=function(a,b,c,d){d=d?d(b):b;return Object.prototype.hasOwnProperty.call(a,d)?a[d]:a[d]=c(b)};goog.userAgent={};goog.userAgent.ASSUME_IE=!1;goog.userAgent.ASSUME_EDGE=!1;goog.userAgent.ASSUME_GECKO=!1;goog.userAgent.ASSUME_WEBKIT=!1;goog.userAgent.ASSUME_MOBILE_WEBKIT=!1;goog.userAgent.ASSUME_OPERA=!1;goog.userAgent.ASSUME_ANY_VERSION=!1;goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA;goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()};
goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null};goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()};goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera();goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE();goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge();
goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE;goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko();goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit();goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")};
goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_();goog.userAgent.SAFARI=goog.userAgent.WEBKIT;goog.userAgent.determinePlatform_=function(){var a=goog.userAgent.getNavigatorTyped();return a&&a.platform||""};goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_();goog.userAgent.ASSUME_MAC=!1;goog.userAgent.ASSUME_WINDOWS=!1;goog.userAgent.ASSUME_LINUX=!1;goog.userAgent.ASSUME_X11=!1;goog.userAgent.ASSUME_ANDROID=!1;goog.userAgent.ASSUME_IPHONE=!1;
goog.userAgent.ASSUME_IPAD=!1;goog.userAgent.ASSUME_IPOD=!1;goog.userAgent.ASSUME_KAIOS=!1;goog.userAgent.ASSUME_GO2PHONE=!1;goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD;goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh();
goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows();goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()};goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_();goog.userAgent.isX11_=function(){var a=goog.userAgent.getNavigatorTyped();return!!a&&goog.string.contains(a.appVersion||"","X11")};
goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_();goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid();goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone();goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad();
goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod();goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos();goog.userAgent.KAIOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_KAIOS:goog.labs.userAgent.platform.isKaiOS();goog.userAgent.GO2PHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_GO2PHONE:goog.labs.userAgent.platform.isGo2Phone();
goog.userAgent.determineVersion_=function(){var a="",b=goog.userAgent.getVersionRegexResult_();b&&(a=b?b[1]:"");return goog.userAgent.IE&&(b=goog.userAgent.getDocumentMode_(),null!=b&&b>parseFloat(a))?String(b):a};
goog.userAgent.getVersionRegexResult_=function(){var a=goog.userAgent.getUserAgentString();if(goog.userAgent.GECKO)return/rv:([^\);]+)(\)|;)/.exec(a);if(goog.userAgent.EDGE)return/Edge\/([\d\.]+)/.exec(a);if(goog.userAgent.IE)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(goog.userAgent.WEBKIT)return/WebKit\/(\S+)/.exec(a);if(goog.userAgent.OPERA)return/(?:Version)[ \/]?(\S+)/.exec(a)};goog.userAgent.getDocumentMode_=function(){var a=goog.global.document;return a?a.documentMode:void 0};
goog.userAgent.VERSION=goog.userAgent.determineVersion_();goog.userAgent.compare=function(a,b){return goog.string.compareVersions(a,b)};goog.userAgent.isVersionOrHigherCache_={};goog.userAgent.isVersionOrHigher=function(a){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,a,function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,a)})};goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher;
goog.userAgent.isDocumentModeOrHigher=function(a){return Number(goog.userAgent.DOCUMENT_MODE)>=a};goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher;goog.userAgent.DOCUMENT_MODE=function(){var a=goog.global.document,b=goog.userAgent.getDocumentMode_();if(a&&goog.userAgent.IE)return b||("CSS1Compat"==a.compatMode?parseInt(goog.userAgent.VERSION,10):5)}();goog.debug.LOGGING_ENABLED=goog.DEBUG;goog.debug.FORCE_SLOPPY_STACKS=!1;goog.debug.catchErrors=function(a,b,c){c=c||goog.global;var d=c.onerror,e=!!b;goog.userAgent.WEBKIT&&!goog.userAgent.isVersionOrHigher("535.3")&&(e=!e);c.onerror=function(b,c,h,k,l){d&&d(b,c,h,k,l);a({message:b,fileName:c,line:h,lineNumber:h,col:k,error:l});return e}};
goog.debug.expose=function(a,b){if("undefined"==typeof a)return"undefined";if(null==a)return"NULL";var c=[],d;for(d in a)if(b||!goog.isFunction(a[d])){var e=d+" = ";try{e+=a[d]}catch(f){e+="*** "+f+" ***"}c.push(e)}return c.join("\n")};
goog.debug.deepExpose=function(a,b){var c=[],d=[],e={},f=function(a,h){var g=h+"  ";try{if(goog.isDef(a))if(goog.isNull(a))c.push("NULL");else if(goog.isString(a))c.push('"'+a.replace(/\n/g,"\n"+h)+'"');else if(goog.isFunction(a))c.push(String(a).replace(/\n/g,"\n"+h));else if(goog.isObject(a)){goog.hasUid(a)||d.push(a);var l=goog.getUid(a);if(e[l])c.push("*** reference loop detected (id="+l+") ***");else{e[l]=!0;c.push("{");for(var m in a)if(b||!goog.isFunction(a[m]))c.push("\n"),c.push(g),c.push(m+
" = "),f(a[m],g);c.push("\n"+h+"}");delete e[l]}}else c.push(a);else c.push("undefined")}catch(n){c.push("*** "+n+" ***")}};f(a,"");for(a=0;a<d.length;a++)goog.removeUid(d[a]);return c.join("")};goog.debug.exposeArray=function(a){for(var b=[],c=0;c<a.length;c++)goog.isArray(a[c])?b.push(goog.debug.exposeArray(a[c])):b.push(a[c]);return"[ "+b.join(", ")+" ]"};
goog.debug.normalizeErrorObject=function(a){var b=goog.getObjectByName("window.location.href");null==a&&(a='Unknown Error of type "null/undefined"');if(goog.isString(a))return{message:a,name:"Unknown error",lineNumber:"Not available",fileName:b,stack:"Not available"};var c=!1;try{var d=a.lineNumber||a.line||"Not available"}catch(f){d="Not available",c=!0}try{var e=a.fileName||a.filename||a.sourceURL||goog.global.$googDebugFname||b}catch(f){e="Not available",c=!0}return!c&&a.lineNumber&&a.fileName&&
a.stack&&a.message&&a.name?a:(b=a.message,null==b&&(b=a.constructor&&a.constructor instanceof Function?'Unknown Error of type "'+(a.constructor.name?a.constructor.name:goog.debug.getFunctionName(a.constructor))+'"':"Unknown Error of unknown type"),{message:b,name:a.name||"UnknownError",lineNumber:d,fileName:e,stack:a.stack||"Not available"})};
goog.debug.enhanceError=function(a,b){a instanceof Error||(a=Error(a),Error.captureStackTrace&&Error.captureStackTrace(a,goog.debug.enhanceError));a.stack||(a.stack=goog.debug.getStacktrace(goog.debug.enhanceError));if(b){for(var c=0;a["message"+c];)++c;a["message"+c]=String(b)}return a};goog.debug.enhanceErrorWithContext=function(a,b){a=goog.debug.enhanceError(a);if(b)for(var c in b)goog.debug.errorcontext.addErrorContext(a,c,b[c]);return a};
goog.debug.getStacktraceSimple=function(a){if(!goog.debug.FORCE_SLOPPY_STACKS){var b=goog.debug.getNativeStackTrace_(goog.debug.getStacktraceSimple);if(b)return b}b=[];for(var c=arguments.callee.caller,d=0;c&&(!a||d<a);){b.push(goog.debug.getFunctionName(c));b.push("()\n");try{c=c.caller}catch(e){b.push("[exception trying to get caller]\n");break}d++;if(d>=goog.debug.MAX_STACK_DEPTH){b.push("[...long stack...]");break}}a&&d>=a?b.push("[...reached max depth limit...]"):b.push("[end]");return b.join("")};
goog.debug.MAX_STACK_DEPTH=50;goog.debug.getNativeStackTrace_=function(a){var b=Error();if(Error.captureStackTrace)return Error.captureStackTrace(b,a),String(b.stack);try{throw b;}catch(c){b=c}return(a=b.stack)?String(a):null};goog.debug.getStacktrace=function(a){var b;goog.debug.FORCE_SLOPPY_STACKS||(b=goog.debug.getNativeStackTrace_(a||goog.debug.getStacktrace));b||(b=goog.debug.getStacktraceHelper_(a||arguments.callee.caller,[]));return b};
goog.debug.getStacktraceHelper_=function(a,b){var c=[];if(goog.array.contains(b,a))c.push("[...circular reference...]");else if(a&&b.length<goog.debug.MAX_STACK_DEPTH){c.push(goog.debug.getFunctionName(a)+"(");for(var d=a.arguments,e=0;d&&e<d.length;e++){0<e&&c.push(", ");var f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=goog.debug.getFunctionName(f))?f:"[fn]";break;default:f=
typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(goog.debug.getStacktraceHelper_(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?c.push("[...long stack...]"):c.push("[end]");return c.join("")};goog.debug.getFunctionName=function(a){if(goog.debug.fnNameCache_[a])return goog.debug.fnNameCache_[a];a=String(a);if(!goog.debug.fnNameCache_[a]){var b=/function\s+([^\(]+)/m.exec(a);goog.debug.fnNameCache_[a]=b?b[1]:"[Anonymous]"}return goog.debug.fnNameCache_[a]};
goog.debug.makeWhitespaceVisible=function(a){return a.replace(/ /g,"[_]").replace(/\f/g,"[f]").replace(/\n/g,"[n]\n").replace(/\r/g,"[r]").replace(/\t/g,"[t]")};goog.debug.runtimeType=function(a){return a instanceof Function?a.displayName||a.name||"unknown type name":a instanceof Object?a.constructor.displayName||a.constructor.name||Object.prototype.toString.call(a):null===a?"null":typeof a};goog.debug.fnNameCache_={};goog.debug.freezeInternal_=goog.DEBUG&&Object.freeze||function(a){return a};
goog.debug.freeze=function(a){return goog.debug.freezeInternal_(a)};goog.events={};$jscomp.scope.purify=function(a){return{valueOf:a}.valueOf()};
goog.events.BrowserFeature={HAS_W3C_BUTTON:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),HAS_W3C_EVENT_SUPPORT:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),SET_KEY_CODE_TO_PREVENT_DEFAULT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),HAS_NAVIGATOR_ONLINE_PROPERTY:!goog.userAgent.WEBKIT||goog.userAgent.isVersionOrHigher("528"),HAS_HTML5_NETWORK_EVENT_SUPPORT:goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9b")||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8")||
goog.userAgent.OPERA&&goog.userAgent.isVersionOrHigher("9.5")||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("528"),HTML5_NETWORK_EVENTS_FIRE_ON_BODY:goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher("8")||goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),TOUCH_ENABLED:"ontouchstart"in goog.global||!!(goog.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!goog.global.navigator||!goog.global.navigator.maxTouchPoints&&!goog.global.navigator.msMaxTouchPoints),
POINTER_EVENTS:"PointerEvent"in goog.global,MSPOINTER_EVENTS:"MSPointerEvent"in goog.global&&!(!goog.global.navigator||!goog.global.navigator.msPointerEnabled),PASSIVE_EVENTS:(0,$jscomp.scope.purify)(function(){if(!goog.global.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{goog.global.addEventListener("test",goog.nullFunction,b),goog.global.removeEventListener("test",goog.nullFunction,b)}catch(c){}return a})};goog.disposable={};goog.disposable.IDisposable=function(){};goog.disposable.IDisposable.prototype.dispose=goog.abstractMethod;goog.disposable.IDisposable.prototype.isDisposed=goog.abstractMethod;goog.Disposable=function(){goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF&&(goog.Disposable.INCLUDE_STACK_ON_CREATION&&(this.creationStack=Error().stack),goog.Disposable.instances_[goog.getUid(this)]=this);this.disposed_=this.disposed_;this.onDisposeCallbacks_=this.onDisposeCallbacks_};goog.Disposable.MonitoringMode={OFF:0,PERMANENT:1,INTERACTIVE:2};goog.Disposable.MONITORING_MODE=0;goog.Disposable.INCLUDE_STACK_ON_CREATION=!0;goog.Disposable.instances_={};
goog.Disposable.getUndisposedObjects=function(){var a=[],b;for(b in goog.Disposable.instances_)goog.Disposable.instances_.hasOwnProperty(b)&&a.push(goog.Disposable.instances_[Number(b)]);return a};goog.Disposable.clearUndisposedObjects=function(){goog.Disposable.instances_={}};goog.Disposable.prototype.disposed_=!1;goog.Disposable.prototype.isDisposed=function(){return this.disposed_};goog.Disposable.prototype.getDisposed=goog.Disposable.prototype.isDisposed;
goog.Disposable.prototype.dispose=function(){if(!this.disposed_&&(this.disposed_=!0,this.disposeInternal(),goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF)){var a=goog.getUid(this);if(goog.Disposable.MONITORING_MODE==goog.Disposable.MonitoringMode.PERMANENT&&!goog.Disposable.instances_.hasOwnProperty(a))throw Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call");if(goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF&&
this.onDisposeCallbacks_&&0<this.onDisposeCallbacks_.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete goog.Disposable.instances_[a]}};goog.Disposable.prototype.registerDisposable=function(a){this.addOnDisposeCallback(goog.partial(goog.dispose,a))};
goog.Disposable.prototype.addOnDisposeCallback=function(a,b){this.disposed_?goog.isDef(b)?a.call(b):a():(this.onDisposeCallbacks_||(this.onDisposeCallbacks_=[]),this.onDisposeCallbacks_.push(goog.isDef(b)?goog.bind(a,b):a))};goog.Disposable.prototype.disposeInternal=function(){if(this.onDisposeCallbacks_)for(;this.onDisposeCallbacks_.length;)this.onDisposeCallbacks_.shift()()};goog.Disposable.isDisposed=function(a){return a&&"function"==typeof a.isDisposed?a.isDisposed():!1};
goog.dispose=function(a){a&&"function"==typeof a.dispose&&a.dispose()};goog.disposeAll=function(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];goog.isArrayLike(d)?goog.disposeAll.apply(null,d):goog.dispose(d)}};goog.events.EventId=function(a){this.id=a};goog.events.EventId.prototype.toString=function(){return this.id};goog.events.Event=function(a,b){this.type=a instanceof goog.events.EventId?String(a):a;this.currentTarget=this.target=b;this.defaultPrevented=this.propagationStopped_=!1;this.returnValue_=!0};goog.events.Event.prototype.stopPropagation=function(){this.propagationStopped_=!0};goog.events.Event.prototype.preventDefault=function(){this.defaultPrevented=!0;this.returnValue_=!1};goog.events.Event.stopPropagation=function(a){a.stopPropagation()};goog.events.Event.preventDefault=function(a){a.preventDefault()};goog.events.getVendorPrefixedName_=function(a){return goog.userAgent.WEBKIT?"webkit"+a:goog.userAgent.OPERA?"o"+a.toLowerCase():a.toLowerCase()};
goog.events.EventType={CLICK:"click",RIGHTCLICK:"rightclick",DBLCLICK:"dblclick",AUXCLICK:"auxclick",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSECANCEL:"mousecancel",SELECTIONCHANGE:"selectionchange",SELECTSTART:"selectstart",WHEEL:"wheel",KEYPRESS:"keypress",KEYDOWN:"keydown",KEYUP:"keyup",BLUR:"blur",FOCUS:"focus",DEACTIVATE:"deactivate",FOCUSIN:"focusin",FOCUSOUT:"focusout",CHANGE:"change",
RESET:"reset",SELECT:"select",SUBMIT:"submit",INPUT:"input",PROPERTYCHANGE:"propertychange",DRAGSTART:"dragstart",DRAG:"drag",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",DRAGEND:"dragend",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",TOUCHCANCEL:"touchcancel",BEFOREUNLOAD:"beforeunload",CONSOLEMESSAGE:"consolemessage",CONTEXTMENU:"contextmenu",DEVICECHANGE:"devicechange",DEVICEMOTION:"devicemotion",DEVICEORIENTATION:"deviceorientation",DOMCONTENTLOADED:"DOMContentLoaded",
ERROR:"error",HELP:"help",LOAD:"load",LOSECAPTURE:"losecapture",ORIENTATIONCHANGE:"orientationchange",READYSTATECHANGE:"readystatechange",RESIZE:"resize",SCROLL:"scroll",UNLOAD:"unload",CANPLAY:"canplay",CANPLAYTHROUGH:"canplaythrough",DURATIONCHANGE:"durationchange",EMPTIED:"emptied",ENDED:"ended",LOADEDDATA:"loadeddata",LOADEDMETADATA:"loadedmetadata",PAUSE:"pause",PLAY:"play",PLAYING:"playing",RATECHANGE:"ratechange",SEEKED:"seeked",SEEKING:"seeking",STALLED:"stalled",SUSPEND:"suspend",TIMEUPDATE:"timeupdate",
VOLUMECHANGE:"volumechange",WAITING:"waiting",SOURCEOPEN:"sourceopen",SOURCEENDED:"sourceended",SOURCECLOSED:"sourceclosed",ABORT:"abort",UPDATE:"update",UPDATESTART:"updatestart",UPDATEEND:"updateend",HASHCHANGE:"hashchange",PAGEHIDE:"pagehide",PAGESHOW:"pageshow",POPSTATE:"popstate",COPY:"copy",PASTE:"paste",CUT:"cut",BEFORECOPY:"beforecopy",BEFORECUT:"beforecut",BEFOREPASTE:"beforepaste",ONLINE:"online",OFFLINE:"offline",MESSAGE:"message",CONNECT:"connect",INSTALL:"install",ACTIVATE:"activate",
FETCH:"fetch",FOREIGNFETCH:"foreignfetch",MESSAGEERROR:"messageerror",STATECHANGE:"statechange",UPDATEFOUND:"updatefound",CONTROLLERCHANGE:"controllerchange",ANIMATIONSTART:goog.events.getVendorPrefixedName_("AnimationStart"),ANIMATIONEND:goog.events.getVendorPrefixedName_("AnimationEnd"),ANIMATIONITERATION:goog.events.getVendorPrefixedName_("AnimationIteration"),TRANSITIONEND:goog.events.getVendorPrefixedName_("TransitionEnd"),POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTERCANCEL:"pointercancel",
POINTERMOVE:"pointermove",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",MSGESTURECHANGE:"MSGestureChange",MSGESTUREEND:"MSGestureEnd",MSGESTUREHOLD:"MSGestureHold",MSGESTURESTART:"MSGestureStart",MSGESTURETAP:"MSGestureTap",MSGOTPOINTERCAPTURE:"MSGotPointerCapture",MSINERTIASTART:"MSInertiaStart",MSLOSTPOINTERCAPTURE:"MSLostPointerCapture",MSPOINTERCANCEL:"MSPointerCancel",
MSPOINTERDOWN:"MSPointerDown",MSPOINTERENTER:"MSPointerEnter",MSPOINTERHOVER:"MSPointerHover",MSPOINTERLEAVE:"MSPointerLeave",MSPOINTERMOVE:"MSPointerMove",MSPOINTEROUT:"MSPointerOut",MSPOINTEROVER:"MSPointerOver",MSPOINTERUP:"MSPointerUp",TEXT:"text",TEXTINPUT:goog.userAgent.IE?"textinput":"textInput",COMPOSITIONSTART:"compositionstart",COMPOSITIONUPDATE:"compositionupdate",COMPOSITIONEND:"compositionend",BEFOREINPUT:"beforeinput",EXIT:"exit",LOADABORT:"loadabort",LOADCOMMIT:"loadcommit",LOADREDIRECT:"loadredirect",
LOADSTART:"loadstart",LOADSTOP:"loadstop",RESPONSIVE:"responsive",SIZECHANGED:"sizechanged",UNRESPONSIVE:"unresponsive",VISIBILITYCHANGE:"visibilitychange",STORAGE:"storage",DOMSUBTREEMODIFIED:"DOMSubtreeModified",DOMNODEINSERTED:"DOMNodeInserted",DOMNODEREMOVED:"DOMNodeRemoved",DOMNODEREMOVEDFROMDOCUMENT:"DOMNodeRemovedFromDocument",DOMNODEINSERTEDINTODOCUMENT:"DOMNodeInsertedIntoDocument",DOMATTRMODIFIED:"DOMAttrModified",DOMCHARACTERDATAMODIFIED:"DOMCharacterDataModified",BEFOREPRINT:"beforeprint",
AFTERPRINT:"afterprint",BEFOREINSTALLPROMPT:"beforeinstallprompt",APPINSTALLED:"appinstalled"};goog.events.getPointerFallbackEventName_=function(a,b,c){return goog.events.BrowserFeature.POINTER_EVENTS?a:goog.events.BrowserFeature.MSPOINTER_EVENTS?b:c};
goog.events.PointerFallbackEventType={POINTERDOWN:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERDOWN,goog.events.EventType.MSPOINTERDOWN,goog.events.EventType.MOUSEDOWN),POINTERUP:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERUP,goog.events.EventType.MSPOINTERUP,goog.events.EventType.MOUSEUP),POINTERCANCEL:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERCANCEL,goog.events.EventType.MSPOINTERCANCEL,goog.events.EventType.MOUSECANCEL),
POINTERMOVE:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERMOVE,goog.events.EventType.MSPOINTERMOVE,goog.events.EventType.MOUSEMOVE),POINTEROVER:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTEROVER,goog.events.EventType.MSPOINTEROVER,goog.events.EventType.MOUSEOVER),POINTEROUT:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTEROUT,goog.events.EventType.MSPOINTEROUT,goog.events.EventType.MOUSEOUT),POINTERENTER:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERENTER,
goog.events.EventType.MSPOINTERENTER,goog.events.EventType.MOUSEENTER),POINTERLEAVE:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERLEAVE,goog.events.EventType.MSPOINTERLEAVE,goog.events.EventType.MOUSELEAVE)};
goog.events.PointerTouchFallbackEventType={POINTERDOWN:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERDOWN,goog.events.EventType.MSPOINTERDOWN,goog.events.EventType.TOUCHSTART),POINTERUP:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERUP,goog.events.EventType.MSPOINTERUP,goog.events.EventType.TOUCHEND),POINTERCANCEL:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERCANCEL,goog.events.EventType.MSPOINTERCANCEL,goog.events.EventType.TOUCHCANCEL),
POINTERMOVE:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERMOVE,goog.events.EventType.MSPOINTERMOVE,goog.events.EventType.TOUCHMOVE)};
goog.events.PointerAsMouseEventType={MOUSEDOWN:goog.events.PointerFallbackEventType.POINTERDOWN,MOUSEUP:goog.events.PointerFallbackEventType.POINTERUP,MOUSECANCEL:goog.events.PointerFallbackEventType.POINTERCANCEL,MOUSEMOVE:goog.events.PointerFallbackEventType.POINTERMOVE,MOUSEOVER:goog.events.PointerFallbackEventType.POINTEROVER,MOUSEOUT:goog.events.PointerFallbackEventType.POINTEROUT,MOUSEENTER:goog.events.PointerFallbackEventType.POINTERENTER,MOUSELEAVE:goog.events.PointerFallbackEventType.POINTERLEAVE};
goog.events.MouseAsMouseEventType={MOUSEDOWN:goog.events.EventType.MOUSEDOWN,MOUSEUP:goog.events.EventType.MOUSEUP,MOUSECANCEL:goog.events.EventType.MOUSECANCEL,MOUSEMOVE:goog.events.EventType.MOUSEMOVE,MOUSEOVER:goog.events.EventType.MOUSEOVER,MOUSEOUT:goog.events.EventType.MOUSEOUT,MOUSEENTER:goog.events.EventType.MOUSEENTER,MOUSELEAVE:goog.events.EventType.MOUSELEAVE};
goog.events.PointerAsTouchEventType={TOUCHCANCEL:goog.events.PointerTouchFallbackEventType.POINTERCANCEL,TOUCHEND:goog.events.PointerTouchFallbackEventType.POINTERUP,TOUCHMOVE:goog.events.PointerTouchFallbackEventType.POINTERMOVE,TOUCHSTART:goog.events.PointerTouchFallbackEventType.POINTERDOWN};goog.events.USE_LAYER_XY_AS_OFFSET_XY=!1;goog.events.BrowserEvent=function(a,b){goog.events.Event.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.key="";this.charCode=this.keyCode=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.platformModifierKey=!1;this.pointerId=0;this.pointerType="";this.event_=null;a&&this.init(a,b)};
goog.inherits(goog.events.BrowserEvent,goog.events.Event);goog.events.BrowserEvent.MouseButton={LEFT:0,MIDDLE:1,RIGHT:2};goog.events.BrowserEvent.PointerType={MOUSE:"mouse",PEN:"pen",TOUCH:"touch"};goog.events.BrowserEvent.IEButtonMap=goog.debug.freeze([1,4,2]);goog.events.BrowserEvent.IE_BUTTON_MAP=goog.events.BrowserEvent.IEButtonMap;goog.events.BrowserEvent.IE_POINTER_TYPE_MAP=goog.debug.freeze({2:goog.events.BrowserEvent.PointerType.TOUCH,3:goog.events.BrowserEvent.PointerType.PEN,4:goog.events.BrowserEvent.PointerType.MOUSE});
goog.events.BrowserEvent.prototype.init=function(a,b){var c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=b;(b=a.relatedTarget)?goog.userAgent.GECKO&&(goog.reflect.canAccessProperty(b,"nodeName")||(b=null)):c==goog.events.EventType.MOUSEOVER?b=a.fromElement:c==goog.events.EventType.MOUSEOUT&&(b=a.toElement);this.relatedTarget=b;d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?
d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(goog.events.USE_LAYER_XY_AS_OFFSET_XY?(this.offsetX=void 0!==a.layerX?a.layerX:a.offsetX,this.offsetY=void 0!==a.layerY?a.layerY:a.offsetY):(this.offsetX=goog.userAgent.WEBKIT||void 0!==a.offsetX?a.offsetX:a.layerX,this.offsetY=goog.userAgent.WEBKIT||void 0!==a.offsetY?a.offsetY:a.layerY),this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=
a.screenY||0);this.button=a.button;this.keyCode=a.keyCode||0;this.key=a.key||"";this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.platformModifierKey=goog.userAgent.MAC?a.metaKey:a.ctrlKey;this.pointerId=a.pointerId||0;this.pointerType=goog.events.BrowserEvent.getPointerType_(a);this.state=a.state;this.event_=a;a.defaultPrevented&&this.preventDefault()};
goog.events.BrowserEvent.prototype.isButton=function(a){return goog.events.BrowserFeature.HAS_W3C_BUTTON?this.event_.button==a:"click"==this.type?a==goog.events.BrowserEvent.MouseButton.LEFT:!!(this.event_.button&goog.events.BrowserEvent.IE_BUTTON_MAP[a])};goog.events.BrowserEvent.prototype.isMouseActionButton=function(){return this.isButton(goog.events.BrowserEvent.MouseButton.LEFT)&&!(goog.userAgent.WEBKIT&&goog.userAgent.MAC&&this.ctrlKey)};
goog.events.BrowserEvent.prototype.stopPropagation=function(){goog.events.BrowserEvent.superClass_.stopPropagation.call(this);this.event_.stopPropagation?this.event_.stopPropagation():this.event_.cancelBubble=!0};
goog.events.BrowserEvent.prototype.preventDefault=function(){goog.events.BrowserEvent.superClass_.preventDefault.call(this);var a=this.event_;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,goog.events.BrowserFeature.SET_KEY_CODE_TO_PREVENT_DEFAULT)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};goog.events.BrowserEvent.prototype.getBrowserEvent=function(){return this.event_};
goog.events.BrowserEvent.getPointerType_=function(a){return goog.isString(a.pointerType)?a.pointerType:goog.events.BrowserEvent.IE_POINTER_TYPE_MAP[a.pointerType]||""};goog.events.Listenable=function(){};goog.events.Listenable.IMPLEMENTED_BY_PROP="closure_listenable_"+(1E6*Math.random()|0);goog.events.Listenable.addImplementation=function(a){a.prototype[goog.events.Listenable.IMPLEMENTED_BY_PROP]=!0};goog.events.Listenable.isImplementedBy=function(a){return!(!a||!a[goog.events.Listenable.IMPLEMENTED_BY_PROP])};goog.events.ListenableKey=function(){};goog.events.ListenableKey.counter_=0;goog.events.ListenableKey.reserveKey=function(){return++goog.events.ListenableKey.counter_};goog.events.Listener=function(a,b,c,d,e,f){goog.events.Listener.ENABLE_MONITORING&&(this.creationStack=Error().stack);this.listener=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!e;this.handler=f;this.key=goog.events.ListenableKey.reserveKey();this.removed=this.callOnce=!1};goog.events.Listener.ENABLE_MONITORING=!1;goog.events.Listener.prototype.markAsRemoved=function(){this.removed=!0;this.handler=this.src=this.proxy=this.listener=null};goog.events.ListenerMap=function(a){this.src=a;this.listeners={};this.typeCount_=0};goog.events.ListenerMap.prototype.getTypeCount=function(){return this.typeCount_};goog.events.ListenerMap.prototype.getListenerCount=function(){var a=0,b;for(b in this.listeners)a+=this.listeners[b].length;return a};
goog.events.ListenerMap.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.listeners[f];a||(a=this.listeners[f]=[],this.typeCount_++);var g=goog.events.ListenerMap.findListenerIndex_(a,b,d,e);-1<g?(b=a[g],c||(b.callOnce=!1)):(b=new goog.events.Listener(b,null,this.src,f,!!d,e),b.callOnce=c,a.push(b));return b};
goog.events.ListenerMap.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.listeners))return!1;var e=this.listeners[a];b=goog.events.ListenerMap.findListenerIndex_(e,b,c,d);return-1<b?(e[b].markAsRemoved(),goog.array.removeAt(e,b),0==e.length&&(delete this.listeners[a],this.typeCount_--),!0):!1};
goog.events.ListenerMap.prototype.removeByKey=function(a){var b=a.type;if(!(b in this.listeners))return!1;var c=goog.array.remove(this.listeners[b],a);c&&(a.markAsRemoved(),0==this.listeners[b].length&&(delete this.listeners[b],this.typeCount_--));return c};goog.events.ListenerMap.prototype.removeAll=function(a){a=a&&a.toString();var b=0,c;for(c in this.listeners)if(!a||c==a){for(var d=this.listeners[c],e=0;e<d.length;e++)++b,d[e].markAsRemoved();delete this.listeners[c];this.typeCount_--}return b};
goog.events.ListenerMap.prototype.getListeners=function(a,b){a=this.listeners[a.toString()];var c=[];if(a)for(var d=0;d<a.length;++d){var e=a[d];e.capture==b&&c.push(e)}return c};goog.events.ListenerMap.prototype.getListener=function(a,b,c,d){a=this.listeners[a.toString()];var e=-1;a&&(e=goog.events.ListenerMap.findListenerIndex_(a,b,c,d));return-1<e?a[e]:null};
goog.events.ListenerMap.prototype.hasListener=function(a,b){var c=goog.isDef(a),d=c?a.toString():"",e=goog.isDef(b);return goog.object.some(this.listeners,function(a,g){for(g=0;g<a.length;++g)if(!(c&&a[g].type!=d||e&&a[g].capture!=b))return!0;return!1})};goog.events.ListenerMap.findListenerIndex_=function(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.removed&&f.listener==b&&f.capture==!!c&&f.handler==d)return e}return-1};goog.events.LISTENER_MAP_PROP_="closure_lm_"+(1E6*Math.random()|0);goog.events.onString_="on";goog.events.onStringMap_={};goog.events.CaptureSimulationMode={OFF_AND_FAIL:0,OFF_AND_SILENT:1,ON:2};goog.events.CAPTURE_SIMULATION_MODE=2;goog.events.listenerCountEstimate_=0;
goog.events.listen=function(a,b,c,d,e){if(d&&d.once)return goog.events.listenOnce(a,b,c,d,e);if(goog.isArray(b)){for(var f=0;f<b.length;f++)goog.events.listen(a,b[f],c,d,e);return null}c=goog.events.wrapListener(c);return goog.events.Listenable.isImplementedBy(a)?(d=goog.isObject(d)?!!d.capture:!!d,a.listen(b,c,d,e)):goog.events.listen_(a,b,c,!1,d,e)};
goog.events.listen_=function(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=goog.isObject(e)?!!e.capture:!!e;if(g&&!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.OFF_AND_FAIL)return goog.asserts.fail("Can not register capture listener in IE8-."),null;if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.OFF_AND_SILENT)return null}var h=goog.events.getListenerMap_(a);h||(a[goog.events.LISTENER_MAP_PROP_]=
h=new goog.events.ListenerMap(a));c=h.add(b,c,d,g,f);if(c.proxy)return c;d=goog.events.getProxy();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)goog.events.BrowserFeature.PASSIVE_EVENTS||(e=g),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(goog.events.getOnString_(b.toString()),d);else if(a.addListener&&a.removeListener)goog.asserts.assert("change"===b,"MediaQueryList only has a change event"),a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");
goog.events.listenerCountEstimate_++;return c};goog.events.getProxy=function(){var a=goog.events.handleBrowserEvent_,b=goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b};
goog.events.listenOnce=function(a,b,c,d,e){if(goog.isArray(b)){for(var f=0;f<b.length;f++)goog.events.listenOnce(a,b[f],c,d,e);return null}c=goog.events.wrapListener(c);return goog.events.Listenable.isImplementedBy(a)?(d=goog.isObject(d)?!!d.capture:!!d,a.listenOnce(b,c,d,e)):goog.events.listen_(a,b,c,!0,d,e)};goog.events.listenWithWrapper=function(a,b,c,d,e){b.listen(a,c,d,e)};
goog.events.unlisten=function(a,b,c,d,e){if(goog.isArray(b)){for(var f=0;f<b.length;f++)goog.events.unlisten(a,b[f],c,d,e);return null}d=goog.isObject(d)?!!d.capture:!!d;c=goog.events.wrapListener(c);if(goog.events.Listenable.isImplementedBy(a))return a.unlisten(b,c,d,e);if(!a)return!1;if(a=goog.events.getListenerMap_(a))if(b=a.getListener(b,c,d,e))return goog.events.unlistenByKey(b);return!1};
goog.events.unlistenByKey=function(a){if(goog.isNumber(a)||!a||a.removed)return!1;var b=a.src;if(goog.events.Listenable.isImplementedBy(b))return b.unlistenByKey(a);var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(goog.events.getOnString_(c),d):b.addListener&&b.removeListener&&b.removeListener(d);goog.events.listenerCountEstimate_--;(c=goog.events.getListenerMap_(b))?(c.removeByKey(a),0==c.getTypeCount()&&(c.src=null,b[goog.events.LISTENER_MAP_PROP_]=
null)):a.markAsRemoved();return!0};goog.events.unlistenWithWrapper=function(a,b,c,d,e){b.unlisten(a,c,d,e)};goog.events.removeAll=function(a,b){if(!a)return 0;if(goog.events.Listenable.isImplementedBy(a))return a.removeAllListeners(b);a=goog.events.getListenerMap_(a);if(!a)return 0;var c=0;b=b&&b.toString();for(var d in a.listeners)if(!b||d==b)for(var e=a.listeners[d].concat(),f=0;f<e.length;++f)goog.events.unlistenByKey(e[f])&&++c;return c};
goog.events.getListeners=function(a,b,c){return goog.events.Listenable.isImplementedBy(a)?a.getListeners(b,c):a?(a=goog.events.getListenerMap_(a))?a.getListeners(b,c):[]:[]};goog.events.getListener=function(a,b,c,d,e){c=goog.events.wrapListener(c);d=!!d;return goog.events.Listenable.isImplementedBy(a)?a.getListener(b,c,d,e):a?(a=goog.events.getListenerMap_(a))?a.getListener(b,c,d,e):null:null};
goog.events.hasListener=function(a,b,c){if(goog.events.Listenable.isImplementedBy(a))return a.hasListener(b,c);a=goog.events.getListenerMap_(a);return!!a&&a.hasListener(b,c)};goog.events.expose=function(a){var b=[],c;for(c in a)a[c]&&a[c].id?b.push(c+" = "+a[c]+" ("+a[c].id+")"):b.push(c+" = "+a[c]);return b.join("\n")};goog.events.getOnString_=function(a){return a in goog.events.onStringMap_?goog.events.onStringMap_[a]:goog.events.onStringMap_[a]=goog.events.onString_+a};
goog.events.fireListeners=function(a,b,c,d){return goog.events.Listenable.isImplementedBy(a)?a.fireListeners(b,c,d):goog.events.fireListeners_(a,b,c,d)};goog.events.fireListeners_=function(a,b,c,d){var e=!0;if(a=goog.events.getListenerMap_(a))if(b=a.listeners[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.removed&&(f=goog.events.fireListener(f,d),e=e&&!1!==f)}return e};
goog.events.fireListener=function(a,b){var c=a.listener,d=a.handler||a.src;a.callOnce&&goog.events.unlistenByKey(a);return c.call(d,b)};goog.events.getTotalListenerCount=function(){return goog.events.listenerCountEstimate_};goog.events.dispatchEvent=function(a,b){goog.asserts.assert(goog.events.Listenable.isImplementedBy(a),"Can not use goog.events.dispatchEvent with non-goog.events.Listenable instance.");return a.dispatchEvent(b)};
goog.events.protectBrowserEventEntryPoint=function(a){goog.events.handleBrowserEvent_=a.protectEntryPoint(goog.events.handleBrowserEvent_)};
goog.events.handleBrowserEvent_=function(a,b){if(a.removed)return!0;if(!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){var c=b||goog.getObjectByName("window.event");b=new goog.events.BrowserEvent(c,this);var d=!0;if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.ON){if(!goog.events.isMarkedIeEvent_(c)){goog.events.markIeEvent_(c);c=[];for(var e=b.currentTarget;e;e=e.parentNode)c.push(e);a=a.type;for(e=c.length-1;!b.propagationStopped_&&0<=e;e--){b.currentTarget=c[e];var f=
goog.events.fireListeners_(c[e],a,!0,b);d=d&&f}for(e=0;!b.propagationStopped_&&e<c.length;e++)b.currentTarget=c[e],f=goog.events.fireListeners_(c[e],a,!1,b),d=d&&f}}else d=goog.events.fireListener(a,b);return d}return goog.events.fireListener(a,new goog.events.BrowserEvent(b,this))};goog.events.markIeEvent_=function(a){var b=!1;if(0==a.keyCode)try{a.keyCode=-1;return}catch(c){b=!0}if(b||void 0==a.returnValue)a.returnValue=!0};goog.events.isMarkedIeEvent_=function(a){return 0>a.keyCode||void 0!=a.returnValue};
goog.events.uniqueIdCounter_=0;goog.events.getUniqueId=function(a){return a+"_"+goog.events.uniqueIdCounter_++};goog.events.getListenerMap_=function(a){a=a[goog.events.LISTENER_MAP_PROP_];return a instanceof goog.events.ListenerMap?a:null};goog.events.LISTENER_WRAPPER_PROP_="__closure_events_fn_"+(1E9*Math.random()>>>0);
goog.events.wrapListener=function(a){goog.asserts.assert(a,"Listener can not be null.");if(goog.isFunction(a))return a;goog.asserts.assert(a.handleEvent,"An object listener must have handleEvent method.");a[goog.events.LISTENER_WRAPPER_PROP_]||(a[goog.events.LISTENER_WRAPPER_PROP_]=function(b){return a.handleEvent(b)});return a[goog.events.LISTENER_WRAPPER_PROP_]};goog.debug.entryPointRegistry.register(function(a){goog.events.handleBrowserEvent_=a(goog.events.handleBrowserEvent_)});goog.dom.BrowserFeature={CAN_ADD_NAME_OR_TYPE_ATTRIBUTES:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),CAN_USE_CHILDREN_ATTRIBUTE:!goog.userAgent.GECKO&&!goog.userAgent.IE||goog.userAgent.IE&&goog.userAgent.isDocumentModeOrHigher(9)||goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9.1"),CAN_USE_INNER_TEXT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),CAN_USE_PARENT_ELEMENT_PROPERTY:goog.userAgent.IE||goog.userAgent.OPERA||goog.userAgent.WEBKIT,INNER_HTML_NEEDS_SCOPED_ELEMENT:goog.userAgent.IE,
LEGACY_IE_RANGES:goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)};goog.dom.HtmlElement=function(){};goog.dom.TagName=function(a){this.tagName_=a};goog.dom.TagName.prototype.toString=function(){return this.tagName_};goog.dom.TagName.A=new goog.dom.TagName("A");goog.dom.TagName.ABBR=new goog.dom.TagName("ABBR");goog.dom.TagName.ACRONYM=new goog.dom.TagName("ACRONYM");goog.dom.TagName.ADDRESS=new goog.dom.TagName("ADDRESS");goog.dom.TagName.APPLET=new goog.dom.TagName("APPLET");goog.dom.TagName.AREA=new goog.dom.TagName("AREA");goog.dom.TagName.ARTICLE=new goog.dom.TagName("ARTICLE");
goog.dom.TagName.ASIDE=new goog.dom.TagName("ASIDE");goog.dom.TagName.AUDIO=new goog.dom.TagName("AUDIO");goog.dom.TagName.B=new goog.dom.TagName("B");goog.dom.TagName.BASE=new goog.dom.TagName("BASE");goog.dom.TagName.BASEFONT=new goog.dom.TagName("BASEFONT");goog.dom.TagName.BDI=new goog.dom.TagName("BDI");goog.dom.TagName.BDO=new goog.dom.TagName("BDO");goog.dom.TagName.BIG=new goog.dom.TagName("BIG");goog.dom.TagName.BLOCKQUOTE=new goog.dom.TagName("BLOCKQUOTE");goog.dom.TagName.BODY=new goog.dom.TagName("BODY");
goog.dom.TagName.BR=new goog.dom.TagName("BR");goog.dom.TagName.BUTTON=new goog.dom.TagName("BUTTON");goog.dom.TagName.CANVAS=new goog.dom.TagName("CANVAS");goog.dom.TagName.CAPTION=new goog.dom.TagName("CAPTION");goog.dom.TagName.CENTER=new goog.dom.TagName("CENTER");goog.dom.TagName.CITE=new goog.dom.TagName("CITE");goog.dom.TagName.CODE=new goog.dom.TagName("CODE");goog.dom.TagName.COL=new goog.dom.TagName("COL");goog.dom.TagName.COLGROUP=new goog.dom.TagName("COLGROUP");
goog.dom.TagName.COMMAND=new goog.dom.TagName("COMMAND");goog.dom.TagName.DATA=new goog.dom.TagName("DATA");goog.dom.TagName.DATALIST=new goog.dom.TagName("DATALIST");goog.dom.TagName.DD=new goog.dom.TagName("DD");goog.dom.TagName.DEL=new goog.dom.TagName("DEL");goog.dom.TagName.DETAILS=new goog.dom.TagName("DETAILS");goog.dom.TagName.DFN=new goog.dom.TagName("DFN");goog.dom.TagName.DIALOG=new goog.dom.TagName("DIALOG");goog.dom.TagName.DIR=new goog.dom.TagName("DIR");goog.dom.TagName.DIV=new goog.dom.TagName("DIV");
goog.dom.TagName.DL=new goog.dom.TagName("DL");goog.dom.TagName.DT=new goog.dom.TagName("DT");goog.dom.TagName.EM=new goog.dom.TagName("EM");goog.dom.TagName.EMBED=new goog.dom.TagName("EMBED");goog.dom.TagName.FIELDSET=new goog.dom.TagName("FIELDSET");goog.dom.TagName.FIGCAPTION=new goog.dom.TagName("FIGCAPTION");goog.dom.TagName.FIGURE=new goog.dom.TagName("FIGURE");goog.dom.TagName.FONT=new goog.dom.TagName("FONT");goog.dom.TagName.FOOTER=new goog.dom.TagName("FOOTER");goog.dom.TagName.FORM=new goog.dom.TagName("FORM");
goog.dom.TagName.FRAME=new goog.dom.TagName("FRAME");goog.dom.TagName.FRAMESET=new goog.dom.TagName("FRAMESET");goog.dom.TagName.H1=new goog.dom.TagName("H1");goog.dom.TagName.H2=new goog.dom.TagName("H2");goog.dom.TagName.H3=new goog.dom.TagName("H3");goog.dom.TagName.H4=new goog.dom.TagName("H4");goog.dom.TagName.H5=new goog.dom.TagName("H5");goog.dom.TagName.H6=new goog.dom.TagName("H6");goog.dom.TagName.HEAD=new goog.dom.TagName("HEAD");goog.dom.TagName.HEADER=new goog.dom.TagName("HEADER");
goog.dom.TagName.HGROUP=new goog.dom.TagName("HGROUP");goog.dom.TagName.HR=new goog.dom.TagName("HR");goog.dom.TagName.HTML=new goog.dom.TagName("HTML");goog.dom.TagName.I=new goog.dom.TagName("I");goog.dom.TagName.IFRAME=new goog.dom.TagName("IFRAME");goog.dom.TagName.IMG=new goog.dom.TagName("IMG");goog.dom.TagName.INPUT=new goog.dom.TagName("INPUT");goog.dom.TagName.INS=new goog.dom.TagName("INS");goog.dom.TagName.ISINDEX=new goog.dom.TagName("ISINDEX");goog.dom.TagName.KBD=new goog.dom.TagName("KBD");
goog.dom.TagName.KEYGEN=new goog.dom.TagName("KEYGEN");goog.dom.TagName.LABEL=new goog.dom.TagName("LABEL");goog.dom.TagName.LEGEND=new goog.dom.TagName("LEGEND");goog.dom.TagName.LI=new goog.dom.TagName("LI");goog.dom.TagName.LINK=new goog.dom.TagName("LINK");goog.dom.TagName.MAIN=new goog.dom.TagName("MAIN");goog.dom.TagName.MAP=new goog.dom.TagName("MAP");goog.dom.TagName.MARK=new goog.dom.TagName("MARK");goog.dom.TagName.MATH=new goog.dom.TagName("MATH");goog.dom.TagName.MENU=new goog.dom.TagName("MENU");
goog.dom.TagName.MENUITEM=new goog.dom.TagName("MENUITEM");goog.dom.TagName.META=new goog.dom.TagName("META");goog.dom.TagName.METER=new goog.dom.TagName("METER");goog.dom.TagName.NAV=new goog.dom.TagName("NAV");goog.dom.TagName.NOFRAMES=new goog.dom.TagName("NOFRAMES");goog.dom.TagName.NOSCRIPT=new goog.dom.TagName("NOSCRIPT");goog.dom.TagName.OBJECT=new goog.dom.TagName("OBJECT");goog.dom.TagName.OL=new goog.dom.TagName("OL");goog.dom.TagName.OPTGROUP=new goog.dom.TagName("OPTGROUP");
goog.dom.TagName.OPTION=new goog.dom.TagName("OPTION");goog.dom.TagName.OUTPUT=new goog.dom.TagName("OUTPUT");goog.dom.TagName.P=new goog.dom.TagName("P");goog.dom.TagName.PARAM=new goog.dom.TagName("PARAM");goog.dom.TagName.PICTURE=new goog.dom.TagName("PICTURE");goog.dom.TagName.PRE=new goog.dom.TagName("PRE");goog.dom.TagName.PROGRESS=new goog.dom.TagName("PROGRESS");goog.dom.TagName.Q=new goog.dom.TagName("Q");goog.dom.TagName.RP=new goog.dom.TagName("RP");goog.dom.TagName.RT=new goog.dom.TagName("RT");
goog.dom.TagName.RTC=new goog.dom.TagName("RTC");goog.dom.TagName.RUBY=new goog.dom.TagName("RUBY");goog.dom.TagName.S=new goog.dom.TagName("S");goog.dom.TagName.SAMP=new goog.dom.TagName("SAMP");goog.dom.TagName.SCRIPT=new goog.dom.TagName("SCRIPT");goog.dom.TagName.SECTION=new goog.dom.TagName("SECTION");goog.dom.TagName.SELECT=new goog.dom.TagName("SELECT");goog.dom.TagName.SMALL=new goog.dom.TagName("SMALL");goog.dom.TagName.SOURCE=new goog.dom.TagName("SOURCE");goog.dom.TagName.SPAN=new goog.dom.TagName("SPAN");
goog.dom.TagName.STRIKE=new goog.dom.TagName("STRIKE");goog.dom.TagName.STRONG=new goog.dom.TagName("STRONG");goog.dom.TagName.STYLE=new goog.dom.TagName("STYLE");goog.dom.TagName.SUB=new goog.dom.TagName("SUB");goog.dom.TagName.SUMMARY=new goog.dom.TagName("SUMMARY");goog.dom.TagName.SUP=new goog.dom.TagName("SUP");goog.dom.TagName.SVG=new goog.dom.TagName("SVG");goog.dom.TagName.TABLE=new goog.dom.TagName("TABLE");goog.dom.TagName.TBODY=new goog.dom.TagName("TBODY");goog.dom.TagName.TD=new goog.dom.TagName("TD");
goog.dom.TagName.TEMPLATE=new goog.dom.TagName("TEMPLATE");goog.dom.TagName.TEXTAREA=new goog.dom.TagName("TEXTAREA");goog.dom.TagName.TFOOT=new goog.dom.TagName("TFOOT");goog.dom.TagName.TH=new goog.dom.TagName("TH");goog.dom.TagName.THEAD=new goog.dom.TagName("THEAD");goog.dom.TagName.TIME=new goog.dom.TagName("TIME");goog.dom.TagName.TITLE=new goog.dom.TagName("TITLE");goog.dom.TagName.TR=new goog.dom.TagName("TR");goog.dom.TagName.TRACK=new goog.dom.TagName("TRACK");goog.dom.TagName.TT=new goog.dom.TagName("TT");
goog.dom.TagName.U=new goog.dom.TagName("U");goog.dom.TagName.UL=new goog.dom.TagName("UL");goog.dom.TagName.VAR=new goog.dom.TagName("VAR");goog.dom.TagName.VIDEO=new goog.dom.TagName("VIDEO");goog.dom.TagName.WBR=new goog.dom.TagName("WBR");goog.dom.asserts={};goog.dom.asserts.assertIsLocation=function(a){if(goog.asserts.ENABLE_ASSERTS){var b=goog.dom.asserts.getWindow_(a);"undefined"!=typeof b.Location&&"undefined"!=typeof b.Element&&goog.asserts.assert(a&&(a instanceof b.Location||!(a instanceof b.Element)),"Argument is not a Location (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(a))}return a};
goog.dom.asserts.assertIsElementType_=function(a,b){if(goog.asserts.ENABLE_ASSERTS){var c=goog.dom.asserts.getWindow_(a);"undefined"!=typeof c[b]&&"undefined"!=typeof c.Location&&"undefined"!=typeof c.Element&&goog.asserts.assert(a&&(a instanceof c[b]||!(a instanceof c.Location||a instanceof c.Element)),"Argument is not a %s (or a non-Element, non-Location mock); got: %s",b,goog.dom.asserts.debugStringForType_(a))}return a};
goog.dom.asserts.assertIsHTMLAnchorElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLAnchorElement")};goog.dom.asserts.assertIsHTMLButtonElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLButtonElement")};goog.dom.asserts.assertIsHTMLLinkElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLLinkElement")};goog.dom.asserts.assertIsHTMLImageElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLImageElement")};
goog.dom.asserts.assertIsHTMLAudioElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLAudioElement")};goog.dom.asserts.assertIsHTMLVideoElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLVideoElement")};goog.dom.asserts.assertIsHTMLInputElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLInputElement")};goog.dom.asserts.assertIsHTMLTextAreaElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLTextAreaElement")};
goog.dom.asserts.assertIsHTMLCanvasElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLCanvasElement")};goog.dom.asserts.assertIsHTMLEmbedElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLEmbedElement")};goog.dom.asserts.assertIsHTMLFormElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLFormElement")};goog.dom.asserts.assertIsHTMLFrameElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLFrameElement")};
goog.dom.asserts.assertIsHTMLIFrameElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLIFrameElement")};goog.dom.asserts.assertIsHTMLObjectElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLObjectElement")};goog.dom.asserts.assertIsHTMLScriptElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLScriptElement")};
goog.dom.asserts.debugStringForType_=function(a){return goog.isObject(a)?a.constructor.displayName||a.constructor.name||Object.prototype.toString.call(a):void 0===a?"undefined":null===a?"null":typeof a};goog.dom.asserts.getWindow_=function(a){return(a=a&&a.ownerDocument)&&(a.defaultView||a.parentWindow)||goog.global};goog.functions={};goog.functions.constant=function(a){return function(){return a}};goog.functions.FALSE=function(){return!1};goog.functions.TRUE=function(){return!0};goog.functions.NULL=function(){return null};goog.functions.identity=function(a,b){return a};goog.functions.error=function(a){return function(){throw Error(a);}};goog.functions.fail=function(a){return function(){throw a;}};
goog.functions.lock=function(a,b){b=b||0;return function(){return a.apply(this,Array.prototype.slice.call(arguments,0,b))}};goog.functions.nth=function(a){return function(){return arguments[a]}};goog.functions.partialRight=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.push.apply(b,c);return a.apply(this,b)}};goog.functions.withReturnValue=function(a,b){return goog.functions.sequence(a,goog.functions.constant(b))};
goog.functions.equalTo=function(a,b){return function(c){return b?a==c:a===c}};goog.functions.compose=function(a,b){var c=arguments,d=c.length;return function(){var a;d&&(a=c[d-1].apply(this,arguments));for(var b=d-2;0<=b;b--)a=c[b].call(this,a);return a}};goog.functions.sequence=function(a){var b=arguments,c=b.length;return function(){for(var a,e=0;e<c;e++)a=b[e].apply(this,arguments);return a}};
goog.functions.and=function(a){var b=arguments,c=b.length;return function(){for(var a=0;a<c;a++)if(!b[a].apply(this,arguments))return!1;return!0}};goog.functions.or=function(a){var b=arguments,c=b.length;return function(){for(var a=0;a<c;a++)if(b[a].apply(this,arguments))return!0;return!1}};goog.functions.not=function(a){return function(){return!a.apply(this,arguments)}};
goog.functions.create=function(a,b){var c=function(){};c.prototype=a.prototype;c=new c;a.apply(c,Array.prototype.slice.call(arguments,1));return c};goog.functions.CACHE_RETURN_VALUE=!0;goog.functions.cacheReturnValue=function(a){var b=!1,c;return function(){if(!goog.functions.CACHE_RETURN_VALUE)return a();b||(c=a(),b=!0);return c}};goog.functions.once=function(a){var b=a;return function(){if(b){var a=b;b=null;a()}}};
goog.functions.debounce=function(a,b,c){var d=0;return function(e){goog.global.clearTimeout(d);var f=arguments;d=goog.global.setTimeout(function(){a.apply(c,f)},b)}};goog.functions.throttle=function(a,b,c){var d=0,e=!1,f=[],g=function(){d=0;e&&(e=!1,h())},h=function(){d=goog.global.setTimeout(g,b);a.apply(c,f)};return function(a){f=arguments;d?e=!0:h()}};goog.functions.rateLimit=function(a,b,c){var d=0,e=function(){d=0};return function(f){d||(d=goog.global.setTimeout(e,b),a.apply(c,arguments))}};goog.dom.tags={};goog.dom.tags.VOID_TAGS_={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};goog.dom.tags.isVoidTag=function(a){return!0===goog.dom.tags.VOID_TAGS_[a]};goog.html={};goog.html.trustedtypes={};goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#html"):null;goog.string.TypedString=function(){};goog.string.Const=function(a,b){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_=a===goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_&&b||"";this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_};goog.string.Const.prototype.implementsGoogStringTypedString=!0;goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_};
goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"};goog.string.Const.unwrap=function(a){if(a instanceof goog.string.Const&&a.constructor===goog.string.Const&&a.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_)return a.stringConstValueWithSecurityContract__googStringSecurityPrivate_;goog.asserts.fail("expected object of type Const, got '"+a+"'");return"type_error:Const"};
goog.string.Const.from=function(a){return new goog.string.Const(goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_,a)};goog.string.Const.TYPE_MARKER_={};goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_={};goog.string.Const.EMPTY=goog.string.Const.from("");goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="";this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.SafeScript.prototype.implementsGoogStringTypedString=!0;goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.SafeScript.fromConstant=function(a){a=goog.string.Const.unwrap(a);return 0===a.length?goog.html.SafeScript.EMPTY:goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(a)};
goog.html.SafeScript.fromConstantAndArgs=function(a,b){for(var c=[],d=1;d<arguments.length;d++)c.push(goog.html.SafeScript.stringify_(arguments[d]));return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("("+goog.string.Const.unwrap(a)+")("+c.join(", ")+");")};goog.html.SafeScript.fromJson=function(a){return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(goog.html.SafeScript.stringify_(a))};goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_.toString()};
goog.DEBUG&&(goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"});goog.html.SafeScript.unwrap=function(a){return goog.html.SafeScript.unwrapTrustedScript(a).toString()};
goog.html.SafeScript.unwrapTrustedScript=function(a){if(a instanceof goog.html.SafeScript&&a.constructor===goog.html.SafeScript&&a.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_)return a.privateDoNotAccessOrElseSafeScriptWrappedValue_;goog.asserts.fail("expected object of type SafeScript, got '"+a+"' of type "+goog.typeOf(a));return"type_error:SafeScript"};
goog.html.SafeScript.stringify_=function(a){return JSON.stringify(a).replace(/</g,"\\x3c")};goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(a){return(new goog.html.SafeScript).initSecurityPrivateDoNotAccessOrElse_(a)};
goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(a){this.privateDoNotAccessOrElseSafeScriptWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScript(a):a;return this};goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("");goog.fs={};goog.fs.url={};goog.fs.url.createObjectUrl=function(a){return goog.fs.url.getUrlObject_().createObjectURL(a)};goog.fs.url.revokeObjectUrl=function(a){goog.fs.url.getUrlObject_().revokeObjectURL(a)};goog.fs.url.getUrlObject_=function(){var a=goog.fs.url.findUrlObject_();if(null!=a)return a;throw Error("This browser doesn't seem to support blob URLs");};
goog.fs.url.findUrlObject_=function(){return goog.isDef(goog.global.URL)&&goog.isDef(goog.global.URL.createObjectURL)?goog.global.URL:goog.isDef(goog.global.webkitURL)&&goog.isDef(goog.global.webkitURL.createObjectURL)?goog.global.webkitURL:goog.isDef(goog.global.createObjectURL)?goog.global:null};goog.fs.url.browserSupportsObjectUrls=function(){return null!=goog.fs.url.findUrlObject_()};goog.i18n={};goog.i18n.bidi={};goog.i18n.bidi.FORCE_RTL=!1;
goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||("ar"==goog.LOCALE.substring(0,2).toLowerCase()||"fa"==goog.LOCALE.substring(0,2).toLowerCase()||"he"==goog.LOCALE.substring(0,2).toLowerCase()||"iw"==goog.LOCALE.substring(0,2).toLowerCase()||"ps"==goog.LOCALE.substring(0,2).toLowerCase()||"sd"==goog.LOCALE.substring(0,2).toLowerCase()||"ug"==goog.LOCALE.substring(0,2).toLowerCase()||"ur"==goog.LOCALE.substring(0,2).toLowerCase()||"yi"==goog.LOCALE.substring(0,2).toLowerCase())&&(2==goog.LOCALE.length||
"-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))||3<=goog.LOCALE.length&&"ckb"==goog.LOCALE.substring(0,3).toLowerCase()&&(3==goog.LOCALE.length||"-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4))||7<=goog.LOCALE.length&&("-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))&&("adlm"==goog.LOCALE.substring(3,7).toLowerCase()||"arab"==goog.LOCALE.substring(3,7).toLowerCase()||"hebr"==goog.LOCALE.substring(3,7).toLowerCase()||"nkoo"==goog.LOCALE.substring(3,
7).toLowerCase()||"rohg"==goog.LOCALE.substring(3,7).toLowerCase()||"thaa"==goog.LOCALE.substring(3,7).toLowerCase())||8<=goog.LOCALE.length&&("-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4))&&("adlm"==goog.LOCALE.substring(4,8).toLowerCase()||"arab"==goog.LOCALE.substring(4,8).toLowerCase()||"hebr"==goog.LOCALE.substring(4,8).toLowerCase()||"nkoo"==goog.LOCALE.substring(4,8).toLowerCase()||"rohg"==goog.LOCALE.substring(4,8).toLowerCase()||"thaa"==goog.LOCALE.substring(4,8).toLowerCase());
goog.i18n.bidi.Format={LRE:"\u202a",RLE:"\u202b",PDF:"\u202c",LRM:"\u200e",RLM:"\u200f"};goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0};goog.i18n.bidi.RIGHT="right";goog.i18n.bidi.LEFT="left";goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT;goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT;
goog.i18n.bidi.toDir=function(a,b){return"number"==typeof a?0<a?goog.i18n.bidi.Dir.LTR:0>a?goog.i18n.bidi.Dir.RTL:b?null:goog.i18n.bidi.Dir.NEUTRAL:null==a?null:a?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR};goog.i18n.bidi.ltrChars_="A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0900-\u1fff\u200e\u2c00-\ud801\ud804-\ud839\ud83c-\udbff\uf900-\ufb1c\ufe00-\ufe6f\ufefd-\uffff";goog.i18n.bidi.rtlChars_="\u0591-\u06ef\u06fa-\u08ff\u200f\ud802-\ud803\ud83a-\ud83b\ufb1d-\ufdff\ufe70-\ufefc";
goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g;goog.i18n.bidi.stripHtmlIfNeeded_=function(a,b){return b?a.replace(goog.i18n.bidi.htmlSkipReg_,""):a};goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]");goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]");goog.i18n.bidi.hasAnyRtl=function(a,b){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(a,b))};goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl;
goog.i18n.bidi.hasAnyLtr=function(a,b){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(a,b))};goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]");goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]");goog.i18n.bidi.isRtlChar=function(a){return goog.i18n.bidi.rtlRe_.test(a)};goog.i18n.bidi.isLtrChar=function(a){return goog.i18n.bidi.ltrRe_.test(a)};goog.i18n.bidi.isNeutralChar=function(a){return!goog.i18n.bidi.isLtrChar(a)&&!goog.i18n.bidi.isRtlChar(a)};
goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]");goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]");goog.i18n.bidi.startsWithRtl=function(a,b){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(a,b))};goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl;
goog.i18n.bidi.startsWithLtr=function(a,b){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(a,b))};goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr;goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/;goog.i18n.bidi.isNeutralText=function(a,b){a=goog.i18n.bidi.stripHtmlIfNeeded_(a,b);return goog.i18n.bidi.isRequiredLtrRe_.test(a)||!goog.i18n.bidi.hasAnyLtr(a)&&!goog.i18n.bidi.hasAnyRtl(a)};
goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$");goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$");goog.i18n.bidi.endsWithLtr=function(a,b){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(a,b))};goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr;
goog.i18n.bidi.endsWithRtl=function(a,b){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(a,b))};goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl;goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;goog.i18n.bidi.isRtlLanguage=function(a){return goog.i18n.bidi.rtlLocalesRe_.test(a)};goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g;
goog.i18n.bidi.guardBracketInText=function(a,b){b=(void 0===b?goog.i18n.bidi.hasAnyRtl(a):b)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM;return a.replace(goog.i18n.bidi.bracketGuardTextRe_,b+"$&"+b)};goog.i18n.bidi.enforceRtlInHtml=function(a){return"<"==a.charAt(0)?a.replace(/<\w+/,"$& dir=rtl"):"\n<span dir=rtl>"+a+"</span>"};goog.i18n.bidi.enforceRtlInText=function(a){return goog.i18n.bidi.Format.RLE+a+goog.i18n.bidi.Format.PDF};
goog.i18n.bidi.enforceLtrInHtml=function(a){return"<"==a.charAt(0)?a.replace(/<\w+/,"$& dir=ltr"):"\n<span dir=ltr>"+a+"</span>"};goog.i18n.bidi.enforceLtrInText=function(a){return goog.i18n.bidi.Format.LRE+a+goog.i18n.bidi.Format.PDF};goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g;goog.i18n.bidi.leftRe_=/left/gi;goog.i18n.bidi.rightRe_=/right/gi;goog.i18n.bidi.tempRe_=/%%%%/g;
goog.i18n.bidi.mirrorCSS=function(a){return a.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)};goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g;goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g;
goog.i18n.bidi.normalizeHebrewQuote=function(a){return a.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1\u05f4").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1\u05f3")};goog.i18n.bidi.wordSeparatorRe_=/\s+/;goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/;goog.i18n.bidi.rtlDetectionThreshold_=.4;
goog.i18n.bidi.estimateDirection=function(a,b){var c=0,d=0,e=!1;a=goog.i18n.bidi.stripHtmlIfNeeded_(a,b).split(goog.i18n.bidi.wordSeparatorRe_);for(b=0;b<a.length;b++){var f=a[b];goog.i18n.bidi.startsWithRtl(f)?(c++,d++):goog.i18n.bidi.isRequiredLtrRe_.test(f)?e=!0:goog.i18n.bidi.hasAnyLtr(f)?d++:goog.i18n.bidi.hasNumeralsRe_.test(f)&&(e=!0)}return 0==d?e?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:c/d>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR};
goog.i18n.bidi.detectRtlDirectionality=function(a,b){return goog.i18n.bidi.estimateDirection(a,b)==goog.i18n.bidi.Dir.RTL};goog.i18n.bidi.setElementDirAndAlign=function(a,b){a&&(b=goog.i18n.bidi.toDir(b))&&(a.style.textAlign=b==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,a.dir=b==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")};
goog.i18n.bidi.setElementDirByTextDirectionality=function(a,b){switch(goog.i18n.bidi.estimateDirection(b)){case goog.i18n.bidi.Dir.LTR:a.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:a.dir="rtl";break;default:a.removeAttribute("dir")}};goog.i18n.bidi.DirectionalString=function(){};goog.html.TrustedResourceUrl=function(){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_="";this.trustedURL_=null;this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0;goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_.toString()};
goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0;goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR};
goog.html.TrustedResourceUrl.prototype.cloneWithParams=function(a,b){var c=goog.html.TrustedResourceUrl.unwrap(this);c=goog.html.TrustedResourceUrl.URL_PARAM_PARSER_.exec(c);var d=c[3]||"";return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(c[1]+goog.html.TrustedResourceUrl.stringifyParams_("?",c[2]||"",a)+goog.html.TrustedResourceUrl.stringifyParams_("#",d,b))};
goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"});goog.html.TrustedResourceUrl.unwrap=function(a){return goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(a).toString()};
goog.html.TrustedResourceUrl.unwrapTrustedScriptURL=function(a){if(a instanceof goog.html.TrustedResourceUrl&&a.constructor===goog.html.TrustedResourceUrl&&a.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_)return a.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_;goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+a+"' of type "+goog.typeOf(a));return"type_error:TrustedResourceUrl"};
goog.html.TrustedResourceUrl.unwrapTrustedURL=function(a){return a.trustedURL_?a.trustedURL_:goog.html.TrustedResourceUrl.unwrap(a)};
goog.html.TrustedResourceUrl.format=function(a,b){var c=goog.string.Const.unwrap(a);if(!goog.html.TrustedResourceUrl.BASE_URL_.test(c))throw Error("Invalid TrustedResourceUrl format: "+c);a=c.replace(goog.html.TrustedResourceUrl.FORMAT_MARKER_,function(a,e){if(!Object.prototype.hasOwnProperty.call(b,e))throw Error('Found marker, "'+e+'", in format string, "'+c+'", but no valid label mapping found in args: '+JSON.stringify(b));a=b[e];return a instanceof goog.string.Const?goog.string.Const.unwrap(a):
encodeURIComponent(String(a))});return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(a)};goog.html.TrustedResourceUrl.FORMAT_MARKER_=/%{(\w+)}/g;goog.html.TrustedResourceUrl.BASE_URL_=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i;goog.html.TrustedResourceUrl.URL_PARAM_PARSER_=/^([^?#]*)(\?[^#]*)?(#[\s\S]*)?/;
goog.html.TrustedResourceUrl.formatWithParams=function(a,b,c,d){return goog.html.TrustedResourceUrl.format(a,b).cloneWithParams(c,d)};goog.html.TrustedResourceUrl.fromConstant=function(a){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(a))};goog.html.TrustedResourceUrl.fromConstants=function(a){for(var b="",c=0;c<a.length;c++)b+=goog.string.Const.unwrap(a[c]);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(b)};
goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};
goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(a){var b=new goog.html.TrustedResourceUrl;b.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScriptURL(a):a;goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY&&(b.trustedURL_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createURL(a));return b};
goog.html.TrustedResourceUrl.stringifyParams_=function(a,b,c){if(null==c)return b;if(goog.isString(c))return c?a+encodeURIComponent(c):"";for(var d in c){var e=c[d];e=goog.isArray(e)?e:[e];for(var f=0;f<e.length;f++){var g=e[f];null!=g&&(b||(b=a),b+=(b.length>a.length?"&":"")+encodeURIComponent(d)+"="+encodeURIComponent(String(g)))}}return b};goog.html.SafeUrl=function(){this.privateDoNotAccessOrElseSafeUrlWrappedValue_="";this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez";goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0;goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeUrlWrappedValue_.toString()};
goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0;goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR};goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeUrlWrappedValue_+"}"});goog.html.SafeUrl.unwrap=function(a){return goog.html.SafeUrl.unwrapTrustedURL(a).toString()};
goog.html.SafeUrl.unwrapTrustedURL=function(a){if(a instanceof goog.html.SafeUrl&&a.constructor===goog.html.SafeUrl&&a.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_)return a.privateDoNotAccessOrElseSafeUrlWrappedValue_;goog.asserts.fail("expected object of type SafeUrl, got '"+a+"' of type "+goog.typeOf(a));return"type_error:SafeUrl"};goog.html.SafeUrl.fromConstant=function(a){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(a))};
goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-wav|wav|webm)|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime))$/i;goog.html.SafeUrl.fromBlob=function(a){a=goog.html.SAFE_MIME_TYPE_PATTERN_.test(a.type)?goog.fs.url.createObjectUrl(a):goog.html.SafeUrl.INNOCUOUS_STRING;return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(a)};goog.html.DATA_URL_PATTERN_=/^data:([^;,]*);base64,[a-z0-9+\/]+=*$/i;
goog.html.SafeUrl.fromDataUrl=function(a){a=a.replace(/(%0A|%0D)/g,"");var b=a.match(goog.html.DATA_URL_PATTERN_);b=b&&goog.html.SAFE_MIME_TYPE_PATTERN_.test(b[1]);return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(b?a:goog.html.SafeUrl.INNOCUOUS_STRING)};goog.html.SafeUrl.fromTelUrl=function(a){goog.string.internal.caseInsensitiveStartsWith(a,"tel:")||(a=goog.html.SafeUrl.INNOCUOUS_STRING);return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(a)};
goog.html.SIP_URL_PATTERN_=/^sip[s]?:[+a-z0-9_.!$%&'*\/=^`{|}~-]+@([a-z0-9-]+\.)+[a-z0-9]{2,63}$/i;goog.html.SafeUrl.fromSipUrl=function(a){goog.html.SIP_URL_PATTERN_.test(decodeURIComponent(a))||(a=goog.html.SafeUrl.INNOCUOUS_STRING);return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(a)};goog.html.SafeUrl.fromFacebookMessengerUrl=function(a){goog.string.internal.caseInsensitiveStartsWith(a,"fb-messenger://share")||(a=goog.html.SafeUrl.INNOCUOUS_STRING);return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(a)};
goog.html.SafeUrl.fromSmsUrl=function(a){goog.string.internal.caseInsensitiveStartsWith(a,"sms:")&&goog.html.SafeUrl.isSmsUrlBodyValid_(a)||(a=goog.html.SafeUrl.INNOCUOUS_STRING);return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(a)};goog.html.SafeUrl.isSmsUrlBodyValid_=function(a){var b=a.indexOf("#");0<b&&(a=a.substring(0,b));b=a.match(/[?&]body=/gi);if(!b)return!0;if(1<b.length)return!1;a=a.match(/[?&]body=([^&]*)/)[1];if(!a)return!0;try{decodeURIComponent(a)}catch(c){return!1}return/^(?:[a-z0-9\-_.~]|%[0-9a-f]{2})+$/i.test(a)};
goog.html.SafeUrl.fromSshUrl=function(a){goog.string.internal.caseInsensitiveStartsWith(a,"ssh://")||(a=goog.html.SafeUrl.INNOCUOUS_STRING);return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(a)};goog.html.SafeUrl.sanitizeChromeExtensionUrl=function(a,b){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^chrome-extension:\/\/([^\/]+)\//,a,b)};
goog.html.SafeUrl.sanitizeFirefoxExtensionUrl=function(a,b){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^moz-extension:\/\/([^\/]+)\//,a,b)};goog.html.SafeUrl.sanitizeEdgeExtensionUrl=function(a,b){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^ms-browser-extension:\/\/([^\/]+)\//,a,b)};
goog.html.SafeUrl.sanitizeExtensionUrl_=function(a,b,c){(a=a.exec(b))?(a=a[1],-1==(c instanceof goog.string.Const?[goog.string.Const.unwrap(c)]:c.map(function(a){return goog.string.Const.unwrap(a)})).indexOf(a)&&(b=goog.html.SafeUrl.INNOCUOUS_STRING)):b=goog.html.SafeUrl.INNOCUOUS_STRING;return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(b)};goog.html.SafeUrl.fromTrustedResourceUrl=function(a){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.TrustedResourceUrl.unwrap(a))};
goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;goog.html.SafeUrl.SAFE_URL_PATTERN=goog.html.SAFE_URL_PATTERN_;goog.html.SafeUrl.sanitize=function(a){if(a instanceof goog.html.SafeUrl)return a;a="object"==typeof a&&a.implementsGoogStringTypedString?a.getTypedStringValue():String(a);goog.html.SAFE_URL_PATTERN_.test(a)||(a=goog.html.SafeUrl.INNOCUOUS_STRING);return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(a)};
goog.html.SafeUrl.sanitizeAssertUnchanged=function(a,b){if(a instanceof goog.html.SafeUrl)return a;a="object"==typeof a&&a.implementsGoogStringTypedString?a.getTypedStringValue():String(a);if(b&&/^data:/i.test(a)&&(b=goog.html.SafeUrl.fromDataUrl(a),b.getTypedStringValue()==a))return b;goog.asserts.assert(goog.html.SAFE_URL_PATTERN_.test(a),"%s does not match the safe URL pattern",a)||(a=goog.html.SafeUrl.INNOCUOUS_STRING);return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(a)};
goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(a){var b=new goog.html.SafeUrl;b.privateDoNotAccessOrElseSafeUrlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createURL(a):a;return b};goog.html.SafeUrl.ABOUT_BLANK=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank");goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="";this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0;goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};
goog.html.SafeStyle.fromConstant=function(a){a=goog.string.Const.unwrap(a);if(0===a.length)return goog.html.SafeStyle.EMPTY;goog.asserts.assert(goog.string.internal.endsWith(a,";"),"Last character of style string is not ';': "+a);goog.asserts.assert(goog.string.internal.contains(a,":"),"Style string must contain at least one ':', to specify a \"name: value\" pair: "+a);return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(a)};
goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_};goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"});
goog.html.SafeStyle.unwrap=function(a){if(a instanceof goog.html.SafeStyle&&a.constructor===goog.html.SafeStyle&&a.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_)return a.privateDoNotAccessOrElseSafeStyleWrappedValue_;goog.asserts.fail("expected object of type SafeStyle, got '"+a+"' of type "+goog.typeOf(a));return"type_error:SafeStyle"};goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(a){return(new goog.html.SafeStyle).initSecurityPrivateDoNotAccessOrElse_(a)};
goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(a){this.privateDoNotAccessOrElseSafeStyleWrappedValue_=a;return this};goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse("");goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez";
goog.html.SafeStyle.create=function(a){var b="",c;for(c in a){if(!/^[-_a-zA-Z0-9]+$/.test(c))throw Error("Name allows only [-_a-zA-Z0-9], got: "+c);var d=a[c];null!=d&&(d=goog.isArray(d)?goog.array.map(d,goog.html.SafeStyle.sanitizePropertyValue_).join(" "):goog.html.SafeStyle.sanitizePropertyValue_(d),b+=c+":"+d+";")}return b?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(b):goog.html.SafeStyle.EMPTY};
goog.html.SafeStyle.sanitizePropertyValue_=function(a){if(a instanceof goog.html.SafeUrl)return'url("'+goog.html.SafeUrl.unwrap(a).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';a=a instanceof goog.string.Const?goog.string.Const.unwrap(a):goog.html.SafeStyle.sanitizePropertyValueString_(String(a));if(/[{;}]/.test(a))throw new goog.asserts.AssertionError("Value does not allow [{;}], got: %s.",[a]);return a};
goog.html.SafeStyle.sanitizePropertyValueString_=function(a){var b=a.replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.URL_RE_,"url");if(goog.html.SafeStyle.VALUE_RE_.test(b)){if(goog.html.SafeStyle.COMMENT_RE_.test(a))return goog.asserts.fail("String value disallows comments, got: "+a),goog.html.SafeStyle.INNOCUOUS_STRING;if(!goog.html.SafeStyle.hasBalancedQuotes_(a))return goog.asserts.fail("String value requires balanced quotes, got: "+
a),goog.html.SafeStyle.INNOCUOUS_STRING;if(!goog.html.SafeStyle.hasBalancedSquareBrackets_(a))return goog.asserts.fail("String value requires balanced square brackets and one identifier per pair of brackets, got: "+a),goog.html.SafeStyle.INNOCUOUS_STRING}else return goog.asserts.fail("String value allows only "+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+" and simple functions, got: "+a),goog.html.SafeStyle.INNOCUOUS_STRING;return goog.html.SafeStyle.sanitizeUrl_(a)};
goog.html.SafeStyle.hasBalancedQuotes_=function(a){for(var b=!0,c=!0,d=0;d<a.length;d++){var e=a.charAt(d);"'"==e&&c?b=!b:'"'==e&&b&&(c=!c)}return b&&c};goog.html.SafeStyle.hasBalancedSquareBrackets_=function(a){for(var b=!0,c=/^[-_a-zA-Z0-9]$/,d=0;d<a.length;d++){var e=a.charAt(d);if("]"==e){if(b)return!1;b=!0}else if("["==e){if(!b)return!1;b=!1}else if(!b&&!c.test(e))return!1}return b};goog.html.SafeStyle.VALUE_ALLOWED_CHARS_="[-,.\"'%_!# a-zA-Z0-9\\[\\]]";
goog.html.SafeStyle.VALUE_RE_=new RegExp("^"+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+"+$");goog.html.SafeStyle.URL_RE_=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g;goog.html.SafeStyle.FUNCTIONS_RE_=/\b(hsl|hsla|rgb|rgba|matrix|calc|minmax|fit-content|repeat|(rotate|scale|translate)(X|Y|Z|3d)?)\([-+*/0-9a-z.%\[\], ]+\)/g;goog.html.SafeStyle.COMMENT_RE_=/\/\*/;
goog.html.SafeStyle.sanitizeUrl_=function(a){return a.replace(goog.html.SafeStyle.URL_RE_,function(a,c,d,e){var b="";d=d.replace(/^(['"])(.*)\1$/,function(a,c,d){b=c;return d});a=goog.html.SafeUrl.sanitize(d).getTypedStringValue();return c+b+a+b+e})};goog.html.SafeStyle.concat=function(a){var b="",c=function(a){goog.isArray(a)?goog.array.forEach(a,c):b+=goog.html.SafeStyle.unwrap(a)};goog.array.forEach(arguments,c);return b?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(b):goog.html.SafeStyle.EMPTY};goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="";this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=!0;goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};
goog.html.SafeStyleSheet.createRule=function(a,b){if(goog.string.internal.contains(a,"<"))throw Error("Selector does not allow '<', got: "+a);var c=a.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(c))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+a);if(!goog.html.SafeStyleSheet.hasBalancedBrackets_(c))throw Error("() and [] in selector must be balanced, got: "+a);b instanceof goog.html.SafeStyle||(b=goog.html.SafeStyle.create(b));
a=a+"{"+goog.html.SafeStyle.unwrap(b).replace(/</g,"\\3C ")+"}";return goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(a)};goog.html.SafeStyleSheet.hasBalancedBrackets_=function(a){for(var b={"(":")","[":"]"},c=[],d=0;d<a.length;d++){var e=a[d];if(b[e])c.push(b[e]);else if(goog.object.contains(b,e)&&c.pop()!=e)return!1}return 0==c.length};
goog.html.SafeStyleSheet.concat=function(a){var b="",c=function(a){goog.isArray(a)?goog.array.forEach(a,c):b+=goog.html.SafeStyleSheet.unwrap(a)};goog.array.forEach(arguments,c);return goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(b)};
goog.html.SafeStyleSheet.fromConstant=function(a){a=goog.string.Const.unwrap(a);if(0===a.length)return goog.html.SafeStyleSheet.EMPTY;goog.asserts.assert(!goog.string.internal.contains(a,"<"),"Forbidden '<' character in style sheet string: "+a);return goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(a)};goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_};
goog.DEBUG&&(goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"});
goog.html.SafeStyleSheet.unwrap=function(a){if(a instanceof goog.html.SafeStyleSheet&&a.constructor===goog.html.SafeStyleSheet&&a.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_)return a.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_;goog.asserts.fail("expected object of type SafeStyleSheet, got '"+a+"' of type "+goog.typeOf(a));return"type_error:SafeStyleSheet"};
goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(a){return(new goog.html.SafeStyleSheet).initSecurityPrivateDoNotAccessOrElse_(a)};goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(a){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=a;return this};goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse("");goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="";this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_;this.dir_=null};goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0;goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_};goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0;goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_.toString()};
goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"});goog.html.SafeHtml.unwrap=function(a){return goog.html.SafeHtml.unwrapTrustedHTML(a).toString()};
goog.html.SafeHtml.unwrapTrustedHTML=function(a){if(a instanceof goog.html.SafeHtml&&a.constructor===goog.html.SafeHtml&&a.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_)return a.privateDoNotAccessOrElseSafeHtmlWrappedValue_;goog.asserts.fail("expected object of type SafeHtml, got '"+a+"' of type "+goog.typeOf(a));return"type_error:SafeHtml"};
goog.html.SafeHtml.htmlEscape=function(a){if(a instanceof goog.html.SafeHtml)return a;var b="object"==typeof a,c=null;b&&a.implementsGoogI18nBidiDirectionalString&&(c=a.getDirection());a=b&&a.implementsGoogStringTypedString?a.getTypedStringValue():String(a);return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.htmlEscape(a),c)};
goog.html.SafeHtml.htmlEscapePreservingNewlines=function(a){if(a instanceof goog.html.SafeHtml)return a;a=goog.html.SafeHtml.htmlEscape(a);return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.newLineToBr(goog.html.SafeHtml.unwrap(a)),a.getDirection())};
goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(a){if(a instanceof goog.html.SafeHtml)return a;a=goog.html.SafeHtml.htmlEscape(a);return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.whitespaceEscape(goog.html.SafeHtml.unwrap(a)),a.getDirection())};goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape;goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/;
goog.html.SafeHtml.URL_ATTRIBUTES_={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0};goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0};goog.html.SafeHtml.create=function(a,b,c){goog.html.SafeHtml.verifyTagName(String(a));return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(String(a),b,c)};
goog.html.SafeHtml.verifyTagName=function(a){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(a))throw Error("Invalid tag name <"+a+">.");if(a.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error("Tag name <"+a+"> is not allowed for SafeHtml.");};
goog.html.SafeHtml.createIframe=function(a,b,c,d){a&&goog.html.TrustedResourceUrl.unwrap(a);var e={};e.src=a||null;e.srcdoc=b&&goog.html.SafeHtml.unwrap(b);a=goog.html.SafeHtml.combineAttributes(e,{sandbox:""},c);return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",a,d)};
goog.html.SafeHtml.createSandboxIframe=function(a,b,c,d){if(!goog.html.SafeHtml.canUseSandboxIframe())throw Error("The browser does not support sandboxed iframes.");var e={};e.src=a?goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(a)):null;e.srcdoc=b||null;e.sandbox="";a=goog.html.SafeHtml.combineAttributes(e,{},c);return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",a,d)};
goog.html.SafeHtml.canUseSandboxIframe=function(){return goog.global.HTMLIFrameElement&&"sandbox"in goog.global.HTMLIFrameElement.prototype};goog.html.SafeHtml.createScriptSrc=function(a,b){goog.html.TrustedResourceUrl.unwrap(a);a=goog.html.SafeHtml.combineAttributes({src:a},{},b);return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",a)};
goog.html.SafeHtml.createScript=function(a,b){for(var c in b){var d=c.toLowerCase();if("language"==d||"src"==d||"text"==d||"type"==d)throw Error('Cannot set "'+d+'" attribute');}c="";a=goog.array.concat(a);for(d=0;d<a.length;d++)c+=goog.html.SafeScript.unwrap(a[d]);a=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(c,goog.i18n.bidi.Dir.NEUTRAL);return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",b,a)};
goog.html.SafeHtml.createStyle=function(a,b){b=goog.html.SafeHtml.combineAttributes({type:"text/css"},{},b);var c="";a=goog.array.concat(a);for(var d=0;d<a.length;d++)c+=goog.html.SafeStyleSheet.unwrap(a[d]);a=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(c,goog.i18n.bidi.Dir.NEUTRAL);return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",b,a)};
goog.html.SafeHtml.createMetaRefresh=function(a,b){a=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(a));(goog.labs.userAgent.browser.isIE()||goog.labs.userAgent.browser.isEdge())&&goog.string.internal.contains(a,";")&&(a="'"+a.replace(/'/g,"%27")+"'");return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",{"http-equiv":"refresh",content:(b||0)+"; url="+a})};
goog.html.SafeHtml.getAttrNameAndValue_=function(a,b,c){if(c instanceof goog.string.Const)c=goog.string.Const.unwrap(c);else if("style"==b.toLowerCase())c=goog.html.SafeHtml.getStyleValue_(c);else{if(/^on/i.test(b))throw Error('Attribute "'+b+'" requires goog.string.Const value, "'+c+'" given.');if(b.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(c instanceof goog.html.TrustedResourceUrl)c=goog.html.TrustedResourceUrl.unwrap(c);else if(c instanceof goog.html.SafeUrl)c=goog.html.SafeUrl.unwrap(c);
else if(goog.isString(c))c=goog.html.SafeUrl.sanitize(c).getTypedStringValue();else throw Error('Attribute "'+b+'" on tag "'+a+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+c+'" given.');}c.implementsGoogStringTypedString&&(c=c.getTypedStringValue());goog.asserts.assert(goog.isString(c)||goog.isNumber(c),"String or number value expected, got "+typeof c+" with value: "+c);return b+'="'+goog.string.internal.htmlEscape(String(c))+'"'};
goog.html.SafeHtml.getStyleValue_=function(a){if(!goog.isObject(a))throw Error('The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof a+" given: "+a);a instanceof goog.html.SafeStyle||(a=goog.html.SafeStyle.create(a));return goog.html.SafeStyle.unwrap(a)};goog.html.SafeHtml.createWithDir=function(a,b,c,d){b=goog.html.SafeHtml.create(b,c,d);b.dir_=a;return b};
goog.html.SafeHtml.join=function(a,b){a=goog.html.SafeHtml.htmlEscape(a);var c=a.getDirection(),d=[],e=function(a){goog.isArray(a)?goog.array.forEach(a,e):(a=goog.html.SafeHtml.htmlEscape(a),d.push(goog.html.SafeHtml.unwrap(a)),a=a.getDirection(),c==goog.i18n.bidi.Dir.NEUTRAL?c=a:a!=goog.i18n.bidi.Dir.NEUTRAL&&c!=a&&(c=null))};goog.array.forEach(b,e);return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(d.join(goog.html.SafeHtml.unwrap(a)),c)};
goog.html.SafeHtml.concat=function(a){return goog.html.SafeHtml.join(goog.html.SafeHtml.EMPTY,Array.prototype.slice.call(arguments))};goog.html.SafeHtml.concatWithDir=function(a,b){var c=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));c.dir_=a;return c};goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(a,b){return(new goog.html.SafeHtml).initSecurityPrivateDoNotAccessOrElse_(a,b)};
goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(a,b){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createHTML(a):a;this.dir_=b;return this};
goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(a,b,c){var d=null;var e="<"+a+goog.html.SafeHtml.stringifyAttributes(a,b);goog.isDefAndNotNull(c)?goog.isArray(c)||(c=[c]):c=[];goog.dom.tags.isVoidTag(a.toLowerCase())?(goog.asserts.assert(!c.length,"Void tag <"+a+"> does not allow content."),e+=">"):(d=goog.html.SafeHtml.concat(c),e+=">"+goog.html.SafeHtml.unwrap(d)+"</"+a+">",d=d.getDirection());(a=b&&b.dir)&&(d=/^(ltr|rtl|auto)$/i.test(a)?goog.i18n.bidi.Dir.NEUTRAL:
null);return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(e,d)};goog.html.SafeHtml.stringifyAttributes=function(a,b){var c="";if(b)for(var d in b){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(d))throw Error('Invalid attribute name "'+d+'".');var e=b[d];goog.isDefAndNotNull(e)&&(c+=" "+goog.html.SafeHtml.getAttrNameAndValue_(a,d,e))}return c};
goog.html.SafeHtml.combineAttributes=function(a,b,c){var d={},e;for(e in a)goog.asserts.assert(e.toLowerCase()==e,"Must be lower case"),d[e]=a[e];for(e in b)goog.asserts.assert(e.toLowerCase()==e,"Must be lower case"),d[e]=b[e];for(e in c){var f=e.toLowerCase();if(f in a)throw Error('Cannot override "'+f+'" attribute, got "'+e+'" with value "'+c[e]+'"');f in b&&delete d[f];d[e]=c[e]}return d};
goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL);goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL);goog.html.SafeHtml.BR=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL);goog.html.uncheckedconversions={};goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(a,b,c){goog.asserts.assertString(goog.string.Const.unwrap(a),"must provide justification");goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(a)),"must provide non-empty justification");return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(b,c||null)};
goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(a,b){goog.asserts.assertString(goog.string.Const.unwrap(a),"must provide justification");goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(a)),"must provide non-empty justification");return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(b)};
goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(a,b){goog.asserts.assertString(goog.string.Const.unwrap(a),"must provide justification");goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(a)),"must provide non-empty justification");return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(b)};
goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(a,b){goog.asserts.assertString(goog.string.Const.unwrap(a),"must provide justification");goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(a)),"must provide non-empty justification");return goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(b)};
goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(a,b){goog.asserts.assertString(goog.string.Const.unwrap(a),"must provide justification");goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(a)),"must provide non-empty justification");return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(b)};
goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(a,b){goog.asserts.assertString(goog.string.Const.unwrap(a),"must provide justification");goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(a)),"must provide non-empty justification");return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(b)};goog.dom.safe={};goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"};goog.dom.safe.insertAdjacentHtml=function(a,b,c){a.insertAdjacentHTML(b,goog.html.SafeHtml.unwrapTrustedHTML(c))};goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0};
goog.dom.safe.isInnerHtmlCleanupRecursive_=goog.functions.cacheReturnValue(function(){if(goog.DEBUG&&"undefined"===typeof document)return!1;var a=document.createElement("div"),b=document.createElement("div");b.appendChild(document.createElement("div"));a.appendChild(b);if(goog.DEBUG&&!a.firstChild)return!1;b=a.firstChild.firstChild;a.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(goog.html.SafeHtml.EMPTY);return!b.parentElement});
goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse=function(a,b){if(goog.dom.safe.isInnerHtmlCleanupRecursive_())for(;a.lastChild;)a.removeChild(a.lastChild);a.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(b)};
goog.dom.safe.setInnerHtml=function(a,b){if(goog.asserts.ENABLE_ASSERTS){var c=a.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[c])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+a.tagName+".");}goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse(a,b)};goog.dom.safe.setOuterHtml=function(a,b){a.outerHTML=goog.html.SafeHtml.unwrapTrustedHTML(b)};
goog.dom.safe.setFormElementAction=function(a,b){b=b instanceof goog.html.SafeUrl?b:goog.html.SafeUrl.sanitizeAssertUnchanged(b);goog.dom.asserts.assertIsHTMLFormElement(a).action=goog.html.SafeUrl.unwrapTrustedURL(b)};goog.dom.safe.setButtonFormAction=function(a,b){b=b instanceof goog.html.SafeUrl?b:goog.html.SafeUrl.sanitizeAssertUnchanged(b);goog.dom.asserts.assertIsHTMLButtonElement(a).formAction=goog.html.SafeUrl.unwrapTrustedURL(b)};
goog.dom.safe.setInputFormAction=function(a,b){b=b instanceof goog.html.SafeUrl?b:goog.html.SafeUrl.sanitizeAssertUnchanged(b);goog.dom.asserts.assertIsHTMLInputElement(a).formAction=goog.html.SafeUrl.unwrapTrustedURL(b)};goog.dom.safe.setStyle=function(a,b){a.style.cssText=goog.html.SafeStyle.unwrap(b)};goog.dom.safe.documentWrite=function(a,b){a.write(goog.html.SafeHtml.unwrapTrustedHTML(b))};
goog.dom.safe.setAnchorHref=function(a,b){goog.dom.asserts.assertIsHTMLAnchorElement(a);b=b instanceof goog.html.SafeUrl?b:goog.html.SafeUrl.sanitizeAssertUnchanged(b);a.href=goog.html.SafeUrl.unwrapTrustedURL(b)};goog.dom.safe.setImageSrc=function(a,b){goog.dom.asserts.assertIsHTMLImageElement(a);if(!(b instanceof goog.html.SafeUrl)){var c=/^data:image\//i.test(b);b=goog.html.SafeUrl.sanitizeAssertUnchanged(b,c)}a.src=goog.html.SafeUrl.unwrapTrustedURL(b)};
goog.dom.safe.setAudioSrc=function(a,b){goog.dom.asserts.assertIsHTMLAudioElement(a);if(!(b instanceof goog.html.SafeUrl)){var c=/^data:audio\//i.test(b);b=goog.html.SafeUrl.sanitizeAssertUnchanged(b,c)}a.src=goog.html.SafeUrl.unwrapTrustedURL(b)};goog.dom.safe.setVideoSrc=function(a,b){goog.dom.asserts.assertIsHTMLVideoElement(a);if(!(b instanceof goog.html.SafeUrl)){var c=/^data:video\//i.test(b);b=goog.html.SafeUrl.sanitizeAssertUnchanged(b,c)}a.src=goog.html.SafeUrl.unwrapTrustedURL(b)};
goog.dom.safe.setEmbedSrc=function(a,b){goog.dom.asserts.assertIsHTMLEmbedElement(a);a.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(b)};goog.dom.safe.setFrameSrc=function(a,b){goog.dom.asserts.assertIsHTMLFrameElement(a);a.src=goog.html.TrustedResourceUrl.unwrapTrustedURL(b)};goog.dom.safe.setIframeSrc=function(a,b){goog.dom.asserts.assertIsHTMLIFrameElement(a);a.src=goog.html.TrustedResourceUrl.unwrapTrustedURL(b)};
goog.dom.safe.setIframeSrcdoc=function(a,b){goog.dom.asserts.assertIsHTMLIFrameElement(a);a.srcdoc=goog.html.SafeHtml.unwrapTrustedHTML(b)};
goog.dom.safe.setLinkHrefAndRel=function(a,b,c){goog.dom.asserts.assertIsHTMLLinkElement(a);a.rel=c;goog.string.internal.caseInsensitiveContains(c,"stylesheet")?(goog.asserts.assert(b instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),a.href=goog.html.TrustedResourceUrl.unwrapTrustedURL(b)):a.href=b instanceof goog.html.TrustedResourceUrl?goog.html.TrustedResourceUrl.unwrapTrustedURL(b):b instanceof goog.html.SafeUrl?goog.html.SafeUrl.unwrapTrustedURL(b):
goog.html.SafeUrl.unwrapTrustedURL(goog.html.SafeUrl.sanitizeAssertUnchanged(b))};goog.dom.safe.setObjectData=function(a,b){goog.dom.asserts.assertIsHTMLObjectElement(a);a.data=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(b)};goog.dom.safe.setScriptSrc=function(a,b){goog.dom.asserts.assertIsHTMLScriptElement(a);a.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(b);(b=goog.getScriptNonce())&&a.setAttribute("nonce",b)};
goog.dom.safe.setScriptContent=function(a,b){goog.dom.asserts.assertIsHTMLScriptElement(a);a.text=goog.html.SafeScript.unwrapTrustedScript(b);(b=goog.getScriptNonce())&&a.setAttribute("nonce",b)};goog.dom.safe.setLocationHref=function(a,b){goog.dom.asserts.assertIsLocation(a);b=b instanceof goog.html.SafeUrl?b:goog.html.SafeUrl.sanitizeAssertUnchanged(b);a.href=goog.html.SafeUrl.unwrapTrustedURL(b)};
goog.dom.safe.assignLocation=function(a,b){goog.dom.asserts.assertIsLocation(a);b=b instanceof goog.html.SafeUrl?b:goog.html.SafeUrl.sanitizeAssertUnchanged(b);a.assign(goog.html.SafeUrl.unwrapTrustedURL(b))};goog.dom.safe.replaceLocation=function(a,b){goog.dom.asserts.assertIsLocation(a);b=b instanceof goog.html.SafeUrl?b:goog.html.SafeUrl.sanitizeAssertUnchanged(b);a.replace(goog.html.SafeUrl.unwrapTrustedURL(b))};
goog.dom.safe.openInWindow=function(a,b,c,d,e){a=a instanceof goog.html.SafeUrl?a:goog.html.SafeUrl.sanitizeAssertUnchanged(a);return(b||window).open(goog.html.SafeUrl.unwrapTrustedURL(a),c?goog.string.Const.unwrap(c):"",d,e)};goog.dom.safe.parseFromStringHtml=function(a,b){return goog.dom.safe.parseFromString(a,b,"text/html")};goog.dom.safe.parseFromString=function(a,b,c){return a.parseFromString(goog.html.SafeHtml.unwrapTrustedHTML(b),c)};
goog.dom.safe.createImageFromBlob=function(a){if(!/^image\/.*/g.test(a.type))throw Error("goog.dom.safe.createImageFromBlob only accepts MIME type image/.*.");var b=window.URL.createObjectURL(a);a=new Image;a.onload=function(){window.URL.revokeObjectURL(b)};goog.dom.safe.setImageSrc(a,goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Image blob URL."),b));return a};goog.math={};goog.math.randomInt=function(a){return Math.floor(Math.random()*a)};goog.math.uniformRandom=function(a,b){return a+Math.random()*(b-a)};goog.math.clamp=function(a,b,c){return Math.min(Math.max(a,b),c)};goog.math.modulo=function(a,b){a%=b;return 0>a*b?a+b:a};goog.math.lerp=function(a,b,c){return a+c*(b-a)};goog.math.nearlyEquals=function(a,b,c){return Math.abs(a-b)<=(c||1E-6)};goog.math.standardAngle=function(a){return goog.math.modulo(a,360)};
goog.math.standardAngleInRadians=function(a){return goog.math.modulo(a,2*Math.PI)};goog.math.toRadians=function(a){return a*Math.PI/180};goog.math.toDegrees=function(a){return 180*a/Math.PI};goog.math.angleDx=function(a,b){return b*Math.cos(goog.math.toRadians(a))};goog.math.angleDy=function(a,b){return b*Math.sin(goog.math.toRadians(a))};goog.math.angle=function(a,b,c,d){return goog.math.standardAngle(goog.math.toDegrees(Math.atan2(d-b,c-a)))};
goog.math.angleDifference=function(a,b){a=goog.math.standardAngle(b)-goog.math.standardAngle(a);180<a?a-=360:-180>=a&&(a=360+a);return a};goog.math.sign=function(a){return 0<a?1:0>a?-1:a};
goog.math.longestCommonSubsequence=function(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b,c){return a[b]};for(var e=a.length,f=b.length,g=[],h=0;h<e+1;h++)g[h]=[],g[h][0]=0;for(var k=0;k<f+1;k++)g[0][k]=0;for(h=1;h<=e;h++)for(k=1;k<=f;k++)c(a[h-1],b[k-1])?g[h][k]=g[h-1][k-1]+1:g[h][k]=Math.max(g[h-1][k],g[h][k-1]);var l=[];h=e;for(k=f;0<h&&0<k;)c(a[h-1],b[k-1])?(l.unshift(d(h-1,k-1)),h--,k--):g[h-1][k]>g[h][k-1]?h--:k--;return l};
goog.math.sum=function(a){return goog.array.reduce(arguments,function(a,c){return a+c},0)};goog.math.average=function(a){return goog.math.sum.apply(null,arguments)/arguments.length};goog.math.sampleVariance=function(a){var b=arguments.length;if(2>b)return 0;var c=goog.math.average.apply(null,arguments);return goog.math.sum.apply(null,goog.array.map(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)};goog.math.standardDeviation=function(a){return Math.sqrt(goog.math.sampleVariance.apply(null,arguments))};
goog.math.isInt=function(a){return isFinite(a)&&0==a%1};goog.math.isFiniteNumber=function(a){return isFinite(a)};goog.math.isNegativeZero=function(a){return 0==a&&0>1/a};goog.math.log10Floor=function(a){if(0<a){var b=Math.round(Math.log(a)*Math.LOG10E);return b-(parseFloat("1e"+b)>a?1:0)}return 0==a?-Infinity:NaN};goog.math.safeFloor=function(a,b){goog.asserts.assert(!goog.isDef(b)||0<b);return Math.floor(a+(b||2E-15))};
goog.math.safeCeil=function(a,b){goog.asserts.assert(!goog.isDef(b)||0<b);return Math.ceil(a-(b||2E-15))};goog.math.Coordinate=function(a,b){this.x=goog.isDef(a)?a:0;this.y=goog.isDef(b)?b:0};goog.math.Coordinate.prototype.clone=function(){return new goog.math.Coordinate(this.x,this.y)};goog.DEBUG&&(goog.math.Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+")"});goog.math.Coordinate.prototype.equals=function(a){return a instanceof goog.math.Coordinate&&goog.math.Coordinate.equals(this,a)};goog.math.Coordinate.equals=function(a,b){return a==b?!0:a&&b?a.x==b.x&&a.y==b.y:!1};
goog.math.Coordinate.distance=function(a,b){var c=a.x-b.x;a=a.y-b.y;return Math.sqrt(c*c+a*a)};goog.math.Coordinate.magnitude=function(a){return Math.sqrt(a.x*a.x+a.y*a.y)};goog.math.Coordinate.azimuth=function(a){return goog.math.angle(0,0,a.x,a.y)};goog.math.Coordinate.squaredDistance=function(a,b){var c=a.x-b.x;a=a.y-b.y;return c*c+a*a};goog.math.Coordinate.difference=function(a,b){return new goog.math.Coordinate(a.x-b.x,a.y-b.y)};
goog.math.Coordinate.sum=function(a,b){return new goog.math.Coordinate(a.x+b.x,a.y+b.y)};goog.math.Coordinate.prototype.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};goog.math.Coordinate.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};goog.math.Coordinate.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
goog.math.Coordinate.prototype.translate=function(a,b){a instanceof goog.math.Coordinate?(this.x+=a.x,this.y+=a.y):(this.x+=Number(a),goog.isNumber(b)&&(this.y+=b));return this};goog.math.Coordinate.prototype.scale=function(a,b){b=goog.isNumber(b)?b:a;this.x*=a;this.y*=b;return this};goog.math.Coordinate.prototype.rotateRadians=function(a,b){b=b||new goog.math.Coordinate(0,0);var c=this.x,d=this.y,e=Math.cos(a);a=Math.sin(a);this.x=(c-b.x)*e-(d-b.y)*a+b.x;this.y=(c-b.x)*a+(d-b.y)*e+b.y};
goog.math.Coordinate.prototype.rotateDegrees=function(a,b){this.rotateRadians(goog.math.toRadians(a),b)};goog.math.Size=function(a,b){this.width=a;this.height=b};goog.math.Size.equals=function(a,b){return a==b?!0:a&&b?a.width==b.width&&a.height==b.height:!1};goog.math.Size.prototype.clone=function(){return new goog.math.Size(this.width,this.height)};goog.DEBUG&&(goog.math.Size.prototype.toString=function(){return"("+this.width+" x "+this.height+")"});goog.math.Size.prototype.getLongest=function(){return Math.max(this.width,this.height)};
goog.math.Size.prototype.getShortest=function(){return Math.min(this.width,this.height)};goog.math.Size.prototype.area=function(){return this.width*this.height};goog.math.Size.prototype.perimeter=function(){return 2*(this.width+this.height)};goog.math.Size.prototype.aspectRatio=function(){return this.width/this.height};goog.math.Size.prototype.isEmpty=function(){return!this.area()};goog.math.Size.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};
goog.math.Size.prototype.fitsInside=function(a){return this.width<=a.width&&this.height<=a.height};goog.math.Size.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};goog.math.Size.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};goog.math.Size.prototype.scale=function(a,b){b=goog.isNumber(b)?b:a;this.width*=a;this.height*=b;return this};
goog.math.Size.prototype.scaleToCover=function(a){a=this.aspectRatio()<=a.aspectRatio()?a.width/this.width:a.height/this.height;return this.scale(a)};goog.math.Size.prototype.scaleToFit=function(a){a=this.aspectRatio()>a.aspectRatio()?a.width/this.width:a.height/this.height;return this.scale(a)};goog.dom.ASSUME_QUIRKS_MODE=!1;goog.dom.ASSUME_STANDARDS_MODE=!1;goog.dom.COMPAT_MODE_KNOWN_=goog.dom.ASSUME_QUIRKS_MODE||goog.dom.ASSUME_STANDARDS_MODE;goog.dom.getDomHelper=function(a){return a?new goog.dom.DomHelper(goog.dom.getOwnerDocument(a)):goog.dom.defaultDomHelper_||(goog.dom.defaultDomHelper_=new goog.dom.DomHelper)};goog.dom.getDocument=function(){return document};goog.dom.getElement=function(a){return goog.dom.getElementHelper_(document,a)};
goog.dom.getElementHelper_=function(a,b){return goog.isString(b)?a.getElementById(b):b};goog.dom.getRequiredElement=function(a){return goog.dom.getRequiredElementHelper_(document,a)};goog.dom.getRequiredElementHelper_=function(a,b){goog.asserts.assertString(b);a=goog.dom.getElementHelper_(a,b);return a=goog.asserts.assertElement(a,"No element found with id: "+b)};goog.dom.$=goog.dom.getElement;goog.dom.getElementsByTagName=function(a,b){return(b||document).getElementsByTagName(String(a))};
goog.dom.getElementsByTagNameAndClass=function(a,b,c){return goog.dom.getElementsByTagNameAndClass_(document,a,b,c)};goog.dom.getElementByTagNameAndClass=function(a,b,c){return goog.dom.getElementByTagNameAndClass_(document,a,b,c)};goog.dom.getElementsByClass=function(a,b){var c=b||document;return goog.dom.canUseQuerySelector_(c)?c.querySelectorAll("."+a):goog.dom.getElementsByTagNameAndClass_(document,"*",a,b)};
goog.dom.getElementByClass=function(a,b){var c=b||document;return(c.getElementsByClassName?c.getElementsByClassName(a)[0]:goog.dom.getElementByTagNameAndClass_(document,"*",a,b))||null};goog.dom.getRequiredElementByClass=function(a,b){b=goog.dom.getElementByClass(a,b);return goog.asserts.assert(b,"No element found with className: "+a)};goog.dom.canUseQuerySelector_=function(a){return!(!a.querySelectorAll||!a.querySelector)};
goog.dom.getElementsByTagNameAndClass_=function(a,b,c,d){a=d||a;b=b&&"*"!=b?String(b).toUpperCase():"";if(goog.dom.canUseQuerySelector_(a)&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName){a=a.getElementsByClassName(c);if(b){d={};for(var e=0,f=0,g;g=a[f];f++)b==g.nodeName&&(d[e++]=g);d.length=e;return d}return a}a=a.getElementsByTagName(b||"*");if(c){d={};for(f=e=0;g=a[f];f++)b=g.className,"function"==typeof b.split&&goog.array.contains(b.split(/\s+/),c)&&(d[e++]=g);
d.length=e;return d}return a};goog.dom.getElementByTagNameAndClass_=function(a,b,c,d){var e=d||a,f=b&&"*"!=b?String(b).toUpperCase():"";return goog.dom.canUseQuerySelector_(e)&&(f||c)?e.querySelector(f+(c?"."+c:"")):goog.dom.getElementsByTagNameAndClass_(a,b,c,d)[0]||null};goog.dom.$$=goog.dom.getElementsByTagNameAndClass;
goog.dom.setProperties=function(a,b){goog.object.forEach(b,function(b,d){b&&"object"==typeof b&&b.implementsGoogStringTypedString&&(b=b.getTypedStringValue());"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:goog.dom.DIRECT_ATTRIBUTE_MAP_.hasOwnProperty(d)?a.setAttribute(goog.dom.DIRECT_ATTRIBUTE_MAP_[d],b):goog.string.startsWith(d,"aria-")||goog.string.startsWith(d,"data-")?a.setAttribute(d,b):a[d]=b})};
goog.dom.DIRECT_ATTRIBUTE_MAP_={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};goog.dom.getViewportSize=function(a){return goog.dom.getViewportSize_(a||window)};goog.dom.getViewportSize_=function(a){a=a.document;a=goog.dom.isCss1CompatMode_(a)?a.documentElement:a.body;return new goog.math.Size(a.clientWidth,a.clientHeight)};
goog.dom.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(window)};goog.dom.getDocumentHeightForWindow=function(a){return goog.dom.getDocumentHeight_(a)};
goog.dom.getDocumentHeight_=function(a){var b=a.document,c=0;if(b){c=b.body;var d=b.documentElement;if(!d||!c)return 0;a=goog.dom.getViewportSize_(a).height;if(goog.dom.isCss1CompatMode_(b)&&d.scrollHeight)c=d.scrollHeight!=a?d.scrollHeight:d.offsetHeight;else{b=d.scrollHeight;var e=d.offsetHeight;d.clientHeight!=e&&(b=c.scrollHeight,e=c.offsetHeight);c=b>a?b>e?b:e:b<e?b:e}}return c};goog.dom.getPageScroll=function(a){return goog.dom.getDomHelper((a||goog.global||window).document).getDocumentScroll()};
goog.dom.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(document)};goog.dom.getDocumentScroll_=function(a){var b=goog.dom.getDocumentScrollElement_(a);a=goog.dom.getWindow_(a);return goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("10")&&a.pageYOffset!=b.scrollTop?new goog.math.Coordinate(b.scrollLeft,b.scrollTop):new goog.math.Coordinate(a.pageXOffset||b.scrollLeft,a.pageYOffset||b.scrollTop)};goog.dom.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(document)};
goog.dom.getDocumentScrollElement_=function(a){return a.scrollingElement?a.scrollingElement:!goog.userAgent.WEBKIT&&goog.dom.isCss1CompatMode_(a)?a.documentElement:a.body||a.documentElement};goog.dom.getWindow=function(a){return a?goog.dom.getWindow_(a):window};goog.dom.getWindow_=function(a){return a.parentWindow||a.defaultView};goog.dom.createDom=function(a,b,c){return goog.dom.createDom_(document,arguments)};
goog.dom.createDom_=function(a,b){var c=String(b[0]),d=b[1];if(!goog.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',goog.string.htmlEscape(d.name),'"');if(d.type){c.push(' type="',goog.string.htmlEscape(d.type),'"');var e={};goog.object.extend(e,d);delete e.type;d=e}c.push(">");c=c.join("")}c=a.createElement(c);d&&(goog.isString(d)?c.className=d:goog.isArray(d)?c.className=d.join(" "):goog.dom.setProperties(c,d));2<b.length&&goog.dom.append_(a,
c,b,2);return c};goog.dom.append_=function(a,b,c,d){function e(c){c&&b.appendChild(goog.isString(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var f=c[d];goog.isArrayLike(f)&&!goog.dom.isNodeLike(f)?goog.array.forEach(goog.dom.isNodeList(f)?goog.array.toArray(f):f,e):e(f)}};goog.dom.$dom=goog.dom.createDom;goog.dom.createElement=function(a){return goog.dom.createElement_(document,a)};goog.dom.createElement_=function(a,b){return a.createElement(String(b))};goog.dom.createTextNode=function(a){return document.createTextNode(String(a))};
goog.dom.createTable=function(a,b,c){return goog.dom.createTable_(document,a,b,!!c)};goog.dom.createTable_=function(a,b,c,d){for(var e=goog.dom.createElement_(a,"TABLE"),f=e.appendChild(goog.dom.createElement_(a,"TBODY")),g=0;g<b;g++){for(var h=goog.dom.createElement_(a,"TR"),k=0;k<c;k++){var l=goog.dom.createElement_(a,"TD");d&&goog.dom.setTextContent(l,goog.string.Unicode.NBSP);h.appendChild(l)}f.appendChild(h)}return e};
goog.dom.constHtmlToNode=function(a){var b=goog.array.map(arguments,goog.string.Const.unwrap);b=goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Constant HTML string, that gets turned into a Node later, so it will be automatically balanced."),b.join(""));return goog.dom.safeHtmlToNode(b)};goog.dom.safeHtmlToNode=function(a){return goog.dom.safeHtmlToNode_(document,a)};
goog.dom.safeHtmlToNode_=function(a,b){var c=goog.dom.createElement_(a,"DIV");goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT?(goog.dom.safe.setInnerHtml(c,goog.html.SafeHtml.concat(goog.html.SafeHtml.BR,b)),c.removeChild(goog.asserts.assert(c.firstChild))):goog.dom.safe.setInnerHtml(c,b);return goog.dom.childrenToNode_(a,c)};
goog.dom.childrenToNode_=function(a,b){if(1==b.childNodes.length)return b.removeChild(goog.asserts.assert(b.firstChild));for(a=a.createDocumentFragment();b.firstChild;)a.appendChild(b.firstChild);return a};goog.dom.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(document)};goog.dom.isCss1CompatMode_=function(a){return goog.dom.COMPAT_MODE_KNOWN_?goog.dom.ASSUME_STANDARDS_MODE:"CSS1Compat"==a.compatMode};
goog.dom.canHaveChildren=function(a){if(a.nodeType!=goog.dom.NodeType.ELEMENT)return!1;switch(a.tagName){case "APPLET":case "AREA":case "BASE":case "BR":case "COL":case "COMMAND":case "EMBED":case "FRAME":case "HR":case "IMG":case "INPUT":case "IFRAME":case "ISINDEX":case "KEYGEN":case "LINK":case "NOFRAMES":case "NOSCRIPT":case "META":case "OBJECT":case "PARAM":case "SCRIPT":case "SOURCE":case "STYLE":case "TRACK":case "WBR":return!1}return!0};
goog.dom.appendChild=function(a,b){goog.asserts.assert(null!=a&&null!=b,"goog.dom.appendChild expects non-null arguments");a.appendChild(b)};goog.dom.append=function(a,b){goog.dom.append_(goog.dom.getOwnerDocument(a),a,arguments,1)};goog.dom.removeChildren=function(a){for(var b;b=a.firstChild;)a.removeChild(b)};goog.dom.insertSiblingBefore=function(a,b){goog.asserts.assert(null!=a&&null!=b,"goog.dom.insertSiblingBefore expects non-null arguments");b.parentNode&&b.parentNode.insertBefore(a,b)};
goog.dom.insertSiblingAfter=function(a,b){goog.asserts.assert(null!=a&&null!=b,"goog.dom.insertSiblingAfter expects non-null arguments");b.parentNode&&b.parentNode.insertBefore(a,b.nextSibling)};goog.dom.insertChildAt=function(a,b,c){goog.asserts.assert(null!=a,"goog.dom.insertChildAt expects a non-null parent");a.insertBefore(b,a.childNodes[c]||null)};goog.dom.removeNode=function(a){return a&&a.parentNode?a.parentNode.removeChild(a):null};
goog.dom.replaceNode=function(a,b){goog.asserts.assert(null!=a&&null!=b,"goog.dom.replaceNode expects non-null arguments");var c=b.parentNode;c&&c.replaceChild(a,b)};goog.dom.flattenElement=function(a){var b,c=a.parentNode;if(c&&c.nodeType!=goog.dom.NodeType.DOCUMENT_FRAGMENT){if(a.removeNode)return a.removeNode(!1);for(;b=a.firstChild;)c.insertBefore(b,a);return goog.dom.removeNode(a)}};
goog.dom.getChildren=function(a){return goog.dom.BrowserFeature.CAN_USE_CHILDREN_ATTRIBUTE&&void 0!=a.children?a.children:goog.array.filter(a.childNodes,function(a){return a.nodeType==goog.dom.NodeType.ELEMENT})};goog.dom.getFirstElementChild=function(a){return goog.isDef(a.firstElementChild)?a.firstElementChild:goog.dom.getNextElementNode_(a.firstChild,!0)};goog.dom.getLastElementChild=function(a){return goog.isDef(a.lastElementChild)?a.lastElementChild:goog.dom.getNextElementNode_(a.lastChild,!1)};
goog.dom.getNextElementSibling=function(a){return goog.isDef(a.nextElementSibling)?a.nextElementSibling:goog.dom.getNextElementNode_(a.nextSibling,!0)};goog.dom.getPreviousElementSibling=function(a){return goog.isDef(a.previousElementSibling)?a.previousElementSibling:goog.dom.getNextElementNode_(a.previousSibling,!1)};goog.dom.getNextElementNode_=function(a,b){for(;a&&a.nodeType!=goog.dom.NodeType.ELEMENT;)a=b?a.nextSibling:a.previousSibling;return a};
goog.dom.getNextNode=function(a){if(!a)return null;if(a.firstChild)return a.firstChild;for(;a&&!a.nextSibling;)a=a.parentNode;return a?a.nextSibling:null};goog.dom.getPreviousNode=function(a){if(!a)return null;if(!a.previousSibling)return a.parentNode;for(a=a.previousSibling;a&&a.lastChild;)a=a.lastChild;return a};goog.dom.isNodeLike=function(a){return goog.isObject(a)&&0<a.nodeType};goog.dom.isElement=function(a){return goog.isObject(a)&&a.nodeType==goog.dom.NodeType.ELEMENT};
goog.dom.isWindow=function(a){return goog.isObject(a)&&a.window==a};goog.dom.getParentElement=function(a){var b;if(goog.dom.BrowserFeature.CAN_USE_PARENT_ELEMENT_PROPERTY&&!(goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("9")&&!goog.userAgent.isVersionOrHigher("10")&&goog.global.SVGElement&&a instanceof goog.global.SVGElement)&&(b=a.parentElement))return b;b=a.parentNode;return goog.dom.isElement(b)?b:null};
goog.dom.contains=function(a,b){if(!a||!b)return!1;if(a.contains&&b.nodeType==goog.dom.NodeType.ELEMENT)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||!!(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};
goog.dom.compareNodeOrder=function(a,b){if(a==b)return 0;if(a.compareDocumentPosition)return a.compareDocumentPosition(b)&2?1:-1;if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){if(a.nodeType==goog.dom.NodeType.DOCUMENT)return-1;if(b.nodeType==goog.dom.NodeType.DOCUMENT)return 1}if("sourceIndex"in a||a.parentNode&&"sourceIndex"in a.parentNode){var c=a.nodeType==goog.dom.NodeType.ELEMENT,d=b.nodeType==goog.dom.NodeType.ELEMENT;if(c&&d)return a.sourceIndex-b.sourceIndex;var e=a.parentNode,
f=b.parentNode;return e==f?goog.dom.compareSiblingOrder_(a,b):!c&&goog.dom.contains(e,b)?-1*goog.dom.compareParentsDescendantNodeIe_(a,b):!d&&goog.dom.contains(f,a)?goog.dom.compareParentsDescendantNodeIe_(b,a):(c?a.sourceIndex:e.sourceIndex)-(d?b.sourceIndex:f.sourceIndex)}d=goog.dom.getOwnerDocument(a);c=d.createRange();c.selectNode(a);c.collapse(!0);a=d.createRange();a.selectNode(b);a.collapse(!0);return c.compareBoundaryPoints(goog.global.Range.START_TO_END,a)};
goog.dom.compareParentsDescendantNodeIe_=function(a,b){var c=a.parentNode;if(c==b)return-1;for(;b.parentNode!=c;)b=b.parentNode;return goog.dom.compareSiblingOrder_(b,a)};goog.dom.compareSiblingOrder_=function(a,b){for(;b=b.previousSibling;)if(b==a)return-1;return 1};
goog.dom.findCommonAncestor=function(a){var b,c=arguments.length;if(!c)return null;if(1==c)return arguments[0];var d=[],e=Infinity;for(b=0;b<c;b++){for(var f=[],g=arguments[b];g;)f.unshift(g),g=g.parentNode;d.push(f);e=Math.min(e,f.length)}f=null;for(b=0;b<e;b++){g=d[0][b];for(var h=1;h<c;h++)if(g!=d[h][b])return f;f=g}return f};goog.dom.isInDocument=function(a){return 16==(a.ownerDocument.compareDocumentPosition(a)&16)};
goog.dom.getOwnerDocument=function(a){goog.asserts.assert(a,"Node cannot be null or undefined.");return a.nodeType==goog.dom.NodeType.DOCUMENT?a:a.ownerDocument||a.document};goog.dom.getFrameContentDocument=function(a){return a.contentDocument||a.contentWindow.document};goog.dom.getFrameContentWindow=function(a){try{return a.contentWindow||(a.contentDocument?goog.dom.getWindow(a.contentDocument):null)}catch(b){}return null};
goog.dom.setTextContent=function(a,b){goog.asserts.assert(null!=a,"goog.dom.setTextContent expects a non-null value for node");if("textContent"in a)a.textContent=b;else if(a.nodeType==goog.dom.NodeType.TEXT)a.data=String(b);else if(a.firstChild&&a.firstChild.nodeType==goog.dom.NodeType.TEXT){for(;a.lastChild!=a.firstChild;)a.removeChild(goog.asserts.assert(a.lastChild));a.firstChild.data=String(b)}else{goog.dom.removeChildren(a);var c=goog.dom.getOwnerDocument(a);a.appendChild(c.createTextNode(String(b)))}};
goog.dom.getOuterHtml=function(a){goog.asserts.assert(null!==a,"goog.dom.getOuterHtml expects a non-null value for element");if("outerHTML"in a)return a.outerHTML;var b=goog.dom.getOwnerDocument(a);b=goog.dom.createElement_(b,"DIV");b.appendChild(a.cloneNode(!0));return b.innerHTML};goog.dom.findNode=function(a,b){var c=[];return goog.dom.findNodes_(a,b,c,!0)?c[0]:void 0};goog.dom.findNodes=function(a,b){var c=[];goog.dom.findNodes_(a,b,c,!1);return c};
goog.dom.findNodes_=function(a,b,c,d){if(null!=a)for(a=a.firstChild;a;){if(b(a)&&(c.push(a),d)||goog.dom.findNodes_(a,b,c,d))return!0;a=a.nextSibling}return!1};goog.dom.findElement=function(a,b){for(a=goog.dom.getChildrenReverse_(a);0<a.length;){var c=a.pop();if(b(c))return c;for(c=c.lastElementChild;c;c=c.previousElementSibling)a.push(c)}return null};
goog.dom.findElements=function(a,b){var c=[];for(a=goog.dom.getChildrenReverse_(a);0<a.length;){var d=a.pop();b(d)&&c.push(d);for(d=d.lastElementChild;d;d=d.previousElementSibling)a.push(d)}return c};goog.dom.getChildrenReverse_=function(a){if(a.nodeType==goog.dom.NodeType.DOCUMENT)return[a.documentElement];var b=[];for(a=a.lastElementChild;a;a=a.previousElementSibling)b.push(a);return b};goog.dom.TAGS_TO_IGNORE_={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1};
goog.dom.PREDEFINED_TAG_VALUES_={IMG:" ",BR:"\n"};goog.dom.isFocusableTabIndex=function(a){return goog.dom.hasSpecifiedTabIndex_(a)&&goog.dom.isTabIndexFocusable_(a)};goog.dom.setFocusableTabIndex=function(a,b){b?a.tabIndex=0:(a.tabIndex=-1,a.removeAttribute("tabIndex"))};
goog.dom.isFocusable=function(a){var b;return(b=goog.dom.nativelySupportsFocus_(a)?!a.disabled&&(!goog.dom.hasSpecifiedTabIndex_(a)||goog.dom.isTabIndexFocusable_(a)):goog.dom.isFocusableTabIndex(a))&&goog.userAgent.IE?goog.dom.hasNonZeroBoundingRect_(a):b};goog.dom.hasSpecifiedTabIndex_=function(a){return goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9")?(a=a.getAttributeNode("tabindex"),goog.isDefAndNotNull(a)&&a.specified):a.hasAttribute("tabindex")};
goog.dom.isTabIndexFocusable_=function(a){a=a.tabIndex;return goog.isNumber(a)&&0<=a&&32768>a};goog.dom.nativelySupportsFocus_=function(a){return"A"==a.tagName&&a.hasAttribute("href")||"INPUT"==a.tagName||"TEXTAREA"==a.tagName||"SELECT"==a.tagName||"BUTTON"==a.tagName};
goog.dom.hasNonZeroBoundingRect_=function(a){a=!goog.isFunction(a.getBoundingClientRect)||goog.userAgent.IE&&null==a.parentElement?{height:a.offsetHeight,width:a.offsetWidth}:a.getBoundingClientRect();return goog.isDefAndNotNull(a)&&0<a.height&&0<a.width};
goog.dom.getTextContent=function(a){if(goog.dom.BrowserFeature.CAN_USE_INNER_TEXT&&null!==a&&"innerText"in a)a=goog.string.canonicalizeNewlines(a.innerText);else{var b=[];goog.dom.getTextContent_(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");goog.dom.BrowserFeature.CAN_USE_INNER_TEXT||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a};goog.dom.getRawTextContent=function(a){var b=[];goog.dom.getTextContent_(a,b,!1);return b.join("")};
goog.dom.getTextContent_=function(a,b,c){if(!(a.nodeName in goog.dom.TAGS_TO_IGNORE_))if(a.nodeType==goog.dom.NodeType.TEXT)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)b.push(goog.dom.PREDEFINED_TAG_VALUES_[a.nodeName]);else for(a=a.firstChild;a;)goog.dom.getTextContent_(a,b,c),a=a.nextSibling};goog.dom.getNodeTextLength=function(a){return goog.dom.getTextContent(a).length};
goog.dom.getNodeTextOffset=function(a,b){b=b||goog.dom.getOwnerDocument(a).body;for(var c=[];a&&a!=b;){for(var d=a;d=d.previousSibling;)c.unshift(goog.dom.getTextContent(d));a=a.parentNode}return goog.string.trimLeft(c.join("")).replace(/ +/g," ").length};
goog.dom.getNodeAtOffset=function(a,b,c){a=[a];for(var d=0,e=null;0<a.length&&d<b;)if(e=a.pop(),!(e.nodeName in goog.dom.TAGS_TO_IGNORE_))if(e.nodeType==goog.dom.NodeType.TEXT){var f=e.nodeValue.replace(/(\r\n|\r|\n)/g,"").replace(/ +/g," ");d+=f.length}else if(e.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)d+=goog.dom.PREDEFINED_TAG_VALUES_[e.nodeName].length;else for(f=e.childNodes.length-1;0<=f;f--)a.push(e.childNodes[f]);goog.isObject(c)&&(c.remainder=e?e.nodeValue.length+b-d-1:0,c.node=e);return e};
goog.dom.isNodeList=function(a){if(a&&"number"==typeof a.length){if(goog.isObject(a))return"function"==typeof a.item||"string"==typeof a.item;if(goog.isFunction(a))return"function"==typeof a.item}return!1};goog.dom.getAncestorByTagNameAndClass=function(a,b,c,d){if(!b&&!c)return null;var e=b?String(b).toUpperCase():null;return goog.dom.getAncestor(a,function(a){return(!e||a.nodeName==e)&&(!c||goog.isString(a.className)&&goog.array.contains(a.className.split(/\s+/),c))},!0,d)};
goog.dom.getAncestorByClass=function(a,b,c){return goog.dom.getAncestorByTagNameAndClass(a,null,b,c)};goog.dom.getAncestor=function(a,b,c,d){a&&!c&&(a=a.parentNode);for(c=0;a&&(null==d||c<=d);){goog.asserts.assert("parentNode"!=a.name);if(b(a))return a;a=a.parentNode;c++}return null};goog.dom.getActiveElement=function(a){try{var b=a&&a.activeElement;return b&&b.nodeName?b:null}catch(c){return null}};
goog.dom.getPixelRatio=function(){var a=goog.dom.getWindow();return goog.isDef(a.devicePixelRatio)?a.devicePixelRatio:a.matchMedia?goog.dom.matchesPixelRatio_(3)||goog.dom.matchesPixelRatio_(2)||goog.dom.matchesPixelRatio_(1.5)||goog.dom.matchesPixelRatio_(1)||.75:1};goog.dom.matchesPixelRatio_=function(a){return goog.dom.getWindow().matchMedia("(min-resolution: "+a+"dppx),(min--moz-device-pixel-ratio: "+a+"),(min-resolution: "+96*a+"dpi)").matches?a:0};goog.dom.getCanvasContext2D=function(a){return a.getContext("2d")};
goog.dom.DomHelper=function(a){this.document_=a||goog.global.document||document};goog.dom.DomHelper.prototype.getDomHelper=goog.dom.getDomHelper;goog.dom.DomHelper.prototype.setDocument=function(a){this.document_=a};goog.dom.DomHelper.prototype.getDocument=function(){return this.document_};goog.dom.DomHelper.prototype.getElement=function(a){return goog.dom.getElementHelper_(this.document_,a)};
goog.dom.DomHelper.prototype.getRequiredElement=function(a){return goog.dom.getRequiredElementHelper_(this.document_,a)};goog.dom.DomHelper.prototype.$=goog.dom.DomHelper.prototype.getElement;goog.dom.DomHelper.prototype.getElementsByTagName=function(a,b){return(b||this.document_).getElementsByTagName(String(a))};goog.dom.DomHelper.prototype.getElementsByTagNameAndClass=function(a,b,c){return goog.dom.getElementsByTagNameAndClass_(this.document_,a,b,c)};
goog.dom.DomHelper.prototype.getElementByTagNameAndClass=function(a,b,c){return goog.dom.getElementByTagNameAndClass_(this.document_,a,b,c)};goog.dom.DomHelper.prototype.getElementsByClass=function(a,b){return goog.dom.getElementsByClass(a,b||this.document_)};goog.dom.DomHelper.prototype.getElementByClass=function(a,b){return goog.dom.getElementByClass(a,b||this.document_)};goog.dom.DomHelper.prototype.getRequiredElementByClass=function(a,b){return goog.dom.getRequiredElementByClass(a,b||this.document_)};
goog.dom.DomHelper.prototype.$$=goog.dom.DomHelper.prototype.getElementsByTagNameAndClass;goog.dom.DomHelper.prototype.setProperties=goog.dom.setProperties;goog.dom.DomHelper.prototype.getViewportSize=function(a){return goog.dom.getViewportSize(a||this.getWindow())};goog.dom.DomHelper.prototype.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(this.getWindow())};goog.dom.DomHelper.prototype.createDom=function(a,b,c){return goog.dom.createDom_(this.document_,arguments)};
goog.dom.DomHelper.prototype.$dom=goog.dom.DomHelper.prototype.createDom;goog.dom.DomHelper.prototype.createElement=function(a){return goog.dom.createElement_(this.document_,a)};goog.dom.DomHelper.prototype.createTextNode=function(a){return this.document_.createTextNode(String(a))};goog.dom.DomHelper.prototype.createTable=function(a,b,c){return goog.dom.createTable_(this.document_,a,b,!!c)};goog.dom.DomHelper.prototype.safeHtmlToNode=function(a){return goog.dom.safeHtmlToNode_(this.document_,a)};
goog.dom.DomHelper.prototype.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(this.document_)};goog.dom.DomHelper.prototype.getWindow=function(){return goog.dom.getWindow_(this.document_)};goog.dom.DomHelper.prototype.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(this.document_)};goog.dom.DomHelper.prototype.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(this.document_)};
goog.dom.DomHelper.prototype.getActiveElement=function(a){return goog.dom.getActiveElement(a||this.document_)};goog.dom.DomHelper.prototype.appendChild=goog.dom.appendChild;goog.dom.DomHelper.prototype.append=goog.dom.append;goog.dom.DomHelper.prototype.canHaveChildren=goog.dom.canHaveChildren;goog.dom.DomHelper.prototype.removeChildren=goog.dom.removeChildren;goog.dom.DomHelper.prototype.insertSiblingBefore=goog.dom.insertSiblingBefore;goog.dom.DomHelper.prototype.insertSiblingAfter=goog.dom.insertSiblingAfter;
goog.dom.DomHelper.prototype.insertChildAt=goog.dom.insertChildAt;goog.dom.DomHelper.prototype.removeNode=goog.dom.removeNode;goog.dom.DomHelper.prototype.replaceNode=goog.dom.replaceNode;goog.dom.DomHelper.prototype.flattenElement=goog.dom.flattenElement;goog.dom.DomHelper.prototype.getChildren=goog.dom.getChildren;goog.dom.DomHelper.prototype.getFirstElementChild=goog.dom.getFirstElementChild;goog.dom.DomHelper.prototype.getLastElementChild=goog.dom.getLastElementChild;
goog.dom.DomHelper.prototype.getNextElementSibling=goog.dom.getNextElementSibling;goog.dom.DomHelper.prototype.getPreviousElementSibling=goog.dom.getPreviousElementSibling;goog.dom.DomHelper.prototype.getNextNode=goog.dom.getNextNode;goog.dom.DomHelper.prototype.getPreviousNode=goog.dom.getPreviousNode;goog.dom.DomHelper.prototype.isNodeLike=goog.dom.isNodeLike;goog.dom.DomHelper.prototype.isElement=goog.dom.isElement;goog.dom.DomHelper.prototype.isWindow=goog.dom.isWindow;
goog.dom.DomHelper.prototype.getParentElement=goog.dom.getParentElement;goog.dom.DomHelper.prototype.contains=goog.dom.contains;goog.dom.DomHelper.prototype.compareNodeOrder=goog.dom.compareNodeOrder;goog.dom.DomHelper.prototype.findCommonAncestor=goog.dom.findCommonAncestor;goog.dom.DomHelper.prototype.getOwnerDocument=goog.dom.getOwnerDocument;goog.dom.DomHelper.prototype.getFrameContentDocument=goog.dom.getFrameContentDocument;goog.dom.DomHelper.prototype.getFrameContentWindow=goog.dom.getFrameContentWindow;
goog.dom.DomHelper.prototype.setTextContent=goog.dom.setTextContent;goog.dom.DomHelper.prototype.getOuterHtml=goog.dom.getOuterHtml;goog.dom.DomHelper.prototype.findNode=goog.dom.findNode;goog.dom.DomHelper.prototype.findNodes=goog.dom.findNodes;goog.dom.DomHelper.prototype.isFocusableTabIndex=goog.dom.isFocusableTabIndex;goog.dom.DomHelper.prototype.setFocusableTabIndex=goog.dom.setFocusableTabIndex;goog.dom.DomHelper.prototype.isFocusable=goog.dom.isFocusable;
goog.dom.DomHelper.prototype.getTextContent=goog.dom.getTextContent;goog.dom.DomHelper.prototype.getNodeTextLength=goog.dom.getNodeTextLength;goog.dom.DomHelper.prototype.getNodeTextOffset=goog.dom.getNodeTextOffset;goog.dom.DomHelper.prototype.getNodeAtOffset=goog.dom.getNodeAtOffset;goog.dom.DomHelper.prototype.isNodeList=goog.dom.isNodeList;goog.dom.DomHelper.prototype.getAncestorByTagNameAndClass=goog.dom.getAncestorByTagNameAndClass;goog.dom.DomHelper.prototype.getAncestorByClass=goog.dom.getAncestorByClass;
goog.dom.DomHelper.prototype.getAncestor=goog.dom.getAncestor;goog.dom.DomHelper.prototype.getCanvasContext2D=goog.dom.getCanvasContext2D;goog.dom.classlist={};goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST=!1;goog.dom.classlist.get=function(a){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||a.classList)return a.classList;a=a.className;return goog.isString(a)&&a.match(/\S+/g)||[]};goog.dom.classlist.set=function(a,b){a.className=b};goog.dom.classlist.contains=function(a,b){return goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||a.classList?a.classList.contains(b):goog.array.contains(goog.dom.classlist.get(a),b)};
goog.dom.classlist.add=function(a,b){goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||a.classList?a.classList.add(b):goog.dom.classlist.contains(a,b)||(a.className+=0<a.className.length?" "+b:b)};
goog.dom.classlist.addAll=function(a,b){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||a.classList)goog.array.forEach(b,function(b){goog.dom.classlist.add(a,b)});else{var c={};goog.array.forEach(goog.dom.classlist.get(a),function(a){c[a]=!0});goog.array.forEach(b,function(a){c[a]=!0});a.className="";for(var d in c)a.className+=0<a.className.length?" "+d:d}};
goog.dom.classlist.remove=function(a,b){goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||a.classList?a.classList.remove(b):goog.dom.classlist.contains(a,b)&&(a.className=goog.array.filter(goog.dom.classlist.get(a),function(a){return a!=b}).join(" "))};
goog.dom.classlist.removeAll=function(a,b){goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||a.classList?goog.array.forEach(b,function(b){goog.dom.classlist.remove(a,b)}):a.className=goog.array.filter(goog.dom.classlist.get(a),function(a){return!goog.array.contains(b,a)}).join(" ")};goog.dom.classlist.enable=function(a,b,c){c?goog.dom.classlist.add(a,b):goog.dom.classlist.remove(a,b)};goog.dom.classlist.enableAll=function(a,b,c){(c?goog.dom.classlist.addAll:goog.dom.classlist.removeAll)(a,b)};
goog.dom.classlist.swap=function(a,b,c){return goog.dom.classlist.contains(a,b)?(goog.dom.classlist.remove(a,b),goog.dom.classlist.add(a,c),!0):!1};goog.dom.classlist.toggle=function(a,b){var c=!goog.dom.classlist.contains(a,b);goog.dom.classlist.enable(a,b,c);return c};goog.dom.classlist.addRemove=function(a,b,c){goog.dom.classlist.remove(a,b);goog.dom.classlist.add(a,c)};goog.userAgent.product={};goog.userAgent.product.ASSUME_FIREFOX=!1;goog.userAgent.product.ASSUME_IPHONE=!1;goog.userAgent.product.ASSUME_IPAD=!1;goog.userAgent.product.ASSUME_ANDROID=!1;goog.userAgent.product.ASSUME_CHROME=!1;goog.userAgent.product.ASSUME_SAFARI=!1;
goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI;goog.userAgent.product.OPERA=goog.userAgent.OPERA;goog.userAgent.product.IE=goog.userAgent.IE;goog.userAgent.product.EDGE=goog.userAgent.EDGE;
goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox();goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()};goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_();
goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad();goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser();goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome();
goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()};goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_();goog.dom.dataset={};goog.dom.dataset.ALLOWED_=!goog.userAgent.product.IE&&!goog.labs.userAgent.browser.isSafari();goog.dom.dataset.PREFIX_="data-";goog.dom.dataset.isValidProperty_=function(a){return!/-[a-z]/.test(a)};
goog.dom.dataset.set=function(a,b,c){if(goog.dom.dataset.ALLOWED_&&a.dataset)a.dataset[b]=c;else if(goog.dom.dataset.isValidProperty_(b))a.setAttribute(goog.dom.dataset.PREFIX_+goog.string.toSelectorCase(b),c);else throw Error(goog.DEBUG?'"'+b+'" is not a valid dataset property name.':"");};
goog.dom.dataset.get=function(a,b){if(!goog.dom.dataset.isValidProperty_(b))return null;if(goog.dom.dataset.ALLOWED_&&a.dataset){if(goog.labs.userAgent.browser.isAndroidBrowser()&&!(b in a.dataset))return null;a=a.dataset[b];return void 0===a?null:a}return a.getAttribute(goog.dom.dataset.PREFIX_+goog.string.toSelectorCase(b))};
goog.dom.dataset.remove=function(a,b){goog.dom.dataset.isValidProperty_(b)&&(goog.dom.dataset.ALLOWED_&&a.dataset?goog.dom.dataset.has(a,b)&&delete a.dataset[b]:a.removeAttribute(goog.dom.dataset.PREFIX_+goog.string.toSelectorCase(b)))};
goog.dom.dataset.has=function(a,b){return goog.dom.dataset.isValidProperty_(b)?goog.dom.dataset.ALLOWED_&&a.dataset?b in a.dataset:a.hasAttribute?a.hasAttribute(goog.dom.dataset.PREFIX_+goog.string.toSelectorCase(b)):!!a.getAttribute(goog.dom.dataset.PREFIX_+goog.string.toSelectorCase(b)):!1};
goog.dom.dataset.getAll=function(a){if(goog.dom.dataset.ALLOWED_&&a.dataset)return a.dataset;var b={};a=a.attributes;for(var c=0;c<a.length;++c){var d=a[c];if(goog.string.startsWith(d.name,goog.dom.dataset.PREFIX_)){var e=goog.string.toCamelCase(d.name.substr(5));b[e]=d.value}}return b};goog.iter={};goog.iter.StopIteration="StopIteration"in goog.global?goog.global.StopIteration:{message:"StopIteration",stack:""};goog.iter.Iterator=function(){};goog.iter.Iterator.prototype.next=function(){throw goog.iter.StopIteration;};goog.iter.Iterator.prototype.__iterator__=function(a){return this};
goog.iter.toIterator=function(a){if(a instanceof goog.iter.Iterator)return a;if("function"==typeof a.__iterator__)return a.__iterator__(!1);if(goog.isArrayLike(a)){var b=0,c=new goog.iter.Iterator;c.next=function(){for(;;){if(b>=a.length)throw goog.iter.StopIteration;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");};
goog.iter.forEach=function(a,b,c){if(goog.isArrayLike(a))try{goog.array.forEach(a,b,c)}catch(d){if(d!==goog.iter.StopIteration)throw d;}else{a=goog.iter.toIterator(a);try{for(;;)b.call(c,a.next(),void 0,a)}catch(d){if(d!==goog.iter.StopIteration)throw d;}}};goog.iter.filter=function(a,b,c){var d=goog.iter.toIterator(a);a=new goog.iter.Iterator;a.next=function(){for(;;){var a=d.next();if(b.call(c,a,void 0,d))return a}};return a};
goog.iter.filterFalse=function(a,b,c){return goog.iter.filter(a,goog.functions.not(b),c)};goog.iter.range=function(a,b,c){var d=0,e=a,f=c||1;1<arguments.length&&(d=a,e=+b);if(0==f)throw Error("Range step argument must not be zero");var g=new goog.iter.Iterator;g.next=function(){if(0<f&&d>=e||0>f&&d<=e)throw goog.iter.StopIteration;var a=d;d+=f;return a};return g};goog.iter.join=function(a,b){return goog.iter.toArray(a).join(b)};
goog.iter.map=function(a,b,c){var d=goog.iter.toIterator(a);a=new goog.iter.Iterator;a.next=function(){var a=d.next();return b.call(c,a,void 0,d)};return a};goog.iter.reduce=function(a,b,c,d){var e=c;goog.iter.forEach(a,function(a){e=b.call(d,e,a)});return e};goog.iter.some=function(a,b,c){a=goog.iter.toIterator(a);try{for(;;)if(b.call(c,a.next(),void 0,a))return!0}catch(d){if(d!==goog.iter.StopIteration)throw d;}return!1};
goog.iter.every=function(a,b,c){a=goog.iter.toIterator(a);try{for(;;)if(!b.call(c,a.next(),void 0,a))return!1}catch(d){if(d!==goog.iter.StopIteration)throw d;}return!0};goog.iter.chain=function(a){return goog.iter.chainFromIterable(arguments)};
goog.iter.chainFromIterable=function(a){var b=goog.iter.toIterator(a);a=new goog.iter.Iterator;var c=null;a.next=function(){for(;;){if(null==c){var a=b.next();c=goog.iter.toIterator(a)}try{return c.next()}catch(e){if(e!==goog.iter.StopIteration)throw e;c=null}}};return a};goog.iter.dropWhile=function(a,b,c){var d=goog.iter.toIterator(a);a=new goog.iter.Iterator;var e=!0;a.next=function(){for(;;){var a=d.next();if(!e||!b.call(c,a,void 0,d))return e=!1,a}};return a};
goog.iter.takeWhile=function(a,b,c){var d=goog.iter.toIterator(a);a=new goog.iter.Iterator;a.next=function(){var a=d.next();if(b.call(c,a,void 0,d))return a;throw goog.iter.StopIteration;};return a};goog.iter.toArray=function(a){if(goog.isArrayLike(a))return goog.array.toArray(a);a=goog.iter.toIterator(a);var b=[];goog.iter.forEach(a,function(a){b.push(a)});return b};
goog.iter.equals=function(a,b,c){a=goog.iter.zipLongest({},a,b);var d=c||goog.array.defaultCompareEquality;return goog.iter.every(a,function(a){return d(a[0],a[1])})};goog.iter.nextOrValue=function(a,b){try{return goog.iter.toIterator(a).next()}catch(c){if(c!=goog.iter.StopIteration)throw c;return b}};
goog.iter.product=function(a){if(goog.array.some(arguments,function(a){return!a.length})||!arguments.length)return new goog.iter.Iterator;var b=new goog.iter.Iterator,c=arguments,d=goog.array.repeat(0,c.length);b.next=function(){if(d){for(var a=goog.array.map(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){goog.asserts.assert(d);if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw goog.iter.StopIteration;};return b};
goog.iter.cycle=function(a){var b=goog.iter.toIterator(a),c=[],d=0;a=new goog.iter.Iterator;var e=!1;a.next=function(){var a=null;if(!e)try{return a=b.next(),c.push(a),a}catch(g){if(g!=goog.iter.StopIteration||goog.array.isEmpty(c))throw g;e=!0}a=c[d];d=(d+1)%c.length;return a};return a};goog.iter.count=function(a,b){var c=a||0,d=goog.isDef(b)?b:1;a=new goog.iter.Iterator;a.next=function(){var a=c;c+=d;return a};return a};
goog.iter.repeat=function(a){var b=new goog.iter.Iterator;b.next=goog.functions.constant(a);return b};goog.iter.accumulate=function(a){var b=goog.iter.toIterator(a),c=0;a=new goog.iter.Iterator;a.next=function(){return c+=b.next()};return a};goog.iter.zip=function(a){var b=arguments,c=new goog.iter.Iterator;if(0<b.length){var d=goog.array.map(b,goog.iter.toIterator);c.next=function(){return goog.array.map(d,function(a){return a.next()})}}return c};
goog.iter.zipLongest=function(a,b){var c=goog.array.slice(arguments,1),d=new goog.iter.Iterator;if(0<c.length){var e=goog.array.map(c,goog.iter.toIterator);d.next=function(){var b=!1,c=goog.array.map(e,function(c){try{var d=c.next();b=!0}catch(l){if(l!==goog.iter.StopIteration)throw l;d=a}return d});if(!b)throw goog.iter.StopIteration;return c}}return d};goog.iter.compress=function(a,b){var c=goog.iter.toIterator(b);return goog.iter.filter(a,function(){return!!c.next()})};
goog.iter.GroupByIterator_=function(a,b){this.iterator=goog.iter.toIterator(a);this.keyFunc=b||goog.functions.identity};goog.inherits(goog.iter.GroupByIterator_,goog.iter.Iterator);goog.iter.GroupByIterator_.prototype.next=function(){for(;this.currentKey==this.targetKey;)this.currentValue=this.iterator.next(),this.currentKey=this.keyFunc(this.currentValue);this.targetKey=this.currentKey;return[this.currentKey,this.groupItems_(this.targetKey)]};
goog.iter.GroupByIterator_.prototype.groupItems_=function(a){for(var b=[];this.currentKey==a;){b.push(this.currentValue);try{this.currentValue=this.iterator.next()}catch(c){if(c!==goog.iter.StopIteration)throw c;break}this.currentKey=this.keyFunc(this.currentValue)}return b};goog.iter.groupBy=function(a,b){return new goog.iter.GroupByIterator_(a,b)};
goog.iter.starMap=function(a,b,c){var d=goog.iter.toIterator(a);a=new goog.iter.Iterator;a.next=function(){var a=goog.iter.toArray(d.next());return b.apply(c,goog.array.concat(a,void 0,d))};return a};
goog.iter.tee=function(a,b){var c=goog.iter.toIterator(a);a=goog.isNumber(b)?b:2;var d=goog.array.map(goog.array.range(a),function(){return[]}),e=function(){var a=c.next();goog.array.forEach(d,function(b){b.push(a)})};return goog.array.map(d,function(a){var b=new goog.iter.Iterator;b.next=function(){goog.array.isEmpty(a)&&e();goog.asserts.assert(!goog.array.isEmpty(a));return a.shift()};return b})};goog.iter.enumerate=function(a,b){return goog.iter.zip(goog.iter.count(b),a)};
goog.iter.limit=function(a,b){goog.asserts.assert(goog.math.isInt(b)&&0<=b);var c=goog.iter.toIterator(a);a=new goog.iter.Iterator;var d=b;a.next=function(){if(0<d--)return c.next();throw goog.iter.StopIteration;};return a};goog.iter.consume=function(a,b){goog.asserts.assert(goog.math.isInt(b)&&0<=b);for(a=goog.iter.toIterator(a);0<b--;)goog.iter.nextOrValue(a,null);return a};
goog.iter.slice=function(a,b,c){goog.asserts.assert(goog.math.isInt(b)&&0<=b);a=goog.iter.consume(a,b);goog.isNumber(c)&&(goog.asserts.assert(goog.math.isInt(c)&&c>=b),a=goog.iter.limit(a,c-b));return a};goog.iter.hasDuplicates_=function(a){var b=[];goog.array.removeDuplicates(a,b);return a.length!=b.length};goog.iter.permutations=function(a,b){a=goog.iter.toArray(a);b=goog.isNumber(b)?b:a.length;b=goog.array.repeat(a,b);b=goog.iter.product.apply(void 0,b);return goog.iter.filter(b,function(a){return!goog.iter.hasDuplicates_(a)})};
goog.iter.combinations=function(a,b){function c(a){return d[a]}var d=goog.iter.toArray(a);a=goog.iter.range(d.length);b=goog.iter.permutations(a,b);var e=goog.iter.filter(b,function(a){return goog.array.isSorted(a)});b=new goog.iter.Iterator;b.next=function(){return goog.array.map(e.next(),c)};return b};
goog.iter.combinationsWithReplacement=function(a,b){function c(a){return d[a]}var d=goog.iter.toArray(a);a=goog.array.range(d.length);b=goog.array.repeat(a,b);b=goog.iter.product.apply(void 0,b);var e=goog.iter.filter(b,function(a){return goog.array.isSorted(a)});b=new goog.iter.Iterator;b.next=function(){return goog.array.map(e.next(),c)};return b};goog.structs={};goog.structs.Map=function(a,b){this.map_={};this.keys_=[];this.version_=this.count_=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)};goog.structs.Map.prototype.getCount=function(){return this.count_};goog.structs.Map.prototype.getValues=function(){this.cleanupKeysArray_();for(var a=[],b=0;b<this.keys_.length;b++)a.push(this.map_[this.keys_[b]]);return a};
goog.structs.Map.prototype.getKeys=function(){this.cleanupKeysArray_();return this.keys_.concat()};goog.structs.Map.prototype.containsKey=function(a){return goog.structs.Map.hasKey_(this.map_,a)};goog.structs.Map.prototype.containsValue=function(a){for(var b=0;b<this.keys_.length;b++){var c=this.keys_[b];if(goog.structs.Map.hasKey_(this.map_,c)&&this.map_[c]==a)return!0}return!1};
goog.structs.Map.prototype.equals=function(a,b){if(this===a)return!0;if(this.count_!=a.getCount())return!1;b=b||goog.structs.Map.defaultEquals;this.cleanupKeysArray_();for(var c,d=0;c=this.keys_[d];d++)if(!b(this.get(c),a.get(c)))return!1;return!0};goog.structs.Map.defaultEquals=function(a,b){return a===b};goog.structs.Map.prototype.isEmpty=function(){return 0==this.count_};goog.structs.Map.prototype.clear=function(){this.map_={};this.version_=this.count_=this.keys_.length=0};
goog.structs.Map.prototype.remove=function(a){return goog.structs.Map.hasKey_(this.map_,a)?(delete this.map_[a],this.count_--,this.version_++,this.keys_.length>2*this.count_&&this.cleanupKeysArray_(),!0):!1};
goog.structs.Map.prototype.cleanupKeysArray_=function(){if(this.count_!=this.keys_.length){for(var a=0,b=0;a<this.keys_.length;){var c=this.keys_[a];goog.structs.Map.hasKey_(this.map_,c)&&(this.keys_[b++]=c);a++}this.keys_.length=b}if(this.count_!=this.keys_.length){var d={};for(b=a=0;a<this.keys_.length;)c=this.keys_[a],goog.structs.Map.hasKey_(d,c)||(this.keys_[b++]=c,d[c]=1),a++;this.keys_.length=b}};
goog.structs.Map.prototype.get=function(a,b){return goog.structs.Map.hasKey_(this.map_,a)?this.map_[a]:b};goog.structs.Map.prototype.set=function(a,b){goog.structs.Map.hasKey_(this.map_,a)||(this.count_++,this.keys_.push(a),this.version_++);this.map_[a]=b};goog.structs.Map.prototype.addAll=function(a){if(a instanceof goog.structs.Map)for(var b=a.getKeys(),c=0;c<b.length;c++)this.set(b[c],a.get(b[c]));else for(b in a)this.set(b,a[b])};
goog.structs.Map.prototype.forEach=function(a,b){for(var c=this.getKeys(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};goog.structs.Map.prototype.clone=function(){return new goog.structs.Map(this)};goog.structs.Map.prototype.transpose=function(){for(var a=new goog.structs.Map,b=0;b<this.keys_.length;b++){var c=this.keys_[b];a.set(this.map_[c],c)}return a};
goog.structs.Map.prototype.toObject=function(){this.cleanupKeysArray_();for(var a={},b=0;b<this.keys_.length;b++){var c=this.keys_[b];a[c]=this.map_[c]}return a};goog.structs.Map.prototype.getKeyIterator=function(){return this.__iterator__(!0)};goog.structs.Map.prototype.getValueIterator=function(){return this.__iterator__(!1)};
goog.structs.Map.prototype.__iterator__=function(a){this.cleanupKeysArray_();var b=0,c=this.version_,d=this,e=new goog.iter.Iterator;e.next=function(){if(c!=d.version_)throw Error("The map has changed since the iterator was created");if(b>=d.keys_.length)throw goog.iter.StopIteration;var e=d.keys_[b++];return a?e:d.map_[e]};return e};goog.structs.Map.hasKey_=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};goog.dom.vendor={};goog.dom.vendor.getVendorJsPrefix=function(){return goog.userAgent.WEBKIT?"Webkit":goog.userAgent.GECKO?"Moz":goog.userAgent.IE?"ms":goog.userAgent.OPERA?"O":null};goog.dom.vendor.getVendorPrefix=function(){return goog.userAgent.WEBKIT?"-webkit":goog.userAgent.GECKO?"-moz":goog.userAgent.IE?"-ms":goog.userAgent.OPERA?"-o":null};
goog.dom.vendor.getPrefixedPropertyName=function(a,b){if(b&&a in b)return a;var c=goog.dom.vendor.getVendorJsPrefix();return c?(c=c.toLowerCase(),a=c+goog.string.toTitleCase(a),!goog.isDef(b)||a in b?a:null):null};goog.dom.vendor.getPrefixedEventType=function(a){return((goog.dom.vendor.getVendorJsPrefix()||"")+a).toLowerCase()};goog.math.Box=function(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d};goog.math.Box.boundingBox=function(a){for(var b=new goog.math.Box(arguments[0].y,arguments[0].x,arguments[0].y,arguments[0].x),c=1;c<arguments.length;c++)b.expandToIncludeCoordinate(arguments[c]);return b};goog.math.Box.prototype.getWidth=function(){return this.right-this.left};goog.math.Box.prototype.getHeight=function(){return this.bottom-this.top};
goog.math.Box.prototype.clone=function(){return new goog.math.Box(this.top,this.right,this.bottom,this.left)};goog.DEBUG&&(goog.math.Box.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"});goog.math.Box.prototype.contains=function(a){return goog.math.Box.contains(this,a)};
goog.math.Box.prototype.expand=function(a,b,c,d){goog.isObject(a)?(this.top-=a.top,this.right+=a.right,this.bottom+=a.bottom,this.left-=a.left):(this.top-=a,this.right+=Number(b),this.bottom+=Number(c),this.left-=Number(d));return this};goog.math.Box.prototype.expandToInclude=function(a){this.left=Math.min(this.left,a.left);this.top=Math.min(this.top,a.top);this.right=Math.max(this.right,a.right);this.bottom=Math.max(this.bottom,a.bottom)};
goog.math.Box.prototype.expandToIncludeCoordinate=function(a){this.top=Math.min(this.top,a.y);this.right=Math.max(this.right,a.x);this.bottom=Math.max(this.bottom,a.y);this.left=Math.min(this.left,a.x)};goog.math.Box.equals=function(a,b){return a==b?!0:a&&b?a.top==b.top&&a.right==b.right&&a.bottom==b.bottom&&a.left==b.left:!1};
goog.math.Box.contains=function(a,b){return a&&b?b instanceof goog.math.Box?b.left>=a.left&&b.right<=a.right&&b.top>=a.top&&b.bottom<=a.bottom:b.x>=a.left&&b.x<=a.right&&b.y>=a.top&&b.y<=a.bottom:!1};goog.math.Box.relativePositionX=function(a,b){return b.x<a.left?b.x-a.left:b.x>a.right?b.x-a.right:0};goog.math.Box.relativePositionY=function(a,b){return b.y<a.top?b.y-a.top:b.y>a.bottom?b.y-a.bottom:0};
goog.math.Box.distance=function(a,b){var c=goog.math.Box.relativePositionX(a,b);a=goog.math.Box.relativePositionY(a,b);return Math.sqrt(c*c+a*a)};goog.math.Box.intersects=function(a,b){return a.left<=b.right&&b.left<=a.right&&a.top<=b.bottom&&b.top<=a.bottom};goog.math.Box.intersectsWithPadding=function(a,b,c){return a.left<=b.right+c&&b.left<=a.right+c&&a.top<=b.bottom+c&&b.top<=a.bottom+c};
goog.math.Box.prototype.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};goog.math.Box.prototype.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};
goog.math.Box.prototype.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};goog.math.Box.prototype.translate=function(a,b){a instanceof goog.math.Coordinate?(this.left+=a.x,this.right+=a.x,this.top+=a.y,this.bottom+=a.y):(goog.asserts.assertNumber(a),this.left+=a,this.right+=a,goog.isNumber(b)&&(this.top+=b,this.bottom+=b));return this};
goog.math.Box.prototype.scale=function(a,b){b=goog.isNumber(b)?b:a;this.left*=a;this.right*=a;this.top*=b;this.bottom*=b;return this};goog.math.IRect=function(){};goog.math.Rect=function(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d};goog.math.Rect.prototype.clone=function(){return new goog.math.Rect(this.left,this.top,this.width,this.height)};goog.math.Rect.prototype.toBox=function(){return new goog.math.Box(this.top,this.left+this.width,this.top+this.height,this.left)};goog.math.Rect.createFromPositionAndSize=function(a,b){return new goog.math.Rect(a.x,a.y,b.width,b.height)};
goog.math.Rect.createFromBox=function(a){return new goog.math.Rect(a.left,a.top,a.right-a.left,a.bottom-a.top)};goog.DEBUG&&(goog.math.Rect.prototype.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"});goog.math.Rect.equals=function(a,b){return a==b?!0:a&&b?a.left==b.left&&a.width==b.width&&a.top==b.top&&a.height==b.height:!1};
goog.math.Rect.prototype.intersection=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top);a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,!0}return!1};
goog.math.Rect.intersection=function(a,b){var c=Math.max(a.left,b.left),d=Math.min(a.left+a.width,b.left+b.width);if(c<=d){var e=Math.max(a.top,b.top);a=Math.min(a.top+a.height,b.top+b.height);if(e<=a)return new goog.math.Rect(c,e,d-c,a-e)}return null};goog.math.Rect.intersects=function(a,b){return a.left<=b.left+b.width&&b.left<=a.left+a.width&&a.top<=b.top+b.height&&b.top<=a.top+a.height};goog.math.Rect.prototype.intersects=function(a){return goog.math.Rect.intersects(this,a)};
goog.math.Rect.difference=function(a,b){var c=goog.math.Rect.intersection(a,b);if(!c||!c.height||!c.width)return[a.clone()];c=[];var d=a.top,e=a.height,f=a.left+a.width,g=a.top+a.height,h=b.left+b.width,k=b.top+b.height;b.top>a.top&&(c.push(new goog.math.Rect(a.left,a.top,a.width,b.top-a.top)),d=b.top,e-=b.top-a.top);k<g&&(c.push(new goog.math.Rect(a.left,k,a.width,g-k)),e=k-d);b.left>a.left&&c.push(new goog.math.Rect(a.left,d,b.left-a.left,e));h<f&&c.push(new goog.math.Rect(h,d,f-h,e));return c};
goog.math.Rect.prototype.difference=function(a){return goog.math.Rect.difference(this,a)};goog.math.Rect.prototype.boundingRect=function(a){var b=Math.max(this.left+this.width,a.left+a.width),c=Math.max(this.top+this.height,a.top+a.height);this.left=Math.min(this.left,a.left);this.top=Math.min(this.top,a.top);this.width=b-this.left;this.height=c-this.top};goog.math.Rect.boundingRect=function(a,b){if(!a||!b)return null;a=new goog.math.Rect(a.left,a.top,a.width,a.height);a.boundingRect(b);return a};
goog.math.Rect.prototype.contains=function(a){return a instanceof goog.math.Coordinate?a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height:this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height};goog.math.Rect.prototype.squaredDistance=function(a){var b=a.x<this.left?this.left-a.x:Math.max(a.x-(this.left+this.width),0);a=a.y<this.top?this.top-a.y:Math.max(a.y-(this.top+this.height),0);return b*b+a*a};
goog.math.Rect.prototype.distance=function(a){return Math.sqrt(this.squaredDistance(a))};goog.math.Rect.prototype.getSize=function(){return new goog.math.Size(this.width,this.height)};goog.math.Rect.prototype.getTopLeft=function(){return new goog.math.Coordinate(this.left,this.top)};goog.math.Rect.prototype.getCenter=function(){return new goog.math.Coordinate(this.left+this.width/2,this.top+this.height/2)};
goog.math.Rect.prototype.getBottomRight=function(){return new goog.math.Coordinate(this.left+this.width,this.top+this.height)};goog.math.Rect.prototype.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};goog.math.Rect.prototype.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
goog.math.Rect.prototype.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};goog.math.Rect.prototype.translate=function(a,b){a instanceof goog.math.Coordinate?(this.left+=a.x,this.top+=a.y):(this.left+=goog.asserts.assertNumber(a),goog.isNumber(b)&&(this.top+=b));return this};
goog.math.Rect.prototype.scale=function(a,b){b=goog.isNumber(b)?b:a;this.left*=a;this.width*=a;this.top*=b;this.height*=b;return this};goog.style={};goog.style.setStyle=function(a,b,c){if(goog.isString(b))goog.style.setStyle_(a,c,b);else for(var d in b)goog.style.setStyle_(a,b[d],d)};goog.style.setStyle_=function(a,b,c){(c=goog.style.getVendorJsStyleName_(a,c))&&(a.style[c]=b)};goog.style.styleNameCache_={};
goog.style.getVendorJsStyleName_=function(a,b){var c=goog.style.styleNameCache_[b];if(!c){var d=goog.string.toCamelCase(b);c=d;void 0===a.style[d]&&(d=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(d),void 0!==a.style[d]&&(c=d));goog.style.styleNameCache_[b]=c}return c};
goog.style.getVendorStyleName_=function(a,b){var c=goog.string.toCamelCase(b);return void 0===a.style[c]&&(c=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(c),void 0!==a.style[c])?goog.dom.vendor.getVendorPrefix()+"-"+b:b};goog.style.getStyle=function(a,b){var c=a.style[goog.string.toCamelCase(b)];return"undefined"!==typeof c?c:a.style[goog.style.getVendorJsStyleName_(a,b)]||""};
goog.style.getComputedStyle=function(a,b){var c=goog.dom.getOwnerDocument(a);return c.defaultView&&c.defaultView.getComputedStyle&&(a=c.defaultView.getComputedStyle(a,null))?a[b]||a.getPropertyValue(b)||"":""};goog.style.getCascadedStyle=function(a,b){return a.currentStyle?a.currentStyle[b]:null};goog.style.getStyle_=function(a,b){return goog.style.getComputedStyle(a,b)||goog.style.getCascadedStyle(a,b)||a.style&&a.style[b]};
goog.style.getComputedBoxSizing=function(a){return goog.style.getStyle_(a,"boxSizing")||goog.style.getStyle_(a,"MozBoxSizing")||goog.style.getStyle_(a,"WebkitBoxSizing")||null};goog.style.getComputedPosition=function(a){return goog.style.getStyle_(a,"position")};goog.style.getBackgroundColor=function(a){return goog.style.getStyle_(a,"backgroundColor")};goog.style.getComputedOverflowX=function(a){return goog.style.getStyle_(a,"overflowX")};
goog.style.getComputedOverflowY=function(a){return goog.style.getStyle_(a,"overflowY")};goog.style.getComputedZIndex=function(a){return goog.style.getStyle_(a,"zIndex")};goog.style.getComputedTextAlign=function(a){return goog.style.getStyle_(a,"textAlign")};goog.style.getComputedCursor=function(a){return goog.style.getStyle_(a,"cursor")};goog.style.getComputedTransform=function(a){var b=goog.style.getVendorStyleName_(a,"transform");return goog.style.getStyle_(a,b)||goog.style.getStyle_(a,"transform")};
goog.style.setPosition=function(a,b,c){if(b instanceof goog.math.Coordinate){var d=b.x;b=b.y}else d=b,b=c;a.style.left=goog.style.getPixelStyleValue_(d,!1);a.style.top=goog.style.getPixelStyleValue_(b,!1)};goog.style.getPosition=function(a){return new goog.math.Coordinate(a.offsetLeft,a.offsetTop)};
goog.style.getClientViewportElement=function(a){a=a?goog.dom.getOwnerDocument(a):goog.dom.getDocument();return!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9)||goog.dom.getDomHelper(a).isCss1CompatMode()?a.documentElement:a.body};goog.style.getViewportPageOffset=function(a){var b=a.body;a=a.documentElement;return new goog.math.Coordinate(b.scrollLeft||a.scrollLeft,b.scrollTop||a.scrollTop)};
goog.style.getBoundingClientRect_=function(a){try{var b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}goog.userAgent.IE&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b};
goog.style.getOffsetParent=function(a){if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(8))return goog.asserts.assert(a&&"offsetParent"in a),a.offsetParent;var b=goog.dom.getOwnerDocument(a),c=goog.style.getStyle_(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(a.nodeType==goog.dom.NodeType.DOCUMENT_FRAGMENT&&a.host&&(a=a.host),c=goog.style.getStyle_(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||
a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null};
goog.style.getVisibleRectForElement=function(a){for(var b=new goog.math.Box(0,Infinity,Infinity,0),c=goog.dom.getDomHelper(a),d=c.getDocument().body,e=c.getDocument().documentElement,f=c.getDocumentScrollElement();a=goog.style.getOffsetParent(a);)if(!(goog.userAgent.IE&&0==a.clientWidth||goog.userAgent.WEBKIT&&0==a.clientHeight&&a==d)&&a!=d&&a!=e&&"visible"!=goog.style.getStyle_(a,"overflow")){var g=goog.style.getPageOffset(a),h=goog.style.getClientLeftTop(a);g.x+=h.x;g.y+=h.y;b.top=Math.max(b.top,
g.y);b.right=Math.min(b.right,g.x+a.clientWidth);b.bottom=Math.min(b.bottom,g.y+a.clientHeight);b.left=Math.max(b.left,g.x)}d=f.scrollLeft;f=f.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,f);c=c.getViewportSize();b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,f+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:null};
goog.style.getContainerOffsetToScrollInto=function(a,b,c){var d=b||goog.dom.getDocumentScrollElement(),e=goog.style.getPageOffset(a),f=goog.style.getPageOffset(d),g=goog.style.getBorderBox(d);d==goog.dom.getDocumentScrollElement()?(b=e.x-d.scrollLeft,e=e.y-d.scrollTop,goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(10)&&(b+=g.left,e+=g.top)):(b=e.x-f.x-g.left,e=e.y-f.y-g.top);g=goog.style.getSizeWithDisplay_(a);a=d.clientWidth-g.width;g=d.clientHeight-g.height;f=d.scrollLeft;d=d.scrollTop;
c?(f+=b-a/2,d+=e-g/2):(f+=Math.min(b,Math.max(b-a,0)),d+=Math.min(e,Math.max(e-g,0)));return new goog.math.Coordinate(f,d)};goog.style.scrollIntoContainerView=function(a,b,c){b=b||goog.dom.getDocumentScrollElement();a=goog.style.getContainerOffsetToScrollInto(a,b,c);b.scrollLeft=a.x;b.scrollTop=a.y};goog.style.getClientLeftTop=function(a){return new goog.math.Coordinate(a.clientLeft,a.clientTop)};
goog.style.getPageOffset=function(a){var b=goog.dom.getOwnerDocument(a);goog.asserts.assertObject(a,"Parameter is required");var c=new goog.math.Coordinate(0,0),d=goog.style.getClientViewportElement(b);if(a==d)return c;a=goog.style.getBoundingClientRect_(a);b=goog.dom.getDomHelper(b).getDocumentScroll();c.x=a.left+b.x;c.y=a.top+b.y;return c};goog.style.getPageOffsetLeft=function(a){return goog.style.getPageOffset(a).x};goog.style.getPageOffsetTop=function(a){return goog.style.getPageOffset(a).y};
goog.style.getFramedPageOffset=function(a,b){var c=new goog.math.Coordinate(0,0),d=goog.dom.getWindow(goog.dom.getOwnerDocument(a));if(!goog.reflect.canAccessProperty(d,"parent"))return c;do{var e=d==b?goog.style.getPageOffset(a):goog.style.getClientPositionForElement_(goog.asserts.assert(a));c.x+=e.x;c.y+=e.y}while(d&&d!=b&&d!=d.parent&&(a=d.frameElement)&&(d=d.parent));return c};
goog.style.translateRectForAnotherFrame=function(a,b,c){if(b.getDocument()!=c.getDocument()){var d=b.getDocument().body;c=goog.style.getFramedPageOffset(d,c.getWindow());c=goog.math.Coordinate.difference(c,goog.style.getPageOffset(d));!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9)||b.isCss1CompatMode()||(c=goog.math.Coordinate.difference(c,b.getDocumentScroll()));a.left+=c.x;a.top+=c.y}};
goog.style.getRelativePosition=function(a,b){a=goog.style.getClientPosition(a);b=goog.style.getClientPosition(b);return new goog.math.Coordinate(a.x-b.x,a.y-b.y)};goog.style.getClientPositionForElement_=function(a){a=goog.style.getBoundingClientRect_(a);return new goog.math.Coordinate(a.left,a.top)};
goog.style.getClientPosition=function(a){goog.asserts.assert(a);if(a.nodeType==goog.dom.NodeType.ELEMENT)return goog.style.getClientPositionForElement_(a);a=a.changedTouches?a.changedTouches[0]:a;return new goog.math.Coordinate(a.clientX,a.clientY)};goog.style.setPageOffset=function(a,b,c){var d=goog.style.getPageOffset(a);b instanceof goog.math.Coordinate&&(c=b.y,b=b.x);b=goog.asserts.assertNumber(b)-d.x;goog.style.setPosition(a,a.offsetLeft+b,a.offsetTop+(Number(c)-d.y))};
goog.style.setSize=function(a,b,c){if(b instanceof goog.math.Size)c=b.height,b=b.width;else if(void 0==c)throw Error("missing height argument");goog.style.setWidth(a,b);goog.style.setHeight(a,c)};goog.style.getPixelStyleValue_=function(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a};goog.style.setHeight=function(a,b){a.style.height=goog.style.getPixelStyleValue_(b,!0)};goog.style.setWidth=function(a,b){a.style.width=goog.style.getPixelStyleValue_(b,!0)};
goog.style.getSize=function(a){return goog.style.evaluateWithTemporaryDisplay_(goog.style.getSizeWithDisplay_,a)};goog.style.evaluateWithTemporaryDisplay_=function(a,b){if("none"!=goog.style.getStyle_(b,"display"))return a(b);var c=b.style,d=c.display,e=c.visibility,f=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=a(b);c.display=d;c.position=f;c.visibility=e;return a};
goog.style.getSizeWithDisplay_=function(a){var b=a.offsetWidth,c=a.offsetHeight,d=goog.userAgent.WEBKIT&&!b&&!c;return goog.isDef(b)&&!d||!a.getBoundingClientRect?new goog.math.Size(b,c):(a=goog.style.getBoundingClientRect_(a),new goog.math.Size(a.right-a.left,a.bottom-a.top))};goog.style.getTransformedSize=function(a){if(!a.getBoundingClientRect)return null;a=goog.style.evaluateWithTemporaryDisplay_(goog.style.getBoundingClientRect_,a);return new goog.math.Size(a.right-a.left,a.bottom-a.top)};
goog.style.getBounds=function(a){var b=goog.style.getPageOffset(a);a=goog.style.getSize(a);return new goog.math.Rect(b.x,b.y,a.width,a.height)};goog.style.toCamelCase=function(a){return goog.string.toCamelCase(String(a))};goog.style.toSelectorCase=function(a){return goog.string.toSelectorCase(a)};
goog.style.getOpacity=function(a){goog.asserts.assert(a);var b=a.style;a="";"opacity"in b?a=b.opacity:"MozOpacity"in b?a=b.MozOpacity:"filter"in b&&(b=b.filter.match(/alpha\(opacity=([\d.]+)\)/))&&(a=String(b[1]/100));return""==a?a:Number(a)};goog.style.setOpacity=function(a,b){goog.asserts.assert(a);a=a.style;"opacity"in a?a.opacity=b:"MozOpacity"in a?a.MozOpacity=b:"filter"in a&&(a.filter=""===b?"":"alpha(opacity="+100*Number(b)+")")};
goog.style.setTransparentBackgroundImage=function(a,b){a=a.style;goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?a.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+b+'", sizingMethod="crop")':(a.backgroundImage="url("+b+")",a.backgroundPosition="top left",a.backgroundRepeat="no-repeat")};goog.style.clearTransparentBackgroundImage=function(a){a=a.style;"filter"in a?a.filter="":a.backgroundImage="none"};goog.style.showElement=function(a,b){goog.style.setElementShown(a,b)};
goog.style.setElementShown=function(a,b){a.style.display=b?"":"none"};goog.style.isElementShown=function(a){return"none"!=a.style.display};
goog.style.installSafeStyleSheet=function(a,b){b=goog.dom.getDomHelper(b);var c=b.getDocument();if(goog.userAgent.IE&&c.createStyleSheet)return b=c.createStyleSheet(),goog.style.setSafeStyleSheet(b,a),b;c=b.getElementsByTagNameAndClass("HEAD")[0];if(!c){var d=b.getElementsByTagNameAndClass("BODY")[0];c=b.createDom("HEAD");d.parentNode.insertBefore(c,d)}d=b.createDom("STYLE");goog.style.setSafeStyleSheet(d,a);b.appendChild(c,d);return d};
goog.style.uninstallStyles=function(a){goog.dom.removeNode(a.ownerNode||a.owningElement||a)};goog.style.setSafeStyleSheet=function(a,b){b=goog.html.SafeStyleSheet.unwrap(b);goog.userAgent.IE&&goog.isDef(a.cssText)?a.cssText=b:a.innerHTML=b};goog.style.setPreWrap=function(a){a=a.style;goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?(a.whiteSpace="pre",a.wordWrap="break-word"):a.whiteSpace=goog.userAgent.GECKO?"-moz-pre-wrap":"pre-wrap"};
goog.style.setInlineBlock=function(a){a=a.style;a.position="relative";goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?(a.zoom="1",a.display="inline"):a.display="inline-block"};goog.style.isRightToLeft=function(a){return"rtl"==goog.style.getStyle_(a,"direction")};goog.style.unselectableStyle_=goog.userAgent.GECKO?"MozUserSelect":goog.userAgent.WEBKIT||goog.userAgent.EDGE?"WebkitUserSelect":null;
goog.style.isUnselectable=function(a){return goog.style.unselectableStyle_?"none"==a.style[goog.style.unselectableStyle_].toLowerCase():goog.userAgent.IE||goog.userAgent.OPERA?"on"==a.getAttribute("unselectable"):!1};
goog.style.setUnselectable=function(a,b,c){c=c?null:a.getElementsByTagName("*");var d=goog.style.unselectableStyle_;if(d){if(b=b?"none":"",a.style&&(a.style[d]=b),c){a=0;for(var e;e=c[a];a++)e.style&&(e.style[d]=b)}}else if(goog.userAgent.IE||goog.userAgent.OPERA)if(b=b?"on":"",a.setAttribute("unselectable",b),c)for(a=0;e=c[a];a++)e.setAttribute("unselectable",b)};goog.style.getBorderBoxSize=function(a){return new goog.math.Size(a.offsetWidth,a.offsetHeight)};
goog.style.setBorderBoxSize=function(a,b){var c=goog.dom.getOwnerDocument(a),d=goog.dom.getDomHelper(c).isCss1CompatMode();!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10")||d&&goog.userAgent.isVersionOrHigher("8")?goog.style.setBoxSizingSize_(a,b,"border-box"):(c=a.style,d?(d=goog.style.getPaddingBox(a),a=goog.style.getBorderBox(a),c.pixelWidth=b.width-a.left-d.left-d.right-a.right,c.pixelHeight=b.height-a.top-d.top-d.bottom-a.bottom):(c.pixelWidth=b.width,c.pixelHeight=b.height))};
goog.style.getContentBoxSize=function(a){var b=goog.dom.getOwnerDocument(a),c=goog.userAgent.IE&&a.currentStyle;if(c&&goog.dom.getDomHelper(b).isCss1CompatMode()&&"auto"!=c.width&&"auto"!=c.height&&!c.boxSizing)return b=goog.style.getIePixelValue_(a,c.width,"width","pixelWidth"),a=goog.style.getIePixelValue_(a,c.height,"height","pixelHeight"),new goog.math.Size(b,a);c=goog.style.getBorderBoxSize(a);b=goog.style.getPaddingBox(a);a=goog.style.getBorderBox(a);return new goog.math.Size(c.width-a.left-
b.left-b.right-a.right,c.height-a.top-b.top-b.bottom-a.bottom)};
goog.style.setContentBoxSize=function(a,b){var c=goog.dom.getOwnerDocument(a),d=goog.dom.getDomHelper(c).isCss1CompatMode();!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10")||d&&goog.userAgent.isVersionOrHigher("8")?goog.style.setBoxSizingSize_(a,b,"content-box"):(c=a.style,d?(c.pixelWidth=b.width,c.pixelHeight=b.height):(d=goog.style.getPaddingBox(a),a=goog.style.getBorderBox(a),c.pixelWidth=b.width+a.left+d.left+d.right+a.right,c.pixelHeight=b.height+a.top+d.top+d.bottom+a.bottom))};
goog.style.setBoxSizingSize_=function(a,b,c){a=a.style;goog.userAgent.GECKO?a.MozBoxSizing=c:goog.userAgent.WEBKIT?a.WebkitBoxSizing=c:a.boxSizing=c;a.width=Math.max(b.width,0)+"px";a.height=Math.max(b.height,0)+"px"};goog.style.getIePixelValue_=function(a,b,c,d){if(/^\d+px?$/.test(b))return parseInt(b,10);var e=a.style[c],f=a.runtimeStyle[c];a.runtimeStyle[c]=a.currentStyle[c];a.style[c]=b;b=a.style[d];a.style[c]=e;a.runtimeStyle[c]=f;return+b};
goog.style.getIePixelDistance_=function(a,b){return(b=goog.style.getCascadedStyle(a,b))?goog.style.getIePixelValue_(a,b,"left","pixelLeft"):0};
goog.style.getBox_=function(a,b){if(goog.userAgent.IE){var c=goog.style.getIePixelDistance_(a,b+"Left"),d=goog.style.getIePixelDistance_(a,b+"Right"),e=goog.style.getIePixelDistance_(a,b+"Top");a=goog.style.getIePixelDistance_(a,b+"Bottom");return new goog.math.Box(e,d,a,c)}c=goog.style.getComputedStyle(a,b+"Left");d=goog.style.getComputedStyle(a,b+"Right");e=goog.style.getComputedStyle(a,b+"Top");a=goog.style.getComputedStyle(a,b+"Bottom");return new goog.math.Box(parseFloat(e),parseFloat(d),parseFloat(a),
parseFloat(c))};goog.style.getPaddingBox=function(a){return goog.style.getBox_(a,"padding")};goog.style.getMarginBox=function(a){return goog.style.getBox_(a,"margin")};goog.style.ieBorderWidthKeywords_={thin:2,medium:4,thick:6};goog.style.getIePixelBorder_=function(a,b){if("none"==goog.style.getCascadedStyle(a,b+"Style"))return 0;b=goog.style.getCascadedStyle(a,b+"Width");return b in goog.style.ieBorderWidthKeywords_?goog.style.ieBorderWidthKeywords_[b]:goog.style.getIePixelValue_(a,b,"left","pixelLeft")};
goog.style.getBorderBox=function(a){if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){var b=goog.style.getIePixelBorder_(a,"borderLeft"),c=goog.style.getIePixelBorder_(a,"borderRight"),d=goog.style.getIePixelBorder_(a,"borderTop");a=goog.style.getIePixelBorder_(a,"borderBottom");return new goog.math.Box(d,c,a,b)}b=goog.style.getComputedStyle(a,"borderLeftWidth");c=goog.style.getComputedStyle(a,"borderRightWidth");d=goog.style.getComputedStyle(a,"borderTopWidth");a=goog.style.getComputedStyle(a,
"borderBottomWidth");return new goog.math.Box(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))};goog.style.getFontFamily=function(a){var b=goog.dom.getOwnerDocument(a),c="";if(b.body.createTextRange&&goog.dom.contains(b,a)){b=b.body.createTextRange();b.moveToElementText(a);try{c=b.queryCommandValue("FontName")}catch(d){c=""}}c||(c=goog.style.getStyle_(a,"fontFamily"));a=c.split(",");1<a.length&&(c=a[0]);return goog.string.stripQuotes(c,"\"'")};goog.style.lengthUnitRegex_=/[^\d]+$/;
goog.style.getLengthUnits=function(a){return(a=a.match(goog.style.lengthUnitRegex_))&&a[0]||null};goog.style.ABSOLUTE_CSS_LENGTH_UNITS_={cm:1,"in":1,mm:1,pc:1,pt:1};goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_={em:1,ex:1};
goog.style.getFontSize=function(a){var b=goog.style.getStyle_(a,"fontSize"),c=goog.style.getLengthUnits(b);if(b&&"px"==c)return parseInt(b,10);if(goog.userAgent.IE){if(String(c)in goog.style.ABSOLUTE_CSS_LENGTH_UNITS_)return goog.style.getIePixelValue_(a,b,"left","pixelLeft");if(a.parentNode&&a.parentNode.nodeType==goog.dom.NodeType.ELEMENT&&String(c)in goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_)return a=a.parentNode,c=goog.style.getStyle_(a,"fontSize"),goog.style.getIePixelValue_(a,b==c?"1em":b,
"left","pixelLeft")}c=goog.dom.createDom("SPAN",{style:"visibility:hidden;position:absolute;line-height:0;padding:0;margin:0;border:0;height:1em;"});goog.dom.appendChild(a,c);b=c.offsetHeight;goog.dom.removeNode(c);return b};goog.style.parseStyleAttribute=function(a){var b={};goog.array.forEach(a.split(/\s*;\s*/),function(a){var c=a.match(/\s*([\w-]+)\s*:(.+)/);c&&(a=c[1],c=goog.string.trim(c[2]),b[goog.string.toCamelCase(a.toLowerCase())]=c)});return b};
goog.style.toStyleAttribute=function(a){var b=[];goog.object.forEach(a,function(a,d){b.push(goog.string.toSelectorCase(d),":",a,";")});return b.join("")};goog.style.setFloat=function(a,b){a.style[goog.userAgent.IE?"styleFloat":"cssFloat"]=b};goog.style.getFloat=function(a){return a.style[goog.userAgent.IE?"styleFloat":"cssFloat"]||""};
goog.style.getScrollbarWidth=function(a){var b=goog.dom.createElement("DIV");a&&(b.className=a);b.style.cssText="overflow:auto;position:absolute;top:0;width:100px;height:100px";a=goog.dom.createElement("DIV");goog.style.setSize(a,"200px","200px");b.appendChild(a);goog.dom.appendChild(goog.dom.getDocument().body,b);a=b.offsetWidth-b.clientWidth;goog.dom.removeNode(b);return a};goog.style.MATRIX_TRANSLATION_REGEX_=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;
goog.style.getCssTranslation=function(a){a=goog.style.getComputedTransform(a);return a?(a=a.match(goog.style.MATRIX_TRANSLATION_REGEX_))?new goog.math.Coordinate(parseFloat(a[1]),parseFloat(a[2])):new goog.math.Coordinate(0,0):new goog.math.Coordinate(0,0)};goog.debug.LogRecord=function(a,b,c,d,e){this.reset(a,b,c,d,e)};goog.debug.LogRecord.prototype.sequenceNumber_=0;goog.debug.LogRecord.prototype.exception_=null;goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS=!0;goog.debug.LogRecord.nextSequenceNumber_=0;
goog.debug.LogRecord.prototype.reset=function(a,b,c,d,e){goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS&&(this.sequenceNumber_="number"==typeof e?e:goog.debug.LogRecord.nextSequenceNumber_++);this.time_=d||goog.now();this.level_=a;this.msg_=b;this.loggerName_=c;delete this.exception_};goog.debug.LogRecord.prototype.getLoggerName=function(){return this.loggerName_};goog.debug.LogRecord.prototype.getException=function(){return this.exception_};
goog.debug.LogRecord.prototype.setException=function(a){this.exception_=a};goog.debug.LogRecord.prototype.setLoggerName=function(a){this.loggerName_=a};goog.debug.LogRecord.prototype.getLevel=function(){return this.level_};goog.debug.LogRecord.prototype.setLevel=function(a){this.level_=a};goog.debug.LogRecord.prototype.getMessage=function(){return this.msg_};goog.debug.LogRecord.prototype.setMessage=function(a){this.msg_=a};goog.debug.LogRecord.prototype.getMillis=function(){return this.time_};
goog.debug.LogRecord.prototype.setMillis=function(a){this.time_=a};goog.debug.LogRecord.prototype.getSequenceNumber=function(){return this.sequenceNumber_};goog.debug.LogBuffer=function(){goog.asserts.assert(goog.debug.LogBuffer.isBufferingEnabled(),"Cannot use goog.debug.LogBuffer without defining goog.debug.LogBuffer.CAPACITY.");this.clear()};goog.debug.LogBuffer.getInstance=function(){goog.debug.LogBuffer.instance_||(goog.debug.LogBuffer.instance_=new goog.debug.LogBuffer);return goog.debug.LogBuffer.instance_};goog.debug.LogBuffer.CAPACITY=0;
goog.debug.LogBuffer.prototype.addRecord=function(a,b,c){var d=(this.curIndex_+1)%goog.debug.LogBuffer.CAPACITY;this.curIndex_=d;if(this.isFull_)return d=this.buffer_[d],d.reset(a,b,c),d;this.isFull_=d==goog.debug.LogBuffer.CAPACITY-1;return this.buffer_[d]=new goog.debug.LogRecord(a,b,c)};goog.debug.LogBuffer.isBufferingEnabled=function(){return 0<goog.debug.LogBuffer.CAPACITY};
goog.debug.LogBuffer.prototype.clear=function(){this.buffer_=Array(goog.debug.LogBuffer.CAPACITY);this.curIndex_=-1;this.isFull_=!1};goog.debug.LogBuffer.prototype.forEachRecord=function(a){var b=this.buffer_;if(b[0]){var c=this.curIndex_,d=this.isFull_?c:-1;do d=(d+1)%goog.debug.LogBuffer.CAPACITY,a(b[d]);while(d!=c)}};goog.debug.Logger=function(a){this.name_=a;this.handlers_=this.children_=this.level_=this.parent_=null};goog.debug.Logger.ROOT_LOGGER_NAME="";goog.debug.Logger.ENABLE_HIERARCHY=!0;goog.debug.Logger.ENABLE_PROFILER_LOGGING=!1;goog.debug.Logger.ENABLE_HIERARCHY||(goog.debug.Logger.rootHandlers_=[]);goog.debug.Logger.Level=function(a,b){this.name=a;this.value=b};goog.debug.Logger.Level.prototype.toString=function(){return this.name};goog.debug.Logger.Level.OFF=new goog.debug.Logger.Level("OFF",Infinity);
goog.debug.Logger.Level.SHOUT=new goog.debug.Logger.Level("SHOUT",1200);goog.debug.Logger.Level.SEVERE=new goog.debug.Logger.Level("SEVERE",1E3);goog.debug.Logger.Level.WARNING=new goog.debug.Logger.Level("WARNING",900);goog.debug.Logger.Level.INFO=new goog.debug.Logger.Level("INFO",800);goog.debug.Logger.Level.CONFIG=new goog.debug.Logger.Level("CONFIG",700);goog.debug.Logger.Level.FINE=new goog.debug.Logger.Level("FINE",500);goog.debug.Logger.Level.FINER=new goog.debug.Logger.Level("FINER",400);
goog.debug.Logger.Level.FINEST=new goog.debug.Logger.Level("FINEST",300);goog.debug.Logger.Level.ALL=new goog.debug.Logger.Level("ALL",0);goog.debug.Logger.Level.PREDEFINED_LEVELS=[goog.debug.Logger.Level.OFF,goog.debug.Logger.Level.SHOUT,goog.debug.Logger.Level.SEVERE,goog.debug.Logger.Level.WARNING,goog.debug.Logger.Level.INFO,goog.debug.Logger.Level.CONFIG,goog.debug.Logger.Level.FINE,goog.debug.Logger.Level.FINER,goog.debug.Logger.Level.FINEST,goog.debug.Logger.Level.ALL];
goog.debug.Logger.Level.predefinedLevelsCache_=null;goog.debug.Logger.Level.createPredefinedLevelsCache_=function(){goog.debug.Logger.Level.predefinedLevelsCache_={};for(var a=0,b;b=goog.debug.Logger.Level.PREDEFINED_LEVELS[a];a++)goog.debug.Logger.Level.predefinedLevelsCache_[b.value]=b,goog.debug.Logger.Level.predefinedLevelsCache_[b.name]=b};
goog.debug.Logger.Level.getPredefinedLevel=function(a){goog.debug.Logger.Level.predefinedLevelsCache_||goog.debug.Logger.Level.createPredefinedLevelsCache_();return goog.debug.Logger.Level.predefinedLevelsCache_[a]||null};
goog.debug.Logger.Level.getPredefinedLevelByValue=function(a){goog.debug.Logger.Level.predefinedLevelsCache_||goog.debug.Logger.Level.createPredefinedLevelsCache_();if(a in goog.debug.Logger.Level.predefinedLevelsCache_)return goog.debug.Logger.Level.predefinedLevelsCache_[a];for(var b=0;b<goog.debug.Logger.Level.PREDEFINED_LEVELS.length;++b){var c=goog.debug.Logger.Level.PREDEFINED_LEVELS[b];if(c.value<=a)return c}return null};goog.debug.Logger.getLogger=function(a){return goog.debug.LogManager.getLogger(a)};
goog.debug.Logger.logToProfilers=function(a){if(goog.debug.Logger.ENABLE_PROFILER_LOGGING){var b=goog.global.msWriteProfilerMark;b?b(a):(b=goog.global.console)&&b.timeStamp&&b.timeStamp(a)}};goog.debug.Logger.prototype.getName=function(){return this.name_};
goog.debug.Logger.prototype.addHandler=function(a){goog.debug.LOGGING_ENABLED&&(goog.debug.Logger.ENABLE_HIERARCHY?(this.handlers_||(this.handlers_=[]),this.handlers_.push(a)):(goog.asserts.assert(!this.name_,"Cannot call addHandler on a non-root logger when goog.debug.Logger.ENABLE_HIERARCHY is false."),goog.debug.Logger.rootHandlers_.push(a)))};
goog.debug.Logger.prototype.removeHandler=function(a){if(goog.debug.LOGGING_ENABLED){var b=goog.debug.Logger.ENABLE_HIERARCHY?this.handlers_:goog.debug.Logger.rootHandlers_;return!!b&&goog.array.remove(b,a)}return!1};goog.debug.Logger.prototype.getParent=function(){return this.parent_};goog.debug.Logger.prototype.getChildren=function(){this.children_||(this.children_={});return this.children_};
goog.debug.Logger.prototype.setLevel=function(a){goog.debug.LOGGING_ENABLED&&(goog.debug.Logger.ENABLE_HIERARCHY?this.level_=a:(goog.asserts.assert(!this.name_,"Cannot call setLevel() on a non-root logger when goog.debug.Logger.ENABLE_HIERARCHY is false."),goog.debug.Logger.rootLevel_=a))};goog.debug.Logger.prototype.getLevel=function(){return goog.debug.LOGGING_ENABLED?this.level_:goog.debug.Logger.Level.OFF};
goog.debug.Logger.prototype.getEffectiveLevel=function(){if(!goog.debug.LOGGING_ENABLED)return goog.debug.Logger.Level.OFF;if(!goog.debug.Logger.ENABLE_HIERARCHY)return goog.debug.Logger.rootLevel_;if(this.level_)return this.level_;if(this.parent_)return this.parent_.getEffectiveLevel();goog.asserts.fail("Root logger has no level set.");return null};goog.debug.Logger.prototype.isLoggable=function(a){return goog.debug.LOGGING_ENABLED&&a.value>=this.getEffectiveLevel().value};
goog.debug.Logger.prototype.log=function(a,b,c){goog.debug.LOGGING_ENABLED&&this.isLoggable(a)&&(goog.isFunction(b)&&(b=b()),this.doLogRecord_(this.getLogRecord(a,b,c)))};goog.debug.Logger.prototype.getLogRecord=function(a,b,c){a=goog.debug.LogBuffer.isBufferingEnabled()?goog.debug.LogBuffer.getInstance().addRecord(a,b,this.name_):new goog.debug.LogRecord(a,String(b),this.name_);c&&a.setException(c);return a};
goog.debug.Logger.prototype.shout=function(a,b){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.SHOUT,a,b)};goog.debug.Logger.prototype.severe=function(a,b){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.SEVERE,a,b)};goog.debug.Logger.prototype.warning=function(a,b){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.WARNING,a,b)};goog.debug.Logger.prototype.info=function(a,b){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.INFO,a,b)};
goog.debug.Logger.prototype.config=function(a,b){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.CONFIG,a,b)};goog.debug.Logger.prototype.fine=function(a,b){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.FINE,a,b)};goog.debug.Logger.prototype.finer=function(a,b){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.FINER,a,b)};goog.debug.Logger.prototype.finest=function(a,b){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.FINEST,a,b)};
goog.debug.Logger.prototype.logRecord=function(a){goog.debug.LOGGING_ENABLED&&this.isLoggable(a.getLevel())&&this.doLogRecord_(a)};goog.debug.Logger.prototype.doLogRecord_=function(a){goog.debug.Logger.ENABLE_PROFILER_LOGGING&&goog.debug.Logger.logToProfilers("log:"+a.getMessage());if(goog.debug.Logger.ENABLE_HIERARCHY)for(var b=this;b;)b.callPublish_(a),b=b.getParent();else{b=0;for(var c;c=goog.debug.Logger.rootHandlers_[b++];)c(a)}};
goog.debug.Logger.prototype.callPublish_=function(a){if(this.handlers_)for(var b=0,c;c=this.handlers_[b];b++)c(a)};goog.debug.Logger.prototype.setParent_=function(a){this.parent_=a};goog.debug.Logger.prototype.addChild_=function(a,b){this.getChildren()[a]=b};goog.debug.LogManager={};goog.debug.LogManager.loggers_={};goog.debug.LogManager.rootLogger_=null;
goog.debug.LogManager.initialize=function(){goog.debug.LogManager.rootLogger_||(goog.debug.LogManager.rootLogger_=new goog.debug.Logger(goog.debug.Logger.ROOT_LOGGER_NAME),goog.debug.LogManager.loggers_[goog.debug.Logger.ROOT_LOGGER_NAME]=goog.debug.LogManager.rootLogger_,goog.debug.LogManager.rootLogger_.setLevel(goog.debug.Logger.Level.CONFIG))};goog.debug.LogManager.getLoggers=function(){return goog.debug.LogManager.loggers_};
goog.debug.LogManager.getRoot=function(){goog.debug.LogManager.initialize();return goog.debug.LogManager.rootLogger_};goog.debug.LogManager.getLogger=function(a){goog.debug.LogManager.initialize();return goog.debug.LogManager.loggers_[a]||goog.debug.LogManager.createLogger_(a)};goog.debug.LogManager.createFunctionForCatchErrors=function(a){return function(b){(a||goog.debug.LogManager.getRoot()).severe("Error: "+b.message+" ("+b.fileName+" @ Line: "+b.line+")")}};
goog.debug.LogManager.createLogger_=function(a){var b=new goog.debug.Logger(a);if(goog.debug.Logger.ENABLE_HIERARCHY){var c=a.lastIndexOf("."),d=a.substr(0,c);c=a.substr(c+1);d=goog.debug.LogManager.getLogger(d);d.addChild_(c,b);b.setParent_(d)}return goog.debug.LogManager.loggers_[a]=b};goog.log={};goog.log.ENABLED=goog.debug.LOGGING_ENABLED;goog.log.ROOT_LOGGER_NAME=goog.debug.Logger.ROOT_LOGGER_NAME;goog.log.Logger=goog.debug.Logger;goog.log.Level=goog.debug.Logger.Level;goog.log.LogRecord=goog.debug.LogRecord;goog.log.getLogger=function(a,b){return goog.log.ENABLED?(a=goog.debug.LogManager.getLogger(a),b&&a&&a.setLevel(b),a):null};goog.log.addHandler=function(a,b){goog.log.ENABLED&&a&&a.addHandler(b)};
goog.log.removeHandler=function(a,b){return goog.log.ENABLED&&a?a.removeHandler(b):!1};goog.log.log=function(a,b,c,d){goog.log.ENABLED&&a&&a.log(b,c,d)};goog.log.error=function(a,b,c){goog.log.ENABLED&&a&&a.severe(b,c)};goog.log.warning=function(a,b,c){goog.log.ENABLED&&a&&a.warning(b,c)};goog.log.info=function(a,b,c){goog.log.ENABLED&&a&&a.info(b,c)};goog.log.fine=function(a,b,c){goog.log.ENABLED&&a&&a.fine(b,c)};goog.dom.SavedRange=function(){goog.Disposable.call(this)};goog.inherits(goog.dom.SavedRange,goog.Disposable);goog.dom.SavedRange.logger_=goog.log.getLogger("goog.dom.SavedRange");goog.dom.SavedRange.prototype.restore=function(a){this.isDisposed()&&goog.log.error(goog.dom.SavedRange.logger_,"Disposed SavedRange objects cannot be restored.");var b=this.restoreInternal();a||this.dispose();return b};goog.dom.SavedRange.prototype.restoreInternal=goog.abstractMethod;goog.dom.SavedCaretRange=function(a){goog.dom.SavedRange.call(this);this.startCaretId_=goog.string.createUniqueString();this.endCaretId_=goog.string.createUniqueString();this.reversed_=a.isReversed();this.dom_=goog.dom.getDomHelper(a.getDocument());a.surroundWithNodes(this.createCaret_(!0),this.createCaret_(!1))};goog.inherits(goog.dom.SavedCaretRange,goog.dom.SavedRange);
goog.dom.SavedCaretRange.prototype.toAbstractRange=function(){var a=null,b=this.getCaret(!0),c=this.getCaret(!1);b&&c&&(a=goog.dom.Range.createFromNodes(b,0,c,0));return a};goog.dom.SavedCaretRange.prototype.getCaret=function(a){return this.dom_.getElement(a?this.startCaretId_:this.endCaretId_)};goog.dom.SavedCaretRange.prototype.removeCarets=function(a){goog.dom.removeNode(this.getCaret(!0));goog.dom.removeNode(this.getCaret(!1));return a};
goog.dom.SavedCaretRange.prototype.setRestorationDocument=function(a){this.dom_.setDocument(a)};goog.dom.SavedCaretRange.prototype.restoreInternal=function(){var a=null,b=this.getCaret(!this.reversed_),c=this.getCaret(this.reversed_);if(b&&c){a=b.parentNode;b=goog.array.indexOf(a.childNodes,b);var d=c.parentNode;c=goog.array.indexOf(d.childNodes,c);d==a&&(this.reversed_?b--:c--);a=goog.dom.Range.createFromNodes(a,b,d,c);a=this.removeCarets(a);a.select()}else this.removeCarets();return a};
goog.dom.SavedCaretRange.prototype.disposeInternal=function(){this.removeCarets();this.dom_=null};goog.dom.SavedCaretRange.prototype.createCaret_=function(a){return this.dom_.createDom("SPAN",{id:a?this.startCaretId_:this.endCaretId_})};goog.dom.SavedCaretRange.CARET_REGEX=/<span\s+id="?goog_\d+"?><\/span>/ig;goog.dom.SavedCaretRange.htmlEqual=function(a,b){return a==b||a.replace(goog.dom.SavedCaretRange.CARET_REGEX,"")==b.replace(goog.dom.SavedCaretRange.CARET_REGEX,"")};goog.dom.TagWalkType={START_TAG:1,OTHER:0,END_TAG:-1};goog.dom.TagIterator=function(a,b,c,d,e){this.reversed=!!b;this.node=null;this.tagType=goog.dom.TagWalkType.OTHER;this.started_=!1;this.constrained=!c;a&&this.setPosition(a,d);this.depth=void 0!=e?e:this.tagType||0;this.reversed&&(this.depth*=-1)};goog.inherits(goog.dom.TagIterator,goog.iter.Iterator);
goog.dom.TagIterator.prototype.setPosition=function(a,b,c){if(this.node=a)goog.isNumber(b)?this.tagType=b:this.tagType=this.node.nodeType!=goog.dom.NodeType.ELEMENT?goog.dom.TagWalkType.OTHER:this.reversed?goog.dom.TagWalkType.END_TAG:goog.dom.TagWalkType.START_TAG;goog.isNumber(c)&&(this.depth=c)};goog.dom.TagIterator.prototype.copyFrom=function(a){this.node=a.node;this.tagType=a.tagType;this.depth=a.depth;this.reversed=a.reversed;this.constrained=a.constrained};
goog.dom.TagIterator.prototype.clone=function(){return new goog.dom.TagIterator(this.node,this.reversed,!this.constrained,this.tagType,this.depth)};goog.dom.TagIterator.prototype.skipTag=function(){var a=this.reversed?goog.dom.TagWalkType.END_TAG:goog.dom.TagWalkType.START_TAG;this.tagType==a&&(this.tagType=-1*a,this.depth+=this.tagType*(this.reversed?-1:1))};
goog.dom.TagIterator.prototype.restartTag=function(){var a=this.reversed?goog.dom.TagWalkType.START_TAG:goog.dom.TagWalkType.END_TAG;this.tagType==a&&(this.tagType=-1*a,this.depth+=this.tagType*(this.reversed?-1:1))};
goog.dom.TagIterator.prototype.next=function(){if(this.started_){if(!this.node||this.constrained&&0==this.depth)throw goog.iter.StopIteration;var a=this.node;var b=this.reversed?goog.dom.TagWalkType.END_TAG:goog.dom.TagWalkType.START_TAG;if(this.tagType==b){var c=this.reversed?a.lastChild:a.firstChild;c?this.setPosition(c):this.setPosition(a,-1*b)}else(c=this.reversed?a.previousSibling:a.nextSibling)?this.setPosition(c):this.setPosition(a.parentNode,-1*b);this.depth+=this.tagType*(this.reversed?-1:
1)}else this.started_=!0;a=this.node;if(!this.node)throw goog.iter.StopIteration;return a};goog.dom.TagIterator.prototype.isStarted=function(){return this.started_};goog.dom.TagIterator.prototype.isStartTag=function(){return this.tagType==goog.dom.TagWalkType.START_TAG};goog.dom.TagIterator.prototype.isEndTag=function(){return this.tagType==goog.dom.TagWalkType.END_TAG};goog.dom.TagIterator.prototype.isNonElement=function(){return this.tagType==goog.dom.TagWalkType.OTHER};
goog.dom.TagIterator.prototype.equals=function(a){return a.node==this.node&&(!this.node||a.tagType==this.tagType)};goog.dom.TagIterator.prototype.splice=function(a){var b=this.node;this.restartTag();this.reversed=!this.reversed;goog.dom.TagIterator.prototype.next.call(this);this.reversed=!this.reversed;for(var c=goog.isArrayLike(arguments[0])?arguments[0]:arguments,d=c.length-1;0<=d;d--)goog.dom.insertSiblingAfter(c[d],b);goog.dom.removeNode(b)};goog.dom.RangeType={TEXT:"text",CONTROL:"control",MULTI:"mutli"};goog.dom.AbstractRange=function(){};goog.dom.AbstractRange.getBrowserSelectionForWindow=function(a){if(a.getSelection)return a.getSelection();a=a.document;var b=a.selection;if(b){try{var c=b.createRange();if(c.parentElement){if(c.parentElement().document!=a)return null}else if(!c.length||c.item(0).document!=a)return null}catch(d){return null}return b}return null};goog.dom.AbstractRange.isNativeControlRange=function(a){return!!a&&!!a.addElement};
goog.dom.AbstractRange.prototype.clone=goog.abstractMethod;goog.dom.AbstractRange.prototype.getType=goog.abstractMethod;goog.dom.AbstractRange.prototype.getBrowserRangeObject=goog.abstractMethod;goog.dom.AbstractRange.prototype.setBrowserRangeObject=function(a){return!1};goog.dom.AbstractRange.prototype.getTextRangeCount=goog.abstractMethod;goog.dom.AbstractRange.prototype.getTextRange=goog.abstractMethod;
goog.dom.AbstractRange.prototype.getTextRanges=function(){for(var a=[],b=0,c=this.getTextRangeCount();b<c;b++)a.push(this.getTextRange(b));return a};goog.dom.AbstractRange.prototype.getContainer=goog.abstractMethod;goog.dom.AbstractRange.prototype.getContainerElement=function(){var a=this.getContainer();return a.nodeType==goog.dom.NodeType.ELEMENT?a:a.parentNode};goog.dom.AbstractRange.prototype.getStartNode=goog.abstractMethod;goog.dom.AbstractRange.prototype.getStartOffset=goog.abstractMethod;
goog.dom.AbstractRange.prototype.getStartPosition=goog.abstractMethod;goog.dom.AbstractRange.prototype.getEndNode=goog.abstractMethod;goog.dom.AbstractRange.prototype.getEndOffset=goog.abstractMethod;goog.dom.AbstractRange.prototype.getEndPosition=goog.abstractMethod;goog.dom.AbstractRange.prototype.getAnchorNode=function(){return this.isReversed()?this.getEndNode():this.getStartNode()};goog.dom.AbstractRange.prototype.getAnchorOffset=function(){return this.isReversed()?this.getEndOffset():this.getStartOffset()};
goog.dom.AbstractRange.prototype.getFocusNode=function(){return this.isReversed()?this.getStartNode():this.getEndNode()};goog.dom.AbstractRange.prototype.getFocusOffset=function(){return this.isReversed()?this.getStartOffset():this.getEndOffset()};goog.dom.AbstractRange.prototype.isReversed=function(){return!1};goog.dom.AbstractRange.prototype.getDocument=function(){return goog.dom.getOwnerDocument(goog.userAgent.IE?this.getContainer():this.getStartNode())};
goog.dom.AbstractRange.prototype.getWindow=function(){return goog.dom.getWindow(this.getDocument())};goog.dom.AbstractRange.prototype.containsRange=goog.abstractMethod;goog.dom.AbstractRange.prototype.containsNode=goog.abstractMethod;goog.dom.AbstractRange.prototype.isRangeInDocument=goog.abstractMethod;goog.dom.AbstractRange.prototype.isCollapsed=goog.abstractMethod;goog.dom.AbstractRange.prototype.getText=goog.abstractMethod;goog.dom.AbstractRange.prototype.getHtmlFragment=goog.abstractMethod;
goog.dom.AbstractRange.prototype.getValidHtml=goog.abstractMethod;goog.dom.AbstractRange.prototype.getPastableHtml=goog.abstractMethod;goog.dom.AbstractRange.prototype.__iterator__=goog.abstractMethod;goog.dom.AbstractRange.prototype.select=goog.abstractMethod;goog.dom.AbstractRange.prototype.removeContents=goog.abstractMethod;goog.dom.AbstractRange.prototype.insertNode=goog.abstractMethod;
goog.dom.AbstractRange.prototype.replaceContentsWithNode=function(a){this.isCollapsed()||this.removeContents();return this.insertNode(a,!0)};goog.dom.AbstractRange.prototype.surroundWithNodes=goog.abstractMethod;goog.dom.AbstractRange.prototype.saveUsingDom=goog.abstractMethod;goog.dom.AbstractRange.prototype.saveUsingCarets=function(){return this.getStartNode()&&this.getEndNode()?new goog.dom.SavedCaretRange(this):null};goog.dom.AbstractRange.prototype.collapse=goog.abstractMethod;
goog.dom.RangeIterator=function(a,b){goog.dom.TagIterator.call(this,a,b,!0)};goog.inherits(goog.dom.RangeIterator,goog.dom.TagIterator);goog.dom.RangeIterator.prototype.getStartTextOffset=goog.abstractMethod;goog.dom.RangeIterator.prototype.getEndTextOffset=goog.abstractMethod;goog.dom.RangeIterator.prototype.getStartNode=goog.abstractMethod;goog.dom.RangeIterator.prototype.getEndNode=goog.abstractMethod;goog.dom.RangeIterator.prototype.isLast=goog.abstractMethod;goog.dom.TextRangeIterator=function(a,b,c,d,e){this.endNode_=this.startNode_=null;this.endOffset_=this.startOffset_=0;this.isReversed_=!!e;if(a){this.startNode_=a;this.startOffset_=b;this.endNode_=c;this.endOffset_=d;if(a.nodeType==goog.dom.NodeType.ELEMENT&&"BR"!=a.tagName)if(a=a.childNodes,b=a[b])this.startNode_=b,this.startOffset_=0;else{a.length&&(this.startNode_=goog.array.peek(a));var f=!0}c.nodeType==goog.dom.NodeType.ELEMENT&&((this.endNode_=c.childNodes[d])?this.endOffset_=0:this.endNode_=
c)}goog.dom.RangeIterator.call(this,this.isReversed_?this.endNode_:this.startNode_,this.isReversed_);if(f)try{this.next()}catch(g){if(g!=goog.iter.StopIteration)throw g;}};goog.inherits(goog.dom.TextRangeIterator,goog.dom.RangeIterator);goog.dom.TextRangeIterator.prototype.getStartTextOffset=function(){return this.node.nodeType!=goog.dom.NodeType.TEXT?-1:this.node==this.startNode_?this.startOffset_:0};
goog.dom.TextRangeIterator.prototype.getEndTextOffset=function(){return this.node.nodeType!=goog.dom.NodeType.TEXT?-1:this.node==this.endNode_?this.endOffset_:this.node.nodeValue.length};goog.dom.TextRangeIterator.prototype.getStartNode=function(){return this.startNode_};goog.dom.TextRangeIterator.prototype.setStartNode=function(a){this.isStarted()||this.setPosition(a);this.startNode_=a;this.startOffset_=0};goog.dom.TextRangeIterator.prototype.getEndNode=function(){return this.endNode_};
goog.dom.TextRangeIterator.prototype.setEndNode=function(a){this.endNode_=a;this.endOffset_=0};goog.dom.TextRangeIterator.prototype.isLast=function(){return this.isStarted()&&this.isLastTag_()};goog.dom.TextRangeIterator.prototype.isLastTag_=function(){return this.node!=this.lastNode_()?!1:this.isReversed_?this.startOffset_?!this.isEndTag():this.isStartTag():!this.endOffset_||!this.isStartTag()};goog.dom.TextRangeIterator.prototype.next=function(){if(this.isLast())throw goog.iter.StopIteration;return goog.dom.TextRangeIterator.superClass_.next.call(this)};
goog.dom.TextRangeIterator.prototype.lastNode_=function(){return this.isReversed_?this.startNode_:this.endNode_};goog.dom.TextRangeIterator.prototype.skipTag=function(){goog.dom.TextRangeIterator.superClass_.skipTag.apply(this);if(goog.dom.contains(this.node,this.lastNode_()))throw goog.iter.StopIteration;};
goog.dom.TextRangeIterator.prototype.copyFrom=function(a){this.startNode_=a.startNode_;this.endNode_=a.endNode_;this.startOffset_=a.startOffset_;this.endOffset_=a.endOffset_;this.isReversed_=a.isReversed_;goog.dom.TextRangeIterator.superClass_.copyFrom.call(this,a)};goog.dom.TextRangeIterator.prototype.clone=function(){var a=new goog.dom.TextRangeIterator(this.startNode_,this.startOffset_,this.endNode_,this.endOffset_,this.isReversed_);a.copyFrom(this);return a};goog.dom.RangeEndpoint={START:1,END:0};goog.string.StringBuffer=function(a,b){null!=a&&this.append.apply(this,arguments)};goog.string.StringBuffer.prototype.buffer_="";goog.string.StringBuffer.prototype.set=function(a){this.buffer_=""+a};goog.string.StringBuffer.prototype.append=function(a,b,c){this.buffer_+=String(a);if(null!=b)for(var d=1;d<arguments.length;d++)this.buffer_+=arguments[d];return this};goog.string.StringBuffer.prototype.clear=function(){this.buffer_=""};goog.string.StringBuffer.prototype.getLength=function(){return this.buffer_.length};
goog.string.StringBuffer.prototype.toString=function(){return this.buffer_};goog.dom.browserrange={};goog.dom.browserrange.AbstractRange=function(){};goog.dom.browserrange.AbstractRange.prototype.clone=goog.abstractMethod;goog.dom.browserrange.AbstractRange.prototype.getBrowserRange=goog.abstractMethod;goog.dom.browserrange.AbstractRange.prototype.getContainer=goog.abstractMethod;goog.dom.browserrange.AbstractRange.prototype.getStartNode=goog.abstractMethod;goog.dom.browserrange.AbstractRange.prototype.getStartOffset=goog.abstractMethod;
goog.dom.browserrange.AbstractRange.prototype.getStartPosition=function(){return this.getPosition_(!0)};goog.dom.browserrange.AbstractRange.prototype.getEndNode=goog.abstractMethod;goog.dom.browserrange.AbstractRange.prototype.getEndOffset=goog.abstractMethod;goog.dom.browserrange.AbstractRange.prototype.getEndPosition=function(){return this.getPosition_(!1)};
goog.dom.browserrange.AbstractRange.prototype.getPosition_=function(a){goog.asserts.assert(this.range_.getClientRects,"Getting selection coordinates is not supported.");var b=this.range_.getClientRects();return b.length?(b=a?b[0]:goog.array.peek(b),new goog.math.Coordinate(a?b.left:b.right,a?b.top:b.bottom)):null};goog.dom.browserrange.AbstractRange.prototype.compareBrowserRangeEndpoints=goog.abstractMethod;
goog.dom.browserrange.AbstractRange.prototype.containsRange=function(a,b){b=b&&!a.isCollapsed();a=a.getBrowserRange();var c=goog.dom.RangeEndpoint.START,d=goog.dom.RangeEndpoint.END;try{return b?0<=this.compareBrowserRangeEndpoints(a,d,c)&&0>=this.compareBrowserRangeEndpoints(a,c,d):0<=this.compareBrowserRangeEndpoints(a,d,d)&&0>=this.compareBrowserRangeEndpoints(a,c,c)}catch(e){if(!goog.userAgent.IE)throw e;return!1}};
goog.dom.browserrange.AbstractRange.prototype.containsNode=function(a,b){return this.containsRange(goog.dom.browserrange.createRangeFromNodeContents(a),b)};goog.dom.browserrange.AbstractRange.prototype.isCollapsed=goog.abstractMethod;goog.dom.browserrange.AbstractRange.prototype.getText=goog.abstractMethod;
goog.dom.browserrange.AbstractRange.prototype.getHtmlFragment=function(){var a=new goog.string.StringBuffer;goog.iter.forEach(this,function(b,c,d){b.nodeType==goog.dom.NodeType.TEXT?a.append(goog.string.htmlEscape(b.nodeValue.substring(d.getStartTextOffset(),d.getEndTextOffset()))):b.nodeType==goog.dom.NodeType.ELEMENT&&(d.isEndTag()?goog.dom.canHaveChildren(b)&&a.append("</"+b.tagName+">"):(c=b.cloneNode(!1),c=goog.dom.getOuterHtml(c),goog.userAgent.IE&&"LI"==b.tagName?a.append(c):(b=c.lastIndexOf("<"),
a.append(b?c.substr(0,b):c))))},this);return a.toString()};goog.dom.browserrange.AbstractRange.prototype.getValidHtml=goog.abstractMethod;goog.dom.browserrange.AbstractRange.prototype.__iterator__=function(a){return new goog.dom.TextRangeIterator(this.getStartNode(),this.getStartOffset(),this.getEndNode(),this.getEndOffset())};goog.dom.browserrange.AbstractRange.prototype.select=goog.abstractMethod;goog.dom.browserrange.AbstractRange.prototype.removeContents=goog.abstractMethod;
goog.dom.browserrange.AbstractRange.prototype.surroundContents=goog.abstractMethod;goog.dom.browserrange.AbstractRange.prototype.insertNode=goog.abstractMethod;goog.dom.browserrange.AbstractRange.prototype.surroundWithNodes=goog.abstractMethod;goog.dom.browserrange.AbstractRange.prototype.collapse=goog.abstractMethod;goog.dom.browserrange.W3cRange=function(a){this.range_=a};goog.inherits(goog.dom.browserrange.W3cRange,goog.dom.browserrange.AbstractRange);
goog.dom.browserrange.W3cRange.getBrowserRangeForNode=function(a){var b=goog.dom.getOwnerDocument(a).createRange();if(a.nodeType==goog.dom.NodeType.TEXT)b.setStart(a,0),b.setEnd(a,a.length);else if(goog.dom.browserrange.canContainRangeEndpoint(a)){for(var c,d=a;(c=d.firstChild)&&goog.dom.browserrange.canContainRangeEndpoint(c);)d=c;b.setStart(d,0);for(d=a;(c=d.lastChild)&&goog.dom.browserrange.canContainRangeEndpoint(c);)d=c;b.setEnd(d,d.nodeType==goog.dom.NodeType.ELEMENT?d.childNodes.length:d.length)}else c=
a.parentNode,a=goog.array.indexOf(c.childNodes,a),b.setStart(c,a),b.setEnd(c,a+1);return b};goog.dom.browserrange.W3cRange.getBrowserRangeForNodes=function(a,b,c,d){var e=goog.dom.getOwnerDocument(a).createRange();e.setStart(a,b);e.setEnd(c,d);return e};goog.dom.browserrange.W3cRange.createFromNodeContents=function(a){return new goog.dom.browserrange.W3cRange(goog.dom.browserrange.W3cRange.getBrowserRangeForNode(a))};
goog.dom.browserrange.W3cRange.createFromNodes=function(a,b,c,d){return new goog.dom.browserrange.W3cRange(goog.dom.browserrange.W3cRange.getBrowserRangeForNodes(a,b,c,d))};goog.dom.browserrange.W3cRange.prototype.clone=function(){return new this.constructor(this.range_.cloneRange())};goog.dom.browserrange.W3cRange.prototype.getBrowserRange=function(){return this.range_};goog.dom.browserrange.W3cRange.prototype.getContainer=function(){return this.range_.commonAncestorContainer};
goog.dom.browserrange.W3cRange.prototype.getStartNode=function(){return this.range_.startContainer};goog.dom.browserrange.W3cRange.prototype.getStartOffset=function(){return this.range_.startOffset};goog.dom.browserrange.W3cRange.prototype.getEndNode=function(){return this.range_.endContainer};goog.dom.browserrange.W3cRange.prototype.getEndOffset=function(){return this.range_.endOffset};
goog.dom.browserrange.W3cRange.prototype.compareBrowserRangeEndpoints=function(a,b,c){return this.range_.compareBoundaryPoints(c==goog.dom.RangeEndpoint.START?b==goog.dom.RangeEndpoint.START?goog.global.Range.START_TO_START:goog.global.Range.START_TO_END:b==goog.dom.RangeEndpoint.START?goog.global.Range.END_TO_START:goog.global.Range.END_TO_END,a)};goog.dom.browserrange.W3cRange.prototype.isCollapsed=function(){return this.range_.collapsed};goog.dom.browserrange.W3cRange.prototype.getText=function(){return this.range_.toString()};
goog.dom.browserrange.W3cRange.prototype.getValidHtml=function(){var a=goog.dom.getDomHelper(this.range_.startContainer).createDom("DIV");a.appendChild(this.range_.cloneContents());a=a.innerHTML;if(goog.string.startsWith(a,"<")||!this.isCollapsed()&&!goog.string.contains(a,"<"))return a;var b=this.getContainer();b=b.nodeType==goog.dom.NodeType.ELEMENT?b:b.parentNode;return goog.dom.getOuterHtml(b.cloneNode(!1)).replace(">",">"+a)};
goog.dom.browserrange.W3cRange.prototype.select=function(a){var b=goog.dom.getWindow(goog.dom.getOwnerDocument(this.getStartNode()));this.selectInternal(b.getSelection(),a)};goog.dom.browserrange.W3cRange.prototype.selectInternal=function(a,b){a.removeAllRanges();a.addRange(this.range_)};
goog.dom.browserrange.W3cRange.prototype.removeContents=function(){var a=this.range_;a.extractContents();if(a.startContainer.hasChildNodes()){var b=a.startContainer.childNodes[a.startOffset];if(b){var c=b.previousSibling;""==goog.dom.getRawTextContent(b)&&goog.dom.removeNode(b);c&&""==goog.dom.getRawTextContent(c)&&goog.dom.removeNode(c)}}if(goog.userAgent.EDGE_OR_IE){b=this.getStartNode();c=this.getStartOffset();var d=this.getEndNode(),e=this.getEndOffset(),f=b.nextSibling;b==d&&b.parentNode&&b.nodeType==
goog.dom.NodeType.TEXT&&f&&f.nodeType==goog.dom.NodeType.TEXT&&(b.nodeValue+=f.nodeValue,goog.dom.removeNode(f),a.setStart(b,c),a.setEnd(d,e))}};goog.dom.browserrange.W3cRange.prototype.surroundContents=function(a){this.range_.surroundContents(a);return a};goog.dom.browserrange.W3cRange.prototype.insertNode=function(a,b){var c=this.range_.cloneRange();c.collapse(b);c.insertNode(a);c.detach();return a};
goog.dom.browserrange.W3cRange.prototype.surroundWithNodes=function(a,b){var c=goog.dom.getWindow(goog.dom.getOwnerDocument(this.getStartNode()));if(c=goog.dom.Range.createFromWindow(c))var d=c.getStartNode(),e=c.getEndNode(),f=c.getStartOffset(),g=c.getEndOffset();var h=this.range_.cloneRange(),k=this.range_.cloneRange();h.collapse(!1);k.collapse(!0);h.insertNode(b);k.insertNode(a);h.detach();k.detach();if(c){if(d.nodeType==goog.dom.NodeType.TEXT)for(;f>d.length;){f-=d.length;do d=d.nextSibling;
while(d==a||d==b)}if(e.nodeType==goog.dom.NodeType.TEXT)for(;g>e.length;){g-=e.length;do e=e.nextSibling;while(e==a||e==b)}goog.dom.Range.createFromNodes(d,f,e,g).select()}};goog.dom.browserrange.W3cRange.prototype.collapse=function(a){this.range_.collapse(a)};goog.dom.browserrange.GeckoRange=function(a){goog.dom.browserrange.W3cRange.call(this,a)};goog.inherits(goog.dom.browserrange.GeckoRange,goog.dom.browserrange.W3cRange);goog.dom.browserrange.GeckoRange.createFromNodeContents=function(a){return new goog.dom.browserrange.GeckoRange(goog.dom.browserrange.W3cRange.getBrowserRangeForNode(a))};
goog.dom.browserrange.GeckoRange.createFromNodes=function(a,b,c,d){return new goog.dom.browserrange.GeckoRange(goog.dom.browserrange.W3cRange.getBrowserRangeForNodes(a,b,c,d))};goog.dom.browserrange.GeckoRange.prototype.selectInternal=function(a,b){!b||this.isCollapsed()?goog.dom.browserrange.GeckoRange.superClass_.selectInternal.call(this,a,b):(a.collapse(this.getEndNode(),this.getEndOffset()),a.extend(this.getStartNode(),this.getStartOffset()))};goog.dom.browserrange.IeRange=function(a,b){this.endNode_=this.startNode_=this.parentNode_=null;this.endOffset_=this.startOffset_=-1;this.range_=a;this.doc_=b};goog.inherits(goog.dom.browserrange.IeRange,goog.dom.browserrange.AbstractRange);goog.dom.browserrange.IeRange.logger_=goog.log.getLogger("goog.dom.browserrange.IeRange");
goog.dom.browserrange.IeRange.getBrowserRangeForNode_=function(a){var b=goog.dom.getOwnerDocument(a).body.createTextRange();if(a.nodeType==goog.dom.NodeType.ELEMENT)b.moveToElementText(a),goog.dom.browserrange.canContainRangeEndpoint(a)&&!a.childNodes.length&&b.collapse(!1);else{for(var c=0,d=a;d=d.previousSibling;){var e=d.nodeType;if(e==goog.dom.NodeType.TEXT)c+=d.length;else if(e==goog.dom.NodeType.ELEMENT){b.moveToElementText(d);break}}d||b.moveToElementText(a.parentNode);b.collapse(!d);c&&b.move("character",
c);b.moveEnd("character",a.length)}return b};
goog.dom.browserrange.IeRange.getBrowserRangeForNodes_=function(a,b,c,d){var e=!1;a.nodeType==goog.dom.NodeType.ELEMENT&&(b>a.childNodes.length&&goog.log.error(goog.dom.browserrange.IeRange.logger_,"Cannot have startOffset > startNode child count"),b=a.childNodes[b],e=!b,a=b||a.lastChild||a,b=0);var f=goog.dom.browserrange.IeRange.getBrowserRangeForNode_(a);b&&f.move("character",b);if(a==c&&b==d)return f.collapse(!0),f;e&&f.collapse(!1);e=!1;c.nodeType==goog.dom.NodeType.ELEMENT&&(d>c.childNodes.length&&
goog.log.error(goog.dom.browserrange.IeRange.logger_,"Cannot have endOffset > endNode child count"),c=(b=c.childNodes[d])||c.lastChild||c,d=0,e=!b);a=goog.dom.browserrange.IeRange.getBrowserRangeForNode_(c);a.collapse(!e);d&&a.moveEnd("character",d);f.setEndPoint("EndToEnd",a);return f};
goog.dom.browserrange.IeRange.createFromNodeContents=function(a){var b=new goog.dom.browserrange.IeRange(goog.dom.browserrange.IeRange.getBrowserRangeForNode_(a),goog.dom.getOwnerDocument(a));if(goog.dom.browserrange.canContainRangeEndpoint(a)){for(var c,d=a;(c=d.firstChild)&&goog.dom.browserrange.canContainRangeEndpoint(c);)d=c;b.startNode_=d;b.startOffset_=0;for(d=a;(c=d.lastChild)&&goog.dom.browserrange.canContainRangeEndpoint(c);)d=c;b.endNode_=d;b.endOffset_=d.nodeType==goog.dom.NodeType.ELEMENT?
d.childNodes.length:d.length;b.parentNode_=a}else b.startNode_=b.endNode_=b.parentNode_=a.parentNode,b.startOffset_=goog.array.indexOf(b.parentNode_.childNodes,a),b.endOffset_=b.startOffset_+1;return b};goog.dom.browserrange.IeRange.createFromNodes=function(a,b,c,d){var e=new goog.dom.browserrange.IeRange(goog.dom.browserrange.IeRange.getBrowserRangeForNodes_(a,b,c,d),goog.dom.getOwnerDocument(a));e.startNode_=a;e.startOffset_=b;e.endNode_=c;e.endOffset_=d;return e};
goog.dom.browserrange.IeRange.prototype.clone=function(){var a=new goog.dom.browserrange.IeRange(this.range_.duplicate(),this.doc_);a.parentNode_=this.parentNode_;a.startNode_=this.startNode_;a.endNode_=this.endNode_;return a};goog.dom.browserrange.IeRange.prototype.getBrowserRange=function(){return this.range_};goog.dom.browserrange.IeRange.prototype.clearCachedValues_=function(){this.parentNode_=this.startNode_=this.endNode_=null;this.startOffset_=this.endOffset_=-1};
goog.dom.browserrange.IeRange.prototype.getContainer=function(){if(!this.parentNode_){var a=this.range_.text,b=this.range_.duplicate(),c=a.replace(/ +$/,"");(c=a.length-c.length)&&b.moveEnd("character",-c);c=b.parentElement();b=goog.string.stripNewlines(b.htmlText).length;if(this.isCollapsed()&&0<b)return this.parentNode_=c;for(;b>goog.string.stripNewlines(c.outerHTML).length;)c=c.parentNode;for(;1==c.childNodes.length&&c.innerText==goog.dom.browserrange.IeRange.getNodeText_(c.firstChild)&&goog.dom.browserrange.canContainRangeEndpoint(c.firstChild);)c=
c.firstChild;0==a.length&&(c=this.findDeepestContainer_(c));this.parentNode_=c}return this.parentNode_};
goog.dom.browserrange.IeRange.prototype.findDeepestContainer_=function(a){for(var b=a.childNodes,c=0,d=b.length;c<d;c++){var e=b[c];if(goog.dom.browserrange.canContainRangeEndpoint(e)){var f=goog.dom.browserrange.IeRange.getBrowserRangeForNode_(e),g=goog.dom.RangeEndpoint.START,h=goog.dom.RangeEndpoint.END,k=f.htmlText!=e.outerHTML;if(this.isCollapsed()&&k?0<=this.compareBrowserRangeEndpoints(f,g,g)&&0>=this.compareBrowserRangeEndpoints(f,g,h):this.range_.inRange(f))return this.findDeepestContainer_(e)}}return a};
goog.dom.browserrange.IeRange.prototype.getStartNode=function(){this.startNode_||(this.startNode_=this.getEndpointNode_(goog.dom.RangeEndpoint.START),this.isCollapsed()&&(this.endNode_=this.startNode_));return this.startNode_};goog.dom.browserrange.IeRange.prototype.getStartOffset=function(){0>this.startOffset_&&(this.startOffset_=this.getOffset_(goog.dom.RangeEndpoint.START),this.isCollapsed()&&(this.endOffset_=this.startOffset_));return this.startOffset_};
goog.dom.browserrange.IeRange.prototype.getEndNode=function(){if(this.isCollapsed())return this.getStartNode();this.endNode_||(this.endNode_=this.getEndpointNode_(goog.dom.RangeEndpoint.END));return this.endNode_};goog.dom.browserrange.IeRange.prototype.getEndOffset=function(){if(this.isCollapsed())return this.getStartOffset();0>this.endOffset_&&(this.endOffset_=this.getOffset_(goog.dom.RangeEndpoint.END),this.isCollapsed()&&(this.startOffset_=this.endOffset_));return this.endOffset_};
goog.dom.browserrange.IeRange.prototype.compareBrowserRangeEndpoints=function(a,b,c){return this.range_.compareEndPoints((b==goog.dom.RangeEndpoint.START?"Start":"End")+"To"+(c==goog.dom.RangeEndpoint.START?"Start":"End"),a)};
goog.dom.browserrange.IeRange.prototype.getEndpointNode_=function(a,b){b=b||this.getContainer();if(!b||!b.firstChild)return b;for(var c=goog.dom.RangeEndpoint.START,d=goog.dom.RangeEndpoint.END,e=a==c,f=0,g=b.childNodes.length;f<g;f++){var h=e?f:g-f-1,k=b.childNodes[h];try{var l=goog.dom.browserrange.createRangeFromNodeContents(k)}catch(n){continue}var m=l.getBrowserRange();if(this.isCollapsed())if(!goog.dom.browserrange.canContainRangeEndpoint(k)){if(0==this.compareBrowserRangeEndpoints(m,c,c)){this.startOffset_=
this.endOffset_=h;break}}else{if(l.containsRange(this))return this.getEndpointNode_(a,k)}else{if(this.containsRange(l)){if(!goog.dom.browserrange.canContainRangeEndpoint(k)){e?this.startOffset_=h:this.endOffset_=h+1;break}return this.getEndpointNode_(a,k)}if(0>this.compareBrowserRangeEndpoints(m,c,d)&&0<this.compareBrowserRangeEndpoints(m,d,c))return this.getEndpointNode_(a,k)}}return b};
goog.dom.browserrange.IeRange.prototype.compareNodeEndpoints_=function(a,b,c){return this.range_.compareEndPoints((b==goog.dom.RangeEndpoint.START?"Start":"End")+"To"+(c==goog.dom.RangeEndpoint.START?"Start":"End"),goog.dom.browserrange.createRangeFromNodeContents(a).getBrowserRange())};
goog.dom.browserrange.IeRange.prototype.getOffset_=function(a,b){var c=a==goog.dom.RangeEndpoint.START;b=b||(c?this.getStartNode():this.getEndNode());if(b.nodeType==goog.dom.NodeType.ELEMENT){b=b.childNodes;for(var d=b.length,e=c?1:-1,f=c?0:d-1;0<=f&&f<d;f+=e){var g=b[f];if(!goog.dom.browserrange.canContainRangeEndpoint(g)&&0==this.compareNodeEndpoints_(g,a,a))return c?f:f+1}return-1==f?0:f}a=this.range_.duplicate();d=goog.dom.browserrange.IeRange.getBrowserRangeForNode_(b);a.setEndPoint(c?"EndToEnd":
"StartToStart",d);a=a.text.length;return c?b.length-a:a};goog.dom.browserrange.IeRange.getNodeText_=function(a){return a.nodeType==goog.dom.NodeType.TEXT?a.nodeValue:a.innerText};goog.dom.browserrange.IeRange.prototype.isRangeInDocument=function(){var a=this.doc_.body.createTextRange();a.moveToElementText(this.doc_.body);return this.containsRange(new goog.dom.browserrange.IeRange(a,this.doc_),!0)};
goog.dom.browserrange.IeRange.prototype.isCollapsed=function(){return 0==this.range_.compareEndPoints("StartToEnd",this.range_)};goog.dom.browserrange.IeRange.prototype.getText=function(){return this.range_.text};goog.dom.browserrange.IeRange.prototype.getValidHtml=function(){return this.range_.htmlText};goog.dom.browserrange.IeRange.prototype.select=function(a){this.range_.select()};
goog.dom.browserrange.IeRange.prototype.removeContents=function(){if(!this.isCollapsed()&&this.range_.htmlText){var a=this.getStartNode(),b=this.getEndNode(),c=this.range_.text,d=this.range_.duplicate();d.moveStart("character",1);d.moveStart("character",-1);d.text==c&&(this.range_=d);this.range_.text="";this.clearCachedValues_();c=this.getStartNode();d=this.getStartOffset();try{var e=a.nextSibling;a==b&&a.parentNode&&a.nodeType==goog.dom.NodeType.TEXT&&e&&e.nodeType==goog.dom.NodeType.TEXT&&(a.nodeValue+=
e.nodeValue,goog.dom.removeNode(e),this.range_=goog.dom.browserrange.IeRange.getBrowserRangeForNode_(c),this.range_.move("character",d),this.clearCachedValues_())}catch(f){}}};goog.dom.browserrange.IeRange.getDomHelper_=function(a){return goog.dom.getDomHelper(a.parentElement())};
goog.dom.browserrange.IeRange.pasteElement_=function(a,b,c){c=c||goog.dom.browserrange.IeRange.getDomHelper_(a);var d,e=d=b.id;d||(d=b.id=goog.string.createUniqueString());a.pasteHTML(b.outerHTML);(b=c.getElement(d))&&(e||b.removeAttribute("id"));return b};
goog.dom.browserrange.IeRange.prototype.surroundContents=function(a){goog.dom.removeNode(a);a.innerHTML=this.range_.htmlText;(a=goog.dom.browserrange.IeRange.pasteElement_(this.range_,a))&&this.range_.moveToElementText(a);this.clearCachedValues_();return a};
goog.dom.browserrange.IeRange.insertNode_=function(a,b,c,d){d=d||goog.dom.browserrange.IeRange.getDomHelper_(a);if(b.nodeType!=goog.dom.NodeType.ELEMENT){var e=!0;b=d.createDom("DIV",null,b)}a.collapse(c);b=goog.dom.browserrange.IeRange.pasteElement_(a,b,d);e&&(a=b.firstChild,d.flattenElement(b),b=a);return b};goog.dom.browserrange.IeRange.prototype.insertNode=function(a,b){a=goog.dom.browserrange.IeRange.insertNode_(this.range_.duplicate(),a,b);this.clearCachedValues_();return a};
goog.dom.browserrange.IeRange.prototype.surroundWithNodes=function(a,b){var c=this.range_.duplicate(),d=this.range_.duplicate();goog.dom.browserrange.IeRange.insertNode_(c,a,!0);goog.dom.browserrange.IeRange.insertNode_(d,b,!1);this.clearCachedValues_()};goog.dom.browserrange.IeRange.prototype.collapse=function(a){this.range_.collapse(a);a?(this.endNode_=this.startNode_,this.endOffset_=this.startOffset_):(this.startNode_=this.endNode_,this.startOffset_=this.endOffset_)};goog.dom.browserrange.OperaRange=function(a){goog.dom.browserrange.W3cRange.call(this,a)};goog.inherits(goog.dom.browserrange.OperaRange,goog.dom.browserrange.W3cRange);goog.dom.browserrange.OperaRange.createFromNodeContents=function(a){return new goog.dom.browserrange.OperaRange(goog.dom.browserrange.W3cRange.getBrowserRangeForNode(a))};
goog.dom.browserrange.OperaRange.createFromNodes=function(a,b,c,d){return new goog.dom.browserrange.OperaRange(goog.dom.browserrange.W3cRange.getBrowserRangeForNodes(a,b,c,d))};goog.dom.browserrange.OperaRange.prototype.selectInternal=function(a,b){a.collapse(this.getStartNode(),this.getStartOffset());this.getEndNode()==this.getStartNode()&&this.getEndOffset()==this.getStartOffset()||a.extend(this.getEndNode(),this.getEndOffset());0==a.rangeCount&&a.addRange(this.range_)};goog.dom.browserrange.WebKitRange=function(a){goog.dom.browserrange.W3cRange.call(this,a)};goog.inherits(goog.dom.browserrange.WebKitRange,goog.dom.browserrange.W3cRange);goog.dom.browserrange.WebKitRange.createFromNodeContents=function(a){return new goog.dom.browserrange.WebKitRange(goog.dom.browserrange.W3cRange.getBrowserRangeForNode(a))};
goog.dom.browserrange.WebKitRange.createFromNodes=function(a,b,c,d){return new goog.dom.browserrange.WebKitRange(goog.dom.browserrange.W3cRange.getBrowserRangeForNodes(a,b,c,d))};
goog.dom.browserrange.WebKitRange.prototype.compareBrowserRangeEndpoints=function(a,b,c){return goog.userAgent.isVersionOrHigher("528")?goog.dom.browserrange.WebKitRange.superClass_.compareBrowserRangeEndpoints.call(this,a,b,c):this.range_.compareBoundaryPoints(c==goog.dom.RangeEndpoint.START?b==goog.dom.RangeEndpoint.START?goog.global.Range.START_TO_START:goog.global.Range.END_TO_START:b==goog.dom.RangeEndpoint.START?goog.global.Range.START_TO_END:goog.global.Range.END_TO_END,a)};
goog.dom.browserrange.WebKitRange.prototype.selectInternal=function(a,b){b?a.setBaseAndExtent(this.getEndNode(),this.getEndOffset(),this.getStartNode(),this.getStartOffset()):a.setBaseAndExtent(this.getStartNode(),this.getStartOffset(),this.getEndNode(),this.getEndOffset())};goog.dom.browserrange.Error={NOT_IMPLEMENTED:"Not Implemented"};goog.dom.browserrange.createRange=function(a){return goog.dom.BrowserFeature.LEGACY_IE_RANGES?new goog.dom.browserrange.IeRange(a,goog.dom.getOwnerDocument(a.parentElement())):goog.userAgent.WEBKIT?new goog.dom.browserrange.WebKitRange(a):goog.userAgent.GECKO?new goog.dom.browserrange.GeckoRange(a):goog.userAgent.OPERA?new goog.dom.browserrange.OperaRange(a):new goog.dom.browserrange.W3cRange(a)};
goog.dom.browserrange.createRangeFromNodeContents=function(a){return goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)?goog.dom.browserrange.IeRange.createFromNodeContents(a):goog.userAgent.WEBKIT?goog.dom.browserrange.WebKitRange.createFromNodeContents(a):goog.userAgent.GECKO?goog.dom.browserrange.GeckoRange.createFromNodeContents(a):goog.userAgent.OPERA?goog.dom.browserrange.OperaRange.createFromNodeContents(a):goog.dom.browserrange.W3cRange.createFromNodeContents(a)};
goog.dom.browserrange.createRangeFromNodes=function(a,b,c,d){return goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)?goog.dom.browserrange.IeRange.createFromNodes(a,b,c,d):goog.userAgent.WEBKIT?goog.dom.browserrange.WebKitRange.createFromNodes(a,b,c,d):goog.userAgent.GECKO?goog.dom.browserrange.GeckoRange.createFromNodes(a,b,c,d):goog.userAgent.OPERA?goog.dom.browserrange.OperaRange.createFromNodes(a,b,c,d):goog.dom.browserrange.W3cRange.createFromNodes(a,b,c,d)};
goog.dom.browserrange.canContainRangeEndpoint=function(a){return goog.dom.canHaveChildren(a)||a.nodeType==goog.dom.NodeType.TEXT};goog.dom.TextRange=function(){this.endOffset_=this.endNode_=this.startOffset_=this.startNode_=this.browserRangeWrapper_=null;this.isReversed_=!1};goog.inherits(goog.dom.TextRange,goog.dom.AbstractRange);goog.dom.TextRange.createFromBrowserRange=function(a,b){return goog.dom.TextRange.createFromBrowserRangeWrapper_(goog.dom.browserrange.createRange(a),b)};goog.dom.TextRange.createFromBrowserRangeWrapper_=function(a,b){var c=new goog.dom.TextRange;c.browserRangeWrapper_=a;c.isReversed_=!!b;return c};
goog.dom.TextRange.createFromNodeContents=function(a,b){return goog.dom.TextRange.createFromBrowserRangeWrapper_(goog.dom.browserrange.createRangeFromNodeContents(a),b)};
goog.dom.TextRange.createFromNodes=function(a,b,c,d){var e=new goog.dom.TextRange;e.isReversed_=goog.dom.Range.isReversed(a,b,c,d);if(goog.dom.isElement(a)&&!goog.dom.canHaveChildren(a)){var f=a.parentNode;b=goog.array.indexOf(f.childNodes,a);a=f}goog.dom.isElement(c)&&!goog.dom.canHaveChildren(c)&&(f=c.parentNode,d=goog.array.indexOf(f.childNodes,c),c=f);e.isReversed_?(e.startNode_=c,e.startOffset_=d,e.endNode_=a,e.endOffset_=b):(e.startNode_=a,e.startOffset_=b,e.endNode_=c,e.endOffset_=d);return e};
goog.dom.TextRange.prototype.clone=function(){var a=new goog.dom.TextRange;a.browserRangeWrapper_=this.browserRangeWrapper_&&this.browserRangeWrapper_.clone();a.startNode_=this.startNode_;a.startOffset_=this.startOffset_;a.endNode_=this.endNode_;a.endOffset_=this.endOffset_;a.isReversed_=this.isReversed_;return a};goog.dom.TextRange.prototype.getType=function(){return goog.dom.RangeType.TEXT};goog.dom.TextRange.prototype.getBrowserRangeObject=function(){return this.getBrowserRangeWrapper_().getBrowserRange()};
goog.dom.TextRange.prototype.setBrowserRangeObject=function(a){if(goog.dom.AbstractRange.isNativeControlRange(a))return!1;this.browserRangeWrapper_=goog.dom.browserrange.createRange(a);this.clearCachedValues_();return!0};goog.dom.TextRange.prototype.clearCachedValues_=function(){this.startNode_=this.startOffset_=this.endNode_=this.endOffset_=null};goog.dom.TextRange.prototype.getTextRangeCount=function(){return 1};goog.dom.TextRange.prototype.getTextRange=function(a){return this};
goog.dom.TextRange.prototype.getBrowserRangeWrapper_=function(){return this.browserRangeWrapper_||(this.browserRangeWrapper_=goog.dom.browserrange.createRangeFromNodes(this.getStartNode(),this.getStartOffset(),this.getEndNode(),this.getEndOffset()))};goog.dom.TextRange.prototype.getContainer=function(){return this.getBrowserRangeWrapper_().getContainer()};goog.dom.TextRange.prototype.getStartNode=function(){return this.startNode_||(this.startNode_=this.getBrowserRangeWrapper_().getStartNode())};
goog.dom.TextRange.prototype.getStartOffset=function(){return null!=this.startOffset_?this.startOffset_:this.startOffset_=this.getBrowserRangeWrapper_().getStartOffset()};goog.dom.TextRange.prototype.getStartPosition=function(){return this.getBrowserRangeWrapper_().getStartPosition()};goog.dom.TextRange.prototype.getEndNode=function(){return this.endNode_||(this.endNode_=this.getBrowserRangeWrapper_().getEndNode())};
goog.dom.TextRange.prototype.getEndOffset=function(){return null!=this.endOffset_?this.endOffset_:this.endOffset_=this.getBrowserRangeWrapper_().getEndOffset()};goog.dom.TextRange.prototype.getEndPosition=function(){return this.getBrowserRangeWrapper_().getEndPosition()};goog.dom.TextRange.prototype.moveToNodes=function(a,b,c,d,e){this.startNode_=a;this.startOffset_=b;this.endNode_=c;this.endOffset_=d;this.isReversed_=e;this.browserRangeWrapper_=null};goog.dom.TextRange.prototype.isReversed=function(){return this.isReversed_};
goog.dom.TextRange.prototype.containsRange=function(a,b){var c=a.getType();return c==goog.dom.RangeType.TEXT?this.getBrowserRangeWrapper_().containsRange(a.getBrowserRangeWrapper_(),b):c==goog.dom.RangeType.CONTROL?(a=a.getElements(),(b?goog.array.some:goog.array.every)(a,function(a){return this.containsNode(a,b)},this)):!1};goog.dom.TextRange.prototype.containsNode=function(a,b){return this.containsRange(goog.dom.TextRange.createFromNodeContents(a),b)};
goog.dom.TextRange.isAttachedNode=function(a){if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){var b=!1;try{b=a.parentNode}catch(c){}return!!b}return goog.dom.contains(a.ownerDocument.body,a)};goog.dom.TextRange.prototype.isRangeInDocument=function(){return(!this.startNode_||goog.dom.TextRange.isAttachedNode(this.startNode_))&&(!this.endNode_||goog.dom.TextRange.isAttachedNode(this.endNode_))&&(!(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9))||this.getBrowserRangeWrapper_().isRangeInDocument())};
goog.dom.TextRange.prototype.isCollapsed=function(){return this.getBrowserRangeWrapper_().isCollapsed()};goog.dom.TextRange.prototype.getText=function(){return this.getBrowserRangeWrapper_().getText()};goog.dom.TextRange.prototype.getHtmlFragment=function(){return this.getBrowserRangeWrapper_().getHtmlFragment()};goog.dom.TextRange.prototype.getValidHtml=function(){return this.getBrowserRangeWrapper_().getValidHtml()};
goog.dom.TextRange.prototype.getPastableHtml=function(){var a=this.getValidHtml();if(a.match(/^\s*<td\b/i))a="<table><tbody><tr>"+a+"</tr></tbody></table>";else if(a.match(/^\s*<tr\b/i))a="<table><tbody>"+a+"</tbody></table>";else if(a.match(/^\s*<tbody\b/i))a="<table>"+a+"</table>";else if(a.match(/^\s*<li\b/i)){for(var b=this.getContainer(),c="UL";b;){if("OL"==b.tagName){c="OL";break}else if("UL"==b.tagName)break;b=b.parentNode}a=goog.string.buildString("<",c,">",a,"</",c,">")}return a};
goog.dom.TextRange.prototype.__iterator__=function(a){return new goog.dom.TextRangeIterator(this.getStartNode(),this.getStartOffset(),this.getEndNode(),this.getEndOffset())};goog.dom.TextRange.prototype.select=function(){this.getBrowserRangeWrapper_().select(this.isReversed_)};goog.dom.TextRange.prototype.removeContents=function(){this.getBrowserRangeWrapper_().removeContents();this.clearCachedValues_()};
goog.dom.TextRange.prototype.surroundContents=function(a){a=this.getBrowserRangeWrapper_().surroundContents(a);this.clearCachedValues_();return a};goog.dom.TextRange.prototype.insertNode=function(a,b){a=this.getBrowserRangeWrapper_().insertNode(a,b);this.clearCachedValues_();return a};goog.dom.TextRange.prototype.surroundWithNodes=function(a,b){this.getBrowserRangeWrapper_().surroundWithNodes(a,b);this.clearCachedValues_()};goog.dom.TextRange.prototype.saveUsingDom=function(){return new goog.dom.DomSavedTextRange_(this)};
goog.dom.TextRange.prototype.collapse=function(a){a=this.isReversed()?!a:a;this.browserRangeWrapper_&&this.browserRangeWrapper_.collapse(a);a?(this.endNode_=this.startNode_,this.endOffset_=this.startOffset_):(this.startNode_=this.endNode_,this.startOffset_=this.endOffset_);this.isReversed_=!1};goog.dom.DomSavedTextRange_=function(a){goog.dom.SavedRange.call(this);this.anchorNode_=a.getAnchorNode();this.anchorOffset_=a.getAnchorOffset();this.focusNode_=a.getFocusNode();this.focusOffset_=a.getFocusOffset()};
goog.inherits(goog.dom.DomSavedTextRange_,goog.dom.SavedRange);goog.dom.DomSavedTextRange_.prototype.restoreInternal=function(){return goog.dom.Range.createFromNodes(this.anchorNode_,this.anchorOffset_,this.focusNode_,this.focusOffset_)};goog.dom.DomSavedTextRange_.prototype.disposeInternal=function(){goog.dom.DomSavedTextRange_.superClass_.disposeInternal.call(this);this.focusNode_=this.anchorNode_=null};goog.dom.AbstractMultiRange=function(){};goog.inherits(goog.dom.AbstractMultiRange,goog.dom.AbstractRange);goog.dom.AbstractMultiRange.prototype.containsRange=function(a,b){var c=this.getTextRanges();a=a.getTextRanges();return(b?goog.array.some:goog.array.every)(a,function(a){return goog.array.some(c,function(c){return c.containsRange(a,b)})})};goog.dom.AbstractMultiRange.prototype.containsNode=function(a,b){return this.containsRange(goog.dom.TextRange.createFromNodeContents(a),b)};
goog.dom.AbstractMultiRange.prototype.insertNode=function(a,b){b?goog.dom.insertSiblingBefore(a,this.getStartNode()):goog.dom.insertSiblingAfter(a,this.getEndNode());return a};goog.dom.AbstractMultiRange.prototype.surroundWithNodes=function(a,b){this.insertNode(a,!0);this.insertNode(b,!1)};goog.dom.ControlRange=function(){this.sortedElements_=this.elements_=this.range_=null};goog.inherits(goog.dom.ControlRange,goog.dom.AbstractMultiRange);goog.dom.ControlRange.createFromBrowserRange=function(a){var b=new goog.dom.ControlRange;b.range_=a;return b};goog.dom.ControlRange.createFromElements=function(a){for(var b=goog.dom.getOwnerDocument(arguments[0]).body.createControlRange(),c=0,d=arguments.length;c<d;c++)b.addElement(arguments[c]);return goog.dom.ControlRange.createFromBrowserRange(b)};
goog.dom.ControlRange.prototype.clearCachedValues_=function(){this.sortedElements_=this.elements_=null};goog.dom.ControlRange.prototype.clone=function(){return goog.dom.ControlRange.createFromElements.apply(this,this.getElements())};goog.dom.ControlRange.prototype.getType=function(){return goog.dom.RangeType.CONTROL};goog.dom.ControlRange.prototype.getBrowserRangeObject=function(){return this.range_||document.body.createControlRange()};
goog.dom.ControlRange.prototype.setBrowserRangeObject=function(a){if(!goog.dom.AbstractRange.isNativeControlRange(a))return!1;this.range_=a;return!0};goog.dom.ControlRange.prototype.getTextRangeCount=function(){return this.range_?this.range_.length:0};goog.dom.ControlRange.prototype.getTextRange=function(a){return goog.dom.TextRange.createFromNodeContents(this.range_.item(a))};goog.dom.ControlRange.prototype.getContainer=function(){return goog.dom.findCommonAncestor.apply(null,this.getElements())};
goog.dom.ControlRange.prototype.getStartNode=function(){return this.getSortedElements()[0]};goog.dom.ControlRange.prototype.getStartOffset=function(){return 0};goog.dom.ControlRange.prototype.getEndNode=function(){var a=this.getSortedElements(),b=goog.array.peek(a);return goog.array.find(a,function(a){return goog.dom.contains(a,b)})};goog.dom.ControlRange.prototype.getEndOffset=function(){return this.getEndNode().childNodes.length};
goog.dom.ControlRange.prototype.getElements=function(){if(!this.elements_&&(this.elements_=[],this.range_))for(var a=0;a<this.range_.length;a++)this.elements_.push(this.range_.item(a));return this.elements_};goog.dom.ControlRange.prototype.getSortedElements=function(){this.sortedElements_||(this.sortedElements_=this.getElements().concat(),this.sortedElements_.sort(function(a,b){return a.sourceIndex-b.sourceIndex}));return this.sortedElements_};
goog.dom.ControlRange.prototype.isRangeInDocument=function(){var a=!1;try{a=goog.array.every(this.getElements(),function(a){return goog.userAgent.IE?!!a.parentNode:goog.dom.contains(a.ownerDocument.body,a)})}catch(b){}return a};goog.dom.ControlRange.prototype.isCollapsed=function(){return!this.range_||!this.range_.length};goog.dom.ControlRange.prototype.getText=function(){return""};goog.dom.ControlRange.prototype.getHtmlFragment=function(){return goog.array.map(this.getSortedElements(),goog.dom.getOuterHtml).join("")};
goog.dom.ControlRange.prototype.getValidHtml=function(){return this.getHtmlFragment()};goog.dom.ControlRange.prototype.getPastableHtml=goog.dom.ControlRange.prototype.getValidHtml;goog.dom.ControlRange.prototype.__iterator__=function(a){return new goog.dom.ControlRangeIterator(this)};goog.dom.ControlRange.prototype.select=function(){this.range_&&this.range_.select()};
goog.dom.ControlRange.prototype.removeContents=function(){if(this.range_){for(var a=[],b=0,c=this.range_.length;b<c;b++)a.push(this.range_.item(b));goog.array.forEach(a,goog.dom.removeNode);this.collapse(!1)}};goog.dom.ControlRange.prototype.replaceContentsWithNode=function(a){a=this.insertNode(a,!0);this.isCollapsed()||this.removeContents();return a};goog.dom.ControlRange.prototype.saveUsingDom=function(){return new goog.dom.DomSavedControlRange_(this)};
goog.dom.ControlRange.prototype.collapse=function(a){this.range_=null;this.clearCachedValues_()};goog.dom.DomSavedControlRange_=function(a){this.elements_=a.getElements()};goog.inherits(goog.dom.DomSavedControlRange_,goog.dom.SavedRange);goog.dom.DomSavedControlRange_.prototype.restoreInternal=function(){for(var a=(this.elements_.length?goog.dom.getOwnerDocument(this.elements_[0]):document).body.createControlRange(),b=0,c=this.elements_.length;b<c;b++)a.addElement(this.elements_[b]);return goog.dom.ControlRange.createFromBrowserRange(a)};
goog.dom.DomSavedControlRange_.prototype.disposeInternal=function(){goog.dom.DomSavedControlRange_.superClass_.disposeInternal.call(this);delete this.elements_};goog.dom.ControlRangeIterator=function(a){this.elements_=this.endNode_=this.startNode_=null;a&&(this.elements_=a.getSortedElements(),this.startNode_=this.elements_.shift(),this.endNode_=goog.array.peek(this.elements_)||this.startNode_);goog.dom.RangeIterator.call(this,this.startNode_,!1)};goog.inherits(goog.dom.ControlRangeIterator,goog.dom.RangeIterator);
goog.dom.ControlRangeIterator.prototype.getStartTextOffset=function(){return 0};goog.dom.ControlRangeIterator.prototype.getEndTextOffset=function(){return 0};goog.dom.ControlRangeIterator.prototype.getStartNode=function(){return this.startNode_};goog.dom.ControlRangeIterator.prototype.getEndNode=function(){return this.endNode_};goog.dom.ControlRangeIterator.prototype.isLast=function(){return!this.depth&&!this.elements_.length};
goog.dom.ControlRangeIterator.prototype.next=function(){if(this.isLast())throw goog.iter.StopIteration;if(!this.depth){var a=this.elements_.shift();this.setPosition(a,goog.dom.TagWalkType.START_TAG,goog.dom.TagWalkType.START_TAG);return a}return goog.dom.ControlRangeIterator.superClass_.next.call(this)};
goog.dom.ControlRangeIterator.prototype.copyFrom=function(a){this.elements_=a.elements_;this.startNode_=a.startNode_;this.endNode_=a.endNode_;goog.dom.ControlRangeIterator.superClass_.copyFrom.call(this,a)};goog.dom.ControlRangeIterator.prototype.clone=function(){var a=new goog.dom.ControlRangeIterator(null);a.copyFrom(this);return a};goog.dom.MultiRange=function(){this.logger_=goog.log.getLogger("goog.dom.MultiRange");this.browserRanges_=[];this.ranges_=[];this.container_=this.sortedRanges_=null};goog.inherits(goog.dom.MultiRange,goog.dom.AbstractMultiRange);goog.dom.MultiRange.createFromBrowserSelection=function(a){for(var b=new goog.dom.MultiRange,c=0,d=a.rangeCount;c<d;c++)b.browserRanges_.push(a.getRangeAt(c));return b};
goog.dom.MultiRange.createFromBrowserRanges=function(a){var b=new goog.dom.MultiRange;b.browserRanges_=goog.array.clone(a);return b};goog.dom.MultiRange.createFromTextRanges=function(a){var b=new goog.dom.MultiRange;b.ranges_=a;b.browserRanges_=goog.array.map(a,function(a){return a.getBrowserRangeObject()});return b};goog.dom.MultiRange.prototype.clearCachedValues_=function(){this.ranges_=[];this.container_=this.sortedRanges_=null};goog.dom.MultiRange.prototype.clone=function(){return goog.dom.MultiRange.createFromBrowserRanges(this.browserRanges_)};
goog.dom.MultiRange.prototype.getType=function(){return goog.dom.RangeType.MULTI};goog.dom.MultiRange.prototype.getBrowserRangeObject=function(){1<this.browserRanges_.length&&goog.log.warning(this.logger_,"getBrowserRangeObject called on MultiRange with more than 1 range");return this.browserRanges_[0]};goog.dom.MultiRange.prototype.setBrowserRangeObject=function(a){return!1};goog.dom.MultiRange.prototype.getTextRangeCount=function(){return this.browserRanges_.length};
goog.dom.MultiRange.prototype.getTextRange=function(a){this.ranges_[a]||(this.ranges_[a]=goog.dom.TextRange.createFromBrowserRange(this.browserRanges_[a]));return this.ranges_[a]};goog.dom.MultiRange.prototype.getContainer=function(){if(!this.container_){for(var a=[],b=0,c=this.getTextRangeCount();b<c;b++)a.push(this.getTextRange(b).getContainer());this.container_=goog.dom.findCommonAncestor.apply(null,a)}return this.container_};
goog.dom.MultiRange.prototype.getSortedRanges=function(){this.sortedRanges_||(this.sortedRanges_=this.getTextRanges(),this.sortedRanges_.sort(function(a,b){var c=a.getStartNode();a=a.getStartOffset();var d=b.getStartNode();b=b.getStartOffset();return c==d&&a==b?0:goog.dom.Range.isReversed(c,a,d,b)?1:-1}));return this.sortedRanges_};goog.dom.MultiRange.prototype.getStartNode=function(){return this.getSortedRanges()[0].getStartNode()};goog.dom.MultiRange.prototype.getStartOffset=function(){return this.getSortedRanges()[0].getStartOffset()};
goog.dom.MultiRange.prototype.getEndNode=function(){return goog.array.peek(this.getSortedRanges()).getEndNode()};goog.dom.MultiRange.prototype.getEndOffset=function(){return goog.array.peek(this.getSortedRanges()).getEndOffset()};goog.dom.MultiRange.prototype.isRangeInDocument=function(){return goog.array.every(this.getTextRanges(),function(a){return a.isRangeInDocument()})};goog.dom.MultiRange.prototype.isCollapsed=function(){return 0==this.browserRanges_.length||1==this.browserRanges_.length&&this.getTextRange(0).isCollapsed()};
goog.dom.MultiRange.prototype.getText=function(){return goog.array.map(this.getTextRanges(),function(a){return a.getText()}).join("")};goog.dom.MultiRange.prototype.getHtmlFragment=function(){return this.getValidHtml()};goog.dom.MultiRange.prototype.getValidHtml=function(){return goog.array.map(this.getTextRanges(),function(a){return a.getValidHtml()}).join("")};goog.dom.MultiRange.prototype.getPastableHtml=function(){return this.getValidHtml()};goog.dom.MultiRange.prototype.__iterator__=function(a){return new goog.dom.MultiRangeIterator(this)};
goog.dom.MultiRange.prototype.select=function(){var a=goog.dom.AbstractRange.getBrowserSelectionForWindow(this.getWindow());a.removeAllRanges();for(var b=0,c=this.getTextRangeCount();b<c;b++)a.addRange(this.getTextRange(b).getBrowserRangeObject())};goog.dom.MultiRange.prototype.removeContents=function(){goog.array.forEach(this.getTextRanges(),function(a){a.removeContents()})};goog.dom.MultiRange.prototype.saveUsingDom=function(){return new goog.dom.DomSavedMultiRange_(this)};
goog.dom.MultiRange.prototype.collapse=function(a){if(!this.isCollapsed()){var b=a?this.getTextRange(0):this.getTextRange(this.getTextRangeCount()-1);this.clearCachedValues_();b.collapse(a);this.ranges_=[b];this.sortedRanges_=[b];this.browserRanges_=[b.getBrowserRangeObject()]}};goog.dom.DomSavedMultiRange_=function(a){this.savedRanges_=goog.array.map(a.getTextRanges(),function(a){return a.saveUsingDom()})};goog.inherits(goog.dom.DomSavedMultiRange_,goog.dom.SavedRange);
goog.dom.DomSavedMultiRange_.prototype.restoreInternal=function(){var a=goog.array.map(this.savedRanges_,function(a){return a.restore()});return goog.dom.MultiRange.createFromTextRanges(a)};goog.dom.DomSavedMultiRange_.prototype.disposeInternal=function(){goog.dom.DomSavedMultiRange_.superClass_.disposeInternal.call(this);goog.array.forEach(this.savedRanges_,function(a){a.dispose()});delete this.savedRanges_};
goog.dom.MultiRangeIterator=function(a){this.iterators_=null;this.currentIdx_=0;a&&(this.iterators_=goog.array.map(a.getSortedRanges(),function(a){return goog.iter.toIterator(a)}));goog.dom.RangeIterator.call(this,a?this.getStartNode():null,!1)};goog.inherits(goog.dom.MultiRangeIterator,goog.dom.RangeIterator);goog.dom.MultiRangeIterator.prototype.getStartTextOffset=function(){return this.iterators_[this.currentIdx_].getStartTextOffset()};goog.dom.MultiRangeIterator.prototype.getEndTextOffset=function(){return this.iterators_[this.currentIdx_].getEndTextOffset()};
goog.dom.MultiRangeIterator.prototype.getStartNode=function(){return this.iterators_[0].getStartNode()};goog.dom.MultiRangeIterator.prototype.getEndNode=function(){return goog.array.peek(this.iterators_).getEndNode()};goog.dom.MultiRangeIterator.prototype.isLast=function(){return this.iterators_[this.currentIdx_].isLast()};
goog.dom.MultiRangeIterator.prototype.next=function(){try{var a=this.iterators_[this.currentIdx_],b=a.next();this.setPosition(a.node,a.tagType,a.depth);return b}catch(c){if(c!==goog.iter.StopIteration||this.iterators_.length-1==this.currentIdx_)throw c;this.currentIdx_++;return this.next()}};goog.dom.MultiRangeIterator.prototype.copyFrom=function(a){this.iterators_=goog.array.clone(a.iterators_);goog.dom.MultiRangeIterator.superClass_.copyFrom.call(this,a)};
goog.dom.MultiRangeIterator.prototype.clone=function(){var a=new goog.dom.MultiRangeIterator(null);a.copyFrom(this);return a};goog.dom.Range={};goog.dom.Range.createFromWindow=function(a){return(a=goog.dom.AbstractRange.getBrowserSelectionForWindow(a||window))&&goog.dom.Range.createFromBrowserSelection(a)};
goog.dom.Range.createFromBrowserSelection=function(a){var b=!1;if(a.createRange)try{var c=a.createRange()}catch(d){return null}else if(a.rangeCount){if(1<a.rangeCount)return goog.dom.MultiRange.createFromBrowserSelection(a);c=a.getRangeAt(0);b=goog.dom.Range.isReversed(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset)}else return null;return goog.dom.Range.createFromBrowserRange(c,b)};
goog.dom.Range.createFromBrowserRange=function(a,b){return goog.dom.AbstractRange.isNativeControlRange(a)?goog.dom.ControlRange.createFromBrowserRange(a):goog.dom.TextRange.createFromBrowserRange(a,b)};goog.dom.Range.createFromNodeContents=function(a,b){return goog.dom.TextRange.createFromNodeContents(a,b)};goog.dom.Range.createCaret=function(a,b){return goog.dom.TextRange.createFromNodes(a,b,a,b)};goog.dom.Range.createFromNodes=function(a,b,c,d){return goog.dom.TextRange.createFromNodes(a,b,c,d)};
goog.dom.Range.clearSelection=function(a){if(a=goog.dom.AbstractRange.getBrowserSelectionForWindow(a||window))if(a.empty)try{a.empty()}catch(b){}else try{a.removeAllRanges()}catch(b){}};goog.dom.Range.hasSelection=function(a){a=goog.dom.AbstractRange.getBrowserSelectionForWindow(a||window);return!!a&&(goog.dom.BrowserFeature.LEGACY_IE_RANGES?"None"!=a.type:!!a.rangeCount)};
goog.dom.Range.isReversed=function(a,b,c,d){if(a==c)return d<b;var e;if(a.nodeType==goog.dom.NodeType.ELEMENT&&b)if(e=a.childNodes[b])a=e,b=0;else if(goog.dom.contains(a,c))return!0;if(c.nodeType==goog.dom.NodeType.ELEMENT&&d)if(e=c.childNodes[d])c=e,d=0;else if(goog.dom.contains(c,a))return!1;return 0<(goog.dom.compareNodeOrder(a,c)||b-d)};goog.structs.getCount=function(a){return a.getCount&&"function"==typeof a.getCount?a.getCount():goog.isArrayLike(a)||goog.isString(a)?a.length:goog.object.getCount(a)};goog.structs.getValues=function(a){if(a.getValues&&"function"==typeof a.getValues)return a.getValues();if(goog.isString(a))return a.split("");if(goog.isArrayLike(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return goog.object.getValues(a)};
goog.structs.getKeys=function(a){if(a.getKeys&&"function"==typeof a.getKeys)return a.getKeys();if(!a.getValues||"function"!=typeof a.getValues){if(goog.isArrayLike(a)||goog.isString(a)){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}return goog.object.getKeys(a)}};
goog.structs.contains=function(a,b){return a.contains&&"function"==typeof a.contains?a.contains(b):a.containsValue&&"function"==typeof a.containsValue?a.containsValue(b):goog.isArrayLike(a)||goog.isString(a)?goog.array.contains(a,b):goog.object.containsValue(a,b)};goog.structs.isEmpty=function(a){return a.isEmpty&&"function"==typeof a.isEmpty?a.isEmpty():goog.isArrayLike(a)||goog.isString(a)?goog.array.isEmpty(a):goog.object.isEmpty(a)};
goog.structs.clear=function(a){a.clear&&"function"==typeof a.clear?a.clear():goog.isArrayLike(a)?goog.array.clear(a):goog.object.clear(a)};goog.structs.forEach=function(a,b,c){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,c);else if(goog.isArrayLike(a)||goog.isString(a))goog.array.forEach(a,b,c);else for(var d=goog.structs.getKeys(a),e=goog.structs.getValues(a),f=e.length,g=0;g<f;g++)b.call(c,e[g],d&&d[g],a)};
goog.structs.filter=function(a,b,c){if("function"==typeof a.filter)return a.filter(b,c);if(goog.isArrayLike(a)||goog.isString(a))return goog.array.filter(a,b,c);var d=goog.structs.getKeys(a),e=goog.structs.getValues(a),f=e.length;if(d){var g={};for(var h=0;h<f;h++)b.call(c,e[h],d[h],a)&&(g[d[h]]=e[h])}else for(g=[],h=0;h<f;h++)b.call(c,e[h],void 0,a)&&g.push(e[h]);return g};
goog.structs.map=function(a,b,c){if("function"==typeof a.map)return a.map(b,c);if(goog.isArrayLike(a)||goog.isString(a))return goog.array.map(a,b,c);var d=goog.structs.getKeys(a),e=goog.structs.getValues(a),f=e.length;if(d){var g={};for(var h=0;h<f;h++)g[d[h]]=b.call(c,e[h],d[h],a)}else for(g=[],h=0;h<f;h++)g[h]=b.call(c,e[h],void 0,a);return g};
goog.structs.some=function(a,b,c){if("function"==typeof a.some)return a.some(b,c);if(goog.isArrayLike(a)||goog.isString(a))return goog.array.some(a,b,c);for(var d=goog.structs.getKeys(a),e=goog.structs.getValues(a),f=e.length,g=0;g<f;g++)if(b.call(c,e[g],d&&d[g],a))return!0;return!1};
goog.structs.every=function(a,b,c){if("function"==typeof a.every)return a.every(b,c);if(goog.isArrayLike(a)||goog.isString(a))return goog.array.every(a,b,c);for(var d=goog.structs.getKeys(a),e=goog.structs.getValues(a),f=e.length,g=0;g<f;g++)if(!b.call(c,e[g],d&&d[g],a))return!1;return!0};goog.uri={};goog.uri.utils={};goog.uri.utils.CharCode_={AMPERSAND:38,EQUAL:61,HASH:35,QUESTION:63};goog.uri.utils.buildFromEncodedParts=function(a,b,c,d,e,f,g){var h="";a&&(h+=a+":");c&&(h+="//",b&&(h+=b+"@"),h+=c,d&&(h+=":"+d));e&&(h+=e);f&&(h+="?"+f);g&&(h+="#"+g);return h};goog.uri.utils.splitRe_=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;
goog.uri.utils.ComponentIndex={SCHEME:1,USER_INFO:2,DOMAIN:3,PORT:4,PATH:5,QUERY_DATA:6,FRAGMENT:7};goog.uri.utils.split=function(a){return a.match(goog.uri.utils.splitRe_)};goog.uri.utils.decodeIfPossible_=function(a,b){return a?b?decodeURI(a):decodeURIComponent(a):a};goog.uri.utils.getComponentByIndex_=function(a,b){return goog.uri.utils.split(b)[a]||null};goog.uri.utils.getScheme=function(a){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.SCHEME,a)};
goog.uri.utils.getEffectiveScheme=function(a){a=goog.uri.utils.getScheme(a);!a&&goog.global.self&&goog.global.self.location&&(a=goog.global.self.location.protocol,a=a.substr(0,a.length-1));return a?a.toLowerCase():""};goog.uri.utils.getUserInfoEncoded=function(a){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.USER_INFO,a)};goog.uri.utils.getUserInfo=function(a){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getUserInfoEncoded(a))};
goog.uri.utils.getDomainEncoded=function(a){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.DOMAIN,a)};goog.uri.utils.getDomain=function(a){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getDomainEncoded(a),!0)};goog.uri.utils.getPort=function(a){return Number(goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.PORT,a))||null};goog.uri.utils.getPathEncoded=function(a){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.PATH,a)};
goog.uri.utils.getPath=function(a){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getPathEncoded(a),!0)};goog.uri.utils.getQueryData=function(a){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.QUERY_DATA,a)};goog.uri.utils.getFragmentEncoded=function(a){var b=a.indexOf("#");return 0>b?null:a.substr(b+1)};goog.uri.utils.setFragmentEncoded=function(a,b){return goog.uri.utils.removeFragment(a)+(b?"#"+b:"")};goog.uri.utils.getFragment=function(a){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getFragmentEncoded(a))};
goog.uri.utils.getHost=function(a){a=goog.uri.utils.split(a);return goog.uri.utils.buildFromEncodedParts(a[goog.uri.utils.ComponentIndex.SCHEME],a[goog.uri.utils.ComponentIndex.USER_INFO],a[goog.uri.utils.ComponentIndex.DOMAIN],a[goog.uri.utils.ComponentIndex.PORT])};goog.uri.utils.getOrigin=function(a){a=goog.uri.utils.split(a);return goog.uri.utils.buildFromEncodedParts(a[goog.uri.utils.ComponentIndex.SCHEME],null,a[goog.uri.utils.ComponentIndex.DOMAIN],a[goog.uri.utils.ComponentIndex.PORT])};
goog.uri.utils.getPathAndAfter=function(a){a=goog.uri.utils.split(a);return goog.uri.utils.buildFromEncodedParts(null,null,null,null,a[goog.uri.utils.ComponentIndex.PATH],a[goog.uri.utils.ComponentIndex.QUERY_DATA],a[goog.uri.utils.ComponentIndex.FRAGMENT])};goog.uri.utils.removeFragment=function(a){var b=a.indexOf("#");return 0>b?a:a.substr(0,b)};
goog.uri.utils.haveSameDomain=function(a,b){a=goog.uri.utils.split(a);b=goog.uri.utils.split(b);return a[goog.uri.utils.ComponentIndex.DOMAIN]==b[goog.uri.utils.ComponentIndex.DOMAIN]&&a[goog.uri.utils.ComponentIndex.SCHEME]==b[goog.uri.utils.ComponentIndex.SCHEME]&&a[goog.uri.utils.ComponentIndex.PORT]==b[goog.uri.utils.ComponentIndex.PORT]};
goog.uri.utils.assertNoFragmentsOrQueries_=function(a){goog.asserts.assert(0>a.indexOf("#")&&0>a.indexOf("?"),"goog.uri.utils: Fragment or query identifiers are not supported: [%s]",a)};goog.uri.utils.parseQueryData=function(a,b){if(a){a=a.split("&");for(var c=0;c<a.length;c++){var d=a[c].indexOf("="),e=null;if(0<=d){var f=a[c].substring(0,d);e=a[c].substring(d+1)}else f=a[c];b(f,e?goog.string.urlDecode(e):"")}}};
goog.uri.utils.splitQueryData_=function(a){var b=a.indexOf("#");0>b&&(b=a.length);var c=a.indexOf("?");if(0>c||c>b){c=b;var d=""}else d=a.substring(c+1,b);return[a.substr(0,c),d,a.substr(b)]};goog.uri.utils.joinQueryData_=function(a){return a[0]+(a[1]?"?"+a[1]:"")+a[2]};goog.uri.utils.appendQueryData_=function(a,b){return b?a?a+"&"+b:b:a};goog.uri.utils.appendQueryDataToUri_=function(a,b){if(!b)return a;a=goog.uri.utils.splitQueryData_(a);a[1]=goog.uri.utils.appendQueryData_(a[1],b);return goog.uri.utils.joinQueryData_(a)};
goog.uri.utils.appendKeyValuePairs_=function(a,b,c){goog.asserts.assertString(a);if(goog.isArray(b)){goog.asserts.assertArray(b);for(var d=0;d<b.length;d++)goog.uri.utils.appendKeyValuePairs_(a,String(b[d]),c)}else null!=b&&c.push(a+(""===b?"":"="+goog.string.urlEncode(b)))};
goog.uri.utils.buildQueryData=function(a,b){goog.asserts.assert(0==Math.max(a.length-(b||0),0)%2,"goog.uri.utils: Key/value lists must be even in length.");var c=[];for(b=b||0;b<a.length;b+=2)goog.uri.utils.appendKeyValuePairs_(a[b],a[b+1],c);return c.join("&")};goog.uri.utils.buildQueryDataFromMap=function(a){var b=[],c;for(c in a)goog.uri.utils.appendKeyValuePairs_(c,a[c],b);return b.join("&")};
goog.uri.utils.appendParams=function(a,b){var c=2==arguments.length?goog.uri.utils.buildQueryData(arguments[1],0):goog.uri.utils.buildQueryData(arguments,1);return goog.uri.utils.appendQueryDataToUri_(a,c)};goog.uri.utils.appendParamsFromMap=function(a,b){b=goog.uri.utils.buildQueryDataFromMap(b);return goog.uri.utils.appendQueryDataToUri_(a,b)};goog.uri.utils.appendParam=function(a,b,c){c=goog.isDefAndNotNull(c)?"="+goog.string.urlEncode(c):"";return goog.uri.utils.appendQueryDataToUri_(a,b+c)};
goog.uri.utils.findParam_=function(a,b,c,d){for(var e=c.length;0<=(b=a.indexOf(c,b))&&b<d;){var f=a.charCodeAt(b-1);if(f==goog.uri.utils.CharCode_.AMPERSAND||f==goog.uri.utils.CharCode_.QUESTION)if(f=a.charCodeAt(b+e),!f||f==goog.uri.utils.CharCode_.EQUAL||f==goog.uri.utils.CharCode_.AMPERSAND||f==goog.uri.utils.CharCode_.HASH)return b;b+=e+1}return-1};goog.uri.utils.hashOrEndRe_=/#|$/;goog.uri.utils.hasParam=function(a,b){return 0<=goog.uri.utils.findParam_(a,0,b,a.search(goog.uri.utils.hashOrEndRe_))};
goog.uri.utils.getParamValue=function(a,b){var c=a.search(goog.uri.utils.hashOrEndRe_),d=goog.uri.utils.findParam_(a,0,b,c);if(0>d)return null;var e=a.indexOf("&",d);if(0>e||e>c)e=c;d+=b.length+1;return goog.string.urlDecode(a.substr(d,e-d))};goog.uri.utils.getParamValues=function(a,b){for(var c=a.search(goog.uri.utils.hashOrEndRe_),d=0,e,f=[];0<=(e=goog.uri.utils.findParam_(a,d,b,c));){d=a.indexOf("&",e);if(0>d||d>c)d=c;e+=b.length+1;f.push(goog.string.urlDecode(a.substr(e,d-e)))}return f};
goog.uri.utils.trailingQueryPunctuationRe_=/[?&]($|#)/;goog.uri.utils.removeParam=function(a,b){for(var c=a.search(goog.uri.utils.hashOrEndRe_),d=0,e,f=[];0<=(e=goog.uri.utils.findParam_(a,d,b,c));)f.push(a.substring(d,e)),d=Math.min(a.indexOf("&",e)+1||c,c);f.push(a.substr(d));return f.join("").replace(goog.uri.utils.trailingQueryPunctuationRe_,"$1")};goog.uri.utils.setParam=function(a,b,c){return goog.uri.utils.appendParam(goog.uri.utils.removeParam(a,b),b,c)};
goog.uri.utils.setParamsFromMap=function(a,b){a=goog.uri.utils.splitQueryData_(a);var c=a[1],d=[];c&&goog.array.forEach(c.split("&"),function(a){var c=a.indexOf("=");c=0<=c?a.substr(0,c):a;b.hasOwnProperty(c)||d.push(a)});a[1]=goog.uri.utils.appendQueryData_(d.join("&"),goog.uri.utils.buildQueryDataFromMap(b));return goog.uri.utils.joinQueryData_(a)};
goog.uri.utils.appendPath=function(a,b){goog.uri.utils.assertNoFragmentsOrQueries_(a);goog.string.endsWith(a,"/")&&(a=a.substr(0,a.length-1));goog.string.startsWith(b,"/")&&(b=b.substr(1));return goog.string.buildString(a,"/",b)};
goog.uri.utils.setPath=function(a,b){goog.string.startsWith(b,"/")||(b="/"+b);a=goog.uri.utils.split(a);return goog.uri.utils.buildFromEncodedParts(a[goog.uri.utils.ComponentIndex.SCHEME],a[goog.uri.utils.ComponentIndex.USER_INFO],a[goog.uri.utils.ComponentIndex.DOMAIN],a[goog.uri.utils.ComponentIndex.PORT],b,a[goog.uri.utils.ComponentIndex.QUERY_DATA],a[goog.uri.utils.ComponentIndex.FRAGMENT])};goog.uri.utils.StandardQueryParam={RANDOM:"zx"};
goog.uri.utils.makeUnique=function(a){return goog.uri.utils.setParam(a,goog.uri.utils.StandardQueryParam.RANDOM,goog.string.getRandomString())};goog.Uri=function(a,b){this.domain_=this.userInfo_=this.scheme_="";this.port_=null;this.fragment_=this.path_="";this.ignoreCase_=this.isReadOnly_=!1;var c;a instanceof goog.Uri?(this.ignoreCase_=goog.isDef(b)?b:a.getIgnoreCase(),this.setScheme(a.getScheme()),this.setUserInfo(a.getUserInfo()),this.setDomain(a.getDomain()),this.setPort(a.getPort()),this.setPath(a.getPath()),this.setQueryData(a.getQueryData().clone()),this.setFragment(a.getFragment())):a&&(c=goog.uri.utils.split(String(a)))?(this.ignoreCase_=
!!b,this.setScheme(c[goog.uri.utils.ComponentIndex.SCHEME]||"",!0),this.setUserInfo(c[goog.uri.utils.ComponentIndex.USER_INFO]||"",!0),this.setDomain(c[goog.uri.utils.ComponentIndex.DOMAIN]||"",!0),this.setPort(c[goog.uri.utils.ComponentIndex.PORT]),this.setPath(c[goog.uri.utils.ComponentIndex.PATH]||"",!0),this.setQueryData(c[goog.uri.utils.ComponentIndex.QUERY_DATA]||"",!0),this.setFragment(c[goog.uri.utils.ComponentIndex.FRAGMENT]||"",!0)):(this.ignoreCase_=!!b,this.queryData_=new goog.Uri.QueryData(null,
null,this.ignoreCase_))};goog.Uri.RANDOM_PARAM=goog.uri.utils.StandardQueryParam.RANDOM;
goog.Uri.prototype.toString=function(){var a=[],b=this.getScheme();b&&a.push(goog.Uri.encodeSpecialChars_(b,goog.Uri.reDisallowedInSchemeOrUserInfo_,!0),":");var c=this.getDomain();if(c||"file"==b)a.push("//"),(b=this.getUserInfo())&&a.push(goog.Uri.encodeSpecialChars_(b,goog.Uri.reDisallowedInSchemeOrUserInfo_,!0),"@"),a.push(goog.Uri.removeDoubleEncoding_(goog.string.urlEncode(c))),c=this.getPort(),null!=c&&a.push(":",String(c));if(c=this.getPath())this.hasDomain()&&"/"!=c.charAt(0)&&a.push("/"),
a.push(goog.Uri.encodeSpecialChars_(c,"/"==c.charAt(0)?goog.Uri.reDisallowedInAbsolutePath_:goog.Uri.reDisallowedInRelativePath_,!0));(c=this.getEncodedQuery())&&a.push("?",c);(c=this.getFragment())&&a.push("#",goog.Uri.encodeSpecialChars_(c,goog.Uri.reDisallowedInFragment_));return a.join("")};
goog.Uri.prototype.resolve=function(a){var b=this.clone(),c=a.hasScheme();c?b.setScheme(a.getScheme()):c=a.hasUserInfo();c?b.setUserInfo(a.getUserInfo()):c=a.hasDomain();c?b.setDomain(a.getDomain()):c=a.hasPort();var d=a.getPath();if(c)b.setPort(a.getPort());else if(c=a.hasPath()){if("/"!=d.charAt(0))if(this.hasDomain()&&!this.hasPath())d="/"+d;else{var e=b.getPath().lastIndexOf("/");-1!=e&&(d=b.getPath().substr(0,e+1)+d)}d=goog.Uri.removeDotSegments(d)}c?b.setPath(d):c=a.hasQuery();c?b.setQueryData(a.getQueryData().clone()):
c=a.hasFragment();c&&b.setFragment(a.getFragment());return b};goog.Uri.prototype.clone=function(){return new goog.Uri(this)};goog.Uri.prototype.getScheme=function(){return this.scheme_};goog.Uri.prototype.setScheme=function(a,b){this.enforceReadOnly();if(this.scheme_=b?goog.Uri.decodeOrEmpty_(a,!0):a)this.scheme_=this.scheme_.replace(/:$/,"");return this};goog.Uri.prototype.hasScheme=function(){return!!this.scheme_};goog.Uri.prototype.getUserInfo=function(){return this.userInfo_};
goog.Uri.prototype.setUserInfo=function(a,b){this.enforceReadOnly();this.userInfo_=b?goog.Uri.decodeOrEmpty_(a):a;return this};goog.Uri.prototype.hasUserInfo=function(){return!!this.userInfo_};goog.Uri.prototype.getDomain=function(){return this.domain_};goog.Uri.prototype.setDomain=function(a,b){this.enforceReadOnly();this.domain_=b?goog.Uri.decodeOrEmpty_(a,!0):a;return this};goog.Uri.prototype.hasDomain=function(){return!!this.domain_};goog.Uri.prototype.getPort=function(){return this.port_};
goog.Uri.prototype.setPort=function(a){this.enforceReadOnly();if(a){a=Number(a);if(isNaN(a)||0>a)throw Error("Bad port number "+a);this.port_=a}else this.port_=null;return this};goog.Uri.prototype.hasPort=function(){return null!=this.port_};goog.Uri.prototype.getPath=function(){return this.path_};goog.Uri.prototype.setPath=function(a,b){this.enforceReadOnly();this.path_=b?goog.Uri.decodeOrEmpty_(a,!0):a;return this};goog.Uri.prototype.hasPath=function(){return!!this.path_};
goog.Uri.prototype.hasQuery=function(){return""!==this.queryData_.toString()};goog.Uri.prototype.setQueryData=function(a,b){this.enforceReadOnly();a instanceof goog.Uri.QueryData?(this.queryData_=a,this.queryData_.setIgnoreCase(this.ignoreCase_)):(b||(a=goog.Uri.encodeSpecialChars_(a,goog.Uri.reDisallowedInQuery_)),this.queryData_=new goog.Uri.QueryData(a,null,this.ignoreCase_));return this};goog.Uri.prototype.setQuery=function(a,b){return this.setQueryData(a,b)};
goog.Uri.prototype.getEncodedQuery=function(){return this.queryData_.toString()};goog.Uri.prototype.getDecodedQuery=function(){return this.queryData_.toDecodedString()};goog.Uri.prototype.getQueryData=function(){return this.queryData_};goog.Uri.prototype.getQuery=function(){return this.getEncodedQuery()};goog.Uri.prototype.setParameterValue=function(a,b){this.enforceReadOnly();this.queryData_.set(a,b);return this};
goog.Uri.prototype.setParameterValues=function(a,b){this.enforceReadOnly();goog.isArray(b)||(b=[String(b)]);this.queryData_.setValues(a,b);return this};goog.Uri.prototype.getParameterValues=function(a){return this.queryData_.getValues(a)};goog.Uri.prototype.getParameterValue=function(a){return this.queryData_.get(a)};goog.Uri.prototype.getFragment=function(){return this.fragment_};goog.Uri.prototype.setFragment=function(a,b){this.enforceReadOnly();this.fragment_=b?goog.Uri.decodeOrEmpty_(a):a;return this};
goog.Uri.prototype.hasFragment=function(){return!!this.fragment_};goog.Uri.prototype.hasSameDomainAs=function(a){return(!this.hasDomain()&&!a.hasDomain()||this.getDomain()==a.getDomain())&&(!this.hasPort()&&!a.hasPort()||this.getPort()==a.getPort())};goog.Uri.prototype.makeUnique=function(){this.enforceReadOnly();this.setParameterValue(goog.Uri.RANDOM_PARAM,goog.string.getRandomString());return this};goog.Uri.prototype.removeParameter=function(a){this.enforceReadOnly();this.queryData_.remove(a);return this};
goog.Uri.prototype.setReadOnly=function(a){this.isReadOnly_=a;return this};goog.Uri.prototype.isReadOnly=function(){return this.isReadOnly_};goog.Uri.prototype.enforceReadOnly=function(){if(this.isReadOnly_)throw Error("Tried to modify a read-only Uri");};goog.Uri.prototype.setIgnoreCase=function(a){this.ignoreCase_=a;this.queryData_&&this.queryData_.setIgnoreCase(a);return this};goog.Uri.prototype.getIgnoreCase=function(){return this.ignoreCase_};
goog.Uri.parse=function(a,b){return a instanceof goog.Uri?a.clone():new goog.Uri(a,b)};goog.Uri.create=function(a,b,c,d,e,f,g,h){h=new goog.Uri(null,h);a&&h.setScheme(a);b&&h.setUserInfo(b);c&&h.setDomain(c);d&&h.setPort(d);e&&h.setPath(e);f&&h.setQueryData(f);g&&h.setFragment(g);return h};goog.Uri.resolve=function(a,b){a instanceof goog.Uri||(a=goog.Uri.parse(a));b instanceof goog.Uri||(b=goog.Uri.parse(b));return a.resolve(b)};
goog.Uri.removeDotSegments=function(a){if(".."==a||"."==a)return"";if(goog.string.contains(a,"./")||goog.string.contains(a,"/.")){var b=goog.string.startsWith(a,"/");a=a.split("/");for(var c=[],d=0;d<a.length;){var e=a[d++];"."==e?b&&d==a.length&&c.push(""):".."==e?((1<c.length||1==c.length&&""!=c[0])&&c.pop(),b&&d==a.length&&c.push("")):(c.push(e),b=!0)}return c.join("/")}return a};goog.Uri.decodeOrEmpty_=function(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""};
goog.Uri.encodeSpecialChars_=function(a,b,c){return goog.isString(a)?(a=encodeURI(a).replace(b,goog.Uri.encodeChar_),c&&(a=goog.Uri.removeDoubleEncoding_(a)),a):null};goog.Uri.encodeChar_=function(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)};goog.Uri.removeDoubleEncoding_=function(a){return a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")};goog.Uri.reDisallowedInSchemeOrUserInfo_=/[#\/\?@]/g;goog.Uri.reDisallowedInRelativePath_=/[#\?:]/g;goog.Uri.reDisallowedInAbsolutePath_=/[#\?]/g;
goog.Uri.reDisallowedInQuery_=/[#\?@]/g;goog.Uri.reDisallowedInFragment_=/#/g;goog.Uri.haveSameDomain=function(a,b){a=goog.uri.utils.split(a);b=goog.uri.utils.split(b);return a[goog.uri.utils.ComponentIndex.DOMAIN]==b[goog.uri.utils.ComponentIndex.DOMAIN]&&a[goog.uri.utils.ComponentIndex.PORT]==b[goog.uri.utils.ComponentIndex.PORT]};goog.Uri.QueryData=function(a,b,c){this.count_=this.keyMap_=null;this.encodedQuery_=a||null;this.ignoreCase_=!!c};
goog.Uri.QueryData.prototype.ensureKeyMapInitialized_=function(){if(!this.keyMap_&&(this.keyMap_=new goog.structs.Map,this.count_=0,this.encodedQuery_)){var a=this;goog.uri.utils.parseQueryData(this.encodedQuery_,function(b,c){a.add(goog.string.urlDecode(b),c)})}};
goog.Uri.QueryData.createFromMap=function(a,b,c){b=goog.structs.getKeys(a);if("undefined"==typeof b)throw Error("Keys are undefined");c=new goog.Uri.QueryData(null,null,c);a=goog.structs.getValues(a);for(var d=0;d<b.length;d++){var e=b[d],f=a[d];goog.isArray(f)?c.setValues(e,f):c.add(e,f)}return c};
goog.Uri.QueryData.createFromKeysValues=function(a,b,c,d){if(a.length!=b.length)throw Error("Mismatched lengths for keys/values");c=new goog.Uri.QueryData(null,null,d);for(d=0;d<a.length;d++)c.add(a[d],b[d]);return c};goog.Uri.QueryData.prototype.getCount=function(){this.ensureKeyMapInitialized_();return this.count_};
goog.Uri.QueryData.prototype.add=function(a,b){this.ensureKeyMapInitialized_();this.invalidateCache_();a=this.getKeyName_(a);var c=this.keyMap_.get(a);c||this.keyMap_.set(a,c=[]);c.push(b);this.count_=goog.asserts.assertNumber(this.count_)+1;return this};
goog.Uri.QueryData.prototype.remove=function(a){this.ensureKeyMapInitialized_();a=this.getKeyName_(a);return this.keyMap_.containsKey(a)?(this.invalidateCache_(),this.count_=goog.asserts.assertNumber(this.count_)-this.keyMap_.get(a).length,this.keyMap_.remove(a)):!1};goog.Uri.QueryData.prototype.clear=function(){this.invalidateCache_();this.keyMap_=null;this.count_=0};goog.Uri.QueryData.prototype.isEmpty=function(){this.ensureKeyMapInitialized_();return 0==this.count_};
goog.Uri.QueryData.prototype.containsKey=function(a){this.ensureKeyMapInitialized_();a=this.getKeyName_(a);return this.keyMap_.containsKey(a)};goog.Uri.QueryData.prototype.containsValue=function(a){var b=this.getValues();return goog.array.contains(b,a)};goog.Uri.QueryData.prototype.forEach=function(a,b){this.ensureKeyMapInitialized_();this.keyMap_.forEach(function(c,d){goog.array.forEach(c,function(c){a.call(b,c,d,this)},this)},this)};
goog.Uri.QueryData.prototype.getKeys=function(){this.ensureKeyMapInitialized_();for(var a=this.keyMap_.getValues(),b=this.keyMap_.getKeys(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};goog.Uri.QueryData.prototype.getValues=function(a){this.ensureKeyMapInitialized_();var b=[];if(goog.isString(a))this.containsKey(a)&&(b=goog.array.concat(b,this.keyMap_.get(this.getKeyName_(a))));else{a=this.keyMap_.getValues();for(var c=0;c<a.length;c++)b=goog.array.concat(b,a[c])}return b};
goog.Uri.QueryData.prototype.set=function(a,b){this.ensureKeyMapInitialized_();this.invalidateCache_();a=this.getKeyName_(a);this.containsKey(a)&&(this.count_=goog.asserts.assertNumber(this.count_)-this.keyMap_.get(a).length);this.keyMap_.set(a,[b]);this.count_=goog.asserts.assertNumber(this.count_)+1;return this};goog.Uri.QueryData.prototype.get=function(a,b){if(!a)return b;a=this.getValues(a);return 0<a.length?String(a[0]):b};
goog.Uri.QueryData.prototype.setValues=function(a,b){this.remove(a);0<b.length&&(this.invalidateCache_(),this.keyMap_.set(this.getKeyName_(a),goog.array.clone(b)),this.count_=goog.asserts.assertNumber(this.count_)+b.length)};
goog.Uri.QueryData.prototype.toString=function(){if(this.encodedQuery_)return this.encodedQuery_;if(!this.keyMap_)return"";for(var a=[],b=this.keyMap_.getKeys(),c=0;c<b.length;c++){var d=b[c],e=goog.string.urlEncode(d);d=this.getValues(d);for(var f=0;f<d.length;f++){var g=e;""!==d[f]&&(g+="="+goog.string.urlEncode(d[f]));a.push(g)}}return this.encodedQuery_=a.join("&")};goog.Uri.QueryData.prototype.toDecodedString=function(){return goog.Uri.decodeOrEmpty_(this.toString())};
goog.Uri.QueryData.prototype.invalidateCache_=function(){this.encodedQuery_=null};goog.Uri.QueryData.prototype.filterKeys=function(a){this.ensureKeyMapInitialized_();this.keyMap_.forEach(function(b,c){goog.array.contains(a,c)||this.remove(c)},this);return this};goog.Uri.QueryData.prototype.clone=function(){var a=new goog.Uri.QueryData;a.encodedQuery_=this.encodedQuery_;this.keyMap_&&(a.keyMap_=this.keyMap_.clone(),a.count_=this.count_);return a};
goog.Uri.QueryData.prototype.getKeyName_=function(a){a=String(a);this.ignoreCase_&&(a=a.toLowerCase());return a};goog.Uri.QueryData.prototype.setIgnoreCase=function(a){a&&!this.ignoreCase_&&(this.ensureKeyMapInitialized_(),this.invalidateCache_(),this.keyMap_.forEach(function(a,c){var b=c.toLowerCase();c!=b&&(this.remove(c),this.setValues(b,a))},this));this.ignoreCase_=a};
goog.Uri.QueryData.prototype.extend=function(a){for(var b=0;b<arguments.length;b++)goog.structs.forEach(arguments[b],function(a,b){this.add(b,a)},this)};goog.debug.RelativeTimeProvider=function(){this.relativeTimeStart_=goog.now()};goog.debug.RelativeTimeProvider.defaultInstance_=null;goog.debug.RelativeTimeProvider.prototype.set=function(a){this.relativeTimeStart_=a};goog.debug.RelativeTimeProvider.prototype.reset=function(){this.set(goog.now())};goog.debug.RelativeTimeProvider.prototype.get=function(){return this.relativeTimeStart_};
goog.debug.RelativeTimeProvider.getDefaultInstance=function(){goog.debug.RelativeTimeProvider.defaultInstance_||(goog.debug.RelativeTimeProvider.defaultInstance_=new goog.debug.RelativeTimeProvider);return goog.debug.RelativeTimeProvider.defaultInstance_};goog.debug.Formatter=function(a){this.prefix_=a||"";this.startTimeProvider_=goog.debug.RelativeTimeProvider.getDefaultInstance()};goog.debug.Formatter.prototype.appendNewline=!0;goog.debug.Formatter.prototype.showAbsoluteTime=!0;goog.debug.Formatter.prototype.showRelativeTime=!0;goog.debug.Formatter.prototype.showLoggerName=!0;goog.debug.Formatter.prototype.showExceptionText=!1;goog.debug.Formatter.prototype.showSeverityLevel=!1;goog.debug.Formatter.prototype.formatRecord=goog.abstractMethod;
goog.debug.Formatter.prototype.formatRecordAsHtml=goog.abstractMethod;goog.debug.Formatter.prototype.setStartTimeProvider=function(a){this.startTimeProvider_=a};goog.debug.Formatter.prototype.getStartTimeProvider=function(){return this.startTimeProvider_};goog.debug.Formatter.prototype.resetRelativeTimeStart=function(){this.startTimeProvider_.reset()};
goog.debug.Formatter.getDateTimeStamp_=function(a){a=new Date(a.getMillis());return goog.debug.Formatter.getTwoDigitString_(a.getFullYear()-2E3)+goog.debug.Formatter.getTwoDigitString_(a.getMonth()+1)+goog.debug.Formatter.getTwoDigitString_(a.getDate())+" "+goog.debug.Formatter.getTwoDigitString_(a.getHours())+":"+goog.debug.Formatter.getTwoDigitString_(a.getMinutes())+":"+goog.debug.Formatter.getTwoDigitString_(a.getSeconds())+"."+goog.debug.Formatter.getTwoDigitString_(Math.floor(a.getMilliseconds()/
10))};goog.debug.Formatter.getTwoDigitString_=function(a){return 10>a?"0"+a:String(a)};goog.debug.Formatter.getRelativeTime_=function(a,b){a=(a.getMillis()-b)/1E3;b=a.toFixed(3);var c=0;if(1>a)c=2;else for(;100>a;)c++,a*=10;for(;0<c--;)b=" "+b;return b};goog.debug.HtmlFormatter=function(a){goog.debug.Formatter.call(this,a)};goog.inherits(goog.debug.HtmlFormatter,goog.debug.Formatter);goog.debug.HtmlFormatter.exposeException=function(a,b){a=goog.debug.HtmlFormatter.exposeExceptionAsHtml(a,b);return goog.html.SafeHtml.unwrap(a)};
goog.debug.HtmlFormatter.exposeExceptionAsHtml=function(a,b){try{var c=goog.debug.normalizeErrorObject(a),d=goog.debug.HtmlFormatter.createViewSourceUrl_(c.fileName);return goog.html.SafeHtml.concat(goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces("Message: "+c.message+"\nUrl: "),goog.html.SafeHtml.create("a",{href:d,target:"_new"},c.fileName),goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces("\nLine: "+c.lineNumber+"\n\nBrowser stack:\n"+c.stack+"-> [end]\n\nJS stack traversal:\n"+
goog.debug.getStacktrace(b)+"-> "))}catch(e){return goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces("Exception trying to expose exception! You win, we lose. "+e)}};
goog.debug.HtmlFormatter.createViewSourceUrl_=function(a){goog.isDefAndNotNull(a)||(a="");if(!/^https?:\/\//i.test(a))return goog.html.SafeUrl.fromConstant(goog.string.Const.from("sanitizedviewsrc"));a=goog.html.SafeUrl.sanitize(a);return goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("view-source scheme plus HTTP/HTTPS URL"),"view-source:"+goog.html.SafeUrl.unwrap(a))};goog.debug.HtmlFormatter.prototype.showExceptionText=!0;
goog.debug.HtmlFormatter.prototype.formatRecord=function(a){return a?this.formatRecordAsHtml(a).getTypedStringValue():""};
goog.debug.HtmlFormatter.prototype.formatRecordAsHtml=function(a){if(!a)return goog.html.SafeHtml.EMPTY;switch(a.getLevel().value){case goog.debug.Logger.Level.SHOUT.value:var b="dbg-sh";break;case goog.debug.Logger.Level.SEVERE.value:b="dbg-sev";break;case goog.debug.Logger.Level.WARNING.value:b="dbg-w";break;case goog.debug.Logger.Level.INFO.value:b="dbg-i";break;default:b="dbg-f"}var c=[];c.push(this.prefix_," ");this.showAbsoluteTime&&c.push("[",goog.debug.Formatter.getDateTimeStamp_(a),"] ");
this.showRelativeTime&&c.push("[",goog.debug.Formatter.getRelativeTime_(a,this.startTimeProvider_.get()),"s] ");this.showLoggerName&&c.push("[",a.getLoggerName(),"] ");this.showSeverityLevel&&c.push("[",a.getLevel().name,"] ");c=goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces(c.join(""));var d=goog.html.SafeHtml.EMPTY;this.showExceptionText&&a.getException()&&(d=goog.html.SafeHtml.concat(goog.html.SafeHtml.BR,goog.debug.HtmlFormatter.exposeExceptionAsHtml(a.getException())));a=goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces(a.getMessage());
b=goog.html.SafeHtml.create("span",{"class":b},goog.html.SafeHtml.concat(a,d));return this.appendNewline?goog.html.SafeHtml.concat(c,b,goog.html.SafeHtml.BR):goog.html.SafeHtml.concat(c,b)};goog.debug.TextFormatter=function(a){goog.debug.Formatter.call(this,a)};goog.inherits(goog.debug.TextFormatter,goog.debug.Formatter);
goog.debug.TextFormatter.prototype.formatRecord=function(a){var b=[];b.push(this.prefix_," ");this.showAbsoluteTime&&b.push("[",goog.debug.Formatter.getDateTimeStamp_(a),"] ");this.showRelativeTime&&b.push("[",goog.debug.Formatter.getRelativeTime_(a,this.startTimeProvider_.get()),"s] ");this.showLoggerName&&b.push("[",a.getLoggerName(),"] ");this.showSeverityLevel&&b.push("[",a.getLevel().name,"] ");b.push(a.getMessage());this.showExceptionText&&(a=a.getException())&&b.push("\n",a instanceof Error?
a.message:a.toString());this.appendNewline&&b.push("\n");return b.join("")};goog.debug.TextFormatter.prototype.formatRecordAsHtml=function(a){return goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces(goog.debug.TextFormatter.prototype.formatRecord(a))};goog.structs.CircularBuffer=function(a){this.nextPtr_=0;this.maxSize_=a||100;this.buff_=[]};goog.structs.CircularBuffer.prototype.add=function(a){var b=this.buff_[this.nextPtr_];this.buff_[this.nextPtr_]=a;this.nextPtr_=(this.nextPtr_+1)%this.maxSize_;return b};goog.structs.CircularBuffer.prototype.get=function(a){a=this.normalizeIndex_(a);return this.buff_[a]};goog.structs.CircularBuffer.prototype.set=function(a,b){a=this.normalizeIndex_(a);this.buff_[a]=b};
goog.structs.CircularBuffer.prototype.getCount=function(){return this.buff_.length};goog.structs.CircularBuffer.prototype.isEmpty=function(){return 0==this.buff_.length};goog.structs.CircularBuffer.prototype.clear=function(){this.nextPtr_=this.buff_.length=0};goog.structs.CircularBuffer.prototype.getValues=function(){return this.getNewestValues(this.getCount())};
goog.structs.CircularBuffer.prototype.getNewestValues=function(a){var b=this.getCount(),c=[];for(a=this.getCount()-a;a<b;a++)c.push(this.get(a));return c};goog.structs.CircularBuffer.prototype.getKeys=function(){for(var a=[],b=this.getCount(),c=0;c<b;c++)a[c]=c;return a};goog.structs.CircularBuffer.prototype.containsKey=function(a){return a<this.getCount()};goog.structs.CircularBuffer.prototype.containsValue=function(a){for(var b=this.getCount(),c=0;c<b;c++)if(this.get(c)==a)return!0;return!1};
goog.structs.CircularBuffer.prototype.getLast=function(){return 0==this.getCount()?null:this.get(this.getCount()-1)};goog.structs.CircularBuffer.prototype.normalizeIndex_=function(a){if(a>=this.buff_.length)throw Error("Out of bounds exception");return this.buff_.length<this.maxSize_?a:(this.nextPtr_+Number(a))%this.maxSize_};goog.debug.DebugWindow=function(a,b){this.identifier=a||"";this.outputBuffer=[];this.prefix_=b||"";this.savedMessages_=new goog.structs.CircularBuffer(goog.debug.DebugWindow.MAX_SAVED);this.publishHandler_=goog.bind(this.addLogRecord,this);this.formatter_=new goog.debug.HtmlFormatter(this.prefix_);this.filteredLoggers_={};this.setCapturing(!0);this.enabled_=goog.debug.DebugWindow.isEnabled(this.identifier);goog.global.setInterval(goog.bind(this.saveWindowPositionSize_,this),7500)};
goog.debug.DebugWindow.MAX_SAVED=500;goog.debug.DebugWindow.COOKIE_TIME=2592E6;goog.debug.DebugWindow.prototype.welcomeMessage="LOGGING";goog.debug.DebugWindow.prototype.enableOnSevere_=!1;goog.debug.DebugWindow.prototype.win=null;goog.debug.DebugWindow.prototype.winOpening_=!1;goog.debug.DebugWindow.prototype.isCapturing_=!1;goog.debug.DebugWindow.showedBlockedAlert_=!1;goog.debug.DebugWindow.prototype.bufferTimeout_=null;goog.debug.DebugWindow.prototype.lastCall=goog.now();
goog.debug.DebugWindow.prototype.setWelcomeMessage=function(a){this.welcomeMessage=a};goog.debug.DebugWindow.prototype.init=function(){this.enabled_&&this.openWindow_()};goog.debug.DebugWindow.prototype.isEnabled=function(){return this.enabled_};goog.debug.DebugWindow.prototype.setEnabled=function(a){(this.enabled_=a)&&this.openWindow_();this.setCookie_("enabled",a?"1":"0")};goog.debug.DebugWindow.prototype.setForceEnableOnSevere=function(a){this.enableOnSevere_=a};
goog.debug.DebugWindow.prototype.isCapturing=function(){return this.isCapturing_};goog.debug.DebugWindow.prototype.setCapturing=function(a){if(a!=this.isCapturing_){this.isCapturing_=a;var b=goog.debug.LogManager.getRoot();a?b.addHandler(this.publishHandler_):b.removeHandler(this.publishHandler_)}};goog.debug.DebugWindow.prototype.getFormatter=function(){return this.formatter_};goog.debug.DebugWindow.prototype.setFormatter=function(a){this.formatter_=a};
goog.debug.DebugWindow.prototype.addSeparator=function(){this.write_(goog.html.SafeHtml.create("hr"))};goog.debug.DebugWindow.prototype.hasActiveWindow=function(){return!!this.win&&!this.win.closed};goog.debug.DebugWindow.prototype.clear=function(){this.savedMessages_.clear();this.hasActiveWindow()&&this.writeInitialDocument()};
goog.debug.DebugWindow.prototype.addLogRecord=function(a){if(!this.filteredLoggers_[a.getLoggerName()]){var b=this.formatter_.formatRecordAsHtml(a);this.write_(b);this.enableOnSevere_&&a.getLevel().value>=goog.debug.Logger.Level.SEVERE.value&&this.setEnabled(!0)}};goog.debug.DebugWindow.prototype.write_=function(a){this.enabled_?(this.openWindow_(),this.savedMessages_.add(a),this.writeToLog_(a)):this.savedMessages_.add(a)};
goog.debug.DebugWindow.prototype.writeToLog_=function(a){this.outputBuffer.push(a);goog.global.clearTimeout(this.bufferTimeout_);750<goog.now()-this.lastCall?this.writeBufferToLog():this.bufferTimeout_=goog.global.setTimeout(goog.bind(this.writeBufferToLog,this),250)};
goog.debug.DebugWindow.prototype.writeBufferToLog=function(){this.lastCall=goog.now();if(this.hasActiveWindow()){var a=this.win.document.body;a=a&&100>=a.scrollHeight-(a.scrollTop+a.clientHeight);goog.dom.safe.documentWrite(this.win.document,goog.html.SafeHtml.concat(this.outputBuffer));this.outputBuffer.length=0;a&&this.win.scrollTo(0,1E6)}};goog.debug.DebugWindow.prototype.writeSavedMessages=function(){for(var a=this.savedMessages_.getValues(),b=0;b<a.length;b++)this.writeToLog_(a[b])};
goog.debug.DebugWindow.prototype.openWindow_=function(){if(!this.hasActiveWindow()&&!this.winOpening_){var a=this.getCookie_("dbg","0,0,800,500").split(","),b=Number(a[0]),c=Number(a[1]),d=Number(a[2]);a=Number(a[3]);this.winOpening_=!0;this.win=window.open("",this.getWindowName_(),"width="+d+",height="+a+",toolbar=no,resizable=yes,scrollbars=yes,left="+b+",top="+c+",status=no,screenx="+b+",screeny="+c);this.win||goog.debug.DebugWindow.showedBlockedAlert_||(alert("Logger popup was blocked"),goog.debug.DebugWindow.showedBlockedAlert_=
!0);this.winOpening_=!1;this.win&&this.writeInitialDocument()}};goog.debug.DebugWindow.prototype.getWindowName_=function(){return goog.userAgent.IE?this.identifier.replace(/[\s\-\.,]/g,"_"):this.identifier};goog.debug.DebugWindow.prototype.getStyleRules=function(){return goog.html.SafeStyleSheet.fromConstant(goog.string.Const.from("*{font:normal 14px monospace;}.dbg-sev{color:#F00}.dbg-w{color:#E92}.dbg-sh{background-color:#fd4;font-weight:bold;color:#000}.dbg-i{color:#666}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}"))};
goog.debug.DebugWindow.prototype.writeInitialDocument=function(){if(this.hasActiveWindow()){this.win.document.open();var a=goog.html.SafeHtml.create("div",{"class":"dbg-ev",style:goog.string.Const.from("text-align:center;")},goog.html.SafeHtml.concat(this.welcomeMessage,goog.html.SafeHtml.BR,goog.html.SafeHtml.create("small",{},"Logger: "+this.identifier)));a=goog.html.SafeHtml.concat(goog.html.SafeHtml.createStyle(this.getStyleRules()),goog.html.SafeHtml.create("hr"),a,goog.html.SafeHtml.create("hr"));
this.writeToLog_(a);this.writeSavedMessages()}};goog.debug.DebugWindow.prototype.setCookie_=function(a,b){a=goog.debug.DebugWindow.getCookieKey_(this.identifier,a);document.cookie=a+"="+encodeURIComponent(b)+";path=/;expires="+(new Date(goog.now()+goog.debug.DebugWindow.COOKIE_TIME)).toUTCString()};goog.debug.DebugWindow.prototype.getCookie_=function(a,b){return goog.debug.DebugWindow.getCookieValue_(this.identifier,a,b)};
goog.debug.DebugWindow.getCookieKey_=function(a,b){return(b+a).replace(/[;=\s]/g,"_")};goog.debug.DebugWindow.getCookieValue_=function(a,b,c){a=goog.debug.DebugWindow.getCookieKey_(a,b);b=String(document.cookie);var d=b.indexOf(a+"=");return-1!=d?(c=b.indexOf(";",d),decodeURIComponent(b.substring(d+a.length+1,-1==c?b.length:c))):c||""};goog.debug.DebugWindow.isEnabled=function(a){return"1"==goog.debug.DebugWindow.getCookieValue_(a,"enabled")};
goog.debug.DebugWindow.prototype.saveWindowPositionSize_=function(){this.hasActiveWindow()&&this.setCookie_("dbg",(this.win.screenX||this.win.screenLeft||0)+","+(this.win.screenY||this.win.screenTop||0)+","+(this.win.outerWidth||800)+","+(this.win.outerHeight||500))};goog.debug.DebugWindow.prototype.addFilter=function(a){this.filteredLoggers_[a]=1};goog.debug.DebugWindow.prototype.removeFilter=function(a){delete this.filteredLoggers_[a]};
goog.debug.DebugWindow.prototype.resetBufferWithNewSize=function(a){0<a&&5E4>a&&(this.clear(),this.savedMessages_=new goog.structs.CircularBuffer(a))};goog.debug.FancyWindow=function(a,b){this.readOptionsFromLocalStorage_();goog.debug.DebugWindow.call(this,a,b);this.dh_=null};goog.inherits(goog.debug.FancyWindow,goog.debug.DebugWindow);goog.debug.FancyWindow.HAS_LOCAL_STORE=function(){try{return!!window.localStorage.getItem}catch(a){}return!1}();goog.debug.FancyWindow.LOCAL_STORE_PREFIX="fancywindow.sel.";
goog.debug.FancyWindow.prototype.writeBufferToLog=function(){this.lastCall=goog.now();if(this.hasActiveWindow()){for(var a=this.dh_.getElement("log"),b=100>=a.scrollHeight-(a.scrollTop+a.offsetHeight),c=0;c<this.outputBuffer.length;c++){var d=this.dh_.createDom("DIV","logmsg");goog.dom.safe.setInnerHtml(d,this.outputBuffer[c]);a.appendChild(d)}this.outputBuffer.length=0;this.resizeStuff_();b&&(a.scrollTop=a.scrollHeight)}};
goog.debug.FancyWindow.prototype.writeInitialDocument=function(){if(this.hasActiveWindow()){var a=this.win.document;a.open();goog.dom.safe.documentWrite(a,this.getHtml_());a.close();(goog.userAgent.IE?a.body:this.win).onresize=goog.bind(this.resizeStuff_,this);this.dh_=new goog.dom.DomHelper(a);this.dh_.getElement("openbutton").onclick=goog.bind(this.openOptions_,this);this.dh_.getElement("closebutton").onclick=goog.bind(this.closeOptions_,this);this.dh_.getElement("clearbutton").onclick=goog.bind(this.clear,
this);this.dh_.getElement("exitbutton").onclick=goog.bind(this.exit_,this);this.writeSavedMessages()}};
goog.debug.FancyWindow.prototype.openOptions_=function(){var a=goog.asserts.assert(this.dh_.getElement("optionsarea"));goog.dom.safe.setInnerHtml(a,goog.html.SafeHtml.EMPTY);for(var b=goog.debug.FancyWindow.getLoggers_(),c=this.dh_,d=0;d<b.length;d++){var e=b[d],f=e.getLevel()?e.getLevel().name:"INHERIT";e=c.createDom("DIV",{},this.getDropDown_("sel"+e.getName(),f),c.createDom("SPAN",{},e.getName()||"(root)"));a.appendChild(e)}this.dh_.getElement("options").style.display="block";return!1};
goog.debug.FancyWindow.prototype.getDropDown_=function(a,b){var c=this.dh_;a=c.createDom("SELECT",{id:a});for(var d=goog.debug.Logger.Level.PREDEFINED_LEVELS,e=0;e<d.length;e++){var f=d[e],g=c.createDom("OPTION",{},f.name);b==f.name&&(g.selected=!0);a.appendChild(g)}a.appendChild(c.createDom("OPTION",{selected:"INHERIT"==b},"INHERIT"));return a};
goog.debug.FancyWindow.prototype.closeOptions_=function(){this.dh_.getElement("options").style.display="none";for(var a=goog.debug.FancyWindow.getLoggers_(),b=this.dh_,c=0;c<a.length;c++){var d=a[c],e=b.getElement("sel"+d.getName());e=e.options[e.selectedIndex].text;"INHERIT"==e?d.setLevel(null):d.setLevel(goog.debug.Logger.Level.getPredefinedLevel(e))}this.writeOptionsToLocalStorage_();return!1};
goog.debug.FancyWindow.prototype.resizeStuff_=function(){var a=this.dh_,b=a.getElement("log"),c=a.getElement("head");b.style.top=c.offsetHeight+"px";b.style.height=a.getDocument().body.offsetHeight-c.offsetHeight-(goog.userAgent.IE?4:0)+"px"};goog.debug.FancyWindow.prototype.exit_=function(a){this.setEnabled(!1);this.win&&this.win.close()};
goog.debug.FancyWindow.prototype.getStyleRules=function(){var a=goog.debug.FancyWindow.superClass_.getStyleRules.call(this),b=goog.html.SafeStyleSheet.fromConstant(goog.string.Const.from("html,body{height:100%;width:100%;margin:0px;padding:0px;background-color:#FFF;overflow:hidden}*{}.logmsg{border-bottom:1px solid #CCC;padding:2px;font:90% monospace}#head{position:absolute;width:100%;font:x-small arial;border-bottom:2px solid #999;background-color:#EEE;}#head p{margin:0px 5px;}#log{position:absolute;width:100%;background-color:#FFF;}#options{position:absolute;right:0px;width:50%;height:100%;border-left:1px solid #999;background-color:#DDD;display:none;padding-left: 5px;font:normal small arial;overflow:auto;}#openbutton,#closebutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:5px;font:x-small arial;}#clearbutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:80px;font:x-small arial;}#exitbutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:50px;font:x-small arial;}select{font:x-small arial;margin-right:10px;}hr{border:0;height:5px;background-color:#8c8;color:#8c8;}"));return goog.html.SafeStyleSheet.concat(a,
b)};
goog.debug.FancyWindow.prototype.getHtml_=function(){var a=goog.html.SafeHtml,b=a.create("head",{},a.concat(a.create("title",{},"Logging: "+this.identifier),a.createStyle(this.getStyleRules()))),c=a.create("body",{},a.concat(a.create("div",{id:"log",style:goog.string.Const.from("overflow:auto")}),a.create("div",{id:"head"},a.concat(a.create("p",{},a.create("b",{},"Logging: "+this.identifier)),a.create("p",{},this.welcomeMessage),a.create("span",{id:"clearbutton"},"clear"),a.create("span",{id:"exitbutton"},"exit"),
a.create("span",{id:"openbutton"},"options"))),a.create("div",{id:"options"},a.concat(a.create("big",{},a.create("b",{},"Options:")),a.create("div",{id:"optionsarea"}),a.create("span",{id:"closebutton"},"save and close")))));return a.create("html",{},a.concat(b,c))};
goog.debug.FancyWindow.prototype.writeOptionsToLocalStorage_=function(){if(goog.debug.FancyWindow.HAS_LOCAL_STORE)for(var a=goog.debug.FancyWindow.getLoggers_(),b=goog.debug.FancyWindow.getStoredKeys_(),c=0;c<a.length;c++){var d=goog.debug.FancyWindow.LOCAL_STORE_PREFIX+a[c].getName(),e=a[c].getLevel();d in b?e?window.localStorage.getItem(d)!=e.name&&window.localStorage.setItem(d,e.name):window.localStorage.removeItem(d):e&&window.localStorage.setItem(d,e.name)}};
goog.debug.FancyWindow.prototype.readOptionsFromLocalStorage_=function(){if(goog.debug.FancyWindow.HAS_LOCAL_STORE){var a=goog.debug.FancyWindow.getStoredKeys_(),b;for(b in a){a=b.replace(goog.debug.FancyWindow.LOCAL_STORE_PREFIX,"");a=goog.debug.LogManager.getLogger(a);var c=a.getLevel(),d=window.localStorage.getItem(b).toString();c&&c.toString()==d||a.setLevel(goog.debug.Logger.Level.getPredefinedLevel(d))}}};
goog.debug.FancyWindow.getStoredKeys_=function(){for(var a={},b=0,c=window.localStorage.length;b<c;b++){var d=window.localStorage.key(b);null!=d&&goog.string.startsWith(d,goog.debug.FancyWindow.LOCAL_STORE_PREFIX)&&(a[d]=!0)}return a};goog.debug.FancyWindow.getLoggers_=function(){var a=goog.object.getValues(goog.debug.LogManager.getLoggers());goog.array.sort(a,function(a,c){return goog.array.defaultCompare(a.getName(),c.getName())});return a};goog.debug.Console=function(){this.publishHandler_=goog.bind(this.addLogRecord,this);this.formatter_=new goog.debug.TextFormatter;this.formatter_.showAbsoluteTime=!1;this.formatter_.showExceptionText=!1;this.isCapturing_=this.formatter_.appendNewline=!1;this.logBuffer_="";this.filteredLoggers_={}};goog.debug.Console.prototype.getFormatter=function(){return this.formatter_};
goog.debug.Console.prototype.setCapturing=function(a){if(a!=this.isCapturing_){var b=goog.debug.LogManager.getRoot();a?b.addHandler(this.publishHandler_):b.removeHandler(this.publishHandler_);this.isCapturing_=a}};
goog.debug.Console.prototype.addLogRecord=function(a){function b(a){if(a){if(a.value>=goog.debug.Logger.Level.SEVERE.value)return"error";if(a.value>=goog.debug.Logger.Level.WARNING.value)return"warn";if(a.value>=goog.debug.Logger.Level.CONFIG.value)return"log"}return"debug"}if(!this.filteredLoggers_[a.getLoggerName()]){var c=this.formatter_.formatRecord(a),d=goog.debug.Console.console_;if(d){var e=b(a.getLevel());goog.debug.Console.logToConsole_(d,e,c,a.getException())}else this.logBuffer_+=c}};
goog.debug.Console.prototype.addFilter=function(a){this.filteredLoggers_[a]=!0};goog.debug.Console.prototype.removeFilter=function(a){delete this.filteredLoggers_[a]};goog.debug.Console.instance=null;goog.debug.Console.console_=goog.global.console;goog.debug.Console.setConsole=function(a){goog.debug.Console.console_=a};
goog.debug.Console.autoInstall=function(){goog.debug.Console.instance||(goog.debug.Console.instance=new goog.debug.Console);goog.global.location&&-1!=goog.global.location.href.indexOf("Debug=true")&&goog.debug.Console.instance.setCapturing(!0)};goog.debug.Console.show=function(){alert(goog.debug.Console.instance.logBuffer_)};goog.debug.Console.logToConsole_=function(a,b,c,d){if(a[b])a[b](c,d||"");else a.log(c,d||"")};goog.events.EventTarget=function(){goog.Disposable.call(this);this.eventTargetListeners_=new goog.events.ListenerMap(this);this.actualEventTarget_=this;this.parentEventTarget_=null};goog.inherits(goog.events.EventTarget,goog.Disposable);goog.events.Listenable.addImplementation(goog.events.EventTarget);goog.events.EventTarget.MAX_ANCESTORS_=1E3;goog.events.EventTarget.prototype.getParentEventTarget=function(){return this.parentEventTarget_};
goog.events.EventTarget.prototype.setParentEventTarget=function(a){this.parentEventTarget_=a};goog.events.EventTarget.prototype.addEventListener=function(a,b,c,d){goog.events.listen(this,a,b,c,d)};goog.events.EventTarget.prototype.removeEventListener=function(a,b,c,d){goog.events.unlisten(this,a,b,c,d)};
goog.events.EventTarget.prototype.dispatchEvent=function(a){this.assertInitialized_();var b=this.getParentEventTarget();if(b){var c=[];for(var d=1;b;b=b.getParentEventTarget())c.push(b),goog.asserts.assert(++d<goog.events.EventTarget.MAX_ANCESTORS_,"infinite loop")}return goog.events.EventTarget.dispatchEventInternal_(this.actualEventTarget_,a,c)};
goog.events.EventTarget.prototype.disposeInternal=function(){goog.events.EventTarget.superClass_.disposeInternal.call(this);this.removeAllListeners();this.parentEventTarget_=null};goog.events.EventTarget.prototype.listen=function(a,b,c,d){this.assertInitialized_();return this.eventTargetListeners_.add(String(a),b,!1,c,d)};goog.events.EventTarget.prototype.listenOnce=function(a,b,c,d){return this.eventTargetListeners_.add(String(a),b,!0,c,d)};
goog.events.EventTarget.prototype.unlisten=function(a,b,c,d){return this.eventTargetListeners_.remove(String(a),b,c,d)};goog.events.EventTarget.prototype.unlistenByKey=function(a){return this.eventTargetListeners_.removeByKey(a)};goog.events.EventTarget.prototype.removeAllListeners=function(a){return this.eventTargetListeners_?this.eventTargetListeners_.removeAll(a):0};
goog.events.EventTarget.prototype.fireListeners=function(a,b,c){a=this.eventTargetListeners_.listeners[String(a)];if(!a)return!0;a=a.concat();for(var d=!0,e=0;e<a.length;++e){var f=a[e];if(f&&!f.removed&&f.capture==b){var g=f.listener,h=f.handler||f.src;f.callOnce&&this.unlistenByKey(f);d=!1!==g.call(h,c)&&d}}return d&&0!=c.returnValue_};goog.events.EventTarget.prototype.getListeners=function(a,b){return this.eventTargetListeners_.getListeners(String(a),b)};
goog.events.EventTarget.prototype.getListener=function(a,b,c,d){return this.eventTargetListeners_.getListener(String(a),b,c,d)};goog.events.EventTarget.prototype.hasListener=function(a,b){a=goog.isDef(a)?String(a):void 0;return this.eventTargetListeners_.hasListener(a,b)};goog.events.EventTarget.prototype.setTargetForTesting=function(a){this.actualEventTarget_=a};goog.events.EventTarget.prototype.assertInitialized_=function(){goog.asserts.assert(this.eventTargetListeners_,"Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?")};
goog.events.EventTarget.dispatchEventInternal_=function(a,b,c){var d=b.type||b;if(goog.isString(b))b=new goog.events.Event(b,a);else if(b instanceof goog.events.Event)b.target=b.target||a;else{var e=b;b=new goog.events.Event(d,a);goog.object.extend(b,e)}e=!0;if(c)for(var f=c.length-1;!b.propagationStopped_&&0<=f;f--){var g=b.currentTarget=c[f];e=g.fireListeners(d,!0,b)&&e}b.propagationStopped_||(g=b.currentTarget=a,e=g.fireListeners(d,!0,b)&&e,b.propagationStopped_||(e=g.fireListeners(d,!1,b)&&e));
if(c)for(f=0;!b.propagationStopped_&&f<c.length;f++)g=b.currentTarget=c[f],e=g.fireListeners(d,!1,b)&&e;return e};goog.Thenable=function(){};goog.Thenable.prototype.then=function(a,b,c){};goog.Thenable.IMPLEMENTED_BY_PROP="$goog_Thenable";goog.Thenable.addImplementation=function(a){COMPILED?a.prototype[goog.Thenable.IMPLEMENTED_BY_PROP]=!0:a.prototype.$goog_Thenable=!0};goog.Thenable.isImplementedBy=function(a){if(!a)return!1;try{return COMPILED?!!a[goog.Thenable.IMPLEMENTED_BY_PROP]:!!a.$goog_Thenable}catch(b){return!1}};goog.async={};goog.async.FreeList=function(a,b,c){this.limit_=c;this.create_=a;this.reset_=b;this.occupants_=0;this.head_=null};goog.async.FreeList.prototype.get=function(){if(0<this.occupants_){this.occupants_--;var a=this.head_;this.head_=a.next;a.next=null}else a=this.create_();return a};goog.async.FreeList.prototype.put=function(a){this.reset_(a);this.occupants_<this.limit_&&(this.occupants_++,a.next=this.head_,this.head_=a)};goog.async.FreeList.prototype.occupants=function(){return this.occupants_};goog.async.WorkQueue=function(){this.workTail_=this.workHead_=null};goog.async.WorkQueue.DEFAULT_MAX_UNUSED=100;goog.async.WorkQueue.freelist_=new goog.async.FreeList(function(){return new goog.async.WorkItem},function(a){a.reset()},goog.async.WorkQueue.DEFAULT_MAX_UNUSED);goog.async.WorkQueue.prototype.add=function(a,b){var c=this.getUnusedItem_();c.set(a,b);this.workTail_?this.workTail_.next=c:(goog.asserts.assert(!this.workHead_),this.workHead_=c);this.workTail_=c};
goog.async.WorkQueue.prototype.remove=function(){var a=null;this.workHead_&&(a=this.workHead_,this.workHead_=this.workHead_.next,this.workHead_||(this.workTail_=null),a.next=null);return a};goog.async.WorkQueue.prototype.returnUnused=function(a){goog.async.WorkQueue.freelist_.put(a)};goog.async.WorkQueue.prototype.getUnusedItem_=function(){return goog.async.WorkQueue.freelist_.get()};goog.async.WorkItem=function(){this.next=this.scope=this.fn=null};
goog.async.WorkItem.prototype.set=function(a,b){this.fn=a;this.scope=b;this.next=null};goog.async.WorkItem.prototype.reset=function(){this.next=this.scope=this.fn=null};goog.async.throwException=function(a){goog.global.setTimeout(function(){throw a;},0)};goog.async.nextTick=function(a,b,c){var d=a;b&&(d=goog.bind(a,b));d=goog.async.nextTick.wrapCallback_(d);goog.isFunction(goog.global.setImmediate)&&(c||goog.async.nextTick.useSetImmediate_())?goog.global.setImmediate(d):(goog.async.nextTick.setImmediate_||(goog.async.nextTick.setImmediate_=goog.async.nextTick.getSetImmediateEmulator_()),goog.async.nextTick.setImmediate_(d))};
goog.async.nextTick.useSetImmediate_=function(){return goog.global.Window&&goog.global.Window.prototype&&!goog.labs.userAgent.browser.isEdge()&&goog.global.Window.prototype.setImmediate==goog.global.setImmediate?!1:!0};
goog.async.nextTick.getSetImmediateEmulator_=function(){var a=goog.global.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!goog.labs.userAgent.engine.isPresto()&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow;a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+
"//"+b.location.host;a=goog.bind(function(a){if(("*"==d||a.origin==d)&&a.data==c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!goog.labs.userAgent.browser.isIE()){var b=new a,c={},d=c;b.port1.onmessage=function(){if(goog.isDef(c.next)){c=c.next;var a=c.cb;c.cb=null;a()}};return function(a){d.next={cb:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in
document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){goog.global.setTimeout(a,0)}};goog.async.nextTick.wrapCallback_=goog.functions.identity;goog.debug.entryPointRegistry.register(function(a){goog.async.nextTick.wrapCallback_=a});goog.ASSUME_NATIVE_PROMISE=!1;goog.async.run=function(a,b){goog.async.run.schedule_||goog.async.run.initializeRunner_();goog.async.run.workQueueScheduled_||(goog.async.run.schedule_(),goog.async.run.workQueueScheduled_=!0);goog.async.run.workQueue_.add(a,b)};
goog.async.run.initializeRunner_=function(){if(goog.ASSUME_NATIVE_PROMISE||goog.global.Promise&&goog.global.Promise.resolve){var a=goog.global.Promise.resolve(void 0);goog.async.run.schedule_=function(){a.then(goog.async.run.processWorkQueue)}}else goog.async.run.schedule_=function(){goog.async.nextTick(goog.async.run.processWorkQueue)}};goog.async.run.forceNextTick=function(a){goog.async.run.schedule_=function(){goog.async.nextTick(goog.async.run.processWorkQueue);a&&a(goog.async.run.processWorkQueue)}};
goog.async.run.workQueueScheduled_=!1;goog.async.run.workQueue_=new goog.async.WorkQueue;goog.DEBUG&&(goog.async.run.resetQueue=function(){goog.async.run.workQueueScheduled_=!1;goog.async.run.workQueue_=new goog.async.WorkQueue});goog.async.run.processWorkQueue=function(){for(var a;a=goog.async.run.workQueue_.remove();){try{a.fn.call(a.scope)}catch(b){goog.async.throwException(b)}goog.async.run.workQueue_.returnUnused(a)}goog.async.run.workQueueScheduled_=!1};goog.promise={};goog.promise.Resolver=function(){};goog.Promise=function(a,b){this.state_=goog.Promise.State_.PENDING;this.result_=void 0;this.callbackEntriesTail_=this.callbackEntries_=this.parent_=null;this.executing_=!1;0<goog.Promise.UNHANDLED_REJECTION_DELAY?this.unhandledRejectionId_=0:0==goog.Promise.UNHANDLED_REJECTION_DELAY&&(this.hadUnhandledRejection_=!1);goog.Promise.LONG_STACK_TRACES&&(this.stack_=[],this.addStackTrace_(Error("created")),this.currentStep_=0);if(a!=goog.nullFunction)try{var c=this;a.call(b,function(a){c.resolve_(goog.Promise.State_.FULFILLED,
a)},function(a){if(goog.DEBUG&&!(a instanceof goog.Promise.CancellationError))try{if(a instanceof Error)throw a;throw Error("Promise rejected.");}catch(e){}c.resolve_(goog.Promise.State_.REJECTED,a)})}catch(d){this.resolve_(goog.Promise.State_.REJECTED,d)}};goog.Promise.LONG_STACK_TRACES=!1;goog.Promise.UNHANDLED_REJECTION_DELAY=0;goog.Promise.State_={PENDING:0,BLOCKED:1,FULFILLED:2,REJECTED:3};
goog.Promise.CallbackEntry_=function(){this.next=this.context=this.onRejected=this.onFulfilled=this.child=null;this.always=!1};goog.Promise.CallbackEntry_.prototype.reset=function(){this.context=this.onRejected=this.onFulfilled=this.child=null;this.always=!1};goog.Promise.DEFAULT_MAX_UNUSED=100;goog.Promise.freelist_=new goog.async.FreeList(function(){return new goog.Promise.CallbackEntry_},function(a){a.reset()},goog.Promise.DEFAULT_MAX_UNUSED);
goog.Promise.getCallbackEntry_=function(a,b,c){var d=goog.Promise.freelist_.get();d.onFulfilled=a;d.onRejected=b;d.context=c;return d};goog.Promise.returnEntry_=function(a){goog.Promise.freelist_.put(a)};goog.Promise.resolve=function(a){if(a instanceof goog.Promise)return a;var b=new goog.Promise(goog.nullFunction);b.resolve_(goog.Promise.State_.FULFILLED,a);return b};goog.Promise.reject=function(a){return new goog.Promise(function(b,c){c(a)})};
goog.Promise.resolveThen_=function(a,b,c){goog.Promise.maybeThen_(a,b,c,null)||goog.async.run(goog.partial(b,a))};goog.Promise.race=function(a){return new goog.Promise(function(b,c){a.length||b(void 0);for(var d=0,e;d<a.length;d++)e=a[d],goog.Promise.resolveThen_(e,b,c)})};
goog.Promise.all=function(a){return new goog.Promise(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},g=function(a){c(a)},h=0,k;h<a.length;h++)k=a[h],goog.Promise.resolveThen_(k,goog.partial(f,h),g);else b(e)})};
goog.Promise.allSettled=function(a){return new goog.Promise(function(b,c){var d=a.length,e=[];if(d){c=function(a,c,f){d--;e[a]=c?{fulfilled:!0,value:f}:{fulfilled:!1,reason:f};0==d&&b(e)};for(var f=0,g;f<a.length;f++)g=a[f],goog.Promise.resolveThen_(g,goog.partial(c,f,!0),goog.partial(c,f,!1))}else b(e)})};
goog.Promise.firstFulfilled=function(a){return new goog.Promise(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a){b(a)},g=function(a,b){d--;e[a]=b;0==d&&c(e)},h=0,k;h<a.length;h++)k=a[h],goog.Promise.resolveThen_(k,f,goog.partial(g,h));else b(void 0)})};goog.Promise.withResolver=function(){var a,b,c=new goog.Promise(function(c,e){a=c;b=e});return new goog.Promise.Resolver_(c,a,b)};
goog.Promise.prototype.then=function(a,b,c){null!=a&&goog.asserts.assertFunction(a,"opt_onFulfilled should be a function.");null!=b&&goog.asserts.assertFunction(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("then"));return this.addChildPromise_(goog.isFunction(a)?a:null,goog.isFunction(b)?b:null,c)};goog.Thenable.addImplementation(goog.Promise);
goog.Promise.prototype.thenVoid=function(a,b,c){null!=a&&goog.asserts.assertFunction(a,"opt_onFulfilled should be a function.");null!=b&&goog.asserts.assertFunction(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("then"));this.addCallbackEntry_(goog.Promise.getCallbackEntry_(a||goog.nullFunction,b||null,c))};
goog.Promise.prototype.thenAlways=function(a,b){goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("thenAlways"));a=goog.Promise.getCallbackEntry_(a,a,b);a.always=!0;this.addCallbackEntry_(a);return this};goog.Promise.prototype.thenCatch=function(a,b){goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("thenCatch"));return this.addChildPromise_(null,a,b)};
goog.Promise.prototype.cancel=function(a){this.state_==goog.Promise.State_.PENDING&&goog.async.run(function(){var b=new goog.Promise.CancellationError(a);this.cancelInternal_(b)},this)};goog.Promise.prototype.cancelInternal_=function(a){this.state_==goog.Promise.State_.PENDING&&(this.parent_?(this.parent_.cancelChild_(this,a),this.parent_=null):this.resolve_(goog.Promise.State_.REJECTED,a))};
goog.Promise.prototype.cancelChild_=function(a,b){if(this.callbackEntries_){for(var c=0,d=null,e=null,f=this.callbackEntries_;f&&(f.always||(c++,f.child==a&&(d=f),!(d&&1<c)));f=f.next)d||(e=f);d&&(this.state_==goog.Promise.State_.PENDING&&1==c?this.cancelInternal_(b):(e?this.removeEntryAfter_(e):this.popEntry_(),this.executeCallback_(d,goog.Promise.State_.REJECTED,b)))}};
goog.Promise.prototype.addCallbackEntry_=function(a){this.hasEntry_()||this.state_!=goog.Promise.State_.FULFILLED&&this.state_!=goog.Promise.State_.REJECTED||this.scheduleCallbacks_();this.queueEntry_(a)};
goog.Promise.prototype.addChildPromise_=function(a,b,c){var d=goog.Promise.getCallbackEntry_(null,null,null);d.child=new goog.Promise(function(e,f){d.onFulfilled=a?function(b){try{var d=a.call(c,b);e(d)}catch(k){f(k)}}:e;d.onRejected=b?function(a){try{var d=b.call(c,a);!goog.isDef(d)&&a instanceof goog.Promise.CancellationError?f(a):e(d)}catch(k){f(k)}}:f});d.child.parent_=this;this.addCallbackEntry_(d);return d.child};
goog.Promise.prototype.unblockAndFulfill_=function(a){goog.asserts.assert(this.state_==goog.Promise.State_.BLOCKED);this.state_=goog.Promise.State_.PENDING;this.resolve_(goog.Promise.State_.FULFILLED,a)};goog.Promise.prototype.unblockAndReject_=function(a){goog.asserts.assert(this.state_==goog.Promise.State_.BLOCKED);this.state_=goog.Promise.State_.PENDING;this.resolve_(goog.Promise.State_.REJECTED,a)};
goog.Promise.prototype.resolve_=function(a,b){this.state_==goog.Promise.State_.PENDING&&(this===b&&(a=goog.Promise.State_.REJECTED,b=new TypeError("Promise cannot resolve to itself")),this.state_=goog.Promise.State_.BLOCKED,goog.Promise.maybeThen_(b,this.unblockAndFulfill_,this.unblockAndReject_,this)||(this.result_=b,this.state_=a,this.parent_=null,this.scheduleCallbacks_(),a!=goog.Promise.State_.REJECTED||b instanceof goog.Promise.CancellationError||goog.Promise.addUnhandledRejection_(this,b)))};
goog.Promise.maybeThen_=function(a,b,c,d){if(a instanceof goog.Promise)return a.thenVoid(b,c,d),!0;if(goog.Thenable.isImplementedBy(a))return a.then(b,c,d),!0;if(goog.isObject(a))try{var e=a.then;if(goog.isFunction(e))return goog.Promise.tryThen_(a,e,b,c,d),!0}catch(f){return c.call(d,f),!0}return!1};goog.Promise.tryThen_=function(a,b,c,d,e){var f=!1,g=function(a){f||(f=!0,c.call(e,a))},h=function(a){f||(f=!0,d.call(e,a))};try{b.call(a,g,h)}catch(k){h(k)}};
goog.Promise.prototype.scheduleCallbacks_=function(){this.executing_||(this.executing_=!0,goog.async.run(this.executeCallbacks_,this))};goog.Promise.prototype.hasEntry_=function(){return!!this.callbackEntries_};goog.Promise.prototype.queueEntry_=function(a){goog.asserts.assert(null!=a.onFulfilled);this.callbackEntriesTail_?this.callbackEntriesTail_.next=a:this.callbackEntries_=a;this.callbackEntriesTail_=a};
goog.Promise.prototype.popEntry_=function(){var a=null;this.callbackEntries_&&(a=this.callbackEntries_,this.callbackEntries_=a.next,a.next=null);this.callbackEntries_||(this.callbackEntriesTail_=null);null!=a&&goog.asserts.assert(null!=a.onFulfilled);return a};goog.Promise.prototype.removeEntryAfter_=function(a){goog.asserts.assert(this.callbackEntries_);goog.asserts.assert(null!=a);a.next==this.callbackEntriesTail_&&(this.callbackEntriesTail_=a);a.next=a.next.next};
goog.Promise.prototype.executeCallbacks_=function(){for(var a;a=this.popEntry_();)goog.Promise.LONG_STACK_TRACES&&this.currentStep_++,this.executeCallback_(a,this.state_,this.result_);this.executing_=!1};
goog.Promise.prototype.executeCallback_=function(a,b,c){b==goog.Promise.State_.REJECTED&&a.onRejected&&!a.always&&this.removeUnhandledRejection_();if(a.child)a.child.parent_=null,goog.Promise.invokeCallback_(a,b,c);else try{a.always?a.onFulfilled.call(a.context):goog.Promise.invokeCallback_(a,b,c)}catch(d){goog.Promise.handleRejection_.call(null,d)}goog.Promise.returnEntry_(a)};
goog.Promise.invokeCallback_=function(a,b,c){b==goog.Promise.State_.FULFILLED?a.onFulfilled.call(a.context,c):a.onRejected&&a.onRejected.call(a.context,c)};goog.Promise.prototype.addStackTrace_=function(a){if(goog.Promise.LONG_STACK_TRACES&&goog.isString(a.stack)){var b=a.stack.split("\n",4)[3];a=a.message;a+=Array(11-a.length).join(" ");this.stack_.push(a+b)}};
goog.Promise.prototype.appendLongStack_=function(a){if(goog.Promise.LONG_STACK_TRACES&&a&&goog.isString(a.stack)&&this.stack_.length){for(var b=["Promise trace:"],c=this;c;c=c.parent_){for(var d=this.currentStep_;0<=d;d--)b.push(c.stack_[d]);b.push("Value: ["+(c.state_==goog.Promise.State_.REJECTED?"REJECTED":"FULFILLED")+"] <"+String(c.result_)+">")}a.stack+="\n\n"+b.join("\n")}};
goog.Promise.prototype.removeUnhandledRejection_=function(){if(0<goog.Promise.UNHANDLED_REJECTION_DELAY)for(var a=this;a&&a.unhandledRejectionId_;a=a.parent_)goog.global.clearTimeout(a.unhandledRejectionId_),a.unhandledRejectionId_=0;else if(0==goog.Promise.UNHANDLED_REJECTION_DELAY)for(a=this;a&&a.hadUnhandledRejection_;a=a.parent_)a.hadUnhandledRejection_=!1};
goog.Promise.addUnhandledRejection_=function(a,b){0<goog.Promise.UNHANDLED_REJECTION_DELAY?a.unhandledRejectionId_=goog.global.setTimeout(function(){a.appendLongStack_(b);goog.Promise.handleRejection_.call(null,b)},goog.Promise.UNHANDLED_REJECTION_DELAY):0==goog.Promise.UNHANDLED_REJECTION_DELAY&&(a.hadUnhandledRejection_=!0,goog.async.run(function(){a.hadUnhandledRejection_&&(a.appendLongStack_(b),goog.Promise.handleRejection_.call(null,b))}))};goog.Promise.handleRejection_=goog.async.throwException;
goog.Promise.setUnhandledRejectionHandler=function(a){goog.Promise.handleRejection_=a};goog.Promise.CancellationError=function(a){goog.debug.Error.call(this,a)};goog.inherits(goog.Promise.CancellationError,goog.debug.Error);goog.Promise.CancellationError.prototype.name="cancel";goog.Promise.Resolver_=function(a,b,c){this.promise=a;this.resolve=b;this.reject=c};goog.Timer=function(a,b){goog.events.EventTarget.call(this);this.interval_=a||1;this.timerObject_=b||goog.Timer.defaultTimerObject;this.boundTick_=goog.bind(this.tick_,this);this.last_=goog.now()};goog.inherits(goog.Timer,goog.events.EventTarget);goog.Timer.MAX_TIMEOUT_=2147483647;goog.Timer.INVALID_TIMEOUT_ID_=-1;goog.Timer.prototype.enabled=!1;goog.Timer.defaultTimerObject=goog.global;goog.Timer.intervalScale=.8;goog.Timer.prototype.timer_=null;goog.Timer.prototype.getInterval=function(){return this.interval_};
goog.Timer.prototype.setInterval=function(a){this.interval_=a;this.timer_&&this.enabled?(this.stop(),this.start()):this.timer_&&this.stop()};goog.Timer.prototype.tick_=function(){if(this.enabled){var a=goog.now()-this.last_;0<a&&a<this.interval_*goog.Timer.intervalScale?this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_-a):(this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=null),this.dispatchTick(),this.enabled&&(this.stop(),this.start()))}};
goog.Timer.prototype.dispatchTick=function(){this.dispatchEvent(goog.Timer.TICK)};goog.Timer.prototype.start=function(){this.enabled=!0;this.timer_||(this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_),this.last_=goog.now())};goog.Timer.prototype.stop=function(){this.enabled=!1;this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=null)};goog.Timer.prototype.disposeInternal=function(){goog.Timer.superClass_.disposeInternal.call(this);this.stop();delete this.timerObject_};
goog.Timer.TICK="tick";goog.Timer.callOnce=function(a,b,c){if(goog.isFunction(a))c&&(a=goog.bind(a,c));else if(a&&"function"==typeof a.handleEvent)a=goog.bind(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(b)>goog.Timer.MAX_TIMEOUT_?goog.Timer.INVALID_TIMEOUT_ID_:goog.Timer.defaultTimerObject.setTimeout(a,b||0)};goog.Timer.clear=function(a){goog.Timer.defaultTimerObject.clearTimeout(a)};
goog.Timer.promise=function(a,b){var c=null;return(new goog.Promise(function(d,e){c=goog.Timer.callOnce(function(){d(b)},a);c==goog.Timer.INVALID_TIMEOUT_ID_&&e(Error("Failed to schedule timer."))})).thenCatch(function(a){goog.Timer.clear(c);throw a;})};goog.json={};goog.json.USE_NATIVE_JSON=!1;goog.json.TRY_NATIVE_JSON=!1;goog.json.isValid=function(a){return/^\s*$/.test(a)?!1:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/(?:"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)[\s\u2028\u2029]*(?=:|,|]|}|$)/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""))};goog.json.errorLogger_=goog.nullFunction;goog.json.setErrorLogger=function(a){goog.json.errorLogger_=a};
goog.json.parse=goog.json.USE_NATIVE_JSON?goog.global.JSON.parse:function(a){if(goog.json.TRY_NATIVE_JSON)try{return goog.global.JSON.parse(a)}catch(d){var b=d}a=String(a);if(goog.json.isValid(a))try{var c=eval("("+a+")");b&&goog.json.errorLogger_("Invalid JSON: "+a,b);return c}catch(d){}throw Error("Invalid JSON string: "+a);};goog.json.serialize=goog.json.USE_NATIVE_JSON?goog.global.JSON.stringify:function(a,b){return(new goog.json.Serializer(b)).serialize(a)};
goog.json.Serializer=function(a){this.replacer_=a};goog.json.Serializer.prototype.serialize=function(a){var b=[];this.serializeInternal(a,b);return b.join("")};
goog.json.Serializer.prototype.serializeInternal=function(a,b){if(null==a)b.push("null");else{if("object"==typeof a){if(goog.isArray(a)){this.serializeArray(a,b);return}if(a instanceof String||a instanceof Number||a instanceof Boolean)a=a.valueOf();else{this.serializeObject_(a,b);return}}switch(typeof a){case "string":this.serializeString_(a,b);break;case "number":this.serializeNumber_(a,b);break;case "boolean":b.push(String(a));break;case "function":b.push("null");break;default:throw Error("Unknown type: "+
typeof a);}}};goog.json.Serializer.charToJsonCharCache_={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"};goog.json.Serializer.charsToReplace_=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;
goog.json.Serializer.prototype.serializeString_=function(a,b){b.push('"',a.replace(goog.json.Serializer.charsToReplace_,function(a){var b=goog.json.Serializer.charToJsonCharCache_[a];b||(b="\\u"+(a.charCodeAt(0)|65536).toString(16).substr(1),goog.json.Serializer.charToJsonCharCache_[a]=b);return b}),'"')};goog.json.Serializer.prototype.serializeNumber_=function(a,b){b.push(isFinite(a)&&!isNaN(a)?String(a):"null")};
goog.json.Serializer.prototype.serializeArray=function(a,b){var c=a.length;b.push("[");for(var d="",e=0;e<c;e++)b.push(d),d=a[e],this.serializeInternal(this.replacer_?this.replacer_.call(a,String(e),d):d,b),d=",";b.push("]")};
goog.json.Serializer.prototype.serializeObject_=function(a,b){b.push("{");var c="",d;for(d in a)if(Object.prototype.hasOwnProperty.call(a,d)){var e=a[d];"function"!=typeof e&&(b.push(c),this.serializeString_(d,b),b.push(":"),this.serializeInternal(this.replacer_?this.replacer_.call(a,d,e):e,b),c=",")}b.push("}")};goog.json.hybrid={};goog.json.hybrid.stringify=goog.json.USE_NATIVE_JSON?goog.global.JSON.stringify:function(a){if(goog.global.JSON)try{return goog.global.JSON.stringify(a)}catch(b){}return goog.json.serialize(a)};goog.json.hybrid.parse_=function(a,b){if(goog.global.JSON)try{var c=goog.global.JSON.parse(a);goog.asserts.assert("object"==typeof c);return c}catch(d){}return b(a)};goog.json.hybrid.parse=goog.json.USE_NATIVE_JSON?goog.global.JSON.parse:function(a){return goog.json.hybrid.parse_(a,goog.json.parse)};goog.net={};goog.net.ErrorCode={NO_ERROR:0,ACCESS_DENIED:1,FILE_NOT_FOUND:2,FF_SILENT_ERROR:3,CUSTOM_ERROR:4,EXCEPTION:5,HTTP_ERROR:6,ABORT:7,TIMEOUT:8,OFFLINE:9};
goog.net.ErrorCode.getDebugMessage=function(a){switch(a){case goog.net.ErrorCode.NO_ERROR:return"No Error";case goog.net.ErrorCode.ACCESS_DENIED:return"Access denied to content document";case goog.net.ErrorCode.FILE_NOT_FOUND:return"File not found";case goog.net.ErrorCode.FF_SILENT_ERROR:return"Firefox silently errored";case goog.net.ErrorCode.CUSTOM_ERROR:return"Application custom error";case goog.net.ErrorCode.EXCEPTION:return"An exception occurred";case goog.net.ErrorCode.HTTP_ERROR:return"Http response at 400 or 500 level";
case goog.net.ErrorCode.ABORT:return"Request was aborted";case goog.net.ErrorCode.TIMEOUT:return"Request timed out";case goog.net.ErrorCode.OFFLINE:return"The resource is not available offline";default:return"Unrecognized error code"}};goog.net.EventType={COMPLETE:"complete",SUCCESS:"success",ERROR:"error",ABORT:"abort",READY:"ready",READY_STATE_CHANGE:"readystatechange",TIMEOUT:"timeout",INCREMENTAL_DATA:"incrementaldata",PROGRESS:"progress",DOWNLOAD_PROGRESS:"downloadprogress",UPLOAD_PROGRESS:"uploadprogress"};goog.net.HttpStatus={CONTINUE:100,SWITCHING_PROTOCOLS:101,OK:200,CREATED:201,ACCEPTED:202,NON_AUTHORITATIVE_INFORMATION:203,NO_CONTENT:204,RESET_CONTENT:205,PARTIAL_CONTENT:206,MULTI_STATUS:207,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,USE_PROXY:305,TEMPORARY_REDIRECT:307,PERMANENT_REDIRECT:308,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,
CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,REQUEST_ENTITY_TOO_LARGE:413,REQUEST_URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,REQUEST_RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,UNPROCESSABLE_ENTITY:422,LOCKED:423,FAILED_DEPENDENCY:424,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,REQUEST_HEADER_FIELDS_TOO_LARGE:431,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,INSUFFICIENT_STORAGE:507,
NETWORK_AUTHENTICATION_REQUIRED:511,QUIRK_IE_NO_CONTENT:1223};goog.net.HttpStatus.isSuccess=function(a){switch(a){case goog.net.HttpStatus.OK:case goog.net.HttpStatus.CREATED:case goog.net.HttpStatus.ACCEPTED:case goog.net.HttpStatus.NO_CONTENT:case goog.net.HttpStatus.PARTIAL_CONTENT:case goog.net.HttpStatus.NOT_MODIFIED:case goog.net.HttpStatus.QUIRK_IE_NO_CONTENT:return!0;default:return!1}};goog.net.XhrLike=function(){};goog.net.XhrLike.prototype.open=function(a,b,c,d,e){};goog.net.XhrLike.prototype.send=function(a){};goog.net.XhrLike.prototype.abort=function(){};goog.net.XhrLike.prototype.setRequestHeader=function(a,b){};goog.net.XhrLike.prototype.getResponseHeader=function(a){};goog.net.XhrLike.prototype.getAllResponseHeaders=function(){};goog.net.XmlHttpFactory=function(){};goog.net.XmlHttpFactory.prototype.cachedOptions_=null;goog.net.XmlHttpFactory.prototype.createInstance=goog.abstractMethod;goog.net.XmlHttpFactory.prototype.getOptions=function(){return this.cachedOptions_||(this.cachedOptions_=this.internalGetOptions())};goog.net.XmlHttpFactory.prototype.internalGetOptions=goog.abstractMethod;goog.net.WrapperXmlHttpFactory=function(a,b){goog.net.XmlHttpFactory.call(this);this.xhrFactory_=a;this.optionsFactory_=b};goog.inherits(goog.net.WrapperXmlHttpFactory,goog.net.XmlHttpFactory);goog.net.WrapperXmlHttpFactory.prototype.createInstance=function(){return this.xhrFactory_()};goog.net.WrapperXmlHttpFactory.prototype.getOptions=function(){return this.optionsFactory_()};goog.net.XmlHttp=function(){return goog.net.XmlHttp.factory_.createInstance()};goog.net.XmlHttp.ASSUME_NATIVE_XHR=!1;goog.net.XmlHttpDefines={};goog.net.XmlHttpDefines.ASSUME_NATIVE_XHR=!1;goog.net.XmlHttp.getOptions=function(){return goog.net.XmlHttp.factory_.getOptions()};goog.net.XmlHttp.OptionType={USE_NULL_FUNCTION:0,LOCAL_REQUEST_ERROR:1};goog.net.XmlHttp.ReadyState={UNINITIALIZED:0,LOADING:1,LOADED:2,INTERACTIVE:3,COMPLETE:4};
goog.net.XmlHttp.setFactory=function(a,b){goog.net.XmlHttp.setGlobalFactory(new goog.net.WrapperXmlHttpFactory(goog.asserts.assert(a),goog.asserts.assert(b)))};goog.net.XmlHttp.setGlobalFactory=function(a){goog.net.XmlHttp.factory_=a};goog.net.DefaultXmlHttpFactory=function(){goog.net.XmlHttpFactory.call(this)};goog.inherits(goog.net.DefaultXmlHttpFactory,goog.net.XmlHttpFactory);
goog.net.DefaultXmlHttpFactory.prototype.createInstance=function(){var a=this.getProgId_();return a?new ActiveXObject(a):new XMLHttpRequest};goog.net.DefaultXmlHttpFactory.prototype.internalGetOptions=function(){var a={};this.getProgId_()&&(a[goog.net.XmlHttp.OptionType.USE_NULL_FUNCTION]=!0,a[goog.net.XmlHttp.OptionType.LOCAL_REQUEST_ERROR]=!0);return a};
goog.net.DefaultXmlHttpFactory.prototype.getProgId_=function(){if(goog.net.XmlHttp.ASSUME_NATIVE_XHR||goog.net.XmlHttpDefines.ASSUME_NATIVE_XHR)return"";if(!this.ieProgId_&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var a=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],b=0;b<a.length;b++){var c=a[b];try{return new ActiveXObject(c),this.ieProgId_=c}catch(d){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");
}return this.ieProgId_};goog.net.XmlHttp.setGlobalFactory(new goog.net.DefaultXmlHttpFactory);goog.net.XhrIo=function(a){goog.events.EventTarget.call(this);this.headers=new goog.structs.Map;this.xmlHttpFactory_=a||null;this.active_=!1;this.xhrOptions_=this.xhr_=null;this.lastMethod_=this.lastUri_="";this.lastErrorCode_=goog.net.ErrorCode.NO_ERROR;this.lastError_="";this.inAbort_=this.inOpen_=this.inSend_=this.errorDispatched_=!1;this.timeoutInterval_=0;this.timeoutId_=null;this.responseType_=goog.net.XhrIo.ResponseType.DEFAULT;this.useXhr2Timeout_=this.progressEventsEnabled_=this.withCredentials_=
!1};goog.inherits(goog.net.XhrIo,goog.events.EventTarget);goog.net.XhrIo.ResponseType={DEFAULT:"",TEXT:"text",DOCUMENT:"document",BLOB:"blob",ARRAY_BUFFER:"arraybuffer"};goog.net.XhrIo.prototype.logger_=goog.log.getLogger("goog.net.XhrIo");goog.net.XhrIo.CONTENT_TYPE_HEADER="Content-Type";goog.net.XhrIo.CONTENT_TRANSFER_ENCODING="Content-Transfer-Encoding";goog.net.XhrIo.HTTP_SCHEME_PATTERN=/^https?$/i;goog.net.XhrIo.METHODS_WITH_FORM_DATA=["POST","PUT"];goog.net.XhrIo.FORM_CONTENT_TYPE="application/x-www-form-urlencoded;charset=utf-8";
goog.net.XhrIo.XHR2_TIMEOUT_="timeout";goog.net.XhrIo.XHR2_ON_TIMEOUT_="ontimeout";goog.net.XhrIo.sendInstances_=[];goog.net.XhrIo.send=function(a,b,c,d,e,f,g){var h=new goog.net.XhrIo;goog.net.XhrIo.sendInstances_.push(h);b&&h.listen(goog.net.EventType.COMPLETE,b);h.listenOnce(goog.net.EventType.READY,h.cleanupSend_);f&&h.setTimeoutInterval(f);g&&h.setWithCredentials(g);h.send(a,c,d,e);return h};goog.net.XhrIo.cleanup=function(){for(var a=goog.net.XhrIo.sendInstances_;a.length;)a.pop().dispose()};
goog.net.XhrIo.protectEntryPoints=function(a){goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_=a.protectEntryPoint(goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_)};goog.net.XhrIo.prototype.cleanupSend_=function(){this.dispose();goog.array.remove(goog.net.XhrIo.sendInstances_,this)};goog.net.XhrIo.prototype.getTimeoutInterval=function(){return this.timeoutInterval_};goog.net.XhrIo.prototype.setTimeoutInterval=function(a){this.timeoutInterval_=Math.max(0,a)};
goog.net.XhrIo.prototype.setResponseType=function(a){this.responseType_=a};goog.net.XhrIo.prototype.getResponseType=function(){return this.responseType_};goog.net.XhrIo.prototype.setWithCredentials=function(a){this.withCredentials_=a};goog.net.XhrIo.prototype.getWithCredentials=function(){return this.withCredentials_};goog.net.XhrIo.prototype.setProgressEventsEnabled=function(a){this.progressEventsEnabled_=a};goog.net.XhrIo.prototype.getProgressEventsEnabled=function(){return this.progressEventsEnabled_};
goog.net.XhrIo.prototype.send=function(a,b,c,d){if(this.xhr_)throw Error("[goog.net.XhrIo] Object is active with another request="+this.lastUri_+"; newUri="+a);b=b?b.toUpperCase():"GET";this.lastUri_=a;this.lastError_="";this.lastErrorCode_=goog.net.ErrorCode.NO_ERROR;this.lastMethod_=b;this.errorDispatched_=!1;this.active_=!0;this.xhr_=this.createXhr();this.xhrOptions_=this.xmlHttpFactory_?this.xmlHttpFactory_.getOptions():goog.net.XmlHttp.getOptions();this.xhr_.onreadystatechange=goog.bind(this.onReadyStateChange_,
this);this.getProgressEventsEnabled()&&"onprogress"in this.xhr_&&(this.xhr_.onprogress=goog.bind(function(a){this.onProgressHandler_(a,!0)},this),this.xhr_.upload&&(this.xhr_.upload.onprogress=goog.bind(this.onProgressHandler_,this)));try{goog.log.fine(this.logger_,this.formatMsg_("Opening Xhr")),this.inOpen_=!0,this.xhr_.open(b,String(a),!0),this.inOpen_=!1}catch(f){goog.log.fine(this.logger_,this.formatMsg_("Error opening Xhr: "+f.message));this.error_(goog.net.ErrorCode.EXCEPTION,f);return}a=c||
"";var e=this.headers.clone();d&&goog.structs.forEach(d,function(a,b){e.set(b,a)});d=goog.array.find(e.getKeys(),goog.net.XhrIo.isContentTypeHeader_);c=goog.global.FormData&&a instanceof goog.global.FormData;!goog.array.contains(goog.net.XhrIo.METHODS_WITH_FORM_DATA,b)||d||c||e.set(goog.net.XhrIo.CONTENT_TYPE_HEADER,goog.net.XhrIo.FORM_CONTENT_TYPE);e.forEach(function(a,b){this.xhr_.setRequestHeader(b,a)},this);this.responseType_&&(this.xhr_.responseType=this.responseType_);"withCredentials"in this.xhr_&&
this.xhr_.withCredentials!==this.withCredentials_&&(this.xhr_.withCredentials=this.withCredentials_);try{this.cleanUpTimeoutTimer_(),0<this.timeoutInterval_&&(this.useXhr2Timeout_=goog.net.XhrIo.shouldUseXhr2Timeout_(this.xhr_),goog.log.fine(this.logger_,this.formatMsg_("Will abort after "+this.timeoutInterval_+"ms if incomplete, xhr2 "+this.useXhr2Timeout_)),this.useXhr2Timeout_?(this.xhr_[goog.net.XhrIo.XHR2_TIMEOUT_]=this.timeoutInterval_,this.xhr_[goog.net.XhrIo.XHR2_ON_TIMEOUT_]=goog.bind(this.timeout_,
this)):this.timeoutId_=goog.Timer.callOnce(this.timeout_,this.timeoutInterval_,this)),goog.log.fine(this.logger_,this.formatMsg_("Sending request")),this.inSend_=!0,this.xhr_.send(a),this.inSend_=!1}catch(f){goog.log.fine(this.logger_,this.formatMsg_("Send error: "+f.message)),this.error_(goog.net.ErrorCode.EXCEPTION,f)}};goog.net.XhrIo.shouldUseXhr2Timeout_=function(a){return goog.userAgent.IE&&goog.userAgent.isVersionOrHigher(9)&&goog.isNumber(a[goog.net.XhrIo.XHR2_TIMEOUT_])&&goog.isDef(a[goog.net.XhrIo.XHR2_ON_TIMEOUT_])};
goog.net.XhrIo.isContentTypeHeader_=function(a){return goog.string.caseInsensitiveEquals(goog.net.XhrIo.CONTENT_TYPE_HEADER,a)};goog.net.XhrIo.prototype.createXhr=function(){return this.xmlHttpFactory_?this.xmlHttpFactory_.createInstance():goog.net.XmlHttp()};
goog.net.XhrIo.prototype.timeout_=function(){"undefined"!=typeof goog&&this.xhr_&&(this.lastError_="Timed out after "+this.timeoutInterval_+"ms, aborting",this.lastErrorCode_=goog.net.ErrorCode.TIMEOUT,goog.log.fine(this.logger_,this.formatMsg_(this.lastError_)),this.dispatchEvent(goog.net.EventType.TIMEOUT),this.abort(goog.net.ErrorCode.TIMEOUT))};
goog.net.XhrIo.prototype.error_=function(a,b){this.active_=!1;this.xhr_&&(this.inAbort_=!0,this.xhr_.abort(),this.inAbort_=!1);this.lastError_=b;this.lastErrorCode_=a;this.dispatchErrors_();this.cleanUpXhr_()};goog.net.XhrIo.prototype.dispatchErrors_=function(){this.errorDispatched_||(this.errorDispatched_=!0,this.dispatchEvent(goog.net.EventType.COMPLETE),this.dispatchEvent(goog.net.EventType.ERROR))};
goog.net.XhrIo.prototype.abort=function(a){this.xhr_&&this.active_&&(goog.log.fine(this.logger_,this.formatMsg_("Aborting")),this.active_=!1,this.inAbort_=!0,this.xhr_.abort(),this.inAbort_=!1,this.lastErrorCode_=a||goog.net.ErrorCode.ABORT,this.dispatchEvent(goog.net.EventType.COMPLETE),this.dispatchEvent(goog.net.EventType.ABORT),this.cleanUpXhr_())};
goog.net.XhrIo.prototype.disposeInternal=function(){this.xhr_&&(this.active_&&(this.active_=!1,this.inAbort_=!0,this.xhr_.abort(),this.inAbort_=!1),this.cleanUpXhr_(!0));goog.net.XhrIo.superClass_.disposeInternal.call(this)};goog.net.XhrIo.prototype.onReadyStateChange_=function(){if(!this.isDisposed())if(this.inOpen_||this.inSend_||this.inAbort_)this.onReadyStateChangeHelper_();else this.onReadyStateChangeEntryPoint_()};goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_=function(){this.onReadyStateChangeHelper_()};
goog.net.XhrIo.prototype.onReadyStateChangeHelper_=function(){if(this.active_&&"undefined"!=typeof goog)if(this.xhrOptions_[goog.net.XmlHttp.OptionType.LOCAL_REQUEST_ERROR]&&this.getReadyState()==goog.net.XmlHttp.ReadyState.COMPLETE&&2==this.getStatus())goog.log.fine(this.logger_,this.formatMsg_("Local request error detected and ignored"));else if(this.inSend_&&this.getReadyState()==goog.net.XmlHttp.ReadyState.COMPLETE)goog.Timer.callOnce(this.onReadyStateChange_,0,this);else if(this.dispatchEvent(goog.net.EventType.READY_STATE_CHANGE),
this.isComplete()){goog.log.fine(this.logger_,this.formatMsg_("Request complete"));this.active_=!1;try{this.isSuccess()?(this.dispatchEvent(goog.net.EventType.COMPLETE),this.dispatchEvent(goog.net.EventType.SUCCESS)):(this.lastErrorCode_=goog.net.ErrorCode.HTTP_ERROR,this.lastError_=this.getStatusText()+" ["+this.getStatus()+"]",this.dispatchErrors_())}finally{this.cleanUpXhr_()}}};
goog.net.XhrIo.prototype.onProgressHandler_=function(a,b){goog.asserts.assert(a.type===goog.net.EventType.PROGRESS,"goog.net.EventType.PROGRESS is of the same type as raw XHR progress.");this.dispatchEvent(goog.net.XhrIo.buildProgressEvent_(a,goog.net.EventType.PROGRESS));this.dispatchEvent(goog.net.XhrIo.buildProgressEvent_(a,b?goog.net.EventType.DOWNLOAD_PROGRESS:goog.net.EventType.UPLOAD_PROGRESS))};
goog.net.XhrIo.buildProgressEvent_=function(a,b){return{type:b,lengthComputable:a.lengthComputable,loaded:a.loaded,total:a.total}};
goog.net.XhrIo.prototype.cleanUpXhr_=function(a){if(this.xhr_){this.cleanUpTimeoutTimer_();var b=this.xhr_,c=this.xhrOptions_[goog.net.XmlHttp.OptionType.USE_NULL_FUNCTION]?goog.nullFunction:null;this.xhrOptions_=this.xhr_=null;a||this.dispatchEvent(goog.net.EventType.READY);try{b.onreadystatechange=c}catch(d){goog.log.error(this.logger_,"Problem encountered resetting onreadystatechange: "+d.message)}}};
goog.net.XhrIo.prototype.cleanUpTimeoutTimer_=function(){this.xhr_&&this.useXhr2Timeout_&&(this.xhr_[goog.net.XhrIo.XHR2_ON_TIMEOUT_]=null);this.timeoutId_&&(goog.Timer.clear(this.timeoutId_),this.timeoutId_=null)};goog.net.XhrIo.prototype.isActive=function(){return!!this.xhr_};goog.net.XhrIo.prototype.isComplete=function(){return this.getReadyState()==goog.net.XmlHttp.ReadyState.COMPLETE};
goog.net.XhrIo.prototype.isSuccess=function(){var a=this.getStatus();return goog.net.HttpStatus.isSuccess(a)||0===a&&!this.isLastUriEffectiveSchemeHttp_()};goog.net.XhrIo.prototype.isLastUriEffectiveSchemeHttp_=function(){var a=goog.uri.utils.getEffectiveScheme(String(this.lastUri_));return goog.net.XhrIo.HTTP_SCHEME_PATTERN.test(a)};goog.net.XhrIo.prototype.getReadyState=function(){return this.xhr_?this.xhr_.readyState:goog.net.XmlHttp.ReadyState.UNINITIALIZED};
goog.net.XhrIo.prototype.getStatus=function(){try{return this.getReadyState()>goog.net.XmlHttp.ReadyState.LOADED?this.xhr_.status:-1}catch(a){return-1}};goog.net.XhrIo.prototype.getStatusText=function(){try{return this.getReadyState()>goog.net.XmlHttp.ReadyState.LOADED?this.xhr_.statusText:""}catch(a){return goog.log.fine(this.logger_,"Can not get status: "+a.message),""}};goog.net.XhrIo.prototype.getLastUri=function(){return String(this.lastUri_)};
goog.net.XhrIo.prototype.getResponseText=function(){try{return this.xhr_?this.xhr_.responseText:""}catch(a){return goog.log.fine(this.logger_,"Can not get responseText: "+a.message),""}};goog.net.XhrIo.prototype.getResponseBody=function(){try{if(this.xhr_&&"responseBody"in this.xhr_)return this.xhr_.responseBody}catch(a){goog.log.fine(this.logger_,"Can not get responseBody: "+a.message)}return null};
goog.net.XhrIo.prototype.getResponseXml=function(){try{return this.xhr_?this.xhr_.responseXML:null}catch(a){return goog.log.fine(this.logger_,"Can not get responseXML: "+a.message),null}};goog.net.XhrIo.prototype.getResponseJson=function(a){if(this.xhr_){var b=this.xhr_.responseText;a&&0==b.indexOf(a)&&(b=b.substring(a.length));return goog.json.hybrid.parse(b)}};
goog.net.XhrIo.prototype.getResponse=function(){try{if(!this.xhr_)return null;if("response"in this.xhr_)return this.xhr_.response;switch(this.responseType_){case goog.net.XhrIo.ResponseType.DEFAULT:case goog.net.XhrIo.ResponseType.TEXT:return this.xhr_.responseText;case goog.net.XhrIo.ResponseType.ARRAY_BUFFER:if("mozResponseArrayBuffer"in this.xhr_)return this.xhr_.mozResponseArrayBuffer}goog.log.error(this.logger_,"Response type "+this.responseType_+" is not supported on this browser");return null}catch(a){return goog.log.fine(this.logger_,
"Can not get response: "+a.message),null}};goog.net.XhrIo.prototype.getResponseHeader=function(a){if(this.xhr_&&this.isComplete())return a=this.xhr_.getResponseHeader(a),goog.isNull(a)?void 0:a};goog.net.XhrIo.prototype.getAllResponseHeaders=function(){return this.xhr_&&this.isComplete()?this.xhr_.getAllResponseHeaders()||"":""};
goog.net.XhrIo.prototype.getResponseHeaders=function(){for(var a={},b=this.getAllResponseHeaders().split("\r\n"),c=0;c<b.length;c++)if(!goog.string.isEmptyOrWhitespace(b[c])){var d=goog.string.splitLimit(b[c],":",1),e=d[0];d=d[1];if(goog.isString(d)){d=d.trim();var f=a[e]||[];a[e]=f;f.push(d)}}return goog.object.map(a,function(a){return a.join(", ")})};goog.net.XhrIo.prototype.getStreamingResponseHeader=function(a){return this.xhr_?this.xhr_.getResponseHeader(a):null};
goog.net.XhrIo.prototype.getAllStreamingResponseHeaders=function(){return this.xhr_?this.xhr_.getAllResponseHeaders():""};goog.net.XhrIo.prototype.getLastErrorCode=function(){return this.lastErrorCode_};goog.net.XhrIo.prototype.getLastError=function(){return goog.isString(this.lastError_)?this.lastError_:String(this.lastError_)};goog.net.XhrIo.prototype.formatMsg_=function(a){return a+" ["+this.lastMethod_+" "+this.lastUri_+" "+this.getStatus()+"]"};
goog.debug.entryPointRegistry.register(function(a){goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_=a(goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_)});goog.ui={};goog.ui.ac={};goog.ui.ac.RenderOptions=function(){};goog.ui.ac.RenderOptions.prototype.preserveHilited_=!1;goog.ui.ac.RenderOptions.prototype.setPreserveHilited=function(a){this.preserveHilited_=a};goog.ui.ac.RenderOptions.prototype.getPreserveHilited=function(){return this.preserveHilited_};goog.ui.ac.RenderOptions.prototype.setAutoHilite=function(a){this.autoHilite_=a};goog.ui.ac.RenderOptions.prototype.getAutoHilite=function(){return this.autoHilite_};goog.ui.ac.AutoComplete=function(a,b,c){goog.events.EventTarget.call(this);this.matcher_=a;this.selectionHandler_=c;this.renderer_=b;goog.events.listen(b,[goog.ui.ac.AutoComplete.EventType.HILITE,goog.ui.ac.AutoComplete.EventType.SELECT,goog.ui.ac.AutoComplete.EventType.CANCEL_DISMISS,goog.ui.ac.AutoComplete.EventType.DISMISS],this.handleEvent,!1,this);this.token_=null;this.rows_=[];this.hiliteId_=-1;this.firstRowId_=0;this.dismissTimer_=this.target_=null;this.inputToAnchorMap_={}};
goog.inherits(goog.ui.ac.AutoComplete,goog.events.EventTarget);goog.ui.ac.AutoComplete.prototype.maxMatches_=10;goog.ui.ac.AutoComplete.prototype.autoHilite_=!0;goog.ui.ac.AutoComplete.prototype.allowFreeSelect_=!1;goog.ui.ac.AutoComplete.prototype.wrap_=!1;goog.ui.ac.AutoComplete.prototype.triggerSuggestionsOnUpdate_=!1;goog.ui.ac.AutoComplete.EventType={ROW_HILITE:"rowhilite",HILITE:"hilite",SELECT:"select",DISMISS:"dismiss",CANCEL_DISMISS:"canceldismiss",UPDATE:"update",SUGGESTIONS_UPDATE:"suggestionsupdate"};
goog.ui.ac.AutoComplete.prototype.getMatcher=function(){return goog.asserts.assert(this.matcher_)};goog.ui.ac.AutoComplete.prototype.setMatcher=function(a){this.matcher_=a};goog.ui.ac.AutoComplete.prototype.getSelectionHandler=function(){return goog.asserts.assert(this.selectionHandler_)};goog.ui.ac.AutoComplete.prototype.getRenderer=function(){return this.renderer_};goog.ui.ac.AutoComplete.prototype.setRenderer=function(a){this.renderer_=a};goog.ui.ac.AutoComplete.prototype.getToken=function(){return this.token_};
goog.ui.ac.AutoComplete.prototype.setTokenInternal=function(a){this.token_=a};goog.ui.ac.AutoComplete.prototype.getSuggestion=function(a){return this.rows_[a]};goog.ui.ac.AutoComplete.prototype.getAllSuggestions=function(){return goog.asserts.assert(this.rows_)};goog.ui.ac.AutoComplete.prototype.getSuggestionCount=function(){return this.rows_.length};goog.ui.ac.AutoComplete.prototype.getHighlightedId=function(){return this.hiliteId_};
goog.ui.ac.AutoComplete.prototype.handleEvent=function(a){var b=this.matcher_;if(a.target==this.renderer_)switch(a.type){case goog.ui.ac.AutoComplete.EventType.HILITE:this.hiliteId(a.row);break;case goog.ui.ac.AutoComplete.EventType.SELECT:var c=!1;if(goog.isNumber(a.row)){a=a.row;c=this.getIndexOfId(a);var d=this.rows_[c];c=!!d&&b.isRowDisabled&&b.isRowDisabled(d);d&&!c&&this.hiliteId_!=a&&this.hiliteId(a)}c||this.selectHilited();break;case goog.ui.ac.AutoComplete.EventType.CANCEL_DISMISS:this.cancelDelayedDismiss();
break;case goog.ui.ac.AutoComplete.EventType.DISMISS:this.dismissOnDelay()}};goog.ui.ac.AutoComplete.prototype.setMaxMatches=function(a){this.maxMatches_=a};goog.ui.ac.AutoComplete.prototype.setAutoHilite=function(a){this.autoHilite_=a};goog.ui.ac.AutoComplete.prototype.setAllowFreeSelect=function(a){this.allowFreeSelect_=a};goog.ui.ac.AutoComplete.prototype.setWrap=function(a){this.wrap_=a};
goog.ui.ac.AutoComplete.prototype.setTriggerSuggestionsOnUpdate=function(a){this.triggerSuggestionsOnUpdate_=a};goog.ui.ac.AutoComplete.prototype.setToken=function(a,b){this.token_!=a&&(this.token_=a,this.matcher_.requestMatchingRows(this.token_,this.maxMatches_,goog.bind(this.matchListener_,this),b),this.cancelDelayedDismiss())};goog.ui.ac.AutoComplete.prototype.getTarget=function(){return this.target_};goog.ui.ac.AutoComplete.prototype.setTarget=function(a){this.target_=a};
goog.ui.ac.AutoComplete.prototype.isOpen=function(){return this.renderer_.isVisible()};goog.ui.ac.AutoComplete.prototype.getRowCount=function(){return this.getSuggestionCount()};
goog.ui.ac.AutoComplete.prototype.hiliteNext=function(){for(var a=this.firstRowId_+this.rows_.length-1,b=this.hiliteId_,c=0;c<this.rows_.length;c++){if(b>=this.firstRowId_&&b<a)b++;else if(-1==b)b=this.firstRowId_;else if(this.allowFreeSelect_&&b==a){this.hiliteId(-1);break}else if(this.wrap_&&b==a)b=this.firstRowId_;else break;if(this.hiliteId(b))return!0}return!1};
goog.ui.ac.AutoComplete.prototype.hilitePrev=function(){for(var a=this.firstRowId_+this.rows_.length-1,b=this.hiliteId_,c=0;c<this.rows_.length;c++){if(b>this.firstRowId_)b--;else if(this.allowFreeSelect_&&b==this.firstRowId_){this.hiliteId(-1);break}else if(!this.wrap_||-1!=b&&b!=this.firstRowId_)break;else b=a;if(this.hiliteId(b))return!0}return!1};
goog.ui.ac.AutoComplete.prototype.hiliteId=function(a){var b=this.getIndexOfId(a),c=this.rows_[b];return c&&this.matcher_.isRowDisabled&&this.matcher_.isRowDisabled(c)?!1:(this.hiliteId_=a,this.renderer_.hiliteId(a),-1!=b)};goog.ui.ac.AutoComplete.prototype.hiliteIndex=function(a){return this.hiliteId(this.getIdOfIndex_(a))};
goog.ui.ac.AutoComplete.prototype.selectHilited=function(){var a=this.getIndexOfId(this.hiliteId_);if(-1!=a){var b=this.rows_[a],c=this.selectionHandler_.selectRow(b);this.triggerSuggestionsOnUpdate_?(this.token_=null,this.dismissOnDelay()):this.dismiss();c||(this.dispatchEvent({type:goog.ui.ac.AutoComplete.EventType.UPDATE,row:b,index:a}),this.triggerSuggestionsOnUpdate_&&this.selectionHandler_.update(!0));return!0}this.dismiss();this.dispatchEvent({type:goog.ui.ac.AutoComplete.EventType.UPDATE,
row:null,index:null});return!1};goog.ui.ac.AutoComplete.prototype.hasHighlight=function(){return this.isOpen()&&-1!=this.getIndexOfId(this.hiliteId_)};goog.ui.ac.AutoComplete.prototype.dismiss=function(){this.hiliteId_=-1;this.token_=null;this.firstRowId_+=this.rows_.length;this.rows_=[];window.clearTimeout(this.dismissTimer_);this.dismissTimer_=null;this.renderer_.dismiss();this.dispatchEvent(goog.ui.ac.AutoComplete.EventType.SUGGESTIONS_UPDATE);this.dispatchEvent(goog.ui.ac.AutoComplete.EventType.DISMISS)};
goog.ui.ac.AutoComplete.prototype.dismissOnDelay=function(){this.dismissTimer_||(this.dismissTimer_=window.setTimeout(goog.bind(this.dismiss,this),100))};goog.ui.ac.AutoComplete.prototype.immediatelyCancelDelayedDismiss_=function(){return this.dismissTimer_?(window.clearTimeout(this.dismissTimer_),this.dismissTimer_=null,!0):!1};
goog.ui.ac.AutoComplete.prototype.cancelDelayedDismiss=function(){this.immediatelyCancelDelayedDismiss_()||window.setTimeout(goog.bind(this.immediatelyCancelDelayedDismiss_,this),10)};goog.ui.ac.AutoComplete.prototype.disposeInternal=function(){goog.ui.ac.AutoComplete.superClass_.disposeInternal.call(this);delete this.inputToAnchorMap_;this.renderer_.dispose();this.selectionHandler_.dispose();this.matcher_=null};
goog.ui.ac.AutoComplete.prototype.matchListener_=function(a,b,c){this.token_==a&&this.renderRows(b,c)};
goog.ui.ac.AutoComplete.prototype.renderRows=function(a,b){var c="object"==goog.typeOf(b)&&b;b=(c?c.getPreserveHilited():b)?this.getIndexOfId(this.hiliteId_):-1;this.firstRowId_+=this.rows_.length;this.rows_=a;for(var d=[],e=0;e<a.length;++e)d.push({id:this.getIdOfIndex_(e),data:a[e]});a=null;this.target_&&(a=this.inputToAnchorMap_[goog.getUid(this.target_)]||this.target_);this.renderer_.setAnchorElement(a);this.renderer_.renderRows(d,this.token_,this.target_);a=this.autoHilite_;c&&void 0!==c.getAutoHilite()&&
(a=c.getAutoHilite());this.hiliteId_=-1;(a||0<=b)&&0!=d.length&&this.token_&&(0<=b?this.hiliteId(this.getIdOfIndex_(b)):this.hiliteNext());this.dispatchEvent(goog.ui.ac.AutoComplete.EventType.SUGGESTIONS_UPDATE)};goog.ui.ac.AutoComplete.prototype.getIndexOfId=function(a){a-=this.firstRowId_;return 0>a||a>=this.rows_.length?-1:a};goog.ui.ac.AutoComplete.prototype.getIdOfIndex_=function(a){return this.firstRowId_+a};
goog.ui.ac.AutoComplete.prototype.attachInputs=function(a){var b=this.selectionHandler_;b.attachInputs.apply(b,arguments)};goog.ui.ac.AutoComplete.prototype.detachInputs=function(a){var b=this.selectionHandler_;b.detachInputs.apply(b,arguments);goog.array.forEach(arguments,function(a){goog.object.remove(this.inputToAnchorMap_,goog.getUid(a))},this)};goog.ui.ac.AutoComplete.prototype.attachInputWithAnchor=function(a,b){this.inputToAnchorMap_[goog.getUid(a)]=b;this.attachInputs(a)};
goog.ui.ac.AutoComplete.prototype.update=function(a){this.selectionHandler_.update(a)};goog.a11y={};goog.a11y.aria={};
goog.a11y.aria.Role={ALERT:"alert",ALERTDIALOG:"alertdialog",APPLICATION:"application",ARTICLE:"article",BANNER:"banner",BUTTON:"button",CHECKBOX:"checkbox",COLUMNHEADER:"columnheader",COMBOBOX:"combobox",COMPLEMENTARY:"complementary",CONTENTINFO:"contentinfo",DEFINITION:"definition",DIALOG:"dialog",DIRECTORY:"directory",DOCUMENT:"document",FORM:"form",GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",HEADING:"heading",IMG:"img",LINK:"link",LIST:"list",LISTBOX:"listbox",LISTITEM:"listitem",LOG:"log",
MAIN:"main",MARQUEE:"marquee",MATH:"math",MENU:"menu",MENUBAR:"menubar",MENU_ITEM:"menuitem",MENU_ITEM_CHECKBOX:"menuitemcheckbox",MENU_ITEM_RADIO:"menuitemradio",NAVIGATION:"navigation",NOTE:"note",OPTION:"option",PRESENTATION:"presentation",PROGRESSBAR:"progressbar",RADIO:"radio",RADIOGROUP:"radiogroup",REGION:"region",ROW:"row",ROWGROUP:"rowgroup",ROWHEADER:"rowheader",SCROLLBAR:"scrollbar",SEARCH:"search",SEPARATOR:"separator",SLIDER:"slider",SPINBUTTON:"spinbutton",STATUS:"status",TAB:"tab",
TAB_LIST:"tablist",TAB_PANEL:"tabpanel",TEXTBOX:"textbox",TEXTINFO:"textinfo",TIMER:"timer",TOOLBAR:"toolbar",TOOLTIP:"tooltip",TREE:"tree",TREEGRID:"treegrid",TREEITEM:"treeitem"};goog.a11y.aria.State={ACTIVEDESCENDANT:"activedescendant",ATOMIC:"atomic",AUTOCOMPLETE:"autocomplete",BUSY:"busy",CHECKED:"checked",COLINDEX:"colindex",CONTROLS:"controls",DESCRIBEDBY:"describedby",DISABLED:"disabled",DROPEFFECT:"dropeffect",EXPANDED:"expanded",FLOWTO:"flowto",GRABBED:"grabbed",HASPOPUP:"haspopup",HIDDEN:"hidden",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",LIVE:"live",MULTILINE:"multiline",MULTISELECTABLE:"multiselectable",ORIENTATION:"orientation",OWNS:"owns",
POSINSET:"posinset",PRESSED:"pressed",READONLY:"readonly",RELEVANT:"relevant",REQUIRED:"required",ROWINDEX:"rowindex",SELECTED:"selected",SETSIZE:"setsize",SORT:"sort",VALUEMAX:"valuemax",VALUEMIN:"valuemin",VALUENOW:"valuenow",VALUETEXT:"valuetext"};goog.a11y.aria.AutoCompleteValues={INLINE:"inline",LIST:"list",BOTH:"both",NONE:"none"};goog.a11y.aria.DropEffectValues={COPY:"copy",MOVE:"move",LINK:"link",EXECUTE:"execute",POPUP:"popup",NONE:"none"};
goog.a11y.aria.LivePriority={OFF:"off",POLITE:"polite",ASSERTIVE:"assertive"};goog.a11y.aria.OrientationValues={VERTICAL:"vertical",HORIZONTAL:"horizontal"};goog.a11y.aria.RelevantValues={ADDITIONS:"additions",REMOVALS:"removals",TEXT:"text",ALL:"all"};goog.a11y.aria.SortValues={ASCENDING:"ascending",DESCENDING:"descending",NONE:"none",OTHER:"other"};goog.a11y.aria.CheckedValues={TRUE:"true",FALSE:"false",MIXED:"mixed",UNDEFINED:"undefined"};
goog.a11y.aria.ExpandedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"};goog.a11y.aria.GrabbedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"};goog.a11y.aria.InvalidValues={FALSE:"false",TRUE:"true",GRAMMAR:"grammar",SPELLING:"spelling"};goog.a11y.aria.PressedValues={TRUE:"true",FALSE:"false",MIXED:"mixed",UNDEFINED:"undefined"};goog.a11y.aria.SelectedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"};goog.a11y.aria.datatables={};
goog.a11y.aria.datatables.getDefaultValuesMap=function(){goog.a11y.aria.DefaultStateValueMap_||(goog.a11y.aria.DefaultStateValueMap_={[goog.a11y.aria.State.ATOMIC]:!1,[goog.a11y.aria.State.AUTOCOMPLETE]:"none",[goog.a11y.aria.State.DROPEFFECT]:"none",[goog.a11y.aria.State.HASPOPUP]:!1,[goog.a11y.aria.State.LIVE]:"off",[goog.a11y.aria.State.MULTILINE]:!1,[goog.a11y.aria.State.MULTISELECTABLE]:!1,[goog.a11y.aria.State.ORIENTATION]:"vertical",[goog.a11y.aria.State.READONLY]:!1,[goog.a11y.aria.State.RELEVANT]:"additions text",
[goog.a11y.aria.State.REQUIRED]:!1,[goog.a11y.aria.State.SORT]:"none",[goog.a11y.aria.State.BUSY]:!1,[goog.a11y.aria.State.DISABLED]:!1,[goog.a11y.aria.State.HIDDEN]:!1,[goog.a11y.aria.State.INVALID]:"false"});return goog.a11y.aria.DefaultStateValueMap_};goog.a11y.aria.ARIA_PREFIX_="aria-";goog.a11y.aria.ROLE_ATTRIBUTE_="role";goog.a11y.aria.TAGS_WITH_ASSUMED_ROLES_=goog.object.createSet("A AREA BUTTON HEAD INPUT LINK MENU META OPTGROUP OPTION PROGRESS STYLE SELECT SOURCE TEXTAREA TITLE TRACK".split(" "));
goog.a11y.aria.CONTAINER_ROLES_=[goog.a11y.aria.Role.COMBOBOX,goog.a11y.aria.Role.GRID,goog.a11y.aria.Role.GROUP,goog.a11y.aria.Role.LISTBOX,goog.a11y.aria.Role.MENU,goog.a11y.aria.Role.MENUBAR,goog.a11y.aria.Role.RADIOGROUP,goog.a11y.aria.Role.ROW,goog.a11y.aria.Role.ROWGROUP,goog.a11y.aria.Role.TAB_LIST,goog.a11y.aria.Role.TEXTBOX,goog.a11y.aria.Role.TOOLBAR,goog.a11y.aria.Role.TREE,goog.a11y.aria.Role.TREEGRID];
goog.a11y.aria.setRole=function(a,b){b?(goog.asserts.ENABLE_ASSERTS&&goog.asserts.assert(goog.object.containsValue(goog.a11y.aria.Role,b),"No such ARIA role "+b),a.setAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_,b)):goog.a11y.aria.removeRole(a)};goog.a11y.aria.getRole=function(a){return a.getAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_)||null};goog.a11y.aria.removeRole=function(a){a.removeAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_)};
goog.a11y.aria.setState=function(a,b,c){goog.isArray(c)&&(c=c.join(" "));var d=goog.a11y.aria.getAriaAttributeName_(b);""===c||void 0==c?(c=goog.a11y.aria.datatables.getDefaultValuesMap(),b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)};goog.a11y.aria.toggleState=function(a,b){var c=goog.a11y.aria.getState(a,b);goog.string.isEmptyOrWhitespace(goog.string.makeSafe(c))||"true"==c||"false"==c?goog.a11y.aria.setState(a,b,"true"==c?"false":"true"):goog.a11y.aria.removeState(a,b)};
goog.a11y.aria.removeState=function(a,b){a.removeAttribute(goog.a11y.aria.getAriaAttributeName_(b))};goog.a11y.aria.getState=function(a,b){a=a.getAttribute(goog.a11y.aria.getAriaAttributeName_(b));return null==a||void 0==a?"":String(a)};goog.a11y.aria.getActiveDescendant=function(a){var b=goog.a11y.aria.getState(a,goog.a11y.aria.State.ACTIVEDESCENDANT);return goog.dom.getOwnerDocument(a).getElementById(b)};
goog.a11y.aria.setActiveDescendant=function(a,b){var c="";b&&(c=b.id,goog.asserts.assert(c,"The active element should have an id."));goog.a11y.aria.setState(a,goog.a11y.aria.State.ACTIVEDESCENDANT,c)};goog.a11y.aria.getLabel=function(a){return goog.a11y.aria.getState(a,goog.a11y.aria.State.LABEL)};goog.a11y.aria.setLabel=function(a,b){goog.a11y.aria.setState(a,goog.a11y.aria.State.LABEL,b)};
goog.a11y.aria.assertRoleIsSetInternalUtil=function(a,b){goog.a11y.aria.TAGS_WITH_ASSUMED_ROLES_[a.tagName]||(a=goog.a11y.aria.getRole(a),goog.asserts.assert(null!=a,"The element ARIA role cannot be null."),goog.asserts.assert(goog.array.contains(b,a),'Non existing or incorrect role set for element.The role set is "'+a+'". The role should be any of "'+b+'". Check the ARIA specification for more details http://www.w3.org/TR/wai-aria/roles.'))};
goog.a11y.aria.getStateBoolean=function(a,b){a=a.getAttribute(goog.a11y.aria.getAriaAttributeName_(b));goog.asserts.assert(goog.isBoolean(a)||null==a||"true"==a||"false"==a);return null==a?a:goog.isBoolean(a)?a:"true"==a};goog.a11y.aria.getStateNumber=function(a,b){a=a.getAttribute(goog.a11y.aria.getAriaAttributeName_(b));goog.asserts.assert((null==a||!isNaN(Number(a)))&&!goog.isBoolean(a));return null==a?null:Number(a)};
goog.a11y.aria.getStateString=function(a,b){a=a.getAttribute(goog.a11y.aria.getAriaAttributeName_(b));goog.asserts.assert((null==a||goog.isString(a))&&(""==a||isNaN(Number(a)))&&"true"!=a&&"false"!=a);return null==a||""==a?null:a};goog.a11y.aria.getStringArrayStateInternalUtil=function(a,b){a=a.getAttribute(goog.a11y.aria.getAriaAttributeName_(b));return goog.a11y.aria.splitStringOnWhitespace_(a)};goog.a11y.aria.hasState=function(a,b){return a.hasAttribute(goog.a11y.aria.getAriaAttributeName_(b))};
goog.a11y.aria.isContainerRole=function(a){a=goog.a11y.aria.getRole(a);return goog.array.contains(goog.a11y.aria.CONTAINER_ROLES_,a)};goog.a11y.aria.splitStringOnWhitespace_=function(a){return a?a.split(/\s+/):[]};goog.a11y.aria.getAriaAttributeName_=function(a){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.assert(a,"ARIA attribute cannot be empty."),goog.asserts.assert(goog.object.containsValue(goog.a11y.aria.State,a),"No such ARIA attribute "+a));return goog.a11y.aria.ARIA_PREFIX_+a};goog.color={};
goog.color.names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};goog.color.parse=function(a){var b={};a=String(a);var c=goog.color.prependHashIfNecessaryHelper(a);if(goog.color.isValidHexColor_(c))return b.hex=goog.color.normalizeHex(c),b.type="hex",b;c=goog.color.isValidRgbColor_(a);if(c.length)return b.hex=goog.color.rgbArrayToHex(c),b.type="rgb",b;if(goog.color.names&&(c=goog.color.names[a.toLowerCase()]))return b.hex=c,b.type="named",b;throw Error(a+" is not a valid color string");};
goog.color.isValidColor=function(a){var b=goog.color.prependHashIfNecessaryHelper(a);return!!(goog.color.isValidHexColor_(b)||goog.color.isValidRgbColor_(a).length||goog.color.names&&goog.color.names[a.toLowerCase()])};goog.color.parseRgb=function(a){var b=goog.color.isValidRgbColor_(a);if(!b.length)throw Error(a+" is not a valid RGB color");return b};goog.color.hexToRgbStyle=function(a){return goog.color.rgbStyle_(goog.color.hexToRgb(a))};goog.color.hexTripletRe_=/#(.)(.)(.)/;
goog.color.normalizeHex=function(a){if(!goog.color.isValidHexColor_(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(goog.color.hexTripletRe_,"#$1$1$2$2$3$3"));return a.toLowerCase()};goog.color.hexToRgb=function(a){a=goog.color.normalizeHex(a);a=parseInt(a.substr(1),16);return[a>>16,a>>8&255,a&255]};
goog.color.rgbToHex=function(a,b,c){a=Number(a);b=Number(b);c=Number(c);if(a!=(a&255)||b!=(b&255)||c!=(c&255))throw Error('"('+a+","+b+","+c+'") is not a valid RGB color');b=a<<16|b<<8|c;return 16>a?"#"+(16777216|b).toString(16).substr(1):"#"+b.toString(16)};goog.color.rgbArrayToHex=function(a){return goog.color.rgbToHex(a[0],a[1],a[2])};
goog.color.rgbToHsl=function(a,b,c){a/=255;b/=255;c/=255;var d=Math.max(a,b,c),e=Math.min(a,b,c),f=0,g=0,h=.5*(d+e);d!=e&&(d==a?f=60*(b-c)/(d-e):d==b?f=60*(c-a)/(d-e)+120:d==c&&(f=60*(a-b)/(d-e)+240),g=0<h&&.5>=h?(d-e)/(2*h):(d-e)/(2-2*h));return[Math.round(f+360)%360,g,h]};goog.color.rgbArrayToHsl=function(a){return goog.color.rgbToHsl(a[0],a[1],a[2])};goog.color.hueToRgb_=function(a,b,c){0>c?c+=1:1<c&&--c;return 1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a};
goog.color.hslToRgb=function(a,b,c){a/=360;if(0==b)c=b=a=255*c;else{var d=.5>c?c*(1+b):c+b-b*c;var e=2*c-d;c=255*goog.color.hueToRgb_(e,d,a+1/3);b=255*goog.color.hueToRgb_(e,d,a);a=255*goog.color.hueToRgb_(e,d,a-1/3)}return[Math.round(c),Math.round(b),Math.round(a)]};goog.color.hslArrayToRgb=function(a){return goog.color.hslToRgb(a[0],a[1],a[2])};goog.color.validHexColorRe_=/^#(?:[0-9a-f]{3}){1,2}$/i;goog.color.isValidHexColor_=function(a){return goog.color.validHexColorRe_.test(a)};
goog.color.rgbColorRe_=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;goog.color.isValidRgbColor_=function(a){var b=a.match(goog.color.rgbColorRe_);if(b){a=Number(b[1]);var c=Number(b[2]);b=Number(b[3]);if(0<=a&&255>=a&&0<=c&&255>=c&&0<=b&&255>=b)return[a,c,b]}return[]};goog.color.prependZeroIfNecessaryHelper=function(a){return 1==a.length?"0"+a:a};goog.color.prependHashIfNecessaryHelper=function(a){return"#"==a.charAt(0)?a:"#"+a};
goog.color.rgbStyle_=function(a){return"rgb("+a.join(",")+")"};goog.color.hsvToRgb=function(a,b,c){var d=0,e=0,f=0;if(0==b)f=e=d=c;else{var g=Math.floor(a/60),h=a/60-g;a=c*(1-b);var k=c*(1-b*h);b=c*(1-b*(1-h));switch(g){case 1:d=k;e=c;f=a;break;case 2:d=a;e=c;f=b;break;case 3:d=a;e=k;f=c;break;case 4:d=b;e=a;f=c;break;case 5:d=c;e=a;f=k;break;case 6:case 0:d=c,e=b,f=a}}return[Math.floor(d),Math.floor(e),Math.floor(f)]};
goog.color.rgbToHsv=function(a,b,c){var d=Math.max(Math.max(a,b),c),e=Math.min(Math.min(a,b),c);if(e==d)e=a=0;else{var f=d-e;e=f/d;a=60*(a==d?(b-c)/f:b==d?2+(c-a)/f:4+(a-b)/f);0>a&&(a+=360);360<a&&(a-=360)}return[a,e,d]};goog.color.rgbArrayToHsv=function(a){return goog.color.rgbToHsv(a[0],a[1],a[2])};goog.color.hsvArrayToRgb=function(a){return goog.color.hsvToRgb(a[0],a[1],a[2])};goog.color.hexToHsl=function(a){a=goog.color.hexToRgb(a);return goog.color.rgbToHsl(a[0],a[1],a[2])};
goog.color.hslToHex=function(a,b,c){return goog.color.rgbArrayToHex(goog.color.hslToRgb(a,b,c))};goog.color.hslArrayToHex=function(a){return goog.color.rgbArrayToHex(goog.color.hslToRgb(a[0],a[1],a[2]))};goog.color.hexToHsv=function(a){return goog.color.rgbArrayToHsv(goog.color.hexToRgb(a))};goog.color.hsvToHex=function(a,b,c){return goog.color.rgbArrayToHex(goog.color.hsvToRgb(a,b,c))};goog.color.hsvArrayToHex=function(a){return goog.color.hsvToHex(a[0],a[1],a[2])};
goog.color.hslDistance=function(a,b){var c=.5>=a[2]?a[1]*a[2]:a[1]*(1-a[2]);var d=.5>=b[2]?b[1]*b[2]:b[1]*(1-b[2]);return(a[2]-b[2])*(a[2]-b[2])+c*c+d*d-2*c*d*Math.cos(2*(a[0]/360-b[0]/360)*Math.PI)};goog.color.blend=function(a,b,c){c=goog.math.clamp(c,0,1);return[Math.round(b[0]+c*(a[0]-b[0])),Math.round(b[1]+c*(a[1]-b[1])),Math.round(b[2]+c*(a[2]-b[2]))]};goog.color.darken=function(a,b){return goog.color.blend([0,0,0],a,b)};
goog.color.lighten=function(a,b){return goog.color.blend([255,255,255],a,b)};goog.color.highContrast=function(a,b){for(var c=[],d=0;d<b.length;d++)c.push({color:b[d],diff:goog.color.yiqBrightnessDiff_(b[d],a)+goog.color.colorDiff_(b[d],a)});c.sort(function(a,b){return b.diff-a.diff});return c[0].color};goog.color.yiqBrightness_=function(a){return Math.round((299*a[0]+587*a[1]+114*a[2])/1E3)};goog.color.yiqBrightnessDiff_=function(a,b){return Math.abs(goog.color.yiqBrightness_(a)-goog.color.yiqBrightness_(b))};
goog.color.colorDiff_=function(a,b){return Math.abs(a[0]-b[0])+Math.abs(a[1]-b[1])+Math.abs(a[2]-b[2])};goog.fx={};goog.fx.Transition=function(){};goog.fx.Transition.EventType={PLAY:"play",BEGIN:"begin",RESUME:"resume",END:"end",STOP:"stop",FINISH:"finish",PAUSE:"pause"};goog.fx.TransitionBase=function(){goog.events.EventTarget.call(this);this.state_=goog.fx.TransitionBase.State.STOPPED;this.endTime=this.startTime=null};goog.inherits(goog.fx.TransitionBase,goog.events.EventTarget);goog.fx.TransitionBase.State={STOPPED:0,PAUSED:-1,PLAYING:1};goog.fx.TransitionBase.prototype.play=goog.abstractMethod;goog.fx.TransitionBase.prototype.stop=goog.abstractMethod;goog.fx.TransitionBase.prototype.pause=goog.abstractMethod;goog.fx.TransitionBase.prototype.getStateInternal=function(){return this.state_};
goog.fx.TransitionBase.prototype.setStatePlaying=function(){this.state_=goog.fx.TransitionBase.State.PLAYING};goog.fx.TransitionBase.prototype.setStatePaused=function(){this.state_=goog.fx.TransitionBase.State.PAUSED};goog.fx.TransitionBase.prototype.setStateStopped=function(){this.state_=goog.fx.TransitionBase.State.STOPPED};goog.fx.TransitionBase.prototype.isPlaying=function(){return this.state_==goog.fx.TransitionBase.State.PLAYING};
goog.fx.TransitionBase.prototype.isPaused=function(){return this.state_==goog.fx.TransitionBase.State.PAUSED};goog.fx.TransitionBase.prototype.isStopped=function(){return this.state_==goog.fx.TransitionBase.State.STOPPED};goog.fx.TransitionBase.prototype.onBegin=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.BEGIN)};goog.fx.TransitionBase.prototype.onEnd=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.END)};goog.fx.TransitionBase.prototype.onFinish=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.FINISH)};
goog.fx.TransitionBase.prototype.onPause=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.PAUSE)};goog.fx.TransitionBase.prototype.onPlay=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.PLAY)};goog.fx.TransitionBase.prototype.onResume=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.RESUME)};goog.fx.TransitionBase.prototype.onStop=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.STOP)};
goog.fx.TransitionBase.prototype.dispatchAnimationEvent=function(a){this.dispatchEvent(a)};goog.async.AnimationDelay=function(a,b,c){goog.Disposable.call(this);this.id_=null;this.usingListeners_=!1;this.listener_=a;this.handler_=c;this.win_=b||window;this.callback_=goog.bind(this.doAction_,this)};goog.inherits(goog.async.AnimationDelay,goog.Disposable);goog.async.AnimationDelay.TIMEOUT=20;goog.async.AnimationDelay.MOZ_BEFORE_PAINT_EVENT_="MozBeforePaint";
goog.async.AnimationDelay.prototype.start=function(){this.stop();this.usingListeners_=!1;var a=this.getRaf_(),b=this.getCancelRaf_();a&&!b&&this.win_.mozRequestAnimationFrame?(this.id_=goog.events.listen(this.win_,goog.async.AnimationDelay.MOZ_BEFORE_PAINT_EVENT_,this.callback_),this.win_.mozRequestAnimationFrame(null),this.usingListeners_=!0):this.id_=a&&b?a.call(this.win_,this.callback_):this.win_.setTimeout(goog.functions.lock(this.callback_),goog.async.AnimationDelay.TIMEOUT)};
goog.async.AnimationDelay.prototype.startIfNotActive=function(){this.isActive()||this.start()};goog.async.AnimationDelay.prototype.stop=function(){if(this.isActive()){var a=this.getRaf_(),b=this.getCancelRaf_();a&&!b&&this.win_.mozRequestAnimationFrame?goog.events.unlistenByKey(this.id_):a&&b?b.call(this.win_,this.id_):this.win_.clearTimeout(this.id_)}this.id_=null};goog.async.AnimationDelay.prototype.fire=function(){this.stop();this.doAction_()};
goog.async.AnimationDelay.prototype.fireIfActive=function(){this.isActive()&&this.fire()};goog.async.AnimationDelay.prototype.isActive=function(){return null!=this.id_};goog.async.AnimationDelay.prototype.doAction_=function(){this.usingListeners_&&this.id_&&goog.events.unlistenByKey(this.id_);this.id_=null;this.listener_.call(this.handler_,goog.now())};goog.async.AnimationDelay.prototype.disposeInternal=function(){this.stop();goog.async.AnimationDelay.superClass_.disposeInternal.call(this)};
goog.async.AnimationDelay.prototype.getRaf_=function(){var a=this.win_;return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||null};goog.async.AnimationDelay.prototype.getCancelRaf_=function(){var a=this.win_;return a.cancelAnimationFrame||a.cancelRequestAnimationFrame||a.webkitCancelRequestAnimationFrame||a.mozCancelRequestAnimationFrame||a.oCancelRequestAnimationFrame||a.msCancelRequestAnimationFrame||null};goog.async.Delay=function(a,b,c){goog.Disposable.call(this);this.listener_=a;this.interval_=b||0;this.handler_=c;this.callback_=goog.bind(this.doAction_,this)};goog.inherits(goog.async.Delay,goog.Disposable);goog.Delay=goog.async.Delay;goog.async.Delay.prototype.id_=0;goog.async.Delay.prototype.disposeInternal=function(){goog.async.Delay.superClass_.disposeInternal.call(this);this.stop();delete this.listener_;delete this.handler_};
goog.async.Delay.prototype.start=function(a){this.stop();this.id_=goog.Timer.callOnce(this.callback_,goog.isDef(a)?a:this.interval_)};goog.async.Delay.prototype.startIfNotActive=function(a){this.isActive()||this.start(a)};goog.async.Delay.prototype.stop=function(){this.isActive()&&goog.Timer.clear(this.id_);this.id_=0};goog.async.Delay.prototype.fire=function(){this.stop();this.doAction_()};goog.async.Delay.prototype.fireIfActive=function(){this.isActive()&&this.fire()};
goog.async.Delay.prototype.isActive=function(){return 0!=this.id_};goog.async.Delay.prototype.doAction_=function(){this.id_=0;this.listener_&&this.listener_.call(this.handler_)};goog.fx.anim={};goog.fx.anim.Animated=function(){};goog.fx.anim.TIMEOUT=goog.async.AnimationDelay.TIMEOUT;goog.fx.anim.activeAnimations_={};goog.fx.anim.animationWindow_=null;goog.fx.anim.animationDelay_=null;goog.fx.anim.registerAnimation=function(a){var b=goog.getUid(a);b in goog.fx.anim.activeAnimations_||(goog.fx.anim.activeAnimations_[b]=a);goog.fx.anim.requestAnimationFrame_()};
goog.fx.anim.unregisterAnimation=function(a){a=goog.getUid(a);delete goog.fx.anim.activeAnimations_[a];goog.object.isEmpty(goog.fx.anim.activeAnimations_)&&goog.fx.anim.cancelAnimationFrame_()};goog.fx.anim.tearDown=function(){goog.fx.anim.animationWindow_=null;goog.dispose(goog.fx.anim.animationDelay_);goog.fx.anim.animationDelay_=null;goog.fx.anim.activeAnimations_={}};
goog.fx.anim.setAnimationWindow=function(a){var b=goog.fx.anim.animationDelay_&&goog.fx.anim.animationDelay_.isActive();goog.dispose(goog.fx.anim.animationDelay_);goog.fx.anim.animationDelay_=null;goog.fx.anim.animationWindow_=a;b&&goog.fx.anim.requestAnimationFrame_()};
goog.fx.anim.requestAnimationFrame_=function(){goog.fx.anim.animationDelay_||(goog.fx.anim.animationDelay_=goog.fx.anim.animationWindow_?new goog.async.AnimationDelay(function(a){goog.fx.anim.cycleAnimations_(a)},goog.fx.anim.animationWindow_):new goog.async.Delay(function(){goog.fx.anim.cycleAnimations_(goog.now())},goog.fx.anim.TIMEOUT));var a=goog.fx.anim.animationDelay_;a.isActive()||a.start()};goog.fx.anim.cancelAnimationFrame_=function(){goog.fx.anim.animationDelay_&&goog.fx.anim.animationDelay_.stop()};
goog.fx.anim.cycleAnimations_=function(a){goog.object.forEach(goog.fx.anim.activeAnimations_,function(b){b.onAnimationFrame(a)});goog.object.isEmpty(goog.fx.anim.activeAnimations_)||goog.fx.anim.requestAnimationFrame_()};goog.fx.Animation=function(a,b,c,d){goog.fx.TransitionBase.call(this);if(!goog.isArray(a)||!goog.isArray(b))throw Error("Start and end parameters must be arrays");if(a.length!=b.length)throw Error("Start and end points must be the same length");this.startPoint=a;this.endPoint=b;this.duration=c;this.accel_=d;this.coords=[];this.useRightPositioningForRtl_=!1;this.progress=this.fps_=0;this.lastFrame=null};goog.inherits(goog.fx.Animation,goog.fx.TransitionBase);
goog.fx.Animation.prototype.getDuration=function(){return this.duration};goog.fx.Animation.prototype.enableRightPositioningForRtl=function(a){this.useRightPositioningForRtl_=a};goog.fx.Animation.prototype.isRightPositioningForRtlEnabled=function(){return this.useRightPositioningForRtl_};
goog.fx.Animation.EventType={PLAY:goog.fx.Transition.EventType.PLAY,BEGIN:goog.fx.Transition.EventType.BEGIN,RESUME:goog.fx.Transition.EventType.RESUME,END:goog.fx.Transition.EventType.END,STOP:goog.fx.Transition.EventType.STOP,FINISH:goog.fx.Transition.EventType.FINISH,PAUSE:goog.fx.Transition.EventType.PAUSE,ANIMATE:"animate",DESTROY:"destroy"};goog.fx.Animation.TIMEOUT=goog.fx.anim.TIMEOUT;goog.fx.Animation.State=goog.fx.TransitionBase.State;goog.fx.Animation.setAnimationWindow=function(a){goog.fx.anim.setAnimationWindow(a)};
goog.fx.Animation.prototype.play=function(a){if(a||this.isStopped())this.progress=0,this.coords=this.startPoint;else if(this.isPlaying())return!1;goog.fx.anim.unregisterAnimation(this);this.startTime=a=goog.now();this.isPaused()&&(this.startTime-=this.duration*this.progress);this.endTime=this.startTime+this.duration;this.lastFrame=this.startTime;if(!this.progress)this.onBegin();this.onPlay();if(this.isPaused())this.onResume();this.setStatePlaying();goog.fx.anim.registerAnimation(this);this.cycle(a);
return!0};goog.fx.Animation.prototype.stop=function(a){goog.fx.anim.unregisterAnimation(this);this.setStateStopped();a&&(this.progress=1);this.updateCoords_(this.progress);this.onStop();this.onEnd()};goog.fx.Animation.prototype.pause=function(){this.isPlaying()&&(goog.fx.anim.unregisterAnimation(this),this.setStatePaused(),this.onPause())};goog.fx.Animation.prototype.getProgress=function(){return this.progress};
goog.fx.Animation.prototype.setProgress=function(a){this.progress=a;this.isPlaying()&&(this.startTime=goog.now()-this.duration*this.progress,this.endTime=this.startTime+this.duration)};goog.fx.Animation.prototype.disposeInternal=function(){this.isStopped()||this.stop(!1);this.onDestroy();goog.fx.Animation.superClass_.disposeInternal.call(this)};goog.fx.Animation.prototype.destroy=function(){this.dispose()};goog.fx.Animation.prototype.onAnimationFrame=function(a){this.cycle(a)};
goog.fx.Animation.prototype.cycle=function(a){goog.asserts.assertNumber(this.startTime);goog.asserts.assertNumber(this.endTime);goog.asserts.assertNumber(this.lastFrame);a<this.startTime&&(this.endTime=a+this.endTime-this.startTime,this.startTime=a);this.progress=(a-this.startTime)/(this.endTime-this.startTime);1<this.progress&&(this.progress=1);this.fps_=1E3/(a-this.lastFrame);this.lastFrame=a;this.updateCoords_(this.progress);if(1==this.progress)this.setStateStopped(),goog.fx.anim.unregisterAnimation(this),
this.onFinish(),this.onEnd();else if(this.isPlaying())this.onAnimate()};goog.fx.Animation.prototype.updateCoords_=function(a){goog.isFunction(this.accel_)&&(a=this.accel_(a));this.coords=Array(this.startPoint.length);for(var b=0;b<this.startPoint.length;b++)this.coords[b]=(this.endPoint[b]-this.startPoint[b])*a+this.startPoint[b]};goog.fx.Animation.prototype.onAnimate=function(){this.dispatchAnimationEvent(goog.fx.Animation.EventType.ANIMATE)};goog.fx.Animation.prototype.onDestroy=function(){this.dispatchAnimationEvent(goog.fx.Animation.EventType.DESTROY)};
goog.fx.Animation.prototype.dispatchAnimationEvent=function(a){this.dispatchEvent(new goog.fx.AnimationEvent(a,this))};goog.fx.AnimationEvent=function(a,b){goog.events.Event.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.z=b.coords[2];this.duration=b.duration;this.progress=b.getProgress();this.fps=b.fps_;this.state=b.getStateInternal();this.anim=b};goog.inherits(goog.fx.AnimationEvent,goog.events.Event);
goog.fx.AnimationEvent.prototype.coordsAsInts=function(){return goog.array.map(this.coords,Math.round)};goog.userAgent.platform={};
goog.userAgent.platform.determineVersion_=function(){if(goog.userAgent.WINDOWS){var a=/Windows NT ([0-9.]+)/;return(a=a.exec(goog.userAgent.getUserAgentString()))?a[1]:"0"}return goog.userAgent.MAC?(a=/10[_.][0-9_.]+/,(a=a.exec(goog.userAgent.getUserAgentString()))?a[0].replace(/_/g,"."):"10"):goog.userAgent.ANDROID?(a=/Android\s+([^\);]+)(\)|;)/,(a=a.exec(goog.userAgent.getUserAgentString()))?a[1]:""):goog.userAgent.IPHONE||goog.userAgent.IPAD||goog.userAgent.IPOD?(a=/(?:iPhone|CPU)\s+OS\s+(\S+)/,(a=
a.exec(goog.userAgent.getUserAgentString()))?a[1].replace(/_/g,"."):""):""};goog.userAgent.platform.VERSION=goog.userAgent.platform.determineVersion_();goog.userAgent.platform.isVersion=function(a){return 0<=goog.string.compareVersions(goog.userAgent.platform.VERSION,a)};goog.userAgent.product.determineVersion_=function(){if(goog.userAgent.product.FIREFOX)return goog.userAgent.product.getFirstRegExpGroup_(/Firefox\/([0-9.]+)/);if(goog.userAgent.product.IE||goog.userAgent.product.EDGE||goog.userAgent.product.OPERA)return goog.userAgent.VERSION;if(goog.userAgent.product.CHROME)return goog.labs.userAgent.platform.isIos()?goog.userAgent.product.getFirstRegExpGroup_(/CriOS\/([0-9.]+)/):goog.userAgent.product.getFirstRegExpGroup_(/Chrome\/([0-9.]+)/);if(goog.userAgent.product.SAFARI&&
!goog.labs.userAgent.platform.isIos())return goog.userAgent.product.getFirstRegExpGroup_(/Version\/([0-9.]+)/);if(goog.userAgent.product.IPHONE||goog.userAgent.product.IPAD){var a=goog.userAgent.product.execRegExp_(/Version\/(\S+).*Mobile\/(\S+)/);if(a)return a[1]+"."+a[2]}else if(goog.userAgent.product.ANDROID)return(a=goog.userAgent.product.getFirstRegExpGroup_(/Android\s+([0-9.]+)/))?a:goog.userAgent.product.getFirstRegExpGroup_(/Version\/([0-9.]+)/);return""};
goog.userAgent.product.getFirstRegExpGroup_=function(a){return(a=goog.userAgent.product.execRegExp_(a))?a[1]:""};goog.userAgent.product.execRegExp_=function(a){return a.exec(goog.userAgent.getUserAgentString())};goog.userAgent.product.VERSION=goog.userAgent.product.determineVersion_();goog.userAgent.product.isVersion=function(a){return 0<=goog.string.compareVersions(goog.userAgent.product.VERSION,a)};goog.style.bidi={};goog.style.bidi.getScrollLeft=function(a){var b=goog.style.isRightToLeft(a);return b&&goog.style.bidi.usesNegativeScrollLeftInRtl_()?-a.scrollLeft:!b||goog.userAgent.EDGE_OR_IE&&goog.userAgent.isVersionOrHigher("8")||"visible"==goog.style.getComputedOverflowX(a)?a.scrollLeft:a.scrollWidth-a.clientWidth-a.scrollLeft};
goog.style.bidi.getOffsetStart=function(a){var b=a.offsetLeft,c=a.offsetParent;c||"fixed"!=goog.style.getComputedPosition(a)||(c=goog.dom.getOwnerDocument(a).documentElement);if(!c)return b;if(goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher(58)){var d=goog.style.getBorderBox(c);b+=d.left}else goog.userAgent.isDocumentModeOrHigher(8)&&!goog.userAgent.isDocumentModeOrHigher(9)&&(d=goog.style.getBorderBox(c),b-=d.left);return goog.style.isRightToLeft(c)?c.clientWidth-(b+a.offsetWidth):b};
goog.style.bidi.setScrollOffset=function(a,b){b=Math.max(b,0);goog.style.isRightToLeft(a)?goog.style.bidi.usesNegativeScrollLeftInRtl_()?a.scrollLeft=-b:goog.userAgent.EDGE_OR_IE&&goog.userAgent.isVersionOrHigher("8")?a.scrollLeft=b:a.scrollLeft=a.scrollWidth-b-a.clientWidth:a.scrollLeft=b};
goog.style.bidi.usesNegativeScrollLeftInRtl_=function(){var a=goog.userAgent.product.SAFARI&&goog.userAgent.product.isVersion(10),b=goog.userAgent.IOS&&goog.userAgent.platform.isVersion(10);return goog.userAgent.GECKO||a||b};goog.style.bidi.setPosition=function(a,b,c,d){goog.isNull(c)||(a.style.top=c+"px");d?(a.style.right=b+"px",a.style.left=""):(a.style.left=b+"px",a.style.right="")};goog.fx.dom={};goog.fx.dom.PredefinedEffect=function(a,b,c,d,e){goog.fx.Animation.call(this,b,c,d,e);this.element=a};goog.inherits(goog.fx.dom.PredefinedEffect,goog.fx.Animation);goog.fx.dom.PredefinedEffect.prototype.updateStyle=goog.nullFunction;goog.fx.dom.PredefinedEffect.prototype.isRightToLeft=function(){goog.isDef(this.rightToLeft_)||(this.rightToLeft_=goog.style.isRightToLeft(this.element));return this.rightToLeft_};
goog.fx.dom.PredefinedEffect.prototype.onAnimate=function(){this.updateStyle();goog.fx.dom.PredefinedEffect.superClass_.onAnimate.call(this)};goog.fx.dom.PredefinedEffect.prototype.onEnd=function(){this.updateStyle();goog.fx.dom.PredefinedEffect.superClass_.onEnd.call(this)};goog.fx.dom.PredefinedEffect.prototype.onBegin=function(){this.updateStyle();goog.fx.dom.PredefinedEffect.superClass_.onBegin.call(this)};
goog.fx.dom.Slide=function(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.call(this,a,b,c,d,e)};goog.inherits(goog.fx.dom.Slide,goog.fx.dom.PredefinedEffect);goog.fx.dom.Slide.prototype.updateStyle=function(){var a=this.isRightPositioningForRtlEnabled()&&this.isRightToLeft()?"right":"left";this.element.style[a]=Math.round(this.coords[0])+"px";this.element.style.top=Math.round(this.coords[1])+"px"};
goog.fx.dom.SlideFrom=function(a,b,c,d){var e=[this.isRightPositioningForRtlEnabled()?goog.style.bidi.getOffsetStart(a):a.offsetLeft,a.offsetTop];goog.fx.dom.Slide.call(this,a,e,b,c,d)};goog.inherits(goog.fx.dom.SlideFrom,goog.fx.dom.Slide);goog.fx.dom.SlideFrom.prototype.onBegin=function(){this.startPoint=[this.isRightPositioningForRtlEnabled()?goog.style.bidi.getOffsetStart(this.element):this.element.offsetLeft,this.element.offsetTop];goog.fx.dom.SlideFrom.superClass_.onBegin.call(this)};
goog.fx.dom.Swipe=function(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.call(this,a,b,c,d,e);this.maxWidth_=Math.max(this.endPoint[0],this.startPoint[0]);this.maxHeight_=Math.max(this.endPoint[1],this.startPoint[1])};goog.inherits(goog.fx.dom.Swipe,goog.fx.dom.PredefinedEffect);
goog.fx.dom.Swipe.prototype.updateStyle=function(){var a=this.coords[0],b=this.coords[1];this.clip_(Math.round(a),Math.round(b),this.maxWidth_,this.maxHeight_);this.element.style.width=Math.round(a)+"px";var c=this.isRightPositioningForRtlEnabled()&&this.isRightToLeft()?"marginRight":"marginLeft";this.element.style[c]=Math.round(a)-this.maxWidth_+"px";this.element.style.marginTop=Math.round(b)-this.maxHeight_+"px"};
goog.fx.dom.Swipe.prototype.clip_=function(a,b,c,d){this.element.style.clip="rect("+(d-b)+"px "+c+"px "+d+"px "+(c-a)+"px)"};goog.fx.dom.Scroll=function(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.call(this,a,b,c,d,e)};goog.inherits(goog.fx.dom.Scroll,goog.fx.dom.PredefinedEffect);
goog.fx.dom.Scroll.prototype.updateStyle=function(){this.isRightPositioningForRtlEnabled()?goog.style.bidi.setScrollOffset(this.element,Math.round(this.coords[0])):this.element.scrollLeft=Math.round(this.coords[0]);this.element.scrollTop=Math.round(this.coords[1])};goog.fx.dom.Resize=function(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.call(this,a,b,c,d,e)};goog.inherits(goog.fx.dom.Resize,goog.fx.dom.PredefinedEffect);
goog.fx.dom.Resize.prototype.updateStyle=function(){this.element.style.width=Math.round(this.coords[0])+"px";this.element.style.height=Math.round(this.coords[1])+"px"};goog.fx.dom.ResizeWidth=function(a,b,c,d,e){goog.fx.dom.PredefinedEffect.call(this,a,[b],[c],d,e)};goog.inherits(goog.fx.dom.ResizeWidth,goog.fx.dom.PredefinedEffect);goog.fx.dom.ResizeWidth.prototype.updateStyle=function(){this.element.style.width=Math.round(this.coords[0])+"px"};
goog.fx.dom.ResizeHeight=function(a,b,c,d,e){goog.fx.dom.PredefinedEffect.call(this,a,[b],[c],d,e)};goog.inherits(goog.fx.dom.ResizeHeight,goog.fx.dom.PredefinedEffect);goog.fx.dom.ResizeHeight.prototype.updateStyle=function(){this.element.style.height=Math.round(this.coords[0])+"px"};
goog.fx.dom.Fade=function(a,b,c,d,e){goog.isNumber(b)&&(b=[b]);goog.isNumber(c)&&(c=[c]);goog.fx.dom.PredefinedEffect.call(this,a,b,c,d,e);if(1!=b.length||1!=c.length)throw Error("Start and end points must be 1D");this.lastOpacityUpdate_=goog.fx.dom.Fade.OPACITY_UNSET_};goog.inherits(goog.fx.dom.Fade,goog.fx.dom.PredefinedEffect);goog.fx.dom.Fade.TOLERANCE_=1/1024;goog.fx.dom.Fade.OPACITY_UNSET_=-1;
goog.fx.dom.Fade.prototype.updateStyle=function(){var a=this.coords[0];Math.abs(a-this.lastOpacityUpdate_)>=goog.fx.dom.Fade.TOLERANCE_&&(goog.style.setOpacity(this.element,a),this.lastOpacityUpdate_=a)};goog.fx.dom.Fade.prototype.onBegin=function(){this.lastOpacityUpdate_=goog.fx.dom.Fade.OPACITY_UNSET_;goog.fx.dom.Fade.superClass_.onBegin.call(this)};goog.fx.dom.Fade.prototype.onEnd=function(){this.lastOpacityUpdate_=goog.fx.dom.Fade.OPACITY_UNSET_;goog.fx.dom.Fade.superClass_.onEnd.call(this)};
goog.fx.dom.Fade.prototype.show=function(){this.element.style.display=""};goog.fx.dom.Fade.prototype.hide=function(){this.element.style.display="none"};goog.fx.dom.FadeOut=function(a,b,c){goog.fx.dom.Fade.call(this,a,1,0,b,c)};goog.inherits(goog.fx.dom.FadeOut,goog.fx.dom.Fade);goog.fx.dom.FadeIn=function(a,b,c){goog.fx.dom.Fade.call(this,a,0,1,b,c)};goog.inherits(goog.fx.dom.FadeIn,goog.fx.dom.Fade);goog.fx.dom.FadeOutAndHide=function(a,b,c){goog.fx.dom.Fade.call(this,a,1,0,b,c)};
goog.inherits(goog.fx.dom.FadeOutAndHide,goog.fx.dom.Fade);goog.fx.dom.FadeOutAndHide.prototype.onBegin=function(){this.show();goog.fx.dom.FadeOutAndHide.superClass_.onBegin.call(this)};goog.fx.dom.FadeOutAndHide.prototype.onEnd=function(){this.hide();goog.fx.dom.FadeOutAndHide.superClass_.onEnd.call(this)};goog.fx.dom.FadeInAndShow=function(a,b,c){goog.fx.dom.Fade.call(this,a,0,1,b,c)};goog.inherits(goog.fx.dom.FadeInAndShow,goog.fx.dom.Fade);
goog.fx.dom.FadeInAndShow.prototype.onBegin=function(){this.show();goog.fx.dom.FadeInAndShow.superClass_.onBegin.call(this)};goog.fx.dom.BgColorTransform=function(a,b,c,d,e){if(3!=b.length||3!=c.length)throw Error("Start and end points must be 3D");goog.fx.dom.PredefinedEffect.call(this,a,b,c,d,e)};goog.inherits(goog.fx.dom.BgColorTransform,goog.fx.dom.PredefinedEffect);
goog.fx.dom.BgColorTransform.prototype.setColor=function(){for(var a=[],b=0;b<this.coords.length;b++)a[b]=Math.round(this.coords[b]);a="rgb("+a.join(",")+")";this.element.style.backgroundColor=a};goog.fx.dom.BgColorTransform.prototype.updateStyle=function(){this.setColor()};
goog.fx.dom.bgColorFadeIn=function(a,b,c,d){function e(){a.style.backgroundColor=f}var f=a.style.backgroundColor||"",g=goog.style.getBackgroundColor(a);g=g&&"transparent"!=g&&"rgba(0, 0, 0, 0)"!=g?goog.color.hexToRgb(goog.color.parse(g).hex):[255,255,255];b=new goog.fx.dom.BgColorTransform(a,b,g,c);d?d.listen(b,goog.fx.Transition.EventType.END,e):goog.events.listen(b,goog.fx.Transition.EventType.END,e);b.play()};
goog.fx.dom.ColorTransform=function(a,b,c,d,e){if(3!=b.length||3!=c.length)throw Error("Start and end points must be 3D");goog.fx.dom.PredefinedEffect.call(this,a,b,c,d,e)};goog.inherits(goog.fx.dom.ColorTransform,goog.fx.dom.PredefinedEffect);goog.fx.dom.ColorTransform.prototype.updateStyle=function(){for(var a=[],b=0;b<this.coords.length;b++)a[b]=Math.round(this.coords[b]);a="rgb("+a.join(",")+")";this.element.style.color=a};goog.positioning={};goog.positioning.CornerBit={BOTTOM:1,CENTER:2,RIGHT:4,FLIP_RTL:8};
goog.positioning.Corner={TOP_LEFT:0,TOP_RIGHT:goog.positioning.CornerBit.RIGHT,BOTTOM_LEFT:goog.positioning.CornerBit.BOTTOM,BOTTOM_RIGHT:goog.positioning.CornerBit.BOTTOM|goog.positioning.CornerBit.RIGHT,TOP_START:goog.positioning.CornerBit.FLIP_RTL,TOP_END:goog.positioning.CornerBit.FLIP_RTL|goog.positioning.CornerBit.RIGHT,BOTTOM_START:goog.positioning.CornerBit.BOTTOM|goog.positioning.CornerBit.FLIP_RTL,BOTTOM_END:goog.positioning.CornerBit.BOTTOM|goog.positioning.CornerBit.RIGHT|goog.positioning.CornerBit.FLIP_RTL,
TOP_CENTER:goog.positioning.CornerBit.CENTER,BOTTOM_CENTER:goog.positioning.CornerBit.BOTTOM|goog.positioning.CornerBit.CENTER};goog.positioning.Overflow={IGNORE:0,ADJUST_X:1,FAIL_X:2,ADJUST_Y:4,FAIL_Y:8,RESIZE_WIDTH:16,RESIZE_HEIGHT:32,ADJUST_X_EXCEPT_OFFSCREEN:65,ADJUST_Y_EXCEPT_OFFSCREEN:132};goog.positioning.OverflowStatus={NONE:0,ADJUSTED_X:1,ADJUSTED_Y:2,WIDTH_ADJUSTED:4,HEIGHT_ADJUSTED:8,FAILED_LEFT:16,FAILED_RIGHT:32,FAILED_TOP:64,FAILED_BOTTOM:128,FAILED_OUTSIDE_VIEWPORT:256};
goog.positioning.OverflowStatus.FAILED=goog.positioning.OverflowStatus.FAILED_LEFT|goog.positioning.OverflowStatus.FAILED_RIGHT|goog.positioning.OverflowStatus.FAILED_TOP|goog.positioning.OverflowStatus.FAILED_BOTTOM|goog.positioning.OverflowStatus.FAILED_OUTSIDE_VIEWPORT;goog.positioning.OverflowStatus.FAILED_HORIZONTAL=goog.positioning.OverflowStatus.FAILED_LEFT|goog.positioning.OverflowStatus.FAILED_RIGHT;
goog.positioning.OverflowStatus.FAILED_VERTICAL=goog.positioning.OverflowStatus.FAILED_TOP|goog.positioning.OverflowStatus.FAILED_BOTTOM;
goog.positioning.positionAtAnchor=function(a,b,c,d,e,f,g,h,k){goog.asserts.assert(c);var l=goog.positioning.getOffsetParentPageOffset(c),m=goog.positioning.getVisiblePart_(a);goog.style.translateRectForAnotherFrame(m,goog.dom.getDomHelper(a),goog.dom.getDomHelper(c));a=goog.positioning.getEffectiveCorner(a,b);b=m.left;a&goog.positioning.CornerBit.RIGHT?b+=m.width:a&goog.positioning.CornerBit.CENTER&&(b+=m.width/2);m=new goog.math.Coordinate(b,m.top+(a&goog.positioning.CornerBit.BOTTOM?m.height:0));
m=goog.math.Coordinate.difference(m,l);e&&(m.x+=(a&goog.positioning.CornerBit.RIGHT?-1:1)*e.x,m.y+=(a&goog.positioning.CornerBit.BOTTOM?-1:1)*e.y);if(g)if(k)var n=k;else if(n=goog.style.getVisibleRectForElement(c))n.top-=l.y,n.right-=l.x,n.bottom-=l.y,n.left-=l.x;return goog.positioning.positionAtCoordinate(m,c,d,f,n,g,h)};
goog.positioning.getOffsetParentPageOffset=function(a){if(a=a.offsetParent){var b="HTML"==a.tagName||"BODY"==a.tagName;if(!b||"static"!=goog.style.getComputedPosition(a)){var c=goog.style.getPageOffset(a);b||(c=goog.math.Coordinate.difference(c,new goog.math.Coordinate(goog.style.bidi.getScrollLeft(a),a.scrollTop)))}}return c||new goog.math.Coordinate};
goog.positioning.getVisiblePart_=function(a){var b=goog.style.getBounds(a);(a=goog.style.getVisibleRectForElement(a))&&b.intersection(goog.math.Rect.createFromBox(a));return b};
goog.positioning.positionAtCoordinate=function(a,b,c,d,e,f,g){a=a.clone();var h=goog.positioning.getEffectiveCorner(b,c);c=goog.style.getSize(b);g=g?g.clone():c.clone();a=goog.positioning.getPositionAtCoordinate(a,g,h,d,e,f);if(a.status&goog.positioning.OverflowStatus.FAILED)return a.status;goog.style.setPosition(b,a.rect.getTopLeft());g=a.rect.getSize();goog.math.Size.equals(c,g)||goog.style.setBorderBoxSize(b,g);return a.status};
goog.positioning.getPositionAtCoordinate=function(a,b,c,d,e,f){a=a.clone();b=b.clone();var g=goog.positioning.OverflowStatus.NONE;if(d||c!=goog.positioning.Corner.TOP_LEFT)c&goog.positioning.CornerBit.RIGHT?a.x-=b.width+(d?d.right:0):c&goog.positioning.CornerBit.CENTER?a.x-=b.width/2:d&&(a.x+=d.left),c&goog.positioning.CornerBit.BOTTOM?a.y-=b.height+(d?d.bottom:0):d&&(a.y+=d.top);f&&(g=e?goog.positioning.adjustForViewport_(a,b,e,f):goog.positioning.OverflowStatus.FAILED_OUTSIDE_VIEWPORT);c=new goog.math.Rect(0,
0,0,0);c.left=a.x;c.top=a.y;c.width=b.width;c.height=b.height;return{rect:c,status:g}};
goog.positioning.adjustForViewport_=function(a,b,c,d){var e=goog.positioning.OverflowStatus.NONE,f=goog.positioning.Overflow.ADJUST_X_EXCEPT_OFFSCREEN,g=goog.positioning.Overflow.ADJUST_Y_EXCEPT_OFFSCREEN;(d&f)==f&&(a.x<c.left||a.x>=c.right)&&(d&=~goog.positioning.Overflow.ADJUST_X);(d&g)==g&&(a.y<c.top||a.y>=c.bottom)&&(d&=~goog.positioning.Overflow.ADJUST_Y);a.x<c.left&&d&goog.positioning.Overflow.ADJUST_X&&(a.x=c.left,e|=goog.positioning.OverflowStatus.ADJUSTED_X);d&goog.positioning.Overflow.RESIZE_WIDTH&&
(f=a.x,a.x<c.left&&(a.x=c.left,e|=goog.positioning.OverflowStatus.WIDTH_ADJUSTED),a.x+b.width>c.right&&(b.width=Math.min(c.right-a.x,f+b.width-c.left),b.width=Math.max(b.width,0),e|=goog.positioning.OverflowStatus.WIDTH_ADJUSTED));a.x+b.width>c.right&&d&goog.positioning.Overflow.ADJUST_X&&(a.x=Math.max(c.right-b.width,c.left),e|=goog.positioning.OverflowStatus.ADJUSTED_X);d&goog.positioning.Overflow.FAIL_X&&(e|=(a.x<c.left?goog.positioning.OverflowStatus.FAILED_LEFT:0)|(a.x+b.width>c.right?goog.positioning.OverflowStatus.FAILED_RIGHT:
0));a.y<c.top&&d&goog.positioning.Overflow.ADJUST_Y&&(a.y=c.top,e|=goog.positioning.OverflowStatus.ADJUSTED_Y);d&goog.positioning.Overflow.RESIZE_HEIGHT&&(f=a.y,a.y<c.top&&(a.y=c.top,e|=goog.positioning.OverflowStatus.HEIGHT_ADJUSTED),a.y+b.height>c.bottom&&(b.height=Math.min(c.bottom-a.y,f+b.height-c.top),b.height=Math.max(b.height,0),e|=goog.positioning.OverflowStatus.HEIGHT_ADJUSTED));a.y+b.height>c.bottom&&d&goog.positioning.Overflow.ADJUST_Y&&(a.y=Math.max(c.bottom-b.height,c.top),e|=goog.positioning.OverflowStatus.ADJUSTED_Y);
d&goog.positioning.Overflow.FAIL_Y&&(e|=(a.y<c.top?goog.positioning.OverflowStatus.FAILED_TOP:0)|(a.y+b.height>c.bottom?goog.positioning.OverflowStatus.FAILED_BOTTOM:0));return e};goog.positioning.getEffectiveCorner=function(a,b){return(b&goog.positioning.CornerBit.FLIP_RTL&&goog.style.isRightToLeft(a)?b^goog.positioning.CornerBit.RIGHT:b)&~goog.positioning.CornerBit.FLIP_RTL};goog.positioning.flipCornerHorizontal=function(a){return a^goog.positioning.CornerBit.RIGHT};
goog.positioning.flipCornerVertical=function(a){return a^goog.positioning.CornerBit.BOTTOM};goog.positioning.flipCorner=function(a){return a^goog.positioning.CornerBit.BOTTOM^goog.positioning.CornerBit.RIGHT};goog.ui.IdGenerator=function(){};goog.addSingletonGetter(goog.ui.IdGenerator);goog.ui.IdGenerator.prototype.nextId_=0;goog.ui.IdGenerator.prototype.idPrefix_="";goog.ui.IdGenerator.prototype.setIdPrefix=function(a){this.idPrefix_=a};goog.ui.IdGenerator.prototype.getNextUniqueId=function(){return this.idPrefix_+":"+(this.nextId_++).toString(36)};goog.ui.ac.Renderer=function(a,b,c,d){goog.events.EventTarget.call(this);this.parent_=a||goog.dom.getDocument().body;this.dom_=goog.dom.getDomHelper(this.parent_);this.reposition_=!a;this.element_=null;this.token_="";this.rows_=[];this.rowDivs_=[];this.startRenderingRows_=this.hilitedRow_=-1;this.visible_=!1;this.className="ac-renderer";this.rowClassName="ac-row";this.legacyActiveClassName_="active";this.activeClassName="ac-active";this.highlightedClassName="ac-highlighted";this.customRenderer_=b||
null;this.useStandardHighlighting_=null!=d?d:!0;this.matchWordBoundary_=!0;this.highlightAllTokens_=!1;this.rightAlign_=!!c;this.topAlign_=!1;this.menuFadeDuration_=0;this.showScrollbarsIfTooLarge_=!1};goog.inherits(goog.ui.ac.Renderer,goog.events.EventTarget);goog.ui.ac.Renderer.prototype.borderWidth_=0;goog.ui.ac.Renderer.DELAY_BEFORE_MOUSEOVER=300;goog.ui.ac.Renderer.prototype.getElement=function(){return this.element_};
goog.ui.ac.Renderer.prototype.setWidthProvider=function(a,b,c=void 0){this.widthProvider_=a;b&&(this.borderWidth_=b);c&&(this.maxWidthProvider_=c)};goog.ui.ac.Renderer.prototype.setTopAlign=function(a){this.topAlign_=a};goog.ui.ac.Renderer.prototype.getTopAlign=function(){return this.topAlign_};goog.ui.ac.Renderer.prototype.setRightAlign=function(a){this.rightAlign_=a};goog.ui.ac.Renderer.prototype.getRightAlign=function(){return this.rightAlign_};
goog.ui.ac.Renderer.prototype.setShowScrollbarsIfTooLarge=function(a){this.showScrollbarsIfTooLarge_=a};goog.ui.ac.Renderer.prototype.setUseStandardHighlighting=function(a){this.useStandardHighlighting_=a};goog.ui.ac.Renderer.prototype.setMatchWordBoundary=function(a){this.matchWordBoundary_=a};goog.ui.ac.Renderer.prototype.setHighlightAllTokens=function(a){this.highlightAllTokens_=a};goog.ui.ac.Renderer.prototype.setMenuFadeDuration=function(a){this.menuFadeDuration_=a};
goog.ui.ac.Renderer.prototype.setAnchorElement=function(a){this.anchorElement_=a};goog.ui.ac.Renderer.prototype.getAnchorElement=function(){return this.anchorElement_};goog.ui.ac.Renderer.prototype.renderRows=function(a,b,c){this.token_=b;this.rows_=a;this.hilitedRow_=-1;this.startRenderingRows_=goog.now();this.target_=c;this.rowDivs_=[];this.redraw()};
goog.ui.ac.Renderer.prototype.dismiss=function(){this.visible_&&(this.visible_=!1,this.toggleAriaMarkup_(!1),0<this.menuFadeDuration_?(goog.dispose(this.animation_),this.animation_=new goog.fx.dom.FadeOutAndHide(this.element_,this.menuFadeDuration_),this.animation_.play()):goog.style.setElementShown(this.element_,!1))};
goog.ui.ac.Renderer.prototype.show=function(){this.visible_||(this.visible_=!0,this.toggleAriaMarkup_(!0),0<this.menuFadeDuration_?(goog.dispose(this.animation_),this.animation_=new goog.fx.dom.FadeInAndShow(this.element_,this.menuFadeDuration_),this.animation_.play()):goog.style.setElementShown(this.element_,!0))};
goog.ui.ac.Renderer.prototype.toggleAriaMarkup_=function(a){this.target_&&(goog.a11y.aria.setState(this.target_,goog.a11y.aria.State.HASPOPUP,a),goog.a11y.aria.setState(goog.asserts.assert(this.element_),goog.a11y.aria.State.EXPANDED,a),goog.a11y.aria.setState(this.target_,goog.a11y.aria.State.EXPANDED,a),a?goog.a11y.aria.setState(this.target_,goog.a11y.aria.State.OWNS,this.element_.id):(goog.a11y.aria.removeState(this.target_,goog.a11y.aria.State.OWNS),goog.a11y.aria.setActiveDescendant(this.target_,
null)))};goog.ui.ac.Renderer.prototype.isVisible=function(){return this.visible_};
goog.ui.ac.Renderer.prototype.hiliteRow=function(a){var b=0<=a&&a<this.rows_.length?this.rows_[a]:void 0,c=0<=a&&a<this.rowDivs_.length?this.rowDivs_[a]:void 0;this.dispatchEvent({type:goog.ui.ac.AutoComplete.EventType.ROW_HILITE,rowNode:c,row:b?b.data:null})&&(this.hiliteNone(),this.hilitedRow_=a,c&&(goog.dom.classlist.addAll(c,[this.activeClassName,this.legacyActiveClassName_]),this.target_&&goog.a11y.aria.setActiveDescendant(this.target_,c),goog.style.scrollIntoContainerView(c,this.element_)))};
goog.ui.ac.Renderer.prototype.hiliteNone=function(){0<=this.hilitedRow_&&goog.dom.classlist.removeAll(goog.asserts.assert(this.rowDivs_[this.hilitedRow_]),[this.activeClassName,this.legacyActiveClassName_])};goog.ui.ac.Renderer.prototype.hiliteId=function(a){if(-1==a)this.hiliteRow(-1);else for(var b=0;b<this.rows_.length;b++)if(this.rows_[b].id==a){this.hiliteRow(b);break}};goog.ui.ac.Renderer.prototype.setMenuClasses_=function(a){goog.asserts.assert(a);goog.dom.classlist.addAll(a,goog.string.trim(this.className).split(" "))};
goog.ui.ac.Renderer.prototype.maybeCreateElement_=function(){if(!this.element_){var a=this.dom_.createDom("DIV",{style:"display:none"});this.showScrollbarsIfTooLarge_&&(a.style.overflowY="auto");this.element_=a;this.setMenuClasses_(a);goog.a11y.aria.setRole(a,goog.a11y.aria.Role.LISTBOX);a.id=goog.ui.IdGenerator.getInstance().getNextUniqueId();this.dom_.appendChild(this.parent_,a);goog.events.listen(a,goog.events.EventType.CLICK,this.handleClick_,!1,this);goog.events.listen(a,goog.events.EventType.MOUSEDOWN,
this.handleMouseDown_,!1,this);goog.events.listen(a,goog.events.EventType.MOUSEOVER,this.handleMouseOver_,!1,this)}};
goog.ui.ac.Renderer.prototype.redraw=function(){this.maybeCreateElement_();this.topAlign_&&(this.element_.style.visibility="hidden");this.widthProvider_&&(this.element_.style.minWidth=this.widthProvider_.clientWidth-this.borderWidth_+"px");this.maxWidthProvider_&&(this.element_.style.maxWidth=this.maxWidthProvider_.clientWidth-this.borderWidth_+"px");this.rowDivs_.length=0;this.dom_.removeChildren(this.element_);if(this.customRenderer_&&this.customRenderer_.render)this.customRenderer_.render(this,
this.element_,this.rows_,this.token_);else{var a=null;goog.array.forEach(this.rows_,function(b){b=this.renderRowHtml(b,this.token_);this.topAlign_?this.element_.insertBefore(b,a):this.dom_.appendChild(this.element_,b);a=b},this)}0==this.rows_.length?this.dismiss():(this.show(),this.reposition(),goog.style.setUnselectable(this.element_,!0))};
goog.ui.ac.Renderer.prototype.getAnchorCorner=function(){var a=this.rightAlign_?goog.positioning.Corner.BOTTOM_RIGHT:goog.positioning.Corner.BOTTOM_LEFT;this.topAlign_&&(a=goog.positioning.flipCornerVertical(a));return a};
goog.ui.ac.Renderer.prototype.reposition=function(){if(this.target_&&this.reposition_){var a=this.anchorElement_||this.target_,b=this.getAnchorCorner(),c=goog.positioning.Overflow.ADJUST_X_EXCEPT_OFFSCREEN;this.showScrollbarsIfTooLarge_&&(this.element_.style.height="",c|=goog.positioning.Overflow.RESIZE_HEIGHT);goog.positioning.positionAtAnchor(a,b,this.element_,goog.positioning.flipCornerVertical(b),null,null,c);this.topAlign_&&(this.element_.style.visibility="visible")}};
goog.ui.ac.Renderer.prototype.setAutoPosition=function(a){this.reposition_=a};goog.ui.ac.Renderer.prototype.getAutoPosition=function(){return this.reposition_};goog.ui.ac.Renderer.prototype.getTarget=function(){return this.target_||null};
goog.ui.ac.Renderer.prototype.disposeInternal=function(){this.element_&&(goog.events.unlisten(this.element_,goog.events.EventType.CLICK,this.handleClick_,!1,this),goog.events.unlisten(this.element_,goog.events.EventType.MOUSEDOWN,this.handleMouseDown_,!1,this),goog.events.unlisten(this.element_,goog.events.EventType.MOUSEOVER,this.handleMouseOver_,!1,this),this.dom_.removeNode(this.element_),this.element_=null,this.visible_=!1);goog.dispose(this.animation_);this.parent_=null;goog.ui.ac.Renderer.superClass_.disposeInternal.call(this)};
goog.ui.ac.Renderer.prototype.renderRowContents_=function(a,b,c){goog.dom.setTextContent(c,a.data.toString())};goog.ui.ac.Renderer.prototype.startHiliteMatchingText_=function(a,b){this.wasHighlightedAtLeastOnce_=!1;this.hiliteMatchingText_(a,b)};
goog.ui.ac.Renderer.prototype.hiliteMatchingText_=function(a,b){if(this.highlightAllTokens_||!this.wasHighlightedAtLeastOnce_)if(a.nodeType==goog.dom.NodeType.TEXT){var c=null;goog.isArray(b)&&1<b.length&&!this.highlightAllTokens_&&(c=goog.array.slice(b,1));b=this.getTokenRegExp_(b);if(0!=b.length){var d=a.nodeValue,e=this.matchWordBoundary_?new RegExp("\\b(?:"+b+")","gi"):new RegExp(b,"gi");b=[];for(var f=0,g=e.exec(d),h=0;g;)h++,b.push(d.substring(f,g.index)),b.push(d.substring(g.index,e.lastIndex)),
f=e.lastIndex,g=e.exec(d);b.push(d.substring(f));if(1<b.length){c=this.highlightAllTokens_?h:1;for(d=0;d<c;d++)e=2*d,a.nodeValue=b[e],f=this.dom_.createElement("B"),f.className=this.highlightedClassName,this.dom_.appendChild(f,this.dom_.createTextNode(b[e+1])),f=a.parentNode.insertBefore(f,a.nextSibling),a.parentNode.insertBefore(this.dom_.createTextNode(""),f.nextSibling),a=f.nextSibling;b=goog.array.slice(b,2*c);a.nodeValue=b.join("");this.wasHighlightedAtLeastOnce_=!0}else c&&this.hiliteMatchingText_(a,
c)}}else for(a=a.firstChild;a;)c=a.nextSibling,this.hiliteMatchingText_(a,b),a=c};
goog.ui.ac.Renderer.prototype.getTokenRegExp_=function(a){var b="";if(!a)return b;goog.isArray(a)&&(a=goog.array.filter(a,function(a){return!goog.string.isEmptyOrWhitespace(goog.string.makeSafe(a))}));this.highlightAllTokens_?goog.isArray(a)?b=goog.array.map(a,goog.string.regExpEscape).join("|"):(b=goog.string.collapseWhitespace(a),b=goog.string.regExpEscape(b),b=b.replace(/ /g,"|")):goog.isArray(a)?b=0<a.length?goog.string.regExpEscape(a[0]):"":/^\W/.test(a)||(b=goog.string.regExpEscape(a));return b};
goog.ui.ac.Renderer.prototype.renderRowHtml=function(a,b){var c=this.dom_.createDom("DIV",{className:this.rowClassName,id:goog.ui.IdGenerator.getInstance().getNextUniqueId()});goog.a11y.aria.setRole(c,goog.a11y.aria.Role.OPTION);this.customRenderer_&&this.customRenderer_.renderRow?this.customRenderer_.renderRow(a,b,c):this.renderRowContents_(a,b,c);b&&this.useStandardHighlighting_&&this.startHiliteMatchingText_(c,b);goog.dom.classlist.add(c,this.rowClassName);this.rowDivs_.push(c);return c};
goog.ui.ac.Renderer.prototype.getRowFromEventTarget_=function(a){for(;a&&a!=this.element_&&!goog.dom.classlist.contains(a,this.rowClassName);)a=a.parentNode;return a?goog.array.indexOf(this.rowDivs_,a):-1};goog.ui.ac.Renderer.prototype.handleClick_=function(a){var b=this.getRowFromEventTarget_(a.target);0<=b&&this.dispatchEvent({type:goog.ui.ac.AutoComplete.EventType.SELECT,row:this.rows_[b].id});a.stopPropagation()};goog.ui.ac.Renderer.prototype.handleMouseDown_=function(a){a.stopPropagation();a.preventDefault()};
goog.ui.ac.Renderer.prototype.handleMouseOver_=function(a){a=this.getRowFromEventTarget_(a.target);0<=a&&!(goog.now()-this.startRenderingRows_<goog.ui.ac.Renderer.DELAY_BEFORE_MOUSEOVER)&&this.dispatchEvent({type:goog.ui.ac.AutoComplete.EventType.HILITE,row:this.rows_[a].id})};goog.ui.ac.Renderer.CustomRenderer=function(){};goog.ui.ac.Renderer.CustomRenderer.prototype.render=function(a,b,c,d){};goog.ui.ac.Renderer.CustomRenderer.prototype.renderRow=function(a,b,c){};goog.dom.InputType={BUTTON:"button",CHECKBOX:"checkbox",COLOR:"color",DATE:"date",DATETIME:"datetime",DATETIME_LOCAL:"datetime-local",EMAIL:"email",FILE:"file",HIDDEN:"hidden",IMAGE:"image",MENU:"menu",MONTH:"month",NUMBER:"number",PASSWORD:"password",RADIO:"radio",RANGE:"range",RESET:"reset",SEARCH:"search",SELECT_MULTIPLE:"select-multiple",SELECT_ONE:"select-one",SUBMIT:"submit",TEL:"tel",TEXT:"text",TEXTAREA:"textarea",TIME:"time",URL:"url",WEEK:"week"};goog.dom.selection={};goog.dom.selection.setStart=function(a,b){if(goog.dom.selection.useSelectionProperties_(a))a.selectionStart=b;else if(goog.dom.selection.isLegacyIe_()){var c=goog.dom.selection.getRangeIe_(a),d=c[0];d.inRange(c[1])&&(b=goog.dom.selection.canonicalizePositionIe_(a,b),d.collapse(!0),d.move("character",b),d.select())}};goog.dom.selection.getStart=function(a){return goog.dom.selection.getEndPoints_(a,!0)[0]};
goog.dom.selection.getEndPointsTextareaIe_=function(a,b,c){b=b.duplicate();for(var d=a.text,e=d,f=b.text,g=f,h=!1;!h;)0==a.compareEndPoints("StartToEnd",a)?h=!0:(a.moveEnd("character",-1),a.text==d?e+="\r\n":h=!0);if(c)return[e.length,-1];for(a=!1;!a;)0==b.compareEndPoints("StartToEnd",b)?a=!0:(b.moveEnd("character",-1),b.text==f?g+="\r\n":a=!0);return[e.length,e.length+g.length]};goog.dom.selection.getEndPoints=function(a){return goog.dom.selection.getEndPoints_(a,!1)};
goog.dom.selection.getEndPoints_=function(a,b){var c=0,d=0;if(goog.dom.selection.useSelectionProperties_(a))c=a.selectionStart,d=b?-1:a.selectionEnd;else if(goog.dom.selection.isLegacyIe_()){var e=goog.dom.selection.getRangeIe_(a),f=e[0];e=e[1];if(f.inRange(e)){f.setEndPoint("EndToStart",e);if(a.type==goog.dom.InputType.TEXTAREA)return goog.dom.selection.getEndPointsTextareaIe_(f,e,b);c=f.text.length;d=b?-1:f.text.length+e.text.length}}return[c,d]};
goog.dom.selection.setEnd=function(a,b){if(goog.dom.selection.useSelectionProperties_(a))a.selectionEnd=b;else if(goog.dom.selection.isLegacyIe_()){var c=goog.dom.selection.getRangeIe_(a),d=c[1];c[0].inRange(d)&&(b=goog.dom.selection.canonicalizePositionIe_(a,b),a=goog.dom.selection.canonicalizePositionIe_(a,goog.dom.selection.getStart(a)),d.collapse(!0),d.moveEnd("character",b-a),d.select())}};goog.dom.selection.getEnd=function(a){return goog.dom.selection.getEndPoints_(a,!1)[1]};
goog.dom.selection.setCursorPosition=function(a,b){goog.dom.selection.useSelectionProperties_(a)?(a.selectionStart=b,a.selectionEnd=b):goog.dom.selection.isLegacyIe_()&&(b=goog.dom.selection.canonicalizePositionIe_(a,b),a=a.createTextRange(),a.collapse(!0),a.move("character",b),a.select())};
goog.dom.selection.setText=function(a,b){if(goog.dom.selection.useSelectionProperties_(a)){var c=a.value,d=a.selectionStart,e=c.substr(0,d);c=c.substr(a.selectionEnd);a.value=e+b+c;a.selectionStart=d;a.selectionEnd=d+b.length}else if(goog.dom.selection.isLegacyIe_())d=goog.dom.selection.getRangeIe_(a),a=d[1],d[0].inRange(a)&&(d=a.duplicate(),a.text=b,a.setEndPoint("StartToStart",d),a.select());else throw Error("Cannot set the selection end");};
goog.dom.selection.getText=function(a){if(goog.dom.selection.useSelectionProperties_(a))return a.value.substring(a.selectionStart,a.selectionEnd);if(goog.dom.selection.isLegacyIe_()){var b=goog.dom.selection.getRangeIe_(a),c=b[1];return b[0].inRange(c)?a.type==goog.dom.InputType.TEXTAREA?goog.dom.selection.getSelectionRangeText_(c):c.text:""}throw Error("Cannot get the selection text");};
goog.dom.selection.getSelectionRangeText_=function(a){a=a.duplicate();for(var b=a.text,c=b,d=!1;!d;)0==a.compareEndPoints("StartToEnd",a)?d=!0:(a.moveEnd("character",-1),a.text==b?c+="\r\n":d=!0);return c};goog.dom.selection.getRangeIe_=function(a){var b=a.ownerDocument||a.document,c=b.selection.createRange();a.type==goog.dom.InputType.TEXTAREA?(b=b.body.createTextRange(),b.moveToElementText(a)):b=a.createTextRange();return[b,c]};
goog.dom.selection.canonicalizePositionIe_=function(a,b){a.type==goog.dom.InputType.TEXTAREA&&(a=a.value.substring(0,b),b=goog.string.canonicalizeNewlines(a).length);return b};goog.dom.selection.useSelectionProperties_=function(a){try{return"number"==typeof a.selectionStart}catch(b){return!1}};goog.dom.selection.isLegacyIe_=function(){return goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9")};goog.events.EventHandler=function(a){goog.Disposable.call(this);this.handler_=a;this.keys_={}};goog.inherits(goog.events.EventHandler,goog.Disposable);goog.events.EventHandler.typeArray_=[];goog.events.EventHandler.prototype.listen=function(a,b,c,d){return this.listen_(a,b,c,d)};goog.events.EventHandler.prototype.listenWithScope=function(a,b,c,d,e){return this.listen_(a,b,c,d,e)};
goog.events.EventHandler.prototype.listen_=function(a,b,c,d,e){goog.isArray(b)||(b&&(goog.events.EventHandler.typeArray_[0]=b.toString()),b=goog.events.EventHandler.typeArray_);for(var f=0;f<b.length;f++){var g=goog.events.listen(a,b[f],c||this.handleEvent,d||!1,e||this.handler_||this);if(!g)break;this.keys_[g.key]=g}return this};goog.events.EventHandler.prototype.listenOnce=function(a,b,c,d){return this.listenOnce_(a,b,c,d)};
goog.events.EventHandler.prototype.listenOnceWithScope=function(a,b,c,d,e){return this.listenOnce_(a,b,c,d,e)};goog.events.EventHandler.prototype.listenOnce_=function(a,b,c,d,e){if(goog.isArray(b))for(var f=0;f<b.length;f++)this.listenOnce_(a,b[f],c,d,e);else{a=goog.events.listenOnce(a,b,c||this.handleEvent,d,e||this.handler_||this);if(!a)return this;this.keys_[a.key]=a}return this};goog.events.EventHandler.prototype.listenWithWrapper=function(a,b,c,d){return this.listenWithWrapper_(a,b,c,d)};
goog.events.EventHandler.prototype.listenWithWrapperAndScope=function(a,b,c,d,e){return this.listenWithWrapper_(a,b,c,d,e)};goog.events.EventHandler.prototype.listenWithWrapper_=function(a,b,c,d,e){b.listen(a,c,d,e||this.handler_||this,this);return this};goog.events.EventHandler.prototype.getListenerCount=function(){var a=0,b;for(b in this.keys_)Object.prototype.hasOwnProperty.call(this.keys_,b)&&a++;return a};
goog.events.EventHandler.prototype.unlisten=function(a,b,c,d,e){if(goog.isArray(b))for(var f=0;f<b.length;f++)this.unlisten(a,b[f],c,d,e);else if(d=goog.isObject(d)?!!d.capture:!!d,a=goog.events.getListener(a,b,c||this.handleEvent,d,e||this.handler_||this))goog.events.unlistenByKey(a),delete this.keys_[a.key];return this};goog.events.EventHandler.prototype.unlistenWithWrapper=function(a,b,c,d,e){b.unlisten(a,c,d,e||this.handler_||this,this);return this};
goog.events.EventHandler.prototype.removeAll=function(){goog.object.forEach(this.keys_,function(a,b){this.keys_.hasOwnProperty(b)&&goog.events.unlistenByKey(a)},this);this.keys_={}};goog.events.EventHandler.prototype.disposeInternal=function(){goog.events.EventHandler.superClass_.disposeInternal.call(this);this.removeAll()};goog.events.EventHandler.prototype.handleEvent=function(a){throw Error("EventHandler.handleEvent not implemented");};goog.events.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,
N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,
PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255};
goog.events.KeyCodes.isTextModifyingKeyEvent=function(a){if(a.altKey&&!a.ctrlKey||a.metaKey||a.keyCode>=goog.events.KeyCodes.F1&&a.keyCode<=goog.events.KeyCodes.F12)return!1;switch(a.keyCode){case goog.events.KeyCodes.ALT:case goog.events.KeyCodes.CAPS_LOCK:case goog.events.KeyCodes.CONTEXT_MENU:case goog.events.KeyCodes.CTRL:case goog.events.KeyCodes.DOWN:case goog.events.KeyCodes.END:case goog.events.KeyCodes.ESC:case goog.events.KeyCodes.HOME:case goog.events.KeyCodes.INSERT:case goog.events.KeyCodes.LEFT:case goog.events.KeyCodes.MAC_FF_META:case goog.events.KeyCodes.META:case goog.events.KeyCodes.NUMLOCK:case goog.events.KeyCodes.NUM_CENTER:case goog.events.KeyCodes.PAGE_DOWN:case goog.events.KeyCodes.PAGE_UP:case goog.events.KeyCodes.PAUSE:case goog.events.KeyCodes.PHANTOM:case goog.events.KeyCodes.PRINT_SCREEN:case goog.events.KeyCodes.RIGHT:case goog.events.KeyCodes.SCROLL_LOCK:case goog.events.KeyCodes.SHIFT:case goog.events.KeyCodes.UP:case goog.events.KeyCodes.VK_NONAME:case goog.events.KeyCodes.WIN_KEY:case goog.events.KeyCodes.WIN_KEY_RIGHT:return!1;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return!goog.userAgent.GECKO;
default:return a.keyCode<goog.events.KeyCodes.FIRST_MEDIA_KEY||a.keyCode>goog.events.KeyCodes.LAST_MEDIA_KEY}};
goog.events.KeyCodes.firesKeyPressEvent=function(a,b,c,d,e,f){if(goog.userAgent.WEBKIT&&!goog.userAgent.isVersionOrHigher("525"))return!0;if(goog.userAgent.MAC&&e)return goog.events.KeyCodes.isCharacterKey(a);if(e&&!d)return!1;if(!goog.userAgent.GECKO){goog.isNumber(b)&&(b=goog.events.KeyCodes.normalizeKeyCode(b));var g=b==goog.events.KeyCodes.CTRL||b==goog.events.KeyCodes.ALT||goog.userAgent.MAC&&b==goog.events.KeyCodes.META,h=b==goog.events.KeyCodes.SHIFT&&(d||f);if((!c||goog.userAgent.MAC)&&g||
goog.userAgent.MAC&&h)return!1}if((goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&d&&c)switch(a){case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:case goog.events.KeyCodes.TILDE:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:return!1}if(goog.userAgent.IE&&
d&&b==a)return!1;switch(a){case goog.events.KeyCodes.ENTER:return goog.userAgent.GECKO?f||e?!1:!(c&&d):!0;case goog.events.KeyCodes.ESC:return!(goog.userAgent.WEBKIT||goog.userAgent.EDGE||goog.userAgent.GECKO)}return goog.userAgent.GECKO&&(d||e||f)?!1:goog.events.KeyCodes.isCharacterKey(a)};
goog.events.KeyCodes.isCharacterKey=function(a){if(a>=goog.events.KeyCodes.ZERO&&a<=goog.events.KeyCodes.NINE||a>=goog.events.KeyCodes.NUM_ZERO&&a<=goog.events.KeyCodes.NUM_MULTIPLY||a>=goog.events.KeyCodes.A&&a<=goog.events.KeyCodes.Z||(goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&0==a)return!0;switch(a){case goog.events.KeyCodes.SPACE:case goog.events.KeyCodes.PLUS_SIGN:case goog.events.KeyCodes.QUESTION_MARK:case goog.events.KeyCodes.AT_SIGN:case goog.events.KeyCodes.NUM_PLUS:case goog.events.KeyCodes.NUM_MINUS:case goog.events.KeyCodes.NUM_PERIOD:case goog.events.KeyCodes.NUM_DIVISION:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.FF_SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.FF_EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:case goog.events.KeyCodes.FF_HASH:return!0;
default:return!1}};goog.events.KeyCodes.normalizeKeyCode=function(a){return goog.userAgent.GECKO?goog.events.KeyCodes.normalizeGeckoKeyCode(a):goog.userAgent.MAC&&goog.userAgent.WEBKIT?goog.events.KeyCodes.normalizeMacWebKitKeyCode(a):a};
goog.events.KeyCodes.normalizeGeckoKeyCode=function(a){switch(a){case goog.events.KeyCodes.FF_EQUALS:return goog.events.KeyCodes.EQUALS;case goog.events.KeyCodes.FF_SEMICOLON:return goog.events.KeyCodes.SEMICOLON;case goog.events.KeyCodes.FF_DASH:return goog.events.KeyCodes.DASH;case goog.events.KeyCodes.MAC_FF_META:return goog.events.KeyCodes.META;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return goog.events.KeyCodes.WIN_KEY;default:return a}};
goog.events.KeyCodes.normalizeMacWebKitKeyCode=function(a){switch(a){case goog.events.KeyCodes.MAC_WK_CMD_RIGHT:return goog.events.KeyCodes.META;default:return a}};goog.events.KeyHandler=function(a,b){goog.events.EventTarget.call(this);a&&this.attach(a,b)};goog.inherits(goog.events.KeyHandler,goog.events.EventTarget);goog.events.KeyHandler.prototype.element_=null;goog.events.KeyHandler.prototype.keyPressKey_=null;goog.events.KeyHandler.prototype.keyDownKey_=null;goog.events.KeyHandler.prototype.keyUpKey_=null;goog.events.KeyHandler.prototype.lastKey_=-1;goog.events.KeyHandler.prototype.keyCode_=-1;goog.events.KeyHandler.prototype.altKey_=!1;
goog.events.KeyHandler.EventType={KEY:"key"};
goog.events.KeyHandler.safariKey_={3:goog.events.KeyCodes.ENTER,12:goog.events.KeyCodes.NUMLOCK,63232:goog.events.KeyCodes.UP,63233:goog.events.KeyCodes.DOWN,63234:goog.events.KeyCodes.LEFT,63235:goog.events.KeyCodes.RIGHT,63236:goog.events.KeyCodes.F1,63237:goog.events.KeyCodes.F2,63238:goog.events.KeyCodes.F3,63239:goog.events.KeyCodes.F4,63240:goog.events.KeyCodes.F5,63241:goog.events.KeyCodes.F6,63242:goog.events.KeyCodes.F7,63243:goog.events.KeyCodes.F8,63244:goog.events.KeyCodes.F9,63245:goog.events.KeyCodes.F10,
63246:goog.events.KeyCodes.F11,63247:goog.events.KeyCodes.F12,63248:goog.events.KeyCodes.PRINT_SCREEN,63272:goog.events.KeyCodes.DELETE,63273:goog.events.KeyCodes.HOME,63275:goog.events.KeyCodes.END,63276:goog.events.KeyCodes.PAGE_UP,63277:goog.events.KeyCodes.PAGE_DOWN,63289:goog.events.KeyCodes.NUMLOCK,63302:goog.events.KeyCodes.INSERT};
goog.events.KeyHandler.keyIdentifier_={Up:goog.events.KeyCodes.UP,Down:goog.events.KeyCodes.DOWN,Left:goog.events.KeyCodes.LEFT,Right:goog.events.KeyCodes.RIGHT,Enter:goog.events.KeyCodes.ENTER,F1:goog.events.KeyCodes.F1,F2:goog.events.KeyCodes.F2,F3:goog.events.KeyCodes.F3,F4:goog.events.KeyCodes.F4,F5:goog.events.KeyCodes.F5,F6:goog.events.KeyCodes.F6,F7:goog.events.KeyCodes.F7,F8:goog.events.KeyCodes.F8,F9:goog.events.KeyCodes.F9,F10:goog.events.KeyCodes.F10,F11:goog.events.KeyCodes.F11,F12:goog.events.KeyCodes.F12,
"U+007F":goog.events.KeyCodes.DELETE,Home:goog.events.KeyCodes.HOME,End:goog.events.KeyCodes.END,PageUp:goog.events.KeyCodes.PAGE_UP,PageDown:goog.events.KeyCodes.PAGE_DOWN,Insert:goog.events.KeyCodes.INSERT};goog.events.KeyHandler.USES_KEYDOWN_=!goog.userAgent.WEBKIT||goog.userAgent.isVersionOrHigher("525");goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_=goog.userAgent.MAC&&goog.userAgent.GECKO;
goog.events.KeyHandler.prototype.handleKeyDown_=function(a){(goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&(this.lastKey_==goog.events.KeyCodes.CTRL&&!a.ctrlKey||this.lastKey_==goog.events.KeyCodes.ALT&&!a.altKey||goog.userAgent.MAC&&this.lastKey_==goog.events.KeyCodes.META&&!a.metaKey)&&this.resetState();-1==this.lastKey_&&(a.ctrlKey&&a.keyCode!=goog.events.KeyCodes.CTRL?this.lastKey_=goog.events.KeyCodes.CTRL:a.altKey&&a.keyCode!=goog.events.KeyCodes.ALT?this.lastKey_=goog.events.KeyCodes.ALT:a.metaKey&&
a.keyCode!=goog.events.KeyCodes.META&&(this.lastKey_=goog.events.KeyCodes.META));goog.events.KeyHandler.USES_KEYDOWN_&&!goog.events.KeyCodes.firesKeyPressEvent(a.keyCode,this.lastKey_,a.shiftKey,a.ctrlKey,a.altKey,a.metaKey)?this.handleEvent(a):(this.keyCode_=goog.events.KeyCodes.normalizeKeyCode(a.keyCode),goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_&&(this.altKey_=a.altKey))};goog.events.KeyHandler.prototype.resetState=function(){this.keyCode_=this.lastKey_=-1};
goog.events.KeyHandler.prototype.handleKeyup_=function(a){this.resetState();this.altKey_=a.altKey};
goog.events.KeyHandler.prototype.handleEvent=function(a){var b=a.getBrowserEvent(),c=b.altKey;if(goog.userAgent.IE&&a.type==goog.events.EventType.KEYPRESS){var d=this.keyCode_;var e=d!=goog.events.KeyCodes.ENTER&&d!=goog.events.KeyCodes.ESC?b.keyCode:0}else(goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&a.type==goog.events.EventType.KEYPRESS?(d=this.keyCode_,e=0<=b.charCode&&63232>b.charCode&&goog.events.KeyCodes.isCharacterKey(d)?b.charCode:0):goog.userAgent.OPERA&&!goog.userAgent.WEBKIT?(d=this.keyCode_,
e=goog.events.KeyCodes.isCharacterKey(d)?b.keyCode:0):(a.type==goog.events.EventType.KEYPRESS?(goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_&&(c=this.altKey_),b.keyCode==b.charCode?32>b.keyCode?(d=b.keyCode,e=0):(d=this.keyCode_,e=b.charCode):(d=b.keyCode||this.keyCode_,e=b.charCode||0)):(d=b.keyCode||this.keyCode_,e=b.charCode||0),goog.userAgent.MAC&&e==goog.events.KeyCodes.QUESTION_MARK&&d==goog.events.KeyCodes.WIN_KEY&&(d=goog.events.KeyCodes.SLASH));var f=d=goog.events.KeyCodes.normalizeKeyCode(d);
d?63232<=d&&d in goog.events.KeyHandler.safariKey_?f=goog.events.KeyHandler.safariKey_[d]:25==d&&a.shiftKey&&(f=9):b.keyIdentifier&&b.keyIdentifier in goog.events.KeyHandler.keyIdentifier_&&(f=goog.events.KeyHandler.keyIdentifier_[b.keyIdentifier]);goog.userAgent.GECKO&&goog.events.KeyHandler.USES_KEYDOWN_&&a.type==goog.events.EventType.KEYPRESS&&!goog.events.KeyCodes.firesKeyPressEvent(f,this.lastKey_,a.shiftKey,a.ctrlKey,c,a.metaKey)||(a=f==this.lastKey_,this.lastKey_=f,b=new goog.events.KeyEvent(f,
e,a,b),b.altKey=c,this.dispatchEvent(b))};goog.events.KeyHandler.prototype.getElement=function(){return this.element_};
goog.events.KeyHandler.prototype.attach=function(a,b){this.keyUpKey_&&this.detach();this.element_=a;this.keyPressKey_=goog.events.listen(this.element_,goog.events.EventType.KEYPRESS,this,b);this.keyDownKey_=goog.events.listen(this.element_,goog.events.EventType.KEYDOWN,this.handleKeyDown_,b,this);this.keyUpKey_=goog.events.listen(this.element_,goog.events.EventType.KEYUP,this.handleKeyup_,b,this)};
goog.events.KeyHandler.prototype.detach=function(){this.keyPressKey_&&(goog.events.unlistenByKey(this.keyPressKey_),goog.events.unlistenByKey(this.keyDownKey_),goog.events.unlistenByKey(this.keyUpKey_),this.keyUpKey_=this.keyDownKey_=this.keyPressKey_=null);this.element_=null;this.keyCode_=this.lastKey_=-1};goog.events.KeyHandler.prototype.disposeInternal=function(){goog.events.KeyHandler.superClass_.disposeInternal.call(this);this.detach()};
goog.events.KeyEvent=function(a,b,c,d){goog.events.BrowserEvent.call(this,d);this.type=goog.events.KeyHandler.EventType.KEY;this.keyCode=a;this.charCode=b;this.repeat=c};goog.inherits(goog.events.KeyEvent,goog.events.BrowserEvent);goog.ui.ac.InputHandler=function(a,b,c,d){goog.Disposable.call(this);d=d||150;this.multi_=null!=c?c:!0;this.setSeparators(a||goog.ui.ac.InputHandler.STANDARD_LIST_SEPARATORS);this.literals_=b||"";this.preventSelectionOnTab_=!1;this.preventDefaultOnTab_=this.multi_;this.timer_=0<d?new goog.Timer(d):null;this.eh_=new goog.events.EventHandler(this);this.activateHandler_=new goog.events.EventHandler(this);this.keyHandler_=new goog.events.KeyHandler;this.lastKeyCode_=-1};
goog.inherits(goog.ui.ac.InputHandler,goog.Disposable);goog.tagUnsealableClass(goog.ui.ac.InputHandler);goog.ui.ac.InputHandler.REQUIRES_ASYNC_BLUR_=(goog.userAgent.product.IPHONE||goog.userAgent.product.IPAD)&&!goog.userAgent.isVersionOrHigher("533.17.9");goog.ui.ac.InputHandler.STANDARD_LIST_SEPARATORS=",;";goog.ui.ac.InputHandler.QUOTE_LITERALS='"';goog.ui.ac.InputHandler.prototype.whitespaceWrapEntries_=!0;goog.ui.ac.InputHandler.prototype.generateNewTokenOnLiteral_=!0;
goog.ui.ac.InputHandler.prototype.upsideDown_=!1;goog.ui.ac.InputHandler.prototype.separatorUpdates_=!0;goog.ui.ac.InputHandler.prototype.separatorSelects_=!0;goog.ui.ac.InputHandler.prototype.activeTimeoutId_=null;goog.ui.ac.InputHandler.prototype.activeElement_=null;goog.ui.ac.InputHandler.prototype.lastValue_="";goog.ui.ac.InputHandler.prototype.waitingForIme_=!1;goog.ui.ac.InputHandler.prototype.rowJustSelected_=!1;goog.ui.ac.InputHandler.prototype.updateDuringTyping_=!0;
goog.ui.ac.InputHandler.prototype.attachAutoComplete=function(a){this.ac_=a};goog.ui.ac.InputHandler.prototype.getAutoComplete=function(){return this.ac_};goog.ui.ac.InputHandler.prototype.getActiveElement=function(){return this.activeElement_};goog.ui.ac.InputHandler.prototype.getValue=function(){return this.activeElement_.value};goog.ui.ac.InputHandler.prototype.setValue=function(a){this.activeElement_.value=a};goog.ui.ac.InputHandler.prototype.getCursorPosition=function(){return goog.dom.selection.getStart(this.activeElement_)};
goog.ui.ac.InputHandler.prototype.setCursorPosition=function(a){goog.dom.selection.setStart(this.activeElement_,a);goog.dom.selection.setEnd(this.activeElement_,a)};
goog.ui.ac.InputHandler.prototype.attachInput=function(a){goog.dom.isElement(a)&&(goog.a11y.aria.setRole(a,goog.a11y.aria.Role.COMBOBOX),goog.a11y.aria.setState(a,goog.a11y.aria.State.AUTOCOMPLETE,"list"));this.eh_.listen(a,goog.events.EventType.FOCUS,this.handleFocus);this.eh_.listen(a,goog.events.EventType.BLUR,this.handleBlur);if(!this.activeElement_&&(this.activateHandler_.listen(a,goog.events.EventType.KEYDOWN,this.onKeyDownOnInactiveElement_),goog.dom.isElement(a))){var b=goog.dom.getOwnerDocument(a);
goog.dom.getActiveElement(b)==a&&this.processFocus(a)}};goog.ui.ac.InputHandler.prototype.detachInput=function(a){goog.dom.isElement(a)&&(goog.a11y.aria.removeRole(a),goog.a11y.aria.removeState(a,goog.a11y.aria.State.AUTOCOMPLETE));a==this.activeElement_&&this.handleBlur();this.eh_.unlisten(a,goog.events.EventType.FOCUS,this.handleFocus);this.eh_.unlisten(a,goog.events.EventType.BLUR,this.handleBlur);this.activeElement_||this.activateHandler_.unlisten(a,goog.events.EventType.KEYDOWN,this.onKeyDownOnInactiveElement_)};
goog.ui.ac.InputHandler.prototype.attachInputs=function(a){for(var b=0;b<arguments.length;b++)this.attachInput(arguments[b])};goog.ui.ac.InputHandler.prototype.detachInputs=function(a){for(var b=0;b<arguments.length;b++)this.detachInput(arguments[b])};goog.ui.ac.InputHandler.prototype.selectRow=function(a,b){this.activeElement_&&this.setTokenText(a.toString(),b);return!1};
goog.ui.ac.InputHandler.prototype.setTokenText=function(a,b){if(goog.isDef(b)?b:this.multi_){b=this.getTokenIndex_(this.getValue(),this.getCursorPosition());var c=this.splitInput_(this.getValue());this.separatorCheck_&&!this.separatorCheck_.test(a)&&(a=goog.string.trimRight(a)+this.defaultSeparator_);this.whitespaceWrapEntries_&&(0==b||goog.string.isEmptyOrWhitespace(c[b-1])||(a=" "+a),b==c.length-1&&(a+=" "));if(a!=c[b]){c[b]=a;a=this.activeElement_;(goog.userAgent.GECKO||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("9"))&&
a.blur();a.value=c.join("");for(var d=0,e=0;e<=b;e++)d+=c[e].length;a.focus();this.setCursorPosition(d)}}else this.setValue(a);this.rowJustSelected_=!0};goog.ui.ac.InputHandler.prototype.disposeInternal=function(){goog.ui.ac.InputHandler.superClass_.disposeInternal.call(this);null!=this.activeTimeoutId_&&window.clearTimeout(this.activeTimeoutId_);this.eh_.dispose();delete this.eh_;this.activateHandler_.dispose();this.keyHandler_.dispose();goog.dispose(this.timer_)};
goog.ui.ac.InputHandler.prototype.setSeparators=function(a,b){this.separators_=a;this.defaultSeparator_=goog.isDefAndNotNull(b)?b:this.separators_.substring(0,1);a=this.multi_?"[\\s"+this.separators_+"]+":"[\\s]+";this.trimmer_=new RegExp("^"+a+"|"+a+"$","g");this.separatorCheck_=new RegExp("\\s*["+this.separators_+"]$")};goog.ui.ac.InputHandler.prototype.setUpsideDown=function(a){this.upsideDown_=a};
goog.ui.ac.InputHandler.prototype.setWhitespaceWrapEntries=function(a){this.whitespaceWrapEntries_=a};goog.ui.ac.InputHandler.prototype.setGenerateNewTokenOnLiteral=function(a){this.generateNewTokenOnLiteral_=a};goog.ui.ac.InputHandler.prototype.setTrimmingRegExp=function(a){this.trimmer_=a};goog.ui.ac.InputHandler.prototype.setEndsWithSeparatorRegExp=function(a){this.separatorCheck_=a};goog.ui.ac.InputHandler.prototype.setPreventDefaultOnTab=function(a){this.preventDefaultOnTab_=a};
goog.ui.ac.InputHandler.prototype.setPreventSelectionOnTab=function(a){this.preventSelectionOnTab_=a};goog.ui.ac.InputHandler.prototype.setSeparatorCompletes=function(a){this.separatorSelects_=this.separatorUpdates_=a};goog.ui.ac.InputHandler.prototype.setSeparatorSelects=function(a){this.separatorSelects_=a};goog.ui.ac.InputHandler.prototype.getThrottleTime=function(){return this.timer_?this.timer_.getInterval():-1};
goog.ui.ac.InputHandler.prototype.setRowJustSelected=function(a){this.rowJustSelected_=a};goog.ui.ac.InputHandler.prototype.setThrottleTime=function(a){0>a?(this.timer_.dispose(),this.timer_=null):this.timer_?this.timer_.setInterval(a):this.timer_=new goog.Timer(a)};goog.ui.ac.InputHandler.prototype.getUpdateDuringTyping=function(){return this.updateDuringTyping_};goog.ui.ac.InputHandler.prototype.setUpdateDuringTyping=function(a){this.updateDuringTyping_=a};
goog.ui.ac.InputHandler.prototype.handleKeyEvent=function(a){switch(a.keyCode){case goog.events.KeyCodes.DOWN:if(this.ac_.isOpen())return this.moveDown_(),a.preventDefault(),!0;if(!this.multi_)return this.update(!0),a.preventDefault(),!0;break;case goog.events.KeyCodes.UP:if(this.ac_.isOpen())return this.moveUp_(),a.preventDefault(),!0;break;case goog.events.KeyCodes.TAB:if(!this.ac_.isOpen()||a.shiftKey||this.preventSelectionOnTab_)this.ac_.dismiss();else if(this.update(),this.ac_.selectHilited()&&
this.preventDefaultOnTab_)return a.preventDefault(),!0;break;case goog.events.KeyCodes.ENTER:if(this.ac_.isOpen()){if(this.update(),this.ac_.selectHilited())return a.preventDefault(),a.stopPropagation(),!0}else this.ac_.dismiss();break;case goog.events.KeyCodes.ESC:if(this.ac_.isOpen())return this.ac_.dismiss(),a.preventDefault(),a.stopPropagation(),!0;break;case goog.events.KeyCodes.WIN_IME:if(!this.waitingForIme_)return this.startWaitingForIme_(),!0;break;default:this.timer_&&!this.updateDuringTyping_&&
(this.timer_.stop(),this.timer_.start())}return this.handleSeparator_(a)};goog.ui.ac.InputHandler.prototype.handleSeparator_=function(a){var b=this.multi_&&a.charCode&&-1!=this.separators_.indexOf(String.fromCharCode(a.charCode));this.separatorUpdates_&&b&&this.update();return this.separatorSelects_&&b&&this.ac_.selectHilited()?(a.preventDefault(),!0):!1};goog.ui.ac.InputHandler.prototype.needKeyUpListener=function(){return!1};goog.ui.ac.InputHandler.prototype.handleKeyUp=function(a){return!1};
goog.ui.ac.InputHandler.prototype.addEventHandlers_=function(){this.keyHandler_.attach(this.activeElement_);this.eh_.listen(this.keyHandler_,goog.events.KeyHandler.EventType.KEY,this.onKey_);this.needKeyUpListener()&&this.eh_.listen(this.activeElement_,goog.events.EventType.KEYUP,this.handleKeyUp);this.eh_.listen(this.activeElement_,goog.events.EventType.MOUSEDOWN,this.onMouseDown_);goog.userAgent.IE&&this.eh_.listen(this.activeElement_,goog.events.EventType.KEYPRESS,this.onIeKeyPress_)};
goog.ui.ac.InputHandler.prototype.removeEventHandlers_=function(){this.eh_.unlisten(this.keyHandler_,goog.events.KeyHandler.EventType.KEY,this.onKey_);this.keyHandler_.detach();this.eh_.unlisten(this.activeElement_,goog.events.EventType.KEYUP,this.handleKeyUp);this.eh_.unlisten(this.activeElement_,goog.events.EventType.MOUSEDOWN,this.onMouseDown_);goog.userAgent.IE&&this.eh_.unlisten(this.activeElement_,goog.events.EventType.KEYPRESS,this.onIeKeyPress_);this.waitingForIme_&&this.stopWaitingForIme_()};
goog.ui.ac.InputHandler.prototype.handleFocus=function(a){this.processFocus(a.target||null)};goog.ui.ac.InputHandler.prototype.processFocus=function(a){this.activateHandler_.removeAll();this.ac_&&this.ac_.cancelDelayedDismiss();a!=this.activeElement_&&(this.activeElement_=a,this.timer_&&(this.timer_.start(),this.eh_.listen(this.timer_,goog.Timer.TICK,this.onTick_)),this.lastValue_=this.getValue(),this.addEventHandlers_())};
goog.ui.ac.InputHandler.prototype.handleBlur=function(a){goog.ui.ac.InputHandler.REQUIRES_ASYNC_BLUR_?this.activeTimeoutId_=window.setTimeout(goog.bind(this.processBlur,this),0):this.processBlur()};goog.ui.ac.InputHandler.prototype.processBlur=function(){this.activeElement_&&(this.removeEventHandlers_(),this.activeElement_=null,this.timer_&&(this.timer_.stop(),this.eh_.unlisten(this.timer_,goog.Timer.TICK,this.onTick_)),this.ac_&&this.ac_.dismissOnDelay())};
goog.ui.ac.InputHandler.prototype.onTick_=function(a){this.update()};goog.ui.ac.InputHandler.prototype.onKeyDownOnInactiveElement_=function(a){this.handleFocus(a)};goog.ui.ac.InputHandler.prototype.onKey_=function(a){this.lastKeyCode_=a.keyCode;this.ac_&&this.handleKeyEvent(a)};goog.ui.ac.InputHandler.prototype.onKeyPress_=function(a){this.waitingForIme_&&this.lastKeyCode_!=goog.events.KeyCodes.WIN_IME&&this.stopWaitingForIme_()};
goog.ui.ac.InputHandler.prototype.onKeyUp_=function(a){this.waitingForIme_&&(a.keyCode==goog.events.KeyCodes.ENTER||a.keyCode==goog.events.KeyCodes.M&&a.ctrlKey)&&this.stopWaitingForIme_()};goog.ui.ac.InputHandler.prototype.onMouseDown_=function(a){this.ac_&&this.handleMouseDown(a)};goog.ui.ac.InputHandler.prototype.handleMouseDown=function(a){};
goog.ui.ac.InputHandler.prototype.startWaitingForIme_=function(){this.waitingForIme_||(this.eh_.listen(this.activeElement_,goog.events.EventType.KEYUP,this.onKeyUp_),this.eh_.listen(this.activeElement_,goog.events.EventType.KEYPRESS,this.onKeyPress_),this.waitingForIme_=!0)};
goog.ui.ac.InputHandler.prototype.stopWaitingForIme_=function(){this.waitingForIme_&&(this.waitingForIme_=!1,this.eh_.unlisten(this.activeElement_,goog.events.EventType.KEYPRESS,this.onKeyPress_),this.eh_.unlisten(this.activeElement_,goog.events.EventType.KEYUP,this.onKeyUp_))};goog.ui.ac.InputHandler.prototype.onIeKeyPress_=function(a){this.handleSeparator_(a)};
goog.ui.ac.InputHandler.prototype.update=function(a){if(this.activeElement_&&(a||this.getValue()!=this.lastValue_)){if(a||!this.rowJustSelected_)a=this.parseToken(),this.ac_&&(this.ac_.setTarget(this.activeElement_),this.ac_.setToken(a,this.getValue()));this.lastValue_=this.getValue()}this.rowJustSelected_=!1};goog.ui.ac.InputHandler.prototype.parseToken=function(){return this.parseToken_()};goog.ui.ac.InputHandler.prototype.moveUp_=function(){return this.upsideDown_?this.ac_.hiliteNext():this.ac_.hilitePrev()};
goog.ui.ac.InputHandler.prototype.moveDown_=function(){return this.upsideDown_?this.ac_.hilitePrev():this.ac_.hiliteNext()};goog.ui.ac.InputHandler.prototype.parseToken_=function(){var a=this.getCursorPosition(),b=this.getValue();return this.trim_(this.splitInput_(b)[this.getTokenIndex_(b,a)])};goog.ui.ac.InputHandler.prototype.trim_=function(a){return this.trimmer_?String(a).replace(this.trimmer_,""):a};
goog.ui.ac.InputHandler.prototype.getTokenIndex_=function(a,b){var c=this.splitInput_(a);if(b==a.length)return c.length-1;for(var d=a=0,e=0;d<c.length&&e<=b;d++)e+=c[d].length,a=d;return a};
goog.ui.ac.InputHandler.prototype.splitInput_=function(a){if(!this.multi_)return[a];a=String(a).split("");for(var b=[],c=[],d=0,e=!1;d<a.length;d++)this.literals_&&-1!=this.literals_.indexOf(a[d])?(this.generateNewTokenOnLiteral_&&!e&&(b.push(c.join("")),c.length=0),c.push(a[d]),e=!e):e||-1==this.separators_.indexOf(a[d])?c.push(a[d]):(c.push(a[d]),b.push(c.join("")),c.length=0);b.push(c.join(""));return b};goog.ui.ButtonSide={NONE:0,START:1,END:2,BOTH:3};goog.ui.Component=function(a){goog.events.EventTarget.call(this);this.dom_=a||goog.dom.getDomHelper();this.rightToLeft_=goog.ui.Component.defaultRightToLeft_;this.id_=null;this.inDocument_=!1;this.element_=null;this.googUiComponentHandler_=void 0;this.childIndex_=this.children_=this.parent_=this.model_=null;this.pointerEventsEnabled_=this.wasDecorated_=!1};goog.inherits(goog.ui.Component,goog.events.EventTarget);goog.ui.Component.ALLOW_DETACHED_DECORATION=!1;
goog.ui.Component.prototype.idGenerator_=goog.ui.IdGenerator.getInstance();goog.ui.Component.DEFAULT_BIDI_DIR=1;goog.ui.Component.defaultRightToLeft_=1==goog.ui.Component.DEFAULT_BIDI_DIR?!1:-1==goog.ui.Component.DEFAULT_BIDI_DIR?!0:null;
goog.ui.Component.EventType={BEFORE_SHOW:"beforeshow",SHOW:"show",HIDE:"hide",DISABLE:"disable",ENABLE:"enable",HIGHLIGHT:"highlight",UNHIGHLIGHT:"unhighlight",ACTIVATE:"activate",DEACTIVATE:"deactivate",SELECT:"select",UNSELECT:"unselect",CHECK:"check",UNCHECK:"uncheck",FOCUS:"focus",BLUR:"blur",OPEN:"open",CLOSE:"close",ENTER:"enter",LEAVE:"leave",ACTION:"action",CHANGE:"change"};
goog.ui.Component.Error={NOT_SUPPORTED:"Method not supported",DECORATE_INVALID:"Invalid element to decorate",ALREADY_RENDERED:"Component already rendered",PARENT_UNABLE_TO_BE_SET:"Unable to set parent component",CHILD_INDEX_OUT_OF_BOUNDS:"Child component index out of bounds",NOT_OUR_CHILD:"Child is not in parent component",NOT_IN_DOCUMENT:"Operation not supported while component is not in document",STATE_INVALID:"Invalid component state"};
goog.ui.Component.State={ALL:255,DISABLED:1,HOVER:2,ACTIVE:4,SELECTED:8,CHECKED:16,FOCUSED:32,OPENED:64};
goog.ui.Component.getStateTransitionEvent=function(a,b){switch(a){case goog.ui.Component.State.DISABLED:return b?goog.ui.Component.EventType.DISABLE:goog.ui.Component.EventType.ENABLE;case goog.ui.Component.State.HOVER:return b?goog.ui.Component.EventType.HIGHLIGHT:goog.ui.Component.EventType.UNHIGHLIGHT;case goog.ui.Component.State.ACTIVE:return b?goog.ui.Component.EventType.ACTIVATE:goog.ui.Component.EventType.DEACTIVATE;case goog.ui.Component.State.SELECTED:return b?goog.ui.Component.EventType.SELECT:
goog.ui.Component.EventType.UNSELECT;case goog.ui.Component.State.CHECKED:return b?goog.ui.Component.EventType.CHECK:goog.ui.Component.EventType.UNCHECK;case goog.ui.Component.State.FOCUSED:return b?goog.ui.Component.EventType.FOCUS:goog.ui.Component.EventType.BLUR;case goog.ui.Component.State.OPENED:return b?goog.ui.Component.EventType.OPEN:goog.ui.Component.EventType.CLOSE}throw Error(goog.ui.Component.Error.STATE_INVALID);};
goog.ui.Component.setDefaultRightToLeft=function(a){goog.ui.Component.defaultRightToLeft_=a};goog.ui.Component.prototype.getId=function(){return this.id_||(this.id_=this.idGenerator_.getNextUniqueId())};goog.ui.Component.prototype.setId=function(a){this.parent_&&this.parent_.childIndex_&&(goog.object.remove(this.parent_.childIndex_,this.id_),goog.object.add(this.parent_.childIndex_,a,this));this.id_=a};goog.ui.Component.prototype.getElement=function(){return this.element_};
goog.ui.Component.prototype.getElementStrict=function(){var a=this.element_;goog.asserts.assert(a,"Can not call getElementStrict before rendering/decorating.");return a};goog.ui.Component.prototype.setElementInternal=function(a){this.element_=a};goog.ui.Component.prototype.getElementsByClass=function(a){return this.element_?this.dom_.getElementsByClass(a,this.element_):[]};goog.ui.Component.prototype.getElementByClass=function(a){return this.element_?this.dom_.getElementByClass(a,this.element_):null};
goog.ui.Component.prototype.getRequiredElementByClass=function(a){var b=this.getElementByClass(a);goog.asserts.assert(b,"Expected element in component with class: %s",a);return b};goog.ui.Component.prototype.getHandler=function(){this.googUiComponentHandler_||(this.googUiComponentHandler_=new goog.events.EventHandler(this));return goog.asserts.assert(this.googUiComponentHandler_)};
goog.ui.Component.prototype.setParent=function(a){if(this==a)throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);if(a&&this.parent_&&this.id_&&this.parent_.getChild(this.id_)&&this.parent_!=a)throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);this.parent_=a;goog.ui.Component.superClass_.setParentEventTarget.call(this,a)};goog.ui.Component.prototype.getParent=function(){return this.parent_};
goog.ui.Component.prototype.setParentEventTarget=function(a){if(this.parent_&&this.parent_!=a)throw Error(goog.ui.Component.Error.NOT_SUPPORTED);goog.ui.Component.superClass_.setParentEventTarget.call(this,a)};goog.ui.Component.prototype.getDomHelper=function(){return this.dom_};goog.ui.Component.prototype.isInDocument=function(){return this.inDocument_};goog.ui.Component.prototype.createDom=function(){this.element_=this.dom_.createElement("DIV")};goog.ui.Component.prototype.render=function(a){this.render_(a)};
goog.ui.Component.prototype.renderBefore=function(a){this.render_(a.parentNode,a)};goog.ui.Component.prototype.render_=function(a,b){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.element_||this.createDom();a?a.insertBefore(this.element_,b||null):this.dom_.getDocument().body.appendChild(this.element_);this.parent_&&!this.parent_.isInDocument()||this.enterDocument()};
goog.ui.Component.prototype.decorate=function(a){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(a&&this.canDecorate(a)){this.wasDecorated_=!0;var b=goog.dom.getOwnerDocument(a);this.dom_&&this.dom_.getDocument()==b||(this.dom_=goog.dom.getDomHelper(a));this.decorateInternal(a);goog.ui.Component.ALLOW_DETACHED_DECORATION&&!goog.dom.contains(b,a)||this.enterDocument()}else throw Error(goog.ui.Component.Error.DECORATE_INVALID);};goog.ui.Component.prototype.canDecorate=function(a){return!0};
goog.ui.Component.prototype.wasDecorated=function(){return this.wasDecorated_};goog.ui.Component.prototype.decorateInternal=function(a){this.element_=a};goog.ui.Component.prototype.enterDocument=function(){this.inDocument_=!0;this.forEachChild(function(a){!a.isInDocument()&&a.getElement()&&a.enterDocument()})};
goog.ui.Component.prototype.exitDocument=function(){this.forEachChild(function(a){a.isInDocument()&&a.exitDocument()});this.googUiComponentHandler_&&this.googUiComponentHandler_.removeAll();this.inDocument_=!1};
goog.ui.Component.prototype.disposeInternal=function(){this.inDocument_&&this.exitDocument();this.googUiComponentHandler_&&(this.googUiComponentHandler_.dispose(),delete this.googUiComponentHandler_);this.forEachChild(function(a){a.dispose()});!this.wasDecorated_&&this.element_&&goog.dom.removeNode(this.element_);this.parent_=this.model_=this.element_=this.childIndex_=this.children_=null;goog.ui.Component.superClass_.disposeInternal.call(this)};
goog.ui.Component.prototype.makeId=function(a){return this.getId()+"."+a};goog.ui.Component.prototype.makeIds=function(a){var b={},c;for(c in a)b[c]=this.makeId(a[c]);return b};goog.ui.Component.prototype.getModel=function(){return this.model_};goog.ui.Component.prototype.setModel=function(a){this.model_=a};goog.ui.Component.prototype.getFragmentFromId=function(a){return a.substring(this.getId().length+1)};
goog.ui.Component.prototype.getElementByFragment=function(a){if(!this.inDocument_)throw Error(goog.ui.Component.Error.NOT_IN_DOCUMENT);return this.dom_.getElement(this.makeId(a))};goog.ui.Component.prototype.addChild=function(a,b){this.addChildAt(a,this.getChildCount(),b)};
goog.ui.Component.prototype.addChildAt=function(a,b,c){goog.asserts.assert(!!a,"Provided element must not be null.");if(a.inDocument_&&(c||!this.inDocument_))throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(0>b||b>this.getChildCount())throw Error(goog.ui.Component.Error.CHILD_INDEX_OUT_OF_BOUNDS);this.childIndex_&&this.children_||(this.childIndex_={},this.children_=[]);a.getParent()==this?(goog.object.set(this.childIndex_,a.getId(),a),goog.array.remove(this.children_,a)):goog.object.add(this.childIndex_,
a.getId(),a);a.setParent(this);goog.array.insertAt(this.children_,a,b);a.inDocument_&&this.inDocument_&&a.getParent()==this?(c=this.getContentElement(),b=c.childNodes[b]||null,b!=a.getElement()&&c.insertBefore(a.getElement(),b)):c?(this.element_||this.createDom(),b=this.getChildAt(b+1),a.render_(this.getContentElement(),b?b.element_:null)):this.inDocument_&&!a.inDocument_&&a.element_&&a.element_.parentNode&&a.element_.parentNode.nodeType==goog.dom.NodeType.ELEMENT&&a.enterDocument()};
goog.ui.Component.prototype.getContentElement=function(){return this.element_};goog.ui.Component.prototype.isRightToLeft=function(){null==this.rightToLeft_&&(this.rightToLeft_=goog.style.isRightToLeft(this.inDocument_?this.element_:this.dom_.getDocument().body));return this.rightToLeft_};goog.ui.Component.prototype.setRightToLeft=function(a){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.rightToLeft_=a};
goog.ui.Component.prototype.hasChildren=function(){return!!this.children_&&0!=this.children_.length};goog.ui.Component.prototype.getChildCount=function(){return this.children_?this.children_.length:0};goog.ui.Component.prototype.getChildIds=function(){var a=[];this.forEachChild(function(b){a.push(b.getId())});return a};goog.ui.Component.prototype.getChild=function(a){return this.childIndex_&&a?goog.object.get(this.childIndex_,a)||null:null};
goog.ui.Component.prototype.getChildAt=function(a){return this.children_?this.children_[a]||null:null};goog.ui.Component.prototype.forEachChild=function(a,b){this.children_&&goog.array.forEach(this.children_,a,b)};goog.ui.Component.prototype.indexOfChild=function(a){return this.children_&&a?goog.array.indexOf(this.children_,a):-1};
goog.ui.Component.prototype.removeChild=function(a,b){if(a){var c=goog.isString(a)?a:a.getId();a=this.getChild(c);c&&a&&(goog.object.remove(this.childIndex_,c),goog.array.remove(this.children_,a),b&&(a.exitDocument(),a.element_&&goog.dom.removeNode(a.element_)),a.setParent(null))}if(!a)throw Error(goog.ui.Component.Error.NOT_OUR_CHILD);return a};goog.ui.Component.prototype.removeChildAt=function(a,b){return this.removeChild(this.getChildAt(a),b)};
goog.ui.Component.prototype.removeChildren=function(a){for(var b=[];this.hasChildren();)b.push(this.removeChildAt(0,a));return b};goog.ui.Component.prototype.pointerEventsEnabled=function(){return this.pointerEventsEnabled_};goog.ui.Component.prototype.setPointerEventsEnabled=function(a){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.pointerEventsEnabled_=a};goog.ui.ControlRenderer=function(){};goog.addSingletonGetter(goog.ui.ControlRenderer);goog.tagUnsealableClass(goog.ui.ControlRenderer);goog.ui.ControlRenderer.getCustomRenderer=function(a,b){a=new a;a.getCssClass=function(){return b};return a};goog.ui.ControlRenderer.CSS_CLASS="goog-control";goog.ui.ControlRenderer.IE6_CLASS_COMBINATIONS=[];
goog.ui.ControlRenderer.TOGGLE_ARIA_STATE_MAP_={[goog.a11y.aria.Role.BUTTON]:goog.a11y.aria.State.PRESSED,[goog.a11y.aria.Role.CHECKBOX]:goog.a11y.aria.State.CHECKED,[goog.a11y.aria.Role.MENU_ITEM]:goog.a11y.aria.State.SELECTED,[goog.a11y.aria.Role.MENU_ITEM_CHECKBOX]:goog.a11y.aria.State.CHECKED,[goog.a11y.aria.Role.MENU_ITEM_RADIO]:goog.a11y.aria.State.CHECKED,[goog.a11y.aria.Role.RADIO]:goog.a11y.aria.State.CHECKED,[goog.a11y.aria.Role.TAB]:goog.a11y.aria.State.SELECTED,[goog.a11y.aria.Role.TREEITEM]:goog.a11y.aria.State.SELECTED};
goog.ui.ControlRenderer.prototype.getAriaRole=function(){};goog.ui.ControlRenderer.prototype.createDom=function(a){return a.getDomHelper().createDom("DIV",this.getClassNames(a).join(" "),a.getContent())};goog.ui.ControlRenderer.prototype.getContentElement=function(a){return a};
goog.ui.ControlRenderer.prototype.enableClassName=function(a,b,c){if(a=a.getElement?a.getElement():a){var d=[b];goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7")&&(d=this.getAppliedCombinedClassNames_(goog.dom.classlist.get(a),b),d.push(b));goog.dom.classlist.enableAll(a,d,c)}};goog.ui.ControlRenderer.prototype.enableExtraClassName=function(a,b,c){this.enableClassName(a,b,c)};goog.ui.ControlRenderer.prototype.canDecorate=function(a){return!0};
goog.ui.ControlRenderer.prototype.decorate=function(a,b){b.id&&a.setId(b.id);var c=this.getContentElement(b);c&&c.firstChild?a.setContentInternal(c.firstChild.nextSibling?goog.array.clone(c.childNodes):c.firstChild):a.setContentInternal(null);var d=0,e=this.getCssClass(),f=this.getStructuralCssClass(),g=!1,h=!1,k=!1,l=goog.array.toArray(goog.dom.classlist.get(b));goog.array.forEach(l,function(a){g||a!=e?h||a!=f?d|=this.getStateFromClass(a):h=!0:(g=!0,f==e&&(h=!0));this.getStateFromClass(a)==goog.ui.Component.State.DISABLED&&
(goog.asserts.assertElement(c),goog.dom.isFocusableTabIndex(c)&&goog.dom.setFocusableTabIndex(c,!1))},this);a.setStateInternal(d);g||(l.push(e),f==e&&(h=!0));h||l.push(f);(a=a.getExtraClassNames())&&l.push.apply(l,a);if(goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7")){var m=this.getAppliedCombinedClassNames_(l);0<m.length&&(l.push.apply(l,m),k=!0)}g&&h&&!a&&!k||goog.dom.classlist.set(b,l.join(" "));return b};
goog.ui.ControlRenderer.prototype.initializeDom=function(a){a.isRightToLeft()&&this.setRightToLeft(a.getElement(),!0);a.isEnabled()&&this.setFocusable(a,a.isVisible())};goog.ui.ControlRenderer.prototype.setAriaRole=function(a,b){if(b=b||this.getAriaRole()){goog.asserts.assert(a,"The element passed as a first parameter cannot be null.");var c=goog.a11y.aria.getRole(a);b!=c&&goog.a11y.aria.setRole(a,b)}};
goog.ui.ControlRenderer.prototype.setAriaStates=function(a,b){goog.asserts.assert(a);goog.asserts.assert(b);var c=a.getAriaLabel();goog.isDefAndNotNull(c)&&this.setAriaLabel(b,c);a.isVisible()||goog.a11y.aria.setState(b,goog.a11y.aria.State.HIDDEN,!a.isVisible());a.isEnabled()||this.updateAriaState(b,goog.ui.Component.State.DISABLED,!a.isEnabled());a.isSupportedState(goog.ui.Component.State.SELECTED)&&this.updateAriaState(b,goog.ui.Component.State.SELECTED,a.isSelected());a.isSupportedState(goog.ui.Component.State.CHECKED)&&
this.updateAriaState(b,goog.ui.Component.State.CHECKED,a.isChecked());a.isSupportedState(goog.ui.Component.State.OPENED)&&this.updateAriaState(b,goog.ui.Component.State.OPENED,a.isOpen())};goog.ui.ControlRenderer.prototype.setAriaLabel=function(a,b){goog.a11y.aria.setLabel(a,b)};goog.ui.ControlRenderer.prototype.setAllowTextSelection=function(a,b){goog.style.setUnselectable(a,!b,!goog.userAgent.IE&&!goog.userAgent.OPERA)};
goog.ui.ControlRenderer.prototype.setRightToLeft=function(a,b){this.enableClassName(a,this.getStructuralCssClass()+"-rtl",b)};goog.ui.ControlRenderer.prototype.isFocusable=function(a){var b;return a.isSupportedState(goog.ui.Component.State.FOCUSED)&&(b=a.getKeyEventTarget())?goog.dom.isFocusableTabIndex(b):!1};
goog.ui.ControlRenderer.prototype.setFocusable=function(a,b){var c;if(a.isSupportedState(goog.ui.Component.State.FOCUSED)&&(c=a.getKeyEventTarget())){if(!b&&a.isFocused()){try{c.blur()}catch(d){}a.isFocused()&&a.handleBlur(null)}goog.dom.isFocusableTabIndex(c)!=b&&goog.dom.setFocusableTabIndex(c,b)}};goog.ui.ControlRenderer.prototype.setVisible=function(a,b){goog.style.setElementShown(a,b);a&&goog.a11y.aria.setState(a,goog.a11y.aria.State.HIDDEN,!b)};
goog.ui.ControlRenderer.prototype.setState=function(a,b,c){var d=a.getElement();if(d){var e=this.getClassForState(b);e&&this.enableClassName(a,e,c);this.updateAriaState(d,b,c)}};
goog.ui.ControlRenderer.prototype.updateAriaState=function(a,b,c){goog.ui.ControlRenderer.ariaAttributeMap_||(goog.ui.ControlRenderer.ariaAttributeMap_={[goog.ui.Component.State.DISABLED]:goog.a11y.aria.State.DISABLED,[goog.ui.Component.State.SELECTED]:goog.a11y.aria.State.SELECTED,[goog.ui.Component.State.CHECKED]:goog.a11y.aria.State.CHECKED,[goog.ui.Component.State.OPENED]:goog.a11y.aria.State.EXPANDED});goog.asserts.assert(a,"The element passed as a first parameter cannot be null.");(b=goog.ui.ControlRenderer.getAriaStateForAriaRole_(a,
goog.ui.ControlRenderer.ariaAttributeMap_[b]))&&goog.a11y.aria.setState(a,b,c)};goog.ui.ControlRenderer.getAriaStateForAriaRole_=function(a,b){a=goog.a11y.aria.getRole(a);if(!a)return b;a=goog.ui.ControlRenderer.TOGGLE_ARIA_STATE_MAP_[a]||b;return goog.ui.ControlRenderer.isAriaState_(b)?a:b};goog.ui.ControlRenderer.isAriaState_=function(a){return a==goog.a11y.aria.State.CHECKED||a==goog.a11y.aria.State.SELECTED};
goog.ui.ControlRenderer.prototype.setContent=function(a,b){var c=this.getContentElement(a);c&&(goog.dom.removeChildren(c),b&&(goog.isString(b)?goog.dom.setTextContent(c,b):(a=function(a){if(a){var b=goog.dom.getOwnerDocument(c);c.appendChild(goog.isString(a)?b.createTextNode(a):a)}},goog.isArray(b)?goog.array.forEach(b,a):!goog.isArrayLike(b)||"nodeType"in b?a(b):goog.array.forEach(goog.array.clone(b),a))))};goog.ui.ControlRenderer.prototype.getKeyEventTarget=function(a){return a.getElement()};
goog.ui.ControlRenderer.prototype.getCssClass=function(){return goog.ui.ControlRenderer.CSS_CLASS};goog.ui.ControlRenderer.prototype.getIe6ClassCombinations=function(){return[]};goog.ui.ControlRenderer.prototype.getStructuralCssClass=function(){return this.getCssClass()};
goog.ui.ControlRenderer.prototype.getClassNames=function(a){var b=this.getCssClass(),c=[b],d=this.getStructuralCssClass();d!=b&&c.push(d);b=this.getClassNamesForState(a.getState());c.push.apply(c,b);(a=a.getExtraClassNames())&&c.push.apply(c,a);goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7")&&c.push.apply(c,this.getAppliedCombinedClassNames_(c));return c};
goog.ui.ControlRenderer.prototype.getAppliedCombinedClassNames_=function(a,b){var c=[];b&&(a=goog.array.concat(a,[b]));goog.array.forEach(this.getIe6ClassCombinations(),function(d){!goog.array.every(d,goog.partial(goog.array.contains,a))||b&&!goog.array.contains(d,b)||c.push(d.join("_"))});return c};goog.ui.ControlRenderer.prototype.getClassNamesForState=function(a){for(var b=[];a;){var c=a&-a;b.push(this.getClassForState(c));a&=~c}return b};
goog.ui.ControlRenderer.prototype.getClassForState=function(a){this.classByState_||this.createClassByStateMap_();return this.classByState_[a]};goog.ui.ControlRenderer.prototype.getStateFromClass=function(a){this.stateByClass_||this.createStateByClassMap_();a=parseInt(this.stateByClass_[a],10);return isNaN(a)?0:a};
goog.ui.ControlRenderer.prototype.createClassByStateMap_=function(){var a=this.getStructuralCssClass(),b=!goog.string.contains(goog.string.normalizeWhitespace(a)," ");goog.asserts.assert(b,"ControlRenderer has an invalid css class: '"+a+"'");this.classByState_={[goog.ui.Component.State.DISABLED]:a+"-disabled",[goog.ui.Component.State.HOVER]:a+"-hover",[goog.ui.Component.State.ACTIVE]:a+"-active",[goog.ui.Component.State.SELECTED]:a+"-selected",[goog.ui.Component.State.CHECKED]:a+"-checked",[goog.ui.Component.State.FOCUSED]:a+
"-focused",[goog.ui.Component.State.OPENED]:a+"-open"}};goog.ui.ControlRenderer.prototype.createStateByClassMap_=function(){this.classByState_||this.createClassByStateMap_();this.stateByClass_=goog.object.transpose(this.classByState_)};goog.ui.ButtonRenderer=function(){goog.ui.ControlRenderer.call(this)};goog.inherits(goog.ui.ButtonRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.ButtonRenderer);goog.ui.ButtonRenderer.CSS_CLASS="goog-button";goog.ui.ButtonRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.BUTTON};
goog.ui.ButtonRenderer.prototype.updateAriaState=function(a,b,c){switch(b){case goog.ui.Component.State.SELECTED:case goog.ui.Component.State.CHECKED:goog.asserts.assert(a,"The button DOM element cannot be null.");goog.a11y.aria.setState(a,goog.a11y.aria.State.PRESSED,c);break;default:case goog.ui.Component.State.OPENED:case goog.ui.Component.State.DISABLED:goog.ui.ButtonRenderer.superClass_.updateAriaState.call(this,a,b,c)}};
goog.ui.ButtonRenderer.prototype.createDom=function(a){var b=goog.ui.ButtonRenderer.superClass_.createDom.call(this,a);this.setTooltip(b,a.getTooltip());var c=a.getValue();c&&this.setValue(b,c);a.isSupportedState(goog.ui.Component.State.CHECKED)&&this.updateAriaState(b,goog.ui.Component.State.CHECKED,a.isChecked());return b};
goog.ui.ButtonRenderer.prototype.decorate=function(a,b){b=goog.ui.ButtonRenderer.superClass_.decorate.call(this,a,b);a.setValueInternal(this.getValue(b));a.setTooltipInternal(this.getTooltip(b));a.isSupportedState(goog.ui.Component.State.CHECKED)&&this.updateAriaState(b,goog.ui.Component.State.CHECKED,a.isChecked());return b};goog.ui.ButtonRenderer.prototype.getValue=goog.nullFunction;goog.ui.ButtonRenderer.prototype.setValue=goog.nullFunction;goog.ui.ButtonRenderer.prototype.getTooltip=function(a){return a.title};
goog.ui.ButtonRenderer.prototype.setTooltip=function(a,b){a&&(b?a.title=b:a.removeAttribute("title"))};goog.ui.ButtonRenderer.prototype.setCollapsed=function(a,b){var c=a.isRightToLeft(),d=this.getStructuralCssClass()+"-collapse-left",e=this.getStructuralCssClass()+"-collapse-right";a.enableClassName(c?e:d,!!(b&goog.ui.ButtonSide.START));a.enableClassName(c?d:e,!!(b&goog.ui.ButtonSide.END))};goog.ui.ButtonRenderer.prototype.getCssClass=function(){return goog.ui.ButtonRenderer.CSS_CLASS};goog.ui.ComponentUtil={};goog.ui.ComponentUtil.getMouseEventType=function(a){return a.pointerEventsEnabled()?goog.events.PointerAsMouseEventType:goog.events.MouseAsMouseEventType};goog.ui.registry={};goog.ui.registry.getDefaultRenderer=function(a){for(var b;a;){b=goog.getUid(a);if(b=goog.ui.registry.defaultRenderers_[b])break;a=a.superClass_?a.superClass_.constructor:null}return b?goog.isFunction(b.getInstance)?b.getInstance():new b:null};goog.ui.registry.setDefaultRenderer=function(a,b){if(!goog.isFunction(a))throw Error("Invalid component class "+a);if(!goog.isFunction(b))throw Error("Invalid renderer class "+b);a=goog.getUid(a);goog.ui.registry.defaultRenderers_[a]=b};
goog.ui.registry.getDecoratorByClassName=function(a){return a in goog.ui.registry.decoratorFunctions_?goog.ui.registry.decoratorFunctions_[a]():null};goog.ui.registry.setDecoratorByClassName=function(a,b){if(!a)throw Error("Invalid class name "+a);if(!goog.isFunction(b))throw Error("Invalid decorator function "+b);goog.ui.registry.decoratorFunctions_[a]=b};
goog.ui.registry.getDecorator=function(a){goog.asserts.assert(a);for(var b=goog.dom.classlist.get(a),c=0,d=b.length;c<d;c++)if(a=goog.ui.registry.getDecoratorByClassName(b[c]))return a;return null};goog.ui.registry.reset=function(){goog.ui.registry.defaultRenderers_={};goog.ui.registry.decoratorFunctions_={}};goog.ui.registry.defaultRenderers_={};goog.ui.registry.decoratorFunctions_={};goog.ui.Control=function(a,b,c){goog.ui.Component.call(this,c);this.renderer_=b||goog.ui.registry.getDefaultRenderer(this.constructor);this.setContentInternal(goog.isDef(a)?a:null);this.ariaLabel_=null};goog.inherits(goog.ui.Control,goog.ui.Component);goog.tagUnsealableClass(goog.ui.Control);goog.ui.Control.registerDecorator=goog.ui.registry.setDecoratorByClassName;goog.ui.Control.getDecorator=goog.ui.registry.getDecorator;goog.ui.Control.prototype.content_=null;goog.ui.Control.prototype.state_=0;
goog.ui.Control.prototype.supportedStates_=goog.ui.Component.State.DISABLED|goog.ui.Component.State.HOVER|goog.ui.Component.State.ACTIVE|goog.ui.Component.State.FOCUSED;goog.ui.Control.prototype.autoStates_=goog.ui.Component.State.ALL;goog.ui.Control.prototype.statesWithTransitionEvents_=0;goog.ui.Control.prototype.visible_=!0;goog.ui.Control.prototype.extraClassNames_=null;goog.ui.Control.prototype.handleMouseEvents_=!0;goog.ui.Control.prototype.allowTextSelection_=!1;
goog.ui.Control.prototype.preferredAriaRole_=null;goog.ui.Control.prototype.isHandleMouseEvents=function(){return this.handleMouseEvents_};goog.ui.Control.prototype.setHandleMouseEvents=function(a){this.isInDocument()&&a!=this.handleMouseEvents_&&this.enableMouseEventHandling_(a);this.handleMouseEvents_=a};goog.ui.Control.prototype.getKeyEventTarget=function(){return this.renderer_.getKeyEventTarget(this)};
goog.ui.Control.prototype.getKeyHandler=function(){return this.keyHandler_||(this.keyHandler_=new goog.events.KeyHandler)};goog.ui.Control.prototype.getRenderer=function(){return this.renderer_};goog.ui.Control.prototype.setRenderer=function(a){if(this.isInDocument())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.getElement()&&this.setElementInternal(null);this.renderer_=a};goog.ui.Control.prototype.getExtraClassNames=function(){return this.extraClassNames_};
goog.ui.Control.prototype.addClassName=function(a){a&&(this.extraClassNames_?goog.array.contains(this.extraClassNames_,a)||this.extraClassNames_.push(a):this.extraClassNames_=[a],this.renderer_.enableExtraClassName(this,a,!0))};goog.ui.Control.prototype.removeClassName=function(a){a&&this.extraClassNames_&&goog.array.remove(this.extraClassNames_,a)&&(0==this.extraClassNames_.length&&(this.extraClassNames_=null),this.renderer_.enableExtraClassName(this,a,!1))};
goog.ui.Control.prototype.enableClassName=function(a,b){b?this.addClassName(a):this.removeClassName(a)};goog.ui.Control.prototype.createDom=function(){var a=this.renderer_.createDom(this);this.setElementInternal(a);this.renderer_.setAriaRole(a,this.getPreferredAriaRole());this.isAllowTextSelection()||this.renderer_.setAllowTextSelection(a,!1);this.isVisible()||this.renderer_.setVisible(a,!1)};goog.ui.Control.prototype.getPreferredAriaRole=function(){return this.preferredAriaRole_};
goog.ui.Control.prototype.setPreferredAriaRole=function(a){this.preferredAriaRole_=a};goog.ui.Control.prototype.getAriaLabel=function(){return this.ariaLabel_};goog.ui.Control.prototype.setAriaLabel=function(a){this.ariaLabel_=a;var b=this.getElement();b&&this.renderer_.setAriaLabel(b,a)};goog.ui.Control.prototype.getContentElement=function(){return this.renderer_.getContentElement(this.getElement())};goog.ui.Control.prototype.canDecorate=function(a){return this.renderer_.canDecorate(a)};
goog.ui.Control.prototype.decorateInternal=function(a){a=this.renderer_.decorate(this,a);this.setElementInternal(a);this.renderer_.setAriaRole(a,this.getPreferredAriaRole());this.isAllowTextSelection()||this.renderer_.setAllowTextSelection(a,!1);this.visible_="none"!=a.style.display};
goog.ui.Control.prototype.enterDocument=function(){goog.ui.Control.superClass_.enterDocument.call(this);this.renderer_.setAriaStates(this,this.getElementStrict());this.renderer_.initializeDom(this);if(this.supportedStates_&~goog.ui.Component.State.DISABLED&&(this.isHandleMouseEvents()&&this.enableMouseEventHandling_(!0),this.isSupportedState(goog.ui.Component.State.FOCUSED))){var a=this.getKeyEventTarget();if(a){var b=this.getKeyHandler();b.attach(a);this.getHandler().listen(b,goog.events.KeyHandler.EventType.KEY,
this.handleKeyEvent).listen(a,goog.events.EventType.FOCUS,this.handleFocus).listen(a,goog.events.EventType.BLUR,this.handleBlur)}}};
goog.ui.Control.prototype.enableMouseEventHandling_=function(a){var b=goog.ui.ComponentUtil.getMouseEventType(this),c=this.getHandler(),d=this.getElement();a?(c.listen(d,b.MOUSEDOWN,this.handleMouseDown).listen(d,[b.MOUSEUP,b.MOUSECANCEL],this.handleMouseUp).listen(d,goog.events.EventType.MOUSEOVER,this.handleMouseOver).listen(d,goog.events.EventType.MOUSEOUT,this.handleMouseOut),this.pointerEventsEnabled()&&c.listen(d,goog.events.EventType.GOTPOINTERCAPTURE,this.preventPointerCapture_),this.handleContextMenu!=
goog.nullFunction&&c.listen(d,goog.events.EventType.CONTEXTMENU,this.handleContextMenu),goog.userAgent.IE&&(goog.userAgent.isVersionOrHigher(9)||c.listen(d,goog.events.EventType.DBLCLICK,this.handleDblClick),this.ieMouseEventSequenceSimulator_||(this.ieMouseEventSequenceSimulator_=new goog.ui.Control.IeMouseEventSequenceSimulator_(this),this.registerDisposable(this.ieMouseEventSequenceSimulator_)))):(c.unlisten(d,b.MOUSEDOWN,this.handleMouseDown).unlisten(d,[b.MOUSEUP,b.MOUSECANCEL],this.handleMouseUp).unlisten(d,
goog.events.EventType.MOUSEOVER,this.handleMouseOver).unlisten(d,goog.events.EventType.MOUSEOUT,this.handleMouseOut),this.pointerEventsEnabled()&&c.unlisten(d,goog.events.EventType.GOTPOINTERCAPTURE,this.preventPointerCapture_),this.handleContextMenu!=goog.nullFunction&&c.unlisten(d,goog.events.EventType.CONTEXTMENU,this.handleContextMenu),goog.userAgent.IE&&(goog.userAgent.isVersionOrHigher(9)||c.unlisten(d,goog.events.EventType.DBLCLICK,this.handleDblClick),goog.dispose(this.ieMouseEventSequenceSimulator_),
this.ieMouseEventSequenceSimulator_=null))};goog.ui.Control.prototype.exitDocument=function(){goog.ui.Control.superClass_.exitDocument.call(this);this.keyHandler_&&this.keyHandler_.detach();this.isVisible()&&this.isEnabled()&&this.renderer_.setFocusable(this,!1)};
goog.ui.Control.prototype.disposeInternal=function(){goog.ui.Control.superClass_.disposeInternal.call(this);this.keyHandler_&&(this.keyHandler_.dispose(),delete this.keyHandler_);delete this.renderer_;this.ieMouseEventSequenceSimulator_=this.extraClassNames_=this.content_=null};goog.ui.Control.prototype.getContent=function(){return this.content_};goog.ui.Control.prototype.setContent=function(a){this.renderer_.setContent(this.getElement(),a);this.setContentInternal(a)};
goog.ui.Control.prototype.setContentInternal=function(a){this.content_=a};goog.ui.Control.prototype.getCaption=function(){var a=this.getContent();if(!a)return"";a=goog.isString(a)?a:goog.isArray(a)?goog.array.map(a,goog.dom.getRawTextContent).join(""):goog.dom.getTextContent(a);return goog.string.collapseBreakingSpaces(a)};goog.ui.Control.prototype.setCaption=function(a){this.setContent(a)};
goog.ui.Control.prototype.setRightToLeft=function(a){goog.ui.Control.superClass_.setRightToLeft.call(this,a);var b=this.getElement();b&&this.renderer_.setRightToLeft(b,a)};goog.ui.Control.prototype.isAllowTextSelection=function(){return this.allowTextSelection_};goog.ui.Control.prototype.setAllowTextSelection=function(a){this.allowTextSelection_=a;var b=this.getElement();b&&this.renderer_.setAllowTextSelection(b,a)};goog.ui.Control.prototype.isVisible=function(){return this.visible_};
goog.ui.Control.prototype.setVisible=function(a,b){return b||this.visible_!=a&&this.dispatchEvent(a?goog.ui.Component.EventType.SHOW:goog.ui.Component.EventType.HIDE)?((b=this.getElement())&&this.renderer_.setVisible(b,a),this.isEnabled()&&this.renderer_.setFocusable(this,a),this.visible_=a,!0):!1};goog.ui.Control.prototype.isEnabled=function(){return!this.hasState(goog.ui.Component.State.DISABLED)};
goog.ui.Control.prototype.isParentDisabled_=function(){var a=this.getParent();return!!a&&"function"==typeof a.isEnabled&&!a.isEnabled()};goog.ui.Control.prototype.setEnabled=function(a){!this.isParentDisabled_()&&this.isTransitionAllowed(goog.ui.Component.State.DISABLED,!a)&&(a||(this.setActive(!1),this.setHighlighted(!1)),this.isVisible()&&this.renderer_.setFocusable(this,a),this.setState(goog.ui.Component.State.DISABLED,!a,!0))};goog.ui.Control.prototype.isHighlighted=function(){return this.hasState(goog.ui.Component.State.HOVER)};
goog.ui.Control.prototype.setHighlighted=function(a){this.isTransitionAllowed(goog.ui.Component.State.HOVER,a)&&this.setState(goog.ui.Component.State.HOVER,a)};goog.ui.Control.prototype.isActive=function(){return this.hasState(goog.ui.Component.State.ACTIVE)};goog.ui.Control.prototype.setActive=function(a){this.isTransitionAllowed(goog.ui.Component.State.ACTIVE,a)&&this.setState(goog.ui.Component.State.ACTIVE,a)};goog.ui.Control.prototype.isSelected=function(){return this.hasState(goog.ui.Component.State.SELECTED)};
goog.ui.Control.prototype.setSelected=function(a){this.isTransitionAllowed(goog.ui.Component.State.SELECTED,a)&&this.setState(goog.ui.Component.State.SELECTED,a)};goog.ui.Control.prototype.isChecked=function(){return this.hasState(goog.ui.Component.State.CHECKED)};goog.ui.Control.prototype.setChecked=function(a){this.isTransitionAllowed(goog.ui.Component.State.CHECKED,a)&&this.setState(goog.ui.Component.State.CHECKED,a)};goog.ui.Control.prototype.isFocused=function(){return this.hasState(goog.ui.Component.State.FOCUSED)};
goog.ui.Control.prototype.setFocused=function(a){this.isTransitionAllowed(goog.ui.Component.State.FOCUSED,a)&&this.setState(goog.ui.Component.State.FOCUSED,a)};goog.ui.Control.prototype.isOpen=function(){return this.hasState(goog.ui.Component.State.OPENED)};goog.ui.Control.prototype.setOpen=function(a){this.isTransitionAllowed(goog.ui.Component.State.OPENED,a)&&this.setState(goog.ui.Component.State.OPENED,a)};goog.ui.Control.prototype.getState=function(){return this.state_};
goog.ui.Control.prototype.hasState=function(a){return!!(this.state_&a)};goog.ui.Control.prototype.setState=function(a,b,c){c||a!=goog.ui.Component.State.DISABLED?this.isSupportedState(a)&&b!=this.hasState(a)&&(this.renderer_.setState(this,a,b),this.state_=b?this.state_|a:this.state_&~a):this.setEnabled(!b)};goog.ui.Control.prototype.setStateInternal=function(a){this.state_=a};goog.ui.Control.prototype.isSupportedState=function(a){return!!(this.supportedStates_&a)};
goog.ui.Control.prototype.setSupportedState=function(a,b){if(this.isInDocument()&&this.hasState(a)&&!b)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);!b&&this.hasState(a)&&this.setState(a,!1);this.supportedStates_=b?this.supportedStates_|a:this.supportedStates_&~a};goog.ui.Control.prototype.isAutoState=function(a){return!!(this.autoStates_&a)&&this.isSupportedState(a)};goog.ui.Control.prototype.setAutoStates=function(a,b){this.autoStates_=b?this.autoStates_|a:this.autoStates_&~a};
goog.ui.Control.prototype.isDispatchTransitionEvents=function(a){return!!(this.statesWithTransitionEvents_&a)&&this.isSupportedState(a)};goog.ui.Control.prototype.setDispatchTransitionEvents=function(a,b){this.statesWithTransitionEvents_=b?this.statesWithTransitionEvents_|a:this.statesWithTransitionEvents_&~a};
goog.ui.Control.prototype.isTransitionAllowed=function(a,b){return this.isSupportedState(a)&&this.hasState(a)!=b&&(!(this.statesWithTransitionEvents_&a)||this.dispatchEvent(goog.ui.Component.getStateTransitionEvent(a,b)))&&!this.isDisposed()};goog.ui.Control.prototype.handleMouseOver=function(a){!goog.ui.Control.isMouseEventWithinElement_(a,this.getElement())&&this.dispatchEvent(goog.ui.Component.EventType.ENTER)&&this.isEnabled()&&this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0)};
goog.ui.Control.prototype.handleMouseOut=function(a){!goog.ui.Control.isMouseEventWithinElement_(a,this.getElement())&&this.dispatchEvent(goog.ui.Component.EventType.LEAVE)&&(this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1),this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!1))};goog.ui.Control.prototype.preventPointerCapture_=function(a){var b=a.target;b.releasePointerCapture&&b.releasePointerCapture(a.pointerId)};
goog.ui.Control.prototype.handleContextMenu=goog.nullFunction;goog.ui.Control.isMouseEventWithinElement_=function(a,b){return!!a.relatedTarget&&goog.dom.contains(b,a.relatedTarget)};
goog.ui.Control.prototype.handleMouseDown=function(a){this.isEnabled()&&(this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0),a.isMouseActionButton()&&(this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!0),this.renderer_&&this.renderer_.isFocusable(this)&&this.getKeyEventTarget().focus()));!this.isAllowTextSelection()&&a.isMouseActionButton()&&a.preventDefault()};
goog.ui.Control.prototype.handleMouseUp=function(a){this.isEnabled()&&(this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0),this.isActive()&&this.performActionInternal(a)&&this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1))};goog.ui.Control.prototype.handleDblClick=function(a){this.isEnabled()&&this.performActionInternal(a)};
goog.ui.Control.prototype.performActionInternal=function(a){this.isAutoState(goog.ui.Component.State.CHECKED)&&this.setChecked(!this.isChecked());this.isAutoState(goog.ui.Component.State.SELECTED)&&this.setSelected(!0);this.isAutoState(goog.ui.Component.State.OPENED)&&this.setOpen(!this.isOpen());var b=new goog.events.Event(goog.ui.Component.EventType.ACTION,this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.platformModifierKey=a.platformModifierKey);return this.dispatchEvent(b)};
goog.ui.Control.prototype.handleFocus=function(a){this.isAutoState(goog.ui.Component.State.FOCUSED)&&this.setFocused(!0)};goog.ui.Control.prototype.handleBlur=function(a){this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1);this.isAutoState(goog.ui.Component.State.FOCUSED)&&this.setFocused(!1)};goog.ui.Control.prototype.handleKeyEvent=function(a){return this.isVisible()&&this.isEnabled()&&this.handleKeyEventInternal(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
goog.ui.Control.prototype.handleKeyEventInternal=function(a){return a.keyCode==goog.events.KeyCodes.ENTER&&this.performActionInternal(a)};goog.ui.registry.setDefaultRenderer(goog.ui.Control,goog.ui.ControlRenderer);goog.ui.registry.setDecoratorByClassName(goog.ui.ControlRenderer.CSS_CLASS,function(){return new goog.ui.Control(null)});
goog.ui.Control.IeMouseEventSequenceSimulator_=function(a){goog.Disposable.call(this);this.control_=a;this.clickExpected_=!1;this.handler_=new goog.events.EventHandler(this);this.registerDisposable(this.handler_);a=this.control_.getElementStrict();this.handler_.listen(a,goog.events.EventType.MOUSEDOWN,this.handleMouseDown_).listen(a,goog.events.EventType.MOUSEUP,this.handleMouseUp_).listen(a,goog.events.EventType.CLICK,this.handleClick_)};
goog.inherits(goog.ui.Control.IeMouseEventSequenceSimulator_,goog.Disposable);goog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_=!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9);goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleMouseDown_=function(){this.clickExpected_=!1};goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleMouseUp_=function(){this.clickExpected_=!0};
goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_=function(a,b){if(!goog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_)return a.button=goog.events.BrowserEvent.MouseButton.LEFT,a.type=b,a;var c=document.createEvent("MouseEvents");c.initMouseEvent(b,a.bubbles,a.cancelable,a.view||null,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,goog.events.BrowserEvent.MouseButton.LEFT,a.relatedTarget||null);return c};
goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleClick_=function(a){if(this.clickExpected_)this.clickExpected_=!1;else{var b=a.getBrowserEvent(),c=b.button,d=b.type,e=goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_(b,goog.events.EventType.MOUSEDOWN);this.control_.handleMouseDown(new goog.events.BrowserEvent(e,a.currentTarget));e=goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_(b,goog.events.EventType.MOUSEUP);this.control_.handleMouseUp(new goog.events.BrowserEvent(e,
a.currentTarget));goog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_||(b.button=c,b.type=d)}};goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.disposeInternal=function(){this.control_=null;goog.ui.Control.IeMouseEventSequenceSimulator_.superClass_.disposeInternal.call(this)};goog.ui.NativeButtonRenderer=function(){goog.ui.ButtonRenderer.call(this)};goog.inherits(goog.ui.NativeButtonRenderer,goog.ui.ButtonRenderer);goog.addSingletonGetter(goog.ui.NativeButtonRenderer);goog.ui.NativeButtonRenderer.prototype.getAriaRole=function(){};
goog.ui.NativeButtonRenderer.prototype.createDom=function(a){this.setUpNativeButton_(a);return a.getDomHelper().createDom("BUTTON",{"class":this.getClassNames(a).join(" "),disabled:!a.isEnabled(),title:a.getTooltip()||"",value:a.getValue()||""},a.getCaption()||"")};goog.ui.NativeButtonRenderer.prototype.canDecorate=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&(a.type==goog.dom.InputType.BUTTON||a.type==goog.dom.InputType.SUBMIT||a.type==goog.dom.InputType.RESET)};
goog.ui.NativeButtonRenderer.prototype.decorate=function(a,b){this.setUpNativeButton_(a);if(b.disabled){var c=goog.asserts.assertString(this.getClassForState(goog.ui.Component.State.DISABLED));goog.dom.classlist.add(b,c)}return goog.ui.NativeButtonRenderer.superClass_.decorate.call(this,a,b)};goog.ui.NativeButtonRenderer.prototype.initializeDom=function(a){a.getHandler().listen(a.getElement(),goog.events.EventType.CLICK,a.performActionInternal)};
goog.ui.NativeButtonRenderer.prototype.setAllowTextSelection=goog.nullFunction;goog.ui.NativeButtonRenderer.prototype.setRightToLeft=goog.nullFunction;goog.ui.NativeButtonRenderer.prototype.isFocusable=function(a){return a.isEnabled()};goog.ui.NativeButtonRenderer.prototype.setFocusable=goog.nullFunction;
goog.ui.NativeButtonRenderer.prototype.setState=function(a,b,c){goog.ui.NativeButtonRenderer.superClass_.setState.call(this,a,b,c);(a=a.getElement())&&b==goog.ui.Component.State.DISABLED&&(a.disabled=c)};goog.ui.NativeButtonRenderer.prototype.getValue=function(a){return a.value};goog.ui.NativeButtonRenderer.prototype.setValue=function(a,b){a&&(a.value=b)};goog.ui.NativeButtonRenderer.prototype.updateAriaState=goog.nullFunction;
goog.ui.NativeButtonRenderer.prototype.setUpNativeButton_=function(a){a.setHandleMouseEvents(!1);a.setAutoStates(goog.ui.Component.State.ALL,!1);a.setSupportedState(goog.ui.Component.State.FOCUSED,!1)};goog.ui.Button=function(a,b,c){goog.ui.Control.call(this,a,b||goog.ui.NativeButtonRenderer.getInstance(),c)};goog.inherits(goog.ui.Button,goog.ui.Control);goog.tagUnsealableClass(goog.ui.Button);goog.ui.Button.Side=goog.ui.ButtonSide;goog.ui.Button.prototype.getValue=function(){return this.value_};goog.ui.Button.prototype.setValue=function(a){this.value_=a;this.getRenderer().setValue(this.getElement(),a)};goog.ui.Button.prototype.setValueInternal=function(a){this.value_=a};
goog.ui.Button.prototype.getTooltip=function(){return this.tooltip_};goog.ui.Button.prototype.setTooltip=function(a){this.tooltip_=a;this.getRenderer().setTooltip(this.getElement(),a)};goog.ui.Button.prototype.setTooltipInternal=function(a){this.tooltip_=a};goog.ui.Button.prototype.setCollapsed=function(a){this.getRenderer().setCollapsed(this,a)};goog.ui.Button.prototype.disposeInternal=function(){goog.ui.Button.superClass_.disposeInternal.call(this);delete this.value_;delete this.tooltip_};
goog.ui.Button.prototype.enterDocument=function(){goog.ui.Button.superClass_.enterDocument.call(this);if(this.isSupportedState(goog.ui.Component.State.FOCUSED)){var a=this.getKeyEventTarget();a&&this.getHandler().listen(a,goog.events.EventType.KEYUP,this.handleKeyEventInternal)}};
goog.ui.Button.prototype.handleKeyEventInternal=function(a){return a.keyCode==goog.events.KeyCodes.ENTER&&a.type==goog.events.KeyHandler.EventType.KEY||a.keyCode==goog.events.KeyCodes.SPACE&&a.type==goog.events.EventType.KEYUP?this.performActionInternal(a):a.keyCode==goog.events.KeyCodes.SPACE};goog.ui.registry.setDecoratorByClassName(goog.ui.ButtonRenderer.CSS_CLASS,function(){return new goog.ui.Button(null)});goog.ui.INLINE_BLOCK_CLASSNAME="goog-inline-block";goog.ui.CustomButtonRenderer=function(){goog.ui.ButtonRenderer.call(this)};goog.inherits(goog.ui.CustomButtonRenderer,goog.ui.ButtonRenderer);goog.addSingletonGetter(goog.ui.CustomButtonRenderer);goog.ui.CustomButtonRenderer.CSS_CLASS="goog-custom-button";
goog.ui.CustomButtonRenderer.prototype.createDom=function(a){var b=this.getClassNames(a);b=a.getDomHelper().createDom("DIV",goog.ui.INLINE_BLOCK_CLASSNAME+" "+b.join(" "),this.createButton(a.getContent(),a.getDomHelper()));this.setTooltip(b,a.getTooltip());return b};goog.ui.CustomButtonRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.BUTTON};goog.ui.CustomButtonRenderer.prototype.getContentElement=function(a){return a&&a.firstChild&&a.firstChild.firstChild};
goog.ui.CustomButtonRenderer.prototype.createButton=function(a,b){return b.createDom("DIV",goog.ui.INLINE_BLOCK_CLASSNAME+" "+(this.getCssClass()+"-outer-box"),b.createDom("DIV",goog.ui.INLINE_BLOCK_CLASSNAME+" "+(this.getCssClass()+"-inner-box"),a))};goog.ui.CustomButtonRenderer.prototype.canDecorate=function(a){return"DIV"==a.tagName};
goog.ui.CustomButtonRenderer.prototype.hasBoxStructure=function(a,b){b=a.getDomHelper().getFirstElementChild(b);var c=this.getCssClass()+"-outer-box";return b&&goog.dom.classlist.contains(b,c)&&(a=a.getDomHelper().getFirstElementChild(b),b=this.getCssClass()+"-inner-box",a&&goog.dom.classlist.contains(a,b))?!0:!1};
goog.ui.CustomButtonRenderer.prototype.decorate=function(a,b){goog.asserts.assert(b);goog.ui.CustomButtonRenderer.trimTextNodes_(b,!0);goog.ui.CustomButtonRenderer.trimTextNodes_(b,!1);this.hasBoxStructure(a,b)||b.appendChild(this.createButton(b.childNodes,a.getDomHelper()));goog.dom.classlist.addAll(b,[goog.ui.INLINE_BLOCK_CLASSNAME,this.getCssClass()]);return goog.ui.CustomButtonRenderer.superClass_.decorate.call(this,a,b)};goog.ui.CustomButtonRenderer.prototype.getCssClass=function(){return goog.ui.CustomButtonRenderer.CSS_CLASS};
goog.ui.CustomButtonRenderer.trimTextNodes_=function(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(c.nodeType==goog.dom.NodeType.TEXT){var e=c.nodeValue;if(""==goog.string.trim(e))a.removeChild(c);else{c.nodeValue=b?goog.string.trimLeft(e):goog.string.trimRight(e);break}}else break;c=d}};goog.ui.ToggleButton=function(a,b,c){goog.ui.Button.call(this,a,b||goog.ui.CustomButtonRenderer.getInstance(),c);this.setSupportedState(goog.ui.Component.State.CHECKED,!0)};goog.inherits(goog.ui.ToggleButton,goog.ui.Button);goog.ui.registry.setDecoratorByClassName("goog-toggle-button",function(){return new goog.ui.ToggleButton(null)});goog.events.KeyNames={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps-lock",27:"esc",32:"space",33:"pg-up",34:"pg-down",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:"semicolon",61:"equals",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",
89:"y",90:"z",93:"context",96:"num-0",97:"num-1",98:"num-2",99:"num-3",100:"num-4",101:"num-5",102:"num-6",103:"num-7",104:"num-8",105:"num-9",106:"num-multiply",107:"num-plus",109:"num-minus",110:"num-period",111:"num-division",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",186:"semicolon",187:"equals",189:"dash",188:",",190:".",191:"/",192:"`",219:"open-square-bracket",220:"\\",221:"close-square-bracket",222:"single-quote",224:"win"};goog.events.Keys={ALT:"Meta",ALTGRAPH:"AltGraph",CTRL:"Control",DOWN:"ArrowDown",END:"End",ENTER:"Enter",ESCAPE:"Escape",HOME:"Home",LEFT:"ArrowLeft",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",RIGHT:"ArrowRight",SHIFT:"Shift",SPACE:" ",TAB:"Tab",UP:"ArrowUp"};goog.ui.KeyboardEventData=function(a,b,c,d,e,f,g,h,k){this.keyCode_=a;this.key_=b;this.shiftKey_=c;this.altKey_=d;this.ctrlKey_=e;this.metaKey_=f;this.target_=g;this.preventDefaultFn_=h;this.stopPropagationFn_=k};goog.ui.KeyboardEventData.prototype.getKeyCode=function(){return this.keyCode_};goog.ui.KeyboardEventData.prototype.getKey=function(){return this.key_};goog.ui.KeyboardEventData.prototype.getShiftKey=function(){return this.shiftKey_};goog.ui.KeyboardEventData.prototype.getAltKey=function(){return this.altKey_};
goog.ui.KeyboardEventData.prototype.getCtrlKey=function(){return this.ctrlKey_};goog.ui.KeyboardEventData.prototype.getMetaKey=function(){return this.metaKey_};goog.ui.KeyboardEventData.prototype.getTarget=function(){return this.target_};goog.ui.KeyboardEventData.prototype.getPreventDefaultFn=function(){return this.preventDefaultFn_};goog.ui.KeyboardEventData.prototype.getStopPropagationFn=function(){return this.stopPropagationFn_};
goog.ui.KeyboardEventData.fromBrowserEvent=function(a){return(new goog.ui.KeyboardEventData.Builder).keyCode(a.keyCode||0).key(a.key||"").shiftKey(!!a.shiftKey).altKey(!!a.altKey).ctrlKey(!!a.ctrlKey).metaKey(!!a.metaKey).target(a.target).preventDefaultFn(()=>a.preventDefault()).stopPropagationFn(()=>a.stopPropagation()).build()};
goog.ui.KeyboardEventData.Builder=function(){this.keyCode_=null;this.key_="";this.stopPropagationFn_=this.preventDefaultFn_=this.target_=this.metaKey_=this.ctrlKey_=this.altKey_=this.shiftKey_=null};goog.ui.KeyboardEventData.Builder.prototype.keyCode=function(a){this.keyCode_=a;return this};goog.ui.KeyboardEventData.Builder.prototype.key=function(a){this.key_=a;return this};goog.ui.KeyboardEventData.Builder.prototype.shiftKey=function(a){this.shiftKey_=a;return this};
goog.ui.KeyboardEventData.Builder.prototype.altKey=function(a){this.altKey_=a;return this};goog.ui.KeyboardEventData.Builder.prototype.ctrlKey=function(a){this.ctrlKey_=a;return this};goog.ui.KeyboardEventData.Builder.prototype.metaKey=function(a){this.metaKey_=a;return this};goog.ui.KeyboardEventData.Builder.prototype.target=function(a){this.target_=a;return this};goog.ui.KeyboardEventData.Builder.prototype.preventDefaultFn=function(a){this.preventDefaultFn_=a;return this};
goog.ui.KeyboardEventData.Builder.prototype.stopPropagationFn=function(a){this.stopPropagationFn_=a;return this};
goog.ui.KeyboardEventData.Builder.prototype.build=function(){return new goog.ui.KeyboardEventData(goog.asserts.assertNumber(this.keyCode_),this.key_,goog.asserts.assertBoolean(this.shiftKey_),goog.asserts.assertBoolean(this.altKey_),goog.asserts.assertBoolean(this.ctrlKey_),goog.asserts.assertBoolean(this.metaKey_),goog.asserts.assert(this.target_),goog.asserts.assertFunction(this.preventDefaultFn_),goog.asserts.assertFunction(this.stopPropagationFn_))};goog.ui.SyntheticKeyboardEvent=function(a,b,c,d,e,f,g,h,k){goog.events.Event.call(this,a);this.data_=(new goog.ui.KeyboardEventData.Builder).keyCode(b).shiftKey(c).altKey(d).ctrlKey(e).metaKey(f).target(g).preventDefaultFn(h).stopPropagationFn(k).build()};goog.inherits(goog.ui.SyntheticKeyboardEvent,goog.events.Event);goog.ui.SyntheticKeyboardEvent.prototype.getData=function(){return this.data_};
goog.ui.SyntheticKeyboardEvent.createKeyDown=function(a,b,c,d,e,f,g,h){return new goog.ui.SyntheticKeyboardEvent(goog.ui.SyntheticKeyboardEvent.Type.KEYDOWN,a,b,c,d,e,f,g,h)};goog.ui.SyntheticKeyboardEvent.createKeyUp=function(a,b,c,d,e,f,g,h){return new goog.ui.SyntheticKeyboardEvent(goog.ui.SyntheticKeyboardEvent.Type.KEYUP,a,b,c,d,e,f,g,h)};
goog.ui.SyntheticKeyboardEvent.createKeyPress=function(a,b,c,d,e,f,g,h){return new goog.ui.SyntheticKeyboardEvent(goog.ui.SyntheticKeyboardEvent.Type.KEYPRESS,a,b,c,d,e,f,g,h)};goog.ui.SyntheticKeyboardEvent.Type={KEYDOWN:"synthetic-keydown",KEYUP:"synthetic-keyup",KEYPRESS:"synthetic-keypress"};goog.ui.KeyboardShortcutHandler=function(a){goog.events.EventTarget.call(this);this.currentTree_=this.shortcuts_={};this.lastStrokeTime_=0;this.globalKeys_=goog.object.createSet(goog.ui.KeyboardShortcutHandler.DEFAULT_GLOBAL_KEYS_);this.textInputs_=goog.object.createSet(goog.ui.KeyboardShortcutHandler.DEFAULT_TEXT_INPUTS_);this.alwaysPreventDefault_=!0;this.allShortcutsAreGlobal_=this.alwaysStopPropagation_=!1;this.modifierShortcutsAreGlobal_=!0;this.allowSpaceKeyOnButtons_=!1;this.activeShortcutKeyForGecko_=
null;this.initializeKeyListener(a)};goog.inherits(goog.ui.KeyboardShortcutHandler,goog.events.EventTarget);goog.tagUnsealableClass(goog.ui.KeyboardShortcutHandler);goog.ui.KeyboardShortcutHandler.SequenceNode_=function(a){this.shortcut=a||null;this.next=a?null:{}};goog.ui.KeyboardShortcutHandler.createTerminalNode_=function(a){return new goog.ui.KeyboardShortcutHandler.SequenceNode_(a)};goog.ui.KeyboardShortcutHandler.createInternalNode_=function(){return new goog.ui.KeyboardShortcutHandler.SequenceNode_};
goog.ui.KeyboardShortcutHandler.MAX_KEY_SEQUENCE_DELAY=1500;goog.ui.KeyboardShortcutHandler.Modifiers={NONE:0,SHIFT:1,CTRL:2,ALT:4,META:8};
goog.ui.KeyboardShortcutHandler.DEFAULT_GLOBAL_KEYS_=[goog.events.KeyCodes.ESC,goog.events.KeyCodes.F1,goog.events.KeyCodes.F2,goog.events.KeyCodes.F3,goog.events.KeyCodes.F4,goog.events.KeyCodes.F5,goog.events.KeyCodes.F6,goog.events.KeyCodes.F7,goog.events.KeyCodes.F8,goog.events.KeyCodes.F9,goog.events.KeyCodes.F10,goog.events.KeyCodes.F11,goog.events.KeyCodes.F12,goog.events.KeyCodes.PAUSE];goog.ui.KeyboardShortcutHandler.DEFAULT_TEXT_INPUTS_="color date datetime datetime-local email month number password search tel text time url week".split(" ");
goog.ui.KeyboardShortcutHandler.EventType={SHORTCUT_TRIGGERED:"shortcut",SHORTCUT_PREFIX:"shortcut_"};goog.ui.KeyboardShortcutHandler.getKeyCode=function(a){if(!goog.ui.KeyboardShortcutHandler.nameToKeyCodeCache_){var b={},c;for(c in goog.events.KeyNames)b[goog.events.KeyNames[c]]=goog.events.KeyCodes.normalizeKeyCode(parseInt(c,10));goog.ui.KeyboardShortcutHandler.nameToKeyCodeCache_=b}return goog.ui.KeyboardShortcutHandler.nameToKeyCodeCache_[a]};
goog.ui.KeyboardShortcutHandler.prototype.setAlwaysPreventDefault=function(a){this.alwaysPreventDefault_=a};goog.ui.KeyboardShortcutHandler.prototype.getAlwaysPreventDefault=function(){return this.alwaysPreventDefault_};goog.ui.KeyboardShortcutHandler.prototype.setAlwaysStopPropagation=function(a){this.alwaysStopPropagation_=a};goog.ui.KeyboardShortcutHandler.prototype.getAlwaysStopPropagation=function(){return this.alwaysStopPropagation_};
goog.ui.KeyboardShortcutHandler.prototype.setAllShortcutsAreGlobal=function(a){this.allShortcutsAreGlobal_=a};goog.ui.KeyboardShortcutHandler.prototype.getAllShortcutsAreGlobal=function(){return this.allShortcutsAreGlobal_};goog.ui.KeyboardShortcutHandler.prototype.setModifierShortcutsAreGlobal=function(a){this.modifierShortcutsAreGlobal_=a};goog.ui.KeyboardShortcutHandler.prototype.getModifierShortcutsAreGlobal=function(){return this.modifierShortcutsAreGlobal_};
goog.ui.KeyboardShortcutHandler.prototype.setAllowSpaceKeyOnButtons=function(a){this.allowSpaceKeyOnButtons_=a};goog.ui.KeyboardShortcutHandler.prototype.registerShortcut=function(a,b){goog.ui.KeyboardShortcutHandler.setShortcut_(this.shortcuts_,this.interpretStrokes_(1,arguments),a)};goog.ui.KeyboardShortcutHandler.prototype.unregisterShortcut=function(a){goog.ui.KeyboardShortcutHandler.unsetShortcut_(this.shortcuts_,this.interpretStrokes_(0,arguments))};
goog.ui.KeyboardShortcutHandler.prototype.isShortcutRegistered=function(a){return this.checkShortcut_(this.shortcuts_,this.interpretStrokes_(0,arguments))};
goog.ui.KeyboardShortcutHandler.prototype.interpretStrokes_=function(a,b){if(goog.isString(b[a]))a=goog.array.map(goog.ui.KeyboardShortcutHandler.parseStringShortcut(b[a]),function(a){goog.asserts.assertNumber(a.keyCode,"A non-modifier key is needed in each stroke.");return goog.ui.KeyboardShortcutHandler.makeStroke_(a.key||"",a.keyCode,a.modifiers)});else{var c=b,d=a;goog.isArray(b[a])&&(c=b[a],d=0);for(a=[];d<c.length;d+=2)a.push(goog.ui.KeyboardShortcutHandler.makeStroke_("",c[d],c[d+1]))}return a};
goog.ui.KeyboardShortcutHandler.prototype.unregisterAll=function(){this.shortcuts_={}};goog.ui.KeyboardShortcutHandler.prototype.setGlobalKeys=function(a){this.globalKeys_=goog.object.createSet(a)};goog.ui.KeyboardShortcutHandler.prototype.getGlobalKeys=function(){return goog.object.getKeys(this.globalKeys_)};goog.ui.KeyboardShortcutHandler.prototype.disposeInternal=function(){goog.ui.KeyboardShortcutHandler.superClass_.disposeInternal.call(this);this.unregisterAll();this.clearKeyListener()};
goog.ui.KeyboardShortcutHandler.prototype.getEventType=function(a){return goog.ui.KeyboardShortcutHandler.EventType.SHORTCUT_PREFIX+a};
goog.ui.KeyboardShortcutHandler.parseStringShortcut=function(a){a=a.replace(/[ +]*\+[ +]*/g,"+").replace(/[ ]+/g," ").toLowerCase();a=a.split(" ");for(var b=[],c,d=0;c=a[d];d++){c=c.split("+");for(var e=null,f=null,g=goog.ui.KeyboardShortcutHandler.Modifiers.NONE,h,k=0;h=c[k];k++){switch(h){case "shift":g|=goog.ui.KeyboardShortcutHandler.Modifiers.SHIFT;continue;case "ctrl":g|=goog.ui.KeyboardShortcutHandler.Modifiers.CTRL;continue;case "alt":g|=goog.ui.KeyboardShortcutHandler.Modifiers.ALT;continue;
case "meta":g|=goog.ui.KeyboardShortcutHandler.Modifiers.META;continue}goog.isNull(f)||goog.asserts.fail("At most one non-modifier key can be in a stroke.");f=goog.ui.KeyboardShortcutHandler.getKeyCode(h);goog.asserts.assertNumber(f,"Key name not found in goog.events.KeyNames: "+h);e=h;break}b.push({key:e,keyCode:f,modifiers:g})}return b};
goog.ui.KeyboardShortcutHandler.prototype.initializeKeyListener=function(a){this.keyTarget_=a;goog.events.listen(this.keyTarget_,goog.events.EventType.KEYDOWN,this.handleBrowserKeyDown_,void 0,this);goog.events.listen(this.keyTarget_,goog.ui.SyntheticKeyboardEvent.Type.KEYDOWN,this.handleSyntheticKeyDown_,void 0,this);goog.userAgent.WINDOWS&&(goog.events.listen(this.keyTarget_,goog.events.EventType.KEYPRESS,this.handleWindowsBrowserKeyPress_,void 0,this),goog.events.listen(this.keyTarget_,goog.ui.SyntheticKeyboardEvent.Type.KEYPRESS,
this.handleWindowsSyntheticKeyPress_,void 0,this));goog.events.listen(this.keyTarget_,goog.events.EventType.KEYUP,this.handleBrowserKeyUp_,void 0,this);goog.events.listen(this.keyTarget_,goog.ui.SyntheticKeyboardEvent.Type.KEYUP,this.handleSyntheticKeyUp_,void 0,this)};goog.ui.KeyboardShortcutHandler.prototype.handleBrowserKeyUp_=function(a){this.handleKeyUp_(goog.ui.KeyboardEventData.fromBrowserEvent(a))};goog.ui.KeyboardShortcutHandler.prototype.handleSyntheticKeyUp_=function(a){this.handleKeyUp_(a.getData())};
goog.ui.KeyboardShortcutHandler.prototype.handleKeyUp_=function(a){goog.userAgent.GECKO&&this.handleGeckoKeyUp_(a);goog.userAgent.WINDOWS&&this.handleWindowsKeyUp_(a)};goog.ui.KeyboardShortcutHandler.prototype.handleGeckoKeyUp_=function(a){goog.events.KeyCodes.SPACE==this.activeShortcutKeyForGecko_&&goog.events.KeyCodes.SPACE==a.getKeyCode()&&a.getPreventDefaultFn()();this.activeShortcutKeyForGecko_=null};
goog.ui.KeyboardShortcutHandler.prototype.isPossiblePrintableKey_=function(a){return goog.userAgent.WINDOWS&&a.getCtrlKey()&&a.getAltKey()};goog.ui.KeyboardShortcutHandler.prototype.handleWindowsBrowserKeyPress_=function(a){this.handleWindowsKeyPress_(goog.ui.KeyboardEventData.fromBrowserEvent(a))};goog.ui.KeyboardShortcutHandler.prototype.handleWindowsSyntheticKeyPress_=function(a){this.handleWindowsKeyPress_(a.getData())};
goog.ui.KeyboardShortcutHandler.prototype.handleWindowsKeyPress_=function(a){32<a.getKeyCode()&&this.isPossiblePrintableKey_(a)&&(this.isPrintableKey_=!0)};goog.ui.KeyboardShortcutHandler.prototype.handleWindowsKeyUp_=function(a){!this.isPrintableKey_&&this.isPossiblePrintableKey_(a)&&this.handleKeyDown_(a,!0)};
goog.ui.KeyboardShortcutHandler.prototype.clearKeyListener=function(){goog.events.unlisten(this.keyTarget_,goog.events.EventType.KEYDOWN,this.handleBrowserKeyDown_,!1,this);goog.events.unlisten(this.keyTarget_,goog.ui.SyntheticKeyboardEvent.Type.KEYDOWN,this.handleSyntheticKeyDown_,!1,this);goog.userAgent.WINDOWS&&(goog.events.unlisten(this.keyTarget_,goog.events.EventType.KEYPRESS,this.handleWindowsBrowserKeyPress_,!1,this),goog.events.unlisten(this.keyTarget_,goog.ui.SyntheticKeyboardEvent.Type.KEYPRESS,
this.handleWindowsSyntheticKeyPress_,!1,this));goog.events.unlisten(this.keyTarget_,goog.events.EventType.KEYUP,this.handleBrowserKeyUp_,!1,this);goog.events.unlisten(this.keyTarget_,goog.ui.SyntheticKeyboardEvent.Type.KEYUP,this.handleSyntheticKeyUp_,!1,this);this.keyTarget_=null};
goog.ui.KeyboardShortcutHandler.setShortcut_=function(a,b,c){var d=b.shift();goog.array.forEach(d,function(c){if((c=a[c])&&(0==b.length||c.shortcut))throw Error("Keyboard shortcut conflicts with existing shortcut");});b.length?goog.array.forEach(d,function(d){d=goog.object.setIfUndefined(a,d.toString(),goog.ui.KeyboardShortcutHandler.createInternalNode_());var e=b.slice(0);goog.ui.KeyboardShortcutHandler.setShortcut_(goog.asserts.assert(d.next,"An internal node must have a next map"),e,c)}):goog.array.forEach(d,
function(b){a[b]=goog.ui.KeyboardShortcutHandler.createTerminalNode_(c)})};goog.ui.KeyboardShortcutHandler.unsetShortcut_=function(a,b){var c=b.shift();goog.array.forEach(c,function(c){var d=a[c];if(d)if(0==b.length)d.shortcut&&delete a[c];else if(d.next){var f=b.slice(0);goog.ui.KeyboardShortcutHandler.unsetShortcut_(d.next,f);goog.object.isEmpty(d.next)&&delete a[c]}})};goog.ui.KeyboardShortcutHandler.prototype.getNode_=function(a,b){for(var c=0;c<b.length;c++){var d=a[b[c]];if(d)return d}};
goog.ui.KeyboardShortcutHandler.prototype.checkShortcut_=function(a,b){for(;0<b.length&&a;){var c=b.shift();if(c=this.getNode_(a,c)){if(0==b.length&&c.shortcut)return!0;var d=b.slice(0);if(this.checkShortcut_(c.next,d))return!0}}return!1};goog.ui.KeyboardShortcutHandler.makeStroke_=function(a,b,c){c=c||0;b=["c_"+b+"_"+c];""!=a&&b.push("n_"+a+"_"+c);return b};goog.ui.KeyboardShortcutHandler.prototype.handleBrowserKeyDown_=function(a){this.handleKeyDown_(goog.ui.KeyboardEventData.fromBrowserEvent(a))};
goog.ui.KeyboardShortcutHandler.prototype.handleSyntheticKeyDown_=function(a){this.handleKeyDown_(a.getData())};
goog.ui.KeyboardShortcutHandler.prototype.handleKeyDown_=function(a,b){if(this.isValidShortcut_(a))if(!b&&this.isPossiblePrintableKey_(a))this.isPrintableKey_=!1;else{b=goog.events.KeyCodes.normalizeKeyCode(a.getKeyCode());var c=a.getKey(),d=(a.getShiftKey()?goog.ui.KeyboardShortcutHandler.Modifiers.SHIFT:0)|(a.getCtrlKey()?goog.ui.KeyboardShortcutHandler.Modifiers.CTRL:0)|(a.getAltKey()?goog.ui.KeyboardShortcutHandler.Modifiers.ALT:0)|(a.getMetaKey()?goog.ui.KeyboardShortcutHandler.Modifiers.META:
0);c=goog.ui.KeyboardShortcutHandler.makeStroke_(c,b,d);(d=this.getNode_(this.currentTree_,c))&&!this.hasSequenceTimedOut_()||this.setCurrentTree_(this.shortcuts_);(d=this.getNode_(this.currentTree_,c))&&d.next&&this.setCurrentTree_(d.next);d&&(d.next?a.getPreventDefaultFn()():(this.setCurrentTree_(this.shortcuts_),this.alwaysPreventDefault_&&a.getPreventDefaultFn()(),this.alwaysStopPropagation_&&a.getStopPropagationFn()(),c=goog.asserts.assertString(d.shortcut,"A terminal node must have a string shortcut identifier."),
d=new goog.ui.KeyboardShortcutEvent(goog.ui.KeyboardShortcutHandler.EventType.SHORTCUT_TRIGGERED,c,a.getTarget()),d=this.dispatchEvent(d),c=new goog.ui.KeyboardShortcutEvent(goog.ui.KeyboardShortcutHandler.EventType.SHORTCUT_PREFIX+c,c,a.getTarget()),(d&=this.dispatchEvent(c))||a.getPreventDefaultFn()(),goog.userAgent.GECKO&&(this.activeShortcutKeyForGecko_=b)))}};
goog.ui.KeyboardShortcutHandler.prototype.isValidShortcut_=function(a){var b=a.getKeyCode();if(""!=a.getKey()){var c=a.getKey();if(c==goog.events.Keys.CTRL||c==goog.events.Keys.SHIFT||c==goog.events.Keys.ALT||c==goog.events.Keys.ALTGRAPH)return!1}else if(b==goog.events.KeyCodes.SHIFT||b==goog.events.KeyCodes.CTRL||b==goog.events.KeyCodes.ALT)return!1;c=a.getTarget();var d="TEXTAREA"==c.tagName||"INPUT"==c.tagName||"BUTTON"==c.tagName||"SELECT"==c.tagName,e=!d&&(c.isContentEditable||c.ownerDocument&&
"on"==c.ownerDocument.designMode);return!d&&!e||this.globalKeys_[b]||this.allShortcutsAreGlobal_?!0:e?!1:this.modifierShortcutsAreGlobal_&&(a.getAltKey()||a.getCtrlKey()||a.getMetaKey())?!0:"INPUT"==c.tagName&&this.textInputs_[c.type]?b==goog.events.KeyCodes.ENTER:"INPUT"==c.tagName||"BUTTON"==c.tagName?this.allowSpaceKeyOnButtons_?!0:b!=goog.events.KeyCodes.SPACE:!1};goog.ui.KeyboardShortcutHandler.prototype.hasSequenceTimedOut_=function(){return goog.now()-this.lastStrokeTime_>=goog.ui.KeyboardShortcutHandler.MAX_KEY_SEQUENCE_DELAY};
goog.ui.KeyboardShortcutHandler.prototype.setCurrentTree_=function(a){this.currentTree_=a;this.lastStrokeTime_=goog.now()};goog.ui.KeyboardShortcutEvent=function(a,b,c){goog.events.Event.call(this,a,c);this.identifier=b};goog.inherits(goog.ui.KeyboardShortcutEvent,goog.events.Event);goog.structs.Queue=function(){this.front_=[];this.back_=[]};goog.structs.Queue.prototype.maybeFlip_=function(){goog.array.isEmpty(this.front_)&&(this.front_=this.back_,this.front_.reverse(),this.back_=[])};goog.structs.Queue.prototype.enqueue=function(a){this.back_.push(a)};goog.structs.Queue.prototype.dequeue=function(){this.maybeFlip_();return this.front_.pop()};goog.structs.Queue.prototype.peek=function(){this.maybeFlip_();return goog.array.peek(this.front_)};
goog.structs.Queue.prototype.getCount=function(){return this.front_.length+this.back_.length};goog.structs.Queue.prototype.isEmpty=function(){return goog.array.isEmpty(this.front_)&&goog.array.isEmpty(this.back_)};goog.structs.Queue.prototype.clear=function(){this.front_=[];this.back_=[]};goog.structs.Queue.prototype.contains=function(a){return goog.array.contains(this.front_,a)||goog.array.contains(this.back_,a)};
goog.structs.Queue.prototype.remove=function(a){return goog.array.removeLast(this.front_,a)||goog.array.remove(this.back_,a)};goog.structs.Queue.prototype.getValues=function(){for(var a=[],b=this.front_.length-1;0<=b;--b)a.push(this.front_[b]);var c=this.back_.length;for(b=0;b<c;++b)a.push(this.back_[b]);return a};goog.structs.Collection=function(){};goog.structs.Set=function(a){this.map_=new goog.structs.Map;a&&this.addAll(a)};goog.structs.Set.getUid_=goog.getUid;goog.structs.Set.getKey_=function(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+goog.structs.Set.getUid_(a):b.substr(0,1)+a};goog.structs.Set.prototype.getCount=function(){return this.map_.getCount()};goog.structs.Set.prototype.add=function(a){this.map_.set(goog.structs.Set.getKey_(a),a)};
goog.structs.Set.prototype.addAll=function(a){a=goog.structs.getValues(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};goog.structs.Set.prototype.removeAll=function(a){a=goog.structs.getValues(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};goog.structs.Set.prototype.remove=function(a){return this.map_.remove(goog.structs.Set.getKey_(a))};goog.structs.Set.prototype.clear=function(){this.map_.clear()};goog.structs.Set.prototype.isEmpty=function(){return this.map_.isEmpty()};
goog.structs.Set.prototype.contains=function(a){return this.map_.containsKey(goog.structs.Set.getKey_(a))};goog.structs.Set.prototype.containsAll=function(a){return goog.structs.every(a,this.contains,this)};goog.structs.Set.prototype.intersection=function(a){var b=new goog.structs.Set;a=goog.structs.getValues(a);for(var c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};goog.structs.Set.prototype.difference=function(a){var b=this.clone();b.removeAll(a);return b};
goog.structs.Set.prototype.getValues=function(){return this.map_.getValues()};goog.structs.Set.prototype.clone=function(){return new goog.structs.Set(this)};goog.structs.Set.prototype.equals=function(a){return this.getCount()==goog.structs.getCount(a)&&this.isSubsetOf(a)};
goog.structs.Set.prototype.isSubsetOf=function(a){var b=goog.structs.getCount(a);if(this.getCount()>b)return!1;!(a instanceof goog.structs.Set)&&5<b&&(a=new goog.structs.Set(a));return goog.structs.every(this,function(b){return goog.structs.contains(a,b)})};goog.structs.Set.prototype.__iterator__=function(a){return this.map_.__iterator__(!1)};goog.ui.ContainerRenderer=function(a){this.ariaRole_=a};goog.addSingletonGetter(goog.ui.ContainerRenderer);goog.ui.ContainerRenderer.getCustomRenderer=function(a,b){a=new a;a.getCssClass=function(){return b};return a};goog.ui.ContainerRenderer.CSS_CLASS="goog-container";goog.ui.ContainerRenderer.prototype.getAriaRole=function(){return this.ariaRole_};goog.ui.ContainerRenderer.prototype.enableTabIndex=function(a,b){a&&(a.tabIndex=b?0:-1)};
goog.ui.ContainerRenderer.prototype.createDom=function(a){return a.getDomHelper().createDom("DIV",this.getClassNames(a).join(" "))};goog.ui.ContainerRenderer.prototype.getContentElement=function(a){return a};goog.ui.ContainerRenderer.prototype.canDecorate=function(a){return"DIV"==a.tagName};
goog.ui.ContainerRenderer.prototype.decorate=function(a,b){b.id&&a.setId(b.id);var c=this.getCssClass(),d=!1,e=goog.dom.classlist.get(b);e&&goog.array.forEach(e,function(b){b==c?d=!0:b&&this.setStateFromClassName(a,b,c)},this);d||goog.dom.classlist.add(b,c);this.decorateChildren(a,this.getContentElement(b));return b};
goog.ui.ContainerRenderer.prototype.setStateFromClassName=function(a,b,c){b==c+"-disabled"?a.setEnabled(!1):b==c+"-horizontal"?a.setOrientation(goog.ui.Container.Orientation.HORIZONTAL):b==c+"-vertical"&&a.setOrientation(goog.ui.Container.Orientation.VERTICAL)};
goog.ui.ContainerRenderer.prototype.decorateChildren=function(a,b,c){if(b){c=c||b.firstChild;for(var d;c&&c.parentNode==b;){d=c.nextSibling;if(c.nodeType==goog.dom.NodeType.ELEMENT){var e=this.getDecoratorForChild(c);e&&(e.setElementInternal(c),a.isEnabled()||e.setEnabled(!1),a.addChild(e),e.decorate(c))}else c.nodeValue&&""!=goog.string.trim(c.nodeValue)||b.removeChild(c);c=d}}};goog.ui.ContainerRenderer.prototype.getDecoratorForChild=function(a){return goog.ui.registry.getDecorator(a)};
goog.ui.ContainerRenderer.prototype.initializeDom=function(a){a=a.getElement();goog.asserts.assert(a,"The container DOM element cannot be null.");goog.style.setUnselectable(a,!0,goog.userAgent.GECKO);goog.userAgent.IE&&(a.hideFocus=!0);var b=this.getAriaRole();b&&goog.a11y.aria.setRole(a,b)};goog.ui.ContainerRenderer.prototype.getKeyEventTarget=function(a){return a.getElement()};goog.ui.ContainerRenderer.prototype.getCssClass=function(){return goog.ui.ContainerRenderer.CSS_CLASS};
goog.ui.ContainerRenderer.prototype.getClassNames=function(a){var b=this.getCssClass(),c=a.getOrientation()==goog.ui.Container.Orientation.HORIZONTAL;c=[b,c?b+"-horizontal":b+"-vertical"];a.isEnabled()||c.push(b+"-disabled");return c};goog.ui.ContainerRenderer.prototype.getDefaultOrientation=function(){return goog.ui.Container.Orientation.VERTICAL};goog.ui.Container=function(a,b,c){goog.ui.Component.call(this,c);this.renderer_=b||goog.ui.ContainerRenderer.getInstance();this.orientation_=a||this.renderer_.getDefaultOrientation()};goog.inherits(goog.ui.Container,goog.ui.Component);goog.tagUnsealableClass(goog.ui.Container);goog.ui.Container.EventType={AFTER_SHOW:"aftershow",AFTER_HIDE:"afterhide"};goog.ui.Container.Orientation={HORIZONTAL:"horizontal",VERTICAL:"vertical"};goog.ui.Container.prototype.keyEventTarget_=null;
goog.ui.Container.prototype.keyHandler_=null;goog.ui.Container.prototype.renderer_=null;goog.ui.Container.prototype.orientation_=null;goog.ui.Container.prototype.visible_=!0;goog.ui.Container.prototype.enabled_=!0;goog.ui.Container.prototype.focusable_=!0;goog.ui.Container.prototype.highlightedIndex_=-1;goog.ui.Container.prototype.openItem_=null;goog.ui.Container.prototype.mouseButtonPressed_=!1;goog.ui.Container.prototype.allowFocusableChildren_=!1;
goog.ui.Container.prototype.openFollowsHighlight_=!0;goog.ui.Container.prototype.childElementIdMap_=null;goog.ui.Container.prototype.getKeyEventTarget=function(){return this.keyEventTarget_||this.renderer_.getKeyEventTarget(this)};
goog.ui.Container.prototype.setKeyEventTarget=function(a){if(this.focusable_){var b=this.getKeyEventTarget(),c=this.isInDocument();this.keyEventTarget_=a;var d=this.getKeyEventTarget();c&&(this.keyEventTarget_=b,this.enableFocusHandling_(!1),this.keyEventTarget_=a,this.getKeyHandler().attach(d),this.enableFocusHandling_(!0))}else throw Error("Can't set key event target for container that doesn't support keyboard focus!");};
goog.ui.Container.prototype.getKeyHandler=function(){return this.keyHandler_||(this.keyHandler_=new goog.events.KeyHandler(this.getKeyEventTarget()))};goog.ui.Container.prototype.getRenderer=function(){return this.renderer_};goog.ui.Container.prototype.setRenderer=function(a){if(this.getElement())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.renderer_=a};goog.ui.Container.prototype.createDom=function(){this.setElementInternal(this.renderer_.createDom(this))};
goog.ui.Container.prototype.getContentElement=function(){return this.renderer_.getContentElement(this.getElement())};goog.ui.Container.prototype.canDecorate=function(a){return this.renderer_.canDecorate(a)};goog.ui.Container.prototype.decorateInternal=function(a){this.setElementInternal(this.renderer_.decorate(this,a));"none"==a.style.display&&(this.visible_=!1)};
goog.ui.Container.prototype.enterDocument=function(){goog.ui.Container.superClass_.enterDocument.call(this);this.forEachChild(function(a){a.isInDocument()&&this.registerChildId_(a)},this);var a=this.getElement();this.renderer_.initializeDom(this);this.setVisible(this.visible_,!0);var b=goog.ui.ComponentUtil.getMouseEventType(this);this.getHandler().listen(this,goog.ui.Component.EventType.ENTER,this.handleEnterItem).listen(this,goog.ui.Component.EventType.HIGHLIGHT,this.handleHighlightItem).listen(this,
goog.ui.Component.EventType.UNHIGHLIGHT,this.handleUnHighlightItem).listen(this,goog.ui.Component.EventType.OPEN,this.handleOpenItem).listen(this,goog.ui.Component.EventType.CLOSE,this.handleCloseItem).listen(a,b.MOUSEDOWN,this.handleMouseDown).listen(goog.dom.getOwnerDocument(a),[b.MOUSEUP,b.MOUSECANCEL],this.handleDocumentMouseUp).listen(a,[b.MOUSEDOWN,b.MOUSEUP,b.MOUSECANCEL,goog.events.EventType.MOUSEOVER,goog.events.EventType.MOUSEOUT,goog.events.EventType.CONTEXTMENU],this.handleChildMouseEvents);
this.pointerEventsEnabled()&&this.getHandler().listen(a,goog.events.EventType.GOTPOINTERCAPTURE,this.preventPointerCapture_);this.isFocusable()&&this.enableFocusHandling_(!0)};goog.ui.Container.prototype.preventPointerCapture_=function(a){var b=a.target;b.releasePointerCapture&&b.releasePointerCapture(a.pointerId)};
goog.ui.Container.prototype.enableFocusHandling_=function(a){var b=this.getHandler(),c=this.getKeyEventTarget();a?b.listen(c,goog.events.EventType.FOCUS,this.handleFocus).listen(c,goog.events.EventType.BLUR,this.handleBlur).listen(this.getKeyHandler(),goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent):b.unlisten(c,goog.events.EventType.FOCUS,this.handleFocus).unlisten(c,goog.events.EventType.BLUR,this.handleBlur).unlisten(this.getKeyHandler(),goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent)};
goog.ui.Container.prototype.exitDocument=function(){this.setHighlightedIndex(-1);this.openItem_&&this.openItem_.setOpen(!1);this.mouseButtonPressed_=!1;goog.ui.Container.superClass_.exitDocument.call(this)};goog.ui.Container.prototype.disposeInternal=function(){goog.ui.Container.superClass_.disposeInternal.call(this);this.keyHandler_&&(this.keyHandler_.dispose(),this.keyHandler_=null);this.renderer_=this.openItem_=this.childElementIdMap_=this.keyEventTarget_=null};
goog.ui.Container.prototype.handleEnterItem=function(a){return!0};
goog.ui.Container.prototype.handleHighlightItem=function(a){var b=this.indexOfChild(a.target);if(-1<b&&b!=this.highlightedIndex_){var c=this.getHighlighted();c&&c.setHighlighted(!1);this.highlightedIndex_=b;c=this.getHighlighted();this.isMouseButtonPressed()&&c.setActive(!0);this.openFollowsHighlight_&&this.openItem_&&c!=this.openItem_&&(c.isSupportedState(goog.ui.Component.State.OPENED)?c.setOpen(!0):this.openItem_.setOpen(!1))}b=this.getElement();goog.asserts.assert(b,"The DOM element for the container cannot be null.");
null!=a.target.getElement()&&goog.a11y.aria.setState(b,goog.a11y.aria.State.ACTIVEDESCENDANT,a.target.getElement().id)};goog.ui.Container.prototype.handleUnHighlightItem=function(a){a.target==this.getHighlighted()&&(this.highlightedIndex_=-1);a=this.getElement();goog.asserts.assert(a,"The DOM element for the container cannot be null.");goog.a11y.aria.removeState(a,goog.a11y.aria.State.ACTIVEDESCENDANT)};
goog.ui.Container.prototype.handleOpenItem=function(a){(a=a.target)&&a!=this.openItem_&&a.getParent()==this&&(this.openItem_&&this.openItem_.setOpen(!1),this.openItem_=a)};goog.ui.Container.prototype.handleCloseItem=function(a){a.target==this.openItem_&&(this.openItem_=null);var b=this.getElement(),c=a.target.getElement();b&&a.target.isHighlighted()&&c&&goog.a11y.aria.setActiveDescendant(b,c)};
goog.ui.Container.prototype.handleMouseDown=function(a){this.enabled_&&this.setMouseButtonPressed(!0);var b=this.getKeyEventTarget();b&&goog.dom.isFocusableTabIndex(b)?b.focus():a.preventDefault()};goog.ui.Container.prototype.handleDocumentMouseUp=function(a){this.setMouseButtonPressed(!1)};
goog.ui.Container.prototype.handleChildMouseEvents=function(a){var b=goog.ui.ComponentUtil.getMouseEventType(this),c=this.getOwnerControl(a.target);if(c)switch(a.type){case b.MOUSEDOWN:c.handleMouseDown(a);break;case b.MOUSEUP:case b.MOUSECANCEL:c.handleMouseUp(a);break;case goog.events.EventType.MOUSEOVER:c.handleMouseOver(a);break;case goog.events.EventType.MOUSEOUT:c.handleMouseOut(a);break;case goog.events.EventType.CONTEXTMENU:c.handleContextMenu(a)}};
goog.ui.Container.prototype.getOwnerControl=function(a){if(this.childElementIdMap_)for(var b=this.getElement();a&&a!==b;){var c=a.id;if(c in this.childElementIdMap_)return this.childElementIdMap_[c];a=a.parentNode}return null};goog.ui.Container.prototype.handleFocus=function(a){};goog.ui.Container.prototype.handleBlur=function(a){this.setHighlightedIndex(-1);this.setMouseButtonPressed(!1);this.openItem_&&this.openItem_.setOpen(!1)};
goog.ui.Container.prototype.handleKeyEvent=function(a){return this.isEnabled()&&this.isVisible()&&(0!=this.getChildCount()||this.keyEventTarget_)&&this.handleKeyEventInternal(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
goog.ui.Container.prototype.handleKeyEventInternal=function(a){var b=this.getHighlighted();if(b&&"function"==typeof b.handleKeyEvent&&b.handleKeyEvent(a)||this.openItem_&&this.openItem_!=b&&"function"==typeof this.openItem_.handleKeyEvent&&this.openItem_.handleKeyEvent(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.keyCode){case goog.events.KeyCodes.ESC:if(this.isFocusable())this.getKeyEventTarget().blur();else return!1;break;case goog.events.KeyCodes.HOME:this.highlightFirst();
break;case goog.events.KeyCodes.END:this.highlightLast();break;case goog.events.KeyCodes.UP:if(this.orientation_==goog.ui.Container.Orientation.VERTICAL)this.highlightPrevious();else return!1;break;case goog.events.KeyCodes.LEFT:if(this.orientation_==goog.ui.Container.Orientation.HORIZONTAL)this.isRightToLeft()?this.highlightNext():this.highlightPrevious();else return!1;break;case goog.events.KeyCodes.DOWN:if(this.orientation_==goog.ui.Container.Orientation.VERTICAL)this.highlightNext();else return!1;
break;case goog.events.KeyCodes.RIGHT:if(this.orientation_==goog.ui.Container.Orientation.HORIZONTAL)this.isRightToLeft()?this.highlightPrevious():this.highlightNext();else return!1;break;default:return!1}return!0};goog.ui.Container.prototype.registerChildId_=function(a){var b=a.getElement();b=b.id||(b.id=a.getId());this.childElementIdMap_||(this.childElementIdMap_={});this.childElementIdMap_[b]=a};
goog.ui.Container.prototype.addChild=function(a,b){goog.asserts.assertInstanceof(a,goog.ui.Control,"The child of a container must be a control");goog.ui.Container.superClass_.addChild.call(this,a,b)};
goog.ui.Container.prototype.addChildAt=function(a,b,c){goog.asserts.assertInstanceof(a,goog.ui.Control);a.setDispatchTransitionEvents(goog.ui.Component.State.HOVER,!0);a.setDispatchTransitionEvents(goog.ui.Component.State.OPENED,!0);!this.isFocusable()&&this.isFocusableChildrenAllowed()||a.setSupportedState(goog.ui.Component.State.FOCUSED,!1);a.setHandleMouseEvents(!1);var d=a.getParent()==this?this.indexOfChild(a):-1;goog.ui.Container.superClass_.addChildAt.call(this,a,b,c);a.isInDocument()&&this.isInDocument()&&
this.registerChildId_(a);this.updateHighlightedIndex_(d,b)};goog.ui.Container.prototype.updateHighlightedIndex_=function(a,b){-1==a&&(a=this.getChildCount());a==this.highlightedIndex_?this.highlightedIndex_=Math.min(this.getChildCount()-1,b):a>this.highlightedIndex_&&b<=this.highlightedIndex_?this.highlightedIndex_++:a<this.highlightedIndex_&&b>this.highlightedIndex_&&this.highlightedIndex_--};
goog.ui.Container.prototype.removeChild=function(a,b){a=goog.isString(a)?this.getChild(a):a;goog.asserts.assertInstanceof(a,goog.ui.Control);if(a){var c=this.indexOfChild(a);-1!=c&&(c==this.highlightedIndex_?(a.setHighlighted(!1),this.highlightedIndex_=-1):c<this.highlightedIndex_&&this.highlightedIndex_--);(c=a.getElement())&&c.id&&this.childElementIdMap_&&goog.object.remove(this.childElementIdMap_,c.id)}a=goog.ui.Container.superClass_.removeChild.call(this,a,b);a.setHandleMouseEvents(!0);return a};
goog.ui.Container.prototype.getOrientation=function(){return this.orientation_};goog.ui.Container.prototype.setOrientation=function(a){if(this.getElement())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.orientation_=a};goog.ui.Container.prototype.isVisible=function(){return this.visible_};
goog.ui.Container.prototype.setVisible=function(a,b){if(b||this.visible_!=a&&this.dispatchEvent(a?goog.ui.Component.EventType.SHOW:goog.ui.Component.EventType.HIDE)){this.visible_=a;var c=this.getElement();c&&(goog.style.setElementShown(c,a),this.isFocusable()&&this.renderer_.enableTabIndex(this.getKeyEventTarget(),this.enabled_&&this.visible_),b||this.dispatchEvent(this.visible_?goog.ui.Container.EventType.AFTER_SHOW:goog.ui.Container.EventType.AFTER_HIDE));return!0}return!1};
goog.ui.Container.prototype.isEnabled=function(){return this.enabled_};
goog.ui.Container.prototype.setEnabled=function(a){this.enabled_!=a&&this.dispatchEvent(a?goog.ui.Component.EventType.ENABLE:goog.ui.Component.EventType.DISABLE)&&(a?(this.enabled_=!0,this.forEachChild(function(a){a.wasDisabled?delete a.wasDisabled:a.setEnabled(!0)})):(this.forEachChild(function(a){a.isEnabled()?a.setEnabled(!1):a.wasDisabled=!0}),this.enabled_=!1,this.setMouseButtonPressed(!1)),this.isFocusable()&&this.renderer_.enableTabIndex(this.getKeyEventTarget(),a&&this.visible_))};
goog.ui.Container.prototype.isFocusable=function(){return this.focusable_};goog.ui.Container.prototype.setFocusable=function(a){a!=this.focusable_&&this.isInDocument()&&this.enableFocusHandling_(a);this.focusable_=a;this.enabled_&&this.visible_&&this.renderer_.enableTabIndex(this.getKeyEventTarget(),a)};goog.ui.Container.prototype.isFocusableChildrenAllowed=function(){return this.allowFocusableChildren_};
goog.ui.Container.prototype.setFocusableChildrenAllowed=function(a){this.allowFocusableChildren_=a};goog.ui.Container.prototype.isOpenFollowsHighlight=function(){return this.openFollowsHighlight_};goog.ui.Container.prototype.setOpenFollowsHighlight=function(a){this.openFollowsHighlight_=a};goog.ui.Container.prototype.getHighlightedIndex=function(){return this.highlightedIndex_};
goog.ui.Container.prototype.setHighlightedIndex=function(a){(a=this.getChildAt(a))?a.setHighlighted(!0):-1<this.highlightedIndex_&&this.getHighlighted().setHighlighted(!1)};goog.ui.Container.prototype.setHighlighted=function(a){this.setHighlightedIndex(this.indexOfChild(a))};goog.ui.Container.prototype.getHighlighted=function(){return this.getChildAt(this.highlightedIndex_)};
goog.ui.Container.prototype.highlightFirst=function(){this.highlightHelper(function(a,b){return(a+1)%b},this.getChildCount()-1)};goog.ui.Container.prototype.highlightLast=function(){this.highlightHelper(function(a,b){a--;return 0>a?b-1:a},0)};goog.ui.Container.prototype.highlightNext=function(){this.highlightHelper(function(a,b){return(a+1)%b},this.highlightedIndex_)};goog.ui.Container.prototype.highlightPrevious=function(){this.highlightHelper(function(a,b){a--;return 0>a?b-1:a},this.highlightedIndex_)};
goog.ui.Container.prototype.highlightHelper=function(a,b){b=0>b?this.indexOfChild(this.openItem_):b;var c=this.getChildCount();b=a.call(this,b,c);for(var d=0;d<=c;){var e=this.getChildAt(b);if(e&&this.canHighlightItem(e))return this.setHighlightedIndexFromKeyEvent(b),!0;d++;b=a.call(this,b,c)}return!1};goog.ui.Container.prototype.canHighlightItem=function(a){return a.isVisible()&&a.isEnabled()&&a.isSupportedState(goog.ui.Component.State.HOVER)};
goog.ui.Container.prototype.setHighlightedIndexFromKeyEvent=function(a){this.setHighlightedIndex(a)};goog.ui.Container.prototype.getOpenItem=function(){return this.openItem_};goog.ui.Container.prototype.isMouseButtonPressed=function(){return this.mouseButtonPressed_};goog.ui.Container.prototype.setMouseButtonPressed=function(a){this.mouseButtonPressed_=a};goog.ui.TabRenderer=function(){goog.ui.ControlRenderer.call(this)};goog.inherits(goog.ui.TabRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.TabRenderer);goog.ui.TabRenderer.CSS_CLASS="goog-tab";goog.ui.TabRenderer.prototype.getCssClass=function(){return goog.ui.TabRenderer.CSS_CLASS};goog.ui.TabRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.TAB};
goog.ui.TabRenderer.prototype.createDom=function(a){var b=goog.ui.TabRenderer.superClass_.createDom.call(this,a);(a=a.getTooltip())&&this.setTooltip(b,a);return b};goog.ui.TabRenderer.prototype.decorate=function(a,b){b=goog.ui.TabRenderer.superClass_.decorate.call(this,a,b);var c=this.getTooltip(b);c&&a.setTooltipInternal(c);a.isSelected()&&(c=a.getParent())&&goog.isFunction(c.setSelectedTab)&&(a.setState(goog.ui.Component.State.SELECTED,!1),c.setSelectedTab(a));return b};
goog.ui.TabRenderer.prototype.getTooltip=function(a){return a.title||""};goog.ui.TabRenderer.prototype.setTooltip=function(a,b){a&&(a.title=b||"")};goog.ui.Tab=function(a,b,c){goog.ui.Control.call(this,a,b||goog.ui.TabRenderer.getInstance(),c);this.setSupportedState(goog.ui.Component.State.SELECTED,!0);this.setDispatchTransitionEvents(goog.ui.Component.State.DISABLED|goog.ui.Component.State.SELECTED,!0)};goog.inherits(goog.ui.Tab,goog.ui.Control);goog.tagUnsealableClass(goog.ui.Tab);goog.ui.Tab.prototype.getTooltip=function(){return this.tooltip_};
goog.ui.Tab.prototype.setTooltip=function(a){this.getRenderer().setTooltip(this.getElement(),a);this.setTooltipInternal(a)};goog.ui.Tab.prototype.setTooltipInternal=function(a){this.tooltip_=a};goog.ui.registry.setDecoratorByClassName(goog.ui.TabRenderer.CSS_CLASS,function(){return new goog.ui.Tab(null)});goog.ui.TabBarRenderer=function(){goog.ui.ContainerRenderer.call(this,goog.a11y.aria.Role.TAB_LIST)};goog.inherits(goog.ui.TabBarRenderer,goog.ui.ContainerRenderer);goog.addSingletonGetter(goog.ui.TabBarRenderer);goog.tagUnsealableClass(goog.ui.TabBarRenderer);goog.ui.TabBarRenderer.CSS_CLASS="goog-tab-bar";goog.ui.TabBarRenderer.prototype.getCssClass=function(){return goog.ui.TabBarRenderer.CSS_CLASS};
goog.ui.TabBarRenderer.prototype.setStateFromClassName=function(a,b,c){this.locationByClass_||this.createLocationByClassMap_();var d=this.locationByClass_[b];d?a.setLocation(d):goog.ui.TabBarRenderer.superClass_.setStateFromClassName.call(this,a,b,c)};goog.ui.TabBarRenderer.prototype.getClassNames=function(a){var b=goog.ui.TabBarRenderer.superClass_.getClassNames.call(this,a);this.classByLocation_||this.createClassByLocationMap_();b.push(this.classByLocation_[a.getLocation()]);return b};
goog.ui.TabBarRenderer.prototype.createClassByLocationMap_=function(){var a=this.getCssClass();this.classByLocation_={[goog.ui.TabBar.Location.TOP]:a+"-top",[goog.ui.TabBar.Location.BOTTOM]:a+"-bottom",[goog.ui.TabBar.Location.START]:a+"-start",[goog.ui.TabBar.Location.END]:a+"-end"}};goog.ui.TabBarRenderer.prototype.createLocationByClassMap_=function(){this.classByLocation_||this.createClassByLocationMap_();this.locationByClass_=goog.object.transpose(this.classByLocation_)};goog.ui.TabBar=function(a,b,c){this.setLocation(a||goog.ui.TabBar.Location.TOP);goog.ui.Container.call(this,this.getOrientation(),b||goog.ui.TabBarRenderer.getInstance(),c);this.listenToTabEvents_()};goog.inherits(goog.ui.TabBar,goog.ui.Container);goog.tagUnsealableClass(goog.ui.TabBar);goog.ui.TabBar.Location={TOP:"top",BOTTOM:"bottom",START:"start",END:"end"};goog.ui.TabBar.prototype.autoSelectTabs_=!0;goog.ui.TabBar.prototype.selectedTab_=null;
goog.ui.TabBar.prototype.enterDocument=function(){goog.ui.TabBar.superClass_.enterDocument.call(this);this.listenToTabEvents_()};goog.ui.TabBar.prototype.disposeInternal=function(){goog.ui.TabBar.superClass_.disposeInternal.call(this);this.selectedTab_=null};goog.ui.TabBar.prototype.removeChild=function(a,b){this.deselectIfSelected(a);return goog.ui.TabBar.superClass_.removeChild.call(this,a,b)};goog.ui.TabBar.prototype.getLocation=function(){return this.location_};
goog.ui.TabBar.prototype.setLocation=function(a){this.setOrientation(goog.ui.TabBar.getOrientationFromLocation(a));this.location_=a};goog.ui.TabBar.prototype.isAutoSelectTabs=function(){return this.autoSelectTabs_};goog.ui.TabBar.prototype.setAutoSelectTabs=function(a){this.autoSelectTabs_=a};goog.ui.TabBar.prototype.setHighlightedIndexFromKeyEvent=function(a){goog.ui.TabBar.superClass_.setHighlightedIndexFromKeyEvent.call(this,a);this.autoSelectTabs_&&this.setSelectedTabIndex(a)};
goog.ui.TabBar.prototype.getSelectedTab=function(){return this.selectedTab_};goog.ui.TabBar.prototype.setSelectedTab=function(a){a?a.setSelected(!0):this.getSelectedTab()&&this.getSelectedTab().setSelected(!1)};goog.ui.TabBar.prototype.getSelectedTabIndex=function(){return this.indexOfChild(this.getSelectedTab())};goog.ui.TabBar.prototype.setSelectedTabIndex=function(a){this.setSelectedTab(this.getChildAt(a))};
goog.ui.TabBar.prototype.deselectIfSelected=function(a){if(a&&a==this.getSelectedTab()){for(var b=this.indexOfChild(a),c=b-1;a=this.getChildAt(c);c--)if(this.isSelectableTab(a)){this.setSelectedTab(a);return}for(b+=1;a=this.getChildAt(b);b++)if(this.isSelectableTab(a)){this.setSelectedTab(a);return}this.setSelectedTab(null)}};goog.ui.TabBar.prototype.isSelectableTab=function(a){return a.isVisible()&&a.isEnabled()};
goog.ui.TabBar.prototype.handleTabSelect=function(a){this.selectedTab_&&this.selectedTab_!=a.target&&this.selectedTab_.setSelected(!1);this.selectedTab_=a.target};goog.ui.TabBar.prototype.handleTabUnselect=function(a){a.target==this.selectedTab_&&(this.selectedTab_=null)};goog.ui.TabBar.prototype.handleTabDisable=function(a){this.deselectIfSelected(a.target)};goog.ui.TabBar.prototype.handleTabHide=function(a){this.deselectIfSelected(a.target)};
goog.ui.TabBar.prototype.handleFocus=function(a){this.getHighlighted()||this.setHighlighted(this.getSelectedTab()||this.getChildAt(0))};goog.ui.TabBar.prototype.listenToTabEvents_=function(){this.getHandler().listen(this,goog.ui.Component.EventType.SELECT,this.handleTabSelect).listen(this,goog.ui.Component.EventType.UNSELECT,this.handleTabUnselect).listen(this,goog.ui.Component.EventType.DISABLE,this.handleTabDisable).listen(this,goog.ui.Component.EventType.HIDE,this.handleTabHide)};
goog.ui.TabBar.getOrientationFromLocation=function(a){return a==goog.ui.TabBar.Location.START||a==goog.ui.TabBar.Location.END?goog.ui.Container.Orientation.VERTICAL:goog.ui.Container.Orientation.HORIZONTAL};goog.ui.registry.setDecoratorByClassName(goog.ui.TabBarRenderer.CSS_CLASS,function(){return new goog.ui.TabBar});goog.ui.CustomButton=function(a,b,c){goog.ui.Button.call(this,a,b||goog.ui.CustomButtonRenderer.getInstance(),c)};goog.inherits(goog.ui.CustomButton,goog.ui.Button);goog.ui.registry.setDecoratorByClassName(goog.ui.CustomButtonRenderer.CSS_CLASS,function(){return new goog.ui.CustomButton(null)});goog.net.IframeIo=function(){goog.events.EventTarget.call(this);this.name_=goog.net.IframeIo.getNextName_();this.iframesForDisposal_=[];goog.net.IframeIo.instances_[this.name_]=this};goog.inherits(goog.net.IframeIo,goog.events.EventTarget);goog.net.IframeIo.instances_={};goog.net.IframeIo.FRAME_NAME_PREFIX="closure_frame";goog.net.IframeIo.INNER_FRAME_SUFFIX="_inner";goog.net.IframeIo.IFRAME_DISPOSE_DELAY_MS=2E3;goog.net.IframeIo.counter_=0;
goog.net.IframeIo.send=function(a,b,c,d,e){var f=new goog.net.IframeIo;goog.events.listen(f,goog.net.EventType.READY,f.dispose,!1,f);b&&goog.events.listen(f,goog.net.EventType.COMPLETE,b);f.send(a,c,d,e)};goog.net.IframeIo.getIframeByName=function(a){return window.frames[a]};goog.net.IframeIo.getInstanceByName=function(a){return goog.net.IframeIo.instances_[a]};
goog.net.IframeIo.handleIncrementalData=function(a,b){a=goog.string.endsWith(a.name,goog.net.IframeIo.INNER_FRAME_SUFFIX)?a.parent.name:a.name;var c=a.substring(0,a.lastIndexOf("_"));(c=goog.net.IframeIo.getInstanceByName(c))&&a==c.iframeName_?c.handleIncrementalData_(b):(b=goog.log.getLogger("goog.net.IframeIo"),goog.log.info(b,"Incremental iframe data routed for unknown iframe"))};goog.net.IframeIo.getNextName_=function(){return goog.net.IframeIo.FRAME_NAME_PREFIX+goog.net.IframeIo.counter_++};
goog.net.IframeIo.getForm_=function(){if(!goog.net.IframeIo.form_){goog.net.IframeIo.form_=goog.dom.createDom("FORM");goog.net.IframeIo.form_.acceptCharset="utf-8";var a=goog.net.IframeIo.form_.style;a.position="absolute";a.visibility="hidden";a.top=a.left="-10px";a.width=a.height="10px";a.overflow="hidden";goog.dom.getDocument().body.appendChild(goog.net.IframeIo.form_)}return goog.net.IframeIo.form_};
goog.net.IframeIo.addFormInputs_=function(a,b){var c=goog.dom.getDomHelper(a);goog.structs.forEach(b,function(b,e){goog.isArray(b)||(b=[b]);goog.array.forEach(b,function(b){b=c.createDom("INPUT",{type:goog.dom.InputType.HIDDEN,name:e,value:b});a.appendChild(b)})})};goog.net.IframeIo.useIeReadyStateCodePath_=function(){return goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("11")};goog.net.IframeIo.prototype.logger_=goog.log.getLogger("goog.net.IframeIo");goog.net.IframeIo.prototype.form_=null;
goog.net.IframeIo.prototype.iframe_=null;goog.net.IframeIo.prototype.iframeName_=null;goog.net.IframeIo.prototype.nextIframeId_=0;goog.net.IframeIo.prototype.active_=!1;goog.net.IframeIo.prototype.complete_=!1;goog.net.IframeIo.prototype.success_=!1;goog.net.IframeIo.prototype.lastUri_=null;goog.net.IframeIo.prototype.lastContent_=null;goog.net.IframeIo.prototype.lastErrorCode_=goog.net.ErrorCode.NO_ERROR;goog.net.IframeIo.prototype.firefoxSilentErrorTimeout_=null;
goog.net.IframeIo.prototype.iframeDisposalTimer_=null;goog.net.IframeIo.prototype.ignoreResponse_=!1;
goog.net.IframeIo.prototype.send=function(a,b,c,d){if(this.active_)throw Error("[goog.net.IframeIo] Unable to send, already active.");this.lastUri_=a=new goog.Uri(a);b=b?b.toUpperCase():"GET";c&&a.makeUnique();goog.log.info(this.logger_,"Sending iframe request: "+a+" ["+b+"]");this.form_=goog.net.IframeIo.getForm_();"GET"==b&&goog.net.IframeIo.addFormInputs_(this.form_,a.getQueryData());d&&goog.net.IframeIo.addFormInputs_(this.form_,d);this.form_.action=a.toString();this.form_.method=b;this.sendFormInternal_();
this.clearForm_()};goog.net.IframeIo.prototype.sendFromForm=function(a,b,c){if(this.active_)throw Error("[goog.net.IframeIo] Unable to send, already active.");b=new goog.Uri(b||a.action);c&&b.makeUnique();goog.log.info(this.logger_,"Sending iframe request from form: "+b);this.lastUri_=b;this.form_=a;this.form_.action=b.toString();this.sendFormInternal_()};
goog.net.IframeIo.prototype.abort=function(a){if(this.active_){goog.log.info(this.logger_,"Request aborted");var b=this.getRequestIframe();goog.asserts.assert(b);goog.events.removeAll(b);this.success_=this.active_=this.complete_=!1;this.lastErrorCode_=a||goog.net.ErrorCode.ABORT;this.dispatchEvent(goog.net.EventType.ABORT);this.makeReady_()}};
goog.net.IframeIo.prototype.disposeInternal=function(){goog.log.fine(this.logger_,"Disposing iframeIo instance");this.active_&&(goog.log.fine(this.logger_,"Aborting active request"),this.abort());goog.net.IframeIo.superClass_.disposeInternal.call(this);this.iframe_&&this.scheduleIframeDisposal_();this.disposeForm_();delete this.errorChecker_;this.lastUri_=this.lastCustomError_=this.lastContent_=this.lastContentHtml_=this.form_=null;this.lastErrorCode_=goog.net.ErrorCode.NO_ERROR;delete goog.net.IframeIo.instances_[this.name_]};
goog.net.IframeIo.prototype.isComplete=function(){return this.complete_};goog.net.IframeIo.prototype.isSuccess=function(){return this.success_};goog.net.IframeIo.prototype.isActive=function(){return this.active_};goog.net.IframeIo.prototype.getResponseText=function(){return this.lastContent_};goog.net.IframeIo.prototype.getResponseHtml=function(){return this.lastContentHtml_};goog.net.IframeIo.prototype.getResponseJson=function(){return goog.json.parse(this.lastContent_)};
goog.net.IframeIo.prototype.getResponseXml=function(){return this.iframe_?this.getContentDocument_():null};goog.net.IframeIo.prototype.getLastUri=function(){return this.lastUri_};goog.net.IframeIo.prototype.getLastErrorCode=function(){return this.lastErrorCode_};goog.net.IframeIo.prototype.getLastError=function(){return goog.net.ErrorCode.getDebugMessage(this.lastErrorCode_)};goog.net.IframeIo.prototype.getLastCustomError=function(){return this.lastCustomError_};
goog.net.IframeIo.prototype.setErrorChecker=function(a){this.errorChecker_=a};goog.net.IframeIo.prototype.getErrorChecker=function(){return this.errorChecker_};goog.net.IframeIo.prototype.isIgnoringResponse=function(){return this.ignoreResponse_};goog.net.IframeIo.prototype.setIgnoreResponse=function(a){this.ignoreResponse_=a};
goog.net.IframeIo.prototype.sendFormInternal_=function(){this.active_=!0;this.complete_=!1;this.lastErrorCode_=goog.net.ErrorCode.NO_ERROR;this.createIframe_();if(goog.net.IframeIo.useIeReadyStateCodePath_()){this.form_.target=this.iframeName_||"";this.appendIframe_();this.ignoreResponse_||goog.events.listen(this.iframe_,goog.events.EventType.READYSTATECHANGE,this.onIeReadyStateChange_,!1,this);try{this.errorHandled_=!1,this.form_.submit()}catch(n){this.ignoreResponse_||goog.events.unlisten(this.iframe_,
goog.events.EventType.READYSTATECHANGE,this.onIeReadyStateChange_,!1,this),this.handleError_(goog.net.ErrorCode.ACCESS_DENIED)}}else{goog.log.fine(this.logger_,"Setting up iframes and cloning form");this.appendIframe_();var a=this.iframeName_+goog.net.IframeIo.INNER_FRAME_SUFFIX,b=goog.dom.getFrameContentDocument(this.iframe_);var c=document.baseURI?goog.net.IframeIo.createIframeHtmlWithBaseUri_(a):goog.net.IframeIo.createIframeHtml_(a);goog.userAgent.OPERA&&!goog.userAgent.WEBKIT?goog.dom.safe.setInnerHtml(b.documentElement,
c):goog.dom.safe.documentWrite(b,c);this.ignoreResponse_||goog.events.listen(b.getElementById(a),goog.events.EventType.LOAD,this.onIframeLoaded_,!1,this);var d=goog.dom.getElementsByTagName("TEXTAREA",goog.asserts.assert(this.form_));c=0;for(var e=d.length;c<e;c++){var f=d[c].value;goog.dom.getRawTextContent(d[c])!=f&&(goog.dom.setTextContent(d[c],f),d[c].value=f)}d=b.importNode(goog.asserts.assert(this.form_),!0);d.target=a;d.action=this.form_.action;b.body.appendChild(d);f=goog.dom.getElementsByTagName("SELECT",
goog.asserts.assert(this.form_));var g=goog.dom.getElementsByTagName("SELECT",d);c=0;for(e=f.length;c<e;c++)for(var h=goog.dom.getElementsByTagName("OPTION",f[c]),k=goog.dom.getElementsByTagName("OPTION",g[c]),l=0,m=h.length;l<m;l++)k[l].selected=h[l].selected;f=goog.dom.getElementsByTagName("INPUT",goog.asserts.assert(this.form_));g=goog.dom.getElementsByTagName("INPUT",d);c=0;for(e=f.length;c<e;c++)if(f[c].type==goog.dom.InputType.FILE&&f[c].value!=g[c].value){goog.log.fine(this.logger_,"File input value not cloned properly.  Will submit using original form.");
this.form_.target=a;d=this.form_;break}goog.log.fine(this.logger_,"Submitting form");try{this.errorHandled_=!1,d.submit(),b.close(),goog.userAgent.GECKO&&(this.firefoxSilentErrorTimeout_=goog.Timer.callOnce(this.testForFirefoxSilentError_,250,this))}catch(n){goog.log.error(this.logger_,"Error when submitting form: "+goog.debug.HtmlFormatter.exposeException(n)),this.ignoreResponse_||goog.events.unlisten(b.getElementById(a),goog.events.EventType.LOAD,this.onIframeLoaded_,!1,this),b.close(),this.handleError_(goog.net.ErrorCode.FILE_NOT_FOUND)}}};
goog.net.IframeIo.createIframeHtml_=function(a){a=goog.string.htmlEscape(a);return goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Short HTML snippet, input escaped, for performance"),'<body><iframe id="'+a+'" name="'+a+'"></iframe>')};
goog.net.IframeIo.createIframeHtmlWithBaseUri_=function(a){a=goog.string.htmlEscape(a);return goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Short HTML snippet, input escaped, safe URL, for performance"),'<head><base href="'+goog.string.htmlEscape(document.baseURI)+'"></head><body><iframe id="'+a+'" name="'+a+'"></iframe>')};
goog.net.IframeIo.prototype.onIeReadyStateChange_=function(a){if("complete"==this.iframe_.readyState){goog.events.unlisten(this.iframe_,goog.events.EventType.READYSTATECHANGE,this.onIeReadyStateChange_,!1,this);try{var b=goog.dom.getFrameContentDocument(this.iframe_);if(goog.userAgent.IE&&"about:blank"==b.location&&!navigator.onLine){this.handleError_(goog.net.ErrorCode.OFFLINE);return}}catch(c){this.handleError_(goog.net.ErrorCode.ACCESS_DENIED);return}this.handleLoad_(b)}};
goog.net.IframeIo.prototype.onIframeLoaded_=function(a){if(!goog.userAgent.OPERA||goog.userAgent.WEBKIT||"about:blank"!=this.getContentDocument_().location){goog.events.unlisten(this.getRequestIframe(),goog.events.EventType.LOAD,this.onIframeLoaded_,!1,this);try{this.handleLoad_(this.getContentDocument_())}catch(b){this.handleError_(goog.net.ErrorCode.ACCESS_DENIED)}}};
goog.net.IframeIo.prototype.handleLoad_=function(a){goog.log.fine(this.logger_,"Iframe loaded");this.complete_=!0;this.active_=!1;try{var b=a.body;this.lastContent_=b.textContent||b.innerText;this.lastContentHtml_=b.innerHTML}catch(e){var c=goog.net.ErrorCode.ACCESS_DENIED}var d;!c&&"function"==typeof this.errorChecker_&&(d=this.errorChecker_(a))&&(c=goog.net.ErrorCode.CUSTOM_ERROR);goog.log.log(this.logger_,goog.log.Level.FINER,"Last content: "+this.lastContent_);goog.log.log(this.logger_,goog.log.Level.FINER,
"Last uri: "+this.lastUri_);c?(goog.log.fine(this.logger_,"Load event occurred but failed"),this.handleError_(c,d)):(goog.log.fine(this.logger_,"Load succeeded"),this.success_=!0,this.lastErrorCode_=goog.net.ErrorCode.NO_ERROR,this.dispatchEvent(goog.net.EventType.COMPLETE),this.dispatchEvent(goog.net.EventType.SUCCESS),this.makeReady_())};
goog.net.IframeIo.prototype.handleError_=function(a,b){this.errorHandled_||(this.active_=this.success_=!1,this.complete_=!0,this.lastErrorCode_=a,a==goog.net.ErrorCode.CUSTOM_ERROR&&(goog.asserts.assert(goog.isDef(b)),this.lastCustomError_=b),this.dispatchEvent(goog.net.EventType.COMPLETE),this.dispatchEvent(goog.net.EventType.ERROR),this.makeReady_(),this.errorHandled_=!0)};goog.net.IframeIo.prototype.handleIncrementalData_=function(a){this.dispatchEvent(new goog.net.IframeIo.IncrementalDataEvent(a))};
goog.net.IframeIo.prototype.makeReady_=function(){goog.log.info(this.logger_,"Ready for new requests");this.scheduleIframeDisposal_();this.disposeForm_();this.dispatchEvent(goog.net.EventType.READY)};
goog.net.IframeIo.prototype.createIframe_=function(){goog.log.fine(this.logger_,"Creating iframe");this.iframeName_=this.name_+"_"+(this.nextIframeId_++).toString(36);this.iframe_=goog.dom.getDomHelper(this.form_).createDom("IFRAME",{name:this.iframeName_,id:this.iframeName_});goog.userAgent.IE&&7>Number(goog.userAgent.VERSION)&&(this.iframe_.src='javascript:""');var a=this.iframe_.style;a.visibility="hidden";a.width=a.height="10px";a.display="none";goog.userAgent.WEBKIT?a.marginTop=a.marginLeft=
"-10px":(a.position="absolute",a.top=a.left="-10px")};goog.net.IframeIo.prototype.appendIframe_=function(){goog.dom.getDomHelper(this.form_).getDocument().body.appendChild(this.iframe_)};
goog.net.IframeIo.prototype.scheduleIframeDisposal_=function(){var a=this.iframe_;a&&(a.onreadystatechange=null,a.onload=null,a.onerror=null,this.iframesForDisposal_.push(a));this.iframeDisposalTimer_&&(goog.Timer.clear(this.iframeDisposalTimer_),this.iframeDisposalTimer_=null);goog.userAgent.GECKO||goog.userAgent.OPERA&&!goog.userAgent.WEBKIT?this.iframeDisposalTimer_=goog.Timer.callOnce(this.disposeIframes_,goog.net.IframeIo.IFRAME_DISPOSE_DELAY_MS,this):this.disposeIframes_();this.iframeName_=
this.iframe_=null};goog.net.IframeIo.prototype.disposeIframes_=function(){this.iframeDisposalTimer_&&(goog.Timer.clear(this.iframeDisposalTimer_),this.iframeDisposalTimer_=null);for(;0!=this.iframesForDisposal_.length;){var a=this.iframesForDisposal_.pop();goog.log.info(this.logger_,"Disposing iframe");goog.dom.removeNode(a)}};goog.net.IframeIo.prototype.clearForm_=function(){this.form_&&this.form_==goog.net.IframeIo.form_&&goog.dom.removeChildren(this.form_)};
goog.net.IframeIo.prototype.disposeForm_=function(){this.clearForm_();this.form_=null};goog.net.IframeIo.prototype.getContentDocument_=function(){return this.iframe_?goog.dom.getFrameContentDocument(this.getRequestIframe()):null};goog.net.IframeIo.prototype.getRequestIframe=function(){return this.iframe_?goog.net.IframeIo.useIeReadyStateCodePath_()?this.iframe_:goog.dom.getFrameContentDocument(this.iframe_).getElementById(this.iframeName_+goog.net.IframeIo.INNER_FRAME_SUFFIX):null};
goog.net.IframeIo.prototype.testForFirefoxSilentError_=function(){if(this.active_){var a=this.getContentDocument_();a&&!goog.reflect.canAccessProperty(a,"documentUri")?(this.ignoreResponse_||goog.events.unlisten(this.getRequestIframe(),goog.events.EventType.LOAD,this.onIframeLoaded_,!1,this),navigator.onLine?(goog.log.warning(this.logger_,"Silent Firefox error detected"),this.handleError_(goog.net.ErrorCode.FF_SILENT_ERROR)):(goog.log.warning(this.logger_,"Firefox is offline so report offline error instead of silent error"),
this.handleError_(goog.net.ErrorCode.OFFLINE))):this.firefoxSilentErrorTimeout_=goog.Timer.callOnce(this.testForFirefoxSilentError_,250,this)}};goog.net.IframeIo.IncrementalDataEvent=function(a){goog.events.Event.call(this,goog.net.EventType.INCREMENTAL_DATA);this.data=a};goog.inherits(goog.net.IframeIo.IncrementalDataEvent,goog.events.Event);goog.ui.ac.RemoteArrayMatcher=function(a,b,c){goog.Disposable.call(this);this.url_=a;this.useSimilar_=!b;this.xhr_=new goog.net.XhrIo(c)};goog.inherits(goog.ui.ac.RemoteArrayMatcher,goog.Disposable);goog.ui.ac.RemoteArrayMatcher.prototype.method_="GET";goog.ui.ac.RemoteArrayMatcher.prototype.content_=void 0;goog.ui.ac.RemoteArrayMatcher.prototype.headers_=null;goog.ui.ac.RemoteArrayMatcher.prototype.lastListenerKey_=null;goog.ui.ac.RemoteArrayMatcher.prototype.setMethod=function(a){this.method_=a};
goog.ui.ac.RemoteArrayMatcher.prototype.setContent=function(a){this.content_=a};goog.ui.ac.RemoteArrayMatcher.prototype.setHeaders=function(a){this.headers_=a};goog.ui.ac.RemoteArrayMatcher.prototype.setTimeoutInterval=function(a){this.xhr_.setTimeoutInterval(a)};goog.ui.ac.RemoteArrayMatcher.prototype.buildUrl=function(a,b,c,d,e){a=new goog.Uri(a);a.setParameterValue("token",b);a.setParameterValue("max_matches",String(c));a.setParameterValue("use_similar",String(Number(d)));return a.toString()};
goog.ui.ac.RemoteArrayMatcher.prototype.shouldRequestMatches=function(a,b,c,d,e){return!0};goog.ui.ac.RemoteArrayMatcher.prototype.parseResponseText=function(a){var b=[];if(a)try{b=JSON.parse(a)}catch(c){}return b};goog.ui.ac.RemoteArrayMatcher.prototype.xhrCallback=function(a,b,c){c=c.target.getResponseText();b(a,this.parseResponseText(c))};
goog.ui.ac.RemoteArrayMatcher.prototype.requestMatchingRows=function(a,b,c,d){this.shouldRequestMatches(this.url_,a,b,this.useSimilar_,d)&&(b=this.buildUrl(this.url_,a,b,this.useSimilar_,d))&&(a=goog.bind(this.xhrCallback,this,a,c),this.xhr_.isActive()&&this.xhr_.abort(),this.lastListenerKey_&&goog.events.unlistenByKey(this.lastListenerKey_),this.lastListenerKey_=goog.events.listenOnce(this.xhr_,goog.net.EventType.SUCCESS,a),this.xhr_.send(b,this.method_,this.content_,this.headers_))};
goog.ui.ac.RemoteArrayMatcher.prototype.disposeInternal=function(){this.xhr_.dispose();goog.ui.ac.RemoteArrayMatcher.superClass_.disposeInternal.call(this)};goog.ui.ac.Remote=function(a,b,c,d){this.matcher_=a=new goog.ui.ac.RemoteArrayMatcher(a,!d);d=new goog.ui.ac.Renderer;c=new goog.ui.ac.InputHandler(null,null,!!c,300);goog.ui.ac.AutoComplete.call(this,a,d,c);c.attachAutoComplete(this);c.attachInputs(b)};goog.inherits(goog.ui.ac.Remote,goog.ui.ac.AutoComplete);goog.ui.ac.Remote.prototype.setUseStandardHighlighting=function(a){this.renderer_.setUseStandardHighlighting(a)};goog.ui.ac.Remote.prototype.getInputHandler=function(){return this.selectionHandler_};
goog.ui.ac.Remote.prototype.setMethod=function(a){this.matcher_.setMethod(a)};goog.ui.ac.Remote.prototype.setContent=function(a){this.matcher_.setContent(a)};goog.ui.ac.Remote.prototype.setHeaders=function(a){this.matcher_.setHeaders(a)};goog.ui.ac.Remote.prototype.setTimeoutInterval=function(a){this.matcher_.setTimeoutInterval(a)};goog.async.Throttle=function(a,b,c){goog.Disposable.call(this);this.listener_=null!=c?goog.bind(a,c):a;this.interval_=b;this.callback_=goog.bind(this.onTimer_,this);this.args_=[]};goog.inherits(goog.async.Throttle,goog.Disposable);goog.Throttle=goog.async.Throttle;goog.async.Throttle.prototype.shouldFire_=!1;goog.async.Throttle.prototype.pauseCount_=0;goog.async.Throttle.prototype.timer_=null;
goog.async.Throttle.prototype.fire=function(a){this.args_=arguments;this.timer_||this.pauseCount_?this.shouldFire_=!0:this.doAction_()};goog.async.Throttle.prototype.stop=function(){this.timer_&&(goog.Timer.clear(this.timer_),this.timer_=null,this.shouldFire_=!1,this.args_=[])};goog.async.Throttle.prototype.pause=function(){this.pauseCount_++};goog.async.Throttle.prototype.resume=function(){this.pauseCount_--;this.pauseCount_||!this.shouldFire_||this.timer_||(this.shouldFire_=!1,this.doAction_())};
goog.async.Throttle.prototype.disposeInternal=function(){goog.async.Throttle.superClass_.disposeInternal.call(this);this.stop()};goog.async.Throttle.prototype.onTimer_=function(){this.timer_=null;this.shouldFire_&&!this.pauseCount_&&(this.shouldFire_=!1,this.doAction_())};goog.async.Throttle.prototype.doAction_=function(){this.timer_=goog.Timer.callOnce(this.callback_,this.interval_);this.listener_.apply(null,this.args_)};goog.ui.ac.ArrayMatcher=function(a,b){this.rows_=a||[];this.useSimilar_=!b};goog.ui.ac.ArrayMatcher.prototype.setRows=function(a){this.rows_=a||[]};goog.ui.ac.ArrayMatcher.prototype.requestMatchingRows=function(a,b,c,d){b=this.useSimilar_?goog.ui.ac.ArrayMatcher.getMatchesForRows(a,b,this.rows_):this.getPrefixMatches(a,b);c(a,b)};
goog.ui.ac.ArrayMatcher.getMatchesForRows=function(a,b,c){var d=goog.ui.ac.ArrayMatcher.getPrefixMatchesForRows(a,b,c);0==d.length&&(d=goog.ui.ac.ArrayMatcher.getSimilarMatchesForRows(a,b,c));return d};goog.ui.ac.ArrayMatcher.prototype.getPrefixMatches=function(a,b){return goog.ui.ac.ArrayMatcher.getPrefixMatchesForRows(a,b,this.rows_)};
goog.ui.ac.ArrayMatcher.getPrefixMatchesForRows=function(a,b,c){var d=[];if(""!=a){a=goog.string.regExpEscape(a);a=new RegExp("(^|\\W+)"+a,"i");for(var e=0;e<c.length&&d.length<b;e++){var f=c[e];String(f).match(a)&&d.push(f)}}return d};goog.ui.ac.ArrayMatcher.prototype.getSimilarRows=function(a,b){return goog.ui.ac.ArrayMatcher.getSimilarMatchesForRows(a,b,this.rows_)};
goog.ui.ac.ArrayMatcher.getSimilarMatchesForRows=function(a,b,c){for(var d=[],e=0;e<c.length;e++){var f=c[e],g=a.toLowerCase(),h=String(f).toLowerCase(),k=0;if(-1!=h.indexOf(g))k=parseInt((h.indexOf(g)/4).toString(),10);else for(var l=g.split(""),m=-1,n=10,p=0,q;q=l[p];p++)q=h.indexOf(q),q>m?(m=q-m-1,m>n-5&&(m=n-5),k+=m,m=q):(k+=n,n+=5);k<6*g.length&&d.push({str:f,score:k,index:e})}d.sort(function(a,b){var c=a.score-b.score;return 0!=c?c:a.index-b.index});a=[];for(p=0;p<b&&p<d.length;p++)a.push(d[p].str);
return a};goog.ui.ac.CachingMatcher=function(a){this.rows_=[];this.rowStrings_={};this.maxCacheSize_=1E3;this.baseMatcher_=a;this.getMatchesForRows_=goog.ui.ac.ArrayMatcher.getMatchesForRows;this.baseMatcherMaxMatches_=100;this.throttledTriggerBaseMatch_=new goog.async.Throttle(this.triggerBaseMatch_,150,this);this.mostRecentToken_="";this.mostRecentMatchHandler_=null;this.mostRecentMaxMatches_=10;this.mostRecentMatches_=[]};
goog.ui.ac.CachingMatcher.prototype.setThrottleTime=function(a){this.throttledTriggerBaseMatch_=new goog.async.Throttle(this.triggerBaseMatch_,a,this)};goog.ui.ac.CachingMatcher.prototype.setBaseMatcherMaxMatches=function(a){this.baseMatcherMaxMatches_=a};goog.ui.ac.CachingMatcher.prototype.setMaxCacheSize=function(a){this.maxCacheSize_=a};goog.ui.ac.CachingMatcher.prototype.setLocalMatcher=function(a){this.getMatchesForRows_=a};
goog.ui.ac.CachingMatcher.prototype.requestMatchingRows=function(a,b,c){this.mostRecentMaxMatches_=b;this.mostRecentToken_=a;this.mostRecentMatchHandler_=c;this.throttledTriggerBaseMatch_.fire();b=this.getMatchesForRows_(a,b,this.rows_);c(a,b);this.mostRecentMatches_=b};goog.ui.ac.CachingMatcher.prototype.clearCache=function(){this.rows_=[];this.rowStrings_={}};
goog.ui.ac.CachingMatcher.prototype.addRows_=function(a){goog.array.forEach(a,function(a){this.rowStrings_[" "+a]||(this.rows_.push(a),this.rowStrings_[" "+a]=!0)},this)};goog.ui.ac.CachingMatcher.prototype.clearCacheIfTooLarge_=function(){this.rows_.length>this.maxCacheSize_&&this.clearCache()};goog.ui.ac.CachingMatcher.prototype.triggerBaseMatch_=function(){this.baseMatcher_.requestMatchingRows(this.mostRecentToken_,this.baseMatcherMaxMatches_,goog.bind(this.onBaseMatch_,this))};
goog.ui.ac.CachingMatcher.prototype.onBaseMatch_=function(a,b){this.addRows_(b);var c={};goog.array.forEach(this.mostRecentMatches_,function(a){c[" "+a]=!0});a=this.getMatchesForRows_(this.mostRecentToken_,this.mostRecentMaxMatches_,this.rows_);a=goog.array.filter(a,function(a){return!c[" "+a]});this.mostRecentMatches_=a=this.mostRecentMatches_.concat(a).slice(0,this.mostRecentMaxMatches_);b=new goog.ui.ac.RenderOptions;b.setPreserveHilited(!0);this.mostRecentMatchHandler_(this.mostRecentToken_,a,
b);this.clearCacheIfTooLarge_()};goog.positioning.AbstractPosition=function(){};goog.positioning.AbstractPosition.prototype.reposition=function(a,b,c,d){};goog.positioning.AnchoredPosition=function(a,b,c){this.element=a;this.corner=b;this.overflow_=c};goog.inherits(goog.positioning.AnchoredPosition,goog.positioning.AbstractPosition);goog.positioning.AnchoredPosition.prototype.reposition=function(a,b,c,d){goog.positioning.positionAtAnchor(this.element,this.corner,a,b,void 0,c,this.overflow_)};goog.positioning.AnchoredViewportPosition=function(a,b,c,d){goog.positioning.AnchoredPosition.call(this,a,b);this.lastResortOverflow_=c?goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.ADJUST_Y:goog.positioning.Overflow.IGNORE;this.overflowConstraint_=d||void 0};goog.inherits(goog.positioning.AnchoredViewportPosition,goog.positioning.AnchoredPosition);goog.positioning.AnchoredViewportPosition.prototype.getOverflowConstraint=function(){return this.overflowConstraint_};
goog.positioning.AnchoredViewportPosition.prototype.setOverflowConstraint=function(a){this.overflowConstraint_=a};goog.positioning.AnchoredViewportPosition.prototype.getLastResortOverflow=function(){return this.lastResortOverflow_};goog.positioning.AnchoredViewportPosition.prototype.setLastResortOverflow=function(a){this.lastResortOverflow_=a};
goog.positioning.AnchoredViewportPosition.prototype.reposition=function(a,b,c,d){var e=goog.positioning.positionAtAnchor(this.element,this.corner,a,b,null,c,goog.positioning.Overflow.FAIL_X|goog.positioning.Overflow.FAIL_Y,d,this.overflowConstraint_);if(e&goog.positioning.OverflowStatus.FAILED){var f=this.adjustCorner(e,this.corner);b=this.adjustCorner(e,b);e=goog.positioning.positionAtAnchor(this.element,f,a,b,null,c,goog.positioning.Overflow.FAIL_X|goog.positioning.Overflow.FAIL_Y,d,this.overflowConstraint_);
e&goog.positioning.OverflowStatus.FAILED&&(f=this.adjustCorner(e,f),b=this.adjustCorner(e,b),goog.positioning.positionAtAnchor(this.element,f,a,b,null,c,this.getLastResortOverflow(),d,this.overflowConstraint_))}};goog.positioning.AnchoredViewportPosition.prototype.adjustCorner=function(a,b){a&goog.positioning.OverflowStatus.FAILED_HORIZONTAL&&(b=goog.positioning.flipCornerHorizontal(b));a&goog.positioning.OverflowStatus.FAILED_VERTICAL&&(b=goog.positioning.flipCornerVertical(b));return b};goog.positioning.MenuAnchoredPosition=function(a,b,c,d){goog.positioning.AnchoredViewportPosition.call(this,a,b,c||d);(c||d)&&this.setLastResortOverflow(goog.positioning.Overflow.ADJUST_X_EXCEPT_OFFSCREEN|(d?goog.positioning.Overflow.RESIZE_HEIGHT:goog.positioning.Overflow.ADJUST_Y_EXCEPT_OFFSCREEN))};goog.inherits(goog.positioning.MenuAnchoredPosition,goog.positioning.AnchoredViewportPosition);goog.positioning.ClientPosition=function(a,b){this.coordinate=a instanceof goog.math.Coordinate?a:new goog.math.Coordinate(a,b)};goog.inherits(goog.positioning.ClientPosition,goog.positioning.AbstractPosition);
goog.positioning.ClientPosition.prototype.reposition=function(a,b,c,d){goog.asserts.assert(a);var e=goog.style.getViewportPageOffset(goog.dom.getOwnerDocument(a)),f=this.coordinate.x+e.x;e=this.coordinate.y+e.y;var g=goog.positioning.getOffsetParentPageOffset(a);f-=g.x;e-=g.y;goog.positioning.positionAtCoordinate(new goog.math.Coordinate(f,e),a,b,c,null,null,d)};goog.positioning.ViewportClientPosition=function(a,b){goog.positioning.ClientPosition.call(this,a,b)};goog.inherits(goog.positioning.ViewportClientPosition,goog.positioning.ClientPosition);goog.positioning.ViewportClientPosition.prototype.lastResortOverflow_=0;goog.positioning.ViewportClientPosition.prototype.setLastResortOverflow=function(a){this.lastResortOverflow_=a};
goog.positioning.ViewportClientPosition.prototype.reposition=function(a,b,c,d){var e=goog.style.getClientViewportElement(a);e=goog.style.getVisibleRectForElement(e);var f=goog.dom.getDomHelper(a).getDocumentScrollElement();f=new goog.math.Coordinate(this.coordinate.x+f.scrollLeft,this.coordinate.y+f.scrollTop);var g=goog.positioning.Overflow.FAIL_X|goog.positioning.Overflow.FAIL_Y,h=b,k=goog.positioning.positionAtCoordinate(f,a,h,c,e,g,d);if(0!=(k&goog.positioning.OverflowStatus.FAILED)){if(k&goog.positioning.OverflowStatus.FAILED_LEFT||
k&goog.positioning.OverflowStatus.FAILED_RIGHT)h=goog.positioning.flipCornerHorizontal(h);if(k&goog.positioning.OverflowStatus.FAILED_TOP||k&goog.positioning.OverflowStatus.FAILED_BOTTOM)h=goog.positioning.flipCornerVertical(h);k=goog.positioning.positionAtCoordinate(f,a,h,c,e,g,d);0!=(k&goog.positioning.OverflowStatus.FAILED)&&goog.positioning.positionAtCoordinate(f,a,b,c,e,this.lastResortOverflow_,d)}};goog.ui.MenuHeaderRenderer=function(){goog.ui.ControlRenderer.call(this)};goog.inherits(goog.ui.MenuHeaderRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.MenuHeaderRenderer);goog.ui.MenuHeaderRenderer.CSS_CLASS="goog-menuheader";goog.ui.MenuHeaderRenderer.prototype.getCssClass=function(){return goog.ui.MenuHeaderRenderer.CSS_CLASS};goog.ui.MenuHeader=function(a,b,c){goog.ui.Control.call(this,a,c||goog.ui.MenuHeaderRenderer.getInstance(),b);this.setSupportedState(goog.ui.Component.State.DISABLED,!1);this.setSupportedState(goog.ui.Component.State.HOVER,!1);this.setSupportedState(goog.ui.Component.State.ACTIVE,!1);this.setSupportedState(goog.ui.Component.State.FOCUSED,!1);this.setStateInternal(goog.ui.Component.State.DISABLED)};goog.inherits(goog.ui.MenuHeader,goog.ui.Control);
goog.ui.registry.setDecoratorByClassName(goog.ui.MenuHeaderRenderer.CSS_CLASS,function(){return new goog.ui.MenuHeader(null)});goog.ui.MenuItemRenderer=function(){goog.ui.ControlRenderer.call(this);this.classNameCache_=[]};goog.inherits(goog.ui.MenuItemRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.MenuItemRenderer);goog.ui.MenuItemRenderer.CSS_CLASS="goog-menuitem";goog.ui.MenuItemRenderer.CompositeCssClassIndex_={HOVER:0,CHECKBOX:1,CONTENT:2};
goog.ui.MenuItemRenderer.prototype.getCompositeCssClass_=function(a){var b=this.classNameCache_[a];if(!b){switch(a){case goog.ui.MenuItemRenderer.CompositeCssClassIndex_.HOVER:b=this.getStructuralCssClass()+"-highlight";break;case goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CHECKBOX:b=this.getStructuralCssClass()+"-checkbox";break;case goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CONTENT:b=this.getStructuralCssClass()+"-content"}this.classNameCache_[a]=b}return b};
goog.ui.MenuItemRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.MENU_ITEM};goog.ui.MenuItemRenderer.prototype.createDom=function(a){var b=a.getDomHelper().createDom("DIV",this.getClassNames(a).join(" "),this.createContent(a.getContent(),a.getDomHelper()));this.setEnableCheckBoxStructure(a,b,a.isSupportedState(goog.ui.Component.State.SELECTED)||a.isSupportedState(goog.ui.Component.State.CHECKED));return b};
goog.ui.MenuItemRenderer.prototype.getContentElement=function(a){return a&&a.firstChild};goog.ui.MenuItemRenderer.prototype.decorate=function(a,b){goog.asserts.assert(b);this.hasContentStructure(b)||b.appendChild(this.createContent(b.childNodes,a.getDomHelper()));goog.dom.classlist.contains(b,"goog-option")&&(a.setCheckable(!0),this.setCheckable(a,b,!0));return goog.ui.MenuItemRenderer.superClass_.decorate.call(this,a,b)};
goog.ui.MenuItemRenderer.prototype.setContent=function(a,b){var c=this.getContentElement(a),d=this.hasCheckBoxStructure(a)?c.firstChild:null;goog.ui.MenuItemRenderer.superClass_.setContent.call(this,a,b);d&&!this.hasCheckBoxStructure(a)&&c.insertBefore(d,c.firstChild||null)};
goog.ui.MenuItemRenderer.prototype.hasContentStructure=function(a){a=goog.dom.getFirstElementChild(a);var b=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CONTENT);return!!a&&goog.dom.classlist.contains(a,b)};goog.ui.MenuItemRenderer.prototype.createContent=function(a,b){var c=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CONTENT);return b.createDom("DIV",c,a)};
goog.ui.MenuItemRenderer.prototype.setSelectable=function(a,b,c){a&&b&&this.setEnableCheckBoxStructure(a,b,c)};goog.ui.MenuItemRenderer.prototype.setCheckable=function(a,b,c){a&&b&&this.setEnableCheckBoxStructure(a,b,c)};goog.ui.MenuItemRenderer.prototype.hasCheckBoxStructure=function(a){if(a=this.getContentElement(a)){a=a.firstChild;var b=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CHECKBOX);return!!a&&goog.dom.isElement(a)&&goog.dom.classlist.contains(a,b)}return!1};
goog.ui.MenuItemRenderer.prototype.setEnableCheckBoxStructure=function(a,b,c){this.setAriaRole(b,a.getPreferredAriaRole());this.setAriaStates(a,b);c!=this.hasCheckBoxStructure(b)&&(goog.dom.classlist.enable(b,"goog-option",c),b=this.getContentElement(b),c?(c=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CHECKBOX),b.insertBefore(a.getDomHelper().createDom("DIV",c),b.firstChild||null)):b.removeChild(b.firstChild))};
goog.ui.MenuItemRenderer.prototype.getClassForState=function(a){switch(a){case goog.ui.Component.State.HOVER:return this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.HOVER);case goog.ui.Component.State.CHECKED:case goog.ui.Component.State.SELECTED:return"goog-option-selected";default:return goog.ui.MenuItemRenderer.superClass_.getClassForState.call(this,a)}};
goog.ui.MenuItemRenderer.prototype.getStateFromClass=function(a){var b=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.HOVER);switch(a){case "goog-option-selected":return goog.ui.Component.State.CHECKED;case b:return goog.ui.Component.State.HOVER;default:return goog.ui.MenuItemRenderer.superClass_.getStateFromClass.call(this,a)}};goog.ui.MenuItemRenderer.prototype.getCssClass=function(){return goog.ui.MenuItemRenderer.CSS_CLASS};goog.ui.MenuItem=function(a,b,c,d){goog.ui.Control.call(this,a,d||goog.ui.MenuItemRenderer.getInstance(),c);this.setValue(b)};goog.inherits(goog.ui.MenuItem,goog.ui.Control);goog.tagUnsealableClass(goog.ui.MenuItem);goog.ui.MenuItem.MNEMONIC_WRAPPER_CLASS_="goog-menuitem-mnemonic-separator";goog.ui.MenuItem.ACCELERATOR_CLASS="goog-menuitem-accel";goog.ui.MenuItem.prototype.getValue=function(){var a=this.getModel();return null!=a?a:this.getCaption()};goog.ui.MenuItem.prototype.setValue=function(a){this.setModel(a)};
goog.ui.MenuItem.prototype.setSupportedState=function(a,b){goog.ui.MenuItem.superClass_.setSupportedState.call(this,a,b);switch(a){case goog.ui.Component.State.SELECTED:this.setSelectableInternal_(b);break;case goog.ui.Component.State.CHECKED:this.setCheckableInternal_(b)}};goog.ui.MenuItem.prototype.setSelectable=function(a){this.setSupportedState(goog.ui.Component.State.SELECTED,a)};
goog.ui.MenuItem.prototype.setSelectableInternal_=function(a){this.isChecked()&&!a&&this.setChecked(!1);var b=this.getElement();b&&this.getRenderer().setSelectable(this,b,a)};goog.ui.MenuItem.prototype.setCheckable=function(a){this.setSupportedState(goog.ui.Component.State.CHECKED,a)};goog.ui.MenuItem.prototype.setCheckableInternal_=function(a){var b=this.getElement();b&&this.getRenderer().setCheckable(this,b,a)};
goog.ui.MenuItem.prototype.getCaption=function(){var a=this.getContent();if(goog.isArray(a)){var b=goog.ui.MenuItem.ACCELERATOR_CLASS,c=goog.ui.MenuItem.MNEMONIC_WRAPPER_CLASS_;a=goog.array.map(a,function(a){return goog.dom.isElement(a)&&(goog.dom.classlist.contains(a,b)||goog.dom.classlist.contains(a,c))?"":goog.dom.getRawTextContent(a)}).join("");return goog.string.collapseBreakingSpaces(a)}return goog.ui.MenuItem.superClass_.getCaption.call(this)};
goog.ui.MenuItem.prototype.getAccelerator=function(){var a=this.getDomHelper(),b=this.getContent();return goog.isArray(b)&&(b=goog.array.find(b,function(a){return goog.dom.classlist.contains(a,goog.ui.MenuItem.ACCELERATOR_CLASS)}))?a.getTextContent(b):null};
goog.ui.MenuItem.prototype.handleMouseUp=function(a){var b=this.getParent();if(b){var c=b.openingCoords;b.openingCoords=null;if(c&&goog.isNumber(a.clientX)&&(b=new goog.math.Coordinate(a.clientX,a.clientY),goog.math.Coordinate.equals(c,b)))return}goog.ui.MenuItem.superClass_.handleMouseUp.call(this,a)};goog.ui.MenuItem.prototype.handleKeyEventInternal=function(a){return a.keyCode==this.getMnemonic()&&this.performActionInternal(a)?!0:goog.ui.MenuItem.superClass_.handleKeyEventInternal.call(this,a)};
goog.ui.MenuItem.prototype.setMnemonic=function(a){this.mnemonicKey_=a};goog.ui.MenuItem.prototype.getMnemonic=function(){return this.mnemonicKey_};goog.ui.registry.setDecoratorByClassName(goog.ui.MenuItemRenderer.CSS_CLASS,function(){return new goog.ui.MenuItem(null)});
goog.ui.MenuItem.prototype.getPreferredAriaRole=function(){return this.isSupportedState(goog.ui.Component.State.CHECKED)?goog.a11y.aria.Role.MENU_ITEM_CHECKBOX:this.isSupportedState(goog.ui.Component.State.SELECTED)?goog.a11y.aria.Role.MENU_ITEM_RADIO:goog.ui.MenuItem.superClass_.getPreferredAriaRole.call(this)};goog.ui.MenuItem.prototype.getParent=function(){return goog.ui.Control.prototype.getParent.call(this)};goog.ui.MenuItem.prototype.getParentEventTarget=function(){return goog.ui.Control.prototype.getParentEventTarget.call(this)};goog.ui.MenuSeparatorRenderer=function(){goog.ui.ControlRenderer.call(this)};goog.inherits(goog.ui.MenuSeparatorRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.MenuSeparatorRenderer);goog.ui.MenuSeparatorRenderer.CSS_CLASS="goog-menuseparator";goog.ui.MenuSeparatorRenderer.prototype.createDom=function(a){return a.getDomHelper().createDom("DIV",this.getCssClass())};
goog.ui.MenuSeparatorRenderer.prototype.decorate=function(a,b){b.id&&a.setId(b.id);if("HR"==b.tagName){var c=b;b=this.createDom(a);goog.dom.insertSiblingBefore(b,c);goog.dom.removeNode(c)}else goog.dom.classlist.add(b,this.getCssClass());return b};goog.ui.MenuSeparatorRenderer.prototype.setContent=function(a,b){};goog.ui.MenuSeparatorRenderer.prototype.getCssClass=function(){return goog.ui.MenuSeparatorRenderer.CSS_CLASS};goog.ui.Separator=function(a,b){goog.ui.Control.call(this,null,a||goog.ui.MenuSeparatorRenderer.getInstance(),b);this.setSupportedState(goog.ui.Component.State.DISABLED,!1);this.setSupportedState(goog.ui.Component.State.HOVER,!1);this.setSupportedState(goog.ui.Component.State.ACTIVE,!1);this.setSupportedState(goog.ui.Component.State.FOCUSED,!1);this.setStateInternal(goog.ui.Component.State.DISABLED)};goog.inherits(goog.ui.Separator,goog.ui.Control);
goog.ui.Separator.prototype.enterDocument=function(){goog.ui.Separator.superClass_.enterDocument.call(this);var a=this.getElement();goog.asserts.assert(a,"The DOM element for the separator cannot be null.");goog.a11y.aria.setRole(a,"separator")};goog.ui.registry.setDecoratorByClassName(goog.ui.MenuSeparatorRenderer.CSS_CLASS,function(){return new goog.ui.Separator});goog.ui.MenuRenderer=function(a){goog.ui.ContainerRenderer.call(this,a||goog.a11y.aria.Role.MENU)};goog.inherits(goog.ui.MenuRenderer,goog.ui.ContainerRenderer);goog.addSingletonGetter(goog.ui.MenuRenderer);goog.ui.MenuRenderer.CSS_CLASS="goog-menu";goog.ui.MenuRenderer.prototype.canDecorate=function(a){return"UL"==a.tagName||goog.ui.MenuRenderer.superClass_.canDecorate.call(this,a)};
goog.ui.MenuRenderer.prototype.getDecoratorForChild=function(a){return"HR"==a.tagName?new goog.ui.Separator:goog.ui.MenuRenderer.superClass_.getDecoratorForChild.call(this,a)};goog.ui.MenuRenderer.prototype.containsElement=function(a,b){return goog.dom.contains(a.getElement(),b)};goog.ui.MenuRenderer.prototype.getCssClass=function(){return goog.ui.MenuRenderer.CSS_CLASS};
goog.ui.MenuRenderer.prototype.initializeDom=function(a){goog.ui.MenuRenderer.superClass_.initializeDom.call(this,a);a=a.getElement();goog.asserts.assert(a,"The menu DOM element cannot be null.");goog.a11y.aria.setState(a,goog.a11y.aria.State.HASPOPUP,"true")};goog.ui.MenuSeparator=function(a){goog.ui.Separator.call(this,goog.ui.MenuSeparatorRenderer.getInstance(),a)};goog.inherits(goog.ui.MenuSeparator,goog.ui.Separator);goog.ui.registry.setDecoratorByClassName(goog.ui.MenuSeparatorRenderer.CSS_CLASS,function(){return new goog.ui.Separator});goog.ui.Menu=function(a,b){goog.ui.Container.call(this,goog.ui.Container.Orientation.VERTICAL,b||goog.ui.MenuRenderer.getInstance(),a);this.setFocusable(!1)};goog.inherits(goog.ui.Menu,goog.ui.Container);goog.tagUnsealableClass(goog.ui.Menu);goog.ui.Menu.EventType={BEFORE_SHOW:goog.ui.Component.EventType.BEFORE_SHOW,SHOW:goog.ui.Component.EventType.SHOW,BEFORE_HIDE:goog.ui.Component.EventType.HIDE,HIDE:goog.ui.Component.EventType.HIDE};goog.ui.Menu.CSS_CLASS=goog.ui.MenuRenderer.CSS_CLASS;
goog.ui.Menu.prototype.allowAutoFocus_=!0;goog.ui.Menu.prototype.allowHighlightDisabled_=!1;goog.ui.Menu.prototype.getCssClass=function(){return this.getRenderer().getCssClass()};goog.ui.Menu.prototype.containsElement=function(a){if(this.getRenderer().containsElement(this,a))return!0;for(var b=0,c=this.getChildCount();b<c;b++){var d=this.getChildAt(b);if("function"==typeof d.containsElement&&d.containsElement(a))return!0}return!1};goog.ui.Menu.prototype.addItem=function(a){this.addChild(a,!0)};
goog.ui.Menu.prototype.addItemAt=function(a,b){this.addChildAt(a,b,!0)};goog.ui.Menu.prototype.removeItem=function(a){(a=this.removeChild(a,!0))&&a.dispose()};goog.ui.Menu.prototype.removeItemAt=function(a){(a=this.removeChildAt(a,!0))&&a.dispose()};goog.ui.Menu.prototype.getItemAt=function(a){return this.getChildAt(a)};goog.ui.Menu.prototype.getItemCount=function(){return this.getChildCount()};goog.ui.Menu.prototype.getItems=function(){var a=[];this.forEachChild(function(b){a.push(b)});return a};
goog.ui.Menu.prototype.setPosition=function(a,b){var c=this.isVisible();c||goog.style.setElementShown(this.getElement(),!0);goog.style.setPageOffset(this.getElement(),a,b);c||goog.style.setElementShown(this.getElement(),!1)};goog.ui.Menu.prototype.getPosition=function(){return this.isVisible()?goog.style.getPageOffset(this.getElement()):null};goog.ui.Menu.prototype.setAllowAutoFocus=function(a){(this.allowAutoFocus_=a)&&this.setFocusable(!0)};goog.ui.Menu.prototype.getAllowAutoFocus=function(){return this.allowAutoFocus_};
goog.ui.Menu.prototype.setAllowHighlightDisabled=function(a){this.allowHighlightDisabled_=a};goog.ui.Menu.prototype.getAllowHighlightDisabled=function(){return this.allowHighlightDisabled_};goog.ui.Menu.prototype.setVisible=function(a,b,c){(b=goog.ui.Menu.superClass_.setVisible.call(this,a,b))&&a&&this.isInDocument()&&this.allowAutoFocus_&&this.getKeyEventTarget().focus();a&&c&&goog.isNumber(c.clientX)?this.openingCoords=new goog.math.Coordinate(c.clientX,c.clientY):this.openingCoords=null;return b};
goog.ui.Menu.prototype.handleEnterItem=function(a){this.allowAutoFocus_&&this.getKeyEventTarget().focus();return goog.ui.Menu.superClass_.handleEnterItem.call(this,a)};goog.ui.Menu.prototype.highlightNextPrefix=function(a){var b=new RegExp("^"+goog.string.regExpEscape(a),"i");return this.highlightHelper(function(a,d){var c=0>a?0:a,f=!1;do{++a;a==d&&(a=0,f=!0);var g=this.getChildAt(a).getCaption();if(g&&g.match(b))return a}while(!f||a!=c);return this.getHighlightedIndex()},this.getHighlightedIndex())};
goog.ui.Menu.prototype.canHighlightItem=function(a){return(this.allowHighlightDisabled_||a.isEnabled())&&a.isVisible()&&a.isSupportedState(goog.ui.Component.State.HOVER)};goog.ui.Menu.prototype.decorateInternal=function(a){this.decorateContent(a);goog.ui.Menu.superClass_.decorateInternal.call(this,a)};
goog.ui.Menu.prototype.handleKeyEventInternal=function(a){var b=goog.ui.Menu.superClass_.handleKeyEventInternal.call(this,a);b||this.forEachChild(function(c){!b&&c.getMnemonic&&c.getMnemonic()==a.keyCode&&(this.isEnabled()&&this.setHighlighted(c),b=c.handleKeyEvent(a))},this);return b};goog.ui.Menu.prototype.setHighlightedIndex=function(a){goog.ui.Menu.superClass_.setHighlightedIndex.call(this,a);(a=this.getChildAt(a))&&goog.style.scrollIntoContainerView(a.getElement(),this.getElement())};
goog.ui.Menu.prototype.decorateContent=function(a){var b=this.getRenderer();a=this.getDomHelper().getElementsByTagNameAndClass("DIV",b.getCssClass()+"-content",a);for(var c=a.length,d=0;d<c;d++)b.decorateChildren(this,a[d])};goog.ui.PopupBase=function(a,b){goog.events.EventTarget.call(this);this.handler_=new goog.events.EventHandler(this);this.setElement(a||null);b&&this.setType(b)};goog.inherits(goog.ui.PopupBase,goog.events.EventTarget);goog.tagUnsealableClass(goog.ui.PopupBase);goog.ui.PopupBase.Type={TOGGLE_DISPLAY:"toggle_display",MOVE_OFFSCREEN:"move_offscreen"};goog.ui.PopupBase.prototype.element_=null;goog.ui.PopupBase.prototype.autoHide_=!0;goog.ui.PopupBase.prototype.autoHidePartners_=null;
goog.ui.PopupBase.prototype.autoHideRegion_=null;goog.ui.PopupBase.prototype.isVisible_=!1;goog.ui.PopupBase.prototype.shouldHideAsync_=!1;goog.ui.PopupBase.prototype.lastShowTime_=-1;goog.ui.PopupBase.prototype.lastHideTime_=-1;goog.ui.PopupBase.prototype.hideOnEscape_=!1;goog.ui.PopupBase.prototype.enableCrossIframeDismissal_=!0;goog.ui.PopupBase.prototype.type_=goog.ui.PopupBase.Type.TOGGLE_DISPLAY;goog.ui.PopupBase.EventType={BEFORE_SHOW:"beforeshow",SHOW:"show",BEFORE_HIDE:"beforehide",HIDE:"hide"};
goog.ui.PopupBase.DEBOUNCE_DELAY_MS=150;goog.ui.PopupBase.prototype.getType=function(){return this.type_};goog.ui.PopupBase.prototype.setType=function(a){this.type_=a};goog.ui.PopupBase.prototype.shouldHideAsync=function(){return this.shouldHideAsync_};goog.ui.PopupBase.prototype.setShouldHideAsync=function(a){this.shouldHideAsync_=a};goog.ui.PopupBase.prototype.getElement=function(){return this.element_};goog.ui.PopupBase.prototype.setElement=function(a){this.ensureNotVisible_();this.element_=a};
goog.ui.PopupBase.prototype.getAutoHide=function(){return this.autoHide_};goog.ui.PopupBase.prototype.setAutoHide=function(a){this.ensureNotVisible_();this.autoHide_=a};goog.ui.PopupBase.prototype.addAutoHidePartner=function(a){this.autoHidePartners_||(this.autoHidePartners_=[]);goog.array.insert(this.autoHidePartners_,a)};goog.ui.PopupBase.prototype.removeAutoHidePartner=function(a){this.autoHidePartners_&&goog.array.remove(this.autoHidePartners_,a)};goog.ui.PopupBase.prototype.getHideOnEscape=function(){return this.hideOnEscape_};
goog.ui.PopupBase.prototype.setHideOnEscape=function(a){this.ensureNotVisible_();this.hideOnEscape_=a};goog.ui.PopupBase.prototype.getEnableCrossIframeDismissal=function(){return this.enableCrossIframeDismissal_};goog.ui.PopupBase.prototype.setEnableCrossIframeDismissal=function(a){this.enableCrossIframeDismissal_=a};goog.ui.PopupBase.prototype.getAutoHideRegion=function(){return this.autoHideRegion_};goog.ui.PopupBase.prototype.setAutoHideRegion=function(a){this.autoHideRegion_=a};
goog.ui.PopupBase.prototype.setTransition=function(a,b){this.showTransition_=a;this.hideTransition_=b};goog.ui.PopupBase.prototype.getLastShowTime=function(){return this.lastShowTime_};goog.ui.PopupBase.prototype.getLastHideTime=function(){return this.lastHideTime_};goog.ui.PopupBase.prototype.getHandler=function(){return this.handler_};goog.ui.PopupBase.prototype.ensureNotVisible_=function(){if(this.isVisible_)throw Error("Can not change this state of the popup while showing.");};
goog.ui.PopupBase.prototype.isVisible=function(){return this.isVisible_};goog.ui.PopupBase.prototype.isOrWasRecentlyVisible=function(){return this.isVisible_||goog.now()-this.lastHideTime_<goog.ui.PopupBase.DEBOUNCE_DELAY_MS};goog.ui.PopupBase.prototype.setVisible=function(a){this.showTransition_&&this.showTransition_.stop();this.hideTransition_&&this.hideTransition_.stop();a?this.show_():this.hide_()};goog.ui.PopupBase.prototype.reposition=goog.nullFunction;
goog.ui.PopupBase.prototype.show_=function(){if(!this.isVisible_&&this.onBeforeShow()){if(!this.element_)throw Error("Caller must call setElement before trying to show the popup");this.reposition();var a=goog.dom.getOwnerDocument(this.element_);this.hideOnEscape_&&this.handler_.listen(a,goog.events.EventType.KEYDOWN,this.onDocumentKeyDown_,!0);if(this.autoHide_)if(this.handler_.listen(a,goog.events.EventType.MOUSEDOWN,this.onDocumentMouseDown_,!0),goog.userAgent.IE){try{var b=a.activeElement}catch(d){}for(;b&&
"IFRAME"==b.nodeName;){try{var c=goog.dom.getFrameContentDocument(b)}catch(d){break}a=c;b=a.activeElement}this.handler_.listen(a,goog.events.EventType.MOUSEDOWN,this.onDocumentMouseDown_,!0);this.handler_.listen(a,goog.events.EventType.DEACTIVATE,this.onDocumentBlur_)}else this.handler_.listen(a,goog.events.EventType.BLUR,this.onDocumentBlur_);this.type_==goog.ui.PopupBase.Type.TOGGLE_DISPLAY?this.showPopupElement():this.type_==goog.ui.PopupBase.Type.MOVE_OFFSCREEN&&this.reposition();this.isVisible_=
!0;this.lastShowTime_=goog.now();this.lastHideTime_=-1;if(this.showTransition_)goog.events.listenOnce(this.showTransition_,goog.fx.Transition.EventType.END,this.onShow,!1,this),this.showTransition_.play();else this.onShow()}};
goog.ui.PopupBase.prototype.hide_=function(a){if(!this.isVisible_||!this.onBeforeHide(a))return!1;this.handler_&&this.handler_.removeAll();this.isVisible_=!1;this.lastHideTime_=goog.now();this.hideTransition_?(goog.events.listenOnce(this.hideTransition_,goog.fx.Transition.EventType.END,goog.partial(this.continueHidingPopup_,a),!1,this),this.hideTransition_.play()):this.continueHidingPopup_(a);return!0};
goog.ui.PopupBase.prototype.continueHidingPopup_=function(a){this.type_==goog.ui.PopupBase.Type.TOGGLE_DISPLAY?this.shouldHideAsync_?goog.Timer.callOnce(this.hidePopupElement,0,this):this.hidePopupElement():this.type_==goog.ui.PopupBase.Type.MOVE_OFFSCREEN&&this.moveOffscreen_();this.onHide(a)};goog.ui.PopupBase.prototype.showPopupElement=function(){this.element_.style.visibility="visible";goog.style.setElementShown(this.element_,!0)};
goog.ui.PopupBase.prototype.hidePopupElement=function(){this.element_.style.visibility="hidden";goog.style.setElementShown(this.element_,!1)};goog.ui.PopupBase.prototype.moveOffscreen_=function(){this.element_.style.top="-10000px"};goog.ui.PopupBase.prototype.onBeforeShow=function(){return this.dispatchEvent(goog.ui.PopupBase.EventType.BEFORE_SHOW)};goog.ui.PopupBase.prototype.onShow=function(){this.dispatchEvent(goog.ui.PopupBase.EventType.SHOW)};
goog.ui.PopupBase.prototype.onBeforeHide=function(a){return this.dispatchEvent({type:goog.ui.PopupBase.EventType.BEFORE_HIDE,target:a})};goog.ui.PopupBase.prototype.onHide=function(a){this.dispatchEvent({type:goog.ui.PopupBase.EventType.HIDE,target:a})};goog.ui.PopupBase.prototype.onDocumentMouseDown_=function(a){a=a.target;goog.dom.contains(this.element_,a)||this.isOrWithinAutoHidePartner_(a)||!this.isWithinAutoHideRegion_(a)||this.shouldDebounce_()||this.hide_(a)};
goog.ui.PopupBase.prototype.onDocumentKeyDown_=function(a){a.keyCode==goog.events.KeyCodes.ESC&&this.hide_(a.target)&&(a.preventDefault(),a.stopPropagation())};goog.ui.PopupBase.prototype.onDocumentBlur_=function(a){if(this.enableCrossIframeDismissal_){var b=goog.dom.getOwnerDocument(this.element_);if("undefined"!=typeof document.activeElement){if(a=b.activeElement,!a||goog.dom.contains(this.element_,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;this.shouldDebounce_()||this.hide_()}};
goog.ui.PopupBase.prototype.isOrWithinAutoHidePartner_=function(a){return goog.array.some(this.autoHidePartners_||[],function(b){return a===b||goog.dom.contains(b,a)})};goog.ui.PopupBase.prototype.isWithinAutoHideRegion_=function(a){return this.autoHideRegion_?goog.dom.contains(this.autoHideRegion_,a):!0};goog.ui.PopupBase.prototype.shouldDebounce_=function(){return goog.now()-this.lastShowTime_<goog.ui.PopupBase.DEBOUNCE_DELAY_MS};
goog.ui.PopupBase.prototype.disposeInternal=function(){goog.ui.PopupBase.superClass_.disposeInternal.call(this);this.handler_.dispose();goog.dispose(this.showTransition_);goog.dispose(this.hideTransition_);delete this.element_;delete this.handler_;delete this.autoHidePartners_};goog.ui.PopupMenu=function(a,b){goog.ui.Menu.call(this,a,b);this.setAllowAutoFocus(!0);this.setVisible(!1,!0);this.targets_=new goog.structs.Map};goog.inherits(goog.ui.PopupMenu,goog.ui.Menu);goog.tagUnsealableClass(goog.ui.PopupMenu);goog.ui.PopupMenu.prototype.toggleMode_=!1;goog.ui.PopupMenu.prototype.lastHide_=0;goog.ui.PopupMenu.prototype.currentAnchor_=null;
goog.ui.PopupMenu.prototype.decorateInternal=function(a){goog.ui.PopupMenu.superClass_.decorateInternal.call(this,a);(a=a.getAttribute("for")||a.htmlFor)&&this.attach(this.getDomHelper().getElement(a),goog.positioning.Corner.BOTTOM_LEFT)};
goog.ui.PopupMenu.prototype.enterDocument=function(){goog.ui.PopupMenu.superClass_.enterDocument.call(this);this.targets_.forEach(this.attachEvent_,this);var a=this.getHandler();a.listen(this,goog.ui.Component.EventType.ACTION,this.onAction_);a.listen(this.getDomHelper().getDocument(),goog.events.EventType.MOUSEDOWN,this.onDocClick,!0)};
goog.ui.PopupMenu.prototype.attach=function(a,b,c,d,e){this.isAttachTarget(a)||(b=this.createAttachTarget(a,b,c,d,e),this.isInDocument()&&this.attachEvent_(b),a=goog.partial(this.onMenuKeyboardAction_,a),this.getElement()&&this.getHandler().listen(this.getElement(),goog.events.EventType.KEYDOWN,a))};
goog.ui.PopupMenu.prototype.onMenuKeyboardAction_=function(a,b){if(b.keyCode==goog.events.KeyCodes.ESC)a.focus();else if(a=this.getChildAt(this.getHighlightedIndex())){a=a.getElement();var c=new goog.events.BrowserEvent(b.getBrowserEvent(),a);c.target=a;b.keyCode!=goog.events.KeyCodes.SPACE&&b.keyCode!=goog.events.KeyCodes.ENTER||goog.events.fireListeners(a,goog.events.EventType.KEYDOWN,!1,c);b.keyCode==goog.events.KeyCodes.SPACE&&this.hide()}};
goog.ui.PopupMenu.prototype.createAttachTarget=function(a,b,c,d,e){if(!a)return null;b={element_:a,targetCorner_:b,menuCorner_:c,eventType_:d?goog.events.EventType.CONTEXTMENU:goog.events.EventType.MOUSEDOWN,margin_:e};this.targets_.set(goog.getUid(a),b);return b};goog.ui.PopupMenu.prototype.getAttachTarget=function(a){return a?this.targets_.get(goog.getUid(a)):null};goog.ui.PopupMenu.prototype.isAttachTarget=function(a){return a?this.targets_.containsKey(goog.getUid(a)):!1};
goog.ui.PopupMenu.prototype.getAttachedElement=function(){return this.currentAnchor_};goog.ui.PopupMenu.prototype.attachEvent_=function(a){this.getHandler().listen(a.element_,a.eventType_,this.onTargetClick_);a.eventType_!=goog.events.EventType.CONTEXTMENU&&this.getHandler().listen(a.element_,goog.events.EventType.KEYDOWN,this.onTargetKeyboardAction_)};
goog.ui.PopupMenu.prototype.detachAll=function(){if(this.isInDocument())for(var a=this.targets_.getKeys(),b=0;b<a.length;b++)this.detachEvent_(this.targets_.get(a[b]));this.targets_.clear()};goog.ui.PopupMenu.prototype.detach=function(a){if(!this.isAttachTarget(a))throw Error("Menu not attached to provided element, unable to detach.");a=goog.getUid(a);this.isInDocument()&&this.detachEvent_(this.targets_.get(a));this.targets_.remove(a)};
goog.ui.PopupMenu.prototype.detachEvent_=function(a){this.getHandler().unlisten(a.element_,a.eventType_,this.onTargetClick_)};goog.ui.PopupMenu.prototype.setToggleMode=function(a){this.toggleMode_=a};goog.ui.PopupMenu.prototype.getToggleMode=function(){return this.toggleMode_};
goog.ui.PopupMenu.prototype.showWithPosition=function(a,b,c,d){var e=this.isVisible();this.isOrWasRecentlyVisible()&&this.toggleMode_?this.hide():(this.currentAnchor_=d||null,this.dispatchEvent(goog.ui.Component.EventType.BEFORE_SHOW)&&(b="undefined"!=typeof b?b:goog.positioning.Corner.TOP_START,e||(this.getElement().style.visibility="hidden"),goog.style.setElementShown(this.getElement(),!0),a.reposition(this.getElement(),b,c),e||(this.getElement().style.visibility="visible"),this.setHighlightedIndex(-1),
this.setVisible(!0)))};goog.ui.PopupMenu.prototype.showMenu=function(a,b,c){b=goog.isDef(a.targetCorner_)?new goog.positioning.AnchoredViewportPosition(a.element_,a.targetCorner_,!0):new goog.positioning.ViewportClientPosition(b,c);b.setLastResortOverflow&&b.setLastResortOverflow(goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.ADJUST_Y);this.showWithPosition(b,a.menuCorner_,a.margin_,a.element_)};
goog.ui.PopupMenu.prototype.showAt=function(a,b,c){this.showWithPosition(new goog.positioning.ViewportClientPosition(a,b),c)};goog.ui.PopupMenu.prototype.showAtElement=function(a,b,c){this.showWithPosition(new goog.positioning.MenuAnchoredPosition(a,b,!0),c,null,a)};goog.ui.PopupMenu.prototype.hide=function(){this.isVisible()&&(this.setVisible(!1),this.isVisible()||(this.lastHide_=goog.now(),this.currentAnchor_=null))};
goog.ui.PopupMenu.prototype.isOrWasRecentlyVisible=function(){return this.isVisible()||this.wasRecentlyHidden()};goog.ui.PopupMenu.prototype.wasRecentlyHidden=function(){return goog.now()-this.lastHide_<goog.ui.PopupBase.DEBOUNCE_DELAY_MS};goog.ui.PopupMenu.prototype.onAction_=function(a){this.hide()};goog.ui.PopupMenu.prototype.onTargetClick_=function(a){this.onTargetActivation_(a)};
goog.ui.PopupMenu.prototype.onTargetKeyboardAction_=function(a){if(a.keyCode==goog.events.KeyCodes.SPACE||a.keyCode==goog.events.KeyCodes.ENTER||a.keyCode==goog.events.KeyCodes.DOWN)this.onTargetActivation_(a);a.keyCode==goog.events.KeyCodes.DOWN&&this.highlightFirst()};
goog.ui.PopupMenu.prototype.onTargetActivation_=function(a){for(var b=this.targets_.getKeys(),c=0;c<b.length;c++){var d=this.targets_.get(b[c]);if(d.element_==a.currentTarget){this.showMenu(d,a.clientX,a.clientY);a.preventDefault();a.stopPropagation();break}}};goog.ui.PopupMenu.prototype.onDocClick=function(a){this.isVisible()&&!this.containsElement(a.target)&&this.hide()};goog.ui.PopupMenu.prototype.handleBlur=function(a){goog.ui.PopupMenu.superClass_.handleBlur.call(this,a);this.hide()};
goog.ui.PopupMenu.prototype.disposeInternal=function(){goog.ui.PopupMenu.superClass_.disposeInternal.call(this);this.targets_&&(this.targets_.clear(),delete this.targets_)};goog.async.Debouncer=function(a,b,c){goog.Disposable.call(this);this.listener_=null!=c?goog.bind(a,c):a;this.interval_=b;this.callback_=goog.bind(this.onTimer_,this);this.shouldFire_=!1;this.pauseCount_=0;this.refireAt_=this.timer_=null;this.args_=[]};goog.inherits(goog.async.Debouncer,goog.Disposable);goog.async.Debouncer.prototype.fire=function(a){this.args_=arguments;this.shouldFire_=!1;this.timer_?this.refireAt_=goog.now()+this.interval_:this.timer_=goog.Timer.callOnce(this.callback_,this.interval_)};
goog.async.Debouncer.prototype.stop=function(){this.timer_&&(goog.Timer.clear(this.timer_),this.timer_=null);this.refireAt_=null;this.shouldFire_=!1;this.args_=[]};goog.async.Debouncer.prototype.pause=function(){++this.pauseCount_};goog.async.Debouncer.prototype.resume=function(){this.pauseCount_&&(--this.pauseCount_,!this.pauseCount_&&this.shouldFire_&&this.doAction_())};goog.async.Debouncer.prototype.disposeInternal=function(){this.stop();goog.async.Debouncer.superClass_.disposeInternal.call(this)};
goog.async.Debouncer.prototype.onTimer_=function(){this.refireAt_?(this.timer_=goog.Timer.callOnce(this.callback_,this.refireAt_-goog.now()),this.refireAt_=null):(this.timer_=null,this.pauseCount_?this.shouldFire_=!0:this.doAction_())};goog.async.Debouncer.prototype.doAction_=function(){this.shouldFire_=!1;this.listener_.apply(null,this.args_)};goog.fx.Dragger=function(a,b,c){goog.events.EventTarget.call(this);this.target=a;this.handle=b||a;this.limits=c||new goog.math.Rect(NaN,NaN,NaN,NaN);this.document_=goog.dom.getOwnerDocument(a);this.eventHandler_=new goog.events.EventHandler(this);this.registerDisposable(this.eventHandler_);this.deltaY=this.deltaX=this.startY=this.startX=this.screenY=this.screenX=this.clientY=this.clientX=0;this.enabled_=!0;this.dragging_=!1;this.preventMouseDown_=!0;this.hysteresisDistanceSquared_=0;this.useRightPositioningForRtl_=
this.ieDragStartCancellingOn_=!1;goog.events.listen(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,!1,this);this.useSetCapture_=goog.fx.Dragger.HAS_SET_CAPTURE_};goog.inherits(goog.fx.Dragger,goog.events.EventTarget);goog.tagUnsealableClass(goog.fx.Dragger);goog.fx.Dragger.HAS_SET_CAPTURE_=goog.global.document&&goog.global.document.documentElement&&!!goog.global.document.documentElement.setCapture&&!!goog.global.document.releaseCapture;
goog.fx.Dragger.cloneNode=function(a){for(var b=a.cloneNode(!0),c=goog.dom.getElementsByTagName("TEXTAREA",a),d=goog.dom.getElementsByTagName("TEXTAREA",b),e=0;e<c.length;e++)d[e].value=c[e].value;switch(a.tagName){case "TR":return goog.dom.createDom("TABLE",null,goog.dom.createDom("TBODY",null,b));case "TD":case "TH":return goog.dom.createDom("TABLE",null,goog.dom.createDom("TBODY",null,goog.dom.createDom("TR",null,b)));case "TEXTAREA":b.value=a.value;default:return b}};
goog.fx.Dragger.EventType={EARLY_CANCEL:"earlycancel",START:"start",BEFOREDRAG:"beforedrag",DRAG:"drag",END:"end"};goog.fx.Dragger.prototype.setAllowSetCapture=function(a){this.useSetCapture_=a&&goog.fx.Dragger.HAS_SET_CAPTURE_};goog.fx.Dragger.prototype.enableRightPositioningForRtl=function(a){this.useRightPositioningForRtl_=a};goog.fx.Dragger.prototype.getHandler=function(){return this.eventHandler_};goog.fx.Dragger.prototype.setLimits=function(a){this.limits=a||new goog.math.Rect(NaN,NaN,NaN,NaN)};
goog.fx.Dragger.prototype.setHysteresis=function(a){this.hysteresisDistanceSquared_=Math.pow(a,2)};goog.fx.Dragger.prototype.getHysteresis=function(){return Math.sqrt(this.hysteresisDistanceSquared_)};goog.fx.Dragger.prototype.setScrollTarget=function(a){this.scrollTarget_=a};goog.fx.Dragger.prototype.setCancelIeDragStart=function(a){this.ieDragStartCancellingOn_=a};goog.fx.Dragger.prototype.getEnabled=function(){return this.enabled_};
goog.fx.Dragger.prototype.setEnabled=function(a){this.enabled_=a};goog.fx.Dragger.prototype.setPreventMouseDown=function(a){this.preventMouseDown_=a};goog.fx.Dragger.prototype.disposeInternal=function(){goog.fx.Dragger.superClass_.disposeInternal.call(this);goog.events.unlisten(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,!1,this);this.cleanUpAfterDragging_();this.handle=this.target=null};
goog.fx.Dragger.prototype.isRightToLeft_=function(){goog.isDef(this.rightToLeft_)||(this.rightToLeft_=goog.style.isRightToLeft(this.target));return this.rightToLeft_};
goog.fx.Dragger.prototype.startDrag=function(a){var b=a.type==goog.events.EventType.MOUSEDOWN;if(!this.enabled_||this.dragging_||b&&!a.isMouseActionButton())this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL);else{if(0==this.hysteresisDistanceSquared_)if(this.fireDragStart_(a))this.dragging_=!0,this.preventMouseDown_&&b&&a.preventDefault();else return;else this.preventMouseDown_&&b&&a.preventDefault();this.setupDragHandlers();this.clientX=this.startX=a.clientX;this.clientY=this.startY=a.clientY;
this.screenX=a.screenX;this.screenY=a.screenY;this.computeInitialPosition();this.pageScroll=goog.dom.getDomHelper(this.document_).getDocumentScroll()}};
goog.fx.Dragger.prototype.setupDragHandlers=function(){var a=this.document_,b=a.documentElement,c=!this.useSetCapture_;this.eventHandler_.listen(a,[goog.events.EventType.TOUCHMOVE,goog.events.EventType.MOUSEMOVE],this.handleMove_,{capture:c,passive:!1});this.eventHandler_.listen(a,[goog.events.EventType.TOUCHEND,goog.events.EventType.MOUSEUP],this.endDrag,c);this.useSetCapture_?(b.setCapture(!1),this.eventHandler_.listen(b,goog.events.EventType.LOSECAPTURE,this.endDrag)):this.eventHandler_.listen(goog.dom.getWindow(a),
goog.events.EventType.BLUR,this.endDrag);goog.userAgent.IE&&this.ieDragStartCancellingOn_&&this.eventHandler_.listen(a,goog.events.EventType.DRAGSTART,goog.events.Event.preventDefault);this.scrollTarget_&&this.eventHandler_.listen(this.scrollTarget_,goog.events.EventType.SCROLL,this.onScroll_,c)};goog.fx.Dragger.prototype.fireDragStart_=function(a){return this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.START,this,a.clientX,a.clientY,a))};
goog.fx.Dragger.prototype.cleanUpAfterDragging_=function(){this.eventHandler_.removeAll();this.useSetCapture_&&this.document_.releaseCapture()};goog.fx.Dragger.prototype.endDrag=function(a,b){this.cleanUpAfterDragging_();if(this.dragging_){this.dragging_=!1;var c=this.limitX(this.deltaX),d=this.limitY(this.deltaY);this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.END,this,a.clientX,a.clientY,a,c,d,b||a.type==goog.events.EventType.TOUCHCANCEL))}else this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL)};
goog.fx.Dragger.prototype.endDragCancel=function(a){this.endDrag(a,!0)};
goog.fx.Dragger.prototype.handleMove_=function(a){if(this.enabled_){var b=(this.useRightPositioningForRtl_&&this.isRightToLeft_()?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.dragging_){var d=this.startX-this.clientX,e=this.startY-this.clientY;if(d*d+e*e>this.hysteresisDistanceSquared_)if(this.fireDragStart_(a))this.dragging_=!0;else{this.isDisposed()||this.endDrag(a);return}}c=this.calculatePosition_(b,
c);b=c.x;c=c.y;this.dragging_&&this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.BEFOREDRAG,this,a.clientX,a.clientY,a,b,c))&&(this.doDrag(a,b,c,!1),a.preventDefault())}};goog.fx.Dragger.prototype.calculatePosition_=function(a,b){var c=goog.dom.getDomHelper(this.document_).getDocumentScroll();a+=c.x-this.pageScroll.x;b+=c.y-this.pageScroll.y;this.pageScroll=c;this.deltaX+=a;this.deltaY+=b;a=this.limitX(this.deltaX);b=this.limitY(this.deltaY);return new goog.math.Coordinate(a,b)};
goog.fx.Dragger.prototype.onScroll_=function(a){var b=this.calculatePosition_(0,0);a.clientX=this.clientX;a.clientY=this.clientY;this.doDrag(a,b.x,b.y,!0)};goog.fx.Dragger.prototype.doDrag=function(a,b,c,d){this.defaultAction(b,c);this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.DRAG,this,a.clientX,a.clientY,a,b,c))};
goog.fx.Dragger.prototype.limitX=function(a){var b=this.limits,c=isNaN(b.left)?null:b.left;b=isNaN(b.width)?0:b.width;return Math.min(null!=c?c+b:Infinity,Math.max(null!=c?c:-Infinity,a))};goog.fx.Dragger.prototype.limitY=function(a){var b=this.limits,c=isNaN(b.top)?null:b.top;b=isNaN(b.height)?0:b.height;return Math.min(null!=c?c+b:Infinity,Math.max(null!=c?c:-Infinity,a))};
goog.fx.Dragger.prototype.computeInitialPosition=function(){this.deltaX=this.useRightPositioningForRtl_?goog.style.bidi.getOffsetStart(this.target):this.target.offsetLeft;this.deltaY=this.target.offsetTop};goog.fx.Dragger.prototype.defaultAction=function(a,b){this.useRightPositioningForRtl_&&this.isRightToLeft_()?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};goog.fx.Dragger.prototype.isDragging=function(){return this.dragging_};
goog.fx.DragEvent=function(a,b,c,d,e,f,g,h){goog.events.Event.call(this,a);this.clientX=c;this.clientY=d;this.browserEvent=e;this.left=goog.isDef(f)?f:b.deltaX;this.top=goog.isDef(g)?g:b.deltaY;this.dragger=b;this.dragCanceled=!!h};goog.inherits(goog.fx.DragEvent,goog.events.Event);goog.dom.animationFrame={};goog.dom.animationFrame.polyfill={};goog.dom.animationFrame.polyfill.ENABLED=!0;
goog.dom.animationFrame.polyfill.install=function(){if(goog.dom.animationFrame.polyfill.ENABLED){for(var a=["ms","moz","webkit","o"],b=0,c;c=a[b]&&!goog.global.requestAnimationFrame;++b)goog.global.requestAnimationFrame=goog.global[c+"RequestAnimationFrame"],goog.global.cancelAnimationFrame=goog.global[c+"CancelAnimationFrame"]||goog.global[c+"CancelRequestAnimationFrame"];if(!goog.global.requestAnimationFrame){var d=0;goog.global.requestAnimationFrame=function(a){var b=(new Date).getTime(),c=Math.max(0,
16-(b-d));d=b+c;return goog.global.setTimeout(function(){a(b+c)},c)};goog.global.cancelAnimationFrame||(goog.global.cancelAnimationFrame=function(a){clearTimeout(a)})}}};goog.dom.animationFrame.polyfill.install();goog.dom.animationFrame.State=function(){};goog.dom.animationFrame.tasks_=[[],[]];goog.dom.animationFrame.doubleBufferIndex_=0;goog.dom.animationFrame.requestedFrame_=!1;goog.dom.animationFrame.taskId_=0;goog.dom.animationFrame.running_=!1;
goog.dom.animationFrame.createTask=function(a,b){var c=goog.dom.animationFrame.taskId_++,d={measureTask:{id:c,fn:a.measure,context:b},mutateTask:{id:c,fn:a.mutate,context:b},state:{},args:void 0,isScheduled:!1};return function(){0<arguments.length?(d.args||(d.args=[]),d.args.length=0,d.args.push.apply(d.args,arguments),d.args.push(d.state)):d.args&&0!=d.args.length?(d.args[0]=d.state,d.args.length=1):d.args=[d.state];d.isScheduled||(d.isScheduled=!0,goog.dom.animationFrame.tasks_[goog.dom.animationFrame.doubleBufferIndex_].push(d));
goog.dom.animationFrame.requestAnimationFrame_()}};
goog.dom.animationFrame.runTasks_=function(){goog.dom.animationFrame.running_=!0;goog.dom.animationFrame.requestedFrame_=!1;var a=goog.dom.animationFrame.tasks_[goog.dom.animationFrame.doubleBufferIndex_],b=a.length;goog.dom.animationFrame.doubleBufferIndex_=(goog.dom.animationFrame.doubleBufferIndex_+1)%2;for(var c,d=0;d<b;++d){c=a[d];var e=c.measureTask;c.isScheduled=!1;e.fn&&e.fn.apply(e.context,c.args)}for(d=0;d<b;++d)c=a[d],e=c.mutateTask,c.isScheduled=!1,e.fn&&e.fn.apply(e.context,c.args),c.state=
{};a.length=0;goog.dom.animationFrame.running_=!1};goog.dom.animationFrame.isRunning=function(){return goog.dom.animationFrame.running_};goog.dom.animationFrame.requestAnimationFrame_=function(){goog.dom.animationFrame.requestedFrame_||(goog.dom.animationFrame.requestedFrame_=!0,window.requestAnimationFrame(goog.dom.animationFrame.runTasks_))};goog.dom.iframe={};goog.dom.iframe.BLANK_SOURCE_URL=goog.userAgent.IE?goog.html.TrustedResourceUrl.fromConstant(goog.string.Const.from('javascript:""')):goog.html.TrustedResourceUrl.fromConstant(goog.string.Const.from("about:blank"));goog.dom.iframe.BLANK_SOURCE=goog.html.TrustedResourceUrl.unwrap(goog.dom.iframe.BLANK_SOURCE_URL);goog.dom.iframe.BLANK_SOURCE_NEW_FRAME_URL=goog.userAgent.IE?goog.html.TrustedResourceUrl.fromConstant(goog.string.Const.from('javascript:""')):goog.html.TrustedResourceUrl.fromConstant(goog.string.Const.from("javascript:undefined"));
goog.dom.iframe.BLANK_SOURCE_NEW_FRAME=goog.html.TrustedResourceUrl.unwrap(goog.dom.iframe.BLANK_SOURCE_NEW_FRAME_URL);goog.dom.iframe.STYLES_="border:0;vertical-align:bottom;";goog.dom.iframe.createBlank=function(a,b){b=b?goog.html.SafeStyle.unwrap(b):"";a=a.createDom("IFRAME",{frameborder:0,style:goog.dom.iframe.STYLES_+b});goog.dom.safe.setIframeSrc(a,goog.dom.iframe.BLANK_SOURCE_URL);return a};
goog.dom.iframe.writeSafeContent=function(a,b){a=goog.dom.getFrameContentDocument(a);a.open();goog.dom.safe.documentWrite(a,b);a.close()};
goog.dom.iframe.createWithContent=function(a,b,c,d,e){var f=goog.dom.getDomHelper(a);b=goog.html.SafeHtml.create("html",{},goog.html.SafeHtml.concat(goog.html.SafeHtml.create("head",{},b),goog.html.SafeHtml.create("body",{},c)));e||(b=goog.html.SafeHtml.concat(goog.html.SafeHtml.DOCTYPE_HTML,b));d=goog.dom.iframe.createBlank(f,d);a.appendChild(d);goog.dom.iframe.writeSafeContent(d,b);return d};goog.events.FocusHandler=function(a){goog.events.EventTarget.call(this);this.element_=a;a=goog.userAgent.IE?"focusout":"blur";this.listenKeyIn_=goog.events.listen(this.element_,goog.userAgent.IE?"focusin":"focus",this,!goog.userAgent.IE);this.listenKeyOut_=goog.events.listen(this.element_,a,this,!goog.userAgent.IE)};goog.inherits(goog.events.FocusHandler,goog.events.EventTarget);goog.events.FocusHandler.EventType={FOCUSIN:"focusin",FOCUSOUT:"focusout"};
goog.events.FocusHandler.prototype.handleEvent=function(a){var b=a.getBrowserEvent();b=new goog.events.BrowserEvent(b);b.type="focusin"==a.type||"focus"==a.type?goog.events.FocusHandler.EventType.FOCUSIN:goog.events.FocusHandler.EventType.FOCUSOUT;this.dispatchEvent(b)};goog.events.FocusHandler.prototype.disposeInternal=function(){goog.events.FocusHandler.superClass_.disposeInternal.call(this);goog.events.unlistenByKey(this.listenKeyIn_);goog.events.unlistenByKey(this.listenKeyOut_);delete this.element_};goog.ui.ModalAriaVisibilityHelper=function(a,b){this.element_=a;this.dom_=b};
goog.ui.ModalAriaVisibilityHelper.prototype.setBackgroundVisibility=function(a){if(a){this.hiddenElements_||(this.hiddenElements_=[]);a=this.dom_.getChildren(this.dom_.getDocument().body);for(var b=0;b<a.length;b++){var c=a[b];c==this.element_||goog.a11y.aria.getState(c,goog.a11y.aria.State.HIDDEN)||(goog.a11y.aria.setState(c,goog.a11y.aria.State.HIDDEN,!0),this.hiddenElements_.push(c))}}else if(this.hiddenElements_){for(b=0;b<this.hiddenElements_.length;b++)goog.a11y.aria.removeState(this.hiddenElements_[b],
goog.a11y.aria.State.HIDDEN);this.hiddenElements_=null}};goog.ui.ModalPopup=function(a,b){goog.ui.Component.call(this,b);this.useIframeMask_=!!a;this.lastFocus_=null;this.resizeBackgroundTask_=goog.dom.animationFrame.createTask({mutate:this.resizeBackground_},this)};goog.inherits(goog.ui.ModalPopup,goog.ui.Component);goog.tagUnsealableClass(goog.ui.ModalPopup);goog.ui.ModalPopup.prototype.focusHandler_=null;goog.ui.ModalPopup.prototype.visible_=!1;goog.ui.ModalPopup.prototype.bgEl_=null;goog.ui.ModalPopup.prototype.bgIframeEl_=null;
goog.ui.ModalPopup.prototype.tabCatcherElement_=null;goog.ui.ModalPopup.prototype.backwardTabWrapInProgress_=!1;goog.ui.ModalPopup.prototype.getCssClass=function(){return"goog-modalpopup"};goog.ui.ModalPopup.prototype.getBackgroundIframe=function(){return this.bgIframeEl_};goog.ui.ModalPopup.prototype.getBackgroundElement=function(){return this.bgEl_};
goog.ui.ModalPopup.prototype.createDom=function(){goog.ui.ModalPopup.superClass_.createDom.call(this);var a=this.getElement();goog.asserts.assert(a);var b=goog.string.trim(this.getCssClass()).split(" ");goog.dom.classlist.addAll(a,b);goog.dom.setFocusableTabIndex(a,!0);goog.style.setElementShown(a,!1);this.manageBackgroundDom_();this.createTabCatcher_()};
goog.ui.ModalPopup.prototype.manageBackgroundDom_=function(){this.useIframeMask_&&!this.bgIframeEl_&&(this.bgIframeEl_=goog.dom.iframe.createBlank(this.getDomHelper()),this.bgIframeEl_.className=this.getCssClass()+"-bg",goog.style.setElementShown(this.bgIframeEl_,!1),goog.style.setOpacity(this.bgIframeEl_,0));this.bgEl_||(this.bgEl_=this.getDomHelper().createDom("DIV",this.getCssClass()+"-bg"),goog.style.setElementShown(this.bgEl_,!1))};
goog.ui.ModalPopup.prototype.createTabCatcher_=function(){this.tabCatcherElement_||(this.tabCatcherElement_=this.getDomHelper().createElement("SPAN"),goog.style.setElementShown(this.tabCatcherElement_,!1),goog.dom.setFocusableTabIndex(this.tabCatcherElement_,!0),this.tabCatcherElement_.style.position="absolute")};
goog.ui.ModalPopup.prototype.setupBackwardTabWrap=function(){this.backwardTabWrapInProgress_=!0;try{this.tabCatcherElement_.focus()}catch(a){}goog.Timer.callOnce(this.resetBackwardTabWrap_,0,this)};goog.ui.ModalPopup.prototype.resetBackwardTabWrap_=function(){this.backwardTabWrapInProgress_=!1};
goog.ui.ModalPopup.prototype.renderBackground_=function(){goog.asserts.assert(!!this.bgEl_,"Background element must not be null.");this.bgIframeEl_&&goog.dom.insertSiblingBefore(this.bgIframeEl_,this.getElement());goog.dom.insertSiblingBefore(this.bgEl_,this.getElement())};goog.ui.ModalPopup.prototype.canDecorate=function(a){return!!a&&"DIV"==a.tagName};
goog.ui.ModalPopup.prototype.decorateInternal=function(a){goog.ui.ModalPopup.superClass_.decorateInternal.call(this,a);a=goog.string.trim(this.getCssClass()).split(" ");goog.dom.classlist.addAll(goog.asserts.assert(this.getElement()),a);this.manageBackgroundDom_();this.createTabCatcher_();goog.dom.setFocusableTabIndex(this.getElement(),!0);goog.style.setElementShown(this.getElement(),!1)};
goog.ui.ModalPopup.prototype.enterDocument=function(){this.renderBackground_();goog.ui.ModalPopup.superClass_.enterDocument.call(this);goog.dom.insertSiblingAfter(this.tabCatcherElement_,this.getElement());this.focusHandler_=new goog.events.FocusHandler(this.getDomHelper().getDocument());this.getHandler().listen(this.focusHandler_,goog.events.FocusHandler.EventType.FOCUSIN,this.onFocus);this.setA11YDetectBackground(!1)};
goog.ui.ModalPopup.prototype.exitDocument=function(){this.isVisible()&&this.setVisible(!1);goog.dispose(this.focusHandler_);goog.ui.ModalPopup.superClass_.exitDocument.call(this);goog.dom.removeNode(this.bgIframeEl_);goog.dom.removeNode(this.bgEl_);goog.dom.removeNode(this.tabCatcherElement_)};
goog.ui.ModalPopup.prototype.setVisible=function(a){goog.asserts.assert(this.isInDocument(),"ModalPopup must be rendered first.");a!=this.visible_&&(this.popupShowTransition_&&this.popupShowTransition_.stop(),this.bgShowTransition_&&this.bgShowTransition_.stop(),this.popupHideTransition_&&this.popupHideTransition_.stop(),this.bgHideTransition_&&this.bgHideTransition_.stop(),this.isInDocument()&&this.setA11YDetectBackground(a),a?this.show_():this.hide_())};
goog.ui.ModalPopup.prototype.setA11YDetectBackground=function(a){this.modalAriaVisibilityHelper_||(this.modalAriaVisibilityHelper_=new goog.ui.ModalAriaVisibilityHelper(this.getElementStrict(),this.dom_));this.modalAriaVisibilityHelper_.setBackgroundVisibility(a)};goog.ui.ModalPopup.prototype.setTransition=function(a,b,c,d){this.popupShowTransition_=a;this.popupHideTransition_=b;this.bgShowTransition_=c;this.bgHideTransition_=d};
goog.ui.ModalPopup.prototype.show_=function(){if(this.dispatchEvent(goog.ui.PopupBase.EventType.BEFORE_SHOW)){try{this.lastFocus_=this.getDomHelper().getDocument().activeElement}catch(a){}this.resizeBackground_();this.reposition();this.getHandler().listen(this.getDomHelper().getWindow(),goog.events.EventType.RESIZE,this.resizeBackground_).listen(this.getDomHelper().getWindow(),goog.events.EventType.ORIENTATIONCHANGE,this.resizeBackgroundTask_);this.showPopupElement_(!0);this.focus();this.visible_=
!0;if(this.popupShowTransition_&&this.bgShowTransition_)goog.events.listenOnce(this.popupShowTransition_,goog.fx.Transition.EventType.END,this.onShow,!1,this),this.bgShowTransition_.play(),this.popupShowTransition_.play();else this.onShow()}};
goog.ui.ModalPopup.prototype.hide_=function(){if(this.dispatchEvent(goog.ui.PopupBase.EventType.BEFORE_HIDE)){this.getHandler().unlisten(this.getDomHelper().getWindow(),goog.events.EventType.RESIZE,this.resizeBackground_).unlisten(this.getDomHelper().getWindow(),goog.events.EventType.ORIENTATIONCHANGE,this.resizeBackgroundTask_);this.visible_=!1;if(this.popupHideTransition_&&this.bgHideTransition_)goog.events.listenOnce(this.popupHideTransition_,goog.fx.Transition.EventType.END,this.onHide,!1,this),
this.bgHideTransition_.play(),this.popupHideTransition_.play();else this.onHide();this.returnFocus_()}};goog.ui.ModalPopup.prototype.returnFocus_=function(){try{var a=this.getDomHelper(),b=a.getDocument().body,c=a.getDocument().activeElement||b;if(!this.lastFocus_||this.lastFocus_==b){this.lastFocus_=null;return}(c==b||a.contains(this.getElement(),c))&&this.lastFocus_.focus()}catch(d){}this.lastFocus_=null};
goog.ui.ModalPopup.prototype.showPopupElement_=function(a){this.bgIframeEl_&&goog.style.setElementShown(this.bgIframeEl_,a);this.bgEl_&&goog.style.setElementShown(this.bgEl_,a);goog.style.setElementShown(this.getElement(),a);goog.style.setElementShown(this.tabCatcherElement_,a)};goog.ui.ModalPopup.prototype.onShow=function(){this.dispatchEvent(goog.ui.PopupBase.EventType.SHOW)};goog.ui.ModalPopup.prototype.onHide=function(){this.showPopupElement_(!1);this.dispatchEvent(goog.ui.PopupBase.EventType.HIDE)};
goog.ui.ModalPopup.prototype.isVisible=function(){return this.visible_};goog.ui.ModalPopup.prototype.focus=function(){this.focusElement_()};
goog.ui.ModalPopup.prototype.resizeBackground_=function(){this.bgIframeEl_&&goog.style.setElementShown(this.bgIframeEl_,!1);this.bgEl_&&goog.style.setElementShown(this.bgEl_,!1);var a=this.getDomHelper().getDocument(),b=goog.dom.getWindow(a)||window,c=goog.dom.getViewportSize(b);b=Math.max(c.width,Math.max(a.body.scrollWidth,a.documentElement.scrollWidth));a=Math.max(c.height,Math.max(a.body.scrollHeight,a.documentElement.scrollHeight));this.bgIframeEl_&&(goog.style.setElementShown(this.bgIframeEl_,
!0),goog.style.setSize(this.bgIframeEl_,b,a));this.bgEl_&&(goog.style.setElementShown(this.bgEl_,!0),goog.style.setSize(this.bgEl_,b,a))};
goog.ui.ModalPopup.prototype.reposition=function(){var a=this.getDomHelper().getDocument(),b=goog.dom.getWindow(a)||window;if("fixed"==goog.style.getComputedPosition(this.getElement()))var c=a=0;else c=this.getDomHelper().getDocumentScroll(),a=c.x,c=c.y;var d=goog.style.getSize(this.getElement());b=goog.dom.getViewportSize(b);a=Math.max(a+b.width/2-d.width/2,0);c=Math.max(c+b.height/2-d.height/2,0);goog.style.setPosition(this.getElement(),a,c);goog.style.setPosition(this.tabCatcherElement_,a,c)};
goog.ui.ModalPopup.prototype.onFocus=function(a){this.backwardTabWrapInProgress_?this.resetBackwardTabWrap_():a.target==this.tabCatcherElement_&&goog.Timer.callOnce(this.focusElement_,0,this)};goog.ui.ModalPopup.prototype.getTabCatcherElement=function(){return this.tabCatcherElement_};goog.ui.ModalPopup.prototype.focusElement_=function(){try{goog.userAgent.IE&&this.getDomHelper().getDocument().body.focus(),this.getElement().focus()}catch(a){}};
goog.ui.ModalPopup.prototype.disposeInternal=function(){goog.dispose(this.popupShowTransition_);this.popupShowTransition_=null;goog.dispose(this.popupHideTransition_);this.popupHideTransition_=null;goog.dispose(this.bgShowTransition_);this.bgShowTransition_=null;goog.dispose(this.bgHideTransition_);this.bgHideTransition_=null;goog.ui.ModalPopup.superClass_.disposeInternal.call(this)};goog.ui.Dialog=function(a,b,c){goog.ui.ModalPopup.call(this,b,c);this.class_=a||"modal-dialog";this.buttons_=goog.ui.Dialog.ButtonSet.createOkCancel()};goog.inherits(goog.ui.Dialog,goog.ui.ModalPopup);goog.tagUnsealableClass(goog.ui.Dialog);goog.ui.Dialog.prototype.escapeToCancel_=!0;goog.ui.Dialog.prototype.hasTitleCloseButton_=!0;goog.ui.Dialog.prototype.modal_=!0;goog.ui.Dialog.prototype.draggable_=!0;goog.ui.Dialog.prototype.backgroundElementOpacity_=.5;goog.ui.Dialog.prototype.title_="";
goog.ui.Dialog.prototype.content_=null;goog.ui.Dialog.prototype.dragger_=null;goog.ui.Dialog.prototype.disposeOnHide_=!1;goog.ui.Dialog.prototype.titleEl_=null;goog.ui.Dialog.prototype.titleTextEl_=null;goog.ui.Dialog.prototype.titleTextId_=null;goog.ui.Dialog.prototype.titleCloseEl_=null;goog.ui.Dialog.prototype.contentEl_=null;goog.ui.Dialog.prototype.buttonEl_=null;goog.ui.Dialog.prototype.preferredAriaRole_=goog.a11y.aria.Role.DIALOG;goog.ui.Dialog.prototype.getCssClass=function(){return this.class_};
goog.ui.Dialog.prototype.setTitle=function(a){this.title_=a;this.titleTextEl_&&goog.dom.setTextContent(this.titleTextEl_,a)};goog.ui.Dialog.prototype.getTitle=function(){return this.title_};goog.ui.Dialog.prototype.setTextContent=function(a){this.setSafeHtmlContent(goog.html.SafeHtml.htmlEscapePreservingNewlines(a))};goog.ui.Dialog.prototype.setSafeHtmlContent=function(a){this.content_=a;this.contentEl_&&goog.dom.safe.setInnerHtml(this.contentEl_,a)};
goog.ui.Dialog.prototype.getContent=function(){return null!=this.content_?goog.html.SafeHtml.unwrap(this.content_):""};goog.ui.Dialog.prototype.getSafeHtmlContent=function(){return this.content_};goog.ui.Dialog.prototype.getPreferredAriaRole=function(){return this.preferredAriaRole_};goog.ui.Dialog.prototype.setPreferredAriaRole=function(a){this.preferredAriaRole_=a};goog.ui.Dialog.prototype.renderIfNoDom_=function(){this.getElement()||this.render()};
goog.ui.Dialog.prototype.getContentElement=function(){this.renderIfNoDom_();return this.contentEl_};goog.ui.Dialog.prototype.getTitleElement=function(){this.renderIfNoDom_();return this.titleEl_};goog.ui.Dialog.prototype.getTitleTextElement=function(){this.renderIfNoDom_();return this.titleTextEl_};goog.ui.Dialog.prototype.getTitleCloseElement=function(){this.renderIfNoDom_();return this.titleCloseEl_};goog.ui.Dialog.prototype.getButtonElement=function(){this.renderIfNoDom_();return this.buttonEl_};
goog.ui.Dialog.prototype.getDialogElement=function(){this.renderIfNoDom_();return this.getElement()};goog.ui.Dialog.prototype.getBackgroundElement=function(){this.renderIfNoDom_();return goog.ui.Dialog.superClass_.getBackgroundElement.call(this)};goog.ui.Dialog.prototype.getBackgroundElementOpacity=function(){return this.backgroundElementOpacity_};
goog.ui.Dialog.prototype.setBackgroundElementOpacity=function(a){this.backgroundElementOpacity_=a;this.getElement()&&(a=this.getBackgroundElement())&&goog.style.setOpacity(a,this.backgroundElementOpacity_)};goog.ui.Dialog.prototype.setModal=function(a){a!=this.modal_&&this.setModalInternal_(a)};
goog.ui.Dialog.prototype.setModalInternal_=function(a){this.modal_=a;if(this.isInDocument()){var b=this.getDomHelper(),c=this.getBackgroundElement(),d=this.getBackgroundIframe();a?(d&&b.insertSiblingBefore(d,this.getElement()),b.insertSiblingBefore(c,this.getElement())):(b.removeNode(d),b.removeNode(c))}this.isVisible()&&this.setA11YDetectBackground(a)};goog.ui.Dialog.prototype.getModal=function(){return this.modal_};goog.ui.Dialog.prototype.getClass=function(){return this.getCssClass()};
goog.ui.Dialog.prototype.setDraggable=function(a){this.draggable_=a;this.setDraggingEnabled_(a&&this.isInDocument())};goog.ui.Dialog.prototype.createDragger=function(){return new goog.fx.Dragger(this.getElement(),this.titleEl_)};goog.ui.Dialog.prototype.getDraggable=function(){return this.draggable_};
goog.ui.Dialog.prototype.setDraggingEnabled_=function(a){var b=goog.string.trim(this.class_+"-title-draggable").split(" ");this.getElement()&&(a?goog.dom.classlist.addAll(goog.asserts.assert(this.titleEl_),b):goog.dom.classlist.removeAll(goog.asserts.assert(this.titleEl_),b));a&&!this.dragger_?(this.dragger_=this.createDragger(),goog.dom.classlist.addAll(goog.asserts.assert(this.titleEl_),b),goog.events.listen(this.dragger_,goog.fx.Dragger.EventType.START,this.setDraggerLimits_,!1,this)):!a&&this.dragger_&&
(this.dragger_.dispose(),this.dragger_=null)};
goog.ui.Dialog.prototype.createDom=function(){goog.ui.Dialog.superClass_.createDom.call(this);var a=this.getElement();goog.asserts.assert(a,"getElement() returns null");var b=this.getDomHelper();this.titleEl_=b.createDom("DIV",this.class_+"-title",this.titleTextEl_=b.createDom("SPAN",{className:this.class_+"-title-text",id:this.getId()},this.title_),this.titleCloseEl_=b.createDom("SPAN",this.class_+"-title-close"));goog.dom.append(a,this.titleEl_,this.contentEl_=b.createDom("DIV",this.class_+"-content"),
this.buttonEl_=b.createDom("DIV",this.class_+"-buttons"));goog.a11y.aria.setRole(this.titleTextEl_,goog.a11y.aria.Role.HEADING);goog.a11y.aria.setRole(this.titleCloseEl_,goog.a11y.aria.Role.BUTTON);goog.dom.setFocusableTabIndex(this.titleCloseEl_,!0);goog.a11y.aria.setLabel(this.titleCloseEl_,goog.ui.Dialog.MSG_GOOG_UI_DIALOG_CLOSE_);this.titleTextId_=this.titleTextEl_.id;goog.a11y.aria.setRole(a,this.getPreferredAriaRole());goog.a11y.aria.setState(a,goog.a11y.aria.State.LABELLEDBY,this.titleTextId_||
"");this.content_&&goog.dom.safe.setInnerHtml(this.contentEl_,this.content_);goog.style.setElementShown(this.titleCloseEl_,this.hasTitleCloseButton_);this.buttons_&&this.buttons_.attachToElement(this.buttonEl_);goog.style.setElementShown(this.buttonEl_,!!this.buttons_);this.setBackgroundElementOpacity(this.backgroundElementOpacity_)};
goog.ui.Dialog.prototype.decorateInternal=function(a){goog.ui.Dialog.superClass_.decorateInternal.call(this,a);a=this.getElement();goog.asserts.assert(a,"The DOM element for dialog cannot be null.");var b=this.class_+"-content";this.contentEl_=goog.dom.getElementsByTagNameAndClass(null,b,a)[0];this.contentEl_||(this.contentEl_=this.getDomHelper().createDom("DIV",b),this.content_&&goog.dom.safe.setInnerHtml(this.contentEl_,this.content_),a.appendChild(this.contentEl_));b=this.class_+"-title";var c=
this.class_+"-title-text",d=this.class_+"-title-close";(this.titleEl_=goog.dom.getElementsByTagNameAndClass(null,b,a)[0])?(this.titleTextEl_=goog.dom.getElementsByTagNameAndClass(null,c,this.titleEl_)[0],this.titleCloseEl_=goog.dom.getElementsByTagNameAndClass(null,d,this.titleEl_)[0]):(this.titleEl_=this.getDomHelper().createDom("DIV",b),a.insertBefore(this.titleEl_,this.contentEl_));this.titleTextEl_?(this.title_=goog.dom.getTextContent(this.titleTextEl_),this.titleTextEl_.id||(this.titleTextEl_.id=
this.getId())):(this.titleTextEl_=goog.dom.createDom("SPAN",{className:c,id:this.getId()}),this.titleEl_.appendChild(this.titleTextEl_));this.titleTextId_=this.titleTextEl_.id;goog.a11y.aria.setState(a,goog.a11y.aria.State.LABELLEDBY,this.titleTextId_||"");this.titleCloseEl_||(this.titleCloseEl_=this.getDomHelper().createDom("SPAN",d),this.titleEl_.appendChild(this.titleCloseEl_));goog.style.setElementShown(this.titleCloseEl_,this.hasTitleCloseButton_);b=this.class_+"-buttons";(this.buttonEl_=goog.dom.getElementsByTagNameAndClass(null,
b,a)[0])?(this.buttons_=new goog.ui.Dialog.ButtonSet(this.getDomHelper()),this.buttons_.decorate(this.buttonEl_)):(this.buttonEl_=this.getDomHelper().createDom("DIV",b),a.appendChild(this.buttonEl_),this.buttons_&&this.buttons_.attachToElement(this.buttonEl_),goog.style.setElementShown(this.buttonEl_,!!this.buttons_));this.setBackgroundElementOpacity(this.backgroundElementOpacity_)};
goog.ui.Dialog.prototype.enterDocument=function(){goog.ui.Dialog.superClass_.enterDocument.call(this);this.getHandler().listen(this.getElement(),goog.events.EventType.KEYDOWN,this.onKey_).listen(this.getElement(),goog.events.EventType.KEYPRESS,this.onKey_);this.getHandler().listen(this.buttonEl_,goog.events.EventType.CLICK,this.onButtonClick_);this.setDraggingEnabled_(this.draggable_);this.getHandler().listen(this.titleCloseEl_,goog.events.EventType.CLICK,this.onTitleCloseClick_);var a=this.getElement();
goog.asserts.assert(a,"The DOM element for dialog cannot be null");goog.a11y.aria.setRole(a,this.getPreferredAriaRole());""!==this.titleTextEl_.id&&goog.a11y.aria.setState(a,goog.a11y.aria.State.LABELLEDBY,this.titleTextEl_.id);this.modal_||this.setModalInternal_(!1)};goog.ui.Dialog.prototype.exitDocument=function(){this.isVisible()&&this.setVisible(!1);this.setDraggingEnabled_(!1);goog.ui.Dialog.superClass_.exitDocument.call(this)};
goog.ui.Dialog.prototype.setVisible=function(a){a!=this.isVisible()&&(this.isInDocument()||this.render(),goog.ui.Dialog.superClass_.setVisible.call(this,a))};goog.ui.Dialog.prototype.onShow=function(){goog.ui.Dialog.superClass_.onShow.call(this);this.dispatchEvent(goog.ui.Dialog.EventType.AFTER_SHOW)};goog.ui.Dialog.prototype.onHide=function(){goog.ui.Dialog.superClass_.onHide.call(this);this.dispatchEvent(goog.ui.Dialog.EventType.AFTER_HIDE);this.disposeOnHide_&&this.dispose()};
goog.ui.Dialog.prototype.setDraggerLimits_=function(a){var b=this.getDomHelper().getDocument();a=goog.dom.getWindow(b)||window;a=goog.dom.getViewportSize(a);var c=Math.max(b.body.scrollWidth,a.width);b=Math.max(b.body.scrollHeight,a.height);var d=goog.style.getSize(this.getElement());"fixed"==goog.style.getComputedPosition(this.getElement())?this.dragger_.setLimits(new goog.math.Rect(0,0,Math.max(0,a.width-d.width),Math.max(0,a.height-d.height))):this.dragger_.setLimits(new goog.math.Rect(0,0,c-d.width,
b-d.height))};goog.ui.Dialog.prototype.onTitleCloseClick_=function(a){this.handleTitleClose_()};goog.ui.Dialog.prototype.handleTitleClose_=function(){if(this.hasTitleCloseButton_){var a=this.getButtonSet(),b=a&&a.getCancel();b?(a=a.get(b),this.dispatchEvent(new goog.ui.Dialog.Event(b,a))&&this.setVisible(!1)):this.setVisible(!1)}};goog.ui.Dialog.prototype.getHasTitleCloseButton=function(){return this.hasTitleCloseButton_};
goog.ui.Dialog.prototype.setHasTitleCloseButton=function(a){this.hasTitleCloseButton_=a;this.titleCloseEl_&&goog.style.setElementShown(this.titleCloseEl_,this.hasTitleCloseButton_)};goog.ui.Dialog.prototype.isEscapeToCancel=function(){return this.escapeToCancel_};goog.ui.Dialog.prototype.setEscapeToCancel=function(a){this.escapeToCancel_=a};goog.ui.Dialog.prototype.setDisposeOnHide=function(a){this.disposeOnHide_=a};goog.ui.Dialog.prototype.getDisposeOnHide=function(){return this.disposeOnHide_};
goog.ui.Dialog.prototype.disposeInternal=function(){this.buttonEl_=this.titleCloseEl_=null;goog.ui.Dialog.superClass_.disposeInternal.call(this)};goog.ui.Dialog.prototype.setButtonSet=function(a){this.buttons_=a;this.buttonEl_&&(this.buttons_?this.buttons_.attachToElement(this.buttonEl_):goog.dom.safe.setInnerHtml(this.buttonEl_,goog.html.SafeHtml.EMPTY),goog.style.setElementShown(this.buttonEl_,!!this.buttons_))};goog.ui.Dialog.prototype.getButtonSet=function(){return this.buttons_};
goog.ui.Dialog.prototype.onButtonClick_=function(a){if((a=this.findParentButton_(a.target))&&!a.disabled){a=a.name;var b=this.getButtonSet().get(a);this.dispatchEvent(new goog.ui.Dialog.Event(a,b))&&this.setVisible(!1)}};goog.ui.Dialog.prototype.findParentButton_=function(a){for(;null!=a&&a!=this.buttonEl_;){if("BUTTON"==a.tagName)return a;a=a.parentNode}return null};
goog.ui.Dialog.prototype.onKey_=function(a){var b=!1,c=!1,d=this.getButtonSet(),e=a.target;if(a.type==goog.events.EventType.KEYDOWN)if(this.escapeToCancel_&&a.keyCode==goog.events.KeyCodes.ESC){var f=d&&d.getCancel();e="SELECT"==e.tagName&&!e.disabled;f&&!e?(c=!0,b=d.get(f),b=this.dispatchEvent(new goog.ui.Dialog.Event(f,b))):e||(b=!0)}else a.keyCode==goog.events.KeyCodes.TAB&&a.shiftKey&&e==this.getElement()&&this.setupBackwardTabWrap();else if(a.keyCode==goog.events.KeyCodes.ENTER){if("BUTTON"==
e.tagName&&!e.disabled)f=e.name;else if(e==this.titleCloseEl_)this.handleTitleClose_();else if(d){var g=d.getDefault(),h=g&&d.getButton(g);e=("TEXTAREA"==e.tagName||"SELECT"==e.tagName||"A"==e.tagName)&&!e.disabled;!h||h.disabled||e||(f=g)}f&&d&&(c=!0,b=this.dispatchEvent(new goog.ui.Dialog.Event(f,String(d.get(f)))))}else e!=this.titleCloseEl_||a.keyCode!=goog.events.KeyCodes.SPACE&&a.key!=goog.events.Keys.SPACE||this.handleTitleClose_();if(b||c)a.stopPropagation(),a.preventDefault();b&&this.setVisible(!1)};
goog.ui.Dialog.Event=function(a,b){this.type=goog.ui.Dialog.EventType.SELECT;this.key=a;this.caption=b};goog.inherits(goog.ui.Dialog.Event,goog.events.Event);goog.ui.Dialog.SELECT_EVENT="dialogselect";goog.ui.Dialog.EventType={SELECT:"dialogselect",AFTER_HIDE:"afterhide",AFTER_SHOW:"aftershow"};goog.ui.Dialog.ButtonSet=function(a){this.dom_=a||goog.dom.getDomHelper();goog.structs.Map.call(this)};goog.inherits(goog.ui.Dialog.ButtonSet,goog.structs.Map);goog.tagUnsealableClass(goog.ui.Dialog.ButtonSet);
goog.ui.Dialog.ButtonSet.prototype.class_="goog-buttonset";goog.ui.Dialog.ButtonSet.prototype.defaultButton_=null;goog.ui.Dialog.ButtonSet.prototype.element_=null;goog.ui.Dialog.ButtonSet.prototype.cancelButton_=null;goog.ui.Dialog.ButtonSet.prototype.clear=function(){goog.structs.Map.prototype.clear.call(this);this.defaultButton_=this.cancelButton_=null};
goog.ui.Dialog.ButtonSet.prototype.set=function(a,b,c,d){goog.structs.Map.prototype.set.call(this,a,b);c&&(this.defaultButton_=a);d&&(this.cancelButton_=a);return this};goog.ui.Dialog.ButtonSet.prototype.addButton=function(a,b,c){return this.set(a.key,a.caption,b,c)};goog.ui.Dialog.ButtonSet.prototype.attachToElement=function(a){this.element_=a;this.render()};
goog.ui.Dialog.ButtonSet.prototype.render=function(){if(this.element_){goog.dom.safe.setInnerHtml(this.element_,goog.html.SafeHtml.EMPTY);var a=goog.dom.getDomHelper(this.element_);this.forEach(function(b,c){b=a.createDom("BUTTON",{name:c},b);c==this.defaultButton_&&(b.className=this.class_+"-default");this.element_.appendChild(b)},this)}};
goog.ui.Dialog.ButtonSet.prototype.decorate=function(a){if(a&&a.nodeType==goog.dom.NodeType.ELEMENT){this.element_=a;a=goog.dom.getElementsByTagName("BUTTON",this.element_);for(var b=0,c,d,e;c=a[b];b++)if(d=c.name||c.id,e=goog.dom.getTextContent(c)||c.value,d){var f=0==b;this.set(d,e,f,c.name==goog.ui.Dialog.DefaultButtonKeys.CANCEL);f&&goog.dom.classlist.add(c,this.class_+"-default")}}};goog.ui.Dialog.ButtonSet.prototype.getElement=function(){return this.element_};
goog.ui.Dialog.ButtonSet.prototype.getDomHelper=function(){return this.dom_};goog.ui.Dialog.ButtonSet.prototype.setDefault=function(a){this.defaultButton_=a};goog.ui.Dialog.ButtonSet.prototype.getDefault=function(){return this.defaultButton_};goog.ui.Dialog.ButtonSet.prototype.setCancel=function(a){this.cancelButton_=a};goog.ui.Dialog.ButtonSet.prototype.getCancel=function(){return this.cancelButton_};
goog.ui.Dialog.ButtonSet.prototype.getButton=function(a){for(var b=this.getAllButtons(),c=0,d;d=b[c];c++)if(d.name==a||d.id==a)return d;return null};goog.ui.Dialog.ButtonSet.prototype.getAllButtons=function(){return goog.dom.getElementsByTagName("BUTTON",goog.asserts.assert(this.element_))};goog.ui.Dialog.ButtonSet.prototype.setButtonEnabled=function(a,b){if(a=this.getButton(a))a.disabled=!b};
goog.ui.Dialog.ButtonSet.prototype.setAllButtonsEnabled=function(a){for(var b=this.getAllButtons(),c=0,d;d=b[c];c++)d.disabled=!a};goog.ui.Dialog.DefaultButtonKeys={OK:"ok",CANCEL:"cancel",YES:"yes",NO:"no",SAVE:"save",CONTINUE:"continue"};goog.ui.Dialog.MSG_DIALOG_OK_=goog.getMsg("OK");goog.ui.Dialog.MSG_DIALOG_CANCEL_=goog.getMsg("Cancel");goog.ui.Dialog.MSG_DIALOG_YES_=goog.getMsg("Yes");goog.ui.Dialog.MSG_DIALOG_NO_=goog.getMsg("No");goog.ui.Dialog.MSG_DIALOG_SAVE_=goog.getMsg("Save");
goog.ui.Dialog.MSG_DIALOG_CONTINUE_=goog.getMsg("Continue");goog.ui.Dialog.MSG_GOOG_UI_DIALOG_CLOSE_=goog.getMsg("Close");goog.ui.Dialog.DefaultButtonCaptions={OK:goog.ui.Dialog.MSG_DIALOG_OK_,CANCEL:goog.ui.Dialog.MSG_DIALOG_CANCEL_,YES:goog.ui.Dialog.MSG_DIALOG_YES_,NO:goog.ui.Dialog.MSG_DIALOG_NO_,SAVE:goog.ui.Dialog.MSG_DIALOG_SAVE_,CONTINUE:goog.ui.Dialog.MSG_DIALOG_CONTINUE_};
goog.ui.Dialog.ButtonSet.DefaultButtons={OK:{key:goog.ui.Dialog.DefaultButtonKeys.OK,caption:goog.ui.Dialog.DefaultButtonCaptions.OK},CANCEL:{key:goog.ui.Dialog.DefaultButtonKeys.CANCEL,caption:goog.ui.Dialog.DefaultButtonCaptions.CANCEL},YES:{key:goog.ui.Dialog.DefaultButtonKeys.YES,caption:goog.ui.Dialog.DefaultButtonCaptions.YES},NO:{key:goog.ui.Dialog.DefaultButtonKeys.NO,caption:goog.ui.Dialog.DefaultButtonCaptions.NO},SAVE:{key:goog.ui.Dialog.DefaultButtonKeys.SAVE,caption:goog.ui.Dialog.DefaultButtonCaptions.SAVE},
CONTINUE:{key:goog.ui.Dialog.DefaultButtonKeys.CONTINUE,caption:goog.ui.Dialog.DefaultButtonCaptions.CONTINUE}};goog.ui.Dialog.ButtonSet.createOk=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.OK,!0,!0)};goog.ui.Dialog.ButtonSet.createOkCancel=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.OK,!0).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CANCEL,!1,!0)};
goog.ui.Dialog.ButtonSet.createYesNo=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.YES,!0).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.NO,!1,!0)};goog.ui.Dialog.ButtonSet.createYesNoCancel=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.YES).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.NO,!0).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CANCEL,!1,!0)};
goog.ui.Dialog.ButtonSet.createContinueSaveCancel=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CONTINUE).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.SAVE).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CANCEL,!0,!0)};
(function(){"undefined"!=typeof document&&(goog.ui.Dialog.ButtonSet.OK=goog.ui.Dialog.ButtonSet.createOk(),goog.ui.Dialog.ButtonSet.OK_CANCEL=goog.ui.Dialog.ButtonSet.createOkCancel(),goog.ui.Dialog.ButtonSet.YES_NO=goog.ui.Dialog.ButtonSet.createYesNo(),goog.ui.Dialog.ButtonSet.YES_NO_CANCEL=goog.ui.Dialog.ButtonSet.createYesNoCancel(),goog.ui.Dialog.ButtonSet.CONTINUE_SAVE_CANCEL=goog.ui.Dialog.ButtonSet.createContinueSaveCancel())})();goog.ui.Prompt=function(a,b,c,d,e,f,g){goog.ui.Dialog.call(this,e,f,g);this.inputElementId_=this.makeId("ie");this.setTitle(a);a=goog.html.SafeHtml.create("label",{"for":this.inputElementId_},goog.html.SafeHtml.htmlEscapePreservingNewlines(b));b=goog.html.SafeHtml.BR;this.setSafeHtmlContent(goog.html.SafeHtml.concat(a,b,b));this.callback_=c;this.defaultValue_=goog.isDef(d)?d:"";c=goog.getMsg("OK");d=goog.getMsg("Cancel");g=new goog.ui.Dialog.ButtonSet(g);g.set(goog.ui.Dialog.DefaultButtonKeys.OK,
c,!0);g.set(goog.ui.Dialog.DefaultButtonKeys.CANCEL,d,!1,!0);this.setButtonSet(g)};goog.inherits(goog.ui.Prompt,goog.ui.Dialog);goog.tagUnsealableClass(goog.ui.Prompt);goog.ui.Prompt.prototype.callback_=goog.nullFunction;goog.ui.Prompt.prototype.defaultValue_="";goog.ui.Prompt.prototype.userInputEl_=null;goog.ui.Prompt.prototype.isClosing_=!1;goog.ui.Prompt.prototype.rows_=1;goog.ui.Prompt.prototype.cols_=0;goog.ui.Prompt.prototype.inputDecoratorFn_=null;goog.ui.Prompt.prototype.validationFn_=goog.functions.TRUE;
goog.ui.Prompt.prototype.setValidationFunction=function(a){this.validationFn_=a};goog.ui.Prompt.prototype.enterDocument=function(){this.inputDecoratorFn_&&this.inputDecoratorFn_(this.userInputEl_);goog.ui.Prompt.superClass_.enterDocument.call(this);this.getHandler().listen(this,goog.ui.Dialog.EventType.SELECT,this.onPromptExit_);this.getHandler().listen(this.userInputEl_,[goog.events.EventType.KEYUP,goog.events.EventType.CHANGE],this.handleInputChanged_)};
goog.ui.Prompt.prototype.getInputElement=function(){return this.userInputEl_};goog.ui.Prompt.prototype.setInputDecoratorFn=function(a){this.inputDecoratorFn_=a};goog.ui.Prompt.prototype.setRows=function(a){if(this.isInDocument())if("INPUT"==this.userInputEl_.tagName){if(1<a)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);}else{if(1>=a)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.userInputEl_.rows=a}this.rows_=a};goog.ui.Prompt.prototype.getRows=function(){return this.rows_};
goog.ui.Prompt.prototype.setCols=function(a){this.cols_=a;this.userInputEl_&&("INPUT"==this.userInputEl_.tagName?this.userInputEl_.size=a:this.userInputEl_.cols=a)};goog.ui.Prompt.prototype.getCols=function(){return this.cols_};
goog.ui.Prompt.prototype.createDom=function(){goog.ui.Prompt.superClass_.createDom.call(this);var a=this.getClass();1==this.rows_?(this.userInputEl_=this.getDomHelper().createDom("INPUT",{className:a+"-userInput",value:this.defaultValue_}),this.userInputEl_.type=goog.dom.InputType.TEXT,this.cols_&&(this.userInputEl_.size=this.cols_)):(this.userInputEl_=this.getDomHelper().createDom("TEXTAREA",{className:a+"-userInput",value:this.defaultValue_}),this.userInputEl_.rows=this.rows_,this.cols_&&(this.userInputEl_.cols=
this.cols_));this.userInputEl_.id=this.inputElementId_;this.getContentElement().appendChild(this.getDomHelper().createDom("DIV",{style:"overflow: auto"},this.userInputEl_))};goog.ui.Prompt.prototype.handleInputChanged_=function(){this.updateOkButtonState_()};goog.ui.Prompt.prototype.updateOkButtonState_=function(){var a=this.validationFn_(this.userInputEl_.value);this.getButtonSet().setButtonEnabled(goog.ui.Dialog.DefaultButtonKeys.OK,a)};
goog.ui.Prompt.prototype.setVisible=function(a){goog.ui.Prompt.superClass_.setVisible.call(this,a);a&&(this.isClosing_=!1,this.userInputEl_.value=this.defaultValue_,this.focus(),this.updateOkButtonState_())};goog.ui.Prompt.prototype.focus=function(){goog.ui.Prompt.superClass_.focus.call(this);goog.userAgent.OPERA&&this.userInputEl_.focus();this.userInputEl_.select()};goog.ui.Prompt.prototype.setDefaultValue=function(a){this.defaultValue_=a};
goog.ui.Prompt.prototype.onPromptExit_=function(a){this.isClosing_||(this.isClosing_=!0,"ok"==a.key?goog.Timer.callOnce(goog.bind(this.callback_,this,this.userInputEl_.value),1):goog.Timer.callOnce(goog.bind(this.callback_,this,null),1))};goog.ui.Prompt.prototype.disposeInternal=function(){goog.dom.removeNode(this.userInputEl_);goog.events.unlisten(this,goog.ui.Dialog.EventType.SELECT,this.onPromptExit_,!0,this);goog.ui.Prompt.superClass_.disposeInternal.call(this);this.userInputEl_=null};goog.events.ImeHandler=function(a){goog.events.EventTarget.call(this);this.el_=a;this.keyUpHandler_=new goog.events.EventHandler(this);this.handler_=new goog.events.EventHandler(this);goog.events.ImeHandler.USES_COMPOSITION_EVENTS&&this.handler_.listen(a,goog.events.EventType.COMPOSITIONSTART,this.handleCompositionStart_).listen(a,goog.events.EventType.COMPOSITIONEND,this.handleCompositionEnd_).listen(a,goog.events.EventType.COMPOSITIONUPDATE,this.handleTextModifyingInput_);this.handler_.listen(a,
goog.events.EventType.TEXTINPUT,this.handleTextInput_).listen(a,goog.events.EventType.TEXT,this.handleTextModifyingInput_).listen(a,goog.events.EventType.KEYDOWN,this.handleKeyDown_)};goog.inherits(goog.events.ImeHandler,goog.events.EventTarget);goog.events.ImeHandler.EventType={START:"startIme",UPDATE:"updateIme",END:"endIme"};goog.events.ImeHandler.Event=function(a,b){goog.events.Event.call(this,a);this.reason=b};goog.inherits(goog.events.ImeHandler.Event,goog.events.Event);
goog.events.ImeHandler.USES_COMPOSITION_EVENTS=goog.userAgent.GECKO||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher(532);goog.events.ImeHandler.prototype.imeMode_=!1;goog.events.ImeHandler.prototype.lastKeyCode_=0;goog.events.ImeHandler.prototype.isImeMode=function(){return this.imeMode_};goog.events.ImeHandler.prototype.handleCompositionStart_=function(a){this.handleImeActivate_(a)};goog.events.ImeHandler.prototype.handleCompositionEnd_=function(a){this.handleImeDeactivate_(a)};
goog.events.ImeHandler.prototype.handleTextModifyingInput_=function(a){this.isImeMode()&&this.processImeComposition_(a)};goog.events.ImeHandler.prototype.handleImeActivate_=function(a){this.imeMode_||(goog.userAgent.WEBKIT&&!goog.events.ImeHandler.USES_COMPOSITION_EVENTS&&this.keyUpHandler_.listen(this.el_,goog.events.EventType.KEYUP,this.handleKeyUpSafari4_),this.imeMode_=!0,this.dispatchEvent(new goog.events.ImeHandler.Event(goog.events.ImeHandler.EventType.START,a)))};
goog.events.ImeHandler.prototype.processImeComposition_=function(a){this.dispatchEvent(new goog.events.ImeHandler.Event(goog.events.ImeHandler.EventType.UPDATE,a))};goog.events.ImeHandler.prototype.handleImeDeactivate_=function(a){this.imeMode_=!1;this.keyUpHandler_.removeAll();this.dispatchEvent(new goog.events.ImeHandler.Event(goog.events.ImeHandler.EventType.END,a))};
goog.events.ImeHandler.prototype.handleKeyDown_=function(a){if(!goog.events.ImeHandler.USES_COMPOSITION_EVENTS){var b=this.isImeMode();b||a.keyCode!=goog.events.KeyCodes.WIN_IME?b&&a.keyCode!=goog.events.KeyCodes.WIN_IME?goog.events.ImeHandler.isImeDeactivateKeyEvent_(a)&&this.handleImeDeactivate_(a):b&&this.processImeComposition_(a):this.handleImeActivate_(a)}goog.events.ImeHandler.isImeDeactivateKeyEvent_(a)&&(this.lastKeyCode_=a.keyCode)};
goog.events.ImeHandler.prototype.handleTextInput_=function(a){!goog.events.ImeHandler.USES_COMPOSITION_EVENTS&&goog.userAgent.WEBKIT&&this.lastKeyCode_==goog.events.KeyCodes.WIN_IME&&this.isImeMode()&&this.handleImeDeactivate_(a)};goog.events.ImeHandler.prototype.handleKeyUpSafari4_=function(a){if(this.isImeMode())switch(a.keyCode){case goog.events.KeyCodes.ENTER:case goog.events.KeyCodes.TAB:case goog.events.KeyCodes.ESC:this.handleImeDeactivate_(a)}};
goog.events.ImeHandler.isImeDeactivateKeyEvent_=function(a){switch(a.keyCode){case goog.events.KeyCodes.SHIFT:case goog.events.KeyCodes.CTRL:return!1;default:return!0}};goog.events.ImeHandler.prototype.disposeInternal=function(){this.handler_.dispose();this.keyUpHandler_.dispose();this.el_=null;goog.events.ImeHandler.superClass_.disposeInternal.call(this)};goog.events.InputHandler=function(a){goog.events.EventTarget.call(this);this.timer_=null;this.element_=a;a=goog.userAgent.IE||goog.userAgent.EDGE||goog.userAgent.WEBKIT&&!goog.userAgent.isVersionOrHigher("531")&&"TEXTAREA"==a.tagName;this.eventHandler_=new goog.events.EventHandler(this);this.eventHandler_.listen(this.element_,a?["keydown","paste","cut","drop","input"]:"input",this)};goog.inherits(goog.events.InputHandler,goog.events.EventTarget);goog.events.InputHandler.EventType={INPUT:"input"};
goog.events.InputHandler.prototype.handleEvent=function(a){if("input"==a.type)goog.userAgent.IE&&goog.userAgent.isVersionOrHigher(10)&&0==a.keyCode&&0==a.charCode||(this.cancelTimerIfSet_(),this.dispatchEvent(this.createInputEvent_(a)));else if("keydown"!=a.type||goog.events.KeyCodes.isTextModifyingKeyEvent(a)){var b="keydown"==a.type?this.element_.value:null;goog.userAgent.IE&&a.keyCode==goog.events.KeyCodes.WIN_IME&&(b=null);var c=this.createInputEvent_(a);this.cancelTimerIfSet_();this.timer_=goog.Timer.callOnce(function(){this.timer_=
null;this.element_.value!=b&&this.dispatchEvent(c)},0,this)}};goog.events.InputHandler.prototype.cancelTimerIfSet_=function(){null!=this.timer_&&(goog.Timer.clear(this.timer_),this.timer_=null)};goog.events.InputHandler.prototype.createInputEvent_=function(a){a=new goog.events.BrowserEvent(a.getBrowserEvent());a.type=goog.events.InputHandler.EventType.INPUT;return a};
goog.events.InputHandler.prototype.disposeInternal=function(){goog.events.InputHandler.superClass_.disposeInternal.call(this);this.eventHandler_.dispose();this.cancelTimerIfSet_();delete this.element_};goog.ui.ItemEvent=function(a,b,c){goog.events.Event.call(this,a,b);this.item=c};goog.inherits(goog.ui.ItemEvent,goog.events.Event);goog.ui.LabelInput=function(a,b){goog.ui.Component.call(this,b);this.label_=a||""};goog.inherits(goog.ui.LabelInput,goog.ui.Component);goog.tagUnsealableClass(goog.ui.LabelInput);goog.ui.LabelInput.prototype.ffKeyRestoreValue_=null;goog.ui.LabelInput.prototype.labelRestoreDelayMs=10;goog.ui.LabelInput.isPlaceholderSupported_=function(){goog.isDefAndNotNull(goog.ui.LabelInput.supportsPlaceholder_)||(goog.ui.LabelInput.supportsPlaceholder_="placeholder"in goog.dom.createElement("INPUT"));return goog.ui.LabelInput.supportsPlaceholder_};
goog.ui.LabelInput.prototype.hasFocus_=!1;goog.ui.LabelInput.prototype.createDom=function(){this.setElementInternal(this.getDomHelper().createDom("INPUT",{type:goog.dom.InputType.TEXT}))};
goog.ui.LabelInput.prototype.decorateInternal=function(a){goog.ui.LabelInput.superClass_.decorateInternal.call(this,a);this.label_||(this.label_=a.getAttribute("label")||"");goog.dom.getActiveElement(goog.dom.getOwnerDocument(a))==a&&(this.hasFocus_=!0,a=this.getElement(),goog.asserts.assert(a),goog.dom.classlist.remove(a,this.labelCssClassName));goog.ui.LabelInput.isPlaceholderSupported_()&&(this.getElement().placeholder=this.label_);a=this.getElement();goog.asserts.assert(a,"The label input element cannot be null.");
goog.a11y.aria.setState(a,goog.a11y.aria.State.LABEL,this.label_)};goog.ui.LabelInput.prototype.enterDocument=function(){goog.ui.LabelInput.superClass_.enterDocument.call(this);this.attachEvents_();this.check_();this.getElement().labelInput_=this};goog.ui.LabelInput.prototype.exitDocument=function(){goog.ui.LabelInput.superClass_.exitDocument.call(this);this.detachEvents_();this.getElement().labelInput_=null};
goog.ui.LabelInput.prototype.attachEvents_=function(){var a=new goog.events.EventHandler(this);a.listen(this.getElement(),goog.events.EventType.FOCUS,this.handleFocus_);a.listen(this.getElement(),goog.events.EventType.BLUR,this.handleBlur_);if(goog.ui.LabelInput.isPlaceholderSupported_())this.eventHandler_=a;else{goog.userAgent.GECKO&&a.listen(this.getElement(),[goog.events.EventType.KEYPRESS,goog.events.EventType.KEYDOWN,goog.events.EventType.KEYUP],this.handleEscapeKeys_);var b=goog.dom.getOwnerDocument(this.getElement());
b=goog.dom.getWindow(b);a.listen(b,goog.events.EventType.LOAD,this.handleWindowLoad_);this.eventHandler_=a;this.attachEventsToForm_()}};goog.ui.LabelInput.prototype.attachEventsToForm_=function(){!this.formAttached_&&this.eventHandler_&&this.getElement().form&&(this.eventHandler_.listen(this.getElement().form,goog.events.EventType.SUBMIT,this.handleFormSubmit_),this.formAttached_=!0)};
goog.ui.LabelInput.prototype.detachEvents_=function(){this.eventHandler_&&(this.eventHandler_.dispose(),this.eventHandler_=null)};goog.ui.LabelInput.prototype.disposeInternal=function(){goog.ui.LabelInput.superClass_.disposeInternal.call(this);this.detachEvents_()};goog.ui.LabelInput.prototype.labelCssClassName="label-input-label";
goog.ui.LabelInput.prototype.handleFocus_=function(a){this.hasFocus_=!0;a=this.getElement();goog.asserts.assert(a);goog.dom.classlist.remove(a,this.labelCssClassName);if(!goog.ui.LabelInput.isPlaceholderSupported_()&&!this.hasChanged()&&!this.inFocusAndSelect_){var b=this;a=function(){b.getElement()&&(b.getElement().value="")};goog.userAgent.IE?goog.Timer.callOnce(a,10):a()}};
goog.ui.LabelInput.prototype.handleBlur_=function(a){goog.ui.LabelInput.isPlaceholderSupported_()||(this.eventHandler_.unlisten(this.getElement(),goog.events.EventType.CLICK,this.handleFocus_),this.ffKeyRestoreValue_=null);this.hasFocus_=!1;this.check_()};
goog.ui.LabelInput.prototype.handleEscapeKeys_=function(a){27==a.keyCode&&(a.type==goog.events.EventType.KEYDOWN?this.ffKeyRestoreValue_=this.getElement().value:a.type==goog.events.EventType.KEYPRESS?this.getElement().value=this.ffKeyRestoreValue_:a.type==goog.events.EventType.KEYUP&&(this.ffKeyRestoreValue_=null),a.preventDefault())};goog.ui.LabelInput.prototype.handleFormSubmit_=function(a){this.hasChanged()||(this.getElement().value="",goog.Timer.callOnce(this.handleAfterSubmit_,10,this))};
goog.ui.LabelInput.prototype.handleAfterSubmit_=function(){this.hasChanged()||(this.getElement().value=this.label_)};goog.ui.LabelInput.prototype.handleWindowLoad_=function(a){this.check_()};goog.ui.LabelInput.prototype.hasFocus=function(){return this.hasFocus_};goog.ui.LabelInput.prototype.hasChanged=function(){return!!this.getElement()&&""!=this.getElement().value&&this.getElement().value!=this.label_};
goog.ui.LabelInput.prototype.clear=function(){this.getElement().value="";null!=this.ffKeyRestoreValue_&&(this.ffKeyRestoreValue_="")};goog.ui.LabelInput.prototype.reset=function(){this.hasChanged()&&(this.clear(),this.check_())};goog.ui.LabelInput.prototype.setValue=function(a){null!=this.ffKeyRestoreValue_&&(this.ffKeyRestoreValue_=a);this.getElement().value=a;this.check_()};
goog.ui.LabelInput.prototype.getValue=function(){return null!=this.ffKeyRestoreValue_?this.ffKeyRestoreValue_:this.hasChanged()?this.getElement().value:""};goog.ui.LabelInput.prototype.setLabel=function(a){var b=this.getElement();goog.ui.LabelInput.isPlaceholderSupported_()?(b&&(b.placeholder=a),this.label_=a):this.hasChanged()||(b&&(b.value=""),this.label_=a,this.restoreLabel_());b&&goog.a11y.aria.setState(b,goog.a11y.aria.State.LABEL,this.label_)};goog.ui.LabelInput.prototype.getLabel=function(){return this.label_};
goog.ui.LabelInput.prototype.check_=function(){var a=this.getElement();goog.asserts.assert(a,"The label input element cannot be null.");goog.ui.LabelInput.isPlaceholderSupported_()?this.getElement().placeholder!=this.label_&&(this.getElement().placeholder=this.label_):this.attachEventsToForm_();goog.a11y.aria.setState(a,goog.a11y.aria.State.LABEL,this.label_);this.hasChanged()?(a=this.getElement(),goog.asserts.assert(a),goog.dom.classlist.remove(a,this.labelCssClassName)):(this.inFocusAndSelect_||
this.hasFocus_||(a=this.getElement(),goog.asserts.assert(a),goog.dom.classlist.add(a,this.labelCssClassName)),goog.ui.LabelInput.isPlaceholderSupported_()||goog.Timer.callOnce(this.restoreLabel_,this.labelRestoreDelayMs,this))};
goog.ui.LabelInput.prototype.focusAndSelect=function(){var a=this.hasChanged();this.inFocusAndSelect_=!0;this.getElement().focus();a||goog.ui.LabelInput.isPlaceholderSupported_()||(this.getElement().value=this.label_);this.getElement().select();goog.ui.LabelInput.isPlaceholderSupported_()||(this.eventHandler_&&this.eventHandler_.listenOnce(this.getElement(),goog.events.EventType.CLICK,this.handleFocus_),goog.Timer.callOnce(this.focusAndSelect_,10,this))};
goog.ui.LabelInput.prototype.setEnabled=function(a){this.getElement().disabled=!a;var b=this.getElement();goog.asserts.assert(b);goog.dom.classlist.enable(b,this.labelCssClassName+"-disabled",!a)};goog.ui.LabelInput.prototype.isEnabled=function(){return!this.getElement().disabled};goog.ui.LabelInput.prototype.focusAndSelect_=function(){this.inFocusAndSelect_=!1};goog.ui.LabelInput.prototype.restoreLabel_=function(){!this.getElement()||this.hasChanged()||this.hasFocus_||(this.getElement().value=this.label_)};goog.ui.ComboBox=function(a,b,c){goog.ui.Component.call(this,a);this.labelInput_=c||new goog.ui.LabelInput;this.enabled_=!0;this.menu_=b||new goog.ui.Menu(this.getDomHelper());this.setupMenu_()};goog.inherits(goog.ui.ComboBox,goog.ui.Component);goog.tagUnsealableClass(goog.ui.ComboBox);goog.ui.ComboBox.BLUR_DISMISS_TIMER_MS=250;goog.ui.ComboBox.prototype.logger_=goog.log.getLogger("goog.ui.ComboBox");goog.ui.ComboBox.prototype.inputHandler_=null;goog.ui.ComboBox.prototype.lastToken_=null;
goog.ui.ComboBox.prototype.labelInput_=null;goog.ui.ComboBox.prototype.menu_=null;goog.ui.ComboBox.prototype.visibleCount_=-1;goog.ui.ComboBox.prototype.input_=null;goog.ui.ComboBox.prototype.matchFunction_=goog.string.startsWith;goog.ui.ComboBox.prototype.button_=null;goog.ui.ComboBox.prototype.defaultText_="";goog.ui.ComboBox.prototype.fieldName_="";goog.ui.ComboBox.prototype.dismissTimer_=null;goog.ui.ComboBox.prototype.useDropdownArrow_=!1;
goog.ui.ComboBox.prototype.createDom=function(){this.input_=this.getDomHelper().createDom("INPUT",{name:this.fieldName_,type:goog.dom.InputType.TEXT,autocomplete:"off"});this.button_=this.getDomHelper().createDom("SPAN","goog-combobox-button");this.setElementInternal(this.getDomHelper().createDom("SPAN","goog-combobox",this.input_,this.button_));this.useDropdownArrow_&&(goog.dom.setTextContent(this.button_,"\u25bc"),goog.style.setUnselectable(this.button_,!0));this.input_.setAttribute("label",this.defaultText_);
this.labelInput_.decorate(this.input_);this.menu_.setFocusable(!1);this.menu_.isInDocument()||this.addChild(this.menu_,!0)};goog.ui.ComboBox.prototype.setEnabled=function(a){this.enabled_=a;this.labelInput_.setEnabled(a);goog.dom.classlist.enable(goog.asserts.assert(this.getElement()),"goog-combobox-disabled",!a)};goog.ui.ComboBox.prototype.isEnabled=function(){return this.enabled_};
goog.ui.ComboBox.prototype.enterDocument=function(){goog.ui.ComboBox.superClass_.enterDocument.call(this);var a=this.getHandler();a.listen(this.getElement(),goog.events.EventType.MOUSEDOWN,this.onComboMouseDown_);a.listen(this.getDomHelper().getDocument(),goog.events.EventType.MOUSEDOWN,this.onDocClicked_);a.listen(this.input_,goog.events.EventType.BLUR,this.onInputBlur_);this.keyHandler_=new goog.events.KeyHandler(this.input_);a.listen(this.keyHandler_,goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent);
this.inputHandler_=new goog.events.InputHandler(this.input_);a.listen(this.inputHandler_,goog.events.InputHandler.EventType.INPUT,this.onInputEvent_);a.listen(this.menu_,goog.ui.Component.EventType.ACTION,this.onMenuSelected_)};goog.ui.ComboBox.prototype.exitDocument=function(){this.keyHandler_.dispose();delete this.keyHandler_;this.inputHandler_.dispose();this.inputHandler_=null;goog.ui.ComboBox.superClass_.exitDocument.call(this)};goog.ui.ComboBox.prototype.canDecorate=function(){return!1};
goog.ui.ComboBox.prototype.disposeInternal=function(){goog.ui.ComboBox.superClass_.disposeInternal.call(this);this.clearDismissTimer_();this.labelInput_.dispose();this.menu_.dispose();this.button_=this.input_=this.menu_=this.labelInput_=null};goog.ui.ComboBox.prototype.dismiss=function(){this.clearDismissTimer_();this.hideMenu_();this.menu_.setHighlightedIndex(-1)};goog.ui.ComboBox.prototype.addItem=function(a){this.menu_.addChild(a,!0);this.visibleCount_=-1};
goog.ui.ComboBox.prototype.addItemAt=function(a,b){this.menu_.addChildAt(a,b,!0);this.visibleCount_=-1};goog.ui.ComboBox.prototype.removeItem=function(a){if(a=this.menu_.removeChild(a,!0))a.dispose(),this.visibleCount_=-1};goog.ui.ComboBox.prototype.removeAllItems=function(){for(var a=this.getItemCount()-1;0<=a;--a)this.removeItem(this.getItemAt(a))};goog.ui.ComboBox.prototype.removeItemAt=function(a){if(a=this.menu_.removeChildAt(a,!0))a.dispose(),this.visibleCount_=-1};
goog.ui.ComboBox.prototype.getItemAt=function(a){return this.menu_.getChildAt(a)};goog.ui.ComboBox.prototype.getItemCount=function(){return this.menu_.getChildCount()};goog.ui.ComboBox.prototype.getMenu=function(){return this.menu_};goog.ui.ComboBox.prototype.getInputElement=function(){return this.input_};goog.ui.ComboBox.prototype.getLabelInput=function(){return this.labelInput_};
goog.ui.ComboBox.prototype.getNumberOfVisibleItems_=function(){if(-1==this.visibleCount_){for(var a=0,b=0,c=this.menu_.getChildCount();b<c;b++){var d=this.menu_.getChildAt(b);d instanceof goog.ui.MenuSeparator||!d.isVisible()||a++}this.visibleCount_=a}return this.visibleCount_};goog.ui.ComboBox.prototype.setMatchFunction=function(a){this.matchFunction_=a};goog.ui.ComboBox.prototype.getMatchFunction=function(){return this.matchFunction_};
goog.ui.ComboBox.prototype.setDefaultText=function(a){this.defaultText_=a;this.labelInput_&&this.labelInput_.setLabel(this.defaultText_)};goog.ui.ComboBox.prototype.getDefaultText=function(){return this.defaultText_};goog.ui.ComboBox.prototype.setFieldName=function(a){this.fieldName_=a};goog.ui.ComboBox.prototype.getFieldName=function(){return this.fieldName_};goog.ui.ComboBox.prototype.setUseDropdownArrow=function(a){this.useDropdownArrow_=!!a};
goog.ui.ComboBox.prototype.setValue=function(a){this.labelInput_.getValue()!=a&&(this.labelInput_.setValue(a),this.handleInputChange_())};goog.ui.ComboBox.prototype.getValue=function(){return this.labelInput_.getValue()};goog.ui.ComboBox.prototype.getToken=function(){return goog.string.htmlEscape(this.getTokenText_())};goog.ui.ComboBox.prototype.getTokenText_=function(){return goog.string.trim(this.labelInput_.getValue().toLowerCase())};
goog.ui.ComboBox.prototype.setupMenu_=function(){var a=this.menu_;a.setVisible(!1);a.setAllowAutoFocus(!1);a.setAllowHighlightDisabled(!0)};
goog.ui.ComboBox.prototype.maybeShowMenu_=function(a){var b=this.menu_.isVisible(),c=this.getNumberOfVisibleItems_();b&&0==c?(goog.log.fine(this.logger_,"no matching items, hiding"),this.hideMenu_()):!b&&0<c&&(a&&(goog.log.fine(this.logger_,"showing menu"),this.setItemVisibilityFromToken_(""),this.setItemHighlightFromToken_(this.getTokenText_())),goog.Timer.callOnce(this.clearDismissTimer_,1,this),this.showMenu_());this.positionMenu()};
goog.ui.ComboBox.prototype.positionMenu=function(){this.menu_&&this.menu_.isVisible()&&(new goog.positioning.MenuAnchoredPosition(this.getElement(),goog.positioning.Corner.BOTTOM_START,!0)).reposition(this.menu_.getElement(),goog.positioning.Corner.TOP_START)};goog.ui.ComboBox.prototype.showMenu_=function(){this.menu_.setVisible(!0);goog.dom.classlist.add(goog.asserts.assert(this.getElement()),"goog-combobox-active")};
goog.ui.ComboBox.prototype.hideMenu_=function(){this.menu_.setVisible(!1);goog.dom.classlist.remove(goog.asserts.assert(this.getElement()),"goog-combobox-active")};goog.ui.ComboBox.prototype.clearDismissTimer_=function(){this.dismissTimer_&&(goog.Timer.clear(this.dismissTimer_),this.dismissTimer_=null)};
goog.ui.ComboBox.prototype.onComboMouseDown_=function(a){this.enabled_&&(a.target==this.getElement()||a.target==this.input_||goog.dom.contains(this.button_,a.target))&&(this.menu_.isVisible()?(goog.log.fine(this.logger_,"Menu is visible, dismissing"),this.dismiss()):(goog.log.fine(this.logger_,"Opening dropdown"),this.maybeShowMenu_(!0),goog.userAgent.OPERA&&this.input_.focus(),this.input_.select(),this.menu_.setMouseButtonPressed(!0),a.preventDefault()));a.stopPropagation()};
goog.ui.ComboBox.prototype.onDocClicked_=function(a){goog.dom.contains(this.menu_.getElement(),a.target)||this.dismiss()};goog.ui.ComboBox.prototype.onMenuSelected_=function(a){var b=a.target;this.dispatchEvent(new goog.ui.ItemEvent(goog.ui.Component.EventType.ACTION,this,b))&&(b=b.getCaption(),goog.log.fine(this.logger_,"Menu selection: "+b+". Dismissing menu"),this.labelInput_.getValue()!=b&&(this.labelInput_.setValue(b),this.dispatchEvent(goog.ui.Component.EventType.CHANGE)),this.dismiss());a.stopPropagation()};
goog.ui.ComboBox.prototype.onInputBlur_=function(a){this.clearDismissTimer_();this.dismissTimer_=goog.Timer.callOnce(this.dismiss,goog.ui.ComboBox.BLUR_DISMISS_TIMER_MS,this)};
goog.ui.ComboBox.prototype.handleKeyEvent=function(a){var b=this.menu_.isVisible();if(b&&this.menu_.handleKeyEvent(a))return!0;var c=!1;switch(a.keyCode){case goog.events.KeyCodes.ESC:b&&(goog.log.fine(this.logger_,"Dismiss on Esc: "+this.labelInput_.getValue()),this.dismiss(),c=!0);break;case goog.events.KeyCodes.TAB:b&&(b=this.menu_.getHighlighted())&&(goog.log.fine(this.logger_,"Select on Tab: "+this.labelInput_.getValue()),b.performActionInternal(a),c=!0);break;case goog.events.KeyCodes.UP:case goog.events.KeyCodes.DOWN:b||
(goog.log.fine(this.logger_,"Up/Down - maybe show menu"),this.maybeShowMenu_(!0),c=!0)}c&&a.preventDefault();return c};goog.ui.ComboBox.prototype.onInputEvent_=function(a){goog.log.fine(this.logger_,"Key is modifying: "+this.labelInput_.getValue());this.handleInputChange_()};
goog.ui.ComboBox.prototype.handleInputChange_=function(){var a=this.getTokenText_();this.setItemVisibilityFromToken_(a);goog.dom.getActiveElement(this.getDomHelper().getDocument())==this.input_&&this.maybeShowMenu_(!1);var b=this.menu_.getHighlighted();""!=a&&b&&b.isVisible()||this.setItemHighlightFromToken_(a);this.lastToken_=a;this.dispatchEvent(goog.ui.Component.EventType.CHANGE)};
goog.ui.ComboBox.prototype.setItemVisibilityFromToken_=function(a){for(var b=!1,c=0,d=!this.matchFunction_(a,this.lastToken_),e=0,f=this.menu_.getChildCount();e<f;e++){var g=this.menu_.getChildAt(e);if(g instanceof goog.ui.MenuSeparator)g.setVisible(b),b=!1;else if(g instanceof goog.ui.MenuItem){if(!g.isVisible()&&!d)continue;var h=g.getCaption();h=this.isItemSticky_(g)||h&&this.matchFunction_(h.toLowerCase(),a);"function"==typeof g.setFormatFromToken&&g.setFormatFromToken(a);g.setVisible(!!h);b=
h||b}else b=g.isVisible()||b;g instanceof goog.ui.MenuSeparator||!g.isVisible()||c++}this.visibleCount_=c};goog.ui.ComboBox.prototype.setItemHighlightFromToken_=function(a){if(""!=a)for(var b=0,c=this.menu_.getChildCount();b<c;b++){var d=this.menu_.getChildAt(b),e=d.getCaption();if(e&&this.matchFunction_(e.toLowerCase(),a)){this.menu_.setHighlightedIndex(b);d.setFormatFromToken&&d.setFormatFromToken(a);return}}this.menu_.setHighlightedIndex(-1)};
goog.ui.ComboBox.prototype.isItemSticky_=function(a){return"function"==typeof a.isSticky&&a.isSticky()};goog.ui.ComboBoxItem=function(a,b,c,d){goog.ui.MenuItem.call(this,a,b,c,d)};goog.inherits(goog.ui.ComboBoxItem,goog.ui.MenuItem);goog.tagUnsealableClass(goog.ui.ComboBoxItem);goog.ui.registry.setDecoratorByClassName("goog-combobox-item",function(){return new goog.ui.ComboBoxItem(null)});goog.ui.ComboBoxItem.prototype.isSticky_=!1;
goog.ui.ComboBoxItem.prototype.setSticky=function(a){this.isSticky_=a};goog.ui.ComboBoxItem.prototype.isSticky=function(){return this.isSticky_};goog.ui.ComboBoxItem.prototype.setFormatFromToken=function(a){if(this.isEnabled()){var b=this.getCaption(),c=b.toLowerCase().indexOf(a);if(0<=c){var d=this.getDomHelper();this.setContent([d.createTextNode(b.substr(0,c)),d.createDom("B",null,b.substr(c,a.length)),d.createTextNode(b.substr(c+a.length))])}}};goog.dom.ViewportSizeMonitor=function(a){goog.events.EventTarget.call(this);this.window_=a||window;this.listenerKey_=goog.events.listen(this.window_,goog.events.EventType.RESIZE,this.handleResize_,!1,this);this.size_=goog.dom.getViewportSize(this.window_)};goog.inherits(goog.dom.ViewportSizeMonitor,goog.events.EventTarget);
goog.dom.ViewportSizeMonitor.getInstanceForWindow=function(a){a=a||window;var b=goog.getUid(a);return goog.dom.ViewportSizeMonitor.windowInstanceMap_[b]=goog.dom.ViewportSizeMonitor.windowInstanceMap_[b]||new goog.dom.ViewportSizeMonitor(a)};goog.dom.ViewportSizeMonitor.removeInstanceForWindow=function(a){a=goog.getUid(a||window);goog.dispose(goog.dom.ViewportSizeMonitor.windowInstanceMap_[a]);delete goog.dom.ViewportSizeMonitor.windowInstanceMap_[a]};
goog.dom.ViewportSizeMonitor.windowInstanceMap_={};goog.dom.ViewportSizeMonitor.prototype.getSize=function(){return this.size_?this.size_.clone():null};goog.dom.ViewportSizeMonitor.prototype.disposeInternal=function(){goog.dom.ViewportSizeMonitor.superClass_.disposeInternal.call(this);this.listenerKey_&&(goog.events.unlistenByKey(this.listenerKey_),this.listenerKey_=null);this.size_=this.window_=null};
goog.dom.ViewportSizeMonitor.prototype.handleResize_=function(a){a=goog.dom.getViewportSize(this.window_);goog.math.Size.equals(a,this.size_)||(this.size_=a,this.dispatchEvent(goog.events.EventType.RESIZE))};goog.dom.BufferedViewportSizeMonitor=function(a,b){goog.events.EventTarget.call(this);this.viewportSizeMonitor_=a;this.currentSize_=this.viewportSizeMonitor_.getSize();this.resizeBufferMs_=b||goog.dom.BufferedViewportSizeMonitor.RESIZE_EVENT_DELAY_MS_;this.listenerKey_=goog.events.listen(a,goog.events.EventType.RESIZE,this.handleResize_,!1,this)};goog.inherits(goog.dom.BufferedViewportSizeMonitor,goog.events.EventTarget);
goog.dom.BufferedViewportSizeMonitor.EventType={RESIZE_HEIGHT:goog.events.getUniqueId("resizeheight"),RESIZE_WIDTH:goog.events.getUniqueId("resizewidth")};goog.dom.BufferedViewportSizeMonitor.RESIZE_EVENT_DELAY_MS_=100;goog.dom.BufferedViewportSizeMonitor.prototype.disposeInternal=function(){goog.events.unlistenByKey(this.listenerKey_);goog.dom.BufferedViewportSizeMonitor.superClass_.disposeInternal.call(this)};
goog.dom.BufferedViewportSizeMonitor.prototype.handleResize_=function(){this.resizeDelay_||(this.resizeDelay_=new goog.async.Delay(this.onWindowResize_,this.resizeBufferMs_,this),this.registerDisposable(this.resizeDelay_));this.resizeDelay_.start()};
goog.dom.BufferedViewportSizeMonitor.prototype.onWindowResize_=function(){if(!this.viewportSizeMonitor_.isDisposed()){var a=this.currentSize_,b=this.viewportSizeMonitor_.getSize();goog.asserts.assert(b,"Viewport size should be set at this point");this.currentSize_=b;if(a){var c=!1;a.width!=b.width&&(this.dispatchEvent(goog.dom.BufferedViewportSizeMonitor.EventType.RESIZE_WIDTH),c=!0);a.height!=b.height&&(this.dispatchEvent(goog.dom.BufferedViewportSizeMonitor.EventType.RESIZE_HEIGHT),c=!0);c&&this.dispatchEvent(goog.events.EventType.RESIZE)}else this.dispatchEvent(goog.dom.BufferedViewportSizeMonitor.EventType.RESIZE_HEIGHT),
this.dispatchEvent(goog.dom.BufferedViewportSizeMonitor.EventType.RESIZE_WIDTH),this.dispatchEvent(goog.events.EventType.RESIZE)}};goog.dom.BufferedViewportSizeMonitor.prototype.getSize=function(){return this.currentSize_?this.currentSize_.clone():null};goog.positioning.AbsolutePosition=function(a,b){this.coordinate=a instanceof goog.math.Coordinate?a:new goog.math.Coordinate(a,b)};goog.inherits(goog.positioning.AbsolutePosition,goog.positioning.AbstractPosition);goog.positioning.AbsolutePosition.prototype.reposition=function(a,b,c,d){goog.positioning.positionAtCoordinate(this.coordinate,a,b,c,null,null,d)};goog.ui.Popup=function(a,b){this.popupCorner_=goog.positioning.Corner.TOP_START;this.position_=b||void 0;goog.ui.PopupBase.call(this,a)};goog.inherits(goog.ui.Popup,goog.ui.PopupBase);goog.tagUnsealableClass(goog.ui.Popup);goog.ui.Popup.prototype.getPinnedCorner=function(){return this.popupCorner_};goog.ui.Popup.prototype.setPinnedCorner=function(a){this.popupCorner_=a;this.isVisible()&&this.reposition()};goog.ui.Popup.prototype.getPosition=function(){return this.position_||null};
goog.ui.Popup.prototype.setPosition=function(a){this.position_=a||void 0;this.isVisible()&&this.reposition()};goog.ui.Popup.prototype.getMargin=function(){return this.margin_||null};goog.ui.Popup.prototype.setMargin=function(a,b,c,d){this.margin_=null==a||a instanceof goog.math.Box?a:new goog.math.Box(a,b,c,d);this.isVisible()&&this.reposition()};
goog.ui.Popup.prototype.reposition=function(){if(this.position_){var a=!this.isVisible()&&this.getType()!=goog.ui.PopupBase.Type.MOVE_OFFSCREEN,b=this.getElement();a&&(b.style.visibility="hidden",goog.style.setElementShown(b,!0));this.position_.reposition(b,this.popupCorner_,this.margin_);a&&goog.style.setElementShown(b,!1)}};goog.ui.Bubble=function(a,b,c){goog.ui.Component.call(this,c);goog.isString(a)&&(a=goog.html.SafeHtml.htmlEscape(a));this.message_=a;this.popup_=new goog.ui.Popup;this.config_=b||goog.ui.Bubble.defaultConfig;this.closeButtonId_=this.makeId("cb");this.messageId_=this.makeId("mi")};goog.inherits(goog.ui.Bubble,goog.ui.Component);goog.tagUnsealableClass(goog.ui.Bubble);goog.ui.Bubble.prototype.timeout_=null;goog.ui.Bubble.prototype.timerId_=0;goog.ui.Bubble.prototype.listener_=null;
goog.ui.Bubble.prototype.createDom=function(){goog.ui.Bubble.superClass_.createDom.call(this);var a=this.getElement();a.style.position="absolute";a.style.visibility="hidden";this.popup_.setElement(a)};goog.ui.Bubble.prototype.attach=function(a){this.setAnchoredPosition_(a,this.computePinnedCorner_(a))};goog.ui.Bubble.prototype.setPinnedCorner=function(a){this.popup_.setPinnedCorner(a)};
goog.ui.Bubble.prototype.setPosition=function(a){if(a instanceof goog.positioning.AbsolutePosition)this.popup_.setPosition(a);else if(a instanceof goog.positioning.AnchoredPosition)this.setAnchoredPosition_(a.element,a.corner);else throw Error("Bubble only supports absolute and anchored positions!");};goog.ui.Bubble.prototype.setTimeout=function(a){this.timeout_=a};goog.ui.Bubble.prototype.setAutoHide=function(a){this.popup_.setAutoHide(a)};
goog.ui.Bubble.prototype.setVisible=function(a){a&&!this.popup_.isVisible()&&this.configureElement_();this.popup_.setVisible(a);this.popup_.isVisible()||this.unconfigureElement_()};goog.ui.Bubble.prototype.isVisible=function(){return this.popup_.isVisible()};goog.ui.Bubble.prototype.disposeInternal=function(){this.unconfigureElement_();this.popup_.dispose();this.popup_=null;goog.ui.Bubble.superClass_.disposeInternal.call(this)};
goog.ui.Bubble.prototype.configureElement_=function(){if(!this.isInDocument())throw Error("You must render the bubble before showing it!");var a=this.getElement(),b=this.popup_.getPinnedCorner();goog.dom.safe.setInnerHtml(a,this.computeHtmlForCorner_(b));this.message_ instanceof goog.html.SafeHtml||(a=this.getDomHelper().getElement(this.messageId_),this.getDomHelper().appendChild(a,this.message_));a=this.getDomHelper().getElement(this.closeButtonId_);this.listener_=goog.events.listen(a,goog.events.EventType.CLICK,
this.hideBubble_,!1,this);this.timeout_&&(this.timerId_=goog.Timer.callOnce(this.hideBubble_,this.timeout_,this))};goog.ui.Bubble.prototype.unconfigureElement_=function(){this.listener_&&(goog.events.unlistenByKey(this.listener_),this.listener_=null);this.timerId_&&(goog.Timer.clear(this.timerId_),this.timerId_=null);var a=this.getElement();a&&(this.getDomHelper().removeChildren(a),goog.dom.safe.setInnerHtml(a,goog.html.SafeHtml.EMPTY))};
goog.ui.Bubble.prototype.setAnchoredPosition_=function(a,b){this.popup_.setPinnedCorner(b);var c=this.createMarginForCorner_(b);this.popup_.setMargin(c);b=goog.positioning.flipCorner(b);this.popup_.setPosition(new goog.positioning.AnchoredPosition(a,b))};goog.ui.Bubble.prototype.hideBubble_=function(){this.setVisible(!1)};goog.ui.Bubble.prototype.getComputedAnchoredPosition=function(a){return new goog.positioning.AnchoredPosition(a,this.computePinnedCorner_(a))};
goog.ui.Bubble.prototype.computePinnedCorner_=function(a){var b=this.getDomHelper().getOwnerDocument(a),c=goog.style.getClientViewportElement(b);b=c.offsetWidth;c=c.offsetHeight;var d=goog.style.getPageOffset(a);a=goog.style.getSize(a);var e=0;b-d.x-a.width>d.x&&(e+=1);c-d.y-a.height>d.y&&(e+=2);return goog.ui.Bubble.corners_[e]};
goog.ui.Bubble.prototype.createMarginForCorner_=function(a){var b=new goog.math.Box(0,0,0,0);a&goog.positioning.CornerBit.RIGHT?b.right-=this.config_.marginShift:b.left-=this.config_.marginShift;return b};
goog.ui.Bubble.prototype.computeHtmlForCorner_=function(a){switch(a){case goog.positioning.Corner.TOP_LEFT:a=this.config_.cssBubbleTopLeftAnchor;var b=this.config_.cssBubbleBottomNoAnchor;break;case goog.positioning.Corner.TOP_RIGHT:a=this.config_.cssBubbleTopRightAnchor;b=this.config_.cssBubbleBottomNoAnchor;break;case goog.positioning.Corner.BOTTOM_LEFT:a=this.config_.cssBubbleTopNoAnchor;b=this.config_.cssBubbleBottomLeftAnchor;break;case goog.positioning.Corner.BOTTOM_RIGHT:a=this.config_.cssBubbleTopNoAnchor;
b=this.config_.cssBubbleBottomRightAnchor;break;default:throw Error("This corner type is not supported by bubble!");}var c=this.message_ instanceof goog.html.SafeHtml?this.message_:goog.html.SafeHtml.create("div",{id:this.messageId_});a=goog.html.SafeHtml.concat(goog.html.SafeHtml.create("tr",{},goog.html.SafeHtml.create("td",{colspan:4,"class":a})),goog.html.SafeHtml.create("tr",{},goog.html.SafeHtml.concat(goog.html.SafeHtml.create("td",{"class":this.config_.cssBubbleLeft}),goog.html.SafeHtml.create("td",
{"class":this.config_.cssBubbleFont,style:goog.string.Const.from("padding:0 4px;background:white")},c),goog.html.SafeHtml.create("td",{id:this.closeButtonId_,"class":this.config_.cssCloseButton}),goog.html.SafeHtml.create("td",{"class":this.config_.cssBubbleRight}))),goog.html.SafeHtml.create("tr",{},goog.html.SafeHtml.create("td",{colspan:4,"class":b})));return goog.html.SafeHtml.create("table",{border:0,cellspacing:0,cellpadding:0,width:this.config_.bubbleWidth,style:goog.string.Const.from("z-index:1")},
a)};
goog.ui.Bubble.defaultConfig={bubbleWidth:147,marginShift:60,cssBubbleFont:"goog-bubble-font",cssCloseButton:"goog-bubble-close-button",cssBubbleTopRightAnchor:"goog-bubble-top-right-anchor",cssBubbleTopLeftAnchor:"goog-bubble-top-left-anchor",cssBubbleTopNoAnchor:"goog-bubble-top-no-anchor",cssBubbleBottomRightAnchor:"goog-bubble-bottom-right-anchor",cssBubbleBottomLeftAnchor:"goog-bubble-bottom-left-anchor",cssBubbleBottomNoAnchor:"goog-bubble-bottom-no-anchor",cssBubbleLeft:"goog-bubble-left",cssBubbleRight:"goog-bubble-right"};
goog.ui.Bubble.corners_=[goog.positioning.Corner.BOTTOM_RIGHT,goog.positioning.Corner.BOTTOM_LEFT,goog.positioning.Corner.TOP_RIGHT,goog.positioning.Corner.TOP_LEFT];goog.ui.ToolbarSeparatorRenderer=function(){goog.ui.MenuSeparatorRenderer.call(this)};goog.inherits(goog.ui.ToolbarSeparatorRenderer,goog.ui.MenuSeparatorRenderer);goog.addSingletonGetter(goog.ui.ToolbarSeparatorRenderer);goog.ui.ToolbarSeparatorRenderer.CSS_CLASS="goog-toolbar-separator";goog.ui.ToolbarSeparatorRenderer.prototype.createDom=function(a){return a.getDomHelper().createDom("DIV",this.getClassNames(a).join(" ")+" "+goog.ui.INLINE_BLOCK_CLASSNAME,"\u00a0")};
goog.ui.ToolbarSeparatorRenderer.prototype.decorate=function(a,b){b=goog.ui.ToolbarSeparatorRenderer.superClass_.decorate.call(this,a,b);goog.asserts.assert(b);goog.dom.classlist.add(b,goog.ui.INLINE_BLOCK_CLASSNAME);return b};goog.ui.ToolbarSeparatorRenderer.prototype.getCssClass=function(){return goog.ui.ToolbarSeparatorRenderer.CSS_CLASS};goog.ui.ToolbarRenderer=function(){goog.ui.ContainerRenderer.call(this,goog.a11y.aria.Role.TOOLBAR)};goog.inherits(goog.ui.ToolbarRenderer,goog.ui.ContainerRenderer);goog.addSingletonGetter(goog.ui.ToolbarRenderer);goog.ui.ToolbarRenderer.CSS_CLASS="goog-toolbar";goog.ui.ToolbarRenderer.prototype.getDecoratorForChild=function(a){return"HR"==a.tagName?new goog.ui.Separator(goog.ui.ToolbarSeparatorRenderer.getInstance()):goog.ui.ToolbarRenderer.superClass_.getDecoratorForChild.call(this,a)};
goog.ui.ToolbarRenderer.prototype.getCssClass=function(){return goog.ui.ToolbarRenderer.CSS_CLASS};goog.ui.ToolbarRenderer.prototype.getDefaultOrientation=function(){return goog.ui.Container.Orientation.HORIZONTAL};goog.ui.Toolbar=function(a,b,c){goog.ui.Container.call(this,b,a||goog.ui.ToolbarRenderer.getInstance(),c)};goog.inherits(goog.ui.Toolbar,goog.ui.Container);goog.ui.Toolbar.prototype.handleFocus=function(a){goog.ui.Toolbar.superClass_.handleFocus.call(this,a);this.isMouseButtonPressed()||this.highlightFirst()};goog.positioning.ViewportPosition=function(a,b){this.coordinate=a instanceof goog.math.Coordinate?a:new goog.math.Coordinate(a,b)};goog.inherits(goog.positioning.ViewportPosition,goog.positioning.AbstractPosition);goog.positioning.ViewportPosition.prototype.reposition=function(a,b,c,d){goog.positioning.positionAtAnchor(goog.style.getClientViewportElement(a),goog.positioning.Corner.TOP_LEFT,a,b,this.coordinate,c,null,d)};goog.ui.Tooltip=function(a,b,c){this.dom_=c||(a?goog.dom.getDomHelper(goog.dom.getElement(a)):goog.dom.getDomHelper());goog.ui.Popup.call(this,this.dom_.createDom("DIV",{style:"position:absolute;display:none;"}));this.cursorPosition=new goog.math.Coordinate(1,1);this.elements_=new goog.structs.Set;this.tooltipFocusHandler_=null;a&&this.attach(a);null!=b&&this.setText(b)};goog.inherits(goog.ui.Tooltip,goog.ui.Popup);goog.tagUnsealableClass(goog.ui.Tooltip);goog.ui.Tooltip.activeInstances_=[];
goog.ui.Tooltip.prototype.activeEl_=null;goog.ui.Tooltip.prototype.className="goog-tooltip";goog.ui.Tooltip.prototype.showDelayMs_=500;goog.ui.Tooltip.prototype.hideDelayMs_=0;goog.ui.Tooltip.State={INACTIVE:0,WAITING_TO_SHOW:1,SHOWING:2,WAITING_TO_HIDE:3,UPDATING:4};goog.ui.Tooltip.Activation={CURSOR:0,FOCUS:1};goog.ui.Tooltip.prototype.getDomHelper=function(){return this.dom_};goog.ui.Tooltip.prototype.getChildTooltip=function(){return this.childTooltip_};
goog.ui.Tooltip.prototype.attach=function(a){a=goog.dom.getElement(a);this.elements_.add(a);goog.events.listen(a,goog.events.EventType.MOUSEOVER,this.handleMouseOver,!1,this);goog.events.listen(a,goog.events.EventType.MOUSEOUT,this.handleMouseOutAndBlur,!1,this);goog.events.listen(a,goog.events.EventType.MOUSEMOVE,this.handleMouseMove,!1,this);goog.events.listen(a,goog.events.EventType.FOCUS,this.handleFocus,!1,this);goog.events.listen(a,goog.events.EventType.BLUR,this.handleMouseOutAndBlur,!1,this)};
goog.ui.Tooltip.prototype.detach=function(a){if(a)a=goog.dom.getElement(a),this.detachElement_(a),this.elements_.remove(a);else{for(var b=this.elements_.getValues(),c=0;a=b[c];c++)this.detachElement_(a);this.elements_.clear()}};
goog.ui.Tooltip.prototype.detachElement_=function(a){goog.events.unlisten(a,goog.events.EventType.MOUSEOVER,this.handleMouseOver,!1,this);goog.events.unlisten(a,goog.events.EventType.MOUSEOUT,this.handleMouseOutAndBlur,!1,this);goog.events.unlisten(a,goog.events.EventType.MOUSEMOVE,this.handleMouseMove,!1,this);goog.events.unlisten(a,goog.events.EventType.FOCUS,this.handleFocus,!1,this);goog.events.unlisten(a,goog.events.EventType.BLUR,this.handleMouseOutAndBlur,!1,this)};
goog.ui.Tooltip.prototype.setShowDelayMs=function(a){this.showDelayMs_=a};goog.ui.Tooltip.prototype.getShowDelayMs=function(){return this.showDelayMs_};goog.ui.Tooltip.prototype.setHideDelayMs=function(a){this.hideDelayMs_=a};goog.ui.Tooltip.prototype.getHideDelayMs=function(){return this.hideDelayMs_};goog.ui.Tooltip.prototype.setText=function(a){goog.dom.setTextContent(this.getElement(),a)};
goog.ui.Tooltip.prototype.setSafeHtml=function(a){var b=this.getElement();b&&goog.dom.safe.setInnerHtml(b,a)};goog.ui.Tooltip.prototype.setElement=function(a){var b=this.getElement();b&&goog.dom.removeNode(b);goog.ui.Tooltip.superClass_.setElement.call(this,a);a?(b=this.dom_.getDocument().body,b.insertBefore(a,b.lastChild),this.registerContentFocusEvents_()):(goog.dispose(this.tooltipFocusHandler_),this.tooltipFocusHandler_=null)};
goog.ui.Tooltip.prototype.registerContentFocusEvents_=function(){goog.dispose(this.tooltipFocusHandler_);this.tooltipFocusHandler_=new goog.events.FocusHandler(goog.asserts.assert(this.getElement()));this.registerDisposable(this.tooltipFocusHandler_);goog.events.listen(this.tooltipFocusHandler_,goog.events.FocusHandler.EventType.FOCUSIN,this.clearHideTimer,void 0,this);goog.events.listen(this.tooltipFocusHandler_,goog.events.FocusHandler.EventType.FOCUSOUT,this.startHideTimer,void 0,this)};
goog.ui.Tooltip.prototype.getText=function(){return goog.dom.getTextContent(this.getElement())};goog.ui.Tooltip.prototype.getHtml=function(){return this.getElement().innerHTML};goog.ui.Tooltip.prototype.getState=function(){return this.showTimer?this.isVisible()?goog.ui.Tooltip.State.UPDATING:goog.ui.Tooltip.State.WAITING_TO_SHOW:this.hideTimer?goog.ui.Tooltip.State.WAITING_TO_HIDE:this.isVisible()?goog.ui.Tooltip.State.SHOWING:goog.ui.Tooltip.State.INACTIVE};
goog.ui.Tooltip.prototype.setRequireInteraction=function(a){this.requireInteraction_=a};goog.ui.Tooltip.prototype.isCoordinateInTooltip=function(a){if(!this.isVisible())return!1;var b=goog.style.getPageOffset(this.getElement()),c=goog.style.getSize(this.getElement());return b.x<=a.x&&a.x<=b.x+c.width&&b.y<=a.y&&a.y<=b.y+c.height};
goog.ui.Tooltip.prototype.onBeforeShow=function(){if(!goog.ui.PopupBase.prototype.onBeforeShow.call(this))return!1;if(this.anchor)for(var a,b=0;a=goog.ui.Tooltip.activeInstances_[b];b++)goog.dom.contains(a.getElement(),this.anchor)||a.setVisible(!1);goog.array.insert(goog.ui.Tooltip.activeInstances_,this);a=this.getElement();a.className=this.className;this.clearHideTimer();goog.events.listen(a,goog.events.EventType.MOUSEOVER,this.handleTooltipMouseOver,!1,this);goog.events.listen(a,goog.events.EventType.MOUSEOUT,
this.handleTooltipMouseOut,!1,this);this.clearShowTimer();return!0};
goog.ui.Tooltip.prototype.onHide=function(){goog.array.remove(goog.ui.Tooltip.activeInstances_,this);for(var a=this.getElement(),b,c=0;b=goog.ui.Tooltip.activeInstances_[c];c++)b.anchor&&goog.dom.contains(a,b.anchor)&&b.setVisible(!1);this.parentTooltip_&&this.parentTooltip_.startHideTimer();goog.events.unlisten(a,goog.events.EventType.MOUSEOVER,this.handleTooltipMouseOver,!1,this);goog.events.unlisten(a,goog.events.EventType.MOUSEOUT,this.handleTooltipMouseOut,!1,this);this.anchor=void 0;this.getState()==
goog.ui.Tooltip.State.INACTIVE&&(this.seenInteraction_=!1);goog.ui.PopupBase.prototype.onHide.call(this)};goog.ui.Tooltip.prototype.maybeShow=function(a,b){this.anchor==a&&this.elements_.contains(this.anchor)&&(this.seenInteraction_||!this.requireInteraction_?(this.setVisible(!1),this.isVisible()||this.positionAndShow_(a,b)):this.anchor=void 0);this.showTimer=void 0};goog.ui.Tooltip.prototype.getElements=function(){return this.elements_};goog.ui.Tooltip.prototype.getActiveElement=function(){return this.activeEl_};
goog.ui.Tooltip.prototype.setActiveElement=function(a){this.activeEl_=a};goog.ui.Tooltip.prototype.showForElement=function(a,b){this.attach(a);this.activeEl_=a;this.positionAndShow_(a,b)};goog.ui.Tooltip.prototype.positionAndShow_=function(a,b){this.anchor=a;this.setPosition(b||this.getPositioningStrategy(goog.ui.Tooltip.Activation.CURSOR));this.setVisible(!0)};
goog.ui.Tooltip.prototype.maybeHide=function(a){this.hideTimer=void 0;if(a==this.anchor){a=this.getDomHelper();var b=a.getActiveElement();a=b&&this.getElement()&&a.contains(this.getElement(),b);null!=this.activeEl_&&(this.activeEl_==this.getElement()||this.elements_.contains(this.activeEl_))||a||this.hasActiveChild()||this.setVisible(!1)}};goog.ui.Tooltip.prototype.hasActiveChild=function(){return!(!this.childTooltip_||!this.childTooltip_.activeEl_)};
goog.ui.Tooltip.prototype.saveCursorPosition_=function(a){var b=this.dom_.getDocumentScroll();this.cursorPosition.x=a.clientX+b.x;this.cursorPosition.y=a.clientY+b.y};goog.ui.Tooltip.prototype.handleMouseOver=function(a){var b=this.getAnchorFromElement(a.target);this.activeEl_=b;this.clearHideTimer();b!=this.anchor&&(this.anchor=b,this.startShowTimer(b),this.checkForParentTooltip_(),this.saveCursorPosition_(a))};
goog.ui.Tooltip.prototype.getAnchorFromElement=function(a){try{for(;a&&!this.elements_.contains(a);)a=a.parentNode;return a}catch(b){return null}};goog.ui.Tooltip.prototype.handleMouseMove=function(a){this.saveCursorPosition_(a);this.seenInteraction_=!0};
goog.ui.Tooltip.prototype.handleFocus=function(a){this.activeEl_=a=this.getAnchorFromElement(a.target);this.seenInteraction_=!0;if(this.anchor!=a){this.anchor=a;var b=this.getPositioningStrategy(goog.ui.Tooltip.Activation.FOCUS);this.clearHideTimer();this.startShowTimer(a,b);this.checkForParentTooltip_()}};goog.ui.Tooltip.prototype.getPositioningStrategy=function(a){return a==goog.ui.Tooltip.Activation.CURSOR?(a=this.cursorPosition.clone(),new goog.ui.Tooltip.CursorTooltipPosition(a)):new goog.ui.Tooltip.ElementTooltipPosition(this.activeEl_)};
goog.ui.Tooltip.prototype.checkForParentTooltip_=function(){if(this.anchor)for(var a,b=0;a=goog.ui.Tooltip.activeInstances_[b];b++)goog.dom.contains(a.getElement(),this.anchor)&&(a.childTooltip_=this,this.parentTooltip_=a)};
goog.ui.Tooltip.prototype.handleMouseOutAndBlur=function(a){var b=this.getAnchorFromElement(a.target),c=this.getAnchorFromElement(a.relatedTarget);b!=c&&(b==this.activeEl_&&(this.activeEl_=null),this.clearShowTimer(),this.seenInteraction_=!1,!this.isVisible()||a.relatedTarget&&goog.dom.contains(this.getElement(),a.relatedTarget)?this.anchor=void 0:this.startHideTimer())};
goog.ui.Tooltip.prototype.handleTooltipMouseOver=function(a){a=this.getElement();this.activeEl_!=a&&(this.clearHideTimer(),this.activeEl_=a)};goog.ui.Tooltip.prototype.handleTooltipMouseOut=function(a){var b=this.getElement();this.activeEl_!=b||a.relatedTarget&&goog.dom.contains(b,a.relatedTarget)||(this.activeEl_=null,this.startHideTimer())};goog.ui.Tooltip.prototype.startShowTimer=function(a,b){this.showTimer||(this.showTimer=goog.Timer.callOnce(goog.bind(this.maybeShow,this,a,b),this.showDelayMs_))};
goog.ui.Tooltip.prototype.clearShowTimer=function(){this.showTimer&&(goog.Timer.clear(this.showTimer),this.showTimer=void 0)};goog.ui.Tooltip.prototype.startHideTimer=function(){this.getState()==goog.ui.Tooltip.State.SHOWING&&(this.hideTimer=goog.Timer.callOnce(goog.bind(this.maybeHide,this,this.anchor),this.getHideDelayMs()))};goog.ui.Tooltip.prototype.clearHideTimer=function(){this.hideTimer&&(goog.Timer.clear(this.hideTimer),this.hideTimer=void 0)};
goog.ui.Tooltip.prototype.disposeInternal=function(){this.setVisible(!1);this.clearShowTimer();this.detach();this.getElement()&&goog.dom.removeNode(this.getElement());this.activeEl_=null;delete this.dom_;goog.ui.Tooltip.superClass_.disposeInternal.call(this)};goog.ui.Tooltip.CursorTooltipPosition=function(a,b){goog.positioning.ViewportPosition.call(this,a,b)};goog.inherits(goog.ui.Tooltip.CursorTooltipPosition,goog.positioning.ViewportPosition);
goog.ui.Tooltip.CursorTooltipPosition.prototype.reposition=function(a,b,c){b=goog.style.getClientViewportElement(a);b=goog.style.getVisibleRectForElement(b);c=c?new goog.math.Box(c.top+10,c.right,c.bottom,c.left+10):new goog.math.Box(10,0,0,10);goog.positioning.positionAtCoordinate(this.coordinate,a,goog.positioning.Corner.TOP_START,c,b,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.FAIL_Y)&goog.positioning.OverflowStatus.FAILED&&goog.positioning.positionAtCoordinate(this.coordinate,
a,goog.positioning.Corner.TOP_START,c,b,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.ADJUST_Y)};goog.ui.Tooltip.ElementTooltipPosition=function(a){goog.positioning.AnchoredPosition.call(this,a,goog.positioning.Corner.BOTTOM_RIGHT)};goog.inherits(goog.ui.Tooltip.ElementTooltipPosition,goog.positioning.AnchoredPosition);
goog.ui.Tooltip.ElementTooltipPosition.prototype.reposition=function(a,b,c){var d=new goog.math.Coordinate(10,0);goog.positioning.positionAtAnchor(this.element,this.corner,a,b,d,c,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.FAIL_Y)&goog.positioning.OverflowStatus.FAILED&&goog.positioning.positionAtAnchor(this.element,goog.positioning.Corner.TOP_RIGHT,a,goog.positioning.Corner.BOTTOM_LEFT,d,c,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.ADJUST_Y)};goog.ui.AdvancedTooltip=function(a,b,c){goog.ui.Tooltip.call(this,a,b,c)};goog.inherits(goog.ui.AdvancedTooltip,goog.ui.Tooltip);goog.tagUnsealableClass(goog.ui.AdvancedTooltip);goog.ui.AdvancedTooltip.prototype.cursorTracking_=!1;goog.ui.AdvancedTooltip.prototype.cursorTrackingHideDelayMs_=100;goog.ui.AdvancedTooltip.prototype.tracking_=!1;goog.ui.AdvancedTooltip.prototype.setHotSpotPadding=function(a){this.hotSpotPadding_=a||null};goog.ui.AdvancedTooltip.prototype.getHotSpotPadding=function(){return this.hotSpotPadding_};
goog.ui.AdvancedTooltip.prototype.setCursorTracking=function(a){this.cursorTracking_=a};goog.ui.AdvancedTooltip.prototype.getCursorTracking=function(){return this.cursorTracking_};goog.ui.AdvancedTooltip.prototype.setCursorTrackingHideDelayMs=function(a){this.cursorTrackingHideDelayMs_=a};goog.ui.AdvancedTooltip.prototype.getCursorTrackingHideDelayMs=function(){return this.cursorTrackingHideDelayMs_};
goog.ui.AdvancedTooltip.prototype.onShow=function(){goog.ui.AdvancedTooltip.superClass_.onShow.call(this);this.boundingBox_=goog.style.getBounds(this.getElement()).toBox();this.anchor&&(this.anchorBox_=goog.style.getBounds(this.anchor).toBox());this.tracking_=this.cursorTracking_;goog.events.listen(this.getDomHelper().getDocument(),goog.events.EventType.MOUSEMOVE,this.handleMouseMove,!1,this)};
goog.ui.AdvancedTooltip.prototype.onHide=function(){goog.events.unlisten(this.getDomHelper().getDocument(),goog.events.EventType.MOUSEMOVE,this.handleMouseMove,!1,this);this.anchorBox_=this.boundingBox_=null;this.tracking_=!1;goog.ui.AdvancedTooltip.superClass_.onHide.call(this)};goog.ui.AdvancedTooltip.prototype.isMouseInTooltip=function(){return this.isCoordinateInTooltip(this.cursorPosition)};
goog.ui.AdvancedTooltip.prototype.isCoordinateInTooltip=function(a){if(this.hotSpotPadding_){var b=goog.style.getPageOffset(this.getElement()),c=goog.style.getSize(this.getElement());return b.x-this.hotSpotPadding_.left<=a.x&&a.x<=b.x+c.width+this.hotSpotPadding_.right&&b.y-this.hotSpotPadding_.top<=a.y&&a.y<=b.y+c.height+this.hotSpotPadding_.bottom}return goog.ui.AdvancedTooltip.superClass_.isCoordinateInTooltip.call(this,a)};
goog.ui.AdvancedTooltip.prototype.isCoordinateActive_=function(a){if(this.anchorBox_&&this.anchorBox_.contains(a)||this.isCoordinateInTooltip(a))return!0;var b=this.getChildTooltip();return!!b&&b.isCoordinateInTooltip(a)};goog.ui.AdvancedTooltip.prototype.maybeHide=function(a){this.hideTimer=void 0;a!=this.anchor||this.isCoordinateActive_(this.cursorPosition)||this.getActiveElement()||this.hasActiveChild()||goog.userAgent.GECKO&&0==this.cursorPosition.x&&0==this.cursorPosition.y||this.setVisible(!1)};
goog.ui.AdvancedTooltip.prototype.handleMouseMove=function(a){var b=this.isVisible();if(this.boundingBox_){var c=this.getDomHelper().getDocumentScroll();c=new goog.math.Coordinate(a.clientX+c.x,a.clientY+c.y);this.isCoordinateActive_(c)?b=!1:this.tracking_&&(b=goog.math.Box.distance(this.boundingBox_,this.cursorPosition),b=goog.math.Box.distance(this.boundingBox_,c)>=b)}b?(this.startHideTimer(),this.setActiveElement(null),(b=this.getChildTooltip())&&b.setActiveElement(null)):this.getState()==goog.ui.Tooltip.State.WAITING_TO_HIDE&&
this.clearHideTimer();goog.ui.AdvancedTooltip.superClass_.handleMouseMove.call(this,a)};goog.ui.AdvancedTooltip.prototype.handleTooltipMouseOver=function(a){this.getActiveElement()!=this.getElement()&&(this.tracking_=!1,this.setActiveElement(this.getElement()))};goog.ui.AdvancedTooltip.prototype.getHideDelayMs=function(){return this.tracking_?this.cursorTrackingHideDelayMs_:goog.ui.AdvancedTooltip.superClass_.getHideDelayMs.call(this)};goog.ui.AdvancedTooltip.prototype.resetHotSpot=goog.nullFunction;goog.ui.HoverCard=function(a,b,c,d){goog.ui.AdvancedTooltip.call(this,null,null,c);goog.isFunction(a)?this.isAnchor_=a:this.anchors_=a;this.checkDescendants_=0!=b;this.tempAttachedAnchors_=[];this.document_=d||(c?c.getDocument():goog.dom.getDocument());goog.events.listen(this.document_,goog.events.EventType.MOUSEOVER,this.handleTriggerMouseOver_,!1,this)};goog.inherits(goog.ui.HoverCard,goog.ui.AdvancedTooltip);goog.tagUnsealableClass(goog.ui.HoverCard);
goog.ui.HoverCard.EventType={TRIGGER:"trigger",CANCEL_TRIGGER:"canceltrigger",BEFORE_SHOW:goog.ui.PopupBase.EventType.BEFORE_SHOW,SHOW:goog.ui.PopupBase.EventType.SHOW,BEFORE_HIDE:goog.ui.PopupBase.EventType.BEFORE_HIDE,HIDE:goog.ui.PopupBase.EventType.HIDE};goog.ui.HoverCard.prototype.disposeInternal=function(){goog.ui.HoverCard.superClass_.disposeInternal.call(this);goog.events.unlisten(this.document_,goog.events.EventType.MOUSEOVER,this.handleTriggerMouseOver_,!1,this)};
goog.ui.HoverCard.prototype.isAnchor_=function(a){return a.tagName in this.anchors_&&!!a.getAttribute(this.anchors_[a.tagName])};goog.ui.HoverCard.prototype.handleTriggerMouseOver_=function(a){if(a=a.target)this.isAnchor_(a)?(this.setPosition(null),this.triggerForElement(a)):this.checkDescendants_&&(a=goog.dom.getAncestor(a,goog.bind(this.isAnchor_,this),!1,this.maxSearchSteps_))&&(this.setPosition(null),this.triggerForElement(a))};
goog.ui.HoverCard.prototype.triggerForElement=function(a,b,c){if(a==this.currentAnchor_)this.clearHideTimer();else if(a!=this.anchor)if(this.maybeCancelTrigger_(),c=new goog.ui.HoverCard.TriggerEvent(goog.ui.HoverCard.EventType.TRIGGER,this,a,c),this.getElements().contains(a)||(this.attach(a),this.tempAttachedAnchors_.push(a)),this.anchor=a,this.onTrigger(c))b=b||this.getPosition(),this.startShowTimer(a,b);else this.onCancelTrigger()};
goog.ui.HoverCard.prototype.setCurrentAnchor_=function(a){a!=this.currentAnchor_&&this.detachTempAnchor_(this.currentAnchor_);this.currentAnchor_=a};goog.ui.HoverCard.prototype.detachTempAnchor_=function(a){if(a){var b=goog.array.indexOf(this.tempAttachedAnchors_,a);-1!=b&&(this.detach(a),this.tempAttachedAnchors_.splice(b,1))}};goog.ui.HoverCard.prototype.onTrigger=function(a){return this.dispatchEvent(a)};goog.ui.HoverCard.prototype.cancelTrigger=function(){this.clearShowTimer();this.onCancelTrigger()};
goog.ui.HoverCard.prototype.maybeCancelTrigger_=function(){this.getState()!=goog.ui.Tooltip.State.WAITING_TO_SHOW&&this.getState()!=goog.ui.Tooltip.State.UPDATING||this.cancelTrigger()};goog.ui.HoverCard.prototype.onCancelTrigger=function(){var a=new goog.ui.HoverCard.TriggerEvent(goog.ui.HoverCard.EventType.CANCEL_TRIGGER,this,this.anchor||null);this.dispatchEvent(a);this.detachTempAnchor_(this.anchor);delete this.anchor};
goog.ui.HoverCard.prototype.getAnchorElement=function(){return this.currentAnchor_||this.anchor};goog.ui.HoverCard.prototype.onHide=function(){goog.ui.HoverCard.superClass_.onHide.call(this);this.setCurrentAnchor_(null)};goog.ui.HoverCard.prototype.handleMouseOver=function(a){var b=this.getAnchorFromElement(a.target);b&&b!=this.anchor?this.triggerForElement(b):goog.ui.HoverCard.superClass_.handleMouseOver.call(this,a)};
goog.ui.HoverCard.prototype.handleMouseOutAndBlur=function(a){var b=this.anchor,c=this.getState();goog.ui.HoverCard.superClass_.handleMouseOutAndBlur.call(this,a);c==this.getState()||c!=goog.ui.Tooltip.State.WAITING_TO_SHOW&&c!=goog.ui.Tooltip.State.UPDATING||(this.anchor=b,this.onCancelTrigger())};goog.ui.HoverCard.prototype.maybeShow=function(a,b){goog.ui.HoverCard.superClass_.maybeShow.call(this,a,b);this.isVisible()?this.setCurrentAnchor_(a):this.cancelTrigger()};
goog.ui.HoverCard.prototype.setMaxSearchSteps=function(a){a?this.checkDescendants_&&(this.maxSearchSteps_=a):this.checkDescendants_=!1};goog.ui.HoverCard.TriggerEvent=function(a,b,c,d){goog.events.Event.call(this,a,b);this.anchor=c;this.data=d};goog.inherits(goog.ui.HoverCard.TriggerEvent,goog.events.Event);goog.ui.SubMenuRenderer=function(){goog.ui.MenuItemRenderer.call(this)};goog.inherits(goog.ui.SubMenuRenderer,goog.ui.MenuItemRenderer);goog.addSingletonGetter(goog.ui.SubMenuRenderer);goog.ui.SubMenuRenderer.CSS_CLASS="goog-submenu";goog.ui.SubMenuRenderer.CSS_CLASS_SUBMENU_="goog-submenu-arrow";
goog.ui.SubMenuRenderer.prototype.createDom=function(a){var b=goog.ui.SubMenuRenderer.superClass_.createDom.call(this,a);goog.asserts.assert(b);goog.dom.classlist.add(b,goog.ui.SubMenuRenderer.CSS_CLASS);this.addArrow_(a,b);return b};
goog.ui.SubMenuRenderer.prototype.decorate=function(a,b){b=goog.ui.SubMenuRenderer.superClass_.decorate.call(this,a,b);goog.asserts.assert(b);goog.dom.classlist.add(b,goog.ui.SubMenuRenderer.CSS_CLASS);this.addArrow_(a,b);var c=goog.dom.getElementsByTagNameAndClass("DIV","goog-menu",b);if(c.length){var d=new goog.ui.Menu(a.getDomHelper());c=c[0];goog.style.setElementShown(c,!1);a.getDomHelper().getDocument().body.appendChild(c);d.decorate(c);a.setMenu(d,!0)}return b};
goog.ui.SubMenuRenderer.prototype.setContent=function(a,b){var c=this.getContentElement(a),d=c&&c.lastChild;goog.ui.SubMenuRenderer.superClass_.setContent.call(this,a,b);d&&c.lastChild!=d&&goog.dom.classlist.contains(d,goog.ui.SubMenuRenderer.CSS_CLASS_SUBMENU_)&&c.appendChild(d)};
goog.ui.SubMenuRenderer.prototype.initializeDom=function(a){goog.ui.SubMenuRenderer.superClass_.initializeDom.call(this,a);var b=a.getContentElement(),c=a.getDomHelper().getElementsByTagNameAndClass("SPAN",goog.ui.SubMenuRenderer.CSS_CLASS_SUBMENU_,b)[0];goog.ui.SubMenuRenderer.setArrowTextContent_(a,c);c!=b.lastChild&&b.appendChild(c);a=a.getElement();goog.asserts.assert(a,"The sub menu DOM element cannot be null.");goog.a11y.aria.setState(a,goog.a11y.aria.State.HASPOPUP,"true")};
goog.ui.SubMenuRenderer.prototype.addArrow_=function(a,b){var c=a.getDomHelper().createDom("SPAN");c.className=goog.ui.SubMenuRenderer.CSS_CLASS_SUBMENU_;goog.ui.SubMenuRenderer.setArrowTextContent_(a,c);this.getContentElement(b).appendChild(c)};goog.ui.SubMenuRenderer.LEFT_ARROW_="\u25c4";goog.ui.SubMenuRenderer.RIGHT_ARROW_="\u25ba";
goog.ui.SubMenuRenderer.setArrowTextContent_=function(a,b){var c=goog.ui.SubMenuRenderer.LEFT_ARROW_,d=goog.ui.SubMenuRenderer.RIGHT_ARROW_;goog.asserts.assert(b);a.isRightToLeft()?(goog.dom.classlist.add(b,"goog-submenu-arrow-rtl"),goog.dom.setTextContent(b,a.isAlignedToEnd()?c:d)):(goog.dom.classlist.remove(b,"goog-submenu-arrow-rtl"),goog.dom.setTextContent(b,a.isAlignedToEnd()?d:c))};goog.ui.SubMenu=function(a,b,c,d){goog.ui.MenuItem.call(this,a,b,c,d||goog.ui.SubMenuRenderer.getInstance())};goog.inherits(goog.ui.SubMenu,goog.ui.MenuItem);goog.tagUnsealableClass(goog.ui.SubMenu);goog.ui.SubMenu.MENU_DELAY_MS=218;goog.ui.SubMenu.prototype.dismissTimer_=null;goog.ui.SubMenu.prototype.showTimer_=null;goog.ui.SubMenu.prototype.menuIsVisible_=!1;goog.ui.SubMenu.prototype.subMenu_=null;goog.ui.SubMenu.prototype.externalSubMenu_=!1;goog.ui.SubMenu.prototype.alignToEnd_=!0;
goog.ui.SubMenu.prototype.isPositionAdjustable_=!1;goog.ui.SubMenu.prototype.enterDocument=function(){goog.ui.SubMenu.superClass_.enterDocument.call(this);this.getHandler().listen(this.getParent(),goog.ui.Component.EventType.HIDE,this.onParentHidden_);this.subMenu_&&this.setMenuListenersEnabled_(this.subMenu_,!0)};
goog.ui.SubMenu.prototype.exitDocument=function(){this.getHandler().unlisten(this.getParent(),goog.ui.Component.EventType.HIDE,this.onParentHidden_);this.subMenu_&&(this.setMenuListenersEnabled_(this.subMenu_,!1),this.externalSubMenu_||(this.subMenu_.exitDocument(),goog.dom.removeNode(this.subMenu_.getElement())));goog.ui.SubMenu.superClass_.exitDocument.call(this)};
goog.ui.SubMenu.prototype.disposeInternal=function(){this.subMenu_&&!this.externalSubMenu_&&this.subMenu_.dispose();this.subMenu_=null;goog.ui.SubMenu.superClass_.disposeInternal.call(this)};goog.ui.SubMenu.prototype.setHighlighted=function(a,b){goog.ui.SubMenu.superClass_.setHighlighted.call(this,a);b&&this.getMenu().setMouseButtonPressed(!0);a||(this.dismissTimer_&&goog.Timer.clear(this.dismissTimer_),this.dismissTimer_=goog.Timer.callOnce(this.dismissSubMenu,this.getMenuDelay(),this))};
goog.ui.SubMenu.prototype.showSubMenu=function(){var a=this.getParent();a&&a.getHighlighted()==this&&(this.setSubMenuVisible_(!0),this.dismissSiblings_())};goog.ui.SubMenu.prototype.dismissSubMenu=function(){var a=this.subMenu_;a&&a.getParent()==this&&(this.setSubMenuVisible_(!1),a.forEachChild(function(a){"function"==typeof a.dismissSubMenu&&a.dismissSubMenu()}))};goog.ui.SubMenu.prototype.clearTimers=function(){this.dismissTimer_&&goog.Timer.clear(this.dismissTimer_);this.showTimer_&&goog.Timer.clear(this.showTimer_)};
goog.ui.SubMenu.prototype.setVisible=function(a,b){(a=goog.ui.SubMenu.superClass_.setVisible.call(this,a,b))&&!this.isVisible()&&this.dismissSubMenu();return a};goog.ui.SubMenu.prototype.dismissSiblings_=function(){this.getParent().forEachChild(function(a){a!=this&&"function"==typeof a.dismissSubMenu&&(a.dismissSubMenu(),a.clearTimers())},this)};
goog.ui.SubMenu.prototype.handleKeyEvent=function(a){var b=a.keyCode,c=this.isRightToLeft()?goog.events.KeyCodes.LEFT:goog.events.KeyCodes.RIGHT,d=this.isRightToLeft()?goog.events.KeyCodes.RIGHT:goog.events.KeyCodes.LEFT;if(!this.menuIsVisible_){if(!this.isEnabled()||b!=c&&b!=this.getMnemonic())return!1;this.showSubMenu();this.getMenu().highlightFirst();this.clearTimers()}else if(!this.getMenu().handleKeyEvent(a))if(b==d)this.dismissSubMenu();else return!1;a.preventDefault();return!0};
goog.ui.SubMenu.prototype.onChildEnter_=function(a){this.subMenu_.getParent()==this&&(this.clearTimers(),this.getParentEventTarget().setHighlighted(this),this.dismissSiblings_())};goog.ui.SubMenu.prototype.onParentHidden_=function(a){a.target==this.getParentEventTarget()&&(this.dismissSubMenu(),this.clearTimers())};
goog.ui.SubMenu.prototype.handleMouseOver=function(a){this.isEnabled()&&(this.clearTimers(),this.showTimer_=goog.Timer.callOnce(this.showSubMenu,this.getMenuDelay(),this));goog.ui.SubMenu.superClass_.handleMouseOver.call(this,a)};goog.ui.SubMenu.prototype.getMenuDelay=function(){return goog.ui.SubMenu.MENU_DELAY_MS};
goog.ui.SubMenu.prototype.performActionInternal=function(a){this.clearTimers();if(this.isSupportedState(goog.ui.Component.State.SELECTED)||this.isSupportedState(goog.ui.Component.State.CHECKED))return goog.ui.SubMenu.superClass_.performActionInternal.call(this,a);this.showSubMenu();return!0};
goog.ui.SubMenu.prototype.setSubMenuVisible_=function(a){!a&&this.getMenu()&&this.getMenu().setHighlightedIndex(-1);this.dispatchEvent(goog.ui.Component.getStateTransitionEvent(goog.ui.Component.State.OPENED,a));var b=this.getMenu();a!=this.menuIsVisible_&&goog.dom.classlist.enable(goog.asserts.assert(this.getElement()),"goog-submenu-open",a);a!=b.isVisible()&&(a&&(b.isInDocument()||b.render(),b.setHighlightedIndex(-1)),b.setVisible(a),a&&this.positionSubMenu());this.menuIsVisible_=a};
goog.ui.SubMenu.prototype.setMenuListenersEnabled_=function(a,b){var c=this.getHandler();(b?c.listen:c.unlisten).call(c,a,goog.ui.Component.EventType.ENTER,this.onChildEnter_)};goog.ui.SubMenu.prototype.setAlignToEnd=function(a){a!=this.alignToEnd_&&(this.alignToEnd_=a,this.isInDocument()&&(a=this.getElement(),this.exitDocument(),a.nextSibling?this.renderBefore(a.nextSibling):this.render(a.parentNode)))};goog.ui.SubMenu.prototype.isAlignedToEnd=function(){return this.alignToEnd_};
goog.ui.SubMenu.prototype.positionSubMenu=function(){var a=new goog.positioning.AnchoredViewportPosition(this.getElement(),this.isAlignedToEnd()?goog.positioning.Corner.TOP_END:goog.positioning.Corner.TOP_START,this.isPositionAdjustable_),b=this.getMenu(),c=b.getElement();b.isVisible()||(c.style.visibility="hidden",goog.style.setElementShown(c,!0));a.reposition(c,this.isAlignedToEnd()?goog.positioning.Corner.TOP_START:goog.positioning.Corner.TOP_END);b.isVisible()||(goog.style.setElementShown(c,!1),
c.style.visibility="visible")};goog.ui.SubMenu.prototype.addItem=function(a){this.getMenu().addChild(a,!0)};goog.ui.SubMenu.prototype.addItemAt=function(a,b){this.getMenu().addChildAt(a,b,!0)};goog.ui.SubMenu.prototype.removeItem=function(a){(a=this.getMenu().removeChild(a,!0))&&a.dispose()};goog.ui.SubMenu.prototype.removeItemAt=function(a){(a=this.getMenu().removeChildAt(a,!0))&&a.dispose()};goog.ui.SubMenu.prototype.getItemAt=function(a){return this.getMenu().getChildAt(a)};
goog.ui.SubMenu.prototype.getItemCount=function(){return this.getMenu().getChildCount()};goog.ui.SubMenu.prototype.getItems=function(){return this.getMenu().getItems()};goog.ui.SubMenu.prototype.getMenu=function(){this.subMenu_?this.externalSubMenu_&&this.subMenu_.getParent()!=this&&this.subMenu_.setParent(this):this.setMenu(new goog.ui.Menu(this.getDomHelper()),!0);this.subMenu_.getElement()||this.subMenu_.createDom();return this.subMenu_};
goog.ui.SubMenu.prototype.setMenu=function(a,b){var c=this.subMenu_;a!=c&&(c&&(this.dismissSubMenu(),this.isInDocument()&&this.setMenuListenersEnabled_(c,!1)),this.subMenu_=a,this.externalSubMenu_=!b,a&&(a.setParent(this),a.setVisible(!1,!0),a.setAllowAutoFocus(!1),a.setFocusable(!1),this.isInDocument()&&this.setMenuListenersEnabled_(a,!0)))};goog.ui.SubMenu.prototype.containsElement=function(a){return this.getMenu().containsElement(a)};
goog.ui.SubMenu.prototype.setPositionAdjustable=function(a){this.isPositionAdjustable_=!!a};goog.ui.SubMenu.prototype.isPositionAdjustable=function(){return this.isPositionAdjustable_};goog.ui.registry.setDecoratorByClassName("goog-submenu",function(){return new goog.ui.SubMenu(null)});goog.crypt={};goog.crypt.stringToByteArray=function(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);255<e&&(b[c++]=e&255,e>>=8);b[c++]=e}return b};goog.crypt.byteArrayToString=function(a){if(8192>=a.length)return String.fromCharCode.apply(null,a);for(var b="",c=0;c<a.length;c+=8192){var d=goog.array.slice(a,c,c+8192);b+=String.fromCharCode.apply(null,d)}return b};
goog.crypt.byteArrayToHex=function(a,b){return goog.array.map(a,function(a){a=a.toString(16);return 1<a.length?a:"0"+a}).join(b||"")};goog.crypt.hexToByteArray=function(a){goog.asserts.assert(0==a.length%2,"Key string length must be multiple of 2");for(var b=[],c=0;c<a.length;c+=2)b.push(parseInt(a.substring(c,c+2),16));return b};
goog.crypt.stringToUtf8ByteArray=function(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);128>e?b[c++]=e:(2048>e?b[c++]=e>>6|192:(55296==(e&64512)&&d+1<a.length&&56320==(a.charCodeAt(d+1)&64512)?(e=65536+((e&1023)<<10)+(a.charCodeAt(++d)&1023),b[c++]=e>>18|240,b[c++]=e>>12&63|128):b[c++]=e>>12|224,b[c++]=e>>6&63|128),b[c++]=e&63|128)}return b};
goog.crypt.utf8ByteArrayToString=function(a){for(var b=[],c=0,d=0;c<a.length;){var e=a[c++];if(128>e)b[d++]=String.fromCharCode(e);else if(191<e&&224>e){var f=a[c++];b[d++]=String.fromCharCode((e&31)<<6|f&63)}else if(239<e&&365>e){f=a[c++];var g=a[c++],h=a[c++];e=((e&7)<<18|(f&63)<<12|(g&63)<<6|h&63)-65536;b[d++]=String.fromCharCode(55296+(e>>10));b[d++]=String.fromCharCode(56320+(e&1023))}else f=a[c++],g=a[c++],b[d++]=String.fromCharCode((e&15)<<12|(f&63)<<6|g&63)}return b.join("")};
goog.crypt.xorByteArray=function(a,b){goog.asserts.assert(a.length==b.length,"XOR array lengths must match");for(var c=[],d=0;d<a.length;d++)c.push(a[d]^b[d]);return c};goog.crypt.base64={};goog.crypt.base64.byteToCharMap_=null;goog.crypt.base64.charToByteMap_=null;goog.crypt.base64.byteToCharMapWebSafe_=null;goog.crypt.base64.ENCODED_VALS_BASE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.ENCODED_VALS_BASE+"+/=";goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.ENCODED_VALS_BASE+"-_.";
goog.crypt.base64.ASSUME_NATIVE_SUPPORT_=goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.product.SAFARI||goog.userAgent.OPERA;goog.crypt.base64.HAS_NATIVE_ENCODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||"function"==typeof goog.global.btoa;goog.crypt.base64.HAS_NATIVE_DECODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||!goog.userAgent.product.SAFARI&&!goog.userAgent.IE&&"function"==typeof goog.global.atob;
goog.crypt.base64.encodeByteArray=function(a,b){goog.asserts.assert(goog.isArrayLike(a),"encodeByteArray takes an array as a parameter");goog.crypt.base64.init_();b=b?goog.crypt.base64.byteToCharMapWebSafe_:goog.crypt.base64.byteToCharMap_;for(var c=[],d=0;d<a.length;d+=3){var e=a[d],f=d+1<a.length,g=f?a[d+1]:0,h=d+2<a.length,k=h?a[d+2]:0,l=e>>2;e=(e&3)<<4|g>>4;g=(g&15)<<2|k>>6;k&=63;h||(k=64,f||(g=64));c.push(b[l],b[e],b[g],b[k])}return c.join("")};
goog.crypt.base64.encodeString=function(a,b){return goog.crypt.base64.HAS_NATIVE_ENCODE_&&!b?goog.global.btoa(a):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(a),b)};goog.crypt.base64.decodeString=function(a,b){if(goog.crypt.base64.HAS_NATIVE_DECODE_&&!b)return goog.global.atob(a);var c="";goog.crypt.base64.decodeStringInternal_(a,function(a){c+=String.fromCharCode(a)});return c};
goog.crypt.base64.decodeStringToByteArray=function(a,b){var c=[];goog.crypt.base64.decodeStringInternal_(a,function(a){c.push(a)});return c};
goog.crypt.base64.decodeStringToUint8Array=function(a){goog.asserts.assert(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10"),"Browser does not support typed arrays");var b=a.length,c=0;"="===a[b-2]?c=2:"="===a[b-1]&&(c=1);var d=new Uint8Array(Math.ceil(3*b/4)-c),e=0;goog.crypt.base64.decodeStringInternal_(a,function(a){d[e++]=a});return d.subarray(0,e)};
goog.crypt.base64.decodeStringInternal_=function(a,b){function c(b){for(;d<a.length;){var c=a.charAt(d++),e=goog.crypt.base64.charToByteMap_[c];if(null!=e)return e;if(!goog.string.isEmptyOrWhitespace(c))throw Error("Unknown base64 encoding at char: "+c);}return b}goog.crypt.base64.init_();for(var d=0;;){var e=c(-1),f=c(0),g=c(64),h=c(64);if(64===h&&-1===e)break;b(e<<2|f>>4);64!=g&&(b(f<<4&240|g>>2),64!=h&&b(g<<6&192|h))}};
goog.crypt.base64.init_=function(){if(!goog.crypt.base64.byteToCharMap_){goog.crypt.base64.byteToCharMap_={};goog.crypt.base64.charToByteMap_={};goog.crypt.base64.byteToCharMapWebSafe_={};for(var a=0;a<goog.crypt.base64.ENCODED_VALS.length;a++)goog.crypt.base64.byteToCharMap_[a]=goog.crypt.base64.ENCODED_VALS.charAt(a),goog.crypt.base64.charToByteMap_[goog.crypt.base64.byteToCharMap_[a]]=a,goog.crypt.base64.byteToCharMapWebSafe_[a]=goog.crypt.base64.ENCODED_VALS_WEBSAFE.charAt(a),a>=goog.crypt.base64.ENCODED_VALS_BASE.length&&
(goog.crypt.base64.charToByteMap_[goog.crypt.base64.ENCODED_VALS_WEBSAFE.charAt(a)]=a)}};goog.ui.ToolbarButtonRenderer=function(){goog.ui.CustomButtonRenderer.call(this)};goog.inherits(goog.ui.ToolbarButtonRenderer,goog.ui.CustomButtonRenderer);goog.addSingletonGetter(goog.ui.ToolbarButtonRenderer);goog.ui.ToolbarButtonRenderer.CSS_CLASS="goog-toolbar-button";goog.ui.ToolbarButtonRenderer.prototype.getCssClass=function(){return goog.ui.ToolbarButtonRenderer.CSS_CLASS};goog.ui.ToolbarButton=function(a,b,c){goog.ui.Button.call(this,a,b||goog.ui.ToolbarButtonRenderer.getInstance(),c)};goog.inherits(goog.ui.ToolbarButton,goog.ui.Button);goog.ui.registry.setDecoratorByClassName(goog.ui.ToolbarButtonRenderer.CSS_CLASS,function(){return new goog.ui.ToolbarButton(null)});goog.ui.MenuButtonRenderer=function(){goog.ui.CustomButtonRenderer.call(this)};goog.inherits(goog.ui.MenuButtonRenderer,goog.ui.CustomButtonRenderer);goog.addSingletonGetter(goog.ui.MenuButtonRenderer);goog.ui.MenuButtonRenderer.CSS_CLASS="goog-menu-button";goog.ui.MenuButtonRenderer.prototype.getContentElement=function(a){return goog.ui.MenuButtonRenderer.superClass_.getContentElement.call(this,a&&a.firstChild)};
goog.ui.MenuButtonRenderer.prototype.decorate=function(a,b){var c=goog.dom.getElementsByTagNameAndClass("*",goog.ui.MenuRenderer.CSS_CLASS,b)[0];if(c){goog.style.setElementShown(c,!1);goog.dom.appendChild(goog.dom.getOwnerDocument(c).body,c);var d=new goog.ui.Menu;d.decorate(c);a.setMenu(d)}return goog.ui.MenuButtonRenderer.superClass_.decorate.call(this,a,b)};
goog.ui.MenuButtonRenderer.prototype.createButton=function(a,b){return goog.ui.MenuButtonRenderer.superClass_.createButton.call(this,[this.createCaption(a,b),this.createDropdown(b)],b)};goog.ui.MenuButtonRenderer.prototype.createCaption=function(a,b){return goog.ui.MenuButtonRenderer.wrapCaption(a,this.getCssClass(),b)};goog.ui.MenuButtonRenderer.wrapCaption=function(a,b,c){return c.createDom("DIV",goog.ui.INLINE_BLOCK_CLASSNAME+" "+(b+"-caption"),a)};
goog.ui.MenuButtonRenderer.prototype.createDropdown=function(a){return a.createDom("DIV",goog.ui.INLINE_BLOCK_CLASSNAME+" "+(this.getCssClass()+"-dropdown"),"\u00a0")};goog.ui.MenuButtonRenderer.prototype.getCssClass=function(){return goog.ui.MenuButtonRenderer.CSS_CLASS};goog.ui.MenuButton=function(a,b,c,d,e){goog.ui.Button.call(this,a,c||goog.ui.MenuButtonRenderer.getInstance(),d);this.setSupportedState(goog.ui.Component.State.OPENED,!0);this.menuPosition_=new goog.positioning.MenuAnchoredPosition(null,goog.positioning.Corner.BOTTOM_START);b&&this.setMenu(b);this.menuMargin_=null;this.timer_=new goog.Timer(500);!goog.userAgent.product.IPHONE&&!goog.userAgent.product.IPAD||goog.userAgent.isVersionOrHigher("533.17.9")||this.setFocusablePopupMenu(!0);this.menuRenderer_=
e||goog.ui.MenuRenderer.getInstance()};goog.inherits(goog.ui.MenuButton,goog.ui.Button);goog.tagUnsealableClass(goog.ui.MenuButton);goog.ui.MenuButton.prototype.isFocusablePopupMenu_=!1;goog.ui.MenuButton.prototype.renderMenuAsSibling_=!1;goog.ui.MenuButton.prototype.selectFirstOnEnterOrSpace_=!1;
goog.ui.MenuButton.prototype.enterDocument=function(){goog.ui.MenuButton.superClass_.enterDocument.call(this);this.attachKeyDownEventListener_(!0);this.menu_&&this.attachMenuEventListeners_(this.menu_,!0);goog.a11y.aria.setState(this.getElementStrict(),goog.a11y.aria.State.HASPOPUP,!!this.menu_)};
goog.ui.MenuButton.prototype.exitDocument=function(){goog.ui.MenuButton.superClass_.exitDocument.call(this);this.attachKeyDownEventListener_(!1);if(this.menu_){this.setOpen(!1);this.menu_.exitDocument();this.attachMenuEventListeners_(this.menu_,!1);var a=this.menu_.getElement();a&&goog.dom.removeNode(a)}};
goog.ui.MenuButton.prototype.disposeInternal=function(){goog.ui.MenuButton.superClass_.disposeInternal.call(this);this.menu_&&(this.menu_.dispose(),delete this.menu_);delete this.positionElement_;this.timer_.dispose()};goog.ui.MenuButton.prototype.handleMouseDown=function(a){goog.ui.MenuButton.superClass_.handleMouseDown.call(this,a);this.isActive()&&(this.setOpen(!this.isOpen(),a),this.menu_&&this.menu_.setMouseButtonPressed(this.isOpen()))};
goog.ui.MenuButton.prototype.handleMouseUp=function(a){goog.ui.MenuButton.superClass_.handleMouseUp.call(this,a);this.menu_&&!this.isActive()&&this.menu_.setMouseButtonPressed(!1)};goog.ui.MenuButton.prototype.performActionInternal=function(a){this.setActive(!1);return!0};goog.ui.MenuButton.prototype.handleDocumentMouseDown=function(a){this.menu_&&this.menu_.isVisible()&&!this.containsElement(a.target)&&this.setOpen(!1)};
goog.ui.MenuButton.prototype.containsElement=function(a){return a&&goog.dom.contains(this.getElement(),a)||this.menu_&&this.menu_.containsElement(a)||!1};
goog.ui.MenuButton.prototype.handleKeyEventInternal=function(a){if(a.keyCode==goog.events.KeyCodes.SPACE){if(a.preventDefault(),a.type!=goog.events.EventType.KEYUP)return!0}else if(a.type!=goog.events.KeyHandler.EventType.KEY)return!1;if(this.menu_&&this.menu_.isVisible()){var b=a.keyCode==goog.events.KeyCodes.ENTER||a.keyCode==goog.events.KeyCodes.SPACE,c=this.menu_.handleKeyEvent(a);return a.keyCode==goog.events.KeyCodes.ESC||b?(this.setOpen(!1),!0):c}return a.keyCode==goog.events.KeyCodes.DOWN||
a.keyCode==goog.events.KeyCodes.UP||a.keyCode==goog.events.KeyCodes.SPACE||a.keyCode==goog.events.KeyCodes.ENTER?(this.setOpen(!0,a),!0):!1};goog.ui.MenuButton.prototype.handleMenuAction=function(a){this.setOpen(!1)};goog.ui.MenuButton.prototype.handleMenuBlur=function(a){this.isActive()||this.setOpen(!1)};goog.ui.MenuButton.prototype.handleBlur=function(a){this.isFocusablePopupMenu()||this.setOpen(!1);goog.ui.MenuButton.superClass_.handleBlur.call(this,a)};
goog.ui.MenuButton.prototype.getMenu=function(){this.menu_||this.setMenu(new goog.ui.Menu(this.getDomHelper(),this.menuRenderer_));return this.menu_||null};
goog.ui.MenuButton.prototype.setMenu=function(a){var b=this.menu_;a!=b&&(b&&(this.setOpen(!1),this.isInDocument()&&this.attachMenuEventListeners_(b,!1),delete this.menu_),this.isInDocument()&&goog.a11y.aria.setState(this.getElementStrict(),goog.a11y.aria.State.HASPOPUP,!!a),a&&(this.menu_=a,a.setParent(this),a.setVisible(!1),a.setAllowAutoFocus(this.isFocusablePopupMenu()),this.isInDocument()&&this.attachMenuEventListeners_(a,!0)));return b};
goog.ui.MenuButton.prototype.setMenuPosition=function(a){a&&(this.menuPosition_=a,this.positionElement_=a.element)};goog.ui.MenuButton.prototype.setPositionElement=function(a){this.positionElement_=a;this.positionMenu()};goog.ui.MenuButton.prototype.setMenuMargin=function(a){this.menuMargin_=a};goog.ui.MenuButton.prototype.setSelectFirstOnEnterOrSpace=function(a){this.selectFirstOnEnterOrSpace_=a};goog.ui.MenuButton.prototype.addItem=function(a){this.getMenu().addChild(a,!0)};
goog.ui.MenuButton.prototype.addItemAt=function(a,b){this.getMenu().addChildAt(a,b,!0)};goog.ui.MenuButton.prototype.removeItem=function(a){(a=this.getMenu().removeChild(a,!0))&&a.dispose()};goog.ui.MenuButton.prototype.removeItemAt=function(a){(a=this.getMenu().removeChildAt(a,!0))&&a.dispose()};goog.ui.MenuButton.prototype.getItemAt=function(a){return this.menu_?this.menu_.getChildAt(a):null};goog.ui.MenuButton.prototype.getItemCount=function(){return this.menu_?this.menu_.getChildCount():0};
goog.ui.MenuButton.prototype.setVisible=function(a,b){(a=goog.ui.MenuButton.superClass_.setVisible.call(this,a,b))&&!this.isVisible()&&this.setOpen(!1);return a};goog.ui.MenuButton.prototype.setEnabled=function(a){goog.ui.MenuButton.superClass_.setEnabled.call(this,a);this.isEnabled()||this.setOpen(!1)};goog.ui.MenuButton.prototype.isAlignMenuToStart=function(){var a=this.menuPosition_.corner;return a==goog.positioning.Corner.BOTTOM_START||a==goog.positioning.Corner.TOP_START};
goog.ui.MenuButton.prototype.setAlignMenuToStart=function(a){this.menuPosition_.corner=a?goog.positioning.Corner.BOTTOM_START:goog.positioning.Corner.BOTTOM_END};goog.ui.MenuButton.prototype.setScrollOnOverflow=function(a){this.menuPosition_.setLastResortOverflow&&this.menuPosition_.setLastResortOverflow(goog.positioning.Overflow.ADJUST_X|(a?goog.positioning.Overflow.RESIZE_HEIGHT:goog.positioning.Overflow.ADJUST_Y))};
goog.ui.MenuButton.prototype.isScrollOnOverflow=function(){return this.menuPosition_.getLastResortOverflow&&!!(this.menuPosition_.getLastResortOverflow()&goog.positioning.Overflow.RESIZE_HEIGHT)};goog.ui.MenuButton.prototype.isFocusablePopupMenu=function(){return this.isFocusablePopupMenu_};goog.ui.MenuButton.prototype.setFocusablePopupMenu=function(a){this.isFocusablePopupMenu_=a};goog.ui.MenuButton.prototype.setRenderMenuAsSibling=function(a){this.renderMenuAsSibling_=a};
goog.ui.MenuButton.prototype.showMenu=function(){this.setOpen(!0)};goog.ui.MenuButton.prototype.hideMenu=function(){this.setOpen(!1)};
goog.ui.MenuButton.prototype.setOpen=function(a,b){goog.ui.MenuButton.superClass_.setOpen.call(this,a);if(this.menu_&&this.hasState(goog.ui.Component.State.OPENED)==a){if(a){if(!this.menu_.isInDocument())if(this.renderMenuAsSibling_){var c=goog.dom.getNextElementSibling(this.getElement());c?this.menu_.renderBefore(c):this.menu_.render(this.getElement().parentNode)}else this.menu_.render();this.viewportBox_=goog.style.getVisibleRectForElement(this.getElement());this.buttonRect_=goog.style.getBounds(this.getElement());
this.positionMenu();c=!!b&&(b.keyCode==goog.events.KeyCodes.ENTER||b.keyCode==goog.events.KeyCodes.SPACE);b&&(b.keyCode==goog.events.KeyCodes.DOWN||b.keyCode==goog.events.KeyCodes.UP)||c&&this.selectFirstOnEnterOrSpace_?this.menu_.highlightFirst():this.menu_.setHighlightedIndex(-1)}else{this.setActive(!1);this.menu_.setMouseButtonPressed(!1);if(c=this.getElement())goog.a11y.aria.setState(c,goog.a11y.aria.State.ACTIVEDESCENDANT,""),goog.a11y.aria.setState(c,goog.a11y.aria.State.OWNS,"");goog.isDefAndNotNull(this.originalSize_)&&
(this.originalSize_=void 0,(c=this.menu_.getElement())&&goog.style.setSize(c,"",""))}this.menu_.setVisible(a,!1,b);this.isDisposed()||this.attachPopupListeners_(a)}this.menu_&&this.menu_.getElement()&&goog.a11y.aria.removeState(this.menu_.getElementStrict(),goog.a11y.aria.State.HIDDEN)};goog.ui.MenuButton.prototype.invalidateMenuSize=function(){this.originalSize_=void 0};
goog.ui.MenuButton.prototype.positionMenu=function(){if(this.menu_.isInDocument()){var a=this.positionElement_||this.getElement(),b=this.menuPosition_;this.menuPosition_.element=a;a=this.menu_.getElement();this.menu_.isVisible()||(a.style.visibility="hidden",goog.style.setElementShown(a,!0));!this.originalSize_&&this.isScrollOnOverflow()&&(this.originalSize_=goog.style.getSize(a));var c=goog.positioning.flipCornerVertical(b.corner);b.reposition(a,c,this.menuMargin_,this.originalSize_);this.menu_.isVisible()||
(goog.style.setElementShown(a,!1),a.style.visibility="visible")}};goog.ui.MenuButton.prototype.onTick_=function(a){a=goog.style.getBounds(this.getElement());var b=goog.style.getVisibleRectForElement(this.getElement());goog.math.Rect.equals(this.buttonRect_,a)&&goog.math.Box.equals(this.viewportBox_,b)||(this.buttonRect_=a,this.viewportBox_=b,this.positionMenu())};
goog.ui.MenuButton.prototype.attachMenuEventListeners_=function(a,b){var c=this.getHandler();b=b?c.listen:c.unlisten;b.call(c,a,goog.ui.Component.EventType.ACTION,this.handleMenuAction);b.call(c,a,goog.ui.Component.EventType.CLOSE,this.handleCloseItem);b.call(c,a,goog.ui.Component.EventType.HIGHLIGHT,this.handleHighlightItem);b.call(c,a,goog.ui.Component.EventType.UNHIGHLIGHT,this.handleUnHighlightItem)};
goog.ui.MenuButton.prototype.attachKeyDownEventListener_=function(a){var b=this.getHandler();(a?b.listen:b.unlisten).call(b,this.getElement(),goog.events.EventType.KEYDOWN,this.handleKeyDownEvent_)};goog.ui.MenuButton.prototype.handleHighlightItem=function(a){(a=a.target.getElement())&&this.setAriaActiveDescendant_(a)};goog.ui.MenuButton.prototype.handleKeyDownEvent_=function(a){this.isSupportedState(goog.ui.Component.State.FOCUSED)&&this.getKeyEventTarget()&&this.menu_&&this.menu_.isVisible()&&a.stopPropagation()};
goog.ui.MenuButton.prototype.handleUnHighlightItem=function(a){this.menu_.getHighlighted()||(a=this.getElement(),goog.asserts.assert(a,"The menu button DOM element cannot be null."),goog.a11y.aria.setState(a,goog.a11y.aria.State.ACTIVEDESCENDANT,""),goog.a11y.aria.setState(a,goog.a11y.aria.State.OWNS,""))};goog.ui.MenuButton.prototype.handleCloseItem=function(a){if(this.isOpen()&&a.target instanceof goog.ui.MenuItem){a=a.target;var b=a.getElement();a.isVisible()&&a.isHighlighted()&&null!=b&&this.setAriaActiveDescendant_(b)}};
goog.ui.MenuButton.prototype.setAriaActiveDescendant_=function(a){var b=this.getElement();goog.asserts.assert(b,"The menu button DOM element cannot be null.");a=goog.a11y.aria.getActiveDescendant(a)||a;if(!a.id){var c=goog.ui.IdGenerator.getInstance();a.id=c.getNextUniqueId()}goog.a11y.aria.setActiveDescendant(b,a);goog.a11y.aria.setState(b,goog.a11y.aria.State.OWNS,a.id)};
goog.ui.MenuButton.prototype.attachPopupListeners_=function(a){var b=this.getHandler(),c=a?b.listen:b.unlisten;c.call(b,this.getDomHelper().getDocument(),goog.events.EventType.MOUSEDOWN,this.handleDocumentMouseDown,!0);this.isFocusablePopupMenu()&&c.call(b,this.menu_,goog.ui.Component.EventType.BLUR,this.handleMenuBlur);c.call(b,this.timer_,goog.Timer.TICK,this.onTick_);a?this.timer_.start():this.timer_.stop()};goog.ui.registry.setDecoratorByClassName(goog.ui.MenuButtonRenderer.CSS_CLASS,function(){return new goog.ui.MenuButton(null)});goog.ui.ToolbarMenuButtonRenderer=function(){goog.ui.MenuButtonRenderer.call(this)};goog.inherits(goog.ui.ToolbarMenuButtonRenderer,goog.ui.MenuButtonRenderer);goog.addSingletonGetter(goog.ui.ToolbarMenuButtonRenderer);goog.ui.ToolbarMenuButtonRenderer.CSS_CLASS="goog-toolbar-menu-button";goog.ui.ToolbarMenuButtonRenderer.prototype.getCssClass=function(){return goog.ui.ToolbarMenuButtonRenderer.CSS_CLASS};goog.ui.ToolbarMenuButton=function(a,b,c,d){goog.ui.MenuButton.call(this,a,b,c||goog.ui.ToolbarMenuButtonRenderer.getInstance(),d)};goog.inherits(goog.ui.ToolbarMenuButton,goog.ui.MenuButton);goog.ui.registry.setDecoratorByClassName(goog.ui.ToolbarMenuButtonRenderer.CSS_CLASS,function(){return new goog.ui.ToolbarMenuButton(null)});goog.ui.ToolbarSeparator=function(a,b){goog.ui.Separator.call(this,a||goog.ui.ToolbarSeparatorRenderer.getInstance(),b)};goog.inherits(goog.ui.ToolbarSeparator,goog.ui.Separator);goog.ui.registry.setDecoratorByClassName(goog.ui.ToolbarSeparatorRenderer.CSS_CLASS,function(){return new goog.ui.ToolbarSeparator});goog.ui.SelectionModel=function(a){goog.events.EventTarget.call(this);this.items_=[];this.addItems(a)};goog.inherits(goog.ui.SelectionModel,goog.events.EventTarget);goog.tagUnsealableClass(goog.ui.SelectionModel);goog.ui.SelectionModel.prototype.selectedItem_=null;goog.ui.SelectionModel.prototype.selectionHandler_=null;goog.ui.SelectionModel.prototype.getSelectionHandler=function(){return this.selectionHandler_};
goog.ui.SelectionModel.prototype.setSelectionHandler=function(a){this.selectionHandler_=a};goog.ui.SelectionModel.prototype.getItemCount=function(){return this.items_.length};goog.ui.SelectionModel.prototype.indexOfItem=function(a){return a?goog.array.indexOf(this.items_,a):-1};goog.ui.SelectionModel.prototype.getFirst=function(){return this.items_[0]};goog.ui.SelectionModel.prototype.getLast=function(){return this.items_[this.items_.length-1]};
goog.ui.SelectionModel.prototype.getItemAt=function(a){return this.items_[a]||null};goog.ui.SelectionModel.prototype.addItems=function(a){a&&(goog.array.forEach(a,function(a){this.selectItem_(a,!1)},this),goog.array.extend(this.items_,a))};goog.ui.SelectionModel.prototype.addItem=function(a){this.addItemAt(a,this.getItemCount())};goog.ui.SelectionModel.prototype.addItemAt=function(a,b){a&&(this.selectItem_(a,!1),goog.array.insertAt(this.items_,a,b))};
goog.ui.SelectionModel.prototype.removeItem=function(a){a&&goog.array.remove(this.items_,a)&&a==this.selectedItem_&&(this.selectedItem_=null,this.dispatchEvent(goog.events.EventType.SELECT))};goog.ui.SelectionModel.prototype.removeItemAt=function(a){this.removeItem(this.getItemAt(a))};goog.ui.SelectionModel.prototype.getSelectedItem=function(){return this.selectedItem_};goog.ui.SelectionModel.prototype.getItems=function(){return goog.array.clone(this.items_)};
goog.ui.SelectionModel.prototype.setSelectedItem=function(a){a!=this.selectedItem_&&(this.selectItem_(this.selectedItem_,!1),this.selectedItem_=a,this.selectItem_(a,!0));this.dispatchEvent(goog.events.EventType.SELECT)};goog.ui.SelectionModel.prototype.getSelectedIndex=function(){return this.indexOfItem(this.selectedItem_)};goog.ui.SelectionModel.prototype.setSelectedIndex=function(a){this.setSelectedItem(this.getItemAt(a))};
goog.ui.SelectionModel.prototype.clear=function(){goog.array.clear(this.items_);this.selectedItem_=null};goog.ui.SelectionModel.prototype.disposeInternal=function(){goog.ui.SelectionModel.superClass_.disposeInternal.call(this);delete this.items_;this.selectedItem_=null};goog.ui.SelectionModel.prototype.selectItem_=function(a,b){a&&("function"==typeof this.selectionHandler_?this.selectionHandler_(a,b):"function"==typeof a.setSelected&&a.setSelected(b))};goog.ui.Select=function(a,b,c,d,e){goog.ui.MenuButton.call(this,a,b,c,d,e||new goog.ui.MenuRenderer(goog.a11y.aria.Role.LISTBOX));this.defaultCaption_=this.getContent();this.initialAriaLabel_=null;this.setPreferredAriaRole(goog.a11y.aria.Role.LISTBOX)};goog.inherits(goog.ui.Select,goog.ui.MenuButton);goog.tagUnsealableClass(goog.ui.Select);goog.ui.Select.prototype.selectionModel_=null;
goog.ui.Select.prototype.enterDocument=function(){goog.ui.Select.superClass_.enterDocument.call(this);this.updateCaption();this.listenToSelectionModelEvents_()};goog.ui.Select.prototype.decorateInternal=function(a){goog.ui.Select.superClass_.decorateInternal.call(this,a);(a=this.getCaption())?this.setDefaultCaption(a):this.getSelectedItem()||this.setSelectedIndex(0)};
goog.ui.Select.prototype.disposeInternal=function(){goog.ui.Select.superClass_.disposeInternal.call(this);this.selectionModel_&&(this.selectionModel_.dispose(),this.selectionModel_=null);this.defaultCaption_=null};goog.ui.Select.prototype.handleMenuAction=function(a){this.setSelectedItem(a.target);goog.ui.Select.superClass_.handleMenuAction.call(this,a);a.stopPropagation();this.dispatchEvent(goog.ui.Component.EventType.ACTION)};
goog.ui.Select.prototype.handleSelectionChange=function(a){a=this.getSelectedItem();goog.ui.Select.superClass_.setValue.call(this,a&&a.getValue());this.updateCaption()};goog.ui.Select.prototype.setMenu=function(a){var b=goog.ui.Select.superClass_.setMenu.call(this,a);a!=b&&(this.selectionModel_&&this.selectionModel_.clear(),a&&(this.selectionModel_?a.forEachChild(function(a,b){this.setCorrectAriaRole_(a);this.selectionModel_.addItem(a)},this):this.createSelectionModel_(a)));return b};
goog.ui.Select.prototype.getDefaultCaption=function(){return this.defaultCaption_};goog.ui.Select.prototype.setDefaultCaption=function(a){this.defaultCaption_=a;this.updateCaption()};goog.ui.Select.prototype.addItem=function(a){this.setCorrectAriaRole_(a);goog.ui.Select.superClass_.addItem.call(this,a);this.selectionModel_?this.selectionModel_.addItem(a):this.createSelectionModel_(this.getMenu());this.updateAriaActiveDescendant_()};
goog.ui.Select.prototype.addItemAt=function(a,b){this.setCorrectAriaRole_(a);goog.ui.Select.superClass_.addItemAt.call(this,a,b);this.selectionModel_?this.selectionModel_.addItemAt(a,b):this.createSelectionModel_(this.getMenu())};goog.ui.Select.prototype.removeItem=function(a){goog.ui.Select.superClass_.removeItem.call(this,a);this.selectionModel_&&this.selectionModel_.removeItem(a)};
goog.ui.Select.prototype.removeItemAt=function(a){goog.ui.Select.superClass_.removeItemAt.call(this,a);this.selectionModel_&&this.selectionModel_.removeItemAt(a)};goog.ui.Select.prototype.setSelectedItem=function(a){if(this.selectionModel_){var b=this.getSelectedItem();this.selectionModel_.setSelectedItem(a);a!=b&&this.dispatchEvent(goog.ui.Component.EventType.CHANGE)}};goog.ui.Select.prototype.setSelectedIndex=function(a){this.selectionModel_&&this.setSelectedItem(this.selectionModel_.getItemAt(a))};
goog.ui.Select.prototype.setValue=function(a){if(goog.isDefAndNotNull(a)&&this.selectionModel_)for(var b=0,c;c=this.selectionModel_.getItemAt(b);b++)if(c&&"function"==typeof c.getValue&&c.getValue()==a){this.setSelectedItem(c);return}this.setSelectedItem(null)};goog.ui.Select.prototype.getValue=function(){var a=this.getSelectedItem();return a?a.getValue():null};goog.ui.Select.prototype.getSelectedItem=function(){return this.selectionModel_?this.selectionModel_.getSelectedItem():null};
goog.ui.Select.prototype.getSelectedIndex=function(){return this.selectionModel_?this.selectionModel_.getSelectedIndex():-1};goog.ui.Select.prototype.getSelectionModel=function(){return this.selectionModel_};goog.ui.Select.prototype.createSelectionModel_=function(a){this.selectionModel_=new goog.ui.SelectionModel;a&&a.forEachChild(function(a,c){this.setCorrectAriaRole_(a);this.selectionModel_.addItem(a)},this);this.listenToSelectionModelEvents_()};
goog.ui.Select.prototype.listenToSelectionModelEvents_=function(){this.selectionModel_&&this.getHandler().listen(this.selectionModel_,goog.events.EventType.SELECT,this.handleSelectionChange)};
goog.ui.Select.prototype.updateCaption=function(){var a=this.getSelectedItem();this.setContent(a?a.getCaption():this.defaultCaption_);var b=this.getRenderer().getContentElement(this.getElement());b&&this.getDomHelper().isElement(b)&&(null==this.initialAriaLabel_&&(this.initialAriaLabel_=goog.a11y.aria.getLabel(b)),a=a?a.getElement():null,goog.a11y.aria.setLabel(b,a?goog.a11y.aria.getLabel(a):this.initialAriaLabel_),this.updateAriaActiveDescendant_())};
goog.ui.Select.prototype.updateAriaActiveDescendant_=function(){var a=this.getRenderer();if(a&&(a=a.getContentElement(this.getElement()))){var b=this.getElementStrict();a.id||(a.id=goog.ui.IdGenerator.getInstance().getNextUniqueId());goog.a11y.aria.setRole(a,goog.a11y.aria.Role.OPTION);goog.a11y.aria.setState(b,goog.a11y.aria.State.ACTIVEDESCENDANT,a.id);if(this.selectionModel_){b=this.selectionModel_.getItems();goog.a11y.aria.setState(a,goog.a11y.aria.State.SETSIZE,this.getNumMenuItems_(b));var c=
this.selectionModel_.getSelectedIndex();goog.a11y.aria.setState(a,goog.a11y.aria.State.POSINSET,0<=c?this.getNumMenuItems_(goog.array.slice(b,0,c+1)):0)}}};goog.ui.Select.prototype.getNumMenuItems_=function(a){return goog.array.count(a,function(a){return a instanceof goog.ui.MenuItem})};goog.ui.Select.prototype.setCorrectAriaRole_=function(a){a.setPreferredAriaRole(a instanceof goog.ui.MenuItem?goog.a11y.aria.Role.OPTION:goog.a11y.aria.Role.SEPARATOR)};
goog.ui.Select.prototype.setOpen=function(a,b){goog.ui.Select.superClass_.setOpen.call(this,a,b);this.isOpen()?this.getMenu().setHighlightedIndex(this.getSelectedIndex()):this.updateAriaActiveDescendant_()};goog.ui.registry.setDecoratorByClassName("goog-select",function(){return new goog.ui.Select(null)});goog.ui.ToolbarSelect=function(a,b,c,d){goog.ui.Select.call(this,a,b,c||goog.ui.ToolbarMenuButtonRenderer.getInstance(),d)};goog.inherits(goog.ui.ToolbarSelect,goog.ui.Select);goog.ui.registry.setDecoratorByClassName("goog-toolbar-select",function(){return new goog.ui.ToolbarSelect(null)});goog.ui.ToolbarToggleButton=function(a,b,c){goog.ui.ToggleButton.call(this,a,b||goog.ui.ToolbarButtonRenderer.getInstance(),c)};goog.inherits(goog.ui.ToolbarToggleButton,goog.ui.ToggleButton);goog.ui.registry.setDecoratorByClassName("goog-toolbar-toggle-button",function(){return new goog.ui.ToolbarToggleButton(null)});goog.debug.DivConsole=function(a){this.publishHandler_=goog.bind(this.addLogRecord,this);this.formatter_=new goog.debug.HtmlFormatter;this.isCapturing_=this.formatter_.showAbsoluteTime=!1;this.element_=a;this.elementOwnerDocument_=this.element_.ownerDocument||this.element_.document;this.domHelper_=new goog.dom.DomHelper(this.elementOwnerDocument_);this.installStyles()};
goog.debug.DivConsole.prototype.installStyles=function(){goog.style.installSafeStyleSheet(goog.html.SafeStyleSheet.fromConstant(goog.string.Const.from(".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}")),this.element_);this.element_.className+=
" logdiv"};goog.debug.DivConsole.prototype.setCapturing=function(a){if(a!=this.isCapturing_){var b=goog.debug.LogManager.getRoot();a?b.addHandler(this.publishHandler_):b.removeHandler(this.publishHandler_);this.isCapturing_=a}};
goog.debug.DivConsole.prototype.addLogRecord=function(a){if(a){var b=100>=this.element_.scrollHeight-this.element_.scrollTop-this.element_.clientHeight,c=this.domHelper_.createElement("DIV");c.className="logmsg";goog.dom.safe.setInnerHtml(c,this.formatter_.formatRecordAsHtml(a));this.element_.appendChild(c);b&&(this.element_.scrollTop=this.element_.scrollHeight)}};goog.debug.DivConsole.prototype.getFormatter=function(){return this.formatter_};
goog.debug.DivConsole.prototype.setFormatter=function(a){this.formatter_=a};goog.debug.DivConsole.prototype.addSeparator=function(){var a=this.domHelper_.createElement("DIV");a.className="logmsg logsep";this.element_.appendChild(a)};goog.debug.DivConsole.prototype.clear=function(){this.element_&&goog.dom.safe.setInnerHtml(this.element_,goog.html.SafeHtml.EMPTY)};goog.structs.SimplePool=function(a,b){goog.Disposable.call(this);this.disposeObjectFn_=this.createObjectFn_=null;this.maxCount_=b;this.freeQueue_=[];this.createInitial_(a)};goog.inherits(goog.structs.SimplePool,goog.Disposable);goog.structs.SimplePool.prototype.setCreateObjectFn=function(a){this.createObjectFn_=a};goog.structs.SimplePool.prototype.setDisposeObjectFn=function(a){this.disposeObjectFn_=a};
goog.structs.SimplePool.prototype.getObject=function(){return this.freeQueue_.length?this.freeQueue_.pop():this.createObject()};goog.structs.SimplePool.prototype.releaseObject=function(a){this.freeQueue_.length<this.maxCount_?this.freeQueue_.push(a):this.disposeObject(a)};goog.structs.SimplePool.prototype.createInitial_=function(a){if(a>this.maxCount_)throw Error("[goog.structs.SimplePool] Initial cannot be greater than max");for(var b=0;b<a;b++)this.freeQueue_.push(this.createObject())};
goog.structs.SimplePool.prototype.createObject=function(){return this.createObjectFn_?this.createObjectFn_():{}};goog.structs.SimplePool.prototype.disposeObject=function(a){if(this.disposeObjectFn_)this.disposeObjectFn_(a);else if(goog.isObject(a))if(goog.isFunction(a.dispose))a.dispose();else for(var b in a)delete a[b]};
goog.structs.SimplePool.prototype.disposeInternal=function(){goog.structs.SimplePool.superClass_.disposeInternal.call(this);for(var a=this.freeQueue_;a.length;)this.disposeObject(a.pop());delete this.freeQueue_};goog.debug.Trace_=function(){this.events_=[];this.outstandingEvents_=new goog.structs.Map;this.tracerOverheadComment_=this.tracerOverheadEnd_=this.tracerOverheadStart_=this.startTime_=0;this.stats_=new goog.structs.Map;this.commentCount_=this.tracerCount_=0;this.nextId_=1;this.eventPool_=new goog.structs.SimplePool(0,4E3);this.eventPool_.createObject=function(){return new goog.debug.Trace_.Event_};this.statPool_=new goog.structs.SimplePool(0,50);this.statPool_.createObject=function(){return new goog.debug.Trace_.Stat_};
var a=this;this.idPool_=new goog.structs.SimplePool(0,2E3);this.idPool_.setCreateObjectFn(function(){return a.nextId_++});this.defaultThreshold_=3;this.traceCallbacks_={}};goog.debug.Trace_.prototype.logger_=goog.log.getLogger("goog.debug.Trace");goog.debug.Trace_.prototype.MAX_TRACE_SIZE=1E3;goog.debug.Trace_.EventType={START:0,STOP:1,COMMENT:2};goog.debug.Trace_.Stat_=function(){this.varAlloc=this.time=this.count=0};
goog.debug.Trace_.Stat_.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");this.varAlloc&&a.push(" [VarAlloc = ",this.varAlloc,"]");return a.join("")};goog.debug.Trace_.Event_=function(){};
goog.debug.Trace_.Event_.prototype.toTraceString=function(a,b,c){var d=[];-1==b?d.push("    "):d.push(goog.debug.Trace_.longToPaddedString_(this.eventTime-b));d.push(" ",goog.debug.Trace_.formatTime_(this.eventTime-a));this.eventType==goog.debug.Trace_.EventType.START?d.push(" Start        "):this.eventType==goog.debug.Trace_.EventType.STOP?(d.push(" Done "),d.push(goog.debug.Trace_.longToPaddedString_(this.stopTime-this.startTime)," ms ")):d.push(" Comment      ");d.push(c,this);0<this.totalVarAlloc&&
d.push("[VarAlloc ",this.totalVarAlloc,"] ");return d.join("")};goog.debug.Trace_.Event_.prototype.toString=function(){return null==this.type?goog.asserts.assert(this.comment):"["+this.type+"] "+this.comment};goog.debug.Trace_.TracerCallbacks=function(){};goog.debug.Trace_.TRACE_CANCELLED_={wasCancelled:!0};goog.debug.Trace_.NORMAL_STOP_={};goog.debug.Trace_.TracerCallbacks.sequence_=function(a,b){return a?b?function(){a.apply(void 0,arguments);b.apply(void 0,arguments)}:a:b};
goog.debug.Trace_.prototype.removeAllListeners=function(){this.traceCallbacks_={}};goog.debug.Trace_.prototype.addTraceCallbacks=function(a){this.traceCallbacks_.start=goog.debug.Trace_.TracerCallbacks.sequence_(this.traceCallbacks_.start,a.start);this.traceCallbacks_.stop=goog.debug.Trace_.TracerCallbacks.sequence_(this.traceCallbacks_.stop,a.stop);this.traceCallbacks_.comment=goog.debug.Trace_.TracerCallbacks.sequence_(this.traceCallbacks_.comment,a.comment)};
goog.debug.Trace_.prototype.setStartTime=function(a){this.startTime_=a};goog.debug.Trace_.prototype.initCurrentTrace=function(a){this.reset(a)};goog.debug.Trace_.prototype.clearCurrentTrace=function(){this.reset(0)};goog.debug.Trace_.prototype.clearOutstandingEvents_=function(){this.traceCallbacks_.stop&&goog.iter.forEach(this.outstandingEvents_,function(a){this.traceCallbacks_.stop(a.id,goog.debug.Trace_.TRACE_CANCELLED_)},this);this.outstandingEvents_.clear()};
goog.debug.Trace_.prototype.reset=function(a){this.defaultThreshold_=a;this.clearOutstandingEvents_();this.releaseEvents_();this.startTime_=goog.debug.Trace_.now();this.commentCount_=this.tracerCount_=this.tracerOverheadComment_=this.tracerOverheadEnd_=this.tracerOverheadStart_=0;a=this.stats_.getKeys();for(var b=0;b<a.length;b++){var c=this.stats_.get(a[b]);c.count=0;c.time=0;c.varAlloc=0;this.statPool_.releaseObject(c)}this.stats_.clear()};
goog.debug.Trace_.prototype.releaseEvents_=function(){for(var a=0;a<this.events_.length;a++){var b=this.events_[a];b.id?this.outstandingEvents_.containsKey(b.id)||(this.idPool_.releaseObject(b.id),this.eventPool_.releaseObject(b)):this.eventPool_.releaseObject(b)}this.events_.length=0};
goog.debug.Trace_.prototype.startTracer=function(a,b){var c=goog.debug.Trace_.now(),d=this.getTotalVarAlloc(),e=this.outstandingEvents_.getCount();this.events_.length+e>this.MAX_TRACE_SIZE&&(e>this.MAX_TRACE_SIZE/2&&(goog.log.warning(this.logger_,"Giant thread trace. Clearing outstanding events."),this.clearOutstandingEvents_()),this.events_.length>this.MAX_TRACE_SIZE/2&&(goog.log.warning(this.logger_,"Giant thread trace. Clearing to avoid memory leak."),this.releaseEvents_()));goog.debug.Logger.logToProfilers("Start : "+
a);e=this.eventPool_.getObject();e.stopTime=void 0;e.totalVarAlloc=d;e.eventType=goog.debug.Trace_.EventType.START;e.id=this.idPool_.getObject();e.comment=a;e.type=b;this.events_.push(e);this.outstandingEvents_.set(String(e.id),e);this.tracerCount_++;a=goog.debug.Trace_.now();e.startTime=e.eventTime=a;this.tracerOverheadStart_+=a-c;this.traceCallbacks_.start&&this.traceCallbacks_.start(e.id,e.toString());return e.id};
goog.debug.Trace_.prototype.stopTracer=function(a,b){var c=goog.debug.Trace_.now();var d=0===b?0:b?b:this.defaultThreshold_;b=this.outstandingEvents_.get(String(a));if(null==b)return null;goog.asserts.assertNumber(a);this.traceCallbacks_.stop&&this.traceCallbacks_.stop(Number(a),goog.debug.Trace_.NORMAL_STOP_);this.outstandingEvents_.remove(String(a));a=c-b.startTime;if(a<d)for(d=this.events_.length-1;0<=d;d--){if(this.events_[d]==b){this.events_.splice(d,1);this.idPool_.releaseObject(b.id);this.eventPool_.releaseObject(b);
break}}else{var e=this.eventPool_.getObject();e.id=void 0;e.eventType=goog.debug.Trace_.EventType.STOP;e.startTime=b.startTime;e.comment=b.comment;e.type=b.type;e.stopTime=e.eventTime=c;this.events_.push(e)}d=b.type;var f=null;d&&(f=this.getStat_(d),f.count++,f.time+=a);e&&(goog.debug.Logger.logToProfilers("Stop : "+e.comment),e.totalVarAlloc=this.getTotalVarAlloc(),f&&(f.varAlloc+=e.totalVarAlloc-b.totalVarAlloc));e=goog.debug.Trace_.now();this.tracerOverheadEnd_+=e-c;return a};
goog.debug.Trace_.prototype.setGcTracer=function(a){this.gcTracer_=a};goog.debug.Trace_.prototype.getTotalVarAlloc=function(){var a=this.gcTracer_;return a&&a.isTracing()?a.totalVarAlloc:-1};
goog.debug.Trace_.prototype.addComment=function(a,b,c){var d=goog.debug.Trace_.now(),e=c?c:d,f=this.eventPool_.getObject();f.startTime=void 0;f.stopTime=void 0;f.id=void 0;f.eventType=goog.debug.Trace_.EventType.COMMENT;f.eventTime=e;f.type=b;f.comment=a;f.totalVarAlloc=this.getTotalVarAlloc();this.commentCount_++;if(c){this.traceCallbacks_.comment&&this.traceCallbacks_.comment(f.toString(),c);a=this.events_.length;for(b=0;b<a;b++)if(this.events_[b].eventTime>e){goog.array.insertAt(this.events_,f,
b);break}b==a&&this.events_.push(f)}else this.traceCallbacks_.comment&&this.traceCallbacks_.comment(f.toString()),this.events_.push(f);(e=f.type)&&this.getStat_(e).count++;this.tracerOverheadComment_+=goog.debug.Trace_.now()-d};goog.debug.Trace_.prototype.getStat_=function(a){var b=this.stats_.get(a);b||(b=this.statPool_.getObject(),b.type=a,this.stats_.set(a,b));return b};goog.debug.Trace_.prototype.getFormattedTrace=function(){return this.toString()};
goog.debug.Trace_.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.events_.length;d++){var e=this.events_[d];e.eventType==goog.debug.Trace_.EventType.STOP&&c.pop();a.push(" ",e.toTraceString(this.startTime_,b,c.join("")));b=e.eventTime;a.push("\n");e.eventType==goog.debug.Trace_.EventType.START&&c.push("|  ")}if(0!=this.outstandingEvents_.getCount()){var f=goog.debug.Trace_.now();a.push(" Unstopped timers:\n");goog.iter.forEach(this.outstandingEvents_,function(b){a.push("  ",b," (",
f-b.startTime," ms, started at ",goog.debug.Trace_.formatTime_(b.startTime),")\n")})}b=this.stats_.getKeys();for(d=0;d<b.length;d++)c=this.stats_.get(b[d]),1<c.count&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.tracerCount_,"\n","Total comments created ",this.commentCount_,"\n","Overhead start: ",this.tracerOverheadStart_," ms\n","Overhead end: ",this.tracerOverheadEnd_," ms\n","Overhead comment: ",this.tracerOverheadComment_," ms\n");return a.join("")};
goog.debug.Trace_.longToPaddedString_=function(a){a=Math.round(a);var b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a};goog.debug.Trace_.formatTime_=function(a){a=Math.round(a);var b=a%1E3;return String(100+a/1E3%60).substring(1,3)+"."+String(1E3+b).substring(1,4)};goog.debug.Trace_.now=function(){return goog.now()};goog.debug.Trace=new goog.debug.Trace_;goog.debug.StopTraceDetail=function(){};goog.ui.tree={};goog.ui.tree.BaseNode=function(a,b,c){goog.ui.Component.call(this,c);this.config_=b||goog.ui.tree.BaseNode.defaultConfig;this.html_=goog.html.SafeHtml.htmlEscapePreservingNewlines(a);this.expanded_=this.selected_=!1;this.toolTip_=null;this.afterLabelHtml_=goog.html.SafeHtml.EMPTY;this.isUserCollapsible_=!0;this.depth_=-1};goog.inherits(goog.ui.tree.BaseNode,goog.ui.Component);
goog.ui.tree.BaseNode.EventType={BEFORE_EXPAND:"beforeexpand",EXPAND:"expand",BEFORE_COLLAPSE:"beforecollapse",COLLAPSE:"collapse"};goog.ui.tree.BaseNode.allNodes={};goog.ui.tree.BaseNode.prototype.disposeInternal=function(){goog.ui.tree.BaseNode.superClass_.disposeInternal.call(this);this.tree&&(this.tree.removeNode(this),this.tree=null);this.setElementInternal(null)};
goog.ui.tree.BaseNode.prototype.initAccessibility=function(){var a=this.getElement();if(a){var b=this.getLabelElement();b&&!b.id&&(b.id=this.getId()+".label");goog.a11y.aria.setRole(a,"treeitem");goog.a11y.aria.setState(a,"selected",!1);goog.a11y.aria.setState(a,"level",this.getDepth());b&&goog.a11y.aria.setState(a,"labelledby",b.id);(b=this.getIconElement())&&goog.a11y.aria.setRole(b,"presentation");(b=this.getExpandIconElement())&&goog.a11y.aria.setRole(b,"presentation");if(b=this.getChildrenElement())if(goog.a11y.aria.setRole(b,
"group"),b.hasChildNodes())for(goog.a11y.aria.setState(a,goog.a11y.aria.State.EXPANDED,!1),a=this.getChildCount(),b=1;b<=a;b++){var c=this.getChildAt(b-1).getElement();goog.asserts.assert(c,"The child element cannot be null");goog.a11y.aria.setState(c,"setsize",a);goog.a11y.aria.setState(c,"posinset",b)}}};goog.ui.tree.BaseNode.prototype.createDom=function(){var a=this.getDomHelper().safeHtmlToNode(this.toSafeHtml());this.setElementInternal(a)};
goog.ui.tree.BaseNode.prototype.enterDocument=function(){goog.ui.tree.BaseNode.superClass_.enterDocument.call(this);goog.ui.tree.BaseNode.allNodes[this.getId()]=this;this.initAccessibility()};goog.ui.tree.BaseNode.prototype.exitDocument=function(){goog.ui.tree.BaseNode.superClass_.exitDocument.call(this);delete goog.ui.tree.BaseNode.allNodes[this.getId()]};
goog.ui.tree.BaseNode.prototype.addChildAt=function(a,b,c){goog.asserts.assert(!a.getParent());goog.asserts.assertInstanceof(a,goog.ui.tree.BaseNode);c=this.getChildAt(b-1);var d=this.getChildAt(b);goog.ui.tree.BaseNode.superClass_.addChildAt.call(this,a,b);a.previousSibling_=c;a.nextSibling_=d;c?c.nextSibling_=a:this.firstChild_=a;d?d.previousSibling_=a:this.lastChild_=a;(b=this.getTree())&&a.setTreeInternal(b);a.setDepth_(this.getDepth()+1);if(b=this.getElement())if(this.updateExpandIcon(),goog.a11y.aria.setState(b,
goog.a11y.aria.State.EXPANDED,this.getExpanded()),this.getExpanded()){b=this.getChildrenElement();a.getElement()||a.createDom();var e=a.getElement(),f=d&&d.getElement();b.insertBefore(e,f);this.isInDocument()&&a.enterDocument();d||(c?c.updateExpandIcon():(goog.style.setElementShown(b,!0),this.setExpanded(this.getExpanded())))}};
goog.ui.tree.BaseNode.prototype.add=function(a,b){goog.asserts.assert(!b||b.getParent()==this,"Can only add nodes before siblings");a.getParent()&&a.getParent().removeChild(a);this.addChildAt(a,b?this.indexOfChild(b):this.getChildCount());return a};
goog.ui.tree.BaseNode.prototype.removeChild=function(a,b){var c=this.getTree();b=c?c.getSelectedItem():null;if(b==a||a.contains(b))c.hasFocus()?(this.select(),goog.Timer.callOnce(this.onTimeoutSelect_,10,this)):this.select();goog.ui.tree.BaseNode.superClass_.removeChild.call(this,a);this.lastChild_==a&&(this.lastChild_=a.previousSibling_);this.firstChild_==a&&(this.firstChild_=a.nextSibling_);a.previousSibling_&&(a.previousSibling_.nextSibling_=a.nextSibling_);a.nextSibling_&&(a.nextSibling_.previousSibling_=
a.previousSibling_);b=a.isLastSibling();a.tree=null;a.depth_=-1;if(c&&(c.removeNode(a),this.isInDocument())){c=this.getChildrenElement();if(a.isInDocument()){var d=a.getElement();c.removeChild(d);a.exitDocument()}b&&(b=this.getLastChild())&&b.updateExpandIcon();this.hasChildren()||(c.style.display="none",this.updateExpandIcon(),this.updateIcon_(),(b=this.getElement())&&goog.a11y.aria.removeState(b,goog.a11y.aria.State.EXPANDED))}return a};goog.ui.tree.BaseNode.prototype.remove=goog.ui.tree.BaseNode.prototype.removeChild;
goog.ui.tree.BaseNode.prototype.onTimeoutSelect_=function(){this.select()};goog.ui.tree.BaseNode.prototype.getTree=goog.abstractMethod;goog.ui.tree.BaseNode.prototype.getDepth=function(){var a=this.depth_;0>a&&(a=this.computeDepth_(),this.setDepth_(a));return a};goog.ui.tree.BaseNode.prototype.computeDepth_=function(){var a=this.getParent();return a?a.getDepth()+1:0};
goog.ui.tree.BaseNode.prototype.setDepth_=function(a){if(a!=this.depth_){this.depth_=a;var b=this.getRowElement();if(b){var c=this.getPixelIndent_()+"px";this.isRightToLeft()?b.style.paddingRight=c:b.style.paddingLeft=c}this.forEachChild(function(b){b.setDepth_(a+1)})}};goog.ui.tree.BaseNode.prototype.contains=function(a){for(;a;){if(a==this)return!0;a=a.getParent()}return!1};goog.ui.tree.BaseNode.EMPTY_CHILDREN_=[];
goog.ui.tree.BaseNode.prototype.getChildren=function(){var a=[];this.forEachChild(function(b){a.push(b)});return a};goog.ui.tree.BaseNode.prototype.getFirstChild=function(){return this.getChildAt(0)};goog.ui.tree.BaseNode.prototype.getLastChild=function(){return this.getChildAt(this.getChildCount()-1)};goog.ui.tree.BaseNode.prototype.getPreviousSibling=function(){return this.previousSibling_};goog.ui.tree.BaseNode.prototype.getNextSibling=function(){return this.nextSibling_};
goog.ui.tree.BaseNode.prototype.isLastSibling=function(){return!this.nextSibling_};goog.ui.tree.BaseNode.prototype.isSelected=function(){return this.selected_};goog.ui.tree.BaseNode.prototype.select=function(){var a=this.getTree();a&&a.setSelectedItem(this)};goog.ui.tree.BaseNode.prototype.deselect=goog.nullFunction;
goog.ui.tree.BaseNode.prototype.setSelectedInternal=function(a){if(this.selected_!=a){this.selected_=a;this.updateRow();var b=this.getElement();b&&(goog.a11y.aria.setState(b,"selected",a),a&&(a=this.getTree().getElement(),goog.asserts.assert(a,"The DOM element for the tree cannot be null"),goog.a11y.aria.setState(a,"activedescendant",this.getId())))}};goog.ui.tree.BaseNode.prototype.getExpanded=function(){return this.expanded_};
goog.ui.tree.BaseNode.prototype.setExpandedInternal=function(a){this.expanded_=a};
goog.ui.tree.BaseNode.prototype.setExpanded=function(a){var b=a!=this.expanded_;if(!b||this.dispatchEvent(a?goog.ui.tree.BaseNode.EventType.BEFORE_EXPAND:goog.ui.tree.BaseNode.EventType.BEFORE_COLLAPSE)){this.expanded_=a;var c=this.getTree();var d=this.getElement();if(this.hasChildren()){if(!a&&c&&this.contains(c.getSelectedItem())&&this.select(),d){if(c=this.getChildrenElement())if(goog.style.setElementShown(c,a),goog.a11y.aria.setState(d,goog.a11y.aria.State.EXPANDED,a),a&&this.isInDocument()&&
!c.hasChildNodes()){var e=[];this.forEachChild(function(a){e.push(a.toSafeHtml())});goog.dom.safe.setInnerHtml(c,goog.html.SafeHtml.concat(e));this.forEachChild(function(a){a.enterDocument()})}this.updateExpandIcon()}}else(c=this.getChildrenElement())&&goog.style.setElementShown(c,!1);d&&this.updateIcon_();b&&this.dispatchEvent(a?goog.ui.tree.BaseNode.EventType.EXPAND:goog.ui.tree.BaseNode.EventType.COLLAPSE)}};goog.ui.tree.BaseNode.prototype.toggle=function(){this.setExpanded(!this.getExpanded())};
goog.ui.tree.BaseNode.prototype.expand=function(){this.setExpanded(!0)};goog.ui.tree.BaseNode.prototype.collapse=function(){this.setExpanded(!1)};goog.ui.tree.BaseNode.prototype.collapseChildren=function(){this.forEachChild(function(a){a.collapseAll()})};goog.ui.tree.BaseNode.prototype.collapseAll=function(){this.collapseChildren();this.collapse()};goog.ui.tree.BaseNode.prototype.expandChildren=function(){this.forEachChild(function(a){a.expandAll()})};
goog.ui.tree.BaseNode.prototype.expandAll=function(){this.expandChildren();this.expand()};goog.ui.tree.BaseNode.prototype.reveal=function(){var a=this.getParent();a&&(a.setExpanded(!0),a.reveal())};goog.ui.tree.BaseNode.prototype.setIsUserCollapsible=function(a){(this.isUserCollapsible_=a)||this.expand();this.getElement()&&this.updateExpandIcon()};goog.ui.tree.BaseNode.prototype.isUserCollapsible=function(){return this.isUserCollapsible_};
goog.ui.tree.BaseNode.prototype.toSafeHtml=function(){var a=this.getTree(),b=!a.getShowLines()||a==this.getParent()&&!a.getShowRootLines()?this.config_.cssChildrenNoLines:this.config_.cssChildren;a=this.getExpanded()&&this.hasChildren();b={"class":b,style:this.getLineStyle()};var c=[];a&&this.forEachChild(function(a){c.push(a.toSafeHtml())});a=goog.html.SafeHtml.create("div",b,c);return goog.html.SafeHtml.create("div",{"class":this.config_.cssItem,id:this.getId()},[this.getRowSafeHtml(),a])};
goog.ui.tree.BaseNode.prototype.getPixelIndent_=function(){return Math.max(0,(this.getDepth()-1)*this.config_.indentWidth)};goog.ui.tree.BaseNode.prototype.getRowSafeHtml=function(){var a={};a["padding-"+(this.isRightToLeft()?"right":"left")]=this.getPixelIndent_()+"px";a={"class":this.getRowClassName(),style:a};var b=[this.getExpandIconSafeHtml(),this.getIconSafeHtml(),this.getLabelSafeHtml()];return goog.html.SafeHtml.create("div",a,b)};
goog.ui.tree.BaseNode.prototype.getRowClassName=function(){var a=this.isSelected()?" "+this.config_.cssSelectedRow:"";return this.config_.cssTreeRow+a};goog.ui.tree.BaseNode.prototype.getLabelSafeHtml=function(){var a=goog.html.SafeHtml.create("span",{"class":this.config_.cssItemLabel,title:this.getToolTip()||null},this.getSafeHtml());return goog.html.SafeHtml.concat(a,goog.html.SafeHtml.create("span",{},this.getAfterLabelSafeHtml()))};goog.ui.tree.BaseNode.prototype.getAfterLabelHtml=function(){return goog.html.SafeHtml.unwrap(this.getAfterLabelSafeHtml())};
goog.ui.tree.BaseNode.prototype.getAfterLabelSafeHtml=function(){return this.afterLabelHtml_};goog.ui.tree.BaseNode.prototype.setAfterLabelSafeHtml=function(a){this.afterLabelHtml_=a;var b=this.getAfterLabelElement();b&&goog.dom.safe.setInnerHtml(b,a)};goog.ui.tree.BaseNode.prototype.getIconSafeHtml=function(){return goog.html.SafeHtml.create("span",{style:{display:"inline-block"},"class":this.getCalculatedIconClass()})};goog.ui.tree.BaseNode.prototype.getCalculatedIconClass=goog.abstractMethod;
goog.ui.tree.BaseNode.prototype.getExpandIconSafeHtml=function(){return goog.html.SafeHtml.create("span",{type:"expand",style:{display:"inline-block"},"class":this.getExpandIconClass()})};
goog.ui.tree.BaseNode.prototype.getExpandIconClass=function(){var a=this.getTree(),b=!a.getShowLines()||a==this.getParent()&&!a.getShowRootLines(),c=this.config_,d=new goog.string.StringBuffer;d.append(c.cssTreeIcon," ",c.cssExpandTreeIcon," ");if(this.hasChildren()){var e=0;a.getShowExpandIcons()&&this.isUserCollapsible_&&(e=this.getExpanded()?2:1);b||(e=this.isLastSibling()?e+4:e+8);switch(e){case 1:d.append(c.cssExpandTreeIconPlus);break;case 2:d.append(c.cssExpandTreeIconMinus);break;case 4:d.append(c.cssExpandTreeIconL);
break;case 5:d.append(c.cssExpandTreeIconLPlus);break;case 6:d.append(c.cssExpandTreeIconLMinus);break;case 8:d.append(c.cssExpandTreeIconT);break;case 9:d.append(c.cssExpandTreeIconTPlus);break;case 10:d.append(c.cssExpandTreeIconTMinus);break;default:d.append(c.cssExpandTreeIconBlank)}}else b?d.append(c.cssExpandTreeIconBlank):this.isLastSibling()?d.append(c.cssExpandTreeIconL):d.append(c.cssExpandTreeIconT);return d.toString()};
goog.ui.tree.BaseNode.prototype.getLineStyle=function(){var a=this.getExpanded()&&this.hasChildren();return goog.html.SafeStyle.create({"background-position":this.getBackgroundPosition(),display:a?null:"none"})};goog.ui.tree.BaseNode.prototype.getBackgroundPosition=function(){return(this.isLastSibling()?"-100":(this.getDepth()-1)*this.config_.indentWidth)+"px 0"};
goog.ui.tree.BaseNode.prototype.getElement=function(){var a=goog.ui.tree.BaseNode.superClass_.getElement.call(this);a||(a=this.getDomHelper().getElement(this.getId()),this.setElementInternal(a));return a};goog.ui.tree.BaseNode.prototype.getRowElement=function(){var a=this.getElement();return a?a.firstChild:null};goog.ui.tree.BaseNode.prototype.getExpandIconElement=function(){var a=this.getRowElement();return a?a.firstChild:null};
goog.ui.tree.BaseNode.prototype.getIconElement=function(){var a=this.getRowElement();return a?a.childNodes[1]:null};goog.ui.tree.BaseNode.prototype.getLabelElement=function(){var a=this.getRowElement();return a&&a.lastChild?a.lastChild.previousSibling:null};goog.ui.tree.BaseNode.prototype.getAfterLabelElement=function(){var a=this.getRowElement();return a?a.lastChild:null};goog.ui.tree.BaseNode.prototype.getChildrenElement=function(){var a=this.getElement();return a?a.lastChild:null};
goog.ui.tree.BaseNode.prototype.setIconClass=function(a){this.iconClass_=a;this.isInDocument()&&this.updateIcon_()};goog.ui.tree.BaseNode.prototype.getIconClass=function(){return this.iconClass_};goog.ui.tree.BaseNode.prototype.setExpandedIconClass=function(a){this.expandedIconClass_=a;this.isInDocument()&&this.updateIcon_()};goog.ui.tree.BaseNode.prototype.getExpandedIconClass=function(){return this.expandedIconClass_};goog.ui.tree.BaseNode.prototype.setText=function(a){this.setSafeHtml(goog.html.SafeHtml.htmlEscape(a))};
goog.ui.tree.BaseNode.prototype.getText=function(){return goog.string.unescapeEntities(goog.html.SafeHtml.unwrap(this.html_))};goog.ui.tree.BaseNode.prototype.setSafeHtml=function(a){this.html_=a;var b=this.getLabelElement();b&&goog.dom.safe.setInnerHtml(b,a);(a=this.getTree())&&a.setNode(this)};goog.ui.tree.BaseNode.prototype.getHtml=function(){return goog.html.SafeHtml.unwrap(this.getSafeHtml())};goog.ui.tree.BaseNode.prototype.getSafeHtml=function(){return this.html_};
goog.ui.tree.BaseNode.prototype.setToolTip=function(a){this.toolTip_=a;var b=this.getLabelElement();b&&(b.title=a)};goog.ui.tree.BaseNode.prototype.getToolTip=function(){return this.toolTip_};goog.ui.tree.BaseNode.prototype.updateRow=function(){var a=this.getRowElement();a&&(a.className=this.getRowClassName())};
goog.ui.tree.BaseNode.prototype.updateExpandIcon=function(){var a=this.getExpandIconElement();a&&(a.className=this.getExpandIconClass());if(a=this.getChildrenElement())a.style.backgroundPosition=this.getBackgroundPosition()};goog.ui.tree.BaseNode.prototype.updateIcon_=function(){this.getIconElement().className=this.getCalculatedIconClass()};
goog.ui.tree.BaseNode.prototype.onMouseDown=function(a){"expand"==a.target.getAttribute("type")&&this.hasChildren()?this.isUserCollapsible_&&this.toggle():(this.select(),this.updateRow())};goog.ui.tree.BaseNode.prototype.onClick_=goog.events.Event.preventDefault;goog.ui.tree.BaseNode.prototype.onDoubleClick_=function(a){"expand"==a.target.getAttribute("type")&&this.hasChildren()||this.isUserCollapsible_&&this.toggle()};
goog.ui.tree.BaseNode.prototype.onKeyDown=function(a){var b=!0;switch(a.keyCode){case goog.events.KeyCodes.RIGHT:if(a.altKey)break;this.hasChildren()&&(this.getExpanded()?this.getFirstChild().select():this.setExpanded(!0));break;case goog.events.KeyCodes.LEFT:if(a.altKey)break;if(this.hasChildren()&&this.getExpanded()&&this.isUserCollapsible_)this.setExpanded(!1);else{var c=this.getParent(),d=this.getTree();c&&(d.getShowRootNode()||c!=d)&&c.select()}break;case goog.events.KeyCodes.DOWN:(c=this.getNextShownNode())&&
c.select();break;case goog.events.KeyCodes.UP:(c=this.getPreviousShownNode())&&c.select();break;default:b=!1}b&&(a.preventDefault(),(d=this.getTree())&&d.clearTypeAhead());return b};goog.ui.tree.BaseNode.prototype.getLastShownDescendant=function(){return this.getExpanded()&&this.hasChildren()?this.getLastChild().getLastShownDescendant():this};
goog.ui.tree.BaseNode.prototype.getNextShownNode=function(){if(this.hasChildren()&&this.getExpanded())return this.getFirstChild();for(var a=this,b;a!=this.getTree();){b=a.getNextSibling();if(null!=b)return b;a=a.getParent()}return null};goog.ui.tree.BaseNode.prototype.getPreviousShownNode=function(){var a=this.getPreviousSibling();if(null!=a)return a.getLastShownDescendant();a=this.getParent();var b=this.getTree();return!b.getShowRootNode()&&a==b||this==b?null:a};
goog.ui.tree.BaseNode.prototype.getClientData=goog.ui.tree.BaseNode.prototype.getModel;goog.ui.tree.BaseNode.prototype.setClientData=goog.ui.tree.BaseNode.prototype.setModel;goog.ui.tree.BaseNode.prototype.getConfig=function(){return this.config_};goog.ui.tree.BaseNode.prototype.setTreeInternal=function(a){this.tree!=a&&(this.tree=a,a.setNode(this),this.forEachChild(function(b){b.setTreeInternal(a)}))};
goog.ui.tree.BaseNode.defaultConfig={indentWidth:19,cssRoot:"goog-tree-root goog-tree-item",cssHideRoot:"goog-tree-hide-root",cssItem:"goog-tree-item",cssChildren:"goog-tree-children",cssChildrenNoLines:"goog-tree-children-nolines",cssTreeRow:"goog-tree-row",cssItemLabel:"goog-tree-item-label",cssTreeIcon:"goog-tree-icon",cssExpandTreeIcon:"goog-tree-expand-icon",cssExpandTreeIconPlus:"goog-tree-expand-icon-plus",cssExpandTreeIconMinus:"goog-tree-expand-icon-minus",cssExpandTreeIconTPlus:"goog-tree-expand-icon-tplus",
cssExpandTreeIconTMinus:"goog-tree-expand-icon-tminus",cssExpandTreeIconLPlus:"goog-tree-expand-icon-lplus",cssExpandTreeIconLMinus:"goog-tree-expand-icon-lminus",cssExpandTreeIconT:"goog-tree-expand-icon-t",cssExpandTreeIconL:"goog-tree-expand-icon-l",cssExpandTreeIconBlank:"goog-tree-expand-icon-blank",cssExpandedFolderIcon:"goog-tree-expanded-folder-icon",cssCollapsedFolderIcon:"goog-tree-collapsed-folder-icon",cssFileIcon:"goog-tree-file-icon",cssExpandedRootIcon:"goog-tree-expanded-folder-icon",
cssCollapsedRootIcon:"goog-tree-collapsed-folder-icon",cssSelectedRow:"selected"};goog.ui.tree.TreeNode=function(a,b,c){goog.ui.tree.BaseNode.call(this,a,b,c)};goog.inherits(goog.ui.tree.TreeNode,goog.ui.tree.BaseNode);goog.ui.tree.TreeNode.prototype.getTree=function(){if(this.tree)return this.tree;var a=this.getParent();return a&&(a=a.getTree())?(this.setTreeInternal(a),a):null};
goog.ui.tree.TreeNode.prototype.getCalculatedIconClass=function(){var a=this.getExpanded(),b=this.getExpandedIconClass();if(a&&b)return b;b=this.getIconClass();if(!a&&b)return b;b=this.getConfig();if(this.hasChildren()){if(a&&b.cssExpandedFolderIcon)return b.cssTreeIcon+" "+b.cssExpandedFolderIcon;if(!a&&b.cssCollapsedFolderIcon)return b.cssTreeIcon+" "+b.cssCollapsedFolderIcon}else if(b.cssFileIcon)return b.cssTreeIcon+" "+b.cssFileIcon;return""};goog.structs.Trie=function(a){this.value_=void 0;this.childNodes_={};a&&this.setAll(a)};goog.structs.Trie.prototype.set=function(a,b){this.setOrAdd_(a,b,!1)};goog.structs.Trie.prototype.add=function(a,b){this.setOrAdd_(a,b,!0)};
goog.structs.Trie.prototype.setOrAdd_=function(a,b,c){for(var d=this,e=0;e<a.length;e++){var f=a.charAt(e);d.childNodes_[f]||(d.childNodes_[f]=new goog.structs.Trie);d=d.childNodes_[f]}if(c&&void 0!==d.value_)throw Error('The collection already contains the key "'+a+'"');d.value_=b};goog.structs.Trie.prototype.setAll=function(a){var b=goog.structs.getKeys(a);a=goog.structs.getValues(a);for(var c=0;c<b.length;c++)this.set(b[c],a[c])};
goog.structs.Trie.prototype.getChildNode_=function(a){for(var b=this,c=0;c<a.length;c++){var d=a.charAt(c);b=b.childNodes_[d];if(!b)return}return b};goog.structs.Trie.prototype.get=function(a){return(a=this.getChildNode_(a))?a.value_:void 0};goog.structs.Trie.prototype.getKeyAndPrefixes=function(a,b){var c=this,d={};b=b||0;void 0!==c.value_&&(d[b]=c.value_);for(;b<a.length;b++){var e=a.charAt(b);if(!(e in c.childNodes_))break;c=c.childNodes_[e];void 0!==c.value_&&(d[b]=c.value_)}return d};
goog.structs.Trie.prototype.getValues=function(){var a=[];this.getValuesInternal_(a);return a};goog.structs.Trie.prototype.getValuesInternal_=function(a){void 0!==this.value_&&a.push(this.value_);for(var b in this.childNodes_)this.childNodes_[b].getValuesInternal_(a)};goog.structs.Trie.prototype.getKeys=function(a){var b=[];if(a){for(var c=this,d=0;d<a.length;d++){var e=a.charAt(d);if(!c.childNodes_[e])return[];c=c.childNodes_[e]}c.getKeysInternal_(a,b)}else this.getKeysInternal_("",b);return b};
goog.structs.Trie.prototype.getKeysInternal_=function(a,b){void 0!==this.value_&&b.push(a);for(var c in this.childNodes_)this.childNodes_[c].getKeysInternal_(a+c,b)};goog.structs.Trie.prototype.containsKey=function(a){return void 0!==this.get(a)};goog.structs.Trie.prototype.containsPrefix=function(a){return 0==a.length?!this.isEmpty():!!this.getChildNode_(a)};
goog.structs.Trie.prototype.containsValue=function(a){if(this.value_===a)return!0;for(var b in this.childNodes_)if(this.childNodes_[b].containsValue(a))return!0;return!1};goog.structs.Trie.prototype.clear=function(){this.childNodes_={};this.value_=void 0};
goog.structs.Trie.prototype.remove=function(a){for(var b=this,c=[],d=0;d<a.length;d++){var e=a.charAt(d);if(!b.childNodes_[e])throw Error('The collection does not have the key "'+a+'"');c.push([b,e]);b=b.childNodes_[e]}a=b.value_;for(delete b.value_;0<c.length;)if(e=c.pop(),b=e[0],e=e[1],b.childNodes_[e].isEmpty())delete b.childNodes_[e];else break;return a};goog.structs.Trie.prototype.clone=function(){return new goog.structs.Trie(this)};goog.structs.Trie.prototype.getCount=function(){return goog.structs.getCount(this.getValues())};
goog.structs.Trie.prototype.isEmpty=function(){return void 0===this.value_&&goog.object.isEmpty(this.childNodes_)};goog.ui.tree.TypeAhead=function(){this.nodeMap_=new goog.structs.Trie;this.buffer_="";this.matchingNodes_=this.matchingLabels_=null;this.matchingNodeIndex_=this.matchingLabelIndex_=0};goog.ui.tree.TypeAhead.Offset={DOWN:1,UP:-1};
goog.ui.tree.TypeAhead.prototype.handleNavigation=function(a){var b=!1;switch(a.keyCode){case goog.events.KeyCodes.DOWN:case goog.events.KeyCodes.UP:a.ctrlKey&&(this.jumpTo_(a.keyCode==goog.events.KeyCodes.DOWN?goog.ui.tree.TypeAhead.Offset.DOWN:goog.ui.tree.TypeAhead.Offset.UP),b=!0);break;case goog.events.KeyCodes.BACKSPACE:a=this.buffer_.length-1;b=!0;0<a?(this.buffer_=this.buffer_.substring(0,a),this.jumpToLabel_(this.buffer_)):0==a?this.buffer_="":b=!1;break;case goog.events.KeyCodes.ESC:this.buffer_=
"",b=!0}return b};goog.ui.tree.TypeAhead.prototype.handleTypeAheadChar=function(a){var b=!1;a.ctrlKey||a.altKey||(a=String.fromCharCode(a.charCode||a.keyCode).toLowerCase(),goog.string.isUnicodeChar(a)&&(" "!=a||this.buffer_)&&(this.buffer_+=a,b=this.jumpToLabel_(this.buffer_)));return b};
goog.ui.tree.TypeAhead.prototype.setNodeInMap=function(a){var b=a.getText();if(b&&!goog.string.isEmptyOrWhitespace(goog.string.makeSafe(b))){b=b.toLowerCase();var c=this.nodeMap_.get(b);c?c.push(a):this.nodeMap_.set(b,[a])}};
goog.ui.tree.TypeAhead.prototype.removeNodeFromMap=function(a){var b=a.getText();if(b&&!goog.string.isEmptyOrWhitespace(goog.string.makeSafe(b))){b=b.toLowerCase();var c=this.nodeMap_.get(b);if(c){for(var d=a.getChildCount(),e=0;e<d;e++)this.removeNodeFromMap(a.getChildAt(e));goog.array.remove(c,a);c.length||this.nodeMap_.remove(b)}}};
goog.ui.tree.TypeAhead.prototype.jumpToLabel_=function(a){var b=!1;(a=this.nodeMap_.getKeys(a))&&a.length&&(this.matchingLabelIndex_=this.matchingNodeIndex_=0,b=this.nodeMap_.get(a[0]),b=this.selectMatchingNode_(b))&&(this.matchingLabels_=a);return b};
goog.ui.tree.TypeAhead.prototype.jumpTo_=function(a){var b=!1,c=this.matchingLabels_;if(c){b=null;var d=!1;if(this.matchingNodes_){var e=this.matchingNodeIndex_+a;0<=e&&e<this.matchingNodes_.length?(this.matchingNodeIndex_=e,b=this.matchingNodes_):d=!0}b||(e=this.matchingLabelIndex_+a,0<=e&&e<c.length&&(this.matchingLabelIndex_=e),c.length>this.matchingLabelIndex_&&(b=this.nodeMap_.get(c[this.matchingLabelIndex_])),b&&b.length&&d&&(this.matchingNodeIndex_=a==goog.ui.tree.TypeAhead.Offset.UP?b.length-
1:0));if(b=this.selectMatchingNode_(b))this.matchingLabels_=c}return b};goog.ui.tree.TypeAhead.prototype.selectMatchingNode_=function(a){if(a){if(this.matchingNodeIndex_<a.length){var b=a[this.matchingNodeIndex_];this.matchingNodes_=a}b&&(b.reveal(),b.select())}return!!b};goog.ui.tree.TypeAhead.prototype.clear=function(){this.buffer_=""};goog.ui.tree.TreeControl=function(a,b,c){goog.ui.tree.BaseNode.call(this,a,b,c);this.setExpandedInternal(!0);this.setSelectedInternal(!0);this.selectedItem_=this;this.typeAhead_=new goog.ui.tree.TypeAhead;this.focusHandler_=this.keyHandler_=null;this.logger_=goog.log.getLogger("this");this.focused_=!1;this.focusedNode_=null;this.showRootLines_=this.showRootNode_=this.showExpandIcons_=this.showLines_=!0;if(goog.userAgent.IE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(d){goog.log.warning(this.logger_,
"Failed to enable background image cache")}};goog.inherits(goog.ui.tree.TreeControl,goog.ui.tree.BaseNode);goog.ui.tree.TreeControl.prototype.getTree=function(){return this};goog.ui.tree.TreeControl.prototype.getDepth=function(){return 0};goog.ui.tree.TreeControl.prototype.reveal=function(){};goog.ui.tree.TreeControl.prototype.handleFocus_=function(a){this.focused_=!0;goog.dom.classlist.add(goog.asserts.assert(this.getElement()),"focused");this.selectedItem_&&this.selectedItem_.select()};
goog.ui.tree.TreeControl.prototype.handleBlur_=function(a){this.focused_=!1;goog.dom.classlist.remove(goog.asserts.assert(this.getElement()),"focused")};goog.ui.tree.TreeControl.prototype.hasFocus=function(){return this.focused_};goog.ui.tree.TreeControl.prototype.getExpanded=function(){return!this.showRootNode_||goog.ui.tree.TreeControl.superClass_.getExpanded.call(this)};
goog.ui.tree.TreeControl.prototype.setExpanded=function(a){this.showRootNode_?goog.ui.tree.TreeControl.superClass_.setExpanded.call(this,a):this.setExpandedInternal(a)};goog.ui.tree.TreeControl.prototype.getExpandIconSafeHtml=function(){return goog.html.SafeHtml.EMPTY};goog.ui.tree.TreeControl.prototype.getIconElement=function(){var a=this.getRowElement();return a?a.firstChild:null};goog.ui.tree.TreeControl.prototype.getExpandIconElement=function(){return null};
goog.ui.tree.TreeControl.prototype.updateExpandIcon=function(){};goog.ui.tree.TreeControl.prototype.getRowClassName=function(){return goog.ui.tree.TreeControl.superClass_.getRowClassName.call(this)+(this.showRootNode_?"":" "+this.getConfig().cssHideRoot)};
goog.ui.tree.TreeControl.prototype.getCalculatedIconClass=function(){var a=this.getExpanded(),b=this.getExpandedIconClass();if(a&&b)return b;b=this.getIconClass();if(!a&&b)return b;b=this.getConfig();return a&&b.cssExpandedRootIcon?b.cssTreeIcon+" "+b.cssExpandedRootIcon:!a&&b.cssCollapsedRootIcon?b.cssTreeIcon+" "+b.cssCollapsedRootIcon:""};
goog.ui.tree.TreeControl.prototype.setSelectedItem=function(a){if(this.selectedItem_!=a){var b=!1;this.selectedItem_&&(b=this.selectedItem_==this.focusedNode_,this.selectedItem_.setSelectedInternal(!1));if(this.selectedItem_=a)a.setSelectedInternal(!0),b&&a.select();this.dispatchEvent(goog.events.EventType.CHANGE)}};goog.ui.tree.TreeControl.prototype.getSelectedItem=function(){return this.selectedItem_};
goog.ui.tree.TreeControl.prototype.setShowLines=function(a){this.showLines_!=a&&(this.showLines_=a,this.isInDocument()&&this.updateLinesAndExpandIcons_())};goog.ui.tree.TreeControl.prototype.getShowLines=function(){return this.showLines_};
goog.ui.tree.TreeControl.prototype.updateLinesAndExpandIcons_=function(){function a(e){var f=e.getChildrenElement();if(f){var g=!c||b==e.getParent()&&!d?e.getConfig().cssChildrenNoLines:e.getConfig().cssChildren;f.className=g;if(f=e.getExpandIconElement())f.className=e.getExpandIconClass()}e.forEachChild(a)}var b=this,c=b.getShowLines(),d=b.getShowRootLines();a(this)};
goog.ui.tree.TreeControl.prototype.setShowRootLines=function(a){this.showRootLines_!=a&&(this.showRootLines_=a,this.isInDocument()&&this.updateLinesAndExpandIcons_())};goog.ui.tree.TreeControl.prototype.getShowRootLines=function(){return this.showRootLines_};goog.ui.tree.TreeControl.prototype.setShowExpandIcons=function(a){this.showExpandIcons_!=a&&(this.showExpandIcons_=a,this.isInDocument()&&this.updateLinesAndExpandIcons_())};goog.ui.tree.TreeControl.prototype.getShowExpandIcons=function(){return this.showExpandIcons_};
goog.ui.tree.TreeControl.prototype.setShowRootNode=function(a){if(this.showRootNode_!=a){this.showRootNode_=a;if(this.isInDocument()){var b=this.getRowElement();b&&(b.className=this.getRowClassName())}!a&&this.getSelectedItem()==this&&this.getFirstChild()&&this.setSelectedItem(this.getFirstChild())}};goog.ui.tree.TreeControl.prototype.getShowRootNode=function(){return this.showRootNode_};
goog.ui.tree.TreeControl.prototype.initAccessibility=function(){goog.ui.tree.TreeControl.superClass_.initAccessibility.call(this);var a=this.getElement();goog.asserts.assert(a,"The DOM element for the tree cannot be null.");goog.a11y.aria.setRole(a,"tree");goog.a11y.aria.setState(a,"labelledby",this.getLabelElement().id)};
goog.ui.tree.TreeControl.prototype.enterDocument=function(){goog.ui.tree.TreeControl.superClass_.enterDocument.call(this);var a=this.getElement();a.className=this.getConfig().cssRoot;a.setAttribute("hideFocus","true");this.attachEvents_();this.initAccessibility()};goog.ui.tree.TreeControl.prototype.exitDocument=function(){goog.ui.tree.TreeControl.superClass_.exitDocument.call(this);this.detachEvents_()};
goog.ui.tree.TreeControl.prototype.attachEvents_=function(){var a=this.getElement();a.tabIndex=0;var b=this.keyHandler_=new goog.events.KeyHandler(a),c=this.focusHandler_=new goog.events.FocusHandler(a);this.getHandler().listen(c,goog.events.FocusHandler.EventType.FOCUSOUT,this.handleBlur_).listen(c,goog.events.FocusHandler.EventType.FOCUSIN,this.handleFocus_).listen(b,goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent).listen(a,goog.events.EventType.MOUSEDOWN,this.handleMouseEvent_).listen(a,
goog.events.EventType.CLICK,this.handleMouseEvent_).listen(a,goog.events.EventType.DBLCLICK,this.handleMouseEvent_)};goog.ui.tree.TreeControl.prototype.detachEvents_=function(){this.keyHandler_.dispose();this.keyHandler_=null;this.focusHandler_.dispose();this.focusHandler_=null};
goog.ui.tree.TreeControl.prototype.handleMouseEvent_=function(a){goog.log.fine(this.logger_,"Received event "+a.type);var b=this.getNodeFromEvent_(a);if(b)switch(a.type){case goog.events.EventType.MOUSEDOWN:b.onMouseDown(a);break;case goog.events.EventType.CLICK:b.onClick_(a);break;case goog.events.EventType.DBLCLICK:b.onDoubleClick_(a)}};
goog.ui.tree.TreeControl.prototype.handleKeyEvent=function(a){var b;(b=this.typeAhead_.handleNavigation(a)||this.selectedItem_&&this.selectedItem_.onKeyDown(a)||this.typeAhead_.handleTypeAheadChar(a))&&a.preventDefault();return b};goog.ui.tree.TreeControl.prototype.getNodeFromEvent_=function(a){for(var b=a.target;null!=b;){if(a=goog.ui.tree.BaseNode.allNodes[b.id])return a;if(b==this.getElement())break;b=b.parentNode}return null};
goog.ui.tree.TreeControl.prototype.createNode=function(a){return new goog.ui.tree.TreeNode(a||goog.html.SafeHtml.EMPTY,this.getConfig(),this.getDomHelper())};goog.ui.tree.TreeControl.prototype.setNode=function(a){this.typeAhead_.setNodeInMap(a)};goog.ui.tree.TreeControl.prototype.removeNode=function(a){this.typeAhead_.removeNodeFromMap(a)};goog.ui.tree.TreeControl.prototype.clearTypeAhead=function(){this.typeAhead_.clear()};goog.ui.tree.TreeControl.defaultConfig=goog.ui.tree.BaseNode.defaultConfig;goog.structs.LinkedMap=function(a,b,c){this.maxCount_=a||null;this.cache_=!!b;this.evictionCallback_=c;this.map_=new goog.structs.Map;this.head_=new goog.structs.LinkedMap.Node_("",void 0);this.head_.next=this.head_.prev=this.head_};goog.structs.LinkedMap.prototype.findAndMoveToTop_=function(a){(a=this.map_.get(a))&&this.cache_&&(a.remove(),this.insert_(a));return a};goog.structs.LinkedMap.prototype.get=function(a,b){return(a=this.findAndMoveToTop_(a))?a.value:b};
goog.structs.LinkedMap.prototype.peekValue=function(a,b){return(a=this.map_.get(a))?a.value:b};goog.structs.LinkedMap.prototype.set=function(a,b){var c=this.findAndMoveToTop_(a);c?c.value=b:(c=new goog.structs.LinkedMap.Node_(a,b),this.map_.set(a,c),this.insert_(c))};goog.structs.LinkedMap.prototype.peek=function(){return this.head_.next.value};goog.structs.LinkedMap.prototype.peekLast=function(){return this.head_.prev.value};goog.structs.LinkedMap.prototype.shift=function(){return this.popNode_(this.head_.next)};
goog.structs.LinkedMap.prototype.pop=function(){return this.popNode_(this.head_.prev)};goog.structs.LinkedMap.prototype.remove=function(a){return(a=this.map_.get(a))?(this.removeNode(a),!0):!1};goog.structs.LinkedMap.prototype.removeNode=function(a){a.remove();this.map_.remove(a.key)};goog.structs.LinkedMap.prototype.getCount=function(){return this.map_.getCount()};goog.structs.LinkedMap.prototype.isEmpty=function(){return this.map_.isEmpty()};
goog.structs.LinkedMap.prototype.setEvictionCallback=function(a){this.evictionCallback_=a};goog.structs.LinkedMap.prototype.setMaxCount=function(a){this.maxCount_=a||null;null!=this.maxCount_&&this.truncate_(this.maxCount_)};goog.structs.LinkedMap.prototype.getKeys=function(){return this.map(function(a,b){return b})};goog.structs.LinkedMap.prototype.getValues=function(){return this.map(function(a,b){return a})};
goog.structs.LinkedMap.prototype.contains=function(a){return this.some(function(b){return b==a})};goog.structs.LinkedMap.prototype.containsKey=function(a){return this.map_.containsKey(a)};goog.structs.LinkedMap.prototype.clear=function(){this.truncate_(0)};goog.structs.LinkedMap.prototype.forEach=function(a,b){for(var c=this.head_.next;c!=this.head_;c=c.next)a.call(b,c.value,c.key,this)};
goog.structs.LinkedMap.prototype.map=function(a,b){for(var c=[],d=this.head_.next;d!=this.head_;d=d.next)c.push(a.call(b,d.value,d.key,this));return c};goog.structs.LinkedMap.prototype.some=function(a,b){for(var c=this.head_.next;c!=this.head_;c=c.next)if(a.call(b,c.value,c.key,this))return!0;return!1};goog.structs.LinkedMap.prototype.every=function(a,b){for(var c=this.head_.next;c!=this.head_;c=c.next)if(!a.call(b,c.value,c.key,this))return!1;return!0};
goog.structs.LinkedMap.prototype.insert_=function(a){this.cache_?(a.next=this.head_.next,a.prev=this.head_,this.head_.next=a,a.next.prev=a):(a.prev=this.head_.prev,a.next=this.head_,this.head_.prev=a,a.prev.next=a);null!=this.maxCount_&&this.truncate_(this.maxCount_)};goog.structs.LinkedMap.prototype.truncate_=function(a){for(;this.getCount()>a;){var b=this.cache_?this.head_.prev:this.head_.next;this.removeNode(b);this.evictionCallback_&&this.evictionCallback_(b.key,b.value)}};
goog.structs.LinkedMap.prototype.popNode_=function(a){this.head_!=a&&this.removeNode(a);return a.value};goog.structs.LinkedMap.Node_=function(a,b){this.key=a;this.value=b};goog.structs.LinkedMap.Node_.prototype.remove=function(){this.prev.next=this.next;this.next.prev=this.prev;delete this.prev;delete this.next};goog.fx.AbstractDragDrop=function(){goog.events.EventTarget.call(this);this.items_=[];this.targets_=[];this.scrollableContainers_=[];this.initialized_=this.isTarget_=this.isSource_=!1};goog.inherits(goog.fx.AbstractDragDrop,goog.events.EventTarget);goog.fx.AbstractDragDrop.DUMMY_TARGET_MIN_SIZE_=10;goog.fx.AbstractDragDrop.EventType={DRAGOVER:"dragover",DRAGOUT:"dragout",DRAG:"drag",DROP:"drop",DRAGSTART:"dragstart",DRAGEND:"dragend"};goog.fx.AbstractDragDrop.initDragDistanceThreshold=5;
goog.fx.AbstractDragDrop.prototype.setDragClass=function(a){this.dragClass_=a};goog.fx.AbstractDragDrop.prototype.setSourceClass=function(a){this.sourceClass_=a};goog.fx.AbstractDragDrop.prototype.setTargetClass=function(a){this.targetClass_=a};goog.fx.AbstractDragDrop.prototype.isInitialized=function(){return this.initialized_};goog.fx.AbstractDragDrop.prototype.addItem=goog.abstractMethod;goog.fx.AbstractDragDrop.prototype.addTarget=function(a){this.targets_.push(a);this.isSource_=a.isTarget_=!0};
goog.fx.AbstractDragDrop.prototype.removeTarget=function(a){goog.array.remove(this.targets_,a);this.activeTarget_&&this.activeTarget_.target_==a&&(this.activeTarget_=null);this.recalculateDragTargets()};goog.fx.AbstractDragDrop.prototype.setScrollTarget=function(a){this.scrollTarget_=a};goog.fx.AbstractDragDrop.prototype.init=function(){if(!this.initialized_){for(var a,b=0;a=this.items_[b];b++)this.initItem(a);this.initialized_=!0}};
goog.fx.AbstractDragDrop.prototype.initItem=function(a){this.isSource_&&(goog.events.listen(a.element,goog.events.EventType.MOUSEDOWN,a.mouseDown_,!1,a),this.sourceClass_&&goog.dom.classlist.add(goog.asserts.assert(a.element),this.sourceClass_));this.isTarget_&&this.targetClass_&&goog.dom.classlist.add(goog.asserts.assert(a.element),this.targetClass_)};
goog.fx.AbstractDragDrop.prototype.disposeItem=function(a){this.isSource_&&(goog.events.unlisten(a.element,goog.events.EventType.MOUSEDOWN,a.mouseDown_,!1,a),this.sourceClass_&&goog.dom.classlist.remove(goog.asserts.assert(a.element),this.sourceClass_));this.isTarget_&&this.targetClass_&&goog.dom.classlist.remove(goog.asserts.assert(a.element),this.targetClass_);a.dispose()};
goog.fx.AbstractDragDrop.prototype.removeItems=function(){for(var a,b=0;a=this.items_[b];b++)this.disposeItem(a);this.items_.length=0};goog.fx.AbstractDragDrop.prototype.maybeStartDrag=function(a,b){b.maybeStartDrag_(a,b.element)};
goog.fx.AbstractDragDrop.prototype.startDrag=function(a,b){if(!this.dragItem_){this.dragItem_=b;var c=new goog.fx.DragDropEvent(goog.fx.AbstractDragDrop.EventType.DRAGSTART,this,this.dragItem_,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,a);0==this.dispatchEvent(c)?this.dragItem_=null:(b=b.getCurrentDragElement(),this.dragEl_=this.createDragElement(b),c=goog.dom.getOwnerDocument(b),c.body.appendChild(this.dragEl_),this.dragger_=this.createDraggerFor(b,this.dragEl_,a),this.dragger_.setScrollTarget(this.scrollTarget_),
goog.events.listen(this.dragger_,goog.fx.Dragger.EventType.DRAG,this.moveDrag_,!1,this),goog.events.listen(this.dragger_,goog.fx.Dragger.EventType.END,this.endDrag,!1,this),goog.events.listen(c.body,goog.events.EventType.SELECTSTART,this.suppressSelect_),this.recalculateDragTargets(),this.recalculateScrollableContainers(),this.activeTarget_=null,this.initScrollableContainerListeners_(),this.dragger_.startDrag(a),a.preventDefault())}};
goog.fx.AbstractDragDrop.prototype.recalculateDragTargets=function(){this.targetList_=[];for(var a,b=0;a=this.targets_[b];b++)for(var c,d=0;c=a.items_[d];d++)this.addDragTarget_(a,c);this.targetBox_||(this.targetBox_=new goog.math.Box(0,0,0,0))};
goog.fx.AbstractDragDrop.prototype.recalculateScrollableContainers=function(){var a,b;for(b=0;a=this.scrollableContainers_[b];b++){a.containedTargets_=[];a.savedScrollLeft_=a.element_.scrollLeft;a.savedScrollTop_=a.element_.scrollTop;var c=goog.style.getPageOffset(a.element_);var d=goog.style.getSize(a.element_);a.box_=new goog.math.Box(c.y,c.x+d.width,c.y+d.height,c.x)}for(b=0;d=this.targetList_[b];b++)for(c=0;a=this.scrollableContainers_[c];c++)goog.dom.contains(a.element_,d.element_)&&(a.containedTargets_.push(d),
d.scrollableContainer_=a)};goog.fx.AbstractDragDrop.prototype.createDraggerFor=function(a,b,c){a=this.getDragElementPosition(a,b,c);b.style.position="absolute";b.style.left=a.x+"px";b.style.top=a.y+"px";return new goog.fx.Dragger(b)};
goog.fx.AbstractDragDrop.prototype.endDrag=function(a){var b=a.dragCanceled?null:this.activeTarget_;if(b&&b.target_){var c=a.clientX,d=a.clientY,e=this.getScrollPos(),f=c+e.x;e=d+e.y;var g;this.subtargetFunction_&&(g=this.subtargetFunction_(b.item_,b.box_,f,e));var h=new goog.fx.DragDropEvent(goog.fx.AbstractDragDrop.EventType.DRAG,this,this.dragItem_,b.target_,b.item_,b.element_,c,d,f,e);this.dispatchEvent(h);a=new goog.fx.DragDropEvent(goog.fx.AbstractDragDrop.EventType.DROP,this,this.dragItem_,
b.target_,b.item_,b.element_,c,d,f,e,g,a.browserEvent);b.target_.dispatchEvent(a)}b=new goog.fx.DragDropEvent(goog.fx.AbstractDragDrop.EventType.DRAGEND,this,this.dragItem_,b?b.target_:void 0,b?b.item_:void 0,b?b.element_:void 0);this.dispatchEvent(b);goog.events.unlisten(this.dragger_,goog.fx.Dragger.EventType.DRAG,this.moveDrag_,!1,this);goog.events.unlisten(this.dragger_,goog.fx.Dragger.EventType.END,this.endDrag,!1,this);b=goog.dom.getOwnerDocument(this.dragItem_.getCurrentDragElement());goog.events.unlisten(b.body,
goog.events.EventType.SELECTSTART,this.suppressSelect_);this.afterEndDrag(this.activeTarget_?this.activeTarget_.item_:null)};goog.fx.AbstractDragDrop.prototype.afterEndDrag=function(a){this.disposeDrag()};goog.fx.AbstractDragDrop.prototype.disposeDrag=function(){this.disposeScrollableContainerListeners_();this.dragger_.dispose();goog.dom.removeNode(this.dragEl_);delete this.dragItem_;delete this.dragEl_;delete this.dragger_;delete this.targetList_;delete this.activeTarget_};
goog.fx.AbstractDragDrop.prototype.moveDrag_=function(a){var b=this.getEventPosition(a),c=b.x,d=b.y,e=this.activeTarget_;this.dispatchEvent(new goog.fx.DragDropEvent(goog.fx.AbstractDragDrop.EventType.DRAG,this,this.dragItem_,e?e.target_:void 0,e?e.item_:void 0,e?e.element_:void 0,a.clientX,a.clientY,c,d));var f;if(e){this.subtargetFunction_&&e.target_&&(f=this.subtargetFunction_(e.item_,e.box_,c,d));if(e.box_.contains(b)&&f==this.activeSubtarget_)return;if(e.target_){var g=new goog.fx.DragDropEvent(goog.fx.AbstractDragDrop.EventType.DRAGOUT,
this,this.dragItem_,e.target_,e.item_,e.element_);this.dispatchEvent(g);g=new goog.fx.DragDropEvent(goog.fx.AbstractDragDrop.EventType.DRAGOUT,this,this.dragItem_,e.target_,e.item_,e.element_,void 0,void 0,void 0,void 0,this.activeSubtarget_);e.target_.dispatchEvent(g)}this.activeSubtarget_=f;this.activeTarget_=null}this.targetBox_.contains(b)&&((e=this.activeTarget_=this.getTargetFromPosition_(b))&&e.target_?(this.subtargetFunction_&&(f=this.subtargetFunction_(e.item_,e.box_,c,d)),b=new goog.fx.DragDropEvent(goog.fx.AbstractDragDrop.EventType.DRAGOVER,
this,this.dragItem_,e.target_,e.item_,e.element_),b.subtarget=f,this.dispatchEvent(b),a=new goog.fx.DragDropEvent(goog.fx.AbstractDragDrop.EventType.DRAGOVER,this,this.dragItem_,e.target_,e.item_,e.element_,a.clientX,a.clientY,void 0,void 0,f),e.target_.dispatchEvent(a)):e||(this.activeTarget_=this.maybeCreateDummyTargetForPosition_(c,d)))};goog.fx.AbstractDragDrop.prototype.suppressSelect_=function(a){return!1};
goog.fx.AbstractDragDrop.prototype.initScrollableContainerListeners_=function(){var a,b;for(b=0;a=this.scrollableContainers_[b];b++)goog.events.listen(a.element_,goog.events.EventType.SCROLL,this.containerScrollHandler_,!1,this)};goog.fx.AbstractDragDrop.prototype.disposeScrollableContainerListeners_=function(){for(var a=0,b;b=this.scrollableContainers_[a];a++)goog.events.unlisten(b.element_,"scroll",this.containerScrollHandler_,!1,this),b.containedTargets_=[]};
goog.fx.AbstractDragDrop.prototype.addScrollableContainer=function(a){this.scrollableContainers_.push(new goog.fx.ScrollableContainer_(a))};goog.fx.AbstractDragDrop.prototype.removeAllScrollableContainers=function(){this.disposeScrollableContainerListeners_();this.scrollableContainers_=[]};
goog.fx.AbstractDragDrop.prototype.containerScrollHandler_=function(a){for(var b=0,c;c=this.scrollableContainers_[b];b++)if(a.target==c.element_){var d=c.savedScrollTop_-c.element_.scrollTop,e=c.savedScrollLeft_-c.element_.scrollLeft;c.savedScrollTop_=c.element_.scrollTop;c.savedScrollLeft_=c.element_.scrollLeft;this.dummyTarget_&&this.activeTarget_==this.dummyTarget_&&(0<d?this.dummyTarget_.box_.top+=d:this.dummyTarget_.box_.bottom+=d,0<e?this.dummyTarget_.box_.left+=e:this.dummyTarget_.box_.right+=
e);for(var f=0,g;g=c.containedTargets_[f];f++)g=g.box_,g.top+=d,g.left+=e,g.bottom+=d,g.right+=e,this.calculateTargetBox_(g)}this.dragger_.onScroll_(a)};goog.fx.AbstractDragDrop.prototype.setSubtargetFunction=function(a){this.subtargetFunction_=a};goog.fx.AbstractDragDrop.prototype.createDragElement=function(a){a=this.createDragElementInternal(a);goog.asserts.assert(a);this.dragClass_&&goog.dom.classlist.add(a,this.dragClass_);return a};
goog.fx.AbstractDragDrop.prototype.getDragElementPosition=function(a,b,c){b=goog.style.getPageOffset(a);a=goog.style.getMarginBox(a);b.x-=2*(a.left||0);b.y-=2*(a.top||0);return b};goog.fx.AbstractDragDrop.prototype.getDragger=function(){return this.dragger_};goog.fx.AbstractDragDrop.prototype.cloneNode_=function(a){return goog.fx.Dragger.cloneNode(a)};goog.fx.AbstractDragDrop.prototype.createDragElementInternal=function(a){return this.cloneNode_(a)};
goog.fx.AbstractDragDrop.prototype.addDragTarget_=function(a,b){for(var c=b.getDraggableElements(),d=0;d<c.length;d++){var e=c[d],f=this.getElementBox(b,e);this.targetList_.push(new goog.fx.ActiveDropTarget_(f,a,b,e));this.calculateTargetBox_(f)}};goog.fx.AbstractDragDrop.prototype.getElementBox=function(a,b){a=goog.style.getPageOffset(b);b=goog.style.getSize(b);return new goog.math.Box(a.y,a.x+b.width,a.y+b.height,a.x)};
goog.fx.AbstractDragDrop.prototype.calculateTargetBox_=function(a){if(1==this.targetList_.length)this.targetBox_=new goog.math.Box(a.top,a.right,a.bottom,a.left);else{var b=this.targetBox_;b.left=Math.min(a.left,b.left);b.right=Math.max(a.right,b.right);b.top=Math.min(a.top,b.top);b.bottom=Math.max(a.bottom,b.bottom)}};
goog.fx.AbstractDragDrop.prototype.maybeCreateDummyTargetForPosition_=function(a,b){this.dummyTarget_||(this.dummyTarget_=new goog.fx.ActiveDropTarget_(this.targetBox_.clone()));var c=this.dummyTarget_.box_;c.top=this.targetBox_.top;c.right=this.targetBox_.right;c.bottom=this.targetBox_.bottom;c.left=this.targetBox_.left;for(var d=0,e;e=this.targetList_[d];d++){var f=e.box_;e.scrollableContainer_&&(e=e.scrollableContainer_.box_,f=new goog.math.Box(Math.max(f.top,e.top),Math.min(f.right,e.right),Math.min(f.bottom,
e.bottom),Math.max(f.left,e.left)));e=null;a>=f.right?e=f.right>c.left?f.right:c.left:a<f.left&&(e=f.left<c.right?f.left:c.right);var g=null;b>=f.bottom?g=f.bottom>c.top?f.bottom:c.top:b<f.top&&(g=f.top<c.bottom?f.top:c.bottom);goog.isNull(e)||goog.isNull(g)||(Math.abs(e-a)>Math.abs(g-b)?g=null:e=null);goog.isNull(e)?goog.isNull(g)||(g<=b?c.top=g:c.bottom=g):e<=a?c.left=e:c.right=e}return(c.right-c.left)*(c.bottom-c.top)>=goog.fx.AbstractDragDrop.DUMMY_TARGET_MIN_SIZE_?this.dummyTarget_:null};
goog.fx.AbstractDragDrop.prototype.getTargetFromPosition_=function(a){for(var b,c=0;b=this.targetList_[c];c++)if(b.box_.contains(a))if(b.scrollableContainer_){if(b.scrollableContainer_.box_.contains(a))return b}else return b;return null};goog.fx.AbstractDragDrop.prototype.isInside=function(a,b,c){return a>=c.left&&a<c.right&&b>=c.top&&b<c.bottom};goog.fx.AbstractDragDrop.prototype.getScrollPos=function(){return goog.dom.getDomHelper(this.dragEl_).getDocumentScroll()};
goog.fx.AbstractDragDrop.prototype.getEventPosition=function(a){var b=this.getScrollPos();return new goog.math.Coordinate(a.clientX+b.x,a.clientY+b.y)};goog.fx.AbstractDragDrop.prototype.disposeInternal=function(){goog.fx.AbstractDragDrop.superClass_.disposeInternal.call(this);this.removeItems()};
goog.fx.DragDropEvent=function(a,b,c,d,e,f,g,h,k,l,m,n){goog.events.Event.call(this,a);this.dragSource=b;this.dragSourceItem=c;this.dropTarget=d;this.dropTargetItem=e;this.dropTargetElement=f;this.clientX=g;this.clientY=h;this.viewportX=k;this.viewportY=l;this.subtarget=m;this.browserEvent=n};goog.inherits(goog.fx.DragDropEvent,goog.events.Event);
goog.fx.DragDropItem=function(a,b){goog.events.EventTarget.call(this);this.element=goog.dom.getElement(a);this.data=b;this.parent_=null;this.eventHandler_=new goog.events.EventHandler(this);this.registerDisposable(this.eventHandler_);this.currentDragElement_=null;if(!this.element)throw Error("Invalid argument");};goog.inherits(goog.fx.DragDropItem,goog.events.EventTarget);goog.fx.DragDropItem.prototype.getData=function(){return this.data};goog.fx.DragDropItem.prototype.getDraggableElement=function(a){return a};
goog.fx.DragDropItem.prototype.getCurrentDragElement=function(){return this.currentDragElement_};goog.fx.DragDropItem.prototype.getDraggableElements=function(){return[this.element]};goog.fx.DragDropItem.prototype.mouseDown_=function(a){if(a.isMouseActionButton()){var b=this.getDraggableElement(a.target);b&&this.maybeStartDrag_(a,b)}};goog.fx.DragDropItem.prototype.setParent=function(a){this.parent_=a};
goog.fx.DragDropItem.prototype.maybeStartDrag_=function(a,b){var c=goog.events.EventType;this.eventHandler_.listen(b,c.MOUSEMOVE,this.mouseMove_,!1).listen(b,c.MOUSEOUT,this.mouseMove_,!1);var d=goog.dom.getOwnerDocument(b);this.eventHandler_.listen(d,c.MOUSEUP,this.mouseUp_,!0);this.currentDragElement_=b;this.startPosition_=new goog.math.Coordinate(a.clientX,a.clientY)};
goog.fx.DragDropItem.prototype.mouseMove_=function(a){var b=this.currentDragElement_;b=a.type==goog.events.EventType.MOUSEOUT&&a.target==b;if(Math.abs(a.clientX-this.startPosition_.x)+Math.abs(a.clientY-this.startPosition_.y)>goog.fx.AbstractDragDrop.initDragDistanceThreshold||b)this.eventHandler_.removeAll(),this.parent_.startDrag(a,this);a.preventDefault()};goog.fx.DragDropItem.prototype.mouseUp_=function(a){this.eventHandler_.removeAll();delete this.startPosition_;this.currentDragElement_=null};
goog.fx.ActiveDropTarget_=function(a,b,c,d){this.box_=a;this.target_=b;this.item_=c;this.element_=d||null;this.scrollableContainer_=null};goog.fx.ScrollableContainer_=function(a){this.containedTargets_=[];this.element_=a;this.savedScrollTop_=this.savedScrollLeft_=0;this.box_=null};goog.fx.DragDrop=function(a,b){goog.fx.AbstractDragDrop.call(this);a=new goog.fx.DragDropItem(a,b);a.setParent(this);this.items_.push(a)};goog.inherits(goog.fx.DragDrop,goog.fx.AbstractDragDrop);goog.fx.DragDropGroup=function(){goog.fx.AbstractDragDrop.call(this)};goog.inherits(goog.fx.DragDropGroup,goog.fx.AbstractDragDrop);goog.fx.DragDropGroup.prototype.addItem=function(a,b){a=new goog.fx.DragDropItem(a,b);this.addDragDropItem(a)};goog.fx.DragDropGroup.prototype.addDragDropItem=function(a){a.setParent(this);this.items_.push(a);this.isInitialized()&&this.initItem(a)};
goog.fx.DragDropGroup.prototype.removeItem=function(a){a=goog.dom.getElement(a);for(var b,c=0;b=this.items_[c];c++)if(b.element==a){this.items_.splice(c,1);this.disposeItem(b);break}};goog.fx.DragDropGroup.prototype.setSelection=function(a){};goog.events.MouseWheelHandler=function(a,b){goog.events.EventTarget.call(this);this.element_=a;a=goog.dom.isElement(this.element_)?this.element_:this.element_?this.element_.body:null;this.isRtl_=!!a&&goog.style.isRightToLeft(a);this.listenKey_=goog.events.listen(this.element_,goog.userAgent.GECKO?"DOMMouseScroll":"mousewheel",this,b)};goog.inherits(goog.events.MouseWheelHandler,goog.events.EventTarget);goog.events.MouseWheelHandler.EventType={MOUSEWHEEL:"mousewheel"};
goog.events.MouseWheelHandler.prototype.setMaxDeltaX=function(a){this.maxDeltaX_=a};goog.events.MouseWheelHandler.prototype.setMaxDeltaY=function(a){this.maxDeltaY_=a};
goog.events.MouseWheelHandler.prototype.handleEvent=function(a){var b=0,c=0,d=a.getBrowserEvent();"mousewheel"==d.type?(a=goog.events.MouseWheelHandler.smartScale_(-d.wheelDelta,40),goog.isDef(d.wheelDeltaX)?(b=goog.events.MouseWheelHandler.smartScale_(-d.wheelDeltaX,40),c=goog.events.MouseWheelHandler.smartScale_(-d.wheelDeltaY,40)):c=a):(a=d.detail,100<a?a=3:-100>a&&(a=-3),goog.isDef(d.axis)&&d.axis===d.HORIZONTAL_AXIS?b=a:c=a);goog.isNumber(this.maxDeltaX_)&&(b=goog.math.clamp(b,-this.maxDeltaX_,
this.maxDeltaX_));goog.isNumber(this.maxDeltaY_)&&(c=goog.math.clamp(c,-this.maxDeltaY_,this.maxDeltaY_));this.isRtl_&&(b=-b);b=new goog.events.MouseWheelEvent(a,d,b,c);this.dispatchEvent(b)};goog.events.MouseWheelHandler.smartScale_=function(a,b){return goog.userAgent.WEBKIT&&(goog.userAgent.MAC||goog.userAgent.LINUX)&&0!=a%b?a:a/b};
goog.events.MouseWheelHandler.prototype.disposeInternal=function(){goog.events.MouseWheelHandler.superClass_.disposeInternal.call(this);goog.events.unlistenByKey(this.listenKey_);this.listenKey_=null};goog.events.MouseWheelEvent=function(a,b,c,d){goog.events.BrowserEvent.call(this,b);this.type=goog.events.MouseWheelHandler.EventType.MOUSEWHEEL;this.detail=a;this.deltaX=c;this.deltaY=d};goog.inherits(goog.events.MouseWheelEvent,goog.events.BrowserEvent);goog.imports={};



var REST={apiURL:null,debug:!1,loglevel:0,antiBrowserCache:!1,cacheHeaders:[],getKeys:function(e){if(e!==Object(e))throw new TypeError("REST.getKeys called on non-object");var t,a=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.push(t);return a},Request:function(){REST.log("Creating new Request"),this.uri=null,this.method="GET",this.username=null,this.password=null,this.acceptHeader="*/*",this.contentTypeHeader=null,this.async=!0,this.queryParameters=[],this.matrixParameters=[],this.formParameters=[],this.forms=[],this.cookies=[],this.headers=[],this.entity=null}},RESTDocumentValidator=(REST.Request.prototype={execute:function(e){for(var t=new XMLHttpRequest,a=this.uri,n=(1==REST.antiBrowserCache&&(t.url=a),0);n<this.matrixParameters.length;n++)a=(a+=";"+REST.Encoding.encodePathParamName(this.matrixParameters[n][0]))+"="+REST.Encoding.encodePathParamValue(this.matrixParameters[n][1]);for(n=0;n<this.queryParameters.length;n++)a=(a=(a+=0==n?"?":"&")+REST.Encoding.encodeQueryParamNameOrValue(this.queryParameters[n][0]))+"="+REST.Encoding.encodeQueryParamNameOrValue(this.queryParameters[n][1]);for(n=0;n<this.cookies.length;n++)document.cookie=encodeURI(this.cookies[n][0])+"="+encodeURI(this.cookies[n][1]);t.open(this.method,a,this.async,this.username,this.password);for(var r=!1,c=!1,n=0;n<this.headers.length;n++)"accept"==this.headers[n][0].toLowerCase()&&(r=this.headers[n][1]),"content-type"==this.headers[n][0].toLowerCase()&&(c=this.headers[n][1]),t.setRequestHeader(REST.Encoding.encodeHeaderName(this.headers[n][0]),REST.Encoding.encodeHeaderValue(this.headers[n][1]));if(r||t.setRequestHeader("Accept",this.acceptHeader),REST.log("Got form params: "+this.formParameters.length),this.entity&&(0<this.formParameters.length||0<this.forms.length))throw"Cannot have both an entity and form parameters";if(0<this.formParameters.length||0<this.forms.length){if(c&&"application/x-www-form-urlencoded"!=c)throw"The ContentType that was set by header value ("+c+") is incompatible with form parameters";if(this.contentTypeHeader&&"application/x-www-form-urlencoded"!=this.contentTypeHeader)throw"The ContentType that was set with setContentType ("+this.contentTypeHeader+") is incompatible with form parameters";t.setRequestHeader("Content-Type",c="application/x-www-form-urlencoded")}else this.entity&&!c&&this.contentTypeHeader&&(c=this.contentTypeHeader,t.setRequestHeader("Content-Type",this.contentTypeHeader));var s,o,d=!1,i=(e&&(t.onreadystatechange=function(){d=!0,REST.log("Got readystatechange"),REST._complete(this,e)}),this.entity);if(this.entity)this.entity instanceof Element?c&&!REST._isXMLMIME(c)||(i=REST.serialiseXML(this.entity)):this.entity instanceof Document?c&&!REST._isXMLMIME(c)||(i=this.entity):!(this.entity instanceof Object)||this.entity instanceof FormData||c&&!REST._isJSONMIME(c)||(i=JSON.stringify(this.entity));else if(0<this.formParameters.length)for(i="",n=0;n<this.formParameters.length;n++)0<n&&(i+="&"),i=(i+=REST.Encoding.encodeFormNameOrValue(this.formParameters[n][0]))+("="+REST.Encoding.encodeFormNameOrValue(this.formParameters[n][1]));else if(0<this.forms.length){i="";for(n=0;n<this.forms.length;n++){0<n&&(i+="&");var p=this.forms[n][1],l=REST.getKeys(p)[0];i=(i+=REST.Encoding.encodeFormNameOrValue(l))+("="+REST.Encoding.encodeFormNameOrValue(p[l]))}}REST.log("Content-Type set to "+c),REST.log("Entity set to "+i),t.send(i),this.async||d||!e||(REST.log("Working around browser readystatechange bug"),REST._complete(t,e)),1==REST.debug&&(REST.lastRequest=t),1==REST.antiBrowserCache&&304!=t.status&&(s={Etag:t.getResponseHeader("Etag"),"Last-Modified":t.getResponseHeader("Last-Modified"),entity:t.responseText},o=REST._generate_cache_signature(a),REST._remove_deprecated_cache_signature(o),REST._addToArray(REST.cacheHeaders,o,s))},setAccepts:function(e){REST.log("setAccepts("+e+")"),this.acceptHeader=e},setCredentials:function(e,t){this.password=t,this.username=e},setEntity:function(e){REST.log("setEntity("+e+")"),this.entity=e},setContentType:function(e){REST.log("setContentType("+e+")"),this.contentTypeHeader=e},setURI:function(e){REST.log("setURI("+e+")"),this.uri=e},setMethod:function(e){REST.log("setMethod("+e+")"),this.method=e},setAsync:function(e){REST.log("setAsync("+e+")"),this.async=e},addCookie:function(e,t){REST.log("addCookie("+e+"="+t+")"),REST._addToArray(this.cookies,e,t)},addQueryParameter:function(e,t){REST.log("addQueryParameter("+e+"="+t+")"),REST._addToArray(this.queryParameters,e,t)},addMatrixParameter:function(e,t){REST.log("addMatrixParameter("+e+"="+t+")"),REST._addToArray(this.matrixParameters,e,t)},addFormParameter:function(e,t){REST.log("addFormParameter("+e+"="+t+")"),REST._addToArray(this.formParameters,e,t)},addForm:function(e,t){REST.log("addForm("+e+"="+t+")"),REST._addToArray(this.forms,e,t)},addHeader:function(e,t){REST.log("addHeader("+e+"="+t+")"),REST._addToArray(this.headers,e,t)}},REST.log=function(e){0<REST.loglevel&&print(e)},REST._addToArray=function(e,t,a){if(a instanceof Array)for(var n=0;n<a.length;n++)e.push([t,a[n]]);else e.push([t,a])},REST._generate_cache_signature=function(e){return e.replace(/\?resteasy_jsapi_anti_cache=\d+/,"")},REST._remove_deprecated_cache_signature=function(e){for(idx in REST.cacheHeaders)e==REST.cacheHeaders[idx][0]&&REST.cacheHeaders.splice(idx,1)},REST._get_cache_signature=function(e){for(idx in REST.cacheHeaders)if(e==REST.cacheHeaders[idx][0])return REST.cacheHeaders[idx];return null},REST._complete=function(e,t){var a;REST.log("Request ready state: "+e.readyState),4==e.readyState&&(REST.log("Request status: "+e.status),REST.log("Request response: "+e.responseText),200<=e.status&&e.status<300&&(a=(e.onreadystatechange=null)!=(a=e.getResponseHeader("Content-Type"))?REST._isXMLMIME(a)?e.responseXML:REST._isJSONMIME(a)?JSON.parse(e.responseText):e.responseText:e.responseText),304==e.status&&(a=REST._get_cache_signature(REST._generate_cache_signature(e.url))[1].entity),REST.log("Calling callback with: "+a),t(e.status,e,a))},REST._isXMLMIME=function(e){return"text/xml"==(e=e.split(";",1)[0])||"application/xml"==e||0==e.indexOf("application/")&&e.lastIndexOf("+xml")==e.length-4},REST._isJSONMIME=function(e){return"application/json"==(e=e.split(";",1)[0])||0==e.indexOf("application/")&&e.lastIndexOf("+json")==e.length-5},REST.Encoding={},REST.Encoding.hash=function(e){for(var t={},a=0;a<e.length;a++)t[e[a]]=1;return t},REST.Encoding.Alpha=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],REST.Encoding.Numeric=["0","1","2","3","4","5","6","7","8","9"],REST.Encoding.AlphaNum=[].concat(REST.Encoding.Alpha,REST.Encoding.Numeric),REST.Encoding.AlphaNumHash=REST.Encoding.hash(REST.Encoding.AlphaNum),REST.Encoding.Unreserved=[].concat(REST.Encoding.AlphaNum,["-",".","_","~"]),REST.Encoding.GenDelims=[":","/","?","#","[","]","@"],REST.Encoding.SubDelims=["!","$","&","'","(",")","*","+",",",";","="],REST.Encoding.Reserved=[].concat(REST.Encoding.GenDelims,REST.Encoding.SubDelims),REST.Encoding.PChar=[].concat(REST.Encoding.Unreserved,REST.Encoding.SubDelims,[":","@"]),REST.Encoding.PathSegmentHash=REST.Encoding.hash(REST.Encoding.PChar),delete REST.Encoding.PathSegmentHash[";"],REST.Encoding.PathParamHash=REST.Encoding.hash(REST.Encoding.PChar),delete REST.Encoding.PathParamHash[";"],delete REST.Encoding.PathParamHash["="],REST.Encoding.PathParamValueHash=REST.Encoding.hash(REST.Encoding.PChar),delete REST.Encoding.PathParamValueHash[";"],REST.Encoding.QueryHash=REST.Encoding.hash([].concat(REST.Encoding.PChar,["/","?"])),delete REST.Encoding.QueryHash["="],delete REST.Encoding.QueryHash["&"],delete REST.Encoding.QueryHash["+"],REST.Encoding.FragmentHash=REST.Encoding.hash([].concat(REST.Encoding.PChar,["/","?"])),REST.Encoding.HTTPSeparators=["(",")","<",">","@",",",";",":","\\",'"',"/","[","]","?","=","{","}"," ","\t"],REST.Encoding.HTTPChar=[],!function(){for(var e=32;e<127;e++)REST.Encoding.HTTPChar.push(String.fromCharCode(e))}(),REST.Encoding.HTTPToken=REST.Encoding.hash(REST.Encoding.HTTPChar),!function(){for(var e=0;e<REST.Encoding.HTTPSeparators.length;e++)delete REST.Encoding.HTTPToken[REST.Encoding.HTTPSeparators[e]]}(),REST.Encoding.encodeFormNameOrValue=function(e){return REST.Encoding.encodeValue(e,REST.Encoding.AlphaNumHash,!0)},REST.Encoding.encodeHeaderName=function(e){return e},REST.Encoding.encodeHeaderValue=function(e){return e},REST.Encoding.encodeQueryParamNameOrValue=function(e){return REST.Encoding.encodeValue(e,REST.Encoding.QueryHash)},REST.Encoding.encodePathSegment=function(e){return REST.Encoding.encodeValue(e,REST.Encoding.PathSegmentHash)},REST.Encoding.encodePathParamName=function(e){return REST.Encoding.encodeValue(e,REST.Encoding.PathParamHash)},REST.Encoding.encodePathParamValue=function(e){return REST.Encoding.encodeValue(e,REST.Encoding.PathParamValueHash)},REST.Encoding.encodeValue=function(e,t,a){if("string"!=typeof e)return REST.log("val is not a string"),e;if(0==e.length)return REST.log("empty string"),e;for(var n="",r=0;r<e.length;r++){var c=e[r];if(1==t[c])REST.log("char allowed: "+c),n=n.concat(c);else if(!a||" "!=c&&"\n"!=c)if((c=e.charCodeAt(r))<55296||57343<c)n=n.concat(REST.Encoding.percentUTF8(c));else{if(56319<c||r+1>=e.length)throw"Invalid UTF-16 value: "+e;var s=e.charCodeAt(++r);if(s<56320||57343<s)throw"Invalid UTF-16 value: "+e;s=(1023&c)<<10|1023&s;s+=65536,n=n.concat(REST.Encoding.percentUTF8(s))}else n+=" "==c?"+":"%0D%0A"}return n},REST.Encoding.percentUTF8=function(e){if(e<128)return REST.Encoding.percentByte(e);if(e<2048)return REST.Encoding.percentByte(192|(1984&e)>>6,128|63&e);if(e<65536)return REST.Encoding.percentByte(224|e>>12&15,128|e>>6&63,128|63&e);if(e<1114112)return REST.Encoding.percentByte(240|e>>18&7,128|e>>12&63,128|e>>6&63,128|63&e);throw"Invalid character for UTF-8: "+e},REST.Encoding.percentByte=function(){for(var e="",t=0;t<arguments.length;t++){var a=arguments[t];e+=0<=a&&a<=15?"%0"+a.toString(16):"%"+a.toString(16)}return e},REST.serialiseXML=function(e){if("undefined"!=typeof XMLSerializer)return(new XMLSerializer).serializeToString(e);if(e.xml)return e.xml;throw"XML.serialize is not supported or can't serialize "+e},REST.apiURL="http://localhost:8080",{validate:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/validate/")+REST.Encoding.encodePathSegment(e.id);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}}),RESTReviewController={setReviewerName:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/marksManager/setReviewerName/")+REST.Encoding.encodePathSegment(e.docId);if(Object.prototype.hasOwnProperty.call(e,"reviewerName")&&t.addFormParameter("reviewerName",e.reviewerName),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}},RESTDocumentManager={reloadDocument:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/doc/reload/")+REST.Encoding.encodePathSegment(e.docId);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}},RESTDitaSupport={getDitaReferenceTargets:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/dita/contentTargets/")+REST.Encoding.encodePathSegment(e.id);if(Object.prototype.hasOwnProperty.call(e,"targetUrl")&&t.addFormParameter("targetUrl",e.targetUrl),Object.prototype.hasOwnProperty.call(e,"baseURL")&&t.addFormParameter("baseURL",e.baseURL),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}},RESTAttributesManager={getAllAttributeValues:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a=(a=(a+="/rest/v26.1.0/attributes/getAllAttributeValues/")+REST.Encoding.encodePathSegment(e.docId)+"/")+REST.Encoding.encodePathSegment(e.nodeId)+"/")+REST.Encoding.encodePathSegment(e.attrName);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}},RESTApplicationAuthentication=(RESTDocumentManager.disposeDocument=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a=(a+="/rest/v26.1.0/doc/dispose/")+REST.Encoding.encodePathSegment(e.docDisposeId)+"/")+REST.Encoding.encodePathSegment(e.save);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("text/plain"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},{getAuthenticationProvider:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL);if(t.setURI(a+="/rest/app-authentication/provider"),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}}),RESTContentCompletionManager=(RESTDocumentManager.autosave=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/doc/autosave/")+REST.Encoding.encodePathSegment(e.id);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},{getProposedElementsForRename:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/cc/rename/")+REST.Encoding.encodePathSegment(e.docId);if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}}),RESTAdminFilesService={uploadFile:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL);if(a+="/admin/v26.1.0/files/upload",e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("text/plain"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("multipart/form-data"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}},RESTStatus=(RESTReviewController.acceptAllChanges=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/marksManager/acceptAllChanges/")+REST.Encoding.encodePathSegment(e.docId);if(Object.prototype.hasOwnProperty.call(e,"distance")&&t.addFormParameter("distance",e.distance),Object.prototype.hasOwnProperty.call(e,"referenceNodeId")&&t.addFormParameter("referenceNodeId",e.referenceNodeId),Object.prototype.hasOwnProperty.call(e,"sentinelType")&&t.addFormParameter("sentinelType",e.sentinelType),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},{getStatusOverview:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL);if(t.setURI(a+="/rest-public/status/overview"),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("text/plain"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}}),RESTAdminPlugins={deletePlugin:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("DELETE"),e.$apiURL||REST.apiURL),a=(a+="/admin/v26.1.0/plugins/")+REST.Encoding.encodePathSegment(e.hash);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts&&t.setAccepts(e.$accepts),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},updatePluginState:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("PUT"),e.$apiURL||REST.apiURL),a=(a+="/admin/v26.1.0/plugins/")+REST.Encoding.encodePathSegment(e.hash);if(e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts&&t.setAccepts(e.$accepts),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}},RESTAdminLicense=(RESTAttributesManager.getAllProfilingAttributeConditions=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a=(a+="/rest/v26.1.0/attributes/getAllProfilingAttributeConditions/")+REST.Encoding.encodePathSegment(e.docId)+"/")+REST.Encoding.encodePathSegment(e.nodeId);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTReviewController.toggleMarkAsDone=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/marksManager/markAsDone/")+REST.Encoding.encodePathSegment(e.docId);if(Object.prototype.hasOwnProperty.call(e,"markerId")&&t.addFormParameter("markerId",e.markerId),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},{isLicensingConfigured:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL);if(t.setURI(a+="/admin/v26.1.0/license/is-configured"),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("text/plain"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}}),RESTFindReplaceSupport={findAllInDocument:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/findreplace/find/")+REST.Encoding.encodePathSegment(e.docId);if(Object.prototype.hasOwnProperty.call(e,"text")&&t.addFormParameter("text",e.text),Object.prototype.hasOwnProperty.call(e,"matchCase")&&t.addFormParameter("matchCase",e.matchCase),Object.prototype.hasOwnProperty.call(e,"wholeWords")&&t.addFormParameter("wholeWords",e.wholeWords),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}},RESTStylesManager={setGroups:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/styles/set/")+REST.Encoding.encodePathSegment(e.docId);if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),Object.prototype.hasOwnProperty.call(e,"cssTitles")&&t.addFormParameter("cssTitles",e.cssTitles),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}},RESTFormControlsSupport={editDatetime:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a=(a+="/rest/v26.1.0/formctrl/editDatetime/")+REST.Encoding.encodePathSegment(e.docId)+"/")+REST.Encoding.encodePathSegment(e.nodeId);if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),Object.prototype.hasOwnProperty.call(e,"toEdit")&&t.addFormParameter("toEdit",e.toEdit),Object.prototype.hasOwnProperty.call(e,"value")&&t.addFormParameter("value",e.value),Object.prototype.hasOwnProperty.call(e,"format")&&t.addFormParameter("format",e.format),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}},RESTAssetLoader=(RESTDocumentManager.saveContent=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL);if(a+="/rest/v26.1.0/doc/save-content",Object.prototype.hasOwnProperty.call(e,"url")&&t.addFormParameter("url",e.url),Object.prototype.hasOwnProperty.call(e,"content")&&t.addFormParameter("content",e.content),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTReviewController.rejectChange=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a=(a+="/rest/v26.1.0/marksManager/rejectChange/")+REST.Encoding.encodePathSegment(e.docId)+"/")+REST.Encoding.encodePathSegment(e.markerId);if(Object.prototype.hasOwnProperty.call(e,"distance")&&t.addFormParameter("distance",e.distance),Object.prototype.hasOwnProperty.call(e,"referenceNodeId")&&t.addFormParameter("referenceNodeId",e.referenceNodeId),Object.prototype.hasOwnProperty.call(e,"sentinelType")&&t.addFormParameter("sentinelType",e.sentinelType),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},{loadRawImage:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL);if(a+="/rest/v26.1.0/load/image-raw",Object.prototype.hasOwnProperty.call(e,"url")&&t.addQueryParameter("url",e.url),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("image/svg+xml,image/jpg,image/jpeg,image/png,image/gif"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}}),AuthorDocumentAsyncValidator={getValidationResults:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/async_validate/get_results/")+REST.Encoding.encodePathSegment(e.id);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}},RESTSpellChecker={getSuggestions:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL);if(a+="/rest/v26.1.0/spellchecker/suggestions",Object.prototype.hasOwnProperty.call(e,"docId")&&t.addFormParameter("docId",e.docId),Object.prototype.hasOwnProperty.call(e,"nodeId")&&t.addFormParameter("nodeId",e.nodeId),Object.prototype.hasOwnProperty.call(e,"distance")&&t.addFormParameter("distance",e.distance),Object.prototype.hasOwnProperty.call(e,"sentinelType")&&t.addFormParameter("sentinelType",e.sentinelType),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}},RESTQuickFix=(RESTAssetLoader.loadFont=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL);if(a+="/rest/v26.1.0/load/font",Object.prototype.hasOwnProperty.call(e,"url")&&t.addQueryParameter("url",e.url),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/octet-stream"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},{applyQuickFix:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/quickfix/")+REST.Encoding.encodePathSegment(e.docId);if(e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/json"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}}),RESTAssetLoaderDev={loadImageCachedHdpi:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a=(a+="/rest/vLatest/load/image-cached/")+REST.Encoding.encodePathSegment(e.sessionCache)+"/")+REST.Encoding.encodePathSegment(e.hdpi);if(Object.prototype.hasOwnProperty.call(e,"url")&&t.addQueryParameter("url",e.url),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("image/svg+xml,image/jpg,image/jpeg,image/png,image/gif"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}},RESTPluginAssetsLoader=(RESTContentCompletionManager.splitElement=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/cc/splitElement/")+REST.Encoding.encodePathSegment(e.docId);if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTFindReplaceSupport.replaceAllInDocument=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/findreplace/replaceAll/")+REST.Encoding.encodePathSegment(e.docId);if(Object.prototype.hasOwnProperty.call(e,"textToFind")&&t.addFormParameter("textToFind",e.textToFind),Object.prototype.hasOwnProperty.call(e,"textToReplace")&&t.addFormParameter("textToReplace",e.textToReplace),Object.prototype.hasOwnProperty.call(e,"matchCase")&&t.addFormParameter("matchCase",e.matchCase),Object.prototype.hasOwnProperty.call(e,"wholeWords")&&t.addFormParameter("wholeWords",e.wholeWords),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},{loadPluginsJS:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL);if(t.setURI(a+="/rest/load/plugins/plugins.js"),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("text/javascript; charset=utf-8"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}}),RESTAdminFrameworks=(RESTDocumentManager.retrieveDocAndReferencesAsBase64Zip=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/doc/retrieveB64XMLsZip/")+REST.Encoding.encodePathSegment(e.id);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/octet-stream"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTFormControlsSupport.editValue=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a=(a+="/rest/v26.1.0/formctrl/editValue/")+REST.Encoding.encodePathSegment(e.docId)+"/")+REST.Encoding.encodePathSegment(e.nodeId);if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),Object.prototype.hasOwnProperty.call(e,"toEdit")&&t.addFormParameter("toEdit",e.toEdit),Object.prototype.hasOwnProperty.call(e,"value")&&t.addFormParameter("value",e.value),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},{deleteFramework:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("DELETE"),e.$apiURL||REST.apiURL),a=(a+="/admin/v26.1.0/frameworks/")+REST.Encoding.encodePathSegment(e.id);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts&&t.setAccepts(e.$accepts),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}}),RESTContentCompletionConfiguration=(RESTContentCompletionManager.insertElement=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/cc/insertElement/")+REST.Encoding.encodePathSegment(e.docId);if(Object.prototype.hasOwnProperty.call(e,"distance")&&t.addFormParameter("distance",e.distance),Object.prototype.hasOwnProperty.call(e,"referenceNodeId")&&t.addFormParameter("referenceNodeId",e.referenceNodeId),Object.prototype.hasOwnProperty.call(e,"sentinelType")&&t.addFormParameter("sentinelType",e.sentinelType),Object.prototype.hasOwnProperty.call(e,"displayName")&&t.addFormParameter("displayName",e.displayName),Object.prototype.hasOwnProperty.call(e,"type")&&t.addFormParameter("type",e.type),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTReviewController.acceptChanges=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a=(a+="/rest/v26.1.0/marksManager/acceptChanges/")+REST.Encoding.encodePathSegment(e.docId)+"/")+REST.Encoding.encodePathSegment(e.markersIds);if(Object.prototype.hasOwnProperty.call(e,"distance")&&t.addFormParameter("distance",e.distance),Object.prototype.hasOwnProperty.call(e,"referenceNodeId")&&t.addFormParameter("referenceNodeId",e.referenceNodeId),Object.prototype.hasOwnProperty.call(e,"sentinelType")&&t.addFormParameter("sentinelType",e.sentinelType),Object.prototype.hasOwnProperty.call(e,"markersIds")&&t.addFormParameter("markersIds",e.markersIds),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTFindReplaceSupport.replaceInDocument=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/findreplace/replace/")+REST.Encoding.encodePathSegment(e.docId);if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),Object.prototype.hasOwnProperty.call(e,"textToReplace")&&t.addFormParameter("textToReplace",e.textToReplace),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAdminFrameworks.getFrameworks=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL);if(t.setURI(a+="/admin/v26.1.0/frameworks"),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAdminFrameworks.addFrameworks=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL);if(a+="/admin/v26.1.0/frameworks",e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTApplicationAuthentication.getAuthenticatedUserInfo=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL);if(t.setURI(a+="/rest/app-authentication/user-info"),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAssetLoaderDev.loadImageCached=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a+="/rest/vLatest/load/image-cached/")+REST.Encoding.encodePathSegment(e.sessionCache);if(Object.prototype.hasOwnProperty.call(e,"url")&&t.addQueryParameter("url",e.url),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("image/svg+xml,image/jpg,image/jpeg,image/png,image/gif"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAdminFilesService.downloadLogFile=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL);if(t.setURI(a+="/admin/v26.1.0/files/downloadLogFile"),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/octet-stream"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},{getRenderingConfiguration:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/cc_config/rendering/")+REST.Encoding.encodePathSegment(e.frameworkId);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}}),RESTFileBrowser=(RESTPluginAssetsLoader.loadPluginsCSS=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL);if(t.setURI(a+="/rest/load/plugins/plugins.css"),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("text/css; charset=utf-8"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTStylesManager.getAvailableGroups=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/styles/get/")+REST.Encoding.encodePathSegment(e.frameworkId);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},{retrieveFiles:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL);if(a+="/rest/v26.1.0/browse/list",Object.prototype.hasOwnProperty.call(e,"url")&&t.addFormParameter("url",e.url),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}}),RESTAdminOptions=(RESTContentCompletionManager.getProposedElementsForInsert=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/cc/insert/")+REST.Encoding.encodePathSegment(e.docId);if(Object.prototype.hasOwnProperty.call(e,"distance")&&t.addFormParameter("distance",e.distance),Object.prototype.hasOwnProperty.call(e,"referenceNodeId")&&t.addFormParameter("referenceNodeId",e.referenceNodeId),Object.prototype.hasOwnProperty.call(e,"sentinelType")&&t.addFormParameter("sentinelType",e.sentinelType),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAdminPlugins.restoreBuiltinPlugins=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL);if(t.setURI(a+="/admin/v26.1.0/plugins/restore"),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts&&t.setAccepts(e.$accepts),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTReviewController.editComment=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a=(a+="/rest/v26.1.0/marksManager/editComment/")+REST.Encoding.encodePathSegment(e.docId)+"/")+REST.Encoding.encodePathSegment(e.markerId);if(e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/json"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAssetLoader.loadFrameworkResource=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a=(a+="/rest/v26.1.0/load/framework/")+REST.Encoding.encodePathSegment(e.frameworkId)+"/")+REST.Encoding.encodePathSegment(e.path);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTContentCompletionManager.renameElement=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/cc/renameElement/")+REST.Encoding.encodePathSegment(e.docId);if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),Object.prototype.hasOwnProperty.call(e,"displayName")&&t.addFormParameter("displayName",e.displayName),Object.prototype.hasOwnProperty.call(e,"type")&&t.addFormParameter("type",e.type),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAttributesManager.getAllAttributes=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a=(a+="/rest/v26.1.0/attributes/getAllAttributes/")+REST.Encoding.encodePathSegment(e.docId)+"/")+REST.Encoding.encodePathSegment(e.nodeId);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},{setShowAdminLinkOnDashboard:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("PUT"),e.$apiURL||REST.apiURL);if(a+="/admin/v26.1.0/options/adminlink",e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/json"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},getShowAdminLinkOnDashboard:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL);if(t.setURI(a+="/admin/v26.1.0/options/adminlink"),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}}),RESTActionsManager=(RESTAssetLoaderDev.loadResource=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL);if(a+="/rest/vLatest/load/resource",Object.prototype.hasOwnProperty.call(e,"type")&&t.addQueryParameter("type",e.type),Object.prototype.hasOwnProperty.call(e,"resourceURL")&&t.addQueryParameter("resourceURL",e.resourceURL),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentManager.retrieveDocument=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL);if(a+="/rest/v26.1.0/doc/load",Object.prototype.hasOwnProperty.call(e,"userName")&&t.addQueryParameter("userName",e.userName),e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/json"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTContentCompletionManager.getProposedElementsForSurround=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/cc/surround/")+REST.Encoding.encodePathSegment(e.docId);if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAssetLoaderDev.loadFrameworkJs=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a+="/rest/vLatest/load/framework/")+REST.Encoding.encodePathSegment(e.frameworkId);if(t.setURI(a+="/framework.js"),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("text/javascript; charset=utf-8"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentManager.createModelInRoom=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL);if(a+="/rest/v26.1.0/doc/rooms/join",e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/json"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAdminPlugins.deletePluginFolder=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("DELETE"),e.$apiURL||REST.apiURL),a=(a+="/admin/v26.1.0/plugins/delete-plugin-folder/")+REST.Encoding.encodePathSegment(e.errPluginKey);if(e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts&&t.setAccepts(e.$accepts),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentManager.downloadUtf8XMLContent=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a=(a+="/rest/v26.1.0/doc/downloadUTF8XML/")+REST.Encoding.encodePathSegment(e.id)+"/")+REST.Encoding.encodePathSegment(e.fileName);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/octet-stream"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},{retrieveTemplates:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL);if(t.setURI(a+="/rest/v26.1.0/actions/templates"),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}}),RESTFileService=(RESTDocumentManager.setTextState=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/doc/setTextState/")+REST.Encoding.encodePathSegment(e.id);if(e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/json"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAssetLoader.loadResource=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL);if(a+="/rest/v26.1.0/load/resource",Object.prototype.hasOwnProperty.call(e,"type")&&t.addQueryParameter("type",e.type),Object.prototype.hasOwnProperty.call(e,"resourceURL")&&t.addQueryParameter("resourceURL",e.resourceURL),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAssetLoader.loadTemplate=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/load/template/")+REST.Encoding.encodePathSegment(e.type);if(Object.prototype.hasOwnProperty.call(e,"url")&&t.addQueryParameter("url",e.url),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("text/plain"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTContentCompletionManager.contentCompletion=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/cc/contentCompletion/")+REST.Encoding.encodePathSegment(e.docId);if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),Object.prototype.hasOwnProperty.call(e,"displayName")&&t.addFormParameter("displayName",e.displayName),Object.prototype.hasOwnProperty.call(e,"type")&&t.addFormParameter("type",e.type),Object.prototype.hasOwnProperty.call(e,"valid")&&t.addFormParameter("valid",e.valid),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentManager.saveAs=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/doc/saveas/")+REST.Encoding.encodePathSegment(e.id);if(Object.prototype.hasOwnProperty.call(e,"location")&&t.addFormParameter("location",e.location),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAdminPlugins.getPlugins=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL);if(t.setURI(a+="/admin/v26.1.0/plugins"),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAdminPlugins.addPlugin=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL);if(a+="/admin/v26.1.0/plugins",e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDitaSupport.getContexts=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL);if(a+="/rest/v26.1.0/dita/project",Object.prototype.hasOwnProperty.call(e,"url")&&t.addFormParameter("url",e.url),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAdminFrameworks.undeleteFramework=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("DELETE"),e.$apiURL||REST.apiURL),a=(a+="/admin/v26.1.0/frameworks/deletion/")+REST.Encoding.encodePathSegment(e.id);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts&&t.setAccepts(e.$accepts),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTApplicationAuthentication.getAuthRedirect=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL);if(a+="/rest/app-authentication/auth-redirect",Object.prototype.hasOwnProperty.call(e,"provider")&&t.addQueryParameter("provider",e.provider),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentManager.getTextState=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/doc/getTextState/")+REST.Encoding.encodePathSegment(e.id);if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},{uploadFileToUrl:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL);if(a+="/rest-files/v26.1.0/upload-to-url",e.$entity&&t.setEntity(e.$entity),Object.prototype.hasOwnProperty.call(e,"upload_destination")&&t.addQueryParameter("upload_destination",e.upload_destination),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("text/plain"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("multipart/form-data"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}}),RESTAdminPing=(RESTAssetLoaderDev.loadFont=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL);if(a+="/rest/vLatest/load/font",Object.prototype.hasOwnProperty.call(e,"url")&&t.addQueryParameter("url",e.url),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/octet-stream"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},AuthorDocumentAsyncValidator.schedule=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/async_validate/schedule/")+REST.Encoding.encodePathSegment(e.id);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTActionsManager.getExtensionActionsConfiguration=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/actions/actionsConfig/")+REST.Encoding.encodePathSegment(e.docId);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTContentCompletionManager.surroundWithElement=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/cc/surroundWithElement/")+REST.Encoding.encodePathSegment(e.docId);if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),Object.prototype.hasOwnProperty.call(e,"displayName")&&t.addFormParameter("displayName",e.displayName),Object.prototype.hasOwnProperty.call(e,"type")&&t.addFormParameter("type",e.type),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentManager.retrieveBase64Content=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/doc/retrieveB64XML/")+REST.Encoding.encodePathSegment(e.id);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/octet-stream"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTApplicationAuthentication.logout=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("PUT"),e.$apiURL||REST.apiURL);if(t.setURI(a+="/rest/app-authentication/logout"),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("text/plain"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentManager.keepAlive=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a=(a+="/rest/v26.1.0/doc/keepAlive/")+REST.Encoding.encodePathSegment(e.docId)+"/")+REST.Encoding.encodePathSegment(e.timeout);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAdminPlugins.undeletePlugin=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("DELETE"),e.$apiURL||REST.apiURL),a=(a+="/admin/v26.1.0/plugins/deletion/")+REST.Encoding.encodePathSegment(e.hash);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts&&t.setAccepts(e.$accepts),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAttributesManager.setAttribute=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a=(a+="/rest/v26.1.0/attributes/setAttribute/")+REST.Encoding.encodePathSegment(e.docId)+"/")+REST.Encoding.encodePathSegment(e.nodeId);if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),Object.prototype.hasOwnProperty.call(e,"attributeName")&&t.addFormParameter("attributeName",e.attributeName),Object.prototype.hasOwnProperty.call(e,"attributeValue")&&t.addFormParameter("attributeValue",e.attributeValue),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTFormControlsSupport.editDate=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a=(a+="/rest/v26.1.0/formctrl/editDate/")+REST.Encoding.encodePathSegment(e.docId)+"/")+REST.Encoding.encodePathSegment(e.nodeId);if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),Object.prototype.hasOwnProperty.call(e,"toEdit")&&t.addFormParameter("toEdit",e.toEdit),Object.prototype.hasOwnProperty.call(e,"value")&&t.addFormParameter("value",e.value),Object.prototype.hasOwnProperty.call(e,"format")&&t.addFormParameter("format",e.format),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTContentCompletionManager.getAllElements=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/cc/all/")+REST.Encoding.encodePathSegment(e.docId);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},{ping:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL);if(t.setURI(a+="/admin/v26.1.0/ping"),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("text/plain"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}}),RESTDitamapSupport=(RESTAttributesManager.setAttributes=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/attributes/setAttributes/")+REST.Encoding.encodePathSegment(e.docId);if(e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/json"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTSpellChecker.suggestionReplace=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL);if(a+="/rest/v26.1.0/spellchecker/suggestions/replace",e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/json"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTContentCompletionManager.getProposedElementsForEnter=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/cc/enter/")+REST.Encoding.encodePathSegment(e.docId);if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentManager.retrieveDITAMapDocument=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL);if(a+="/rest/v26.1.0/doc/load/map",Object.prototype.hasOwnProperty.call(e,"userName")&&t.addQueryParameter("userName",e.userName),e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/json"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAdminFrameworks.deleteFrameworks=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("DELETE"),e.$apiURL||REST.apiURL);if(a+="/admin/v26.1.0/frameworks/delete-frameworks",e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts&&t.setAccepts(e.$accepts),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTReviewController.acceptChangesFromSelection=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/marksManager/acceptSelectedChanges/")+REST.Encoding.encodePathSegment(e.docId);if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAdminPlugins.deleteMultiplePlugins=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("DELETE"),e.$apiURL||REST.apiURL);if(a+="/admin/v26.1.0/plugins/delete-plugins",e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts&&t.setAccepts(e.$accepts),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAssetLoader.loadImageCachedHdpi=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a=(a+="/rest/v26.1.0/load/image-cached/")+REST.Encoding.encodePathSegment(e.sessionCache)+"/")+REST.Encoding.encodePathSegment(e.hdpi);if(Object.prototype.hasOwnProperty.call(e,"url")&&t.addQueryParameter("url",e.url),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("image/svg+xml,image/jpg,image/jpeg,image/png,image/gif"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTReviewController.rejectChanges=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a=(a+="/rest/v26.1.0/marksManager/rejectChanges/")+REST.Encoding.encodePathSegment(e.docId)+"/")+REST.Encoding.encodePathSegment(e.markersIds);if(Object.prototype.hasOwnProperty.call(e,"distance")&&t.addFormParameter("distance",e.distance),Object.prototype.hasOwnProperty.call(e,"referenceNodeId")&&t.addFormParameter("referenceNodeId",e.referenceNodeId),Object.prototype.hasOwnProperty.call(e,"sentinelType")&&t.addFormParameter("sentinelType",e.sentinelType),Object.prototype.hasOwnProperty.call(e,"markersIds")&&t.addFormParameter("markersIds",e.markersIds),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAssetLoaderDev.loadTemplate=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a+="/rest/vLatest/load/template/")+REST.Encoding.encodePathSegment(e.type);if(Object.prototype.hasOwnProperty.call(e,"url")&&t.addQueryParameter("url",e.url),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("text/plain"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentManager.getDitamapNodesInfo=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/doc/map/")+REST.Encoding.encodePathSegment(e.id)+"/resolvedTitlesInfo";if(e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/json"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAssetLoader.loadImageHdpi=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/load/image/")+REST.Encoding.encodePathSegment(e.hdpi);if(Object.prototype.hasOwnProperty.call(e,"url")&&t.addQueryParameter("url",e.url),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("image/svg+xml,image/jpg,image/jpeg,image/png,image/gif"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentManager.save=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/doc/save/")+REST.Encoding.encodePathSegment(e.id);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentManager.downloadModifiedReference=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/doc/downloadModifiedReference/")+REST.Encoding.encodePathSegment(e.docId);if(Object.prototype.hasOwnProperty.call(e,"fileUrl")&&t.addQueryParameter("fileUrl",e.fileUrl),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/octet-stream"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAssetLoader.loadFrameworkJs=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/load/framework/")+REST.Encoding.encodePathSegment(e.frameworkId);if(t.setURI(a+="/framework.js"),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("text/javascript; charset=utf-8"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAdminFrameworks.deleteFrameworkFolder=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("DELETE"),e.$apiURL||REST.apiURL);if(a+="/admin/v26.1.0/frameworks/folders/failed",e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts&&t.setAccepts(e.$accepts),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentManager.createRoomFromDocument=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL);if(a+="/rest/v26.1.0/doc/rooms",Object.prototype.hasOwnProperty.call(e,"docId")&&t.addFormParameter("docId",e.docId),Object.prototype.hasOwnProperty.call(e,"roomType")&&t.addFormParameter("roomType",e.roomType),Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAssetLoaderDev.loadFrameworkResource=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a=(a+="/rest/vLatest/load/framework/")+REST.Encoding.encodePathSegment(e.frameworkId)+"/")+REST.Encoding.encodePathSegment(e.path);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTReviewController.removeComment=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a=(a+="/rest/v26.1.0/marksManager/removeComment/")+REST.Encoding.encodePathSegment(e.docId)+"/")+REST.Encoding.encodePathSegment(e.markerId);if(e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/json"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentManager.downloadXMLContent=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a=(a+="/rest/v26.1.0/doc/downloadXML/")+REST.Encoding.encodePathSegment(e.id)+"/")+REST.Encoding.encodePathSegment(e.fileName);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/octet-stream"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},{getDitamapFromProjectRepresentation:function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL);if(a+="/rest/ditamap/presentation/byDitaProject",Object.prototype.hasOwnProperty.call(e,"ditaProjectUrl")&&t.addFormParameter("ditaProjectUrl",e.ditaProjectUrl),Object.prototype.hasOwnProperty.call(e,"ditaProjectContextId")&&t.addFormParameter("ditaProjectContextId",e.ditaProjectContextId),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)}}),RESTDocumentControllers=(RESTAssetLoader.loadImage=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL);if(a+="/rest/v26.1.0/load/image",Object.prototype.hasOwnProperty.call(e,"url")&&t.addQueryParameter("url",e.url),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("image/svg+xml,image/jpg,image/jpeg,image/png,image/gif"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDitamapSupport.getDitamapCompactRepresentation=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL);if(a+="/rest/ditamap/compact",e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/json"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTActionsManager.invokeAction=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a=(a+="/rest/v26.1.0/actions/invokeAction/")+REST.Encoding.encodePathSegment(e.docId)+"/")+REST.Encoding.encodePathSegment(e.actionId);if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),Object.prototype.hasOwnProperty.call(e,"expandedAskVariables")&&t.addFormParameter("expandedAskVariables",e.expandedAskVariables),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTFormControlsSupport.editTime=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a=(a+="/rest/v26.1.0/formctrl/editTime/")+REST.Encoding.encodePathSegment(e.docId)+"/")+REST.Encoding.encodePathSegment(e.nodeId);if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),Object.prototype.hasOwnProperty.call(e,"toEdit")&&t.addFormParameter("toEdit",e.toEdit),Object.prototype.hasOwnProperty.call(e,"value")&&t.addFormParameter("value",e.value),Object.prototype.hasOwnProperty.call(e,"format")&&t.addFormParameter("format",e.format),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDitamapSupport.getDitamapRepresentation=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL);if(a+="/rest/ditamap/presentation",Object.prototype.hasOwnProperty.call(e,"url")&&t.addFormParameter("url",e.url),Object.prototype.hasOwnProperty.call(e,"ditaval")&&t.addFormParameter("ditaval",e.ditaval),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTReviewController.addComment=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/marksManager/addComment/")+REST.Encoding.encodePathSegment(e.docId);if(Object.prototype.hasOwnProperty.call(e,"comment")&&t.addFormParameter("comment",e.comment),Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),Object.prototype.hasOwnProperty.call(e,"sync")&&t.addFormParameter("sync",e.sync),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTQuickFix.applyQuickFixWithUserEntry=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/quickfix/userEntry/")+REST.Encoding.encodePathSegment(e.docId);if(e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/json"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDitamapSupport.getDitamapNodesTitles=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL);if(a+="/rest/ditamap/titles",Object.prototype.hasOwnProperty.call(e,"map")&&t.addQueryParameter("map",e.map),Object.prototype.hasOwnProperty.call(e,"ditaval")&&t.addQueryParameter("ditaval",e.ditaval),Object.prototype.hasOwnProperty.call(e,"showExcludedContent")&&t.addQueryParameter("showExcludedContent",e.showExcludedContent),e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/json"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTReviewController.reply=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/marksManager/reply/")+REST.Encoding.encodePathSegment(e.docId);if(Object.prototype.hasOwnProperty.call(e,"replyComment")&&t.addFormParameter("replyComment",e.replyComment),Object.prototype.hasOwnProperty.call(e,"parentId")&&t.addFormParameter("parentId",e.parentId),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAssetLoader.loadFloatingToolbarJson=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/load/float-toolbar-json/")+REST.Encoding.encodePathSegment(e.documentID);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentManager.downloadFile=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL);if(a+="/rest/v26.1.0/doc/downloadFile",Object.prototype.hasOwnProperty.call(e,"fileUrl")&&t.addQueryParameter("fileUrl",e.fileUrl),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/octet-stream"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAttributesManager.removeAttribute=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a=(a+="/rest/v26.1.0/attributes/removeAttribute/")+REST.Encoding.encodePathSegment(e.docId)+"/")+REST.Encoding.encodePathSegment(e.nodeId);if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),Object.prototype.hasOwnProperty.call(e,"attributeName")&&t.addFormParameter("attributeName",e.attributeName),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAssetLoader.loadCSS=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/load/css/")+REST.Encoding.encodePathSegment(e.documentID);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("text/css"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTReviewController.acceptChange=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a=(a+="/rest/v26.1.0/marksManager/acceptChange/")+REST.Encoding.encodePathSegment(e.docId)+"/")+REST.Encoding.encodePathSegment(e.markerId);if(Object.prototype.hasOwnProperty.call(e,"distance")&&t.addFormParameter("distance",e.distance),Object.prototype.hasOwnProperty.call(e,"referenceNodeId")&&t.addFormParameter("referenceNodeId",e.referenceNodeId),Object.prototype.hasOwnProperty.call(e,"sentinelType")&&t.addFormParameter("sentinelType",e.sentinelType),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAssetLoaderDev.loadImageHdpi=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a+="/rest/vLatest/load/image/")+REST.Encoding.encodePathSegment(e.hdpi);if(Object.prototype.hasOwnProperty.call(e,"url")&&t.addQueryParameter("url",e.url),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("image/svg+xml,image/jpg,image/jpeg,image/png,image/gif"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAssetLoaderDev.loadRawImage=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL);if(a+="/rest/vLatest/load/image-raw",Object.prototype.hasOwnProperty.call(e,"url")&&t.addQueryParameter("url",e.url),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("image/svg+xml,image/jpg,image/jpeg,image/png,image/gif"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTReviewController.toggleChangeTracking=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/marksManager/toggleChangeTracking/")+REST.Encoding.encodePathSegment(e.docId);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTReviewController.rejectChangesFromSelection=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/marksManager/rejectSelectedChanges/")+REST.Encoding.encodePathSegment(e.docId);if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAdminLicense.getLicenseInfo=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL);if(t.setURI(a+="/admin/v26.1.0/license"),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAdminLicense.setLicenseInfo=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("PUT"),e.$apiURL||REST.apiURL);if(a+="/admin/v26.1.0/license",e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("text/plain"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/json"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAdminLicense.restoreDefault=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("DELETE"),e.$apiURL||REST.apiURL);if(t.setURI(a+="/admin/v26.1.0/license"),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTActionsManager.invokeOperation=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/actions/invokeOperation/")+REST.Encoding.encodePathSegment(e.docId);if(e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/json"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTReviewController.rejectAllChanges=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/marksManager/rejectAllChanges/")+REST.Encoding.encodePathSegment(e.docId);if(Object.prototype.hasOwnProperty.call(e,"distance")&&t.addFormParameter("distance",e.distance),Object.prototype.hasOwnProperty.call(e,"referenceNodeId")&&t.addFormParameter("referenceNodeId",e.referenceNodeId),Object.prototype.hasOwnProperty.call(e,"sentinelType")&&t.addFormParameter("sentinelType",e.sentinelType),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTContentCompletionConfiguration.getElementInfo=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a=(a+="/rest/v26.1.0/cc_config/eleminfo/")+REST.Encoding.encodePathSegment(e.serverDeploymentId)+"/")+REST.Encoding.encodePathSegment(e.frameworkId);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAssetLoaderDev.loadCSS=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a+="/rest/vLatest/load/css/")+REST.Encoding.encodePathSegment(e.documentID);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("text/css"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTFileBrowser.saveNewFile=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL);if(a+="/rest/v26.1.0/browse/newfile",e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/json"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAssetLoaderDev.loadFloatingToolbarJson=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a+="/rest/vLatest/load/float-toolbar-json/")+REST.Encoding.encodePathSegment(e.documentID);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAssetLoaderDev.loadImage=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL);if(a+="/rest/vLatest/load/image",Object.prototype.hasOwnProperty.call(e,"url")&&t.addQueryParameter("url",e.url),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("image/svg+xml,image/jpg,image/jpeg,image/png,image/gif"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentManager.retrieveDocumentForPreview=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/doc/load/preview/")+REST.Encoding.encodePathSegment(e.name);if(Object.prototype.hasOwnProperty.call(e,"userName")&&t.addQueryParameter("userName",e.userName),e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/json"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDitamapSupport.getDitamapFromProjectNodesTitles=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL);if(a+="/rest/ditamap/titles/byDitaProject",Object.prototype.hasOwnProperty.call(e,"ditaProjectUrl")&&t.addQueryParameter("ditaProjectUrl",e.ditaProjectUrl),Object.prototype.hasOwnProperty.call(e,"ditaProjectContextId")&&t.addQueryParameter("ditaProjectContextId",e.ditaProjectContextId),Object.prototype.hasOwnProperty.call(e,"showExcludedContent")&&t.addQueryParameter("showExcludedContent",e.showExcludedContent),e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/json"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAssetLoader.loadImageCached=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/load/image-cached/")+REST.Encoding.encodePathSegment(e.sessionCache);if(Object.prototype.hasOwnProperty.call(e,"url")&&t.addQueryParameter("url",e.url),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("image/svg+xml,image/jpg,image/jpeg,image/png,image/gif"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTStatus.getReportInfo=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL);if(t.setURI(a+="/rest-public/status"),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTSpellChecker.fullSpellCheck=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/spellchecker/")+REST.Encoding.encodePathSegment(e.docId);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTSpellChecker.partialSpellCheck=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/spellchecker/")+REST.Encoding.encodePathSegment(e.docId);if(e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/json"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTAdminFrameworks.restoreBuiltinframeworks=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL);if(t.setURI(a+="/admin/v26.1.0/frameworks/restore"),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts&&t.setAccepts(e.$accepts),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},{documentController:{}});RESTDocumentControllers.documentController.setAttribute=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a=(a+="/rest/v26.1.0/edit/")+REST.Encoding.encodePathSegment(e.id)+"/setAttribute/")+REST.Encoding.encodePathSegment(e.nodeId);if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),Object.prototype.hasOwnProperty.call(e,"attributeName")&&t.addFormParameter("attributeName",e.attributeName),Object.prototype.hasOwnProperty.call(e,"attributeValue")&&t.addFormParameter("attributeValue",e.attributeValue),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentControllers.documentController.setTagsDisplayMode=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/edit/")+REST.Encoding.encodePathSegment(e.id)+"/setTagsDisplayMode";if(Object.prototype.hasOwnProperty.call(e,"mode")&&t.addFormParameter("mode",e.mode),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentControllers.documentController.cut=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/edit/")+REST.Encoding.encodePathSegment(e.id)+"/cut";if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentControllers.documentController.redo=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/edit/")+REST.Encoding.encodePathSegment(e.id)+"/redo";if(Object.prototype.hasOwnProperty.call(e,"distance")&&t.addFormParameter("distance",e.distance),Object.prototype.hasOwnProperty.call(e,"referenceNodeId")&&t.addFormParameter("referenceNodeId",e.referenceNodeId),Object.prototype.hasOwnProperty.call(e,"sentinelType")&&t.addFormParameter("sentinelType",e.sentinelType),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentControllers.documentController.insertPastedText=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/edit/")+REST.Encoding.encodePathSegment(e.id)+"/insertPastedText";if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),Object.prototype.hasOwnProperty.call(e,"text")&&t.addFormParameter("text",e.text),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentControllers.documentController.getUpdates=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a=(a+="/rest/v26.1.0/edit/")+REST.Encoding.encodePathSegment(e.id)+"/updates/")+REST.Encoding.encodePathSegment(e.nodeId);if(t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentControllers.documentController.addCopiedClipboardObject=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/edit/")+REST.Encoding.encodePathSegment(e.id)+"/addCopiedClipboardObject";if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("text/plain;charset=UTF-8"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentControllers.documentController.insertXml=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/edit/")+REST.Encoding.encodePathSegment(e.id)+"/insertXml";if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),Object.prototype.hasOwnProperty.call(e,"xml")&&t.addFormParameter("xml",e.xml),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentControllers.documentController.pasteFragment=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/edit/")+REST.Encoding.encodePathSegment(e.id)+"/pasteFragment";if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentControllers.documentController.removeText=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/edit/")+REST.Encoding.encodePathSegment(e.id)+"/delete";if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),Object.prototype.hasOwnProperty.call(e,"backspace")&&t.addFormParameter("backspace",e.backspace),Object.prototype.hasOwnProperty.call(e,"wordLevel")&&t.addFormParameter("wordLevel",e.wordLevel),Object.prototype.hasOwnProperty.call(e,"count")&&t.addFormParameter("count",e.count),Object.prototype.hasOwnProperty.call(e,"tagsDisplayMode")&&t.addFormParameter("tagsDisplayMode",e.tagsDisplayMode),Object.prototype.hasOwnProperty.call(e,"sync")&&t.addFormParameter("sync",e.sync),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentControllers.documentController.previewInsertion=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/edit/")+REST.Encoding.encodePathSegment(e.id)+"/previewInsertion";if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentControllers.documentController.getNodeIdByAnchor=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/edit/")+REST.Encoding.encodePathSegment(e.id)+"/anchor";if(Object.prototype.hasOwnProperty.call(e,"anchor")&&t.addQueryParameter("anchor",e.anchor),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentControllers.documentController.undo=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/edit/")+REST.Encoding.encodePathSegment(e.id)+"/undo";if(Object.prototype.hasOwnProperty.call(e,"distance")&&t.addFormParameter("distance",e.distance),Object.prototype.hasOwnProperty.call(e,"referenceNodeId")&&t.addFormParameter("referenceNodeId",e.referenceNodeId),Object.prototype.hasOwnProperty.call(e,"sentinelType")&&t.addFormParameter("sentinelType",e.sentinelType),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentControllers.documentController.insertText=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/edit/")+REST.Encoding.encodePathSegment(e.id)+"/insertText";if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),Object.prototype.hasOwnProperty.call(e,"text")&&t.addFormParameter("text",e.text),Object.prototype.hasOwnProperty.call(e,"sync")&&t.addFormParameter("sync",e.sync),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentControllers.documentController.broadcastSelection=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/edit/")+REST.Encoding.encodePathSegment(e.id)+"/broadcastSelection";if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentControllers.documentController.openReferenceAtSelection=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("GET"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/edit/")+REST.Encoding.encodePathSegment(e.id)+"/openReference";if(Object.prototype.hasOwnProperty.call(e,"redirectQueryParams")&&t.addQueryParameter("redirectQueryParams",e.redirectQueryParams),Object.prototype.hasOwnProperty.call(e,"selection")&&t.addQueryParameter("selection",e.selection),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("text/plain"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentControllers.documentController.getConcurrentUpdatesAndBroadcastSelection=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/edit/")+REST.Encoding.encodePathSegment(e.id)+"/sync";if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentControllers.documentController.dnd=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/edit/")+REST.Encoding.encodePathSegment(e.id)+"/dnd";if(e.$entity&&t.setEntity(e.$entity),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/json"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)},RESTDocumentControllers.documentController.insertHtml=function(e){var n,e=e||{},t=new REST.Request,a=(t.setMethod("POST"),e.$apiURL||REST.apiURL),a=(a+="/rest/v26.1.0/edit/")+REST.Encoding.encodePathSegment(e.id)+"/insertHtml";if(Object.prototype.hasOwnProperty.call(e,"startReferenceNodeId")&&t.addFormParameter("startReferenceNodeId",e.startReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"startSentinelType")&&t.addFormParameter("startSentinelType",e.startSentinelType),Object.prototype.hasOwnProperty.call(e,"startDistance")&&t.addFormParameter("startDistance",e.startDistance),Object.prototype.hasOwnProperty.call(e,"endReferenceNodeId")&&t.addFormParameter("endReferenceNodeId",e.endReferenceNodeId),Object.prototype.hasOwnProperty.call(e,"endSentinelType")&&t.addFormParameter("endSentinelType",e.endSentinelType),Object.prototype.hasOwnProperty.call(e,"endDistance")&&t.addFormParameter("endDistance",e.endDistance),Object.prototype.hasOwnProperty.call(e,"isBackwards")&&t.addFormParameter("isBackwards",e.isBackwards),Object.prototype.hasOwnProperty.call(e,"selectedIntervals")&&t.addFormParameter("selectedIntervals",e.selectedIntervals),Object.prototype.hasOwnProperty.call(e,"isAColumnSelected")&&t.addFormParameter("isAColumnSelected",e.isAColumnSelected),Object.prototype.hasOwnProperty.call(e,"html")&&t.addFormParameter("html",e.html),Object.prototype.hasOwnProperty.call(e,"asLink")&&t.addFormParameter("asLink",e.asLink),t.setURI(a),e.$username&&e.$password&&t.setCredentials(e.$username,e.$password),e.$accepts?t.setAccepts(e.$accepts):t.setAccepts("application/json"),1==REST.antiBrowserCache&&(t.addQueryParameter("resteasy_jsapi_anti_cache",(new Date).getTime()),null!=(a=REST._get_cache_signature(REST._generate_cache_signature(a))))&&(t.addHeader("If-Modified-Since",a[1]["Last-Modified"]),t.addHeader("If-None-Match",a[1].Etag)),e.$contentType?t.setContentType(e.$contentType):t.setContentType("application/x-www-form-urlencoded"),!e.$callback)return t.setAsync(!1),t.execute(function(e,t,a){n=a}),n;t.execute(e.$callback)};



function namespace(name) {
  var cur = window;
  for (var part of name.split('.')) {
    if (!cur.hasOwnProperty(part)) {
      cur[part] = {};
    }
    cur = cur[part];
  }
}
goog.provide("msgs"); //This file is generated by a gulp task.
window.msgs={ERROR_:{en_US:"Error",de_DE:"Fehler",fr_FR:"Erreur",ja_JP:"",nl_NL:"Fout",zh_CN:""},SERVER_CANNOT_BE_REACHED_RELOAD_:{en_US:"Server cannot be reached. Please reload the page.",de_DE:"Server kann nicht erreicht werden. Bitte Seite neu laden.",fr_FR:"Le serveur ne peut pas tre atteint. Veuillez recharger la page.",ja_JP:"",nl_NL:"Server is niet bereikbaar. Laad de pagina opnieuw.",zh_CN:""},FILTERED_CONTENT_HIDDEN_:{en_US:"Showing only content that is not excluded by the current DITA context filter.",de_DE:"Es wird nur Inhalt angezeigt, der nicht vom aktuellen DITA-Kontextfilter ausgeschlossen ist.",fr_FR:"Afficher uniquement le contenu qui n'est pas exclu par le filtre contextuel DITA actuel.",ja_JP:"DITA",nl_NL:"Alleen inhoud weergeven die niet is uitgesloten door het huidige DITA-contextfilter.",zh_CN:"DITA"},POPULAR_:{en_US:"Popular",de_DE:"Beliebt",fr_FR:"Populaire",ja_JP:"",nl_NL:"Populair",zh_CN:""},All_:{en_US:"All",de_DE:"Alle",fr_FR:"Tout",ja_JP:"",nl_NL:"Alles",zh_CN:""},POPULAR_TEMPLATES_BADGE_:{en_US:"Popular templates",de_DE:"Beliebte Vorlagen",fr_FR:"Modles populaires",ja_JP:"",nl_NL:"Populaire sjablonen",zh_CN:""},ERROR_LOADING_TEMPLATES_:{en_US:"Error: cannot load templates.",de_DE:"Fehler: Konnte Templates nicht laden.",fr_FR:"Erreur : Impossible de charger les modles.",ja_JP:"",nl_NL:"Fout: Kan templates niet laden.",zh_CN:""},FILE_CREATED_:{en_US:"File created.",de_DE:"Datei erstellt.",fr_FR:"Fichier cr.",ja_JP:"",nl_NL:"Bestand gemaakt.",zh_CN:""},NEW_FILE_CREATION_FAIL_:{en_US:"Failed to create new file.",de_DE:"Erstellung der neuen Datei fehlgeschlagen.",fr_FR:"chec de la cration du nouveau fichier.",ja_JP:"",nl_NL:"Maken van nieuw bestand is mislukt.",zh_CN:""},UNTITLED_LOWERCASE_:{en_US:"untitled",de_DE:"unbenannt",fr_FR:"sans titre",ja_JP:"",nl_NL:"naamloos",zh_CN:""},ERROR_WHILE_SAVING_IMAGE_:{en_US:"An error occurred while saving the image at the chosen location.",de_DE:"Ein Fehler ist beim Speichern des Bildes an der gewhlten Position aufgetreten.",fr_FR:"Une erreur s'est produite lors de l'enregistrement de l'image  l'emplacement choisi.",ja_JP:"",nl_NL:"Er heeft zich een fout voorgedaan tijdens het opslaan van de afbeelding op de gekozen locatie.",zh_CN:""},ERROR_RETRIEVING_FILES_:{en_US:"Error retrieving files",de_DE:"Fehler beim Abfragen der Dateien",fr_FR:"Erreur lors de la rcupration des fichiers",ja_JP:"",nl_NL:"Fout bij ophalen van bestanden",zh_CN:""},FILE_NAME_:{en_US:"File name",de_DE:"Dateiname",fr_FR:"Nom du fichier",ja_JP:"",nl_NL:"Bestandsnaam",zh_CN:""},Select_template_:{en_US:"Select template",de_DE:"Vorlage auswhlen",fr_FR:"Slectionner un modle",ja_JP:"",nl_NL:"Sjabloon selecteren",zh_CN:""},Choose_file_name_:{en_US:"Choose file name",de_DE:"Dateinamen auswhlen",fr_FR:"Choisir le nom du fichier",ja_JP:"",nl_NL:"Bestandsnaam kiezen",zh_CN:""},Create_file_:{en_US:"Create File",de_DE:"Datei erstellen",fr_FR:"Crer le fichier",ja_JP:"",nl_NL:"Bestand maken",zh_CN:""},CREATE_:{en_US:"Create",de_DE:"Erstellen",fr_FR:"Crer",ja_JP:"",nl_NL:"Maak",zh_CN:""},CANCEL_:{en_US:"Cancel",de_DE:"Abbrechen",fr_FR:"Annuler",ja_JP:"",nl_NL:"Annuleer",zh_CN:""},Choose_file_name_error_:{en_US:"You must choose a file name",de_DE:"Sie mssen einen Dateinamen whlen",fr_FR:"Vous devez choisir un nom de fichier",ja_JP:"",nl_NL:"U moet een bestandsnaam kiezen",zh_CN:""},Select_template_error_:{en_US:"You must select a template",de_DE:"Sie mssen eine Vorlage auswhlen",fr_FR:"Vous devez slectionner un modle",ja_JP:"",nl_NL:"U moet een sjabloon selecteren",zh_CN:""},CONFIRM_OVERWRITE_:{en_US:"Confirm Overwrite",de_DE:"berschreiben besttigen",fr_FR:"Confirmer l'crasement",ja_JP:"",nl_NL:"Overschrijven bevestigen",zh_CN:""},CONFIRM_OVERWRITE_MESSAGE_:{en_US:"{$FILE_NAME} already exists.{$LINE_BREAK}Do you want to replace it?",de_DE:"{$FILE_NAME} existiert bereits.{$LINE_BREAK}Mchten Sie diese ersetzen?",fr_FR:"{$FILE_NAME} existe dj.{$LINE_BREAK}Voulez-vous le remplacer ?",ja_JP:"{$FILE_NAME}{$LINE_BREAK}",nl_NL:"{$FILE_NAME} bestaat al.{$LINE_BREAK}Wilt u dit exemplaar vervangen?",zh_CN:"{$FILE_NAME}{$LINE_BREAK}"},ROOT_:{en_US:"Root",de_DE:"Wurzel",fr_FR:"Racine",ja_JP:"",nl_NL:"Wortel",zh_CN:""},DRAG_MASK_MSG_:{en_US:"Drop here to upload files",de_DE:"Hierher ziehen, um Dateien hochzuladen",fr_FR:"Dposez ici pour tlverser des fichiers",ja_JP:"",nl_NL:"Hier neerzetten om bestanden te uploaden",zh_CN:""},UPLOADED_FILE_TOO_LARGE_:{en_US:"The file you are trying to upload is too large. You can contact the server administrator to increase the maximum allowed upload size.",de_DE:"Die Datei, die Sie hochladen mchten, ist zu gro. Sie knnen den Server-Administrator kontaktieren, um die Dateigrenbeschrnkung fr den Upload anzuheben.",fr_FR:"Le fichier que vous essayez de charger est trop volumineux. Vous pouvez contacter l'administrateur du serveur pour augmenter la taille de tlchargement maximale autorise.",ja_JP:"",nl_NL:"Het bestand dat u probeert te uploaden is te groot. Neem contact op met de serverbeheerder om de maximaal toegestane uploadgrootte te wijzigen.",zh_CN:""},UPLOAD_FILE_:{en_US:"Upload file",de_DE:"Datei hochladen",fr_FR:"Tlverser un fichier",ja_JP:"",nl_NL:"Bestand uploaden",zh_CN:""},NEW_:{en_US:"New",de_DE:"Neu",fr_FR:"Nouveau",ja_JP:"",nl_NL:"Nieuw",zh_CN:""},FILE_UPLOAD_FAILED_:{en_US:"File upload failed.",de_DE:"Upload der Datei fehlgeschlagen.",fr_FR:"chec lors du tlversement du fichier.",ja_JP:"",nl_NL:"Uploaden van bestand is mislukt.",zh_CN:""},CANNOT_GO_ABOVE_ROOT_:{en_US:"You cannot go above the root of the file repository.",de_DE:"Sie knnen das Verzeichnis nicht ffnen, das dem Wurzelverzeichnis des Repositories bergeordnet ist.",fr_FR:"Vous ne pouvez pas aller au-dessus de la racine du rpertoire de fichiers.",ja_JP:"",nl_NL:"U kunt niet hoger dan de root van de bestandenopslagplaats gaan.",zh_CN:""},CHOOSE_FILE_:{en_US:"Choose file",de_DE:"Datei whlen",fr_FR:"Choisir un fichier",ja_JP:"",nl_NL:"Bestand kiezen",zh_CN:""},SAVE_FILE_:{en_US:"Save file",de_DE:"Datei speichern",fr_FR:"Enregistrer un fichier",ja_JP:"",nl_NL:"Bestand opslaan",zh_CN:""},CHOOSE_:{en_US:"Choose",de_DE:"Whlen Sie",fr_FR:"Choisir",ja_JP:"",nl_NL:"Kies",zh_CN:""},SAVE_:{en_US:"Save",de_DE:"Speichern",fr_FR:"Enregistrer",ja_JP:"",nl_NL:"Bewaar",zh_CN:""},NO_FILE_SELECTED_:{en_US:"No file was selected.",de_DE:"Keine Datei ausgewhlt.",fr_FR:"Aucun fichier slectionn.",ja_JP:"",nl_NL:"Er is geen bestand geselecteerd.",zh_CN:""},CHOSEN_FILE_DOES_NOT_EXIST_:{en_US:"The chosen file does not exist.",de_DE:"Die gewhlte Datei existiert nicht.",fr_FR:"Le fichier choisi n'existe pas.",ja_JP:"",nl_NL:"Het gekozen bestand bestaat niet.",zh_CN:""},BROWSE_:{en_US:"Browse",de_DE:"Durchsuchen",fr_FR:"Parcourir",ja_JP:"",nl_NL:"Blader",zh_CN:""},SHOW_MORE_:{en_US:"Show more",de_DE:"Mehr anzeigen",fr_FR:"Afficher plus",ja_JP:"",nl_NL:"Meer weergeven",zh_CN:""},ANONYMOUS_:{en_US:"Anonymous",de_DE:"Anonym",fr_FR:"Anonyme",ja_JP:"",nl_NL:"Anoniem",zh_CN:""},INSERTED_BY_AUTHOR_:{en_US:"Inserted by {0}",de_DE:"Eingefgt von {0}",fr_FR:"Ajout par {0}",ja_JP:"{0}",nl_NL:"Ingevoegd door {0}",zh_CN:"{0}"},SURROUNDED_BY_AUTHOR_:{en_US:"Surrounded by {0}",de_DE:"Umgeben von {0}",fr_FR:"Encadr par {0}",ja_JP:"{0}",nl_NL:"Tussen {0} geplaatst",zh_CN:"{0}"},SPLIT_BY_AUTHOR_:{en_US:"Split by {0}",de_DE:"Geteilt von {0}",fr_FR:"Divis par {0}",ja_JP:"{0}",nl_NL:"Gesplitst door {0}",zh_CN:"{0}"},DELETED_BY_AUTHOR_:{en_US:"Deleted by {0}",de_DE:"Gelscht von {0}",fr_FR:"Supprim par {0}",ja_JP:"{0}",nl_NL:"Verwijderd door {0}",zh_CN:"{0}"},REMOVE_:{en_US:"Remove",de_DE:"Entfernen",fr_FR:"Supprimer",ja_JP:"",nl_NL:"Verwijder",zh_CN:""},REMOVE_ALL_:{en_US:"Remove all",de_DE:"Alle entfernen",fr_FR:"Tout supprimer",ja_JP:"",nl_NL:"Verwijder alles",zh_CN:""},TRACK_CHANGES_FINAL_TOOLTIP_:{en_US:"The document will be displayed as if all changes were accepted",de_DE:"Das Dokument wird angezeigt, als ob alle nderungen akzeptiert wurden",fr_FR:"Le document sera affich comme si toutes les modifications taient acceptes",ja_JP:"",nl_NL:"Het document wordt weergegeven alsof alle wijzigingen zijn geaccepteerd",zh_CN:""},TRACK_CHANGES_ORIGINAL_TOOLTIP_:{en_US:"The document will be displayed as if all changes were rejected",de_DE:"Das Dokument wird angezeigt, als ob alle nderungen zurckgewiesen wurden",fr_FR:"Le document sera affich comme si toutes les modifications taient refuses",ja_JP:"",nl_NL:"Het document wordt weergegeven alsof alle wijzigingen zijn geweigerd",zh_CN:""},VIEW_ALL_CHANGES_DESCRIPTION_:{en_US:"All changes (including comments) are highlighted in the document",de_DE:"Alle nderungen (einschlielich Kommentare) sind im Dokument hervorgehoben",fr_FR:"Toutes les modifications (y compris les commentaires) sont en surbrillance dans le document",ja_JP:"",nl_NL:"Alle wijzigingen (inclusief opmerkingen) worden gemarkeerd in het document",zh_CN:""},TRACK_CHANGES_FINAL_MODE_:{en_US:"View Final",de_DE:"Finales Dokument anzeigen",fr_FR:"Afficher le document final",ja_JP:"",nl_NL:"Toon definitief",zh_CN:""},TRACK_CHANGES_ORIGINAL_MODE_:{en_US:"View Original",de_DE:"Orignal anzeigen",fr_FR:"Afficher le document original",ja_JP:"",nl_NL:"Toon origineel",zh_CN:""},TRACK_CHANGES_FINAL_WITH_CHANGES_MODE_:{en_US:"View All Changes/Comments",de_DE:"Alle nderungen/Kommentare ansehen",fr_FR:"Afficher tous les commentaires/toutes les modifications",ja_JP:"/",nl_NL:"Toon alle wijzigingen/opmerkingen",zh_CN:"/"},TRACK_CHANGES_:{en_US:"Track Changes",de_DE:"nderungen verfolgen",fr_FR:"Suivi des modifications",ja_JP:"",nl_NL:"Houd wijzigingen bij",zh_CN:""},EDIT_UNDO_:{en_US:"Undo",de_DE:"Rckgngig",fr_FR:"Annuler",ja_JP:"",nl_NL:"Herstel",zh_CN:""},EDIT_REDO_:{en_US:"Redo",de_DE:"Wiederherstellen",fr_FR:"Rtablir",ja_JP:"",nl_NL:"Opnieuw",zh_CN:""},ELEMENT_CANNOT_BE_INSERTED_:{en_US:"This element is not valid if inserted at cursor position. However, if chosen, alternative insert solutions will be proposed.",de_DE:"Dieses Element ist ungltig, falls es an der Einfgemarke eingesetzt wird. Falls es jedoch gewhlt wird, werden alternative Einfgelsungen vorgeschlagen.",fr_FR:"Cet lment n'est pas valide s'il est insr  la position du curseur. Cependant, le cas chant, des solutions alternatives d'insertion seront proposes.",ja_JP:"",nl_NL:"Dit element is ongeldig als het op de cursorpositie wordt ingevoegd. Indien geselecteerd, zullen echter voorstellen voor alternatieve invoegoplossingen worden gegeven.",zh_CN:""},SEARCH_:{en_US:"Search",de_DE:"Suche",fr_FR:"Rechercher",ja_JP:"",nl_NL:"Zoek",zh_CN:""},LOADING_:{en_US:"Loading",de_DE:"Lade",fr_FR:"Chargement",ja_JP:"",nl_NL:"Laden",zh_CN:""},NO_ELEMENTS_AVAILABLE_:{en_US:"No elements available",de_DE:"Keine Elemente verfgbar",fr_FR:"Aucun lment disponible",ja_JP:"",nl_NL:"Geen elementen beschikbaar",zh_CN:""},READ_ONLY_CONTENT_:{en_US:"Read-only content",de_DE:"Schreibgeschtzter Inhalt",fr_FR:"Contenu en lecture seule",ja_JP:" ",nl_NL:"Alleen-lezen content",zh_CN:""},USE_EDIT_REFERENCE_ACTION_:{en_US:"Use \"{0}\" action from the contextual menu.",de_DE:"Benutze \"{0}\" Aktion aus dem Kontextmen.",fr_FR:"Utiliser l''action \"{0}\" du menu contextuel.",ja_JP:"\"{0}\" ",nl_NL:"Gebruik \"{0}\" actie uit het contextuele menu.",zh_CN:"{0}"},EDIT_REFERENCE_:{en_US:"Edit Reference",de_DE:"Referenz bearbeiten",fr_FR:"diter la rfrence",ja_JP:"",nl_NL:"Wijzig referentie",zh_CN:""},SURROUND_WITH_:{en_US:"Surround with",de_DE:"Umgeben mit",fr_FR:"Encadrer par",ja_JP:"",nl_NL:"Plaats eromheen",zh_CN:""},SURROUND_WITH_ELEMENT_:{en_US:"Surround with Element",de_DE:"Umschliee mit Element",fr_FR:"Encadrer avec un lment",ja_JP:"",nl_NL:"Omgeven met element",zh_CN:""},INSERT_ELEMENT_:{en_US:"Insert Element",de_DE:"Element einfgen",fr_FR:"Insrer un lment",ja_JP:"",nl_NL:"Voeg element in",zh_CN:""},RENAME_ELEMENT_:{en_US:"Rename Element",de_DE:"Element umbenennen",fr_FR:"Renommer l'lment",ja_JP:"",nl_NL:"Hernoem element",zh_CN:""},APPEND_CHILD_:{en_US:"Append child",de_DE:"Kind anhngen",fr_FR:"Ajouter un enfant",ja_JP:"",nl_NL:"Voeg kind-element toe",zh_CN:""},INSERT_AFTER_:{en_US:"Insert After",de_DE:"Danach einfgen",fr_FR:"Insrer aprs",ja_JP:"",nl_NL:"Voeg in Na",zh_CN:""},INSERT_BEFORE_:{en_US:"Insert Before",de_DE:"Davor einfgen",fr_FR:"Insrer avant",ja_JP:"",nl_NL:"Voeg in Voor",zh_CN:""},EDIT_COPY_:{en_US:"Copy",de_DE:"Kopieren",fr_FR:"Copier",ja_JP:"",nl_NL:"Kopieer",zh_CN:""},EDIT_CUT_:{en_US:"Cut",de_DE:"Ausschneiden",fr_FR:"Couper",ja_JP:"",nl_NL:"Knip",zh_CN:""},DOWNLOAD_:{en_US:"Download",fr_FR:"Tlcharger",ja_JP:"",nl_NL:"Downloaden",zh_CN:""},DOWNLOAD_TOOLTIP_:{en_US:"Download the current document",de_DE:"Aktuelles Dokument herunterladen",fr_FR:"Tlcharger le document actuel",ja_JP:"",nl_NL:"Het huidige document downloaden",zh_CN:""},Share_session_title_:{en_US:"Share Editing Session",de_DE:"Teile Bearbeitungssitzung",fr_FR:"Partager la session d'dition",ja_JP:"",nl_NL:"Bewerkingssessie delen",zh_CN:""},SHARE_SESSION_DETAILS_:{en_US:"Share the following link with others to invite them to join your current editing session:",de_DE:"Teilen Sie den folgenden Link mit anderen, um sie zum Beitritt zu Ihrer aktuellen Bearbeitungssitzung einzuladen:",fr_FR:"Partagez le lien suivant avec d'autres personnes afin de les inviter  rejoindre votre session d'dition actuelle :",ja_JP:":",nl_NL:"Deel de volgende koppeling met anderen als u hen wilt uitnodigen voor de huidige bewerkingssessie:",zh_CN:":"},SHARE_:{en_US:"Share",de_DE:"Teilen",fr_FR:"Partager",ja_JP:"",nl_NL:"Deel",zh_CN:""},BEFORE_SHARE_SESSION_DETAILS_FIRST_:{en_US:"You can share your editing session with others.",de_DE:"Sie knnen ihre Bearbeitungssitzung mit anderen teilen.",fr_FR:"Vous pouvez partager votre session d'dition avec d'autres personnes.",ja_JP:"",nl_NL:"U kunt uw bewerkingssessie delen met anderen.",zh_CN:"."},BEFORE_SHARE_SESSION_DETAILS_SECOND_:{en_US:"The share link will be available after you choose to share the editing session.",de_DE:"Der geteilte Link wird verfgbar sein, wenn Sie das Teilen der Bearbeitungssitzung gewhlt haben.",fr_FR:"Le lien de partage sera disponible une fois que vous aurez choisi de partager la session d'dition.",ja_JP:"",nl_NL:"De deelkoppeling is beschikbaar nadat u ervoor hebt gekozen de bewerkingssessie te delen.",zh_CN:"."},SHARE_SESSION_NOTES_:{en_US:"Important notes about the shared editing session:",de_DE:"Wichtige Hinweise zu Ihrer geteilten Bearbeitungssitzung:",fr_FR:"Remarques importantes sur la session d'dition partage :",ja_JP:":",nl_NL:"Belangrijke opmerkingen over de gedeelde bewerkingssessie:",zh_CN:":"},SHARE_SESSION_SAVE_NOTE_:{en_US:"You are the only user who can save the document.",de_DE:"Sie sind der einzige Benutzer, der das Dokument speichern kann.",fr_FR:"Vous tes le seul utilisateur qui peut sauvegarder le document.",ja_JP:"",nl_NL:"U bent de enige gebruiker die het document kan opslaan.",zh_CN:"."},SHARE_SESSION_CLOSE_NOTE_:{en_US:"Others cannot edit this document if you close or refresh the browser tab.",de_DE:"Andere knnen dieses Dokument nicht bearbeiten, wenn Sie die Registerkarte Ihres Browsers neu laden oder schlieen.",fr_FR:"Les autres ne peuvent pas modifier ce document si vous fermez ou rafrachissez l'onglet du navigateur.",ja_JP:" ",nl_NL:"Anderen kunnen dit document niet bewerken als u het browsertabblad sluit of vernieuwt.",zh_CN:"."},Copy_link_:{en_US:"Copy link",de_DE:"Link kopieren",fr_FR:"Copier le lien",ja_JP:"",nl_NL:"Koppeling kopiren",zh_CN:""},SHARE_SESSION_DOC_LINK_:{en_US:"Learn more about {$P_START}Share Editing Session{$P_END}.",de_DE:"Mehr erfahren ber {$P_START}Geteilte Bearbeitungssitzung{$P_END}.",fr_FR:"En savoir plus sur la {$P_START}Session d'dition partage{$P_END}.",ja_JP:"{$ P_START}{$ P_END}",nl_NL:"Meer informatie over {$P_START}Bewerkingssessie delen{$P_END}.",zh_CN:" {$P_START}{$P_END}."},Copied_:{en_US:"Copied",de_DE:"Kopiert",fr_FR:"Copi",ja_JP:"",nl_NL:"Gekopieerd",zh_CN:""},Share_session_description_short_:{en_US:"Share the editing session",de_DE:"Bearbeitungssitzung teilen",fr_FR:"Partager la session d'dition",ja_JP:"",nl_NL:"De bewerkingssessie delen",zh_CN:""},Share_session_description_ro_cause_:{en_US:"(disabled because document is read-only)",de_DE:"(deaktiviert, weil das Dokument schreibgeschtzt ist)",fr_FR:"(dsactiv parce que le document est en lecture seule)",ja_JP:"()",nl_NL:"(uitgeschakeld omdat het document alleen-lezen is)",zh_CN:"()"},Share_session_description_already_in_:{en_US:"(disabled because document was opened inside an existing session)",de_DE:"(deaktiviert, weil das Dokument innerhalb einer existierenden Sitzung geffnet wurde)",fr_FR:"(dsactiv parce que le document a t ouvert au cours d'une session existante)",ja_JP:"()",nl_NL:"(uitgeschakeld omdat het document werd geopend binnen een bestaande sessie)",zh_CN:"()"},Share_session_description_long_:{en_US:"Share the editing session with other authors, allowing them to simultaneously edit the document",de_DE:"Teilen Sie die Bearbeitungssitzung mit anderen Autoren, um ihnen die simultane Bearbeitung des Dokuments zu gestatten.",fr_FR:"Partager la session d'dition avec d'autres auteurs, ce qui leur permet d'diter simultanment le document",ja_JP:"",nl_NL:"Deel de bewerkingssessie met andere auteurs, zodat zij het document tegelijkertijd kunnen bewerken",zh_CN:""},EDITOR_PRINT_CAPABILITY_:{en_US:"In order to fully benefit of the editor's print capability you have to make a selection in the document.",de_DE:"Um besser von den Druckfhigkeiten zu profitieren, mssen Sie einen Teil des Dokuments auswhlen.",fr_FR:"Afin de bnficier pleinement de la capacit d'impression de l'diteur vous devez faire une slection dans le document.",ja_JP:"",nl_NL:"Als u optimaal gebruik wilt maken van de afdrukmogelijkheid van de editor, moet u een selectie maken in het document.",zh_CN:""},TRYING_TO_RECONNECT_:{en_US:"Trying to reconnect to server",de_DE:"Versuche erneut zum Server zu verbinden",fr_FR:"Tentative de reconnexion au serveur",ja_JP:"",nl_NL:"Proberen om opnieuw verbinding te maken met de server",zh_CN:""},WAITING_FOR_INTERNET_:{en_US:"Waiting for internet connection",de_DE:"Warte auf Internetverbindung",fr_FR:"En attente d'une connexion internet",ja_JP:"",nl_NL:"Wachten op een internetverbinding",zh_CN:""},INVALID_EMAIL_ADDRESS_:{en_US:"Invalid email address",de_DE:"Ungltige E-Mail Adresse",fr_FR:"Adresse e-mail invalide",ja_JP:" ",nl_NL:"Ongeldig e-mailadres",zh_CN:""},CONTINUE_:{en_US:"Continue",de_DE:"Weiter",fr_FR:"Continuer",ja_JP:"",nl_NL:"Ga door",zh_CN:""},RECOMMEND_INCLUDE_EMAIL_ADDRESS_:{en_US:"It is recommended that you include an email address so that our support team can contact you to help resolve your problem.",de_DE:"Es wird empfohlen, dass Sie eine E-Mail-Adresse eingeben, sodass sich der Support an Sie wenden kann, um Ihnen beim Lsen des Problems zu helfen.",fr_FR:"Il est recommand d'inclure une adresse e-mail afin que l'quipe de support puisse vous contacter pour vous aider  rsoudre votre problme.",ja_JP:" ",nl_NL:"Het is raadzaam om een e-mailadres toe te voegen, zodat ons ondersteuningsteam contact met u kan opnemen om u te helpen het probleem op te lossen.",zh_CN:""},EMAIL_:{en_US:"Email",de_DE:"E-Mail",fr_FR:"E-mail",ja_JP:"",nl_NL:"E-mail",zh_CN:""},NAME_:{en_US:"Name",fr_FR:"Nom",ja_JP:"",nl_NL:"Naam",zh_CN:""},USER_AGENT_:{en_US:"User agent",de_DE:"User-Agent",fr_FR:"Agent utilisateur",ja_JP:"",nl_NL:"Useragent",zh_CN:""},DOCUMENT_TYPE_:{en_US:"Document type",de_DE:"Dokumenttypen",fr_FR:"Type de document",ja_JP:"",nl_NL:"Documenttype",zh_CN:""},CONCURRENT_EDITING_:{en_US:"Concurrent editing",de_DE:"Gleichzeitige Bearbeitung",fr_FR:"dition simultane",ja_JP:"",nl_NL:"Gelijktijdige bewerking",zh_CN:""},EDIT_REFERENCES_INPLACE_:{en_US:"In-place references editing",de_DE:"Vor-Ort Referenzen bearbeiten",fr_FR:"dition de rfrences sur place",ja_JP:"",nl_NL:"Interne bewerking van verwijzingen",zh_CN:""},PROTOCOL_:{en_US:"protocol",de_DE:"Protokoll",fr_FR:"protocole",ja_JP:"",zh_CN:""},EDITION_:{en_US:"Edition",de_DE:"Ausgabe",fr_FR:"dition",ja_JP:"",nl_NL:"Editie",zh_CN:""},VERSION_:{en_US:"Version",ja_JP:"",nl_NL:"Versie",zh_CN:""},BUILD_ID_:{en_US:"Build ID",de_DE:"Build-ID",fr_FR:"ID du Build",ja_JP:"ID",nl_NL:"Build-ID",zh_CN:"ID"},JVM_MEMORY_:{en_US:"JVM Memory",de_DE:"JVM-Memory",fr_FR:"Mmoire de la JVM",ja_JP:"JVM",nl_NL:"JVM-geheugen",zh_CN:"JVM"},APPLICATION_DETAILS_:{en_US:"Application details",de_DE:"Anwendungsdetails",fr_FR:"Dtails de l'application",ja_JP:"",nl_NL:"Programmadetails",zh_CN:""},COMPANY_:{en_US:"Company",de_DE:"Firma",fr_FR:"Entreprise",ja_JP:"",nl_NL:"Bedrijf",zh_CN:""},USER_CONTACT_FOR_FURTHER_DETAILS_:{en_US:"In case you want to be contacted for further details.",de_DE:"Fr den Fall, dass Sie fr weitere Details kontaktiert werden mchten.",fr_FR:"Au cas o vous souhaiteriez tre contact pour plus de dtails.",ja_JP:"",nl_NL:"Voor als u wilt dat er voor aanvullende details contact met u wordt opgenomen.",zh_CN:""},CONTACT_DETAILS_:{en_US:"Contact details",de_DE:"Kontaktdetails",fr_FR:"Dtails de contact",ja_JP:"",nl_NL:"Contactdetails",zh_CN:""},INCLUDE_SYSTEM_PROPERTIES_DETAILS_:{en_US:"Include system properties details",de_DE:"Detaillierte Systemeigenschaften einfgen",fr_FR:"Inclure le dtail des proprits systmes",ja_JP:"",nl_NL:"Met gedetailleerde systeemeigenschappen",zh_CN:""},INCLUDE_PLUGIN_DETAILS_:{en_US:"Include plugins details",de_DE:"Plugin-Details einschlieen",fr_FR:"Inclure les dtails des plugins",ja_JP:"",nl_NL:"Plug-in-details opnemen",zh_CN:""},PLUGINS_:{en_US:"Plugins",ja_JP:"",nl_NL:"Plug-ins",zh_CN:""},INCLUDE_FRAMEWORKS_DETAILS_:{en_US:"Include frameworks details",de_DE:"Framework-Details hinzufgen",fr_FR:"Inclure les dtails des frameworks",ja_JP:"",nl_NL:"Frameworks-details opnemen",zh_CN:""},FRAMEWORKS_:{en_US:"Frameworks",ja_JP:"",zh_CN:""},REPORT_PROBLEM_FROM_DROPDOWN_:{en_US:"Report problem...",de_DE:"Problem berichten...",fr_FR:"Signaler un problme...",ja_JP:"...",nl_NL:"Probleem melden...",zh_CN:"..."},REPORT_WILL_BE_SENT_TO_URL_:{en_US:"This report will be sent to the following URL:",de_DE:"Dieser Problembericht wird an die folgende URL gesendet:",fr_FR:"Ce rapport sera envoy  l'URL suivante :",ja_JP:"URL",nl_NL:"Dit rapport wordt verzonden naar de volgende URL:",zh_CN:"URL"},PROBLEM_DESCRIPTION_:{en_US:"Problem description",de_DE:"Problembeschreibung",fr_FR:"Description du problme",ja_JP:"",nl_NL:"Probleemomschrijving",zh_CN:""},ADDITIONAL_INFO_:{en_US:"Additional info",de_DE:"Zustzliche Info",fr_FR:"Info additionnelle",ja_JP:"",nl_NL:"Aanvullende info",zh_CN:""},GENERAL_INFO_:{en_US:"General info",de_DE:"Allgemeine Informationen",fr_FR:"Informations gnrales",ja_JP:"",nl_NL:"Algemene info",zh_CN:""},SYSTEM_PROPERTIES_:{en_US:"System properties",de_DE:"Systemeigenschaften",fr_FR:"Proprits du systme",ja_JP:" ",nl_NL:"Systeemeigenschappen",zh_CN:""},REPORT_PROBLEM_:{en_US:"Report problem",de_DE:"Problem berichten",fr_FR:"Signaler un problme",ja_JP:"",nl_NL:"Meld probleem",zh_CN:""},SUBMIT_:{en_US:"Submit",de_DE:"Absenden",fr_FR:"Envoyer",ja_JP:"",nl_NL:"Verstuur",zh_CN:""},PROBLEM_HAS_OCCURRED_:{en_US:"A problem has occurred",de_DE:"Ein Problem ist aufgetreten",fr_FR:"Un problme est survenu",ja_JP:"",nl_NL:"Er heeft zich een probleem voorgedaan",zh_CN:""},LOST_SESSION_:{en_US:"Editing session was lost, please reload.",de_DE:"Bearbeitungssitzung verloren, bitte neuladen.",fr_FR:"La session d'dition a t perdue, veuillez recharger.",ja_JP:"",nl_NL:"Bewerkingssessie is verloren gegaan, laad opnieuw.",zh_CN:""},INSTRUCTION_BACKUP_DOWNLOAD_:{en_US:"You can download a backup of the unsaved files to preserve changes or reload the page and lose all changes from the expired session.",de_DE:"Um die nderungen der abgelaufenen Sitzung zu erhalten, knnen Sie eine Sicherung der ungespeicherten Dateien herunterladen, oder die Seite neuladen und dabei alle nderungen verlieren.",fr_FR:"Vous pouvez tlcharger une copie des fichiers non sauvegards afin de conserver les modifications ou recharger la page et perdre tous les changements de la session expire.",ja_JP:"",nl_NL:"U kunt een back-up van de niet-opgeslagen bestanden downloaden om wijzigingen te behouden of de pagina opnieuw laden, waarbij alle wijzigingen uit de verlopen sessie verloren gaan.",zh_CN:""},DOWNLOAD_BACKUP_:{en_US:"Download backup",de_DE:"Backup herunterladen",fr_FR:"Tlcharger une copie de sauvegarde",ja_JP:"",nl_NL:"Back-up downloaden",zh_CN:""},RELOAD_:{en_US:"Reload",de_DE:"Erneut laden",fr_FR:"Recharger",ja_JP:"",nl_NL:"Ververs",zh_CN:""},ATTEMPT_TO_RECOVER_:{en_US:"Attempt to recover",de_DE:"Versuche wiederherzustellen",fr_FR:"Tentative de rcupration",ja_JP:"",nl_NL:"Proberen te herstellen",zh_CN:""},SHARED_SESSION_CLOSED_:{en_US:"Shared Editing Session Closed",de_DE:"Geteilte Sitzung geschlossen",fr_FR:"Session d'dition partage ferme",ja_JP:"",nl_NL:"Gedeelde sessie gesloten",zh_CN:""},SHARED_SESSION_CLOSED_MESSAGE_:{en_US:"The shared editing session has been closed. To continue editing, open the document in a non-shared editing session.",de_DE:"Die geteilte Bearbeitungssitzung wurde geschlossen. Um die Bearbeitung fortzusetzen, ffnen Sie das Dokument in einer nicht-geteilten Bearbeitungssitzung.",fr_FR:"La session d'dition partage a t ferme. Pour poursuivre l'dition, ouvrez le document dans une session d'dition non partage.",ja_JP:"",nl_NL:"De gedeelde bewerkingssessie is gesloten. Als u wilt doorgaan met bewerken, opent u het document in een niet-gedeelde bewerkingssessie.",zh_CN:""},FILE_OPEN_:{en_US:"Open",de_DE:"ffnen",fr_FR:"Ouvrir",ja_JP:"",zh_CN:""},CONCURRENT_EDITING_ERROR_TITLE_:{en_US:"Concurrent Editing Session Closed",de_DE:"Gleichzeitige Bearbeitungssitzung geschlossen",fr_FR:"Session d'dition simultane termine",ja_JP:"",nl_NL:"Gelijktijdige bewerkingssessie gesloten",zh_CN:""},CONCURRENT_SESSION_CLOSED_UNEX:{en_US:"Concurrent editing session closed unexpectedly.",de_DE:"Gleichzeitige Bearbeitungssitzung unerwartet geschlossen.",fr_FR:"La session d'dition simultane s'est termine de manire inattendue.",ja_JP:"",nl_NL:"De gelijktijdige bewerkingssessie is onverwacht gesloten.",zh_CN:"."},CONCURRENT_EDITING_DOWNLOAD_FILE_:{en_US:"If you have unsaved changes, download the file.",de_DE:"Wenn Sie ungespeicherte nderungen haben, laden Sie die Datei herunter.",fr_FR:"Si vous avez des modifications non sauvegardes, tlchargez le fichier.",ja_JP:"",nl_NL:"Als u niet-opgeslagen wijzigingen hebt, downloadt u het bestand.",zh_CN:"."},CONCURRENT_EDITING_REOPEN_FILE_:{en_US:"To continue editing, try to reopen the file.",de_DE:"Um die Bearbeitung fortzusetzen, versuchen Sie die Datei erneut zu ffnen.",fr_FR:"Pour poursuivre l'dition, essayez de rouvrir le fichier.",ja_JP:"",nl_NL:"Als u wilt doorgaan met bewerken, probeert u het bestand te heropenen.",zh_CN:"."},ERROR_CONTACT_ADMINISTRATOR_:{en_US:"If this problem persists, contact your administrator.",de_DE:"Wenn das Problem weiterhin besteht, wenden Sie sich an Ihren Administrator.",fr_FR:"Si ce problme persiste, contactez votre administrateur.",ja_JP:"",nl_NL:"Neem contact op met de beheerder als dit probleem zich blijft voordoen.",zh_CN:"."},INFO_:{en_US:"Info",ja_JP:"",zh_CN:""},DOWNLOAD_FILE_:{en_US:"Download File",de_DE:"Datei herunterladen",fr_FR:"Tlcharger le fichier",ja_JP:"",nl_NL:"Bestand downloaden",zh_CN:""},SYNCHRONIZATION_FAILED_TITLE_:{en_US:"Synchronization Failed",de_DE:"Synchronisierung fehlgeschlagen",fr_FR:"chec de la synchronisation",ja_JP:"",nl_NL:"Synchronisatie mislukt",zh_CN:""},SYNCHRONIZATION_FAILED_:{en_US:"Failed to synchronize the current shared editing session. You may not be able to see changes made by others.",de_DE:"Konnte die aktuelle geteilte Bearbeitungssitzung nicht synchronisieren. Sie knnen mglicherweise nicht die nderungen anderer sehen.",fr_FR:"chec de la synchronisation de la session d'dition partage actuelle. Il se peut que vous ne puissiez pas voir les modifications apportes par les autres.",ja_JP:"",nl_NL:"Synchroniseren van de huidige gedeelde bewerkingssessie is mislukt. U ziet mogelijk geen wijzigingen die zijn aangebracht door anderen.",zh_CN:""},LEAVE_SHARED_SESSION_:{en_US:"Leave Shared Editing Session",de_DE:"Geteilte Sitzung verlassen",fr_FR:"Quitter la session d'dition partage",ja_JP:"",nl_NL:"Gedeelde sessie verlaten",zh_CN:""},EDIT_PASTE_:{en_US:"Paste",de_DE:"Einfgen",fr_FR:"Coller",ja_JP:"",nl_NL:"Plak",zh_CN:""},EDITOR_:{en_US:"Editor",fr_FR:"diteur",ja_JP:"",zh_CN:""},INSIDE_ELEMENT_BETWEEN_ELEMENTS_:{en_US:"Inside element {$INSIDE}, between elements {$BEFORE} and {$AFTER}",de_DE:"In Element {$INSIDE}, zwischen Element {$BEFORE} und {$AFTER}",fr_FR:"Dans l''lment {$INSIDE}, entre les lments {$BEFORE} et {$AFTER}",ja_JP:"{$INSIDE}{$BEFORE}{$AFTER}",nl_NL:"Binnen element {$INSIDE}, tussen elementen {$BEFORE} en {$AFTER}",zh_CN:"{$INSIDE}{$BEFORE}{$AFTER}"},INSIDE_ELEMENT_AFTER_ELEMENT_:{en_US:"Inside element {$INSIDE}, after element {$AFTER}",de_DE:"In Element {$INSIDE}, nach Element {$AFTER}",fr_FR:"Dans l''lment {$INSIDE}, aprs l''lment {$AFTER}",ja_JP:"{$INSIDE}{$AFTER}",nl_NL:"Binnen element {$INSIDE}, na element {$AFTER}",zh_CN:"{$INSIDE}{$AFTER}"},INSIDE_ELEMENT_BEFORE_ELEMENT_:{en_US:"Inside element {$INSIDE}, before element {$BEFORE}",de_DE:"In Element {$INSIDE}, vor Element {$BEFORE}",fr_FR:"Dans l''lment {$INSIDE}, avant l''lment {$BEFORE}",ja_JP:"{$INSIDE}{$BEFORE}",nl_NL:"Binnen element {$INSIDE}, voor element {$BEFORE}",zh_CN:"{$INSIDE}{$BEFORE}"},INSIDE_ELEMENT_:{en_US:"Inside element {$INSIDE}",de_DE:"In Element {$INSIDE}",fr_FR:"Dans l''lment {$INSIDE}",ja_JP:"{$INSIDE}",nl_NL:"Binnen element {$INSIDE}",zh_CN:"{$INSIDE}"},INPUT_:{en_US:"Input",de_DE:"Eingabedatei",fr_FR:"Entre",ja_JP:"",nl_NL:"Invoer",zh_CN:""},TRUSTED_CODE_LOCATION_:{en_US:"Trusted Code Locations",de_DE:"Vertrauenswrdige Code-Standorte",fr_FR:"Emplacements de code fiables",ja_JP:"",nl_NL:"Vertrouwde Code Locaties",zh_CN:""},PAGE_BLOCKED_BECAUSE_NOT_TRUSTED_CODE_:{en_US:"The page located at {$hostname} was blocked from being loaded because the address is not one of the {$trustedCodeLocation}.",de_DE:"Die Seite unter {$hostname} wurde blockiert und nicht geladen, weil die Adresse nicht zu den {$trustedCodeLocation} gehrt.",fr_FR:"Le chargement de la page situe  {$hostname} a t bloqu car l''adresse ne fait pas partie des {$trustedCodeLocation}.",ja_JP:"{$hostname}{$trustedCodeLocation}",nl_NL:"De pagina op {$hostname} werd geblokkeerd om te laden omdat het adres niet een van de {$trustedCodeLocation} is.",zh_CN:"{$hostname}{$trustedCodeLocation}"},READ_MORE_:{en_US:"Read more",de_DE:"Mehr lesen",fr_FR:"En savoir plus",ja_JP:"",nl_NL:"Meer informatie",zh_CN:""},OPEN_IN_NEW_TAB_:{en_US:"Open in new tab",de_DE:"In einem neuen Reiter ffnen",fr_FR:"Ouvrir dans un nouvel onglet",ja_JP:"",nl_NL:"Openen in nieuwe tab",zh_CN:""},CLICK_TO_EDIT_:{en_US:"Click to edit",de_DE:"Zum Bearbeiten klicken",fr_FR:"Cliquez pour modifier",ja_JP:"",nl_NL:"Klik om te bewerken",zh_CN:""},EMPTY_:{en_US:"Empty",de_DE:"Leer",fr_FR:"Vide",ja_JP:"",nl_NL:"Leeg",zh_CN:""},CLOSE_:{en_US:"Close",de_DE:"Schlieen",fr_FR:"Fermer",ja_JP:"",nl_NL:"Sluit",zh_CN:""},COLLAPSE_OTHER_FOLDS_:{en_US:"Collapse Other Folds",de_DE:"Andere Folds schlieen",fr_FR:"Rduire les autre plis",ja_JP:"",nl_NL:"Vouw alle overigen in",zh_CN:""},COLLAPSE_OTHER_FOLDS_TOOLTIP_:{en_US:"Fold all the elements except the current element.",de_DE:"Alle Elemente auer das aktuelle Element einklappen.",fr_FR:"Rduire tous les lments sauf l'lment actuel.",ja_JP:"",nl_NL:"Vouw alle elementen op behalve het huidige element.",zh_CN:""},COLLAPSE_CHILD_FOLDS_:{en_US:"Collapse Child Folds",de_DE:"Child-Folds schlieen",fr_FR:"Rduire les plis enfants",ja_JP:"",nl_NL:"Kind-elementen invouwen",zh_CN:""},COLLAPSE_CHILD_FOLDS_TOOLTIP_:{en_US:"Folds the elements indented with one level inside the current element.",de_DE:"Alle Kindelemente des aktuellen Elements, die mit einer Ebene eingerckt sind, einklappen.",fr_FR:"Rduire les lments indents d'un niveau  l'intrieur de l'lment actuel.",ja_JP:"1",nl_NL:"Hiermee worden de beoogde elementen opgevouwen met n niveau binnen het huidige element.",zh_CN:""},TOGGLE_FOLD_:{en_US:"Toggle Fold",de_DE:"Fold umschalten",fr_FR:"Basculer le pli",ja_JP:"",nl_NL:"In-/uitvouwen",zh_CN:""},TOGGLE_FOLD_TOOLTIP_:{en_US:"Toggles the state of the current fold.",de_DE:"Einklappen/Ausklappen umschalten.",fr_FR:"Bascule l'tat du pli actuel.",ja_JP:"",nl_NL:"Hiermee wordt de status van de huidige vouw gewisseld.",zh_CN:""},EXPAND_ALL_:{en_US:"Expand All",de_DE:"Alle erweitern",fr_FR:"Tout dvelopper",ja_JP:"",nl_NL:"Vouw alles open",zh_CN:""},EXPAND_ALL_TOOLTIP_:{en_US:"Unfolds all elements in the current document.",de_DE:"Alle Elemente im aktuellen Dokument ausklappen.",fr_FR:"Dvelopper tous les lments du document actuel.",ja_JP:"",nl_NL:"Hiermee worden alle elementen in het huidige document uitgevouwen.",zh_CN:""},EXPAND_CHILD_FOLDS_:{en_US:"Expand Child Folds",de_DE:"Child-Folds ausklappen",fr_FR:"Dvelopper les plis enfants",ja_JP:"",nl_NL:"Kind-element uitvouwen",zh_CN:""},EXPAND_CHILD_FOLDS_TOOLTIP_:{en_US:"Unfolds all child elements of the currently selected element.",de_DE:"Alle Kindelemente des aktuellen Elements ausklappen.",fr_FR:"Dvelopper tous les lments enfants de l'lment actuellement slectionn.",ja_JP:"",nl_NL:"Vouw alle onderliggende elementen van het huidige geselecteerde element uit.",zh_CN:""},COLLAPSE_ALL_:{en_US:"Collapse All",de_DE:"Alle einklappen",fr_FR:"Tout rduire",ja_JP:"",nl_NL:"Alles invouwen",zh_CN:""},FOLDED_ELEMENT_:{en_US:"Folded {$element}",de_DE:"Eingeklappt {$element}",fr_FR:"Rduire {$element}",ja_JP:"{$element}",nl_NL:"{$element} opgevouwen",zh_CN:"{$element}"},FOLDED_:{en_US:"Folded",de_DE:"Eingeklappt",fr_FR:"Rduire",ja_JP:"",nl_NL:"Opgevouwen",zh_CN:""},OK_:{en_US:"OK"},YES_:{en_US:"Yes",de_DE:"Ja",fr_FR:"Oui",ja_JP:"",nl_NL:"Ja",zh_CN:""},NO_:{en_US:"No",de_DE:"Nein",fr_FR:"Non",ja_JP:"",nl_NL:"Nee",zh_CN:""},CHOOSE_TARGET_WEB_RESOURCE_:{en_US:"Choose the target web resource",de_DE:"Ziel-Web-Ressource whlen",fr_FR:"Choisir la ressource web cible",ja_JP:" Web ",nl_NL:"Het doelwebbestand kiezen",zh_CN:"web"},WEB_LINK_:{en_US:"Web Link",de_DE:"Weblink",fr_FR:"Lien Web",ja_JP:"Web ",nl_NL:"Webkoppeling",zh_CN:"Web"},INSERT_:{en_US:"Insert",de_DE:"Einfgen",fr_FR:"Insrer",ja_JP:"",nl_NL:"Voeg in",zh_CN:""},ENTER_IMAGE_URL_:{en_US:"Enter image URL:",de_DE:"Bild-URL eingeben:",fr_FR:"Entrer une URL d'image :",ja_JP:"URL",nl_NL:"Afbeeldings-URL invoeren:",zh_CN:"URL:"},CHOOSE_IMAGE_URL_:{en_US:"Choose Image URL",de_DE:"Whle Bild-URL",fr_FR:"Choisir une URL d'image",ja_JP:"URL",nl_NL:"Afbeeldings-URL kiezen",zh_CN:"URL"},TITLE_:{en_US:"Title",de_DE:"Titel",fr_FR:"Titre",ja_JP:"",nl_NL:"Titel",zh_CN:""},SIMPLE_:{en_US:"SIMPLE",de_DE:"EINFACH",ja_JP:"",nl_NL:"EENVOUDIG",zh_CN:""},CHOICE_:{en_US:"CHOICE",de_DE:"AUSWAHL",fr_FR:"CHOIX",ja_JP:"",nl_NL:"KEUZE",zh_CN:""},CUSTOM_:{en_US:"Custom",de_DE:"Benutzerdefiniert",fr_FR:"Personnalis",ja_JP:"",nl_NL:"Aangepast",zh_CN:""},INSERT_TABLE_:{en_US:"Insert Table",de_DE:"Tabelle einfgen",fr_FR:"Insrer un tableau",ja_JP:"",nl_NL:"Tabel invoegen",zh_CN:""},SPLIT_CELL_WARNING_:{en_US:"The caret must be inside a table cell.",de_DE:"Der Cursor muss innerhalb der Tabellenzelle sein.",fr_FR:"Le curseur doit tre dans une cellule du tableau",ja_JP:"",nl_NL:"De cursor moet zich in een tabelcel bevinden.",zh_CN:""},SPLIT_CELL_:{en_US:"Split cells",de_DE:"Zellen teilen",fr_FR:"Fractionner des cellules",ja_JP:"",nl_NL:"Cellen splitsen",zh_CN:""},NUMBER_OF_COLUMNS_:{en_US:"Number of columns",de_DE:"Anzahl der Spalten",fr_FR:"Nombre de colonnes",ja_JP:"",nl_NL:"Aantal kolommen",zh_CN:""},NUMBER_OF_ROWS_:{en_US:"Number of rows",de_DE:"Anzahl der Reihen",fr_FR:"Nombre de lignes",ja_JP:"",nl_NL:"Aantal rijen",zh_CN:""},CHOOSE_REFERENCE_:{en_US:"Choose reference",de_DE:"Whle Referenz",fr_FR:"Choisir une rfrence",ja_JP:"",nl_NL:"Verwijzing kiezen",zh_CN:""},INSERT_REFERENCE_SEL_:{en_US:"Sel.",de_DE:"Akt.",fr_FR:"Sl.",ja_JP:"",zh_CN:""},INSERT_REFERENCE_TARGET_ID_:{en_US:"Target ID",de_DE:"Ziel-ID",fr_FR:"ID Cible",ja_JP:" ID",nl_NL:"Doel-ID",zh_CN:"ID"},ELEMENT_:{en_US:"Element",fr_FR:"lment",ja_JP:"",zh_CN:""},INSERT_REFERENCE_ELEMENT_OR_ID_:{en_US:"Element/ID",fr_FR:"lment/ID",ja_JP:"/ID",zh_CN:"/ID"},CONTENT_:{en_US:"Content",de_DE:"Inhalt",fr_FR:"Contenu",ja_JP:"",nl_NL:"Inhoud",zh_CN:""},COULD_NOT_DETERMINE_CONREF_TARGETS_:{en_US:"Could not determine conref targets.",de_DE:"Konnte keine Ziele fr Inhaltsreferenzen ermitteln.",fr_FR:"Impossible de dterminer les cibles de conref.",ja_JP:"",nl_NL:"Kan doelen voor contentverwijzingen niet bepalen.",zh_CN:"conref"},CHOOSE_ANOTHER_TARGET_FILE_:{en_US:"Choose another target file",de_DE:"Whle andere Zieldatei",fr_FR:"Choisir un autre fichier cible",ja_JP:"",nl_NL:"Een ander doelbestand kiezen",zh_CN:""},TARGET_FILE_:{en_US:"Target file:",de_DE:"Zieldatei:",fr_FR:"Fichier cible :",ja_JP:"",nl_NL:"Doelbestand:",zh_CN:""},NO_TARGETS_:{en_US:"No targets",de_DE:"Keine Ziele",fr_FR:"Aucune cible",ja_JP:"",nl_NL:"Geen doelen",zh_CN:""},CHOOSE_CROSS_REFERENCE_:{en_US:"Choose cross reference",de_DE:"Whle Querverweis",fr_FR:"Choisir une rfrence croise",ja_JP:"",nl_NL:"Kruisverwijzing kiezen",zh_CN:""},REUSE_CONTENT_:{en_US:"Reuse Content",de_DE:"Inhalt wiederverwenden",fr_FR:"Rutiliser du contenu",ja_JP:"",nl_NL:"Hergebruik content",zh_CN:""},TABLE_PROPERTIES_TITLE_:{en_US:"Table Properties",de_DE:"Tabelleneigenschaften",fr_FR:"Proprits du tableau",ja_JP:"",nl_NL:"Tabeleigenschappen",zh_CN:""},TABLE_PROPS_PRESERVE_:{en_US:"preserve"},TABLE_PROPS_NOT_SET_:{en_US:"not set"},OTHER_ACTIONS_:{en_US:"Other actions",de_DE:"Weitere Aktionen",fr_FR:"Autres actions",ja_JP:"",nl_NL:"Overige acties",zh_CN:""},MORE_SUGGESTIONS_:{en_US:"More Suggestions",de_DE:"Weitere Vorschlge",fr_FR:"Plus de suggestions",ja_JP:"",nl_NL:"Meer suggesties",zh_CN:""},IGNORE_:{en_US:"Ignore",de_DE:"Ignorieren",fr_FR:"Ignorer",ja_JP:"",nl_NL:"Negeer",zh_CN:""},COMPLEX_INPUT_WARNING_:{en_US:"{$P_START}This application works best with {$B_START}Google Keyboard{$B_END}, having {$B_START}Auto-correction{$B_END} turned {$B_START}Off{$B_END}, and {$B_START}Show correction suggestions{$B_END} set to {$B_START}Always hidden{$B_END}. It works also with {$B_START}Google voice typing{$B_END}.{$P_END}{$P_START}Using other keyboards can lead to various issues. In case your document gets corrupted, use the {$B_START}Undo/Redo{$B_END} buttons.{$P_END}",de_DE:"{$P_START}Diese Anwendung arbeitet am besten mit der {$B_START}Google-Tastatur{$B_END}, mit {$B_START}Autovervollstndigung{$B_END} auf {$B_START}Aus{$B_END} gesetzt und {$B_START}nderungsvorschlge{$B_END} gesetzt auf {$B_START}Nie anzeigen{$B_END}. Sie arbeitet auerdem mit {$B_START}Google-Spracheingabe{$B_END}.{$P_END}{$P_START}Die Verwendung anderer Tastaturen kann zu verschiedenen Fehlern fhren. Wenn Ihr Dokument beschdigt wird, verwenden Sie die Buttons {$B_START}Rckgngig/Wiederherstellen{$B_END}.{$P_END}",fr_FR:"{$P_START}Cette application fonctionne mieux avec le {$B_START}Clavier Google{$B_END}, avec {$B_START}Auto-correction{$B_END} sur {$B_START}Off{$B_END}, et {$B_START}Afficher les suggestions de correction{$B_END} paramtr  {$B_START}Toujours masqu{$B_END}. Elle fonctionne aussi avec la {$B_START}Saisie vocale Google{$B_END}.{$P_END}{$P_START}Utiliser d'autres claviers peut mener  divers problmes. Dans le cas o votre document se corrompt, utilisez les boutons {$B_START}Annuler/Rtablir{$B_END}.{$P_END}",ja_JP:"{$P_START}{$B_START}Google Keyboard{$B_END}{$B_START}{$B_END}{$B_START}{$B_END}{$B_START}{$B_END}{$B_START}{$B_END}{$B_START}Google{$B_END}{$P_END}{$P_START}{$B_START}/{$B_END}{$P_END}",nl_NL:"{$P_START}Dit programma werkt het beste met het {$B_START}Google-toetsenbord{$B_END}, waarbij {$B_START}Automatisch corrigeren{$B_END} is {$B_START}uitgeschakeld{$B_END} en {$B_START}Correctiesuggesties tonen{$B_END} is ingesteld op {$B_START}Altijd verborgen{$B_END}. Het werkt ook met {$B_START}Google-spraakinvoer{$B_END}.{$P_END}{$P_START}Als u andere toetsenborden gebruikt, kan dit diverse problemen veroorzaken. Gebruik de knoppen {$B_START}Ongedaan maken/Opnieuw{$B_END} als uw document beschadigd raakt.{$P_END}",zh_CN:"{$P_START}{$B_START}{$B_END}{$B_START}{$B_END}{$B_START}{$B_END}{$B_START}{$B_END}{$B_START}{$B_END}{$B_START}{$B_END}{$P_END}{$P_START}{$B_START}/{$B_END}{$P_END}"},UNKNOWN_ERROR_:{en_US:"An unknown error occurred",de_DE:"Ein unbekannter Fehler ist aufgetreten",fr_FR:"Une erreur inconnue s'est produite",ja_JP:"",nl_NL:"Een onbekende fout heeft zich voorgedaan",zh_CN:""},WARNING_:{en_US:"Warning",de_DE:"Warnung",fr_FR:"Avertissement",ja_JP:"",nl_NL:"Waarschuwing",zh_CN:""},DOCUMENT_COULD_NOT_BE_LOADED_:{en_US:"Document could not be loaded",de_DE:"Dokument konnte nicht geladen werden",fr_FR:"Le document ne peut pas tre charg",ja_JP:"",nl_NL:"Document kan niet worden geladen",zh_CN:""},FILE_NOT_SUPPORTED_FORMAT_:{en_US:"The file does not appear to have a supported document format.",de_DE:"Die Datei scheint kein untersttztes Dateiformat zu haben.",fr_FR:"Le fichier ne semble pas avoir un format de document pris en charge.",ja_JP:"",nl_NL:"Het bestand lijkt geen ondersteund documentformaat te hebben.",zh_CN:""},Try_open_outside_room_:{en_US:"You can try to open the document in a non-shared editing session.",de_DE:"Sie knnen versuchen das Dokument in einer nicht-geteilten Bearbeitungssitzung zu ffnen.",fr_FR:"Vous pouvez essayer d'ouvrir le document dans une session d'dition non partage.",ja_JP:"",nl_NL:"U kunt proberen het document te openen in een niet-gedeelde bewerkingssessie.",zh_CN:"."},DETAILS_:{en_US:"Details",fr_FR:"Dtails",ja_JP:"",zh_CN:""},REPORT_PROBLEM_UPPERCASE_:{en_US:"Report Problem",de_DE:"Problem berichten",fr_FR:"Signaler un problme",ja_JP:"",nl_NL:"Probleem melden",zh_CN:""},TROUBLESHOOTING_:{en_US:"Troubleshooting",de_DE:"Fehlerbehebung",fr_FR:"Dpannage",ja_JP:"",nl_NL:"Probleemoplossing",zh_CN:""},IME_NOT_SUPPORTED_:{en_US:"IME not supported on the current platform. Please use the Google Chrome web browser.",de_DE:"IME wird auf der aktuellen Plattform nicht untersttzt. Bitte verwenden Sie den Webbrowser Google Chrome.",fr_FR:"IME n'est pas pris en charge sur la plate-forme actuelle. Veuillez utiliser le navigateur Web Google Chrome.",ja_JP:"IME Google Chrome Web ",nl_NL:"IME wordt niet ondersteund op het huidige platform. Gebruik de webbrowser Google Chrome.",zh_CN:"IME"},CANNOT_WRITE_DOC_RO_:{en_US:"Cannot write because document is read-only.",de_DE:"Schreiben nicht mglich, da Dokument schreibgeschtzt ist.",fr_FR:"Impossible d'crire car le document est en lecture seule.",ja_JP:"",nl_NL:"Kan niet schrijven, omdat het document alleen-lezen is.",zh_CN:""},CANNOT_WRITE_RO_REGION_:{en_US:"Cannot write in a read-only region.",de_DE:"In eine schreibgeschtzte Region kann nicht geschrieben werden.",fr_FR:"Impossible d'crire dans une rgion en lecture seule.",ja_JP:"",nl_NL:"Kan niet schrijven in alleen-lezen regio.",zh_CN:""},CANNOT_START_IME_INCOMPATIBLE_OUTGOING_OPERATION_:{en_US:"Cannot start IME because an operation is in progress.",de_DE:"IME kann nicht gestartet werden, da ein Vorgang ausgefhrt wird.",fr_FR:"Impossible de dmarrer IME car une opration est en cours.",ja_JP:"IME ",nl_NL:"Kan IME niet starten, omdat een handeling wordt uitgevoerd.",zh_CN:"IME"},CANNOT_START_IME_INCOMPATIBLE_SELECTION_:{en_US:"Cannot start IME because current selection contains XML tags.",de_DE:"IME kann nicht gestartet werden, da die aktuelle Auswahl XML-Tags enthlt.",fr_FR:"Impossible de lancer IME car la slection actuelle contient des balises XML.",ja_JP:" XML IME ",nl_NL:"Kan IME niet starten, omdat een huidige selectie XML-tags bevat.",zh_CN:"IMEXML"},SYNCHRONIZING_WITH_SERVER_:{en_US:"Synchronizing with server",de_DE:"Synchronisierung mit Server",fr_FR:"Synchronisation avec le serveur",ja_JP:"",nl_NL:"Synchroniseren met server",zh_CN:""},CHOOSE_THREAD_:{en_US:"Choose thread",de_DE:"Thema auswhlen",fr_FR:"Choisir le fil de discussion",ja_JP:"",nl_NL:"Thread kiezen",zh_CN:""},BACK_TO_THREADS_:{en_US:"Go back to threads list",de_DE:"Zurck zur Themenliste",fr_FR:"Retour  la liste des fils de discussion",ja_JP:"",nl_NL:"Terug naar de lijst met threads",zh_CN:""},SUN_:{en_US:"Sunday",de_DE:"Sonntag",fr_FR:"dimanche",ja_JP:"",nl_NL:"zondag",zh_CN:""},MON_:{en_US:"Monday",de_DE:"Montag",fr_FR:"lundi",ja_JP:"",nl_NL:"maandag",zh_CN:""},TUE_:{en_US:"Tuesday",de_DE:"Dienstag",fr_FR:"mardi",ja_JP:"",nl_NL:"dinsdag",zh_CN:""},WED_:{en_US:"Wednesday",de_DE:"Mittwoch",fr_FR:"mercredi",ja_JP:"",nl_NL:"woensdag",zh_CN:""},THU_:{en_US:"Thursday",de_DE:"Donnerstag",fr_FR:"jeudi",ja_JP:"",nl_NL:"donderdag",zh_CN:""},FRI_:{en_US:"Friday",de_DE:"Freitag",fr_FR:"vendredi",ja_JP:"",nl_NL:"vrijdag",zh_CN:""},SAT_:{en_US:"Saturday",de_DE:"Samstag",fr_FR:"samedi",ja_JP:"",nl_NL:"zaterdag",zh_CN:""},JAN_:{en_US:"January",de_DE:"Januar",fr_FR:"janvier",ja_JP:"1",nl_NL:"januari",zh_CN:""},FEB_:{en_US:"February",de_DE:"Februar",fr_FR:"fvrier",ja_JP:"2",nl_NL:"februari",zh_CN:""},MAR_:{en_US:"March",de_DE:"Mrz",fr_FR:"mars",ja_JP:"3",nl_NL:"maart",zh_CN:""},APR_:{en_US:"April",fr_FR:"avril",ja_JP:"4",nl_NL:"april",zh_CN:""},MAY_:{en_US:"May",de_DE:"Mai",fr_FR:"mai",ja_JP:"5",nl_NL:"mei",zh_CN:""},JUN_:{en_US:"June",de_DE:"Juni",fr_FR:"juin",ja_JP:"6",nl_NL:"juni",zh_CN:""},JUL_:{en_US:"July",de_DE:"Juli",fr_FR:"juillet",ja_JP:"7",nl_NL:"juli",zh_CN:""},AUG_:{en_US:"August",fr_FR:"aot",ja_JP:"8",nl_NL:"augustus",zh_CN:""},SEP_:{en_US:"September",fr_FR:"septembre",ja_JP:"9",nl_NL:"september",zh_CN:""},OCT_:{en_US:"October",de_DE:"Oktober",fr_FR:"octobre",ja_JP:"10",nl_NL:"oktober",zh_CN:""},NOV_:{en_US:"November",fr_FR:"novembre",ja_JP:"11",nl_NL:"november",zh_CN:""},DEC_:{en_US:"December",de_DE:"Dezember",fr_FR:"dcembre",ja_JP:"12",nl_NL:"december",zh_CN:""},COMMENTED_BY_AUTHOR_:{en_US:"Commented by {0}",de_DE:"Kommentiert von {0}",fr_FR:"Comment par {0}",ja_JP:"{0}",nl_NL:"Opmerking door {0}",zh_CN:"{0}"},ACCESSIBILITY_HELP_:{en_US:"Accessibility help",de_DE:"Barrierefreiheitshilfe",fr_FR:"Aide sur l'accessibilit",ja_JP:"",nl_NL:"Help voor toegankelijkheid",zh_CN:""},"A11Y_DOCS_":{en_US:"Accessibility documentation",de_DE:"Barrierefreiheitsdokumentation",fr_FR:"Documentation sur l'accessibilit",ja_JP:"",nl_NL:"Documentatie over toegankelijkheid",zh_CN:""},"A11Y_DOCS_LONG_":{en_US:"For more accessibility information, please check the {$DOCUMENTATION_LINK}",de_DE:"Fr weitere Barrierefreiheitsinformationen, siehe {$DOCUMENTATION_LINK}",fr_FR:"Pour plus d'informations sur l'accessibilit, veuillez consulter {$DOCUMENTATION_LINK}",ja_JP:"{$DOCUMENTATION_LINK} ",nl_NL:"Voor meer informatie over toegankelijkheid raadpleegt u de {$DOCUMENTATION_LINK}",zh_CN:"{$DOCUMENTATION\\u}"},"A11Y_OFF_":{en_US:"Turn off accessibility optimization",de_DE:"Barrierefreiheitsoptimierungen deaktivieren",fr_FR:"Dsactiver l'optimisation d'accessibilit",ja_JP:"",nl_NL:"Toegankelijkheidsoptimalisatie uitschakelen",zh_CN:""},"A11Y_ON_":{en_US:"Turn on accessibility optimization",de_DE:"Barrierefreiheitsoptimierungen aktivieren",fr_FR:"Activer l'optimisation d'accessibilit",ja_JP:"",nl_NL:"Toegankelijkheidsoptimalisatie inschakelen",zh_CN:""},SKIP_TO_CONTENT_:{en_US:"Skip to content",de_DE:"berspringe zu Inhalt",fr_FR:"Aller au contenu",ja_JP:"",nl_NL:"Doorgaan naar content",zh_CN:""},NO_TAGS_:{en_US:"No Tags",de_DE:"Keine Tags",fr_FR:"Aucune balise",ja_JP:"",nl_NL:"Geen tags",zh_CN:""},PARTIAL_TAGS_:{en_US:"Partial Tags",de_DE:"Partielle Tags",fr_FR:"Balises partielles",ja_JP:"",nl_NL:"Gedeeltelijke tags",zh_CN:""},INLINE_TAGS_:{en_US:"Inline Tags",de_DE:"Inline-Tags",fr_FR:"Balises en ligne",ja_JP:" ",nl_NL:"Inline tags",zh_CN:""},BLOCK_TAGS_:{en_US:"Block Tags",de_DE:"Block-Tags",fr_FR:"Balises en bloc",ja_JP:" ",nl_NL:"Tags in blokken",zh_CN:""},FULL_TAGS_:{en_US:"Full Tags",de_DE:"Ganze Tags",fr_FR:"Toutes les balises",ja_JP:" ",nl_NL:"Volledige tags",zh_CN:""},FULL_TAGS_WITH_ATTRIBUTES_:{en_US:"Full Tags with Attributes",de_DE:"Ganze Tags mit Attributen",fr_FR:"Toutes les balises avec attributs",ja_JP:" ",nl_NL:"Volledige tags met attributen",zh_CN:""},ST_TAG_EXPL_LBL_:{en_US:"Start {$TAG}",fr_FR:"Ouvrir {$TAG}",ja_JP:"{$TAG} ",nl_NL:"{$TAG} starten",zh_CN:"{$TAG}"},EN_TAG_EXPL_LBL_:{en_US:"End {$TAG}",de_DE:"Ende {$TAG}",fr_FR:"Fermer {$TAG}",ja_JP:"{$TAG} ",nl_NL:"{$TAG} beindigen",zh_CN:"{$TAG}"},CLICK_TO_OPEN_URL_:{en_US:"Click to open: {0}",de_DE:"Klicken zum ffnen: {0}",fr_FR:"Clic pour ouvrir : {0}",ja_JP:": {0}",nl_NL:"Klikken om te openen: {0}",zh_CN:"{0}"},MODIFIER_CLICK_TO_OPEN_URL_:{en_US:"{0}+click to open: {1}",de_DE:"{0}+klicken zum ffnen: {1}",fr_FR:"{0}+clic pour ouvrir : {1}",ja_JP:"{0} + : {1}",nl_NL:"{0}+klikken om te openen: {1}",zh_CN:"{0}+{1}"},KEYREF_LINK_:{en_US:"Key Reference: \"{$keyref}\"",de_DE:"Schlsselreferenz: \"{$keyref}\"",fr_FR:"Rfrence cl: \"{$keyref}\"",ja_JP:": {$keyref}",nl_NL:"Belangrijke verwijzing: '{$keyref}'",zh_CN:":{$keyref}"},UNSUPPORTED_MEDIA_FORMAT_:{en_US:"Unsupported media format",de_DE:"Nicht-untersttztes Medienformat",fr_FR:"Format mdia non pris en charge",ja_JP:"",nl_NL:"Niet-ondersteund mediaformaat",zh_CN:""},PREVIEW_:{en_US:"Preview",de_DE:"Vorschau",fr_FR:"Aperu",ja_JP:"",nl_NL:"Voorvertoning",zh_CN:""},PASTE_SPECIAL_:{en_US:"Paste special",de_DE:"Besonderes einfgen",fr_FR:"Collage spcial",ja_JP:"",nl_NL:"Plak speciaal",zh_CN:""},PASTE_IN_FIELD_BELOW_:{en_US:"Paste in the field below",de_DE:"In das untere Feld einfgen",fr_FR:"Coller dans le champ ci-dessous",ja_JP:"",nl_NL:"Plakken in het onderstaande veld",zh_CN:""},SMART_PASTE_:{en_US:"Smart Paste",de_DE:"Smartes Einfgen",fr_FR:"Coller intelligent",ja_JP:"",nl_NL:"Slim plakken",zh_CN:""},PASTE_AS_TEXT_:{en_US:"Paste as text",de_DE:"Als Text einfgen",fr_FR:"Coller en tant que texte",ja_JP:"",nl_NL:"Als Tekst plakken",zh_CN:""},PASTE_AS_XML_:{en_US:"Paste as XML",de_DE:"Als XML einfgen",fr_FR:"Coller en tant que XML",ja_JP:"XML",nl_NL:"Plak als XML",zh_CN:"XML"},INVOKE_CONTEXTMENU_TO_COPY_:{en_US:"Invoke contextual menu to copy selection below.",de_DE:"Kontextmen ffnen, um untere Auswahl zu kopieren.",fr_FR:"Appelez le menu contextuel pour copier la slection ci-dessous.",ja_JP:"",nl_NL:"Roep het snelmenu aan om de onderstaande selectie te kopiren.",zh_CN:""},CUT_SELECTION_BELOW_:{en_US:"Cut selection below.",de_DE:"Untere Auswahl ausschneiden.",fr_FR:"Couper la slection ci-dessous.",ja_JP:"",nl_NL:"Knip de onderstaande selectie.",zh_CN:""},ADDITIONAL_STYLES_:{en_US:"Additional styles",de_DE:"Zustzliche Stile",fr_FR:"Styles additionnels",ja_JP:"",nl_NL:"Extra stijlen",zh_CN:""},MAIN_STYLE_:{en_US:"Main style",de_DE:"Hauptstil",fr_FR:"Style principal",ja_JP:"",nl_NL:"Primaire stijl",zh_CN:""},DEFAULT_:{en_US:"Default",de_DE:"Standardeinstellungen",fr_FR:"Par dfaut",ja_JP:"",nl_NL:"Standaard",zh_CN:""},CHOOSE_STYLE_:{en_US:"Choose style",de_DE:"Stil auswhlen",fr_FR:"Choisir un style",ja_JP:"",nl_NL:"Stijl kiezen",zh_CN:""},COULD_NOT_CONNECT_TO_SERVER_:{en_US:"Could not connect to server",de_DE:"Konnte sich nicht mit dem Server verbinden",fr_FR:"Connexion au serveur impossible",ja_JP:"",nl_NL:"Kan geen verbinding met de server maken",zh_CN:""},NO_OCCURRENCE_FOUND_:{en_US:"No results found",de_DE:"Keine Ergebnisse gefunden",fr_FR:"Aucun rsultat trouv",ja_JP:"",nl_NL:"Geen resultaten gevonden",zh_CN:""},Results:{en_US:"Results",de_DE:"Resultate",fr_FR:"Rsultats",ja_JP:"",nl_NL:"Resultaten",zh_CN:""},FIND_CURRENT_OF_TOTAL_:{en_US:"Result {$CURRENT} of {$TOTAL}",de_DE:"Ergebnis {$CURRENT} von {$TOTAL}",fr_FR:"Rsultat {$CURRENT} de {$TOTAL}",ja_JP:"{$TOTAL}  {$CURRENT}",nl_NL:"Resultaat {$CURRENT} van {$TOTAL}",zh_CN:"{$TOTAL}{$CURRENT}"},SEARCH_FOR_:{en_US:"Search for",de_DE:"Suchen nach",fr_FR:"Rechercher",ja_JP:"",nl_NL:"Zoeken naar",zh_CN:""},REPLACE_WITH_:{en_US:"Replace with",de_DE:"Ersetzen durch",fr_FR:"Remplacer par",ja_JP:"",nl_NL:"Vervang door",zh_CN:""},FIND_NEXT_:{en_US:"Find Next",de_DE:"Weitersuchen",fr_FR:"Rechercher le suivant",ja_JP:"",nl_NL:"Zoek volgende",zh_CN:""},MATCH_CASE_:{en_US:"Match case",de_DE:"Gro- und Kleinschreibung beachten",fr_FR:"Sensible  la casse",ja_JP:"",nl_NL:"Hoofdlettergevoelig",zh_CN:""},WHOLE_WORDS_:{en_US:"Whole words",de_DE:"Ganze Wrter",fr_FR:"Mots entiers",ja_JP:"",nl_NL:"Hele woorden",zh_CN:""},FIND_PREVIOUS_:{en_US:"Find Previous",de_DE:"Vorheriges finden",fr_FR:"Rechercher le prcdent",ja_JP:"",nl_NL:"Zoek vorige",zh_CN:""},REPLACE_:{en_US:"Replace",de_DE:"Ersetzen",fr_FR:"Remplacer",ja_JP:"",nl_NL:"Vervang",zh_CN:""},REPLACE_ALL_:{en_US:"Replace All",de_DE:"Alle ersetzen",fr_FR:"Tout remplacer",ja_JP:"",nl_NL:"Vervang alles",zh_CN:""},FIND_:{en_US:"Find",de_DE:"Suchen",fr_FR:"Rechercher",ja_JP:"",nl_NL:"Zoek",zh_CN:""},FIND_REPLACE_:{en_US:"Find/Replace",de_DE:"Suchen/Ersetzen",fr_FR:"Rechercher/Remplacer",ja_JP:"/",nl_NL:"Zoek/vervang",zh_CN:"/"},MOVE_BREADCRUMB_TO_BOTTOM_:{en_US:"Move breadcrumb to the bottom of the editing area",de_DE:"Schiebe Brotkrumen an den unteren Rand des Bearbeitungsbereichs",fr_FR:"Dplacer le fil d'Ariane vers le bas de la zone d'dition",ja_JP:"",nl_NL:"Breadcrumb verplaatsen naar de onderkant van het bewerkingsgebied",zh_CN:""},MOVE_BREADCRUMB_TO_TOP_:{en_US:"Move breadcrumb to the top of the editing area",de_DE:"Schiebe Brotkrumen an den oberen Rand des Bearbeitungsbereichs",fr_FR:"Dplacer le fil d'Ariane vers le haut de la zone d'dition",ja_JP:"",nl_NL:"Breadcrumb verplaatsen naar de bovenkant van het bewerkingsgebied",zh_CN:""},NO_REUSABLE_KEYS_CONTEXT_:{en_US:"No reusable keys were found in the current DITA Context.",de_DE:"Im aktuellen DITA-Kontext wurden keine wiederverwendbaren Schlssel gefunden.",fr_FR:"Aucune cl rutilisable n'a t trouve dans le contexte DITA actuel.",ja_JP:"DITA",nl_NL:"Er zijn geen herbruikbare sleutels gevonden in de huidige DITA-context.",zh_CN:"DITA"},NO_REUSABLE_KEYS_:{en_US:"No reusable keys were found in the current root DITA map.",de_DE:"Keine wiederverwendbaren Schlssel in der aktuellen Root-DITA-Map gefunden.",fr_FR:"Aucune cl rutilisable n'a t trouve dans la DITA Map racine actuelle.",ja_JP:"DITA",nl_NL:"Er zijn geen herbruikbare sleutels gevonden in de huidige DITA-rootmap.",zh_CN:"DITA"},FILTER_HINT_:{en_US:"Type filter text",de_DE:"Filtertext eingeben",fr_FR:"Saisir le texte du filtre",ja_JP:"",nl_NL:"Typ filtertekst",zh_CN:""},SET_DITA_MAP_SUCCESS_:{en_US:"Root map set successfully",de_DE:"Root-Map erfolgreich gewhlt",fr_FR:"Dfinition de la map racine russie",ja_JP:"",nl_NL:"Hoofd-map is ingesteld",zh_CN:""},SET_DITA_MAP_FAIL_:{en_US:"Could not set the new root map",de_DE:"Konnte neue root-map nicht whlen",fr_FR:"Impossible de dfinir la nouvelle map racine",ja_JP:"",nl_NL:"Kan de nieuwe hoofd-map niet instellen",zh_CN:""},NO_CONTEXT_SELECTED_:{en_US:"No context selected",de_DE:"Kein Kontext ausgewhlt",fr_FR:"Aucun contexte slectionn",ja_JP:"",nl_NL:"Geen context geselecteerd",zh_CN:""},NO_CONTEXT_:{en_US:"No context",de_DE:"Kein Kontext",fr_FR:"Aucun contexte",ja_JP:"",nl_NL:"Geen context",zh_CN:""},APPLY_:{en_US:"Apply",de_DE:"Anwenden",fr_FR:"Appliquer",ja_JP:"",nl_NL:"Pas toe",zh_CN:""},CONFIGURE_DITA_CONTEXT_:{en_US:"Configure DITA Context",de_DE:"DITA-Kontext konfigurieren",fr_FR:"Configurer le contexte DITA",ja_JP:"DITA",nl_NL:"DITA-context configureren",zh_CN:"DITA"},SHOW_EXCLUDED_CONTENT_:{en_US:"Show excluded content",de_DE:"Ausgeschlossenen Inhalt anzeigen",fr_FR:"Afficher le contenu exclu",ja_JP:"",nl_NL:"Uitgesloten inhoud weergeven",zh_CN:""},DITA_PROJECT_:{en_US:"DITA Project",de_DE:"DITA-Projekt",fr_FR:"Projet DITA",ja_JP:"DITA",nl_NL:"DITA-Project",zh_CN:"DITA"},NO_PROJECT_SELECTED_:{en_US:"No project selected",de_DE:"Kein Projekt ausgewhlt",fr_FR:"Aucun projet slectionn",ja_JP:"",nl_NL:"Geen project geselecteerd",zh_CN:""},PROJECT_:{en_US:"Project",de_DE:"Projekt",fr_FR:"Projet",ja_JP:"",zh_CN:""},CONTEXT_:{en_US:"Context",de_DE:"Kontext",fr_FR:"Contexte",ja_JP:"",nl_NL:"Verband",zh_CN:""},DITA_MAP_:{en_US:"DITA Map",de_DE:"DITA-Map",ja_JP:"DITA "},NO_MAP_SELECTED_:{en_US:"No map selected",de_DE:"Keine Karte ausgewhlt",fr_FR:"Aucune map slectionne",ja_JP:"",nl_NL:"Geen kaart geselecteerd",zh_CN:""},MAP_LABEL_:{en_US:"Map:",de_DE:"Karte:",fr_FR:"Map :",ja_JP:":",nl_NL:"Kaart:",zh_CN:""},NO_FILTER_SELECTED_:{en_US:"No filter selected",de_DE:"Kein Filter ausgewhlt",fr_FR:"Aucun filtre slectionn",ja_JP:"",nl_NL:"Geen filter geselecteerd",zh_CN:""},FILTER_LABEL_:{en_US:"Filter:",fr_FR:"Filtre :",ja_JP:":",zh_CN:""},INTERNAL_SERVER_ERROR_:{en_US:"Internal Server Error",de_DE:"Interner Serverfehler",fr_FR:"Erreur interne du serveur",ja_JP:"",nl_NL:"Interne serverfout",zh_CN:""},DITA_KEYS_:{en_US:"DITA Keys",de_DE:"DITA-Schlssel",fr_FR:"Cls DITA",ja_JP:"DITA",nl_NL:"DITA-sleutels",zh_CN:"DITA"},DITA_CONTEXT_NOT_AVAILABLE_FOR_KEYS_:{en_US:"A DITA Map or a DITA Project with Context must be choosen in order to access reusable keys.",de_DE:"Eine DITA-Karte oder ein DITA-Projekt mit Kontext muss ausgewhlt werden, um wiederverwendbare Schlssel zugreifen zu knnen.",fr_FR:"Une carte DITA ou un projet DITA avec contexte doit tre choisi pour accder aux cls rutilisables.",ja_JP:"DITADITA",nl_NL:"Een DITA-kaart of een DITA-project met context moet worden gekozen om toegang te krijgen tot herbruikbare sleutels.",zh_CN:"DITADITA"},CLICK_HERE_TO_SET_DITAMAP_:{en_US:"Click here {$SET_DITAMAP_BUTTON} to set a DITA Map or a DITA Project Context.",de_DE:"Klicken Sie hier {$SET_DITAMAP_BUTTON}, um eine DITA-Karte oder einen DITA-Projektkontext festzulegen.",fr_FR:"Cliquez ici {$SET_DITAMAP_BUTTON} pour dfinir une carte DITA ou un contexte de projet DITA.",ja_JP:"{$SET_DITAMAP_BUTTON}DITADITA",nl_NL:"Klik hier {$SET_DITAMAP_BUTTON} om een DITA-kaart of een DITA-projectcontext in te stellen.",zh_CN:"{$SET_DITAMAP_BUTTON}DITADITA"},DITA_KEYS_DESCRIPTION_:{en_US:"Insert links and variables defined as DITA keys.",de_DE:"Links und Variablen als DITA-Schlssel einfgen.",fr_FR:"Insrer des liens et des variables dfinis comme cls DITA.",ja_JP:"DITA",nl_NL:"Voeg koppelingen en variabelen gedefinieerd als DITA-sleutels in.",zh_CN:"DITA"},NEW_CIRCLE_:{en_US:"New circle",de_DE:"Neuer Kreis",fr_FR:"Nouveau cercle",ja_JP:"",nl_NL:"Nieuwe cirkel",zh_CN:""},NEW_RECTANGLE_:{en_US:"New rectangle",de_DE:"Neues Rechteck",fr_FR:"Nouveau rectangle",ja_JP:"",nl_NL:"Nieuwe rechthoek",zh_CN:""},SHOW_LAYERS_:{en_US:"Show/hide numbers",de_DE:"Zeige/verstecke Nummerierung",fr_FR:"Afficher/masquer les nombres",ja_JP:" / ",nl_NL:"Getallen tonen/verbergen",zh_CN:"/"},NEW_POLYGON_:{en_US:"New polygon",de_DE:"Neues Polygon",fr_FR:"Nouveau polygone",ja_JP:"",nl_NL:"Nieuwe veelhoek",zh_CN:""},DUPLICATE_:{en_US:"Duplicate",de_DE:"Duplizieren",fr_FR:"Dupliquer",ja_JP:"",nl_NL:"Dupliceer",zh_CN:""},DELETE_:{en_US:"Delete",de_DE:"Lschen",fr_FR:"Supprimer",ja_JP:"",nl_NL:"Wis",zh_CN:""},ZOOM_IN_:{en_US:"Zoom in",de_DE:"Hineinzoomen",fr_FR:"Zoom avant",ja_JP:"",zh_CN:""},ZOOM_OUT_:{en_US:"Zoom out",de_DE:"Herauszoomen",fr_FR:"Zoom arrire",ja_JP:"",nl_NL:"Zoom uit",zh_CN:""},BRING_SHAPE_TO_FRONT_:{en_US:"Bring shape to front",de_DE:"Form nach ganz oben anheben",fr_FR:"Mettre la forme devant",ja_JP:"",nl_NL:"Vorm vooraan zetten",zh_CN:""},BRING_SHAPE_FORWARD_:{en_US:"Bring shape forward",de_DE:"Form anheben",fr_FR:"Avancer la forme",ja_JP:"",nl_NL:"Vorm naar voren brengen",zh_CN:""},SEND_SHAPE_BACKWARD_:{en_US:"Send shape backward",de_DE:"Form absenken",fr_FR:"Reculer la forme",ja_JP:"",nl_NL:"Vorm naar achteren brengen",zh_CN:""},SEND_SHAPE_TO_BACK_:{en_US:"Send shape to back",de_DE:"Form nach ganz unten absenken",fr_FR:"Mettre la forme derrire",ja_JP:"",nl_NL:"Vorm achteraan zetten",zh_CN:""},IMAGE_MAP_EDITOR_:{en_US:"Image Map Editor",de_DE:"Image-Map-Editor",fr_FR:"diteur d'Image Map",ja_JP:"",nl_NL:"Afbeeldingenmapeditor",zh_CN:"MapEditor"},CANNOT_EDIT_IMAGE_MAP_:{en_US:"Cannot edit image map because 'deletion' tracked changes cannot be modified.",de_DE:"Kann Image-Map nicht bearbeiten, weil nderungsverfolgung 'Lschung' nicht bearbeitet werden kann.",fr_FR:"Impossible d'diter l'image map car les suivis des modifications 'suppression' ne peuvent tre modifies.",ja_JP:"",nl_NL:"Kan de afbeeldingenmap niet bewerken omdat bijgehouden 'verwijder'-wijzigingen niet kunnen worden gewijzigd.",zh_CN:""},ARE_YOU_SURE_CONTINUE_:{en_US:"Are you sure you want to continue?",de_DE:"Sind Sie sicher, dass Sie fortfahren mchten?",fr_FR:"tes-vous sr de vouloir continuer ?",ja_JP:"?",nl_NL:"Weet u zeker dat u verder wilt gaan?",zh_CN:""},INSERT_VARIABLE_DEFINITION_:{en_US:"Insert Variable Definition",de_DE:"Variablendefinition einfgen",fr_FR:"Insrer une dfinition de variable",ja_JP:"",nl_NL:"Variabeledefinitie invoegen",zh_CN:""},DEFINE_VARIABLE_TOOLTIP_:{en_US:"Define Variable (as DITA Key)",de_DE:"Variable (als DITA-Schlssel) definieren",fr_FR:"Dfini une variable (comme cl DITA)",ja_JP:" (DITA )",nl_NL:"Variabele definiren (als DITA-sleutel)",zh_CN:"DITA"},DEFINE_VARIABLE_:{en_US:"Define Variable",de_DE:"Variable definieren",fr_FR:"Dfinir une variable",ja_JP:"",nl_NL:"Variabele definiren",zh_CN:""},VALUE_:{en_US:"Value",de_DE:"Wert",fr_FR:"Valeur",ja_JP:"",nl_NL:"Waarde",zh_CN:""},BASIC_MODE_NAME_:{en_US:"View Topic References",de_DE:"Zeige Topic-Referenzen",fr_FR:"Voir les Topic References",ja_JP:"",nl_NL:"Onderwerpverwijzingen weergeven",zh_CN:""},BASIC_MODE_DESCR_:{en_US:"Display topic references relative to the current map",de_DE:"Zeige Topic-Referenzen relativ zur aktuellen Map",fr_FR:"Afficher les rfrences des topics par rapport  la map actuelle",ja_JP:"",nl_NL:"Onderwerpverwijzingen weergeven die betrekking hebben op de huidige map",zh_CN:""},TOPIC_TITLES_MODE_NAME_:{en_US:"View Topic Titles",de_DE:"Zeige Topic-Titel",fr_FR:"Voir les Topic Titles",ja_JP:"",nl_NL:"Onderwerptitels weergeven",zh_CN:""},TOPIC_TITLES_MODE_DESCR_:{en_US:"Display topic titles and references",de_DE:"Zeige Topic-Titel und Referenzen",fr_FR:"Afficher les titres des topics et les rfrences",ja_JP:"",nl_NL:"Onderwerptitels en -verwijzingen weergeven",zh_CN:""},TOPIC_CONTENT_MODE_NAME_:{en_US:"View Topic Content",de_DE:"Zeige Topic-Inhalt",fr_FR:"Voir le Topic Content",ja_JP:"",nl_NL:"Onderwerpinhoud weergeven",zh_CN:""},TOPIC_CONTENT_MODE_DESCR_:{en_US:"Display all topics with their content expanded",de_DE:"Zeige alle Topics mit ihrem erweiterten Inhalt",fr_FR:"Afficher tous les topics avec leur contenu",ja_JP:"",nl_NL:"Alle onderwerpen weergeven met de inhoud uitgevouwen",zh_CN:""},PARENT_:{en_US:"Parent",de_DE:"Eltern",ja_JP:"",nl_NL:"Bovenliggend",zh_CN:""},FOLDING_:{en_US:"Folding",de_DE:"Falten",fr_FR:"Pliage",ja_JP:"",nl_NL:"In-/uitvouwen",zh_CN:""},EDIT_ATTRIBUTE_:{en_US:"Edit Attribute",de_DE:"Attribut bearbeiten",fr_FR:"diter l'attribut",ja_JP:"",nl_NL:"Attribuut bewerken",zh_CN:""},REMOVE_ATTRIBUTE_:{en_US:"Remove Attribute",de_DE:"Attribut entfernen",fr_FR:"Supprimer l'attribut",ja_JP:"",nl_NL:"Attribuut verwijderen",zh_CN:""},ENTER_THE_ATTRIBUTE_NAME_:{en_US:"Enter the attribute name",de_DE:"Attributnamen eingeben",fr_FR:"Entrer le nom de l'attribut",ja_JP:"",nl_NL:"Voer attribuutnaam in",zh_CN:""},DOCUMENT_SAVED_:{en_US:"Document saved.",de_DE:"Dokument gespeichert.",fr_FR:"Document enregistr.",ja_JP:"",nl_NL:"Document opgeslagen.",zh_CN:""},DOCUMENT_COULD_NOT_BE_SAVED_:{en_US:"Document could not be saved",de_DE:"Dokument konnte nicht gespeichert werden",fr_FR:"Impossible d'enregistrer le document",ja_JP:"",nl_NL:"Document kan niet worden opgeslagen",zh_CN:""},ERROR_SAVING_DOCUMENT_:{en_US:"Error saving document: ",de_DE:"Fehler beim Speichern des Dokuments: ",fr_FR:"Erreur lors de l'enregistrement du document : ",ja_JP:" ",nl_NL:"Fout bij opslaan van document ",zh_CN:" "},RETRY_:{en_US:"Retry",de_DE:"Erneut versuchen",fr_FR:"Ressayer",ja_JP:"",nl_NL:"Opnieuw proberen",zh_CN:""},SAVE_FAILED_LONG_DESC_:{en_US:"Failed to save your changes.",de_DE:"Speichern Ihrer nderungen fehlgeschlagen.",fr_FR:"chec de la sauvegarde de vos modifications.",ja_JP:"",nl_NL:"Opslaan van uw wijzigingen is mislukt.",zh_CN:""},FILE_SAVE_AS_:{en_US:"Save as",de_DE:"Datei speichern unter",fr_FR:"Enregistrer sous",ja_JP:"",nl_NL:"Bewaar als",zh_CN:""},AUTOSAVE_FAILED_RETRY_MSG_:{en_US:"Retry saving the document to prevent losing your current changes.",de_DE:"Speichern des Dokuments erneut versuchen, um zu Verhindern, dass Ihre aktuellen nderungen verloren gehen.",fr_FR:"Ressayez d'enregistrer le document pour prvenir la perte de vos modifications actuelles.",ja_JP:"",nl_NL:"Probeer het document opnieuw op te slaan om te voorkomen dat uw huidige wijzigingen verloren gaan.",zh_CN:""},AUTOSAVE_FAILED_ALTERNATIVES_:{en_US:"If retry fails, try one of the following actions to save your changes:",de_DE:"Wenn der erneute Versuch fehlschlgt, versuchen Sie eine der folgenden Aktionen, um Ihre nderungen zu speichern:",fr_FR:"Si la tentative choue, essayez une des actions suivantes pour enregistrer vos modifications:",ja_JP:"",nl_NL:"Als de nieuwe poging mislukt, probeert u een van de volgende acties om uw wijzigingen op te slaan:",zh_CN:""},AUTOSAVE_FAILED_MSG_:{en_US:"Automatic save failed.",de_DE:"Automatisches Speichern fehlgeschlagen.",fr_FR:"chec de la sauvegarde automatique.",ja_JP:"",nl_NL:"Automatisch opslaan is mislukt.",zh_CN:""},AUTOSAVE_REFERENCES_FAILED_MSG_:{en_US:"The modifications made to the following references could not be saved:",de_DE:"Die an den folgenden Referenzen durchgefhrten nderungen konnten nicht gespeichert werden:",fr_FR:"Les modifications apportes aux rfrences suivantes n'ont pas pu tre sauvegardes :",ja_JP:":",nl_NL:"De aangebrachte wijzigingen aan de volgende verwijzingen konden niet worden opgeslagen:",zh_CN:":"},SHOW_DETAILS_:{en_US:"Show Details",de_DE:"Zeige Details",fr_FR:"Afficher les dtails",ja_JP:"",nl_NL:"Details weergeven",zh_CN:""},DOCUMENT_RELOADED_BECAUSE_SESSION_EXPIRED_:{en_US:"Editing Session Refreshed",de_DE:"Bearbeitungssitzung aktualisiert",fr_FR:"Session d'dition rafrachie",ja_JP:"",nl_NL:"Bewerkingssessie vernieuwd",zh_CN:""},USER_LEAVE_WARNING_:{en_US:"You have unsaved content in the document. The modified content will be discarded if you navigate away from this page without saving.",de_DE:"Das Dokument enthlt ungespeicherte nderungen. Die nderungen werden verloren gehen, wenn Sie diese Seite ohne zu Speichern verlassen.",fr_FR:"Vous avez du contenu non enregistr dans le document. Le contenu modifi sera perdu si vous naviguez en dehors de cette page sans sauvegarder.",ja_JP:"",nl_NL:"Het document bevat niet-opgeslagen content. De wijzigingen aan de content wordt verwijderd als u de pagina verlaat zonder op te slaan.",zh_CN:""},DOCUMENT_OPENED_AS_READ_ONLY_:{en_US:"The document is read-only.",de_DE:"Das Dokument ist schreibgeschtzt.",fr_FR:"Le document est en lecture seule.",ja_JP:"",nl_NL:"Het document is alleen-lezen.",zh_CN:""},READ_ONLY_:{en_US:"Read-only",de_DE:"Nur-Lesen",fr_FR:"Lecture seule",ja_JP:"",nl_NL:"Alleen lezen",zh_CN:""},DISCONNECT_:{en_US:"Disconnect",de_DE:"Trennen",fr_FR:"Dconnexion",ja_JP:"",nl_NL:"Verbinding verbreken",zh_CN:""},UNSAVED_CHANGES_WILL_BE_LOST_:{en_US:"All your unsaved changes will be lost",de_DE:"Alle ungespeicherten nderungen werden verloren gehen",fr_FR:"Toutes vos modifications non enregistres seront perdues",ja_JP:"",nl_NL:"Alle niet-opgeslagen wijzigingen gaan verloren",zh_CN:""},DISCONNECT_CONFIRMATION_:{en_US:"Are you sure you want to disconnect?",de_DE:"Mchten Sie wirklich trennen?",fr_FR:"tes-vous sr de vouloir vous dconnecter ?",ja_JP:"",nl_NL:"Weet u zeker dat u de verbinding wilt verbreken?",zh_CN:""},HELP_:{en_US:"Help",de_DE:"Hilfe",fr_FR:"Aide",ja_JP:"",nl_NL:"Hulp",zh_CN:""},OPEN_USER_MANUAL_:{en_US:"Open the user manual",de_DE:"ffne das Benutzerhandbuch",fr_FR:"Ouvrir le manuel utilisateur",ja_JP:"",nl_NL:"De handleiding openen",zh_CN:""},GENERAL_:{en_US:"General",de_DE:"Allgemein",fr_FR:"Gnral",ja_JP:"",nl_NL:"Algemeen",zh_CN:""},MORE_ACTIONS_:{en_US:"More...",de_DE:"Mehr...",fr_FR:"Plus...",ja_JP:"...",nl_NL:"Meer...",zh_CN:"..."},INVALID_XML_OPENED_AS_PLAIN_TEXT_:{en_US:"The content of this file is not well-formed XML. Therefore, it was opened in a plain text editor.",de_DE:"Der Inhalt dieser Datei ist nicht XML-wohlgeformt. Daher wurde sie im Klartexteditor geffnet.",fr_FR:"Le contenu de ce fichier n'est pas un XML bien form. Par consquent, il a t ouvert dans un diteur de texte brut.",ja_JP:" XML   ",nl_NL:"De inhoud van dit bestand heeft niet de juiste XML-vorm. Het bestand is daarom geopend in een editor voor tekst zonder opmaak.",zh_CN:""},PREFERENCES_FROM_DROPDOWN_:{en_US:"Preferences...",de_DE:"Einstellungen...",fr_FR:"Prfrences...",ja_JP:"...",nl_NL:"Voorkeuren...",zh_CN:"..."},PREFERENCES_:{en_US:"Preferences",de_DE:"Einstellungen",fr_FR:"Prfrences",ja_JP:"",nl_NL:"Voorkeuren",zh_CN:""},"A11Y_SETTING_":{en_US:"Enable accessibility optimization",de_DE:"Barrierefreiheitsoptimierungen ein",fr_FR:"Optimisation d'accessibilit active",ja_JP:"",nl_NL:"Toegankelijkheidsoptimalisatie aan",zh_CN:""},TAGS_DISPLAY_MODE_:{en_US:"Tags display mode",de_DE:"Tags-Anzeigemodus",fr_FR:"Mode d'affichage des balises",ja_JP:"",nl_NL:"Tags weergavemodus",zh_CN:""},ENABLE_SPELLCHECKING_:{en_US:"Enable automatic spell checking",de_DE:"Automatische Rechtschreibprfung aktivieren",fr_FR:"Activer la vrification orthographique automatique",ja_JP:"",nl_NL:"Automatische spellingcontrole inschakelen",zh_CN:""},LANGUAGE_:{en_US:"Language",de_DE:"Sprache",fr_FR:"Langue",ja_JP:"",nl_NL:"Taal",zh_CN:""},PAGE_RELOAD_REQUIRED_:{en_US:"Page reload required",de_DE:"Bitte laden Sie die Seite neu",fr_FR:"Veuillez actualiser la page",ja_JP:"",nl_NL:"Pagina verversen noodzakelijk",zh_CN:""},CHANGE_TRACKING_COLORS_:{en_US:"Change tracking colors",de_DE:"nderungsverfolgungsfarben",fr_FR:"Couleurs du suivi des modifications",ja_JP:"",nl_NL:"Kleuren voor bijhouden van wijzigen",zh_CN:""},CHANGE_TRACKING_COLORS_ONE_PER_AUTHOR_:{en_US:"Different color for each author",de_DE:"Unterschiedliche Farbe fr jeden Autor",fr_FR:"Une couleur diffrente pour chaque auteur",ja_JP:"",nl_NL:"Voor elke auteur een andere kleur",zh_CN:""},CHANGE_TRACKING_COLORS_ONE_PER_CHANGE_TYPE_:{en_US:"Green for insertions, red for deletions",de_DE:"Grn fr Einfgungen, Rot fr Lschungen",fr_FR:"Vert pour les insertions, rouge pour les suppressions",ja_JP:"",nl_NL:"Groen voor toevoegingen, rood voor verwijderingen",zh_CN:""},FONT_SIZE_:{en_US:"Font Size",de_DE:"Schriftgre",fr_FR:"Taille de police",ja_JP:"",nl_NL:"Lettertypegrootte",zh_CN:""},SMALL_:{en_US:"Small",de_DE:"Klein",fr_FR:"Petite",ja_JP:"",nl_NL:"Klein",zh_CN:""},MEDIUM_:{en_US:"Medium",de_DE:"Mittel",fr_FR:"Moyenne",ja_JP:"",nl_NL:"Middel",zh_CN:""},LARGE_:{en_US:"Large",de_DE:"Gro",fr_FR:"Grande",ja_JP:"",nl_NL:"Groot",zh_CN:""},MORE_DETAILS_:{en_US:"More details",de_DE:"Weitere Details",fr_FR:"Plus de dtails",ja_JP:"",nl_NL:"Meer details",zh_CN:""},THE_DOCUMENT_IS_VALID_:{en_US:"The document is valid",de_DE:"Dieses Dokument ist gltig.",fr_FR:"Le document est valide.",ja_JP:"",nl_NL:"Document is valide.",zh_CN:""},SEE_MORE_:{en_US:"See more",de_DE:"Mehr anzeigen",fr_FR:"Voir plus",ja_JP:"",nl_NL:"Meer weergeven",zh_CN:""},SEE_LESS_:{en_US:"See less",de_DE:"Weniger anzeigen",fr_FR:"Voir moins",ja_JP:"",nl_NL:"Minder weergeven",zh_CN:""},QUICK_FIX_:{en_US:"Quick Fix",de_DE:"Schnellbehebung",fr_FR:"Solution rapide",ja_JP:"",nl_NL:"Snelle oplossing",zh_CN:""},VALIDATION_:{en_US:"Validation",de_DE:"Validierung",ja_JP:"",nl_NL:"Validatie",zh_CN:""},USING_DITA_MAP_:{en_US:"Using root map {$DITAMAP_FILENAME}",de_DE:"Verwendete Root-Map {$DITAMAP_FILENAME}",fr_FR:"Utilise la map racine {$DITAMAP_FILENAME}",ja_JP:"{$DITAMAP_FILENAME}",nl_NL:"Hoofd-map {$DITAMAP_FILENAME} gebruiken",zh_CN:"{$DITAMAP_FILENAME}"},USING_DITA_CONTEXT_:{en_US:"Using '{$CONTEXT}' context",de_DE:"Verwendung des '{$CONTEXT}' Kontexts",fr_FR:"Utilisation du contexte '{$CONTEXT}'",ja_JP:"'{$CONTEXT}'",nl_NL:"Gebruikmakend van '{$CONTEXT}' context",zh_CN:"'{$CONTEXT}'"},NO_DITA_CONTEXT_:{en_US:"No DITA Context selected.",de_DE:"Kein DITA-Kontext ausgewhlt.",fr_FR:"Aucun contexte DITA slectionn.",ja_JP:"DITA",nl_NL:"Geen DITA-context geselecteerd.",zh_CN:"DITA"},NO_DITA_MAP_:{en_US:"No root map selected.",de_DE:"Keine Root-Map ausgewhlt.",fr_FR:"Aucune map racine slectionne.",ja_JP:"",nl_NL:"Geen rootmap geselecteerd.",zh_CN:""},INVALID_URL:{en_US:"Invalid URL",de_DE:"Ungltige URL",fr_FR:"URL invalide",ja_JP:"URL",nl_NL:"Ongeldige URL",zh_CN:"URL"},ATTRIBUTES_:{en_US:"Attributes",de_DE:"Attribute",fr_FR:"Attributs",ja_JP:"",nl_NL:"Attributen",zh_CN:""},ACCEPT_:{en_US:"Accept",de_DE:"Akzeptieren",fr_FR:"Accepter",ja_JP:"",nl_NL:"Accepteer",zh_CN:""},ADD_ATTRIBUTE_BUTTON_:{en_US:"Add Attribute",de_DE:"Attribut einfgen",fr_FR:"Ajouter un attribut",ja_JP:"",nl_NL:"Attribuut toevoegen",zh_CN:""},ATTRIBUTE_:{en_US:"Attribute",de_DE:"Attribut",fr_FR:"Attribut",ja_JP:"",nl_NL:"Attribuut",zh_CN:""},ADD_:{en_US:"Add",de_DE:"Hinzufgen",fr_FR:"Ajouter",ja_JP:"",nl_NL:"Voeg toe",zh_CN:""},MARKUP_:{en_US:"Markup",de_DE:"Auszeichnung",fr_FR:"Balisage",ja_JP:"",nl_NL:"Opmaak",zh_CN:""},WHITESPACES_:{en_US:"Whitespaces",de_DE:"Leerzeichen",fr_FR:"Espaces",ja_JP:"",nl_NL:"Witruimtes",zh_CN:""},USE_EXPLICIT_FILTERS_:{en_US:"Alternatively you can use {$EXPLICIT_FILTERS} for a more fine grained control.",de_DE:"Alternativ knnen Sie {$EXPLICIT_FILTERS} fr eine bessere Kontrolle verwenden.",fr_FR:"Vous pouvez aussi utiliser {$EXPLICIT_FILTERS} pour avoir un contrle plus prcis.",ja_JP:"{$EXPLICIT_FILTERS}",nl_NL:"U kunt eventueel ook {$EXPLICIT_FILTERS} gebruiken voor nauwkeurigere controle.",zh_CN:"{$EXPLICIT_FILTERS}"},EXPLICIT_FILTERS_:{en_US:"explicit filters",de_DE:"Explizite Filter",fr_FR:"filtres explicites",ja_JP:"",nl_NL:"expliciete filters",zh_CN:""},TYPE_WORD_TO_FILTER_:{en_US:"Type any word to filter review items.",de_DE:"Um berprfungseintrge zu filtern, geben Sie irgendein Wort ein.",fr_FR:"Taper un mot pour filtrer les lments de rvision.",ja_JP:"",nl_NL:"Typ een woord om redigeeritems te filteren.",zh_CN:""},EXAMPLE_USAGE_:{en_US:"Example usage: ",de_DE:"Anwendungsbeispiel: ",fr_FR:"Exemple d'utilisation : ",ja_JP:" ",nl_NL:"Voorbeeld van gebruik: ",zh_CN:" "},FILTER_:{en_US:"Filter",fr_FR:"Filtrer",ja_JP:"",zh_CN:""},SHOW_MY_OPEN_MENTIONS_:{en_US:"Show only open comments where you are mentioned",de_DE:"Zeige nur offene Kommentare, in denen Sie erwhnt worden sind",fr_FR:"N'afficher que les commentaires ouverts o vous tes mentionn",ja_JP:"",nl_NL:"Toon uitsluitend open opmerkingen waarin u wordt genoemd",zh_CN:""},NEW_VALUE_WAS_OLD_VALUE_:{en_US:"{$ATTRIBUTE_NAME}=\"{$NEW_VALUE}\" (was \"{$OLD_VALUE}\")",de_DE:"{$ATTRIBUTE_NAME}=\"{$NEW_VALUE}\" (war \"{$OLD_VALUE}\")",fr_FR:"{$ATTRIBUTE_NAME}=\"{$NEW_VALUE}\" (avant \"{$OLD_VALUE}\")",ja_JP:"{$ATTRIBUTE_NAME}=\"{$NEW_VALUE}\"\"{$OLD_VALUE}\"",nl_NL:"{$ATTRIBUTE_NAME}='{$NEW_VALUE}' (was '{$OLD_VALUE}')",zh_CN:"{$ATTRIBUTE_NAME}={$NEW_VALUE}{$OLD_VALUE}"},SURROUNDED_WITH_:{en_US:"Surrounded with",de_DE:"Umgeben mit",fr_FR:"Encadr par",ja_JP:"",nl_NL:"Omgeven door",zh_CN:""},MARK_AS_OPEN_:{en_US:"Mark as Open",de_DE:"Als geffnet markieren",fr_FR:"Marquer comme ouvert",ja_JP:"",nl_NL:"Markeren als Open",zh_CN:""},MARK_AS_DONE_:{en_US:"Mark as Done",de_DE:"Als gelst markieren",fr_FR:"Marqu comme effectu",ja_JP:"",nl_NL:"Markeren als gereed",zh_CN:""},ACCEPT_ALL_:{en_US:"Accept All",de_DE:"Alle akzeptieren",fr_FR:"Tout accepter",ja_JP:"",nl_NL:"Accepteer alles",zh_CN:""},REJECT_ALL_:{en_US:"Reject All",de_DE:"Alle verwerfen",fr_FR:"Tout rejeter",ja_JP:"",nl_NL:"Weiger alles",zh_CN:""},REVIEW_PANEL_PLACEHOLDER_:{en_US:"To add a comment, select some content and press {$ADD_COMMENT_BUTTON} from the toolbar.",de_DE:"Um einen Kommentar einzufgen, markieren Sie Inhalt und klicken Sie in der Werkzeugleiste auf {$ADD_COMMENT_BUTTON}.",fr_FR:"Pour ajouter un commentaire, slectionner du contenu et appuyer sur {$ADD_COMMENT_BUTTON} dans la barre d'outils.",ja_JP:"{$ADD_COMMENT_BUTTON}",nl_NL:"Als u een opmerking wilt toevoegen, selecteert u enige content en klikt u op {$ADD_COMMENT_BUTTON} op de knoppenbalk.",zh_CN:"{$ADD_COMMENT_BUTTON}"},REVIEW_:{en_US:"Review",de_DE:"Nachverfolgen",fr_FR:"Rvision",ja_JP:"",nl_NL:"Redigeer",zh_CN:""},CHANGE_TRACKING_VIEW_MODES_:{en_US:"Change Tracking View Modes",de_DE:"Nachverfolgungsbetrachtungsmodi ndern",fr_FR:"Modes d'affichage du suivi des modifications",ja_JP:" ",nl_NL:"Modi voor het bekijken van wijzigingen",zh_CN:""},SPELL_MAX_WARN_:{en_US:"Some spelling errors are not shown.",de_DE:"Einige Rechtschreibfehler werden nicht angezeigt.",fr_FR:"Certaines fautes d'orthographe ne sont pas affiches.",ja_JP:"",nl_NL:"Sommige spellingsfouten worden niet weergegeven.",zh_CN:""},NO_SUGGESTIONS_FOUND_:{en_US:"No suggestions found",de_DE:"Keine Vorschlge gefunden",fr_FR:"Aucune suggestion trouve",ja_JP:"",nl_NL:"Geen suggesties gevonden",zh_CN:""},LOADING_SUGGESTIONS_:{en_US:"Loading Suggestions...",de_DE:"Lade Vorschlge...",fr_FR:"Chargements des suggestions...",ja_JP:"...",nl_NL:"Suggesties laden...",zh_CN:"..."},ABOUT_:{en_US:"About",de_DE:"ber",fr_FR:" propos",ja_JP:"",nl_NL:"Over",zh_CN:""},COULD_NOT_LOAD_LICENSE_DETAILS_:{en_US:"Could not load license details.",de_DE:"Konnte Lizenzdetails nicht laden.",fr_FR:"Impossible de charger les dtails de la licence.",ja_JP:"",nl_NL:"Kan licentiedetails niet laden.",zh_CN:""},HIDE_:{en_US:"Hide",de_DE:"Ausblenden",fr_FR:"Masquer",ja_JP:"",nl_NL:"Verbergen",zh_CN:""},SHOW_:{en_US:"Show",de_DE:"Zeige",fr_FR:"Afficher",ja_JP:"",nl_NL:"Toon",zh_CN:""},PRINT_:{en_US:"Print",de_DE:"Drucken",fr_FR:"Imprimer",ja_JP:"",nl_NL:"Druk af",zh_CN:""},PRINT_CURRENT_DOCUMENT_:{en_US:"Print the current document",de_DE:"Aktuelles Dokument drucken",fr_FR:"Imprimer le document actuel",ja_JP:"",nl_NL:"Het huidige document afdrukken",zh_CN:""},SWITCH_TO_AUTHOR_MODE_:{en_US:"Switch to Author mode",de_DE:"Zum Author-Modus wechseln",fr_FR:"Basculer en mode Auteur",ja_JP:"",nl_NL:"Schakel over op de Auteurmodus",zh_CN:""},ERROR_RETRIEVING_XML_CONTENT_:{en_US:"Error retrieving XML content",de_DE:"Fehler beim Abfragen des XML-Inhalts",fr_FR:"Erreur lors de la rcupration du contenu XML",ja_JP:"XML",nl_NL:"Fout bij het ophalen van XML-content",zh_CN:"XML"},CONCURRENT_TEXT_PAGE_READ_ONLY_:{en_US:"The text page is in read-only mode because concurrent editing is active.",de_DE:"Die Textseite ist im Nur-Lese-Modus, da gleichzeitiges Bearbeiten aktiv ist.",fr_FR:"La page de texte est en mode lecture seule car l'dition simultane est active.",ja_JP:"",nl_NL:"De tekstpagina is in alleen-lezen modus omdat gelijktijdige bewerking actief is.",zh_CN:""},TRACK_CHANGES_FORCED_TEXT_PAGE_READ_ONLY_:{en_US:"The text page is in read-only mode because change tracking is enforced.",de_DE:"Die Textseite ist im Nur-Lese-Modus, da die nderungsverfolgung erzwungen wird.",fr_FR:"La page de texte est en mode lecture seule car le suivi des modifications est appliqu.",ja_JP:"",nl_NL:"De tekstpagina is in alleen-lezen modus omdat wijzigingen worden bijgehouden.",zh_CN:""},EDIT_AS_XML_:{en_US:"Edit as XML",de_DE:"Als XML bearbeiten",fr_FR:"diter comme XML",ja_JP:"XML",nl_NL:"Bewerken als XML",zh_CN:"XML"},EDIT_AS_XML_DESCRIPTION_:{en_US:"Edit the document in XML mode",de_DE:"Bearbeite das Dokument im XML-Modus",fr_FR:"diter le document en mode XML",ja_JP:"XML",nl_NL:"Het document bewerken in de XML-modus",zh_CN:"XML"},ACCEPT_CHANGE_:{en_US:"Accept Change(s)",de_DE:"nderung(en) akzeptieren",fr_FR:"Accepter la ou les modification(s)",ja_JP:"",nl_NL:"Accepteer wijziging(en)",zh_CN:""},REVIEW_REJECT_CHANGE_:{en_US:"Reject Change",de_DE:"nderung verwerfen",fr_FR:"Rejeter la modification",ja_JP:"",nl_NL:"Weiger wijziging",zh_CN:""},REJECT_CHANGE_:{en_US:"Reject Change(s)",de_DE:"nderung(en) verwerfen",fr_FR:"Rejeter la ou les modification(s)",ja_JP:"",nl_NL:"Weiger wijziging(en)",zh_CN:""},REJECT_:{en_US:"Reject",de_DE:"Verwerfen",fr_FR:"Rejeter",ja_JP:"",nl_NL:"Weiger",zh_CN:""},ACCEPT_ALL_CHANGES_:{en_US:"Accept all changes",de_DE:"Alle nderungen akzeptieren",fr_FR:"Accepter toutes les modifications",ja_JP:"",nl_NL:"Accepteer alle wijzigingen",zh_CN:""},REJECT_ALL_CHANGES_:{en_US:"Reject all changes",de_DE:"Alle nderungen verwerfen",fr_FR:"Rejeter toutes les modifications",ja_JP:"",nl_NL:"Weiger alle wijzigingen",zh_CN:""},REVIEW_REMOVE_COMMENT_:{en_US:"Remove Comment",de_DE:"Kommentar entfernen",fr_FR:"Supprimer le commentaire",ja_JP:"",nl_NL:"Verwijder opmerking",zh_CN:""},ADD_REPLY_TITLE_:{en_US:"Add Reply",de_DE:"Antwort einfgen",fr_FR:"Ajouter une rponse",ja_JP:"",nl_NL:"Antwoord toevoegen",zh_CN:""},ADD_REPLY_HERE_:{en_US:"Add your reply here:",de_DE:"Fgen Sie hier Ihre Antwort ein:",fr_FR:"Ajouter votre rponse ici :",ja_JP:"",nl_NL:"Voeg hier uw antwoord toe:",zh_CN:""},REPLY_TO_COMMENT_:{en_US:"Reply",de_DE:"Antworten",fr_FR:"Rpondre",ja_JP:"",nl_NL:"Antwoorden",zh_CN:""},DONE_:{en_US:"Done",de_DE:"Fertig",fr_FR:"Fait",ja_JP:"",nl_NL:"Gereed",zh_CN:""},TRACK_CHANGES_TOOLTIP_:{en_US:"Track changes",de_DE:"nderungen verfolgen",fr_FR:"Suivi des modifications",ja_JP:"",nl_NL:"Wijzigingen bijhouden",zh_CN:""},TOGGLE_CHANGE_TRACKING_:{en_US:"Toggle Change Tracking",de_DE:"nderungsverfolgung umschalten",fr_FR:"Activer/Dsactiver le suivi des modifications",ja_JP:"",nl_NL:"Bijhouden van wijzigingen in-/uitschakelen",zh_CN:""},PREVIOUS_MARKER_:{en_US:"Previous Comment or Change",de_DE:"Vorheriger Kommentar oder nderung",fr_FR:"Commentaire ou modification prcdent(e)",ja_JP:"",nl_NL:"Vorige opmerking of wijziging",zh_CN:""},NEXT_MARKER_:{en_US:"Next Comment or Change",de_DE:"Nchster Kommentar oder nderung",fr_FR:"Commentaire ou modification suivant(e)",ja_JP:"",nl_NL:"Volgende opmerking of wijziging",zh_CN:""},ADD_COMMENT_:{en_US:"Add Comment",de_DE:"Kommentar hinzufgen",fr_FR:"Ajouter un commentaire",ja_JP:"",nl_NL:"Voeg opmerking toe",zh_CN:""},COMMENT_:{en_US:"Comment",de_DE:"Kommentar",fr_FR:"Commentaire",ja_JP:"",nl_NL:"Opmerking",zh_CN:""},EDIT_COMMENT_:{en_US:"Edit Comment",de_DE:"Kommentar bearbeiten",fr_FR:"Modifier le commentaire",ja_JP:"",nl_NL:"Bewerk opmerking",zh_CN:""},EDIT_:{en_US:"Edit",de_DE:"Bearbeiten",fr_FR:"diter",ja_JP:"",nl_NL:"Wijzig",zh_CN:""},EDIT_ATTRIBUTES_:{en_US:"Edit Attributes",de_DE:"Attribute bearbeiten",fr_FR:"diter les attributs",ja_JP:"",nl_NL:"Bewerk Attributen",zh_CN:""},VALIDATION_PROBLEMS_:{en_US:"Validation Problems",de_DE:"Validierungsprobleme",fr_FR:"Problmes de validation",ja_JP:"",nl_NL:"Validatieproblemen",zh_CN:""},VALIDATION_PROBLEMS_DESCRIPTION_:{en_US:"Show Validation Results",de_DE:"Validierungsergebnisse anzeigen",fr_FR:"Afficher les rsultats de la validation",ja_JP:"",nl_NL:"Validatieresultaten weergeven",zh_CN:""},EDIT_PROFILING_ATTRIBUTES_:{en_US:"Edit Profiling Attributes",de_DE:"Profiling-Attribute bearbeiten",fr_FR:"diter les attributs de profilage",ja_JP:" ",nl_NL:"Wijzig profilering-attributen",zh_CN:""},OPEN_IMAGE_:{en_US:"Open image",de_DE:"Bild ffnen",fr_FR:"Ouvrir l'image",ja_JP:"",nl_NL:"Afbeelding openen",zh_CN:""},DELETE_ELEMENT_:{en_US:"Delete Element",de_DE:"Element lschen",fr_FR:"Supprimer un lement",ja_JP:"",nl_NL:"Element verwijderen",zh_CN:""},DELETE_TAGS_:{en_US:"Delete Element Tags",de_DE:"Element-Tags lschen",fr_FR:"Supprimer les balises de l'lment",ja_JP:"",nl_NL:"Wis element-tags",zh_CN:""},DELETE_TAGS_TOOLTIP_:{en_US:"Delete the current element tags",de_DE:"Aktuelle Element-Tags entfernen",fr_FR:"Supprimer les balises de l'lment actuel",ja_JP:"",nl_NL:"Verwijder huidige elementtags",zh_CN:""},TABLE_:{en_US:"Table",de_DE:"Tabelle",fr_FR:"Tableau",ja_JP:"",nl_NL:"Tabel",zh_CN:""},SELECT_:{en_US:"Select",de_DE:"Auswhlen",fr_FR:"Slectionner",ja_JP:"",nl_NL:"Selecteer",zh_CN:""},ABOUT_ELEMENT_:{en_US:"About Element",de_DE:"ber Element",fr_FR:" propos de l'lment",ja_JP:"",nl_NL:"Over element",zh_CN:""},VALUES_FOUND_IN_DOCUMENT_CONFLICT_:{en_US:"{0} - values found in the document, but not in the set of allowed values",de_DE:"{0} - Werte im Dokument gefunden, aber nicht im Satz der erlaubten Werte",fr_FR:"{0} - valeurs trouves dans le document mais pas dans l''ensemble de valeurs autorises",ja_JP:"{0} - ",nl_NL:"{0}-waarden in het document gevonden, maar niet in de set van toegestane waarden",zh_CN:"{0}-"},UNCKECK_ALL_:{en_US:"Uncheck all",de_DE:"Alle abwhlen",fr_FR:"Tout dcocher",ja_JP:"",nl_NL:"Alles deselecteren",zh_CN:""},TOPIC_CREATED_BUT_NO_INSERT_:{en_US:"DITA topic was created but failed to insert a reference to it in the DITA map.",de_DE:"DITA-Thema wurde erstellt, konnte aber keinen Verweis darauf in die DITA-Karte einfgen.",fr_FR:"Le DITA Topic a t cr mais sa rfrence n'a pas t insr dans la DITA map.",ja_JP:"DITA  DITA ",nl_NL:"DITA-onderwerp is gemaakt, maar invoegen van een verwijzing naar het onderwerp in de DITA-map is mislukt.",zh_CN:"DITADITA"},TOPIC_CREATION_FAILED_:{en_US:"Failed to create new DITA topic.",de_DE:"Es konnte kein neues DITA-Thema erstellt werden.",fr_FR:"chec de la cration d'un nouveau DITA Topic.",ja_JP:" DITA ",nl_NL:"Maken van nieuw DITA-onderwerp is mislukt.",zh_CN:"DITA"},SAVE_CHANGES_:{en_US:"Save Changes",de_DE:"nderungen speichern",fr_FR:"Enregistrer les modifications",ja_JP:"",nl_NL:"Wijzigingen opslaan",zh_CN:""},SAVE_CHANGES_BEFORE_EDITING_TOPIC_CONTENT:{en_US:"You need to save your changes before editing the topic content.",de_DE:"Sie mssen ihre nderungen speichern, bevor Sie den Inhalt des Topics bearbeiten knnen.",fr_FR:"Vous devez enregistrer vos modifications avant de modifier le contenu du topic.",ja_JP:"",nl_NL:"U moet uw wijzigingen opslaan voordat u de onderwerpinhoud bewerkt.",zh_CN:"Topic."},EDIT_TOPIC_CONTENT_:{en_US:"Edit Topic Content",de_DE:"Inhalt des Topics bearbeiten",fr_FR:"Modifier le contenu du topic",ja_JP:"",nl_NL:"Onderwerpinhoud bewerken",zh_CN:"Topic"},EDIT_REFERENCED_TOPIC_CONTENT:{en_US:"Edit the content of the referenced topics.",de_DE:"Inhalt des referenzierten Topics bearbeiten.",fr_FR:"Modifier le contenu des topics rfrencs.",ja_JP:"",nl_NL:"Bewerk de inhoud van de onderwerpen waarnaar wordt verwezen.",zh_CN:"Topic."},TOO_MANY_RESULTS_:{en_US:"Previews are not available when over {$maxResults} results are found. Please refine your search.",de_DE:"Vorschauen sind nicht verfgbar, wenn mehr als {$maxResults} Resultate gefunden wurden. Bitte verfeinern Sie ihre Suche.",fr_FR:"Les aperus ne sont pas disponibles lorsque plus de {$maxResults} rsultats sont trouvs. Veuillez affiner votre recherche.",ja_JP:"{$maxResults} ",nl_NL:"Voorvertoningen zijn niet beschikbaar als meer dan {$maxResults} resultaten zijn gevonden. Verfijn uw zoekopdracht.",zh_CN:"{$Max Reult}"},MOVE_UP_TOOLTIP_:{en_US:"Move Up",de_DE:"Nach oben schieben",fr_FR:"Monter",ja_JP:"",nl_NL:"Omhoog",zh_CN:""},MOVE_DOWN_TOOLTIP_:{en_US:"Move Down",de_DE:"Nach unten schieben",fr_FR:"Descendre",ja_JP:"",nl_NL:"Omlaag",zh_CN:""},ACTION_NOT_SUPPORTED_:{en_US:"The performed action is not supported.",de_DE:"Die durchgefhrte Aktion wird nicht untersttzt.",fr_FR:"L'action effectue n'est pas prise en charge.",ja_JP:"",nl_NL:"De uitgevoerde actie wordt niet ondersteund.",zh_CN:""},LOGOUT_:{en_US:"Log out",de_DE:"Abmeldung",fr_FR:"Dconnexion",ja_JP:"",nl_NL:"Uitloggen",zh_CN:""},LOGOUT_CONFIRMATION_:{en_US:"Are you sure you want to log out?",de_DE:"Sind Sie sicher, dass Sie sich abmelden mchten?",fr_FR:"tes-vous sr de vouloir vous dconnecter ?",ja_JP:"",nl_NL:"Weet u zeker dat u wilt uitloggen?",zh_CN:""},LOGOUT_WARNING_:{en_US:"If you have unsaved changes in this or any other open tabs, they will be lost upon logging out.",de_DE:"Wenn Sie ungespeicherte nderungen in diesem oder einem anderen offenen Tab haben, gehen diese beim Abmelden verloren.",fr_FR:"Si vous avez des modifications non enregistres dans cet onglet ou dans tout autre onglet ouvert, elles seront perdues lors de la dconnexion.",ja_JP:"",nl_NL:"Als u niet-opgeslagen wijzigingen heeft in dit of enig ander geopend tabblad, zullen deze verloren gaan bij het uitloggen.",zh_CN:""},RESOURCE_NOT_FOUND_:{en_US:"The resource could not be found",de_DE:"Die Ressource wurde nicht gefunden",fr_FR:"La ressource ne peut pas tre trouve",ja_JP:"",nl_NL:"Kan de bron niet vinden",zh_CN:""},OPEN_DOCUMENT_:{en_US:"Open Document",de_DE:"Dokument ffnen",fr_FR:"Ouvrir un document",ja_JP:"",nl_NL:"Document openen",zh_CN:""},DASHBOARD_:{en_US:"Dashboard",fr_FR:"Tableau de bord",ja_JP:"",zh_CN:""},GO_TO_ADMIN_PAGE_:{en_US:"Go to Administration Page",de_DE:"Gehe zur Administrationsseite",fr_FR:"Aller  la page d'administration",ja_JP:"",nl_NL:"Naar beheerpagina gaan",zh_CN:""},ADMINISTRATION_PAGE_:{en_US:"Administration Page",de_DE:"Administrationsseite",fr_FR:"Page d'administration",ja_JP:"",nl_NL:"Beheerpagina",zh_CN:""},COULD_NOT_OPEN_FOLDER_:{en_US:"Could not open the ''{0}'' folder.",de_DE:"Konnte nicht das Verzeichnis ''{0}'' ffnen.",fr_FR:"Impossible d''ouvrir le dossier ''{0}''.",ja_JP:"\"{0}\"",nl_NL:"Kan de map ''{0}'' niet openen.",zh_CN:"{0}"},SAVED_:{en_US:"saved",de_DE:"gespeichert",fr_FR:"enregistr",ja_JP:"",nl_NL:"opgeslagen",zh_CN:""},SAVED_LONG_DESC_:{en_US:"All changes were saved.",de_DE:"Alle nderungen wurden gespeichert.",fr_FR:"Toutes les modifications ont t enregistres.",ja_JP:"",nl_NL:"Alle wijzigingen zijn opgeslagen.",zh_CN:""},SAVE_FAILED_:{en_US:"save failed",de_DE:"Speichern fehlgeschlagen",fr_FR:"chec de l'enregistrement",ja_JP:"",nl_NL:"opslaan mislukt",zh_CN:""},SAVING_:{en_US:"saving",de_DE:"speichern",fr_FR:"enregistrement",ja_JP:"",nl_NL:"opslaan",zh_CN:""},SAVING_LONG_DESC_:{en_US:"Saving your changes",de_DE:"Ihre nderungen werden gespeichert",fr_FR:"Enregistrement de vos modifications",ja_JP:"",nl_NL:"Uw wijzigingen worden opgeslagen",zh_CN:""},SCROLL_TOOLBAR_LEFT_:{en_US:"Scroll toolbar to the left",de_DE:"Werkzeugleiste nach links scrollen",fr_FR:"Faire dfiler la barre d'outils vers la gauche",ja_JP:"",nl_NL:"Knoppenbalk naar links schuiven",zh_CN:""},SCROLL_TOOLBAR_RIGHT_:{en_US:"Scroll toolbar to the right",de_DE:"Werkzeugleiste nach rechts scrollen",fr_FR:"Faire dfiler la barre d'outils vers la droite",ja_JP:"",nl_NL:"Knoppenbalk naar rechts schuiven",zh_CN:""},Share_session_save_disabled_cause_:{en_US:"(disabled because only shared editing session\\'s creator is allowed to save)",de_DE:"(deaktiviert, weil nur der Besitzer der geteilten Sitzung diese speichern darf)",fr_FR:"(dsactiv car seul le crateur de la session d'dition partage est autoris  sauvegarder)",ja_JP:"()",nl_NL:"(uitgeschakeld omdat alleen de maker van een gedeelde sessie mag opslaan)",zh_CN:"()"},CREATE_DOCUMENT_:{en_US:"Create Document",de_DE:"Dokument erstellen",fr_FR:"Crer un document",ja_JP:"",nl_NL:"Document maken",zh_CN:""},CHOOSE_TEMPLATE_:{en_US:"Choose Template",de_DE:"Whle Vorlage",fr_FR:"Choisir un modle",ja_JP:"",nl_NL:"Template kiezen",zh_CN:""},IMAGES_BLOCKED_BY_FIREWALL_:{en_US:"Some images were not loaded because of the application's internal firewall. See \"Firewall\" settings from the \"Security\" section on the \"Administration Page\"",de_DE:"Einige Bilder wurden aufgrund der internen Firewall der Anwendung nicht geladen. Siehe \"Firewall\"-Einstellungen im Abschnitt \"Sicherheit\" auf der \"Verwaltungsseite\"",fr_FR:"Certaines images n'ont pas t charges en raison du pare-feu interne de l'application. Voir les paramtres du \"pare-feu\" dans la section \"Scurit\" de la \"Page d'administration\"",ja_JP:"\"\"\"\"\"\"",nl_NL:"Sommige afbeeldingen werden niet geladen vanwege de interne firewall van de applicatie. Zie \"Firewall\" instellingen in de \"Beveiliging\" sectie op de \"Beheerpagina\"",zh_CN:"\"\"\"\"\"\""},DITA_MAP_DOCUMENT_COULD_NOT_BE_SAVED_:{en_US:"DITA map document could not be saved",de_DE:"DITA-Kartendokument konnte nicht gespeichert werden",fr_FR:"Le document DITA map n'a pas pu tre sauvegard",ja_JP:"DITA",nl_NL:"DITA-kaartdocument kon niet worden opgeslagen",zh_CN:"DITA"},ERROR_SAVING_DITA_MAP_DOCUMENT_:{en_US:"Error saving DITA map document: ",de_DE:"Fehler beim Speichern des DITA-Kartendokuments: ",fr_FR:"Erreur lors de l'enregistrement du document DITA : ",ja_JP:"DITA: ",nl_NL:"Fout bij het opslaan van DITA-kaartdocument: ",zh_CN:"DITA "},REMOVE_REFERENCES_:{en_US:"Remove Reference(s)",de_DE:"Referenz(en) entfernen",fr_FR:"Supprimer la (les) rfrence(s)",ja_JP:"",nl_NL:"Verwijzing(en) verwijderen",zh_CN:"(s)"},SET_DITA_MAP_:{en_US:"Set the root DITA map for the current document.",de_DE:"Setzt die DITA-Root-Karte fr das aktuelle Dokument.",fr_FR:"Dfini la DITA Map racine pour le document actuel.",ja_JP:"DITA",nl_NL:"Stel de DITA-rootmap voor het huidige document in.",zh_CN:"DITA"},CHOOSE_DITA_MAP_:{en_US:"Choose root DITA map",de_DE:"Whlen Sie die DITA-Root-Karte aus",fr_FR:"Choisir la DITA Map racine",ja_JP:"DITA",nl_NL:"DITA-rootmap kiezen",zh_CN:"DITA"},OPEN_IN_NEW_TAB:{en_US:"Open in New Tab",de_DE:"ffne in neuem Reiter",fr_FR:"Ouvrir dans un nouvel onglet",ja_JP:"",nl_NL:"Openen op nieuw tabblad",zh_CN:""},UNSAVED_CHANGES:{en_US:"Unsaved Changes",de_DE:"Ungespeicherte nderungen",fr_FR:"Modifications non enregistres",ja_JP:"",nl_NL:"Niet-opgeslagen wijzigingen",zh_CN:""},FILE_HAS_UNSAVED_CHANGES:{en_US:"The currently edited file has unsaved changes",de_DE:"Die bearbeitete Datei hat ungespeicherte nderungen",fr_FR:"Le fichier en cours d'dition a des modifications non enregistres",ja_JP:"",nl_NL:"Het bestand dat momenteel wordt bewerkt, bevat niet-opgeslagen wijzigingen",zh_CN:""},DITA_MAP_LOAD_FAILED:{en_US:"Could not load DITA Map",de_DE:"Kann DITA-Map nicht laden",fr_FR:"Impossible de charger la DITA Map",ja_JP:"DITA ",nl_NL:"Kan DITA Map niet laden",zh_CN:"DITA Map"},CHANGE_ROOT_MAP_DISABLED_:{en_US:"This action for setting the root DITA map for the current document is disabled.",de_DE:"Diese Aktion zum Festlegen der Root-DITA-Karte fr das aktuelle Dokument ist deaktiviert.",fr_FR:"Cette action de dfinition de la DITA map racine pour le document actuel est dsactive.",ja_JP:"DITA",nl_NL:"Deze actie voor het instellen van de root DITA-kaart voor het huidige document is uitgeschakeld.",zh_CN:"DITA"},CHANGE_FILTER_DISABLED_:{en_US:"This action for setting the DITA filter for the current document is disabled.",de_DE:"Diese Aktion zum Festlegen des DITA-Filters fr das aktuelle Dokument ist deaktiviert.",fr_FR:"Cette action de dfinition du filtre DITA pour le document actuel est dsactive.",ja_JP:"DITA",nl_NL:"Deze actie voor het instellen van de DITA-filter voor het huidige document is uitgeschakeld.",zh_CN:"DITA"},DITA_Map:{en_US:"DITA Map",de_DE:"DITA-Map",ja_JP:"DITA "},WEB_AUTHOR_NAME_:{en_US:"Oxygen XML Web Author"},GO_TO_DASHBOARD_:{en_US:"Go to {$APP_NAME} Dashboard",de_DE:"Gehe zum {$APP_NAME} Dashboard",fr_FR:"Aller au tableau de bord de {$APP_NAME}",ja_JP:"{$APP_NAME}",nl_NL:"Naar {$APP_NAME}-dashboard gaan",zh_CN:"{$APP_NAME}"},JUMP_TO_LINE_:{en_US:"Jump to line",de_DE:"Zur Zeile springen",fr_FR:"Aller  la ligne",ja_JP:"",nl_NL:"Naar regel gaan",zh_CN:""},TABLE_JOIN_SPLIT_:{en_US:"Join or split table cells.",de_DE:"Tabellenzellen verbinden oder spalten.",fr_FR:"Fusionner ou fractionner des cellules.",ja_JP:"",nl_NL:"Voeg cellen samen of splits cellen.",zh_CN:""},VIEW_MODE_NAME_:{en_US:"Display Mode",de_DE:"Anzeigemodus",fr_FR:"Mode d'affichage",ja_JP:"",nl_NL:"Weergavemodus",zh_CN:""},SHOW_DITA_MAP_VIEW:{en_US:"Show DITA Map view",de_DE:"Zeige DITA-Map-Ansicht",fr_FR:"Afficher la vue DITA Map",ja_JP:"DITA  ",nl_NL:"DITA Map-weergave tonen",zh_CN:"DITA"},NO_XREF_TARGETS_:{en_US:"No cross reference targets found in the chosen file",de_DE:"Keine Querverweisziele in der gewhlten Datei gefunden",fr_FR:"Aucune cible de rfrence croise trouve dans le fichier choisi",ja_JP:"",nl_NL:"Geen doelkruisverwijzingen gevonden in het gekozen bestand",zh_CN:""},XINCLUDE_:{en_US:"XInclude"},STYLE_:{en_US:"Style",de_DE:"Styl",ja_JP:"",nl_NL:"Stijl",zh_CN:""},CODE_BLOCK_:{en_US:"Code block",de_DE:"Code-Block",fr_FR:"Bloc de code",ja_JP:"",nl_NL:"Codeblok",zh_CN:""},NOTE_:{en_US:"Note",de_DE:"Hinweis",ja_JP:"",nl_NL:"Opmerking",zh_CN:""},CHANGE_ROOT_MAP_DISABLED_IN_CONCURRENT_EDITING_:{en_US:"This action for setting the root DITA map for the current document is disabled because the document is currently part of a concurrent editing session.",de_DE:"Diese Aktion fr die Festlegung der Wurzel-DITA-Map fr das aktuelle Dokument ist deaktiviert, weil das Dokument gerade ein Teil einer aktuellen Bearbeitungssitzung ist.",fr_FR:"Cette action permettant de dfinir la DITA map racine pour le document actuel est dsactive car le document fait actuellement partie d'une session d'dition simultane.",ja_JP:" DITA ",nl_NL:"Deze actie voor het instellen van de DITA rootmap voor het huidige document is uitgeschakeld, omdat het document momenteel onderdeel uitmaakt van een gelijktijdige bewerkingssessie.",zh_CN:"DITA"},TOPIC_REFERENCE_NEW_TOPIC_:{en_US:"Topic Reference (New Topic)",de_DE:"Themenreferenz (Neues Thema)",fr_FR:"Topic Reference (Nouveau Topic)",ja_JP:"",nl_NL:"Onderwerpverwijzing (Nieuw onderwerp)",zh_CN:""}};window.supportedLanguages=[{"code":"en_US","description":"English"},{"code":"de_DE","description":"Deutsch"},{"code":"fr_FR","description":"Franais"},{"code":"ja_JP","description":""},{"code":"nl_NL","description":"Nederlands"},{"code":"zh_CN","description":""}];
(()=>{var Fv=Object.defineProperty;var Uv=(t,o,i)=>o in t?Fv(t,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[o]=i;var $c=(t,o,i)=>(Uv(t,typeof o!="symbol"?o+"":o,i),i);namespace("sync.internal_api");var Ig=class{constructor(o){this.ready_=o,this.services_=new Map}loadServices(o){return this.ready_.then(()=>{var i=this.services_.get(o)||[];return[...i]})}registerService(o,i){var n=this.services_.get(o)||[];n.push(i),this.services_.set(o,n)}},Ch=Ig;sync.internal_api.ServiceLoader=Ig;goog.require("goog.Uri");namespace("sync.util");var G=function(t){this.setUrl(t)};G.EncodedPathUri=function(t){goog.Uri.call(this,t)};goog.inherits(G.EncodedPathUri,goog.Uri);G.EncodedPathUri.prototype.setPath=function(t){G.EncodedPathUri.superClass_.setPath.call(this,t,!1)};G.prototype.setUrl=function(t){this.uri=new G.EncodedPathUri(t)};G.prototype.getUrl=function(){return this.uri.toString()};G.prototype.getUrlParam=function(t){return this.uri.getParameterValue(t)};G.prototype.getPathName=function(){return this.uri.getPath()};G.prototype.setPathName=function(t){this.uri.setPath(t)};G.prototype.getScheme=function(){return this.uri.getScheme()};G.prototype.setScheme=function(t){this.uri.setScheme(t)};G.prototype.getDomain=function(){return this.uri.getDomain()};G.prototype.getPort=function(){return this.uri.getPort()};G.prototype.setDomain=function(t){return this.uri.setDomain(t)};G.prototype.getFolderUrl=function(){var t=this.getPathName();if(t.charAt(t.length-1)==="/")return this.getUrl();var o=new G(this.getUrl());return o.setPathName(this.getParentPath()),o.setFragment(""),o.setQuery(""),o.getUrl()};G.prototype.setFolderPath=function(t){this.setPathName(t+this.getFileName())};G.prototype.getFileName=function(){var t=this.getPathName();return t.substring(t.lastIndexOf("/")+1)};G.prototype.getName=function(){var t=null,o=this.getPathName();if(goog.string.endsWith(o,"/")){var i=o.substring(0,o.length-1);t=i.substring(i.lastIndexOf("/")+1)}else t=this.getFileName();return t};G.prototype.isFolder=function(){return goog.string.endsWith(this.getPathName(),"/")};G.prototype.getExtension=function(){var t="",o=this.getFileName(),i=o.lastIndexOf(".");return i!==-1&&(t=o.substring(i+1)),t};G.prototype.setFileName=function(t){this.setUrl(this.getFolderUrl()+t)};G.prototype.getParentPath=function(){var t=null,o=null,i=this.getPathName(),n=i.split("/");return n.length-1>=0&&(o=n[n.length-1]),(o==null||o==="")&&n.length-2>=0&&(o=n[n.length-2]),o==null||o===""?t=i:t=i.substring(0,i.lastIndexOf(o)),t};G.prototype.getQuery=function(){return this.uri.getQuery()};G.prototype.getUrlParameters=function(){var t={};return this.uri.getQueryData().forEach(function(o,i){t[i]=o}),t};G.prototype.setQuery=function(t,o){return this.uri.setQuery(t,o)};G.prototype.getFragment=function(){return this.uri.getFragment()};G.prototype.getUserInfo=function(){return this.uri.getUserInfo()};G.prototype.setUserInfo=function(t){return this.uri.setUserInfo(t)};G.prototype.setFragment=function(t,o){return this.uri.setFragment(t,o)};G.prototype.equals=function(t){return t instanceof G?this.getUrl()===t.getUrl():!1};G.prototype.equalsIgnoringFragment=function(t){var o=new G(this.getUrl()),i=new G(t.getUrl());return o.setFragment(""),i.setFragment(""),o.getUrl()===i.getUrl()};var E=G;sync.util.Url=G;namespace("sync.api");var Sh="v26.1.0",it=Sh;sync.api.Version=Sh;namespace("sync.api");sync.api.WebappMessage=function(t){this.title=t.title,this.message=t.message,this.type=t.type,this.userGenerated=t.userGenerated,this.url=t.url};sync.api.WebappMessage.SYSTEM_APPLICATION_MESSAGE=-1;sync.api.WebappMessage.CUSTOM_MESSAGE=3;namespace("sync.actions");sync.actions.AttributeEditingAction=function(t,o,i){this.handler_=t,this.buttonClass_=o,this.tooltip=i};sync.actions.AttributeEditingAction.prototype.getButtonClass=function(){return this.buttonClass_||"Edit24"};sync.actions.AttributeEditingAction.prototype.getTooltip=function(){return this.tooltip};sync.actions.AttributeEditingAction.prototype.actionPerformed=function(t,o){this.handler_?this.handler_(t,o):(console.error("The sync.actions.AttributeEditingAction.actionPerformed method should be overridden."),o(t))};namespace("sync.actions");sync.actions.AttributeEditingActionsProvider=function(){};sync.actions.AttributeEditingActionsProvider.prototype.getAction=function(t,o){return null};goog.require("goog.object");namespace("sync.actions");var Nl=function(t){goog.object.extend(this,t)};Nl.prototype.appendToToolbar=function(t,o){for(var i=0;i<this.toolbars.length;i++)this.toolbars[i].name===o&&this.toolbars[i].children.push({type:"action",id:t})};Nl.prototype.removeAction=function(t){for(var o=0;o<this.toolbars.length;o++)this.removeActionFromList_(t,this.toolbars[o].children);this.removeActionFromList_(t,this.contextualItems||[])};Nl.prototype.removeActionFromList_=function(t,o){goog.array.removeAllIf(o,function(i){return i.type==="action"&&i.id===t}),goog.array.forEach(o,function(i){i.type==="list"&&this.removeActionFromList_(t,i.children)},this)};var Co=Nl;sync.actions.ActionsConfig=Nl;goog.require("goog.events.EventTarget");namespace("sync.api");sync.api.Editor=function(){goog.events.EventTarget.call(this)};goog.inherits(sync.api.Editor,goog.events.EventTarget);sync.api.Editor.prototype.getActionsManager=function(){return null};sync.api.Editor.prototype.getChangeTrackingManager=function(){var t=this.getEditingSupport(),o=null;return t&&t.getType()===sync.api.Editor.EditorTypes.AUTHOR&&(o=t.getChangeTrackingManager()),o};sync.api.Editor.prototype.getSelectionManager=function(){var t=this.getEditingSupport();return t&&t.getSelectionManager()};sync.api.Editor.prototype.getHighlightsManager=function(){var t=this.getEditingSupport();return t&&t.getHighlightsManager()};sync.api.Editor.prototype.getSpellChecker=function(){var t=this.getEditingSupport();return t&&t.getSpellChecker()};sync.api.Editor.prototype.getFileServer=function(){return null};sync.api.Editor.prototype.getXmlContent=function(t){console.warn("DEPRECATED method sync.api.Editor.getXmlContent. Use sync.api.Editor.getContent."),this.getContent(t)};sync.api.Editor.prototype.getContent=function(t){var o=this.getEditingSupport();o?o.getContent(t):t(new Error("sync.api.Editor not loaded"))};sync.api.Editor.prototype.getUrl=function(){};sync.api.Editor.prototype.registerEnhancer=function(t,o){};sync.api.Editor.prototype.setDirty=function(t){};sync.api.Editor.prototype.isDirty=function(){};sync.api.Editor.prototype.load=function(t){};sync.api.Editor.prototype.reportFileNotFound=function(){};sync.api.Editor.prototype.reportUnkownLoadingProblem=function(t,o){this.reportUnknownLoadingProblem(t,o)};sync.api.Editor.prototype.reportUnknownLoadingProblem=function(t,o){};sync.api.Editor.prototype.registerAttributeActionsProvider=function(t){};sync.api.Editor.prototype.getEditorType=function(){return this.getEditingSupport()&&this.getEditingSupport().getType()};sync.api.Editor.prototype.getResourceDragHandler=function(){var t=this.getEditingSupport();return t&&t.getResourceDragHandler()};sync.api.Editor.prototype.setReadOnlyState=function(t){};sync.api.Editor.prototype.getReadOnlyState=function(){};sync.api.Editor.prototype.setReadOnlyStripeRenderer=function(t){};sync.api.Editor.EditorTypes={AUTHOR:"author",XML:"xml",MARKDOWN:"markdown",TEXT:"text",IMAGE:"image",DIFF:"diff"};sync.api.Editor.EventTypes={LINK_OPENED:"link_openend",CUSTOM_MESSAGE_RECEIVED:"custom_message",ACTIONS_LOADED:"actions_loaded",DIRTY_STATUS_CHANGED:"dirty_status_changed",DISPOSE:"dispose"};sync.api.Editor.LinkOpenedEvent=function(t,o,i,n){if(goog.events.Event.call(this,sync.api.Editor.EventTypes.LINK_OPENED),this.url=t,this.external=o,this.params=i||{},this.linkTarget=n||sync.api.Editor.LinkOpenedEvent.Target.BLANK,this.forcePageReload=!1,this.$actualUrl=null,o){var r=new E(t).getScheme();r&&!this.isHandledByBrowser_(r)&&(this.$actualUrl="../rest/"+it+"/doc/downloadFile/?fileUrl="+encodeURIComponent(encodeURIComponent(t)))}};goog.inherits(sync.api.Editor.LinkOpenedEvent,goog.events.Event);sync.api.Editor.LinkOpenedEvent.prototype.safeSchemes_=["bitcoin","geo","im","irc","ircs","magnet","mailto","mms","news","nntp","openpgp4fpr","sip","sms","smsto","ssh","tel","urn","webcal","wtai","xmpp"];sync.api.Editor.LinkOpenedEvent.prototype.isHandledByBrowser_=function(t){return t==="http"||t==="https"||this.safeSchemes_.indexOf(t)!==-1||goog.string.startsWith(t,"web+")&&t.length>=5};sync.api.Editor.LinkOpenedEvent.prototype.$setActualUrl=function(t){this.$actualUrl=t};sync.api.Editor.LinkOpenedEvent.Target={SELF:"_self",BLANK:"_blank"};sync.api.Editor.WebappMessageReceived=function(t,o){this.type=sync.api.Editor.EventTypes.CUSTOM_MESSAGE_RECEIVED,this.message=new sync.api.WebappMessage(t),this.context=o};sync.api.Editor.WebappMessageReceived.Context={LOAD:"load",SAVE:"save",SAVE_AS:"save_as",EDITING:"editing",IMAGE:"image",OTHER:"other"};sync.api.Editor.ActionsLoadedEvent=function(t){this.type=sync.api.Editor.EventTypes.ACTIONS_LOADED,this.actionsConfiguration=t};sync.api.Editor.DirtyStatusChangedEvent=function(t){this.type=sync.api.Editor.EventTypes.DIRTY_STATUS_CHANGED,this.isDirty=t};sync.api.Editor.prototype.getEditingSupport=function(){};sync.api.Editor.prototype.createBasicEditingSupport=function(){return null};sync.api.Editor.prototype.loadPreview=function(t,o){return null};sync.api.Editor.prototype.triggerSave=function(t){};var Th=sync.api.Editor;namespace("sync.dom");var bh=function(t){this.message="Stale node with id:"+t,this.stack=new Error().stack},ti=bh;sync.dom.StaleNodeError=bh;namespace("sync.api.dom");var Zc=function(){};Zc.prototype=[];Zc.prototype.item=function(t){return this[t]};var pa=Zc;sync.api.dom.NodeList=Zc;goog.require("goog.functions");namespace("sync.api.dom");var X=function(t){this.doc_=t};X.prototype.getBoundingClientRect=function(){return null};X.prototype.getType=function(){};X.prototype.getNodeName=function(){};X.prototype.getNodeValue=function(){return null};X.prototype.getNamespaceURI=function(){return null};X.prototype.getPrefix=function(){return null};X.prototype.getLocalName=function(){return null};X.prototype.getPreviousSibling=function(){return null};X.prototype.getNextSibling=function(){return null};X.prototype.getFirstChild=function(){return null};X.prototype.getLastChild=function(){return null};X.prototype.getChildren=function(){return new pa([])};X.prototype.getParent=function(){return null};X.prototype.getAttributeNodes=function(){return null};X.prototype.hasChildNodes=function(){return this.getFirstChild()!==null};X.prototype.getOwnerDocument=function(){return this.doc_};X.prototype.getHtmlNode=function(){};X.prototype.compareDocumentPosition=function(t){return this.getHtmlNode().compareDocumentPosition(t.getHtmlNode())};X.prototype.isSameNode=goog.abstractMethod;X.prototype.areChildrenEqual_=function(t){var o=!0,i=this.getChildren(),n=t.getChildren();if(i.length===n.length){for(var r=0;r<i.length;r++)if(!i.item(r).isEqualNode(n.item(r))){o=!1;break}}else o=!1;return o};X.prototype.areAttributesEqual_=function(t){return!0};X.prototype.isEqualNode=function(t){return this.getType()===t.getType()&&this.getNodeName()===t.getNodeName()&&this.getNodeValue()===t.getNodeValue()&&this.getLocalName()===t.getLocalName()&&this.getPrefix()===t.getPrefix()&&this.getNamespaceURI()===t.getNamespaceURI()&&this.areChildrenEqual_(t)&&this.areAttributesEqual_(t)};X.prototype.getFeature=goog.nullFunction;X.prototype.isSupported=goog.functions.FALSE;X.prototype.getUserData=goog.nullFunction;X.prototype.lookupNamespaceURI=function(t){return null};X.prototype.lookupPrefix=function(t){return null};X.prototype.isDefaultNamespace=function(t){return!1};X.prototype.getElementAncestor=function(){for(var t=this.getParent();t&&t.getType()!==goog.dom.NodeType.ELEMENT;)t=t.getParent();return t};X.prototype.getBaseURI=function(){return this.getParent().getBaseURI()};X.prototype.getTextContent=goog.abstractMethod;X.prototype.hasAttributes=function(){var t=this.attributes;return t!==null&&t.length>0};X.prototype.toJSON=function(){return{nodeName:this.nodeName,nodeValue:this.nodeValue,nodeType:this.nodeType,childNodes:this.childNodes,attributes:this.attributes}};Object.defineProperties(X.prototype,{nodeName:{get(){return this.getNodeName()}},nodeValue:{get(){return this.getNodeValue()}},nodeType:{get(){return this.getType()}},parentNode:{get(){return this.getParent()}},childNodes:{get(){return this.getChildren()}},firstChild:{get(){return this.getFirstChild()}},lastChild:{get(){return this.getLastChild()}},previousSibling:{get(){return this.getPreviousSibling()}},nextSibling:{get(){return this.getNextSibling()}},attributes:{get(){return this.getAttributeNodes()}},ownerDocument:{get(){return this.doc_}},localName:{get(){return this.getLocalName()}},prefix:{get(){return this.getPrefix()}},namespaceURI:{get(){return this.getNamespaceURI()}},baseURI:{get(){return this.getBaseURI()}},textContent:{get(){return this.getTextContent()}}});var Dn=X;sync.api.dom.Node=X;namespace("sync.position");var Ah={BEFORE:0,AFTER:1},f=Ah;sync.position.SentinelType=Ah;namespace("sync.util.error");(function(){sync.util.error.reloadPage=function(t){workspace.errorHandler.handleFatalException(t)},sync.util.error.logError=function(t){console.error("Error encountered: ",t)},sync.util.error.serializeException=function(t){var o=tr(msgs.ERROR_)+": "+new Error().stack;if(t instanceof sync.RESTException){var i=JSON.parse(JSON.stringify(t));i.req&&delete i.req.entity,o=JSON.stringify(i)}else t&&(o=JSON.stringify({message:t.message,stacktrace:t.stack}));return o}})();var LE=sync.util.error;namespace("sync");var Ih={STYLESHEET_TITLES:"stylesheet-titles",SENTINELS_DISPLAY_MODE:"sentinels.display.mode",SPELLCHECK_ENABLED:"spellcheck.enabled",SELECTED_LANGUAGE:"selected.language",SELECTED_DASHBOARD_TAB:"selected.dashboard.tab",BREADCRUMB_POSITION:"breadcrumb.position",DISPLAY_DENSITY:"display.density",ACCESSIBILITY_MODE:"accessibility.mode",TAGS_MODE:"tags-mode",CHANGE_TRACKING_COLORS:"change.tracking.colors",CHANGE_TRACKING_COLORS_INS:"change.tracking.colors.ins",CHANGE_TRACKING_COLORS_DEL:"change.tracking.colors.del"},S=Ih;sync.OptionTags=Ih;goog.require("goog.events.EventTarget");namespace("sync");var ho=function(){goog.events.EventTarget.call(this),this.prefix="-oxy-core-",this.optionsCache_=new goog.structs.Map,window.addEventListener("storage",goog.bind(this.dispatchChangesInOtherTab_,this))};goog.inherits(ho,goog.events.EventTarget);goog.addSingletonGetter(ho);ho.prototype.getOption=function(t,o){var i=null;if(this.optionsCache_.containsKey(t))i=this.optionsCache_.get(t);else try{i=localStorage.getItem(this.prefix+t),this.optionsCache_.set(t,i)}catch(n){console.warn("Could not read local storage for key: "+t,n)}return typeof o!="undefined"&&i===null&&(i=o),i};ho.prototype.setOption=function(t,o,i){var n=this.prefix+t,r,s="Could not access local storage for key:";this.optionsCache_.set(t,o);try{r=localStorage.getItem(n)}catch(a){console.warn(s+t,a);return}if(o!==r){try{localStorage.setItem(n,o)}catch(a){console.warn(s+t,a)}i&&this.dispatchEvent(new ho.OptionsChangedEvent(t,r,o))}};ho.prototype.dispatchChangesInOtherTab_=function(t){if(t.storageArea===localStorage&&t.key&&goog.string.startsWith(t.key,this.prefix)){var o=t.key.substring(this.prefix.length);this.optionsCache_.set(o,t.newValue),this.dispatchEvent(new ho.OptionsChangedEvent(o,t.oldValue,t.newValue))}};ho.getEventType_=function(t){return"options_changed"+t};ho.prototype.clear=function(){this.optionsCache_.clear(),localStorage.clear()};ho.prototype.listenOption=function(t,o){return goog.events.listen(this,ho.getEventType_(t),o)};ho.OptionsChangedEvent=function(t,o,i){this.type=ho.getEventType_(t),this.key=t,this.value=i,this.oldValue=o};var k=ho;sync.Options=ho;namespace("sync.api");sync.api.Translation={};sync.api.Translation.getLanguage=function(){return sync.Translation.getLanguage()};sync.api.Translation.addTranslations=function(t){sync.Translation.addTranslations(t)};namespace("sync.options");sync.options.PluginsOptions={};sync.options.ServerOptions={};sync.options.PluginsOptions.clientOptions={};sync.options.ServerOptions.serverOptions={};sync.options.PluginsOptions.getClientOption=function(t){return sync.options.PluginsOptions.clientOptions[t]};sync.options.ServerOptions.getServerOption=function(t){return sync.options.ServerOptions.serverOptions[t]};var VE=sync.options.PluginsOptions;namespace("sync.util.cookieUtils");sync.util.cookieUtils.setCookie=function(t,o,i){var n=new Date;n.setDate(n.getDate()+i),o=escape(o)+(i==null?"":"; expires="+n.toUTCString()),sync.options.ServerOptions.getServerOption("force.cookies.samesite.none")&&(o+="; SameSite=None; Secure");var r=t+"="+o,s=window.location.pathname.match("(.*)/app/[^/]*");s&&(r+=";path="+s[1]),document.cookie=r};sync.util.cookieUtils.getCookie=function(t){var o=document.cookie,i=o.indexOf(" "+t+"=");if(i===-1&&(i=o.indexOf(t+"=")),i===-1)o=null;else{i=o.indexOf("=",i)+1;var n=o.indexOf(";",i);n===-1&&(n=o.length),o=unescape(o.substring(i,n))}return o};var GE=sync.util.cookieUtils;namespace("sync.Translation");sync.Translation.getLanguage=function(){return window.lang||"en_US"};sync.Translation.languageOptionChanged=function(t){sync.Translation.syncLanguageStatus(t.value)};sync.Translation.syncLanguageStatus=function(t){var o=!1;if(t){var i=sync.Translation.isSupportedLanguage(t);if(i){o=!0,window.lang=i,k.getInstance().setOption(S.SELECTED_LANGUAGE,i);var n=30;setTimeout(function(){sync.util.cookieUtils.setCookie(sync.Translation.LANGUAGE_COOKIE,i,n)},0);var r=sync.Translation.getLangAttributeValue(i),s=document.querySelector("html");s.getAttribute("lang")!==r&&s.setAttribute("lang",r)}}return o};sync.Translation.findLanguage=function(){var t=function(){var i=navigator.language||navigator.browserLanguage;return i.toLowerCase().replace("-","_")},o=sync.Translation.syncLanguageStatus;o(sync.util.getURLParameter("lang"))||o(sync.util.cookieUtils.getCookie(sync.Translation.LANGUAGE_COOKIE))||o(k.getInstance().getOption(S.SELECTED_LANGUAGE))||o(t())||o("en_US")};sync.Translation.TRANSLATION_FAILED_PLACEHOLDER="undefined";var wh=window.location.href.includes("&-oxy-track-used-message=true"),Dh=new Set;sync.Translation.stopMessageTracking=function(){wh=!1};sync.Translation.getTrackedMessages=function(){return Dh};sync.Translation.tr=function(t,o,i){if(!o)return sync.Translation.TRANSLATION_FAILED_PLACEHOLDER;wh&&Dh.add(o);var n=t;if(typeof o=="string")return n(o,i);var r="";if(!window.lang){sync.Translation.findLanguage(),k.getInstance().listenOption(S.SELECTED_LANGUAGE,sync.Translation.languageOptionChanged);var s=document.querySelector("#editor-frame-wrapper");s&&s.setAttribute("lang",sync.Translation.getLangAttributeValue(sync.util.getURLParameter("spell.check.language")))}return r=o[window.lang]||o.en_US||sync.Translation.TRANSLATION_FAILED_PLACEHOLDER,n(r,i)};sync.Translation.simpleFormat=function(t,o){return o&&Object.keys(o).forEach(function(i){var n="{"+i+"}";if(n!==o[i])do t=t.replace(n,o[i]);while(t.indexOf(n)!==-1)}),t};sync.Translation.docFragmentFormat=function(t,o){var i=document.createDocumentFragment(),n=goog.dom.createTextNode;if(o){var r=[];for(var s in o)o.hasOwnProperty(s)&&typeof o[s]!="string"&&!o[s].nodeType&&(r.push({start:s,end:o[s].end,node:o[s].node}),delete o[s]);var a=Object.keys(o).map(function(c){return c.replace(/\$/g,"\\$")}).join("|"),l=t.split(new RegExp("{("+a+")}","g"));l.map(function(c){var d=o[c];return d?d.nodeType>0?d.cloneNode(!0):n(d):n(c)}).forEach(function(c){i.appendChild(c)}),r.length>0&&sync.Translation.replaceComplexParams(i,r)}else i.appendChild(n(t));return i};sync.Translation.replaceComplexParams=function(t,o){var i,n;for(n=0;n<o.length;n++)for(i=0;i<t.childNodes.length;i++){var r=t.childNodes[i],s=o[n];sync.Translation.docFragmentComplexFormat(r,s.start,s.end,s.node)}};sync.Translation.docFragmentComplexFormat=function(t,o,i,n){var r=null,s;if(t.childNodes.length>0)for(s=0;s<t.childNodes.length;s++){var a=t.childNodes[s],l=sync.Translation.docFragmentComplexFormat(a,o,i,n);l&&t.replaceChild(l,a)}else{var c=t.textContent,d=o.replace(/\$/g,"\\$"),g=i.replace(/\$/g,"\\$");if(c=c.split(new RegExp("{("+d+"|"+g+")}","g")),c.length>1){for(r=document.createDocumentFragment(),s=0;s<c.length;s++)c[s]===o&&(n.textContent=c[s+1],c.splice(s,3),r.appendChild(n.cloneNode(!0))),r.appendChild(goog.dom.createTextNode(c[s]));t.parentNode.replaceChild(r,t)}}};sync.Translation.captionAttr="oxycaption";sync.Translation.LANGUAGE_COOKIE="oxy_lang";window.tr=sync.Translation.tr.bind(0,sync.Translation.simpleFormat);window.trDom=sync.Translation.tr.bind(0,sync.Translation.docFragmentFormat);sync.Translation.supportedLanguages=window.supportedLanguages;sync.Translation.addTranslations=function(t){for(var o in t)if(t.hasOwnProperty(o)){if(typeof t[o]=="string")msgs[o]=t[o];else for(var i in t[o])if(t[o].hasOwnProperty(i)){var n=sync.Translation.isSupportedLanguage(i);n&&(msgs[o]||(msgs[o]={}),msgs[o][n]=t[o][i])}}};sync.Translation.isSupportedLanguage=function(t){var o=sync.Translation.supportedLanguages;if(t&&o&&o.length!==0){for(var i of o)if(i.code.toLowerCase().indexOf(t.toLowerCase())!==-1)return i.code}return console.warn("language format invalid",t),null};sync.Translation.getLangAttributeValue=function(t){var o="en";return t&&t.length>1&&(o=t.substring(0,2)),o};var JE=sync.Translation;goog.require("goog.asserts");goog.require("goog.Promise");namespace("sync.rest");sync.RESTException=function(t,o,i){try{var n=JSON.parse(o);this.type=n.type,this.statusCode=t,this.message=n.message,this.req=i}catch{this.type="error"}};sync.RESTException.prototype.toString=function(){return JSON.stringify(this)};sync.RESTException.prototype.isServerProblem=function(){return this.statusCode>=500&&this.statusCode<600||this.statusCode===0};sync.RESTException.prototype.isSessionExpired=function(){return this.type==="session_expired_error"};sync.RESTException.prototype.isUserActionRequired=function(){return this.type==="user_action_required_error"};sync.RESTException.prototype.isCausedByReferencesIOErrors=function(){return this.type==="references_io_errors"};sync.RESTException.prototype.isUserReadableError=function(){return this.type==="user_error"};sync.RESTException.prototype.getUserActionRequiredMessage=function(){return JSON.parse(this.message)};sync.RESTException.prototype.getUserReadableErrorMessage=function(){return this.isUserReadableError()?this.message:null};sync.rest.oldExecute_=null;sync.rest.OXY_UNDEFINED_CONTENT_TYPE="oxy-set-undefined-header";sync.rest.CSRF_HEADER="X-Requested-With";sync.rest.CSRF_HEADER_MAP={"X-Requested-With":"WA"};sync.rest.patchRequest=function(t){t.contentTypeHeader===sync.rest.OXY_UNDEFINED_CONTENT_TYPE&&t.setContentType(void 0),t.addHeader(sync.rest.CSRF_HEADER,"WA")};sync.rest.callOldAsync_=function(t,o,i){var n=i||sync.util.error.reloadPage,r=function(s,a,l){if(a.onreadystatechange=null,s>=400&&s<600&&i)n.call(null,new sync.RESTException(s,a.responseText,t));else if(s>=500&&s<600&&!i)n.call(null,new sync.RESTException(s,a.responseText,t));else if(s==0){var c=JSON.stringify({type:"net_error",message:tr(msgs.SERVER_CANNOT_BE_REACHED_RELOAD_)});n.call(null,new sync.RESTException(s,c,t))}else try{o.call(null,s,a,l)}catch(d){n.call(null,d,t.uri)}};try{sync.rest.patchRequest(t),sync.rest.oldExecute_.call(t,r)}catch(s){n.call(null,s,t.uri)}};sync.rest.callOldSync_=function(t,o){var i=null;if(sync.rest.patchRequest(t),sync.rest.oldExecute_.call(t,function(n,r,s){n>=400&&n<600?i=new sync.RESTException(n,r.responseText,t):o(n,r,s)}),i)throw i};sync.rest.initAutoRecovery=function(){goog.asserts.assert(typeof REST!="undefined"),REST.apiURL=location.href.match("(.*)/app/[^/]*")[1],sync.rest.oldExecute_=REST.Request.prototype.execute,REST.Request.prototype.execute=function(t){this.async?sync.rest.callOldAsync_(this,t):sync.rest.callOldSync_(this,t)}};sync.rest.callRestAsyncWithHandling=function(t,o,i){sync.rest.callAsyncWithValidation_(t,o,i)};sync.rest.callAsyncWithValidation_=function(t,o,i){var n=REST.Request.prototype.execute;REST.Request.prototype.execute=function(r){goog.asserts.assert(this.async,"The REST call should be asynchronous!"),sync.rest.callOldAsync_(this,r,i)};try{t.call(null,o)}finally{REST.Request.prototype.execute=n}};sync.rest.callAsync=function(t,o){return sync.rest.callAsyncInternal_(t,o).thenCatch(i=>{if(i.statusCode===400&&i.type==="session-invalidated")return sync.util.promise.delayPromise(2e3).then(()=>sync.rest.callAsync(t,o));throw i})};sync.rest.callAsyncInternal_=function(t,o){var i;return goog.isString(t)?(i=window,goog.array.forEach(t.split("."),function(n){i=i[n]})):i=t,new goog.Promise(function(n,r){o.$callback=function(s,a,l){n(l)},sync.rest.callAsyncWithValidation_(i,o,r)})};sync.rest.callAsyncNative=function(t,o){return sync.util.promise.nativePromise(sync.rest.callAsync(t,o))};sync.rest.getSyncMethod=function(t){var o=window;return goog.array.forEach(t.split("."),function(i){o=o[i]}),o};sync.rest.getRestApiUrl=function(t,o){var i=sync.rest.getSyncMethod(t),n,r=REST.Request.prototype.execute;REST.Request.prototype.execute=function(){var s=this.uri,a;for(a=0;a<this.matrixParameters.length;a++)s+=";"+REST.Encoding.encodePathParamName(this.matrixParameters[a][0]),s+="="+REST.Encoding.encodePathParamValue(this.matrixParameters[a][1]);for(a=0;a<this.queryParameters.length;a++)a===0?s+="?":s+="&",s+=REST.Encoding.encodeQueryParamNameOrValue(this.queryParameters[a][0]),s+="="+REST.Encoding.encodeQueryParamNameOrValue(this.queryParameters[a][1]);n=s};try{i(o)}finally{REST.Request.prototype.execute=r}return n};var oC=sync.rest;namespace("sync.view");sync.view.NodeRenderer={};sync.view.NodeRenderer.config=null;sync.view.NodeRenderer.loadFromFramework=function(t,o){return t?(t=sync.util.dotEncodeURIComponent(t),sync.rest.callAsync("RESTContentCompletionConfiguration.getRenderingConfiguration",{frameworkId:t}).then(goog.bind(function(i){return o.isDisposed()?goog.Promise.resolve():(sync.view.NodeRenderer.config=i.renderingConfig,i.restrictedAttrs||{})},this)).thenCatch(function(i){o.isDisposed()||sync.util.error.logError(i)})):goog.Promise.resolve({})};sync.view.NodeRenderer.getRenderedTextForElement=function(t,o,i){if(goog.isFunction(i)){var n=i(t,o());n&&(t=n)}var r=null;if(sync.view.NodeRenderer.config){var s=sync.view.NodeRenderer.config[t];s&&(r=s.renderedText)}return r==null&&(r=t),r};sync.view.NodeRenderer.getRenderedText=function(t,o){var i;return typeof t=="string"?i=t:i=sync.model.XmlDom.getTagDisplayName(t),sync.view.NodeRenderer.getRenderedTextForElement(i,function(){return sync.model.XmlDom.getAttributes(t)},o)};var aC=sync.view.NodeRenderer;goog.require("goog.dom.dataset");goog.require("goog.dom");namespace("sync.model.XmlDom");sync.model.XmlDom={};sync.model.XmlDom.getDocumentNode=function(t){return t.querySelector('[data-role="document"]')};sync.model.XmlDom.getRootElement=function(t){return t.querySelector('[data-root="true"]')};sync.model.XmlDom.isDocument=function(t){return goog.dom.isElement(t)&&goog.dom.dataset.get(t,"role")==="document"};sync.model.XmlDom.isRootElement=function(t){return goog.dom.isElement(t)&&goog.dom.dataset.has(t,"root")};sync.model.XmlDom.getXmlElementsByTagName=function(t,o){return sync.model.XmlDom.getXmlElementsByTagNameNS(t,"*",o)};sync.model.XmlDom.getXmlElementsByTagNameNS=function(t,o,i){var n;return o==="*"?i==="*"?n='[data-oxy="true"][data-role="element"]':n='*[data-name^="'+i+'!"]':i==="*"?n='*[data-name$="!'+o+'"]':n='*[data-name="'+i+"!"+o+'"]',t.querySelectorAll(n)};sync.model.XmlDom.getXmlElementById=function(t,o){return t.querySelector('*[data-attr-id="'+o+'"]')};sync.model.XmlDom.setPseudoClassClientSide=function(t,o){t.setAttribute("data-pseudoclass-"+o,"true")};sync.model.XmlDom.removePseudoClassClientSide=function(t,o){t.removeAttribute("data-pseudoclass-"+o)};sync.model.XmlDom.hasPseudoClassClientSide=function(t,o){return!!t.getAttribute("data-pseudoclass-"+o)};sync.model.XmlDom.isXmlElement=function(t){return goog.dom.isElement(t)&&goog.dom.dataset.get(t,"role")==="element"};sync.model.XmlDom.isXmlNode=function(t){return goog.dom.isElement(t)&&goog.dom.dataset.has(t,"oxy")};sync.model.XmlDom.isSentinelNode=function(t){return goog.dom.isElement(t)&&goog.dom.classlist.contains(t,"tag")||t.nodeType===goog.dom.NodeType.COMMENT&&t.textContent.substring(0,3)==="tag"};sync.model.XmlDom.isTextNode=function(t){return goog.dom.isElement(t)&&goog.dom.dataset.get(t,"role")==="text"};sync.model.XmlDom.isReference=function(t){return sync.model.XmlDom.isXmlNode(t)&&goog.dom.dataset.has(t,"reference")};sync.model.XmlDom.isEntity=function(t){return sync.model.XmlDom.isXmlNode(t)&&goog.dom.dataset.get(t,"role")==="entity"};sync.model.XmlDom.isPi=function(t){return goog.dom.isElement(t)&&goog.dom.dataset.get(t,"role")==="pi"};sync.model.XmlDom.isMarkerOrHighlight=function(t){return goog.dom.isElement(t)&&(goog.dom.dataset.get(t,"markerId")||goog.dom.dataset.get(t,"highlightId"))};sync.model.XmlDom.getWrappedSentinel=function(t){for(var o=t;!goog.dom.classlist.contains(o.parentNode,"oxy-document")&&!sync.model.XmlDom.isXmlNode(o.parentNode);)o=o.parentNode;return o};sync.model.XmlDom.getUnwrappedSentinel=function(t){for(var o=t;sync.model.XmlDom.isMarkerOrHighlight(o);)o=o.firstChild;return o&&!sync.model.XmlDom.isSentinelNode(o)&&(o=null),o};sync.model.XmlDom.getFirstElementChild=function(t){if(!t)throw new Error;for(var o=sync.model.XmlDom.getFirstChild(t);!sync.model.XmlDom.isXmlElement(o);)o=sync.model.XmlDom.getNextSibling(o);return o};sync.model.XmlDom.getLastChild=function(t){var o=sync.model.XmlDom.getChildNodes(t);return o[o.length-1]||null};sync.model.XmlDom.getFirstChild=function(t){if(sync.model.XmlDom.isDocument(t))return t.firstElementChild;if(!sync.model.XmlDom.isXmlNode(t))return null;var o=sync.model.XmlDom.getContentIteratorAtStartSentinel_(t);if(!o)return null;var i=null,n=sync.model.XmlDom.getWrappedSentinel(o.node),r=p.nextSiblingIgnoringStatics(n);if(sync.model.XmlDom.isTextNode(r))i=r;else{o.next();var s=o.getContentInformation();if(s&&s.isOnStartTag()){var a=o.node,l=p.getSentinelParentId(a);i=goog.dom.getAncestor(a,function(c){return sync.model.XmlDom.isXmlNode(c)&&h.getIdOfXmlNode(c)===l})}else s.isOnText()&&(i=goog.dom.getAncestor(o.node,sync.model.XmlDom.isTextNode))}return i};sync.model.XmlDom.isLastElementChild=function(t){var o=t;do if(o=sync.model.XmlDom.getNextSibling(o),sync.model.XmlDom.isXmlElement(o))return!1;while(o);return!0};sync.model.XmlDom.isTransparent_=function(t){return goog.dom.isElement(t)&&goog.array.contains(T.TABLE_RELATED_TAGS,t.tagName)&&!goog.dom.dataset.has(t,"oxy")};sync.model.XmlDom.getNextSibling=function(t){var o;return sync.model.XmlDom.isTextNode(t)?o=sync.model.XmlDom.getNextSiblingOfTextXmlNode_(t):sync.model.XmlDom.isXmlNode(t)&&(o=sync.model.XmlDom.getNextSiblingOfNonTextXmlNode_(t)),o};sync.model.XmlDom.getNextSiblingOfNonTextXmlNode_=function(t){var o=p.nextSiblingIgnoringStatics(t);if(sync.model.XmlDom.isTextNode(o))return o;var i=sync.model.XmlDom.getContentIteratorAtEndSentinel_(t);if(i===null)return console.error("Null end sentinel iterator in getNextSiblingOfNonTextXmlNode_. For element:",t),null;var n=null,r=sync.model.XmlDom.getWrappedSentinel(i.node),s=p.nextSiblingIgnoringStatics(r);if(sync.model.XmlDom.isTextNode(s))n=s;else{i.next();var a=i.getContentInformation();if(a&&a.isOnStartTag()){var l=i.node,c=p.getSentinelParentId(l);n=goog.dom.getAncestor(l,function(d){return sync.model.XmlDom.isXmlNode(d)&&h.getIdOfXmlNode(d)===c})}else a&&a.isOnText()&&(n=goog.dom.getAncestor(i.node,sync.model.XmlDom.isTextNode))}return n};sync.model.XmlDom.getContentIteratorAtStartSentinel_=function(t){for(var o=h.getIdOfXmlNode(t),i=p.fromHTMLPosition(new T(t,0));;){var n=i.getContentInformation();if(!n)return null;if(n.isOnStartTag()&&n.tagElementId===o)break;i.next()}return i};sync.model.XmlDom.getContentIteratorAtEndSentinel_=function(t){for(var o=sync.model.XmlDom.getContentIteratorAtEndOfElem_(t),i=h.getIdOfXmlNode(t);;){var n=o.getContentInformation();if(n&&n.isOnEndTag()&&n.tagElementId===i)break;o.prev()}return o};sync.model.XmlDom.getContentIteratorAtEndOfElem_=function(t){try{return p.fromHTMLPosition(new T(t,t.childNodes.length))}catch(r){if(r.type==="EndOfDomTree"){var o=goog.dom.getAncestor(t,function(s){return s.nodeType===goog.dom.NodeType.DOCUMENT_FRAGMENT});if(o){var i=goog.dom.createDom("span",{"data-role":"text"},"#");o.appendChild(i);try{var n=p.fromHTMLPosition(new T(t,t.childNodes.length));n.prev()}finally{o.removeChild(i)}return n}}throw r}};sync.model.XmlDom.getNextSiblingOfTextXmlNode_=function(t){var o=null,i=p.fromHTMLPosition(new T(t,0)),n=i.getContentInformation();if(n&&n.isOnStartTag()){var r=i.node,s=p.getSentinelParentId(r);o=goog.dom.getAncestor(r,function(a){return sync.model.XmlDom.isXmlNode(a)&&h.getIdOfXmlNode(a)===s})}else n&&n.isOnText()&&(i=p.fromHTMLPosition(new T(t,t.childNodes.length)),n=i.getContentInformation(),n&&n.isOnStartTag()&&(r=i.node,s=p.getSentinelParentId(r),o=goog.dom.getAncestor(r,function(a){return sync.model.XmlDom.isXmlNode(a)&&h.getIdOfXmlNode(a)===s})));return o};sync.model.XmlDom.getMigratedEmptyTextNodeAfterEndSentinel_=function(t){var o;if(sync.model.XmlDom.isXmlElement(t)){var i=h.getInstance(),n=i.getEndSentinelOfXmlElem(t),r=sync.model.XmlDom.getWrappedSentinel(n);sync.model.XmlDom.isTextNode(r.nextElementSibling)&&(o=r.nextElementSibling)}return o};sync.model.XmlDom.getPreviousSibling=function(t){var o=null;return sync.model.XmlDom.isTextNode(t)?o=sync.model.XmlDom.getPrevSiblingOfTextXmlNode_(t):sync.model.XmlDom.isXmlNode(t)&&(o=sync.model.XmlDom.getPrevSiblingOfNonTextXmlNode_(t)),o};sync.model.XmlDom.getPrevSiblingOfTextXmlNode_=function(t){var o=null,i=p.fromHTMLPosition(new T(t,0)),n=i.getContentInformation();if(n&&n.isOnEndTag()){if(i.prev(),n=i.getContentInformation(),n&&n.isOnEndTag()){var r=i.node,s=p.getSentinelParentId(r);o=goog.dom.getAncestor(r,function(a){return sync.model.XmlDom.isXmlNode(a)&&h.getIdOfXmlNode(a)===s})}}else n&&(n=i.getContentInformation(),n&&n.isOnText()&&(i=p.fromHTMLPosition(new T(i.node,0))),i.prev(),n=i.getContentInformation(),n&&n.isOnEndTag()&&(r=i.node,s=p.getSentinelParentId(r),o=goog.dom.getAncestor(r,function(a){return sync.model.XmlDom.isXmlNode(a)&&h.getIdOfXmlNode(a)===s})));return o};sync.model.XmlDom.getPrevSiblingOfNonTextXmlNode_=function(t){var o=p.prevSiblingIgnoringStatics(t);if(sync.model.XmlDom.isTextNode(o))return o;var i=sync.model.XmlDom.getContentIteratorAtStartSentinel_(t);if(!i)return console.error("Null end sentinel iterator in getPrevSiblingOfNonTextXmlNode_. For element:",t),null;var n=null,r=sync.model.XmlDom.getWrappedSentinel(i.node),s=p.prevSiblingIgnoringStatics(r);if(sync.model.XmlDom.isTextNode(s))n=s;else{var a=i.getContentInformationBefore();a&&a.isOnEndTag()?n=a.getNodeOfTag().getHtmlNode():a&&a.isOnText()&&(i.prev(),n=goog.dom.getAncestor(i.node,sync.model.XmlDom.isTextNode))}return n};sync.model.XmlDom.prev_=function(t){for(;!t.previousElementSibling&&sync.model.XmlDom.isTransparent_(t.parentNode);)t=t.parentNode;for(var o=t.previousElementSibling;o&&sync.model.XmlDom.isTransparent_(o);)o=o.lastElementChild;var i=sync.model.XmlDom.getUnwrappedSentinel(o);if(i)if(p.getSentinelType(i)===f.AFTER){for(var n=p.getSentinelParentId(i),r=o.parentNode;!sync.model.XmlDom.isXmlNode(r)||h.getIdOfXmlNode(r)!==n;)r=r.parentNode;o=r}else o=null;return o};sync.model.XmlDom.getChildNodes=function(t){var o=[],i=sync.model.XmlDom.getFirstChild(t);if(i)do o.push(i),i=sync.model.XmlDom.getNextSibling(i);while(i!==null);return o};sync.model.XmlDom.getParentNode=function(t){return sync.model.XmlDom.getParent_(t,sync.model.XmlDom.isXmlNode)};sync.model.XmlDom.getContainingXmlNode=function(t){return goog.dom.getAncestor(t,sync.model.XmlDom.isXmlNode,!0)};sync.model.XmlDom.getParentElement=function(t){return sync.model.XmlDom.getParent_(t,sync.model.XmlDom.isXmlElement)};sync.model.XmlDom.getParent_=function(t,o){if(sync.model.XmlDom.isTextNode(t)){var i=goog.dom.dataset.get(t,"empty");if(i){var n;i==="0"?n=p.prevSiblingIgnoringStatics(t):i==="1"&&(n=p.nextSiblingIgnoringStatics(t));var r=sync.model.XmlDom.getUnwrappedSentinel(n),s=p.getSentinelParentId(r);return goog.dom.getAncestor(t,function(a){return o(a)&&h.getIdOfXmlNode(a)===s})}}return goog.dom.getAncestor(t,o)};sync.model.XmlDom.getContainingElement=function(t){return goog.dom.getAncestor(t,sync.model.XmlDom.isXmlElement,!0)};sync.model.XmlDom.createTextNode=function(t){var o=sync.util.getDocDomHelper();return o.createDom("span",{"data-role":"text"},t)};sync.model.XmlDom.isInsideDocument=function(t){var o=goog.dom.getAncestor(t,function(i){var n=!1;if(goog.dom.isElement(i)){var r=goog.dom.dataset.get(i,"role");(r==="element"||r==="document")&&(n=!0)}return n},!0);return o!==null};sync.model.XmlDom.getTagDisplayName=function(t){var o=null,i=goog.dom.dataset.get(t,"role");if(i==="element")o=sync.model.XmlDom.getTagName(t);else if(i==="entity"){var n=goog.dom.dataset.get(t,"ent");o="&"+n+";"}else o="#"+i;return o};sync.model.XmlDom.getTagName=function(t){var o=goog.dom.dataset.get(t,"name"),i=o.indexOf("!");return o=o.substring(0,i),o};sync.model.XmlDom.getTextContent=function(t){var o="";if(sync.model.XmlDom.isTextNode(t))o=t.textContent;else{var i=t.querySelectorAll('[data-role="text"]');[].forEach.call(i,function(n){o+=n.textContent})}return o};sync.model.XmlDom.getContent=function(t){var o;if(sync.model.XmlDom.isTextNode(t))o=t.textContent;else{var i=sync.model.XmlDom.getFirstChild(t);for(o="\0";i!==null;)o+=sync.model.XmlDom.getContent(i),i=sync.model.XmlDom.getNextSibling(i);o+="\0"}return o};sync.model.XmlDom.getAttributes=function(t){for(var o={},i=t.attributes,n=0;n<i.length;n++){var r=i.item(n);if(r.nodeName.indexOf("data-attr-")===0){var s=sync.model.XmlDom.escapeUpperCaseLetters(r.nodeName),a=s.substring("data-attr-".length);o[a]={attributeValue:r.value,isDefaultValue:!1,isHidden:!1}}}var l=t.getAttribute("data-hdn-attrs");if(l){var c=l.split(" ");for(n=0;n<c.length-1;n++){var d=sync.model.XmlDom.escapeUpperCaseLetters(c[n]);o[d].isHidden=!0}}var g=t.getAttribute("data-dtd-attrs");if(g){var m=g.split(" ");for(n=0;n<m.length-1;n++){var v=sync.model.XmlDom.escapeUpperCaseLetters(m[n]);o[v].isDefaultValue=!0}}return o};sync.model.XmlDom.escapeUpperCaseLetters=function(t){if(t.indexOf("?")>-1){var o,i=t.split("?");o=i[0];for(var n=1;n<i.length;n++)o=o+i[n].charAt(0).toUpperCase()+i[n].slice(1);return o}else return t};sync.model.XmlDom.isReadOnlyElement=function(t){return goog.dom.dataset.get(t,"readonly")==="true"};var Ml=sync.model.XmlDom;namespace("sync.api.dom");var nt=function(t,o){Dn.call(this,o),this.id=t};goog.inherits(nt,Dn);nt.prototype.getHtmlNode=function(){return this.doc_.getInternalModel().getXmlNodeById(this.id)};nt.prototype.createApiNodeList_=function(t){var o=new pa;return[].map.call(t,goog.bind(this.doc_.createApiNodeOrNull,this.doc_)).filter(goog.isDefAndNotNull).forEach(function(i){o.push(i)}),o};nt.prototype.getNodeName=function(){return sync.model.XmlDom.getTagDisplayName(this.getHtmlNode())};nt.prototype.getChildren=function(){var t=this.getHtmlNode();return this.createApiNodeList_(sync.model.XmlDom.getChildNodes(t))};nt.prototype.getChildNodes=function(){var t=this.getHtmlNode();return sync.model.XmlDom.getChildNodes(t).map(this.doc_.createApiNodeOrNull,this.doc_).filter(goog.isDefAndNotNull)};nt.prototype.isSameNode=function(t){return t instanceof nt&&this.id===t.id};nt.prototype.getElementsByTagName=function(t){if(t==="*")return this.getElementsByTagNameNS("*","*");var o,i,n=t.indexOf(":");n!==-1?(o=t.substring(n+1),i=t.substring(0,n)):(o=t,i=null);var r=this.getHtmlNode(),s=this.createApiNodeList_(sync.model.XmlDom.getXmlElementsByTagNameNS(r,"*",o));return goog.array.removeAllIf(s,function(a){return a.getPrefix()!==i}),s};nt.prototype.getElementsByTagNameNS=function(t,o){var i=this.getHtmlNode();return this.createApiNodeList_(sync.model.XmlDom.getXmlElementsByTagNameNS(i,t,o))};nt.prototype.getParent=function(){return this.doc_.createApiNodeOrNull(sync.model.XmlDom.getParentNode(this.getHtmlNode()))};nt.prototype.createApiNodeWithFallback_=function(t,o){var i=null;if(t&&(i=this.doc_.createApiNodeOrNull(t),!i)){var n=o?sync.model.XmlDom.getNextSibling(t):sync.model.XmlDom.getPreviousSibling(t);i=this.doc_.createApiNodeOrNull(n)}return i};nt.prototype.getPreviousSibling=function(){return this.doc_.createApiNodeWithFallback_(sync.model.XmlDom.getPreviousSibling(this.getHtmlNode()),!1)};nt.prototype.getNextSibling=function(){return this.doc_.createApiNodeWithFallback_(sync.model.XmlDom.getNextSibling(this.getHtmlNode()),!0)};nt.prototype.getFirstChild=function(){return this.doc_.createApiNodeWithFallback_(sync.model.XmlDom.getFirstChild(this.getHtmlNode()),!0)};nt.prototype.getLastChild=function(){return this.doc_.createApiNodeWithFallback_(sync.model.XmlDom.getLastChild(this.getHtmlNode()),!1)};nt.prototype.getTextContent=function(){for(var t="",o=this.getChildren(),i=o.length,n=0;n<i;n++){var r=o.item(n);r.nodeType!==goog.dom.NodeType.COMMENT&&r.nodeType!==goog.dom.NodeType.PROCESSING_INSTRUCTION&&(t+=r.getTextContent())}return t};nt.prototype.getContent=function(){var t=this.getHtmlNode();return sync.model.XmlDom.getContent(t)};nt.prototype.getBoundingClientRect=function(){var t=this.getHtmlNode();return t?sync.positioning.getNodeBoundingRect(t):null};var So=nt;sync.api.dom.NodeWithId=nt;goog.require("goog.dom.NodeType");namespace("sync.api.dom");var Ot=function(t,o,i,n){Dn.call(this,i),this.attrDesc_=o,this.name=t,this.ownerElement=n};goog.inherits(Ot,Dn);Ot.prototype.getType=function(){return goog.dom.NodeType.ATTRIBUTE};Ot.prototype.getNodeName=function(){return this.name};Ot.prototype.getNodeValue=function(){return this.attrDesc_.attributeValue};Ot.prototype.lookupNamespaceURI=function(t){return this.ownerElement.lookupNamespaceURI(t)};Ot.prototype.lookupPrefix=function(t){return this.ownerElement.lookupPrefix(t)};Ot.prototype.isDefaultNamespace=function(t){return this.ownerElement.isDefaultNamespace(t)};Ot.prototype.getNamespaceURI=function(){return this.lookupNamespaceURI(this.getPrefix())};Ot.prototype.getPrefix=function(){return this.name.substring(0,this.name.indexOf(":"))||null};Ot.prototype.getLocalName=function(){return this.name.substring(this.name.indexOf(":")+1)};Ot.prototype.getTextContent=function(){return this.getNodeValue()};Ot.prototype.isSpecified=function(){return!this.attrDesc_.isDefaultValue};Ot.prototype.getName=function(){return this.name};Ot.prototype.getValue=function(){return this.attrDesc_.attributeValue};Ot.prototype.schemaTypeInfo=null;Object.defineProperties(Ot.prototype,{specified:{get(){return!this.attrDesc_.isDefaultValue}},value:{get(){return this.attrDesc_.attributeValue}},isId:{get(){return this.name==="id"||goog.string.endsWith(this.name,":id")}}});var Nh=Ot;sync.api.dom.Attr=Ot;namespace("sync.api.dom");var ga=function(t,o){this.map_=t,this.keys_=Object.keys(t),this.nsResolver_=o};ga.prototype.getNamedItem=function(t){return this.map_[t]||null};ga.prototype.getNamedItemNS=function(t,o){return this.nsResolver_?this.getNamedItem(this.nsResolver_.getQualifiedName(t,o)):null};ga.prototype.item=function(t){return this.map_[this.keys_[t]]};Object.defineProperties(ga.prototype,{length:{get(){return this.keys_.length}}});var Mh=ga;sync.api.dom.NamedNodeMap=ga;goog.require("goog.dom.NodeType");namespace("sync.api.dom");var Ce=function(t,o){So.call(this,t,o)};goog.inherits(Ce,So);Ce.prototype.getType=function(){return goog.dom.NodeType.ELEMENT};Ce.prototype.getTagName=function(){return this.getQualifiedName(this.getNamespaceURI(),sync.model.XmlDom.getTagName(this.getHtmlNode()))};Ce.prototype.getNamespaceURI=function(){var t=this.getHtmlNode(),o=goog.dom.dataset.get(t,"name"),i=o.indexOf("!");return o.substring(i+1)||null};Ce.prototype.lookupNamespaceURI=function(t){for(var o=this.getAttributeNodes(),i=o.length,n=0;n<i;n++){var r=o.item(n),s=r.getLocalName();if(s===t&&r.getPrefix()==="xmlns"||!t&&s==="xmlns")return r.getNodeValue()||null}var a,l=this.getParent();return l&&l.nodeType!==goog.dom.NodeType.DOCUMENT?a=l.lookupNamespaceURI(t):a=null,a};Ce.prototype.isDefaultNamespace=function(t){for(var o=this.getAttributeNodes(),i=o.length,n=0;n<i;n++){var r=o.item(n);if(r.getLocalName()==="xmlns")return r.getNodeValue()===t}var s=this.getElementAncestor();return s?s.isDefaultNamespace(t):!1};Ce.prototype.lookupPrefix=function(t){return this.lookupPrefixForElement_(t,this)};Ce.prototype.lookupPrefixForElement_=function(t,o){for(var i=this.getAttributeNodes(),n=i.length,r=0;r<n;r++){var s=i.item(r);if(s.getPrefix()==="xmlns"&&s.getNodeValue()===t&&o.lookupNamespaceURI(s.getLocalName())===t)return s.getLocalName()}var a=this.getElementAncestor();return a?a.lookupPrefixForElement_(t,o):null};Ce.prototype.getPrefix=function(){return this.lookupPrefix(this.getNamespaceURI())};Ce.prototype.getLocalName=function(){return this.getTagName()};Ce.prototype.getAttribute=function(t){var o=this.getAttributes(),i=o[t];return i?i.attributeValue:""};Ce.prototype.attrDescToApi_=function(t,o){return new Nh(t,o,this.doc_,this)};Ce.prototype.getAttributeNode=function(t){var o=this.getAttributes(),i=o[t];return i?this.attrDescToApi_(t,i):null};Ce.prototype.hasPseudoClass=function(t){return sync.model.XmlDom.hasPseudoClassClientSide(this.getHtmlNode(),t)};Ce.prototype.getAttributeNodeNS=function(t,o){return this.getAttributeNode(this.getQualifiedName(t,o))};Ce.prototype.getQualifiedName=function(t,o){var i=null;return t&&(t.indexOf(":")===-1?i=t:this.isDefaultNamespace(t)||(i=this.lookupPrefix(t))),i?i+":"+o:o};Ce.prototype.getAttributeNS=function(t,o){return this.getAttribute(this.getQualifiedName(t,o))};Ce.prototype.hasAttribute=function(t){return this.getAttribute(t)!==""};Ce.prototype.hasAttributeNS=function(t,o){return this.getAttributeNS(t,o)!==""};Ce.prototype.getAttributes=function(){return sync.model.XmlDom.getAttributes(this.getHtmlNode())};Ce.prototype.getAttributeNodes=function(){var t=this;return new Mh(goog.object.map(this.getAttributes(),function(o,i){return this.attrDescToApi_(i,o)},this),t)};Ce.prototype.areAttributesEqual_=function(t){var o=this.getAttributeNodes(),i=t.getAttributeNodes(),n=o.length,r=i.length===n;if(r)for(var s=0;s<n;s++){var a=o.item(s),l=i.getNamedItem(a.getNodeName());if(r=l!==null&&a.isEqualNode(l),!r)break}return r};Ce.prototype.schemaTypeInfo=null;Ce.prototype.getBaseURI=function(){var t=this.getHtmlNode();return sync.model.XmlDom.isReference(t)?goog.dom.dataset.get(t,"url"):this.getParent().getBaseURI()};Object.defineProperties(Ce.prototype,{tagName:{get(){return this.getTagName()}}});var xh=Ce;sync.api.dom.Element=Ce;namespace("sync.api.dom");var ds=function(t,o){So.call(this,t,o)};goog.inherits(ds,So);ds.prototype.getNodeValue=function(){return this.getTextContent()};ds.prototype.getFirstChild=function(){return null};ds.prototype.getLastChild=function(){return null};ds.prototype.getChildren=function(){return new pa([])};var oi=ds;sync.api.dom.Leaf=ds;namespace("sync.api.dom");var xl=function(t,o){oi.call(this,t,o)};goog.inherits(xl,oi);xl.prototype.getType=function(){return goog.dom.NodeType.COMMENT};xl.prototype.getTextContent=function(){return sync.model.XmlDom.getTextContent(this.getHtmlNode())};var Rh=xl;sync.api.dom.Comment=xl;namespace("sync.api.dom");var Qi=function(t,o){oi.call(this,t,o)};goog.inherits(Qi,oi);Qi.prototype.getType=function(){return goog.dom.NodeType.PROCESSING_INSTRUCTION};Qi.prototype.getNodeName=function(){return this.getTarget()};Qi.prototype.getNodeValue=function(){return this.getData()};Qi.prototype.getTarget=function(){var t=sync.model.XmlDom.getTextContent(this.getHtmlNode());return t.substring(0,t.indexOf(" "))};Qi.prototype.getData=function(){var t=sync.model.XmlDom.getTextContent(this.getHtmlNode());return t.substring(t.indexOf(" ")+1)};Qi.prototype.getTextContent=function(){return this.getData()};Object.defineProperties(Qi.prototype,{target:{get(){return this.getTarget()}},data:{get(){return this.getData()}}});var Oh=Qi;sync.api.dom.ProcessingInstruction=Qi;namespace("sync.api.dom");var Nn=function(t,o){So.call(this,t,o)};goog.inherits(Nn,So);Nn.prototype.getType=function(){return goog.dom.NodeType.ENTITY_REFERENCE};Nn.prototype.getNodeName=function(){return goog.dom.dataset.get(this.getHtmlNode(),"ent")};Nn.prototype.getNodeValue=function(){return null};Nn.prototype.lookupNamespaceURI=function(t){return this.getParent().lookupNamespaceURI(t)};Nn.prototype.lookupPrefix=function(t){var o=this.getElementAncestor();return o?o.lookupPrefix(t):null};Nn.prototype.isDefaultNamespace=function(t){var o=this.getElementAncestor();return o?o.isDefaultNamespace(t):null};var Ph=Nn;sync.api.dom.EntityRef=Nn;goog.require("goog.dom.NodeType");namespace("sync.api.dom");var jt=function(t,o,i){Dn.call(this,i),this.parentId=t,this.previousSiblingId=o};goog.inherits(jt,Dn);jt.prototype.getHtmlNode=function(){if(this.previousSiblingId!==null){var t=this.doc_.getInternalModel().getXmlNodeById(this.previousSiblingId);return sync.model.XmlDom.getNextSibling(t)}else{var o=this.doc_.getInternalModel().getXmlNodeById(this.parentId);return sync.model.XmlDom.getFirstChild(o)}};jt.prototype.getType=function(){return goog.dom.NodeType.TEXT};jt.prototype.getNodeName=function(){return"#text"};jt.prototype.getType=function(){return goog.dom.NodeType.TEXT};jt.prototype.getNodeValue=function(){return this.getHtmlNode().textContent};jt.prototype.getParent=function(){return this.doc_.createApiNodeOrNull(this.parentId)};jt.prototype.getPreviousSibling=function(){return this.previousSiblingId?this.doc_.createApiNodeOrNull(this.previousSiblingId):null};jt.prototype.getNextSibling=function(){return this.doc_.createApiNodeOrNull(sync.model.XmlDom.getNextSibling(this.getHtmlNode()))};jt.prototype.getBoundingClientRect=function(){var t=this.getHtmlNode();return t?sync.positioning.getNodeBoundingRect(t):null};jt.prototype.getTextContent=function(){return this.getNodeValue()};jt.prototype.getContent=function(){return this.getNodeValue()};jt.prototype.isSameNode=function(t){return t instanceof jt&&this.parentId===t.parentId&&this.previousSiblingId===t.previousSiblingId};Object.defineProperties(jt.prototype,{isElementContentWhitespace:{get(){return!1}},wholeText:{get(){return this.getNodeValue()}}});var ed=jt;sync.api.dom.Text=jt;namespace("sync.api.dom");var Rl=function(t,o){oi.call(this,t,o)};goog.inherits(Rl,oi);Rl.prototype.getType=function(){return-1};Rl.prototype.getTextContent=function(){return sync.model.XmlDom.getTextContent(this.getHtmlNode())};var kh=Rl;sync.api.dom.InternalErrorNode=Rl;function ha(t,o){oi.call(this,t,o)}goog.inherits(ha,oi);ha.prototype.getType=function(){return goog.dom.NodeType.CDATA_SECTION};ha.prototype.getTextContent=function(){return Ml.getTextContent(this.getHtmlNode())};goog.require("goog.dom.dataset");goog.require("goog.dom.NodeType");goog.require("goog.functions");namespace("sync.api.dom");var we=function(t,o){So.call(this,t,this),this.model_=o};goog.inherits(we,So);we.prototype.getType=function(){return goog.dom.NodeType.DOCUMENT};we.prototype.getDocumentElement=function(){var t=this.getHtmlNode(),o=sync.model.XmlDom.getFirstElementChild(t);return this.createApiNodeOrNull(o)};we.prototype.getElementById=function(t){var o=this.getHtmlNode();return this.createApiNodeOrNull(sync.model.XmlDom.getXmlElementById(o,t))};we.prototype.getTextContent=goog.functions.NULL;we.prototype.lookupNamespaceURI=function(t){return this.getDocumentElement().lookupNamespaceURI(t)};we.prototype.lookupPrefix=function(t){return this.getDocumentElement().lookupPrefix(t)};we.prototype.isDefaultNamespace=function(t){return this.getDocumentElement().isDefaultNamespace(t)};we.prototype.getBaseURI=function(){var t=this.getHtmlNode();return goog.dom.dataset.get(t,"systemId")};we.prototype.createApiNodeOrParent=function(t){return this.createApiNode_(t,!0)};we.prototype.createApiNodeOrNull=function(t){return this.createApiNode_(t,!1)};we.prototype.createApiNodeOrNonStandard=function(t){var o=this.getNodeRole_(t);return o==="error"?new kh(t,this):this.createApiNodeWithRole_(o,t)};we.prototype.getNodeRole_=function(t){var o=this.model_.getXmlNodeById(t);if(!o)throw new ti(t);return goog.dom.dataset.get(o,"role")};we.prototype.createApiNode_=function(t,o){var i,n=null,r=null;if(typeof t=="string"){if(n=t,i=this.model_.getXmlNodeById(t),!i)throw new ti(t);r=this.createApiNodeWithId_(i,n,o)}else goog.isDefAndNotNull(t)&&(i=t,n=h.getIdOfXmlNode(i),n===this.id?r=this:n?r=this.createApiNodeWithId_(i,n,o):r=this.createTextNode_(i,o));return r};we.prototype.getInternalModel=function(){return this.model_};we.prototype.createTextNode_=function(t,o){var i=sync.model.XmlDom.getParentNode(t),n=h.getIdOfXmlNode(i);if(t.textContent){var r=sync.model.XmlDom.getPreviousSibling(t),s=r?h.getIdOfXmlNode(r):null;return new ed(n,s,this)}else if(o)return this.createApiNodeWithId_(i,n,o);return null};we.prototype.jsonNodeToApiNode=function(t){var o;try{if(goog.isDefAndNotNull(t.parentId))if(t.prevSiblingId===null)o=this.createApiNodeOrNull(String(t.parentId)).getFirstChild();else{var i=this.createApiNodeOrNonStandard(String(t.prevSiblingId));o=i.getNextSibling()}else o=this.createApiNodeOrNull(String(t.id))}catch(n){if(n instanceof ti)o=null;else throw n}return o};we.prototype.roleToConstructor_={element:xh,comment:Rh,pi:Oh,entity:Ph,cdata:ha};we.prototype.createApiNodeWithId_=function(t,o,i){var n=this.getNodeRole_(o),r=this.createApiNodeWithRole_(n,o);if(!r&&i){var s=sync.model.XmlDom.getParentNode(t),a=h.getIdOfXmlNode(t);r=this.createApiNodeWithId_(s,a,i)}return r};we.prototype.createApiNodeWithRole_=function(t,o){var i=null;if(t==="document")i=new we(o,this.model_);else{var n=this.roleToConstructor_[t];n&&(i=Object.create(n.prototype),n.apply(i,[o,this]))}return i};we.prototype.strictErrorChecking=!1;we.prototype.xmlStandalone=!0;Object.defineProperties(we.prototype,{documentElement:{get(){return this.getDocumentElement()}},implementation:{get(){return{hasFeature:goog.functions.FALSE,getFeature:goog.functions.NULL}}},doctype:{get(){return null}},documentURI:{get(){return this.getBaseURI()}}});var td=we;sync.api.dom.Document=we;goog.require("goog.Disposable");namespace("sync.ctrl");var ar=function(){};goog.inherits(ar,goog.Disposable);ar.prototype.enhanceDom=function(t){};ar.prototype.dropNodes=function(t){};ar.prototype.enterDocument=function(t){};ar.prototype.exitDocument=function(t){};ar.prototype.recycle=function(t){};var pe=ar;sync.ctrl.DocumentUpdateFilter=ar;namespace("sync.model");var ut=function(t){this.xmlModel_=t,this.nodeIds_=new Set,this.sentinelIds_=new Set};goog.inherits(ut,pe);ut.TAGS_WITH_COMMENT_SENTINELS=[String(goog.dom.TagName.CAPTION),String(goog.dom.TagName.TR),String(goog.dom.TagName.TBODY),String(goog.dom.TagName.TFOOT),String(goog.dom.TagName.THEAD)];ut.TAGS_WITH_COMMENT_SENTINELS_SELECTOR_=ut.TAGS_WITH_COMMENT_SENTINELS.join(",");ut.prototype.enterDocument=function(t){var o=ut.getXmlNodes(t),i,n;for(n=0;n<o.length;n++){var r=o[n];i=h.getIdOfXmlNode(r),this.xmlModel_.xmlNodesMap[i]=r,this.nodeIds_.add(i)}var s=ut.getSentinels(t);for(n=0;n<s.length;n++){var a=s[n];i=h.getIdOfSentinel(a),this.xmlModel_.sentinelsMap[i]=a,this.sentinelIds_.add(i)}};ut.prototype.exitDocument=function(t){var o=ut.getXmlNodes(t),i,n;for(n=0;n<o.length;n++)i=h.getIdOfXmlNode(o[n]),delete this.xmlModel_.xmlNodesMap[i],this.nodeIds_.delete(i);var r=ut.getSentinels(t);for(n=0;n<r.length;n++){var s=r[n];i=h.getIdOfSentinel(s),delete this.xmlModel_.sentinelsMap[i],this.sentinelIds_.delete(i)}};ut.prototype.disposeInternal=function(){ut.superClass_.disposeInternal.call(this),this.nodeIds_.forEach(goog.bind(function(t){delete this.xmlModel_.xmlNodesMap[t]},this)),this.sentinelIds_.forEach(goog.bind(function(t){delete this.xmlModel_.sentinelsMap[t]},this))};ut.getXmlNodes=function(t){for(var o=[],i=0;i<t.length;i++){var n=t[i];sync.model.XmlDom.isXmlNode(n)&&o.push(n);for(var r=ut.getXmlNodesWithin(n),s=0;s<r.length;s++)o.push(r[s])}return o};ut.getXmlNodesWithin=function(t){return t.querySelectorAll('[data-oxy="true"]')};ut.getSentinels=function(t){for(var o=[],i=0;i<t.length;i++){var n=t[i];sync.model.XmlDom.isSentinelNode(n)&&o.push(n);for(var r=n.getElementsByClassName("tag"),s=0;s<r.length;s++)o.push(r[s]);sync.model.XmlDom.isDocument(n)&&(o=o.concat(goog.array.filter(n.parentNode.childNodes,sync.model.XmlDom.isSentinelNode)));var a=goog.array.toArray(n.querySelectorAll(ut.TAGS_WITH_COMMENT_SENTINELS_SELECTOR_));for(ut.TAGS_WITH_COMMENT_SENTINELS.indexOf(n.tagName)!==-1&&a.push(n),s=0;s<a.length;s++){var l=a[s];if(sync.model.XmlDom.isXmlNode(l))for(var c=l.childNodes,d=0;d<c.length;d++)c[d].nodeType===goog.dom.NodeType.COMMENT&&c[d].textContent.substring(0,3)==="tag"&&o.push(c[d])}}return o};var Mn=ut;sync.model.XmlModelIndexerFilter=ut;var od=function(t,o){if(!t){var i=goog.isFunction(o)?o():o;throw new Error(i||"")}};namespace("sync.model");var Ke=function(){this.xmlNodesMap={},this.sentinelsMap={}};Ke.instance=null;Ke.getInstance=function(){return Ke.instance||(Ke.instance=new Ke),Ke.instance};Ke.prototype.createFilter=function(){return new Mn(this)};Ke.prototype.getXmlNodeById=function(t){return this.xmlNodesMap[t]};Ke.getXmlNodeByIdWithinElement=function(t,o){return o.querySelector('[data-id="'+t+'"]')};Ke.getXmlNodesByIdWithinElement=function(t){var o={};return goog.array.forEach(t.querySelectorAll("[data-id]"),function(i){var n=goog.dom.dataset.get(i,"id");o[n]=i}),o};Ke.getIdOfXmlNode=function(t){return goog.dom.dataset.get(t,"id")};Ke.prototype.getSentinelById=function(t){return this.sentinelsMap[t]};Ke.prototype.getStartSentinelOfXmlElem=function(t){var o=Ke.getIdOfXmlNode(t);return this.getSentinelById("tag-0-"+o)};Ke.prototype.getEndSentinelOfXmlElem=function(t){var o=Ke.getIdOfXmlNode(t);return this.getSentinelById("tag-1-"+o)};Ke.prototype.getDocument=function(t){od(goog.dom.classlist.contains(t,"oxy-document"),()=>"Not a doc wrapper: "+sync.util.getOuterHTML(t));var o=t.childNodes[1];od(sync.model.XmlDom.isDocument(o),()=>"Not a doc: "+sync.util.getOuterHTML(o));var i=Ke.getIdOfXmlNode(o),n=this.getXmlNodeById(i);return od(n===o,()=>"Stale doc: "+sync.util.getOuterHTML(n)+" vs "+sync.util.getOuterHTML(o)),new td(i,this)};Ke.getSentinelByIdWithinElement=function(t,o){var i=o.querySelector('[data-id="'+t+'"]');if(!i){var n=Mn.getSentinels([o]);i=goog.array.find(n,function(r){return Ke.getIdOfSentinel(r)===t})}return i};Ke.getIdOfSentinel=function(t){var o;return t.nodeType===goog.dom.NodeType.COMMENT?o=t.textContent:o=goog.dom.dataset.get(t,"id"),o};var h=Ke;sync.model.XmlModel=Ke;goog.require("goog.style");namespace("sync.style");sync.style.isDisplayed=function(t){function o(n){return goog.dom.isElement(n)?goog.style.getComputedStyle(n,"display")==="none"||goog.style.getComputedStyle(n,"visibility")==="hidden":!1}var i=goog.dom.getAncestor(t,o,!0);return i===null};sync.style.isInsideSpacePreserve=function(t,o){var i=t.focus,n=p.fromHTMLPosition(i),r=n.getContentInformation(),s=o.getXmlNodeById(r.elementId),a=goog.style.getComputedStyle(s,"white-space"),l=a==="pre"||a==="pre-wrap";return goog.dom.classlist.contains(s,"oxy-collapse-text")&&(l=!1),l};var uS=sync.style;goog.require("goog.array");namespace("sync.position");var St=function(t,o){this.container=t,this.offset=o,this.frameDoc=sync.util.getDocDomHelper().getDocument()};St.prototype.DEFAULT_CARET_SIZE_=25;St.prototype.toRelativeContentPosition=function(){var t;if(sync.model.XmlDom.isInsideDocument(this.container)){var o=p.fromHTMLPosition(this);t=o.toRelativeContentPosition()}else{var i=this.container.ownerDocument.querySelector('[data-root="true"]');p.comparePositions(this.container,this.offset,i,0)<=0?t=new St(i,0).toRelativeContentPosition():t=new St(i,i.childNodes.length).toRelativeContentPosition()}return t};St.prototype.toString=function(){var t=null,o=this.container.nodeType,i=goog.dom.NodeType,n=this.offset;if(o===i.TEXT){var r=this.container.textContent,s=Math.max(0,n-10),a=Math.min(n+10,r.length);t="{ container: >",t+=r.substring(s,n),t+="|",t+=r.substring(n,a),t+="<}"}else if(o===i.COMMENT)t="{ comment: "+this.container.textContent+"}";else if(o===i.ELEMENT){var l=this.container;t="{id: "+h.getIdOfXmlNode(l)+", offset: "+n+"}"}return t};St.TABLE_RELATED_TAGS=[String(goog.dom.TagName.TABLE),String(goog.dom.TagName.CAPTION),String(goog.dom.TagName.TR),String(goog.dom.TagName.TH),String(goog.dom.TagName.TD),String(goog.dom.TagName.TBODY),String(goog.dom.TagName.TFOOT),String(goog.dom.TagName.THEAD)];St.prototype.getCaretRectNative=function(){var t=goog.dom.TextRange.createFromNodes(this.container,this.offset,this.container,this.offset),o=t.getBrowserRangeWrapper_().range_.getClientRects();let i=goog.array.peek(o);return i?new goog.math.Rect(i.x,i.y,i.width,i.height):null};St.prototype.getCaretRectNativeFallback=function(){var t=goog.dom.TextRange.createFromNodes(this.container,this.offset,this.container,this.offset),o=t.getBrowserRangeWrapper_().range_.getBoundingClientRect();return o.width===0&&o.height===0?null:new goog.math.Rect(o.x,o.y,o.width,o.height)};St.prototype.getCaretRect=function(){var t=this,o=t.getCaretRectNative();if(o||(t=t.toRelativeContentPosition().toHTMLPosition(),o=t.getCaretRectNative()),!o){var i=t.toRelativeContentPosition();if(i.sentinelType===f.AFTER&&i.distance==0){var n=h.getInstance().getXmlNodeById(i.nodeId);if(goog.array.contains(St.TABLE_RELATED_TAGS,n.tagName)){var r=n.getBoundingClientRect();if(r.top||r.right||r.bottom||r.left){var s=Math.min(16,r.height);o=new goog.math.Rect(r.right,r.bottom-s,1,s),o.right=o.left+o.width}}}}if(o||(o=t.getCaretRectNativeFallback()),o||(o=this.lastResortCaretRectDetect_(t)),goog.userAgent.IPAD||goog.userAgent.IPHONE){var a=goog.dom.getWindow(this.frameDoc);o.left-=a.pageXOffset,o.top-=a.pageYOffset}if(goog.math.Rect.equals(o,sync.positioning.NULL_RECT)){var l=this.detectCaretRectOfNotDisplayedPosition_(t);l&&(o=l)}return new goog.math.Rect(o.left,o.top,o.width,o.height).floor()};St.prototype.detectCaretRectOfNotDisplayedPosition_=function(t){var o=null,i=sync.positioning.getNearestDisplayedCoordinate(t.container);if(i){var n=i.element,r=i.coordinate,s=goog.dom.getAncestor(n,sync.model.XmlDom.isSentinelNode,!0);if(s)var a=p.getSentinelType(s);var l=0,c=this.DEFAULT_CARET_SIZE_,d=r.x;a&&a===f.AFTER&&(l=this.DEFAULT_CARET_SIZE_,c=0,d=d-this.DEFAULT_CARET_SIZE_),o=new goog.math.Rect(d,r.y,l,c)}return o};St.prototype.lastResortCaretRectDetect_=function(t){var o=t.getReferredNode();goog.dom.isElement(o)||(o=o.parentNode);var i=sync.model.XmlDom.getUnwrappedSentinel(o);i&&(o=i);var n;return sync.style.isDisplayed(o)?n=this.lastResortDisplayedCaretRectDetect_(o):n=this.lastResortNotDisplayedCaretRectDetect_(o),n};St.prototype.lastResortDisplayedCaretRectDetect_=function(t){var o,i,n,r,s;if(sync.model.XmlDom.isSentinelNode(t)){var a=goog.dom.TextRange.createFromNodes(t.firstChild,0,t.firstChild,0);o=a.getBrowserRangeWrapper_().range_.getBoundingClientRect(),i=o.left,n=o.top,r=o.width,s=o.height}else o=t.getBoundingClientRect(),i=o.left,n=o.top,r=0,s=o.height;return new goog.math.Rect(i,n,r,s)};St.prototype.lastResortNotDisplayedCaretRectDetect_=function(t){var o=sync.positioning.getNearestDisplayedCoordinate(t);t=o.element;var i,n,r,s,a;if(sync.model.XmlDom.isSentinelNode(t))if(!sync.style.isDisplayed(t))i=t.getBoundingClientRect(),n=i.right,r=i.bottom-i.height,s=this.DEFAULT_CARET_SIZE_,a=0;else{var l=goog.dom.TextRange.createFromNodes(t.firstChild,0,t.firstChild,0);i=l.getBrowserRangeWrapper_().range_.getBoundingClientRect(),n=i.left,r=i.top,s=i.width,a=i.height}else{var c=o.coordinate;n=c.x,r=c.y,o.onNodeStart||(r-=this.DEFAULT_CARET_SIZE_),s=0,a=this.DEFAULT_CARET_SIZE_}return new goog.math.Rect(n,r,s,a)};St.prototype.getReferredNode=function(){var t;return goog.dom.isElement(this.container)?this.offset===this.container.childNodes.length?t=this.container.childNodes[this.offset-1]:t=this.container.childNodes[this.offset]:t=this.container.parentNode,t};St.prototype.getCaretRectDistruptive=function(){var t=null,o=null;if(this.container.nodeType===goog.dom.NodeType.ELEMENT)return t=goog.dom.createElement("span"),goog.dom.insertChildAt(this.container,t,this.offset),o=goog.style.getBounds(t),goog.dom.removeNode(t),o;if(this.container.nodeType===goog.dom.NodeType.TEXT){var i=goog.dom.createDom("span",{"data-id":"-oxy-caret"}),n=sync.util.dom.insertNodeInTextNode(this,i);return o=goog.style.getBounds(i),goog.dom.replaceNode(this.container,n),o}else throw"Cannot get coordinates for this position."};St.prototype.equals=function(t){return this.container==t.container?this.offset==t.offset:!1};var T=St;sync.position.HTMLPosition=St;namespace("sync.api");sync.api.Selection=function(){};sync.api.Selection.prototype.isEmpty=function(){};sync.api.Selection.prototype.equals=function(t){};sync.api.Selection.prototype.getNodeAtCaret=function(t){};sync.api.Selection.prototype.getFullySelectedNode=function(){};sync.api.Selection.prototype.extendedTo=function(t,o,i){};sync.api.Selection.prototype.getNodeAtSelection=function(t){};sync.api.Selection.prototype.getNodeAtSelectionStart=function(t){};sync.api.Selection.prototype.getNodeAtSelectionEnd=function(t){};sync.api.Selection.prototype.getBoundingClientRect=function(){};sync.api.Selection.createEmptySelectionInNode=function(t,o){var i=null;return o==="before"?i=new sync.position.RelativeContentPosition(t.id,f.BEFORE,0).toHTMLPosition():o==="after"&&(i=p.htmlPosBeforeEndSentinel(t.id)),new sync.select.Selection(i)};sync.api.Selection.createAroundNode=function(t){return t.getType()===goog.dom.NodeType.TEXT?p.createSelectionAroundTextNode(t):p.createSelectionAroundXmlNode(t.id)};sync.api.Selection.createEmptySelectionRelativeToNode=function(t,o,i){var n=new sync.position.RelativeContentPosition(t.id,i?f.AFTER:f.BEFORE,o);return new sync.select.Selection(n.toHTMLPosition())};sync.api.PositionInformation=function(){};sync.api.PositionInformation.prototype.getParentNode=function(){return null};sync.api.PositionInformation.prototype.getNodeOfTag=function(){return null};sync.api.PositionInformation.prototype.isOnStartTag=function(){};sync.api.PositionInformation.prototype.isOnEndTag=function(){};sync.api.PositionInformation.prototype.isOnText=function(){};sync.api.PositionInformation.prototype.getOffsetInText=function(){};sync.api.Selection.prototype.getCaretPositionInformation=function(){};var bS=sync.api.Selection;namespace("sync.select");var Ol={ON_TEXT:0,ON_START_TAG:1,ON_END_TAG:2};sync.select.PositionInformation=function(t,o,i,n){this.elementId=t,this.tagElementId=o,this.type=i,this.offsetInText_=n};goog.inherits(sync.select.PositionInformation,sync.api.PositionInformation);sync.select.PositionInformation.prototype.getParentNode=function(){return this.elementId!==null&&this.elementId!==void 0?sync.api.dom.createApiNode(this.elementId):null};sync.select.PositionInformation.prototype.getNodeOfTag=function(){return this.tagElementId!==null&&this.tagElementId!==void 0?sync.api.dom.createApiNode(this.tagElementId):null};sync.select.PositionInformation.prototype.isOnStartTag=function(){return this.type===Ol.ON_START_TAG};sync.select.PositionInformation.prototype.isOnEndTag=function(){return this.type===Ol.ON_END_TAG};sync.select.PositionInformation.prototype.isOnText=function(){return this.type===Ol.ON_TEXT};sync.select.PositionInformation.prototype.getOffsetInText=function(){return this.offsetInText_};var Pl=Ol;sync.select.PositionType=Ol;goog.require("goog.dom");namespace("sync.formctrls.dom");sync.formctrls.dom.getFormControls=function(t){return[].slice.call(t.querySelectorAll('[data-role="form-control"]'))};sync.formctrls.dom.getContainingFormControl=function(t){for(;t;){if(goog.dom.isElement(t)&&goog.dom.dataset.get(t,"role")==="form-control")return t;if(sync.model.XmlDom.isXmlNode(t))return null;t=t.parentNode}return null};sync.formctrls.dom.isInsideFormControl=function(t){return sync.formctrls.dom.getContainingFormControl(t)!==null};sync.formctrls.dom.attrsToJSON=function(t){for(var o={},i=0;i<t.length;i++)o[t[i].name]=t[i].value;return o};sync.formctrls.dom.toJSON=function(t){return t.nodeType===Node.TEXT_NODE?t.textContent:{tag:t.tagName,attrs:sync.formctrls.dom.attrsToJSON(t.attributes),children:goog.array.map(t.childNodes,sync.formctrls.dom.toJSON)}};var NS=sync.formctrls.dom;goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagIterator");goog.require("goog.array");goog.require("goog.iter");namespace("sync.caret");var u=function(){goog.dom.TagIterator.call(this),this.constrained=!1,this.offset=0,this.reversed=!1,this.currentTextNodeContent_=null,this.frameDoc=sync.util.getDocDomHelper().getDocument()};goog.inherits(u,goog.dom.TagIterator);u.prototype.setPosition=function(t,o,i){u.superClass_.setPosition.call(this,t,o,i),this.updateTextNodeCache_()};u.prototype.updateTextNodeCache_=function(){this.node&&this.node.nodeType===Node.TEXT_NODE?this.currentTextNodeContent_=this.node.textContent:this.currentTextNodeContent_=null};u.prototype.isOnTextNode=function(){return this.currentTextNodeContent_!==null};u.prototype.getTextNodeLength_=function(){return this.currentTextNodeContent_.length};u.isBeforeFullTagSentinel=function(t,o,i){var n=u.getFullSentinelTextNode(i);return u.comparePositions(t,o,n,n.length)<0};u.getFullSentinelTextNode=function(t){var o=t.childNodes[1];return o.childNodes[0]};u.compareCanonicalRelativePositions=function(t,o){var i=u.getSentinelNode(t.nodeId,t.sentinelType),n=u.getSentinelNode(o.nodeId,o.sentinelType),r=goog.dom.compareNodeOrder(i,n);return r===0&&(r=t.distance-o.distance),r};u.getSentinelsMigratedInNode=function(t){for(var o=[],i=h.getXmlNodesByIdWithinElement(t),n=t.querySelectorAll(".tag"),r=0;r<n.length;r++){var s=n[r],a=u.getSentinelParentId(s),l;h.getIdOfXmlNode(t)===a?l=t:l=i[a],l||o.push(s)}return o};u.comparePositions=function(t,o,i,n){var r=goog.dom.findCommonAncestor(t,i),s=function(g){return g.parentNode==r},a=2*o;if(t!=r){var l=goog.dom.getAncestor(t,s,!0);a=2*sync.util.indexInParent(l)+1}var c=2*n;if(i!=r){var d=goog.dom.getAncestor(i,s,!0);c=2*sync.util.indexInParent(d)+1}return a-c};u.moveToPosition=function(t,o){var i=o.container,n=o.offset,r=u.getSentinelAncestor(i);if(r!=null){t.setPosition(r,goog.dom.TagWalkType.END_TAG);var s=!1;goog.dom.classlist.contains(r,"tag-full")?s=u.isBeforeFullTagSentinel(i,n,r):s=n==0,s||u.superNext_(t)}else{var a=u.getStaticContentAncestor(i);if(a)t.setPosition(a,goog.dom.TagWalkType.END_TAG);else switch(i.nodeType){case goog.dom.NodeType.ELEMENT:n==i.childNodes.length?t.setPosition(i,goog.dom.TagWalkType.END_TAG):t.setPosition(i.childNodes[n]);break;case goog.dom.NodeType.COMMENT:t.setPosition(i);break;case goog.dom.NodeType.TEXT:t.setPosition(i),n<i.textContent.length?t.offset=n:u.superNext_(t)}}u.superNext_(t),t.skipInvalidPositions(),t.checkState_()};u.fromHTMLPosition=function(t){var o=new u;return u.moveToPosition(o,t),o};u.getNodeIdAt=function(t){var o=null,i=u.fromHTMLPosition(t),n=i.getContentInformation();return n&&(o=n.elementId),o};u.prototype.toHTMLPosition=function(){var t,o=goog.dom.NodeType;if(this.node.nodeType===o.ELEMENT||this.node.nodeType===o.COMMENT){var i=this.node,n=new u;n.copyFrom(this);try{if(goog.dom.classlist.contains(i,"fix-pre")){var r=goog.dom.getAncestor(i,sync.model.XmlDom.isXmlElement),s=u.getPlaceholder(r);if(!s){var a=r.querySelectorAll(".fix-spc"),l=a[a.length-1];return new T(l.firstChild,0)}}}catch(v){console.error(v)}try{if(n.prev(),n.isOnTextNode()&&n.offset<n.getTextNodeLength_())return new T(n.node,n.offset+1)}catch{}switch(u.getSentinelType(i)){case f.BEFORE:return goog.userAgent.GECKO&&this.acceptsNativeCaret(i)?this.findDeepestStartPosition(i):(t=sync.util.indexInParent(this.node),new T(this.node.parentNode,t));case f.AFTER:var c=u.getSentinelParentId(i),d=h.getInstance().getXmlNodeById(c),g=u.getPlaceholder(d);if(g!=null){var m=g.parentNode;return new T(m,sync.util.dom.indexInParent(g))}else return n=new u,n.copyFrom(this),n.prev(),goog.userAgent.GECKO&&this.acceptsNativeCaret(n.node)?this.findDeepestEndPosition(n.node):goog.userAgent.IE&&n.node.nextSibling==null?this.findShallowestEndPosition(n.node):(t=sync.util.indexInParent(n.node),new T(n.node.parentNode,t+1))}}else if(this.isOnTextNode())return new T(this.node,this.offset);return null};u.getPositionRelativeToContent=function(t){var o=u.fromHTMLPosition(t),i=o.getContentInformation(),n=i.elementId,r=h.getInstance().getXmlNodeById(n),s=u.getPlaceholder(r);if(s)return u.comparePositions(t.container,t.offset,s,0)<0?-1:u.comparePositions(t.container,t.offset,s,s.childNodes.length)>0?1:0;var a=new sync.position.RelativeContentPosition(n,f.BEFORE,0).toHTMLPosition();if(u.comparePositions(t.container,t.offset,a.container,a.offset)<0)return-1;var l=u.htmlPosBeforeEndSentinel(n);return u.comparePositions(t.container,t.offset,l.container,l.offset)>0?1:0};u.htmlPosBeforeEndSentinel=function(t){var o=u.getSentinelNode(t,f.AFTER);if(u.isBoundarySentinel_(o)){var i=sync.model.XmlDom.getRootElement(o.ownerDocument),n=h.getIdOfXmlNode(i);return new sync.position.RelativeContentPosition(n,f.AFTER,0).toHTMLPosition()}var r=new sync.position.RelativeContentPosition(t,f.AFTER,0);return u.positionBefore(r.toHTMLPosition())};u.positionBefore=function(t){var o=u.fromHTMLPosition(t);return o.prev(),o.toHTMLPosition()};u.positionAfter=function(t){var o=u.fromHTMLPosition(t);return o.next(),o.toHTMLPosition()};u.prototype.equals=function(t){return u.superClass_.equals.call(this,t)&&this.offset==t.offset};u.prototype.acceptsNativeCaret=function(t){return t.nodeType===goog.dom.NodeType.ELEMENT||t.nodeType===goog.dom.NodeType.TEXT};u.prototype.findDeepestStartPosition=function(t){for(var o=t;o.childNodes&&o.childNodes.length!==0;)o=o.childNodes[0];return new T(o,0)};u.prototype.findDeepestEndPosition=function(t){for(;t.childNodes&&t.childNodes.length!==0;)t=t.childNodes[t.childNodes.length-1];var o=goog.dom.isElement(t)?t.childNodes.length:t.nodeValue.length;return new T(t,o)};u.prototype.findShallowestEndPosition=function(t){for(;t.nextSibling==null;)t=t.parentNode;var o=sync.util.indexInParent(t);return new T(t.parentNode,o+1)};u.getPlaceholder=function(t){var o=null;if(goog.dom.dataset.has(t,"empty")){var i=goog.array.find(t.childNodes,function(n){return goog.dom.isElement(n)&&goog.dom.dataset.get(n,"role")==="CONTENT"});i&&(o=i.querySelector(".empty"))}return o};u.prototype.checkState_=function(){goog.asserts.assert(this.node,"The node is undefined or null."),goog.asserts.assert(this.isSentinel_()||this.isNonElement(),"Wrong node type."),goog.asserts.assert(this.started_==!0,"Iterator should be started.")};u.prototype.elementAcceptsCaret=function(t){return!u.isStatic_(t)};u.prototype.isValidCaretPosition=function(){return!0};u.prototype.skipInvalidPositions=function(){for(;;){if(this.isNonElement()){if(!(this.isOnTextNode()&&this.getTextNodeLength_()===0))break}else if(this.isSentinel_()){if(this.skipTag(),this.isValidCaretPosition())break}else this.elementAcceptsCaret(this.node)||this.skipTag();u.superNext_(this)}};u.superNext_=function(t){var o=t.node;try{u.superClass_.next.call(t)}catch(r){if(r===goog.iter.StopIteration){var i=o.nodeType===goog.dom.NodeType.ELEMENT?sync.util.getOuterHTML(o).substring(0,100):o.nodeValue,n=new Error("End of DOM tree. Previous node: "+i);throw n.type="EndOfDomTree",n}throw r}};u.prototype.nextNode_=function(){this.skipInvalidPositions(),u.superNext_(this),this.skipInvalidPositions()};u.prototype.next_=function(){if(this.isOnTextNode()&&this.offset+1<this.getTextNodeLength_()){this.offset+=1;return}this.reversed=!1,this.nextNode_(),this.offset=0};u.prototype.next=function(){if(this.isOnBoundarySentinel_())throw goog.iter.StopIteration;this.next_()};u.prototype.isOnBoundarySentinel_=function(){return!this.isOnTextNode()&&u.isBoundarySentinel_(this.node)};u.prototype.prev_=function(){if(this.isOnTextNode()&&this.offset>0){this.offset-=1;return}this.reversed=!0,this.nextNode_(),this.isOnTextNode()&&(this.offset=this.getTextNodeLength_()-1)};u.prototype.prev=function(){if(this.prev_(),this.isOnBoundarySentinel_()&&u.getSentinelType(this.node)===f.BEFORE)throw this.next_(),goog.iter.StopIteration};u.prototype.copyFrom=function(t){u.superClass_.copyFrom.call(this,t),this.offset=t.offset,this.started_=t.started_,this.currentTextNodeContent_=t.currentTextNodeContent_};u.prototype.clone=function(){var t=new this.constructor;return t.copyFrom(this),t.checkState_(),t};u.prototype.skipSentinels=function(){for(var t=0;t<10&&this.getContentInformation().isOnStartTag();t++)this.next()};u.fromRelativeContentPosition=function(t){var o=u.getSentinelNode(t.nodeId,t.sentinelType);if(!o)throw new ti(t.nodeId);var i=new u;i.setPosition(o),u.superNext_(i),i.checkState_();for(var n=t.distance+1;n>0;){if(i.isOnTextNode()){var r=Math.min(n,i.getTextNodeLength_()-i.offset-1);if(r>0){i.offset+=r,n-=r;continue}}i.nextNode_(),i.offset=0,n--}return i};u.getSentinelNode=function(t,o){var i="tag-"+o+"-"+t;return h.getInstance().getSentinelById(i)};u.prototype.toRelativeContentPosition=function(){var t=new u;t.copyFrom(this);var o=this.goBackwardsToSentinel(t),i=t.node,n=u.getSentinelParentId(i),r=u.getSentinelType(i);return new sync.position.RelativeContentPosition(n,r,o)};u.prototype.goBackwardsToSentinel=function(t){for(var o=0;;)if(t.isOnTextNode()&&t.offset>1)o+=t.offset-1,t.offset=1;else{if(t.prev_(),t.isSentinel_())break;o+=1}return o};u.prototype.getChar=function(){return this.currentTextNodeContent_[this.offset]};u.prototype.getCharBefore=function(){return this.currentTextNodeContent_[this.offset-1]};u.prototype.getContentInformation=function(){var t,o=null,i=null;if(this.isSentinel_()){var n=this.node,r=u.getSentinelType(n);r===f.BEFORE?t=Pl.ON_START_TAG:t=Pl.ON_END_TAG,i=u.getSentinelParentId(n)}else o=this.offset,t=Pl.ON_TEXT;var s=this.getNodeIdAtPosition_(),a=null;return s&&(a=new sync.select.PositionInformation(s,i,t,o)),a};u.prototype.getContentInformationBefore=function(){var t=new u;t.copyFrom(this);try{t.prev()}catch{return null}return t.getContentInformation()};u.getTextNodeAtPosition_=function(t,o){var i=h.getInstance().getXmlNodeById(t.nodeId),n=null;if(t.sentinelType===f.AFTER)n=sync.model.XmlDom.getNextSibling(i),o&&(u.breakSentinelMigrationAt_(t),(!n||!sync.model.XmlDom.isTextNode(n))&&(n=sync.model.XmlDom.createTextNode(""),goog.dom.insertSiblingAfter(n,i)));else if(n=sync.model.XmlDom.getFirstChild(i),o&&(u.breakSentinelMigrationAt_(t),!n||!sync.model.XmlDom.isTextNode(n))){if(n&&!sync.model.XmlDom.isTextNode(n)){var r=n;n=sync.model.XmlDom.createTextNode(""),goog.dom.insertSiblingBefore(n,r)}else if(!n){n=sync.model.XmlDom.createTextNode("");var s=i.querySelector('[data-role="CONTENT"]');goog.dom.replaceNode(n,s),goog.dom.dataset.remove(i,"empty")}}return sync.model.XmlDom.isTextNode(n)?n:null};u.migrateSentinel=function(t,o,i){var n=sync.model.XmlDom.getWrappedSentinel(t),r=u.getEmptyMarkerTextNode(n,o);o===f.BEFORE?(r&&goog.dom.insertChildAt(i,r,0),goog.dom.insertChildAt(i,n,0)):(r&&goog.dom.appendChild(i,r),goog.dom.appendChild(i,n))};u.getEmptyMarkerTextNode=function(t,o){var i=null,n;return o===f.BEFORE?n=u.nextSiblingIgnoringStatics(t):n=u.prevSiblingIgnoringStatics(t),sync.model.XmlDom.isTextNode(n)&&(i=n),i};u.nextSiblingIgnoringStatics=function(t){for(var o=t.nextSibling;o&&u.isStatic_(o);)o=o.nextSibling;return o};u.prevSiblingIgnoringStatics=function(t){for(var o=t.previousSibling;o&&u.isStatic_(o);)o=o.previousSibling;return o};u.breakSentinelMigrationInNode=function(t){var o=u.fromRelativeContentPosition(new sync.position.RelativeContentPosition(t,f.BEFORE,0));o.prev();var i=o.toRelativeContentPosition();u.breakSentinelMigrationAt_(i);var n=new sync.position.RelativeContentPosition(t,f.AFTER,0);u.breakSentinelMigrationAt_(n)};u.breakSentinelMigrationAt_=function(t){function o(i){var n=u.fromRelativeContentPosition(t),r=n.getContentInformation();if(!(i===f.AFTER&&!r.isOnEndTag())){{var s=n.getContentInformationBefore();if(!s||i===f.BEFORE&&!s.isOnStartTag())return}for(var a=[],l=h.getInstance().getXmlNodeById(r.elementId),c=l;!sync.model.XmlDom.isDocument(c);){var d=h.getIdOfXmlNode(c),g=u.getSentinelNode(d,i),m=goog.dom.getAncestor(g,sync.model.XmlDom.isXmlNode);if(m!==l&&goog.dom.contains(l,m))a.push(g);else break;c=sync.model.XmlDom.getParentNode(c)}a.forEach(function(v){u.migrateSentinel(v,i,l)})}}o(f.BEFORE),o(f.AFTER)};u.getTextNodeAtPositionIfExists=function(t){return u.getTextNodeAtPosition_(t,!1)};u.getTextNodeAtPositionOrCreate=function(t){return u.getTextNodeAtPosition_(t,!0)};u.toCanonicalRelativePosition=function(t){var o=u.fromRelativeContentPosition(t);return o.toRelativeContentPosition()};u.prototype.isSentinel_=function(){return!this.isOnTextNode()&&sync.model.XmlDom.isSentinelNode(this.node)};u.getParentXmlNodeOfSentinel_=function(t){var o=sync.model.XmlDom.getContainingXmlNode(t);return o===null&&(o=t.nextSibling||t.previousSibling),o};u.prototype.getNodeIdAtPosition_=function(){if(this.isSentinel_()){var t=this.node,o=u.getSentinelParentId(t),i=u.getSentinelType(t);if(i===f.BEFORE){for(var n=u.getParentXmlNodeOfSentinel_(t);h.getIdOfXmlNode(n)!==o;)n=sync.model.XmlDom.getParentNode(n);var r=sync.model.XmlDom.getParentNode(n);return r?h.getIdOfXmlNode(r):null}else return o}else{var s=sync.model.XmlDom.getParentNode(this.node);return s?h.getIdOfXmlNode(s):null}};u.prototype.toString=function(){var t=`{
`;return this.node.id?t+="node id: "+this.node.id+`,
`:t+="node: "+this.node.textContent+" < "+this.node.parentNode.id+`,
`,t+="offset: "+this.offset+`,
`,t+="}",t};u.getSentinelParentId=function(t){var o=h.getIdOfSentinel(t);return u.getParentIdFromSentinelId_(o)};u.getParentIdFromSentinelId_=function(t){return t.substring(6)};u.getSentinelType=function(t){var o=h.getIdOfSentinel(t);return parseInt(o.substring(4,5),10)===0?f.BEFORE:f.AFTER};u.isStatic_=function(t){return goog.dom.isElement(t)&&goog.dom.dataset.get(t,"ignore")==="static"};u.isStaticContentBefore=function(t){var o=goog.dom.dataset.get(t,"role");return goog.string.startsWith(o,"BEFORE")||o==="CONTENT"};u.getPseudoElements=function(t){return u.getStaticContent(t).filter(function(o){return goog.dom.dataset.get(o,"role")!=="CONTENT"})};u.getStaticContent=function(t){return goog.array.filter(t.children,u.isStatic_)};u.hasStaticContent=function(t,o){for(var i=!1,n=o===Pl.ON_START_TAG,r=t.children,s=0;s<r.length;s++)if(u.isStatic_(r[s])&&n===u.isStaticContentBefore(r[s])){i=!0;break}return i};u.getCssContent=function(t){var o=goog.array.find(t.childNodes,function(s){return u.isStatic_(s)&&goog.dom.dataset.get(s,"role")==="CONTENT"}),i=null;if(o){var n=o.querySelector(".empty"),r=n&&o.childNodes.length===1;r||(i=o)}return i};u.getImageStaticContent=function(t){var o=u.getCssContent(t);return o&&o.querySelector(".oxy-img")};u.getStaticContentAncestor=function(t){for(;t;){if(u.isStatic_(t))return t;if(sync.model.XmlDom.isXmlNode(t))return null;t=t.parentNode}return null};u.getSentinelAncestor=function(t){return goog.dom.getAncestor(t,sync.model.XmlDom.isSentinelNode,!0,2)};u.isBoundarySentinel_=function(t){return goog.dom.isElement(t)&&goog.dom.classlist.contains(t,"boundary")};u.createSelectionOfXmlNodeContent=function(t){var o=new sync.position.RelativeContentPosition(t,f.BEFORE,0),i=new sync.position.RelativeContentPosition(t,f.AFTER,0);return new sync.select.Selection(o.toHTMLPosition(),u.positionBefore(i.toHTMLPosition()))};u.createSelectionAroundXmlNode=function(t){var o=new sync.position.RelativeContentPosition(t,f.BEFORE,0),i=new sync.position.RelativeContentPosition(t,f.AFTER,0);return new sync.select.Selection(u.positionBefore(o.toHTMLPosition()),i.toHTMLPosition())};u.createSelectionAroundTextNode=function(t){var o=t.getHtmlNode(),i=new T(o,0),n=new T(o,o.childNodes.length);return new sync.select.Selection(i,n)};u.createSelectionAroundSentinel=function(t,o){var i=o?f.BEFORE:f.AFTER,n=new sync.position.RelativeContentPosition(t,i,0);return new sync.select.Selection(u.positionBefore(n.toHTMLPosition()),n.toHTMLPosition())};u.getNodesToHighlightInfo=function(t,o){var i=sync.model.XmlDom.getParentNode(t),n=u.getSentinelAncestor(o);if(t==o)return[{oxyParentId:h.getIdOfXmlNode(i),nodePath:u.getNodePath(t,i)}];for(var r=[],s="\u200B";t&&t!=o&&(goog.dom.compareNodeOrder(t,o)<0||goog.dom.contains(o,t));){var a=!0;(t.nodeName!=="#text"&&t.nodeName!=="IMG"||sync.formctrls.dom.isInsideFormControl(t)||t.nodeValue===s&&!goog.dom.classlist.contains(t.parentNode,"empty")||a&&n&&n===u.getSentinelAncestor(t))&&(a=!1),a&&(i=sync.model.XmlDom.getParentNode(t),r.push({oxyParentId:h.getIdOfXmlNode(i),nodePath:u.getNodePath(t,i)})),t=u.getNextNode(t)}return i=sync.model.XmlDom.getParentNode(o),r.push({oxyParentId:h.getIdOfXmlNode(i),nodePath:u.getNodePath(o,i)}),r};u.getNextNode=function(t){if(t.hasChildNodes())return t.firstChild;for(;t&&!t.nextSibling;)t=t.parentNode;return t?t.nextSibling:null};u.getNodePath=function(t,o){for(var i=[],n;t!=o;)n=[].indexOf.call(t.parentNode.childNodes,t),i.unshift(n),t=t.parentNode;return i};u.getNodeByNodePath=function(t,o){for(var i=o,n=0;n<t.length;n++){if(i.childNodes.length===0||i.childNodes.length<=t[n])return null;i=i.childNodes[t[n]]}return i};u.isTextHidden=function(t){return goog.dom.isElement(t)&&goog.dom.classlist.contains(t,"oxy-collapse-text")};var p=u;sync.caret.ContentIterator=u;goog.require("goog.structs.Map");namespace("sync.util.image");sync.util.image.rawSizesCache_=new goog.structs.Map;sync.util.image.getImageSizeSlow=function(t){var o=sync.util.image.rawSizesCache_,i=goog.dom.isElement(t),n=i?t.src:t,r=o.get(n);if(!r){var s=i?t:new Image;r=new goog.Promise(function(a,l){s.onload=function(){a(new goog.math.Size(s.naturalWidth,s.naturalHeight))},s.onerror=l,s.src=n}),o.set(n,r)}return r};sync.util.image.getImageUrl=function(t,o){var i=null;return t&&(i="../rest/"+it+"/load/image/",o&&(i+=o),i+="?url="+encodeURIComponent(encodeURIComponent(t))),i};sync.util.image.displayImagePlaceholder=function(t){t.style.width="24px",t.style.height="24px",t.src="images/BrokenImage24"+(sync.util.getHdpiFactor()>1?"@2x":"")+".png",t.removeAttribute("onerror")};sync.util.image.addHidpiToSrc=function(t,o){var i=sync.util.getHdpiFactor();if(i>1&&sync.util.image.shouldLoadRetinaIcon(o)){var n=t.lastIndexOf("/");t=t.substring(0,n+1)+i+t.substring(n+1)}return t};sync.util.image.shouldLoadRetinaIcon=function(t){var o=sync.util.image.isFromLocalDrive(t);return t.style.width&&t.style.height&&o};sync.util.image.moveAltToDataset=function(t){var o=t.getAttribute("alt");o&&(t.removeAttribute("alt"),goog.dom.dataset.set(t,"alt",o))};sync.util.image.restoreAltFromDataset=function(t){var o=goog.dom.dataset.get(t,"alt");o&&t.setAttribute("alt",o)};sync.util.image.isFromLocalDrive=function(t){return!!(t&&t.dataset.localResource)};var jS=sync.util.image;namespace("sync.bugs");sync.bugs.IeNormalize={};sync.bugs.IeNormalize.hasBug=function(){var t=document.createElement("div");return t.appendChild(document.createTextNode("the")),t.appendChild(document.createTextNode("best-known")),t.normalize(),t.textContent!=="thebest-known"}();sync.bugs.IeNormalize.normalize=function(t){for(var o=t.firstChild,i;o;){if(o.nodeType===3)for(;(i=o.nextSibling)&&i.nodeType===3;)o.appendData(i.data),t.removeChild(i);else sync.bugs.IeNormalize.normalize(o);o=o.nextSibling}};var WS=sync.bugs.IeNormalize;namespace("sync.util.dom");sync.util.dom.indexInParent=function(t){for(var o=0;t!=null;)o++,t=t.previousSibling;return o-1};sync.util.dom.scrollableParent=function(t){var o=!1,i;t.nodeType===goog.dom.NodeType.ELEMENT?i=t:(i=t.parentNode,o=!0);var n=goog.style.getComputedPosition(i);if(n==="fixed")return null;var r=/(auto|scroll)/;return goog.dom.getAncestor(i,function(s){var a=s,l=!0;if(a.nodeType!==goog.dom.NodeType.ELEMENT)l=!1;else{var c=goog.style.getComputedOverflowX(a),d=goog.style.getComputedOverflowY(a);l=r.test(c+d)}return l},o)};sync.util.dom.isNodeDisplayed=function(t){var o=goog.dom.getAncestor(t,goog.dom.isElement,!0);return!!o.offsetParent};sync.util.dom.insertNodeInTextNode=function(t,o){var i=t.container,n=t.offset,r=i.nodeValue.substring(0,n),s=i.nodeValue.substring(n),a=t.container.ownerDocument,l=a.createElement("span");return r.length!==0&&l.appendChild(a.createTextNode(r)),l.appendChild(o),s.length!==0&&l.appendChild(a.createTextNode(s)),goog.dom.replaceNode(l,i),l};sync.util.dom.flattenElement=function(t){var o=t.parentNode;goog.dom.flattenElement(t),sync.util.normalize(o)};sync.util.dom.normalize=function(t){sync.bugs.IeNormalize.hasBug?sync.bugs.IeNormalize.normalize(t):t.normalize()};sync.util.dom.loadJsFile=function(t){var o;o=goog.dom.createDom("script"),o.type="text/javascript",o.src=t;var i=new goog.Promise(function(n,r){o.onload=n,o.onerror=r});return goog.dom.appendChild(document.head,o),i};sync.util.dom.loadCSSFile=function(t){if(document.createStyleSheet)document.createStyleSheet(t);else{var o;o=goog.dom.createDom("link"),o.rel="stylesheet",o.type="text/css",o.href=t,goog.dom.appendChild(document.head,o)}};sync.util.dom.wrap=function(t,o){goog.dom.replaceNode(t,o);for(var i=t;i.firstElementChild;)i=i.firstElementChild;goog.dom.insertChildAt(i,o,0)};sync.util.dom.inIframe=function(){try{return window.self!==window.top}catch{return!0}};sync.util.dom.MAX_TRIES_VISIBILITY=5*60;sync.util.dom.waitForVisibility=function(t){return new goog.Promise(function(o){function i(n){t&&n<sync.util.dom.MAX_TRIES_VISIBILITY&&(goog.style.getSize(t).height===0?setTimeout(goog.bind(i,null,n+1),1e3):o(n))}i(0)})};sync.util.dom.focusFirstTarget=function(t){var o=t.querySelector('[tabindex]:not([tabindex="-1"]), input:not([tabindex="-1"]), select:not([tabindex="-1"]), textarea:not([tabindex="-1"]), button:not([tabindex="-1"]), a[href]:not([tabindex="-1"]), area[href]:not([tabindex="-1"])');o&&o.focus()};sync.util.dom.scrollIntoViewWithMargin=function(t,o,i,n){var r=goog.style.getPageOffset(t),s=goog.style.getSize(t);r.x-=i.x,r.y-=i.y,s.width+=i.x,s.height+=i.y;var a=goog.style.getPageOffset(o),l=goog.style.getBorderBox(o),c=r.x-a.x-l.left,d=r.y-a.y-l.top,g=o.clientHeight-s.height,m=120,v=-5,C=o.clientWidth-Math.abs(c+i.x),N=2,D=n*N;o.scrollLeft>0&&c<v?o.scrollLeft-=D+Math.abs(c):C<m&&(o.scrollLeft+=c-D),o.scrollTop+=Math.min(d,Math.max(d-g,0))};sync.util.indexInParent=sync.util.dom.indexInParent;sync.util.flattenElement=sync.util.dom.flattenElement;sync.util.normalize=sync.util.dom.normalize;sync.util.loadJsFile=sync.util.dom.loadJsFile;sync.util.loadCSSFile=sync.util.dom.loadCSSFile;goog.dom.getWindow_=function(t){return t===document?window:t.parentWindow||t.defaultView};sync.util.dom.removeClass=function(t,o){var i=t.getElementsByClassName(o);goog.array.toArray(i).forEach(function(n){goog.dom.classlist.remove(n,o)},this)};sync.util.dom.removeAllClasses=function(t,o){var i=t.getElementsByClassName(o.join(" "));goog.array.toArray(i).forEach(function(n){goog.dom.classlist.removeAll(n,o)},this)};sync.util.dom.setAttributes=function(t,o){if(t&&o)for(var i in o)o.hasOwnProperty(i)&&t.setAttribute(i,o[i])};sync.util.dom.shallowEquivalent=function(t,o){return t=t.cloneNode(!1),o=o.cloneNode(!1),sync.util.dom.normalizeClass(t),sync.util.dom.normalizeClass(o),t.isEqualNode(o)};sync.util.dom.normalizeClass=function(t){if(goog.dom.isElement(t)){var o=goog.array.toArray(t.classList).sort();t.setAttribute("class",o.join(" "))}};sync.util.dom.waitForHtmlDocToBeVisible=function(){var t;return document.visibilityState==="visible"?t=goog.Promise.resolve():t=sync.events.listenOnce(document,goog.events.EventType.VISIBILITYCHANGE),t};sync.util.dom.handleFileDownloadByDevice=function(t,o){if(goog.userAgent.ANDROID||goog.userAgent.IPAD||goog.userAgent.IPHONE){var i=sync.util.open(goog.userAgent.product.FIREFOX?o:null);setTimeout(goog.bind(function(){i.location=this.url},this),0)}else goog.dom.removeNode(t),t=goog.dom.createDom("iframe",{src:o}),document.body.appendChild(t)};var GS=sync.util.dom;namespace("sync.util.promise");sync.util.promise.delayPromise=function(t){return new goog.Promise(function(o,i){setTimeout(function(){o("timeout")},t)})};sync.util.promise.delay=function(t){return new Promise(o=>setTimeout(o,t))};sync.util.promise.nextTick=function(t){return Promise.resolve().then(t)};sync.util.promise.createResolver=function(){var t,o,i=new Promise((n,r)=>{t=n,o=r});return{promise:i,resolve:t,reject:o}};sync.util.promise.promisify=function(t,o){var i=arguments.length>=2;return function(){var r=Array.prototype.slice.call(arguments),s=i?o:this;return new goog.Promise(function(a,l){r.push(function(d,g){d?l(d):a(g)}),t.apply(s,r)})}};sync.util.promise.nativePromise=function(t){return new Promise(function(o,i){t.then(o),t.thenCatch(i)})};sync.util.promise.googPromise=function(t){return new goog.Promise(function(o,i){t.then(o),t.catch(i)})};sync.util.promise.finally=function(t,o){t.finally?t.finally(o):t.thenAlways(o)};sync.util.promise.thenNodeStyle=function(t,o){o&&(t.then(function(i){o(null,i)}),t.catch(o))};var XS=sync.util.promise;goog.require("goog.structs.Map");namespace("sync.model");var Pt=function(t){this.cellsMatrix=[],this.rows=[],this.cellsStartIndexes=new goog.structs.Map;for(var o=0,i=Pt.findRows(t),n=0;n<i.length;n++)this.cellsMatrix[n]=[];for(var r of i){var s=0;this.rows.push(h.getIdOfXmlNode(r));var a=Pt.getCellsInRow_(r);for(var l of a){s=this.determineColumnIndex_(l,o,s);var c=l.colSpan,d=l.rowSpan,g=h.getIdOfXmlNode(l);this.cellsStartIndexes.set(g,{row:o,column:s}),this.fillCells_(o,s,c,d,g),s=s+c}o++}};Pt.prototype.fillCells_=function(t,o,i,n,r){for(var s=0;s<n;s++)for(var a=0;a<i;a++)this.cellsMatrix[t+s]&&(this.cellsMatrix[t+s][o+a]=r)};Pt.prototype.getCellCoords=function(t){return this.cellsStartIndexes.get(t)};Pt.prototype.getNumberOfRows=function(){return this.rows.length};Pt.findRows=function(t){var o=sync.model.XmlDom.getContainingXmlNode(t),i=Array.from(o.querySelectorAll("tr[data-oxy='true']")),n=o.querySelectorAll(":scope tr tr[data-oxy='true']");if(n.length>0){var r=new Set(n);i=i.filter(s=>!r.has(s))}return i};Pt.prototype.determineColumnIndex_=function(t,o,i){for(var n=i;this.cellsMatrix[o][n];)n++;return n};Pt.getCellsInRow_=function(t){return Array.from(t.querySelectorAll(":scope > td[data-oxy='true'], :scope > th[data-oxy='true']"))};Pt.prototype.getCellsByRowFromRectangle_=function(t,o){for(var i=this.cellsStartIndexes.get(t),n=this.cellsStartIndexes.get(o),r=Math.min(i.row,n.row),s=Math.min(i.column,n.column),a=Math.max(i.row,n.row),l=Math.max(i.column,n.column),c=[],d=r;d<=a;d++){for(var g=[],m=s;m<=l;m++)g.push(this.cellsMatrix[d][m]);c.push(g)}return c};Pt.prototype.getCellsFromRectangle=function(t,o){var i=this.getCellsByRowFromRectangle_(t,o),n=[];return goog.array.forEach(i,function(r){goog.array.extend(n,r)}),n};Pt.prototype.getStartIndex=function(t){return this.cellsStartIndexes.get(t)};Pt.prototype.getCell=function(t,o){var i=null;if(o>=0&&t>=0&&this.cellsMatrix.length>t){var n=this.cellsMatrix[t];n&&n.length>o&&(i=n[o])}return i};Pt.prototype.getSiblingCell=function(t,o){for(var i=null,n=this.getStartIndex(t),r=n.row,s=n.column;(!i||i===t)&&(s=o?s+1:s-1,i=this.getCell(r,s),i!==null););return i};Pt.prototype.getRowCellsCount=function(t){var o=-1;if(this.cellsMatrix.length>t){var i=this.cellsMatrix[t];i&&(o=i.length)}return o};Pt.prototype.getFullyIncludedRows=function(t,o){var i=[],n=this.cellsStartIndexes.get(t),r=this.cellsStartIndexes.get(o),s=n.row,a=r.row,l=this.cellsMatrix[s].length,c=this.cellsMatrix[a].length;if(this.cellsMatrix[s][0]===t&&this.cellsMatrix[a][c-1]===o||this.cellsMatrix[s][l-1]===t&&this.cellsMatrix[a][0]===o)for(var d=Math.min(s,a),g=Math.max(s,a),m=d;m<=g;m++)i.push(this.rows[m]);return i};Pt.prototype.getSelectedIntervals=function(t,o){var i=this.getCellsByRowFromRectangle_(t,o),n=[];return goog.array.forEach(i,function(r){for(var s=r[0],a=r[0],l=1;l<r.length;l++){var c=h.getInstance().getXmlNodeById(a);h.getInstance().getXmlNodeById(r[l])===sync.model.XmlDom.getNextSibling(c)||(n.push({start:s,end:a}),s=r[l]),a=r[l]}n.push({start:s,end:a})}),this.cellsStartIndexes.get(t).row>this.cellsStartIndexes.get(o).row&&n.reverse(),n};var ps=Pt;sync.model.TableLayout=Pt;namespace("sync.api.dom");function Bv(t,o){var i;if(typeof t=="string"){if(i=o.getXmlNodeById(t),!i)throw new ti(t)}else i=t;for(;!Ml.isDocument(i);)i=Ml.getParentNode(i);return i}sync.api.dom.createApiNode=function(t){var o=h.getInstance(),i=Bv(t,o),n=h.getIdOfXmlNode(i),r=new td(n,o);return r.createApiNodeOrParent(t)};sync.api.dom.findCommonAncestor=function(t){var o,i=arguments,n=i.length;if(n===0)return null;if(n===1)return i[0];var r=[],s=1/0;for(o=0;o<n;++o){for(var a=[],l=i[o];l;)a.unshift(l),l=l.parentNode;r.push(a),s=Math.min(s,a.length)}var c=null;for(o=0;o<s;++o){for(var d=r[0][o],g=1;g<n;++g)if(!d.isSameNode(r[g][o]))return c;c=d}return c};sync.api.dom.getAncestorElement=function(t,o){for(var i=null,n=t;n&&n.getType()!==goog.dom.NodeType.DOCUMENT;){if(n.getType()===goog.dom.NodeType.ELEMENT&&o(n)){i=n;break}n=n.getParent()}return i};var tT=sync.api.dom;goog.require("goog.dom");goog.require("goog.dom.dataset");goog.require("goog.functions");goog.require("goog.dom.TextRange");goog.require("goog.dom.Range");namespace("sync.select");sync.select.Selection=function(t,o,i,n){this.start=t,this.end=o||t,i||n?(this.anchor=i,this.focus=n):(this.anchor=t,this.focus=this.end)};goog.inherits(sync.select.Selection,sync.api.Selection);sync.select.Selection.prototype.isInsideDocument=function(t){var o=this.getDocument();return o&&goog.dom.contains(t,o)};sync.select.Selection.prototype.getDocument=function(){var t=goog.dom.findCommonAncestor(this.start.container,this.end.container);return goog.dom.getAncestor(t,sync.model.XmlDom.isDocument,!0)};sync.select.Selection.prototype.isEmpty=function(){return this.start===this.end||this.start.equals(this.end)};sync.select.Selection.prototype.hasXMLContent=function(){var t=this.start.toRelativeContentPosition(),o=this.end.toRelativeContentPosition();return t.nodeId!=o.nodeId||t.sentinelType!=o.sentinelType||t.distance!=o.distance};sync.select.Selection.prototype.getNodeAtCaret=function(t){var o=null;return this.isEmpty()&&(o=this.getNodeAt_(this.focus,t)),o};sync.select.Selection.prototype.getFullySelectedNode=function(){var t=this.getFullySelectedNodeId();return t?sync.api.dom.createApiNode(t):null};sync.select.Selection.prototype.getFullySelectedNodeId=function(){var t=null,o=p.fromHTMLPosition(this.start),i=o.getContentInformation();if(i&&i.isOnStartTag()){var n=p.fromHTMLPosition(this.end),r=n.getContentInformationBefore();r&&r.isOnEndTag()&&i.tagElementId==r.tagElementId&&(t=i.tagElementId)}return t};sync.select.Selection.prototype.getNodeAtSelection=function(t){return this.getNodeAtSelection_(this.focus,t)};sync.select.Selection.prototype.getNodeAtSelectionStart=function(t){return this.getNodeAtSelection_(this.start,t)};sync.select.Selection.prototype.getNodeAtSelectionEnd=function(t){return this.getNodeAtSelection_(this.end,t)};sync.select.Selection.prototype.getNodeAtSelection_=function(t,o){var i=this.getNodeAtCaret(o);return i||(i=this.getFullySelectedNode()),i||(i=this.getNodeAt_(t,o)),i};sync.select.Selection.prototype.getNodeAt_=function(t,o){var i=null;if(o){var n=p.getTextNodeAtPositionIfExists(t.toRelativeContentPosition());n&&(i=sync.api.dom.createApiNode(n))}if(!i){var r=p.getNodeIdAt(t);r&&(i=sync.api.dom.createApiNode(r))}return i};sync.select.Selection.prototype.getNodeAtAnchor_=function(){var t=null,o=p.getNodeIdAt(this.anchor);return o&&(t=sync.api.dom.createApiNode(o)),t};sync.select.Selection.prototype.getBoundingClientRect=function(){return sync.positioning.getSelectionRects(this).boundingRect};sync.select.Selection.prototype.isBackwards=function(){return!this.isEmpty()&&this.focus.equals(this.start)};sync.select.Selection.prototype.inverted=function(){var t=new sync.select.Selection(this.start,this.end,this.anchor,this.focus),o=t.focus;return t.focus=t.anchor,t.anchor=o,t};sync.select.Selection.prototype.extend=function(t){var o=this.start.toRelativeContentPosition(),i=this.end.toRelativeContentPosition();return o&&i&&goog.object.extend(t,{startReferenceNodeId:o.nodeId,startSentinelType:o.sentinelType,startDistance:o.distance,endReferenceNodeId:i.nodeId,endSentinelType:i.sentinelType,endDistance:i.distance,isBackwards:this.anchor==this.end}),t};sync.select.Selection.prototype.start=null;sync.select.Selection.prototype.end=null;sync.select.Selection.prototype.focus=null;sync.select.Selection.prototype.anchor=null;sync.select.Selection.prototype.equals=function(t){return t!=null&&this.getType()===t.getType()&&this.start.container==t.start.container&&this.start.offset==t.start.offset&&this.end.container==t.end.container&&this.end.offset==t.end.offset};sync.select.Selection.prototype.getType=function(){return"base"};sync.select.Selection.prototype.toString=function(){return this.isEmpty()?"{ caret: "+this.start.toString()+"}":"{ anchor: "+this.anchor.toString()+", focus: "+this.focus.toString()+"}"};sync.select.getSelection=function(){return sync.select.selectionHandler_?sync.select.selectionHandler_.getCurrentSelection():null};sync.select.setSelection=function(t){sync.select.selectionHandler_.setCurrentSelection(t)};sync.select.restoreSelection=function(){sync.select.selectionHandler_.restoreSelectionInBrowser()};sync.select.setSelectionHandler=function(t){sync.select.selectionHandler_=t};sync.select.evalSelectionFunction=function(t){return sync.select.selectionHandler_.applyCachedFunction(t)};sync.select.selectionHandler_=null;sync.select.Selection.prototype.save=function(){var t=this.start.toRelativeContentPosition(),o,i,n;return this.isEmpty()?n=t:n=this.end.toRelativeContentPosition(),this.isBackwards()?(i=n,o=t):(i=t,o=n),new sync.select.SavedSelection(t,n,i,o)};sync.select.SavedSelection=function(t,o,i,n){this.start=t,this.end=o||this.start,this.anchor=i||this.start,this.focus=n||this.end};sync.select.SavedSelection.prototype.restore=function(){var t=this.isCollapsed(),o=this.isBackwards(),i=this.start.toHTMLPosition(),n=t?i:this.end.toHTMLPosition(),r=o?n:i,s=o?i:n;return new sync.select.Selection(i,n,r,s)};sync.select.SavedSelection.prototype.extend=function(t){goog.object.extend(t,this.toJson())};sync.select.SavedSelection.prototype.toJson=function(){var t=this.start,o=this.end;return{startReferenceNodeId:t.nodeId,startSentinelType:t.sentinelType,startDistance:t.distance,endReferenceNodeId:o.nodeId,endSentinelType:o.sentinelType,endDistance:o.distance,isBackwards:this.isBackwards()}};sync.select.SavedSelection.prototype.movedBy=function(t){return new sync.select.SavedSelection(this.start.movedBy(t),this.end.movedBy(t),this.anchor.movedBy(t),this.focus.movedBy(t))};sync.select.SavedSelection.prototype.getType=function(){return"base"};sync.select.SavedSelection.prototype.equals=function(t){return this.getType()===t.getType()&&this.start.equals(t.start)&&this.end.equals(t.end)&&this.focus.equals(t.focus)&&this.anchor.equals(t.anchor)};sync.select.SavedSelection.prototype.isBackwards=function(){return this.start.equals(this.focus)};sync.select.SavedSelection.prototype.isCollapsed=function(){return this.start.equals(this.end)};sync.select.Selection.prototype.extendedTo=function(t,o,i){return this.extendedToRelativePos(new sync.position.RelativeContentPosition(t.id,i?f.AFTER:f.BEFORE,o))};sync.select.Selection.prototype.extendedToRelativePos=function(t){var o,i,n=this.anchor,r;r=t.toHTMLPosition();var s=p.comparePositions(r.container,r.offset,n.container,n.offset);return s===0?o=i=r:s<0?(o=r,i=n):(i=r,o=n),new sync.select.Selection(o,i,n,r)};sync.select.Selection.prototype.extendTo=function(t,o,i){var n=this.extendedTo(t,o,i);this.start=n.start,this.end=n.end,this.anchor=n.anchor,this.focus=n.focus};sync.select.Selection.prototype.getCaretPositionInformation=function(){return p.fromHTMLPosition(this.focus).getContentInformation()};var pT=sync.select;namespace("sync.select");var Fe=function(t,o,i,n){this.anchorCellId_=t,this.targetCellId_=o,this.tableLayout_=n||new ps(sync.util.TableUtil.getParentTableElement(t)),this.selectedTableNodeId_=i;var r=p.htmlPosBeforeEndSentinel(o);sync.select.Selection.call(this,r)};goog.inherits(Fe,sync.select.Selection);Fe.prototype.getTableLayout=function(){return this.tableLayout_};Fe.prototype.getTargetCellId=function(){return this.targetCellId_};Fe.prototype.getAnchorCellId=function(){return this.anchorCellId_};Fe.prototype.isOnlyOneWholeColumnSelected=function(){let t=this.anchorCellId_,o=this.targetCellId_,i=this.tableLayout_.getCellCoords(t),n=this.tableLayout_.getCellCoords(o),r=Math.min(i.column,n.column),s=Math.max(i.column,n.column),a=Math.min(i.row,n.row),l=Math.max(i.row,n.row);return a===0&&this.tableLayout_.getCell(l,r)===this.tableLayout_.getCell(this.tableLayout_.getNumberOfRows()-1,r)&&r===s};Fe.prototype.isEmpty=function(){return!1};Fe.prototype.hasXMLContent=function(){return!0};Fe.prototype.getFullySelectedNodeId=function(){if(this.fullySelectedNodeId_===void 0)if(this.fullySelectedNodeId_=null,this.selectedTableNodeId_)this.fullySelectedNodeId_=this.selectedTableNodeId_;else if(this.targetCellId_===this.anchorCellId_)this.fullySelectedNodeId_=this.targetCellId_;else{var t=this.tableLayout_.getFullyIncludedRows(this.anchorCellId_,this.targetCellId_),o=sync.util.TableUtil.getFullySelectedTableNode(t);o&&(this.fullySelectedNodeId_=h.getIdOfXmlNode(o))}return this.fullySelectedNodeId_};Fe.prototype.isBackwards=function(){var t=this.tableLayout_.getStartIndex(this.anchorCellId_),o=this.tableLayout_.getStartIndex(this.targetCellId_),i=!1;return t.row>o.row?i=!0:t.row===o.row&&(i=t.column>o.column),i};Fe.prototype.extend=function(t){var o=this.getFullySelectedNodeId();if(o){var i=p.createSelectionAroundXmlNode(o);i.extend(t)}else Fe.superClass_.extend.call(this,t),goog.object.extend(t,{selectedIntervals:this.getSelectionIntervals_()});this.isOnlyOneWholeColumnSelected()&&(Fe.superClass_.extend.call(this,t),goog.object.extend(t,{selectedIntervals:this.getSelectionIntervals_(),isAColumnSelected:!0}))};Fe.prototype.getSelectionIntervals_=function(){var t=this.tableLayout_.getSelectedIntervals(this.anchorCellId_,this.targetCellId_);return goog.array.map(t,function(o){var i=p.createSelectionAroundXmlNode(o.start).start;return JSON.stringify({start:i.toRelativeContentPosition().toJson(),end:new sync.position.RelativeContentPosition(o.end,f.AFTER,0).toJson()})})};Fe.prototype.equals=function(t){return t instanceof Fe&&Fe.superClass_.equals.call(this,this,t)&&this.targetCellId_===t.targetCellId_&&this.anchorCellId_===t.anchorCellId_&&this.selectedTableNodeId_===t.selectedTableNodeId_};Fe.prototype.getType=function(){return"table"};Fe.prototype.extendTo=function(t,o,i){};Fe.prototype.toString=function(){return"{ caretPosition: "+this.start.toString()+", anchorCellId: "+this.getAnchorCellId()+", targetCellId: "+this.getTargetCellId()+"}"};Fe.prototype.save=function(){var t=this.start.toRelativeContentPosition();return new sync.select.TableSavedSelection(t,this.anchorCellId_,this.targetCellId_,this.isBackwards(),this.getFullySelectedNodeId(),this.tableLayout_)};Fe.prototype.getSelectedCells=function(){return this.tableLayout_.getCellsFromRectangle(this.anchorCellId_,this.targetCellId_)};sync.select.TableSavedSelection=function(t,o,i,n,r,s){this.anchorCellId_=o,this.targetCellId_=i,this.backwards_=n,this.fullySelectedNodeId_=r,this.tableLayout_=s,sync.select.SavedSelection.call(this,t)};goog.inherits(sync.select.TableSavedSelection,sync.select.SavedSelection);sync.select.TableSavedSelection.prototype.restore=function(){return new Fe(this.anchorCellId_,this.targetCellId_,this.fullySelectedNodeId_,this.tableLayout_)};sync.select.TableSavedSelection.prototype.equals=function(t){return t instanceof sync.select.TableSavedSelection&&sync.select.TableSavedSelection.superClass_.equals.call(this,this,t)&&this.targetCellId_===t.targetCellId_&&this.anchorCellId_===t.anchorCellId_&&this.fullySelectedNodeId_===t.fullySelectedNodeId_};sync.select.TableSavedSelection.prototype.getType=function(){return"table"};sync.select.TableSavedSelection.prototype.isCollapsed=function(){return!1};sync.select.TableSavedSelection.prototype.isBackwards=function(){return this.backwards_};sync.select.TableSavedSelection.prototype.toJson=function(){var t,o=this.fullySelectedNodeId_;if(o){var i=p.createSelectionAroundXmlNode(o);t=i.save().toJson()}else t=sync.select.TableSavedSelection.superClass_.toJson.call(this),goog.object.extend(t,{anchorCellId:this.anchorCellId_,targetCellId:this.targetCellId_});return t};sync.select.TableSavedSelection.prototype.extend=function(t){return this.restore().extend(t)};var z=Fe;sync.select.TableSelection=Fe;goog.require("goog.math.Rect");goog.require("goog.math.Coordinate");namespace("sync.positioning");sync.positioning.getOffset=function(t,o){var i=sync.positioning.getCoordinate(t),n=sync.positioning.getCoordinate(o);return i&&n&&(i.translate(-1*n.x,-1*n.y),i.translate(o.scrollLeft,o.scrollTop)),i};sync.positioning.NULL_RECT=new goog.math.Rect(0,0,0,0);sync.positioning.getSelectionRectsRelativeToAncestor=function(t,o){var i=sync.positioning.getSelectionRects(t),n=sync.positioning.getCoordinate(o);return n&&(i.boundingRect.translate(-1*n.x,-1*n.y),i.boundingRect.translate(o.scrollLeft,o.scrollTop),i.focusRect.translate(-1*n.x,-1*n.y),i.focusRect.translate(o.scrollLeft,o.scrollTop)),i};sync.positioning.getSelectionRects=function(t){var o=sync.positioning.getSelectionBoundingRect_(t),i=t.focus.getCaretRect();if(o!==null?o=o.round():o=i.clone(),!o.intersects(i))if(t.isBackwards()){var n=o.getTopLeft();i=new goog.math.Rect(n.x,n.y,0,i.height)}else{var r=o.getBottomRight();i=new goog.math.Rect(r.x,r.y-i.height,0,i.height)}return{boundingRect:o,focusRect:i}};sync.positioning.getSelectedSentinelInfo_=function(t){var o=p.fromHTMLPosition(t.start),i=o.getContentInformation();if(i&&!i.isOnText()){var n=p.fromHTMLPosition(t.end),r=n.getContentInformationBefore();if(r&&r.type===i.type&&i.tagElementId===r.tagElementId)return i}return null};sync.positioning.getSelectionBoundingRect_=function(t){var o;if(t instanceof z)o=sync.positioning.getTableSelectionBoundingRect_(t);else{var i=sync.positioning.getSelectedSentinelInfo_(t);if(i){var n,r=h.getInstance(),s=r.getXmlNodeById(i.tagElementId);i.isOnStartTag()?n=r.getStartSentinelOfXmlElem(s):n=r.getEndSentinelOfXmlElem(s),n=sync.model.XmlDom.getWrappedSentinel(n),n.nodeType===goog.dom.NodeType.COMMENT?o=sync.positioning.getTableSentinelBoundingRect_(n):o=sync.positioning.getNodeBoundingRect(n)}else{var a=document.createRange();a.setStart(t.start.container,t.start.offset),a.setEnd(t.end.container,t.end.offset);var l=a.getBoundingClientRect();o=new goog.math.Rect(l.left,l.top,l.width,l.height)}}return goog.math.Rect.equals(o,sync.positioning.NULL_RECT)?null:o};sync.positioning.getTableSentinelBoundingRect_=function(t){var o=p.getSentinelParentId(t),i=h.getInstance().getXmlNodeById(o),n=sync.positioning.getNodeBoundingRect(i);return n!==null&&(n.clone(),f.BEFORE===p.getSentinelType(t)||(n.top+=n.height),n.height=1),n};sync.positioning.getTableSelectionBoundingRect_=function(t){var o=h.getInstance().getXmlNodeById(t.getTargetCellId()),i=h.getInstance().getXmlNodeById(t.getAnchorCellId()),n=o.getBoundingClientRect(),r=i.getBoundingClientRect();return n=new goog.math.Rect(n.left,n.top,n.width,n.height),r=new goog.math.Rect(r.left,r.top,r.width,r.height),n.boundingRect(r),n.round()};sync.positioning.getNodeBoundingRect=function(t){var o=goog.style.getPageOffset(t),i=t.getBoundingClientRect(),n=new goog.math.Rect(o.x,o.y,i.width,i.height);if(goog.math.Rect.equals(n,sync.positioning.NULL_RECT)){var r=new T(t,0);return r.getCaretRect()}else return n};sync.positioning.getCoordinate=function(t){var o,i;if(t.nodeType===goog.dom.NodeType.TEXT){var n=document.createRange();n.selectNode(t);var r=n.getClientRects();r.length===0?(i=sync.positioning.getNearestDisplayedCoordinate(t),o=i?i.coordinate:null):o=sync.positioning.getStartCoordinate_(r)}else t.offsetParent?o=sync.positioning.getStartCoordinate_(t.getClientRects()):(i=sync.positioning.getNearestDisplayedCoordinate(t),o=i?i.coordinate:null);return o};sync.positioning.get1stClientRectHeight=function(t){var o=16,i;if(t.getClientRects)i=t.getClientRects();else{var n=document.createRange();n.selectNode(t),i=n.getClientRects()}return i[0]?i[0].height:o};sync.positioning.getNearestDisplayedCoordinate=function(t){for(var o;o=sync.positioning.getCoordOfNearestDisplayedSibling_(t),!o;)if(t=t.parentNode,t){if(t.offsetParent){o={coordinate:sync.positioning.getStartCoordinate_(t.getClientRects()),onNodeStart:!0,element:t};break}}else break;return o};sync.positioning.getCoordOfNearestDisplayedSibling_=function(t){var o=null,i=null,n,r=t,s=t;for(r=r.previousSibling,s=s.nextSibling;r||s;){if(s)if(o=sync.positioning.getCoordOfNode_(s,!0),o){i=s,n=!0;break}else s=s.nextSibling;if(r)if(o=sync.positioning.getCoordOfNode_(r,!1),o){i=r,n=!1;break}else r=r.previousSibling}var a=null;return o&&(a={element:i,onNodeStart:n,coordinate:o}),a};sync.positioning.getCoordOfNode_=function(t,o){var i=null;if(t.nodeType===goog.dom.NodeType.TEXT){var n=document.createRange(),r;o?(n.setStart(t,0),n.setEnd(t,0)):(n.setStart(t,t.textContent.length),n.setEnd(t,t.textContent.length)),r=n.getClientRects(),r.length&&(i=sync.positioning.getStartCoordinate_(r))}else t.offsetParent&&(o?i=sync.positioning.getStartCoordinate_(t.getClientRects()):i=sync.positioning.getEndCoordinate_(t.getClientRects()));return i};sync.positioning.getStartCoordinate_=function(t){var o=t[0];return o.width===0&&t[1]&&(o=t[1]),new goog.math.Coordinate(o.left,o.top).round()};sync.positioning.getEndCoordinate_=function(t){var o=t[t.length-1],i=t[t.length-2];return o.width===0&&i&&(o=i),new goog.math.Coordinate(o.right,o.bottom).round()};var bT=sync.positioning;goog.require("goog.array");var kl=function(t,o,i){for(var n=i||goog.array.defaultCompare,r=0,s=0,a=[];r<t.length||s<o.length;){var l;if(r===t.length)l=!1;else if(s===o.length)l=!0;else{var c=n(t[r],o[s]);l=c<0}l?(a.push(t[r]),r++):(a.push(o[s]),s++)}return a},Lh=function(t,o){var i=[],n=0;for(let r of t)o(r)?i.push(r):(t[n]=r,n+=1);for(let r of i)t[n]=r,n+=1};goog.require("goog.array");namespace("sync.util");var re=function(){};re.CharType={LETTER_OR_DIGIT:0,WHITESPACE:1,CJK:2,OTHER:3};re.nextIndex=function(t,o){var i=o+1,n=t.charCodeAt(o);return re.isHighSurrogate(n)&&++i,i};re.prevIndex=function(t,o){var i=o-1;if(i>=0){var n=t.charCodeAt(i);re.isLowSurrogate(n)&&--i}return i};re.getCharType=function(t,o){var i=t.charCodeAt(o);re.isLowSurrogate(i)&&o>0&&(i=t.charCodeAt(o-1));var n=goog.array.binarySearch(re.intervals_,i,function(r,s){return r<s[0]?-1:r>s[1]?1:0});return n>=0?re.intervals_[n].type:re.CharType.OTHER};re.isHighSurrogate=function(t){return 55296<=t&&t<=56319};re.isLowSurrogate=function(t){return 56320<=t&&t<=57343};re.codePointLength=function(t){return Array.from(t).length};re.toIntervals_=function(t,o){var i=[],n=atob(o);return re.forEachInterval_(n,function(r,s){var a=[r,s];a.type=t,i.push(a)}),i};re.forEachInterval_=function(t,o){var i=0;re.forEachDelta_(t,function(n,r){var s=i+n,a=s+r;i=s,o(s,a)})};re.forEachDelta_=function(t,o){for(var i,n,r=0;r<t.length;){var s=t.charCodeAt(r);++r,s===255&&(i=t.charCodeAt(r).toString(2),i=goog.string.padNumber(i,8),++r,n=t.charCodeAt(r).toString(2),n=goog.string.padNumber(n,8),++r,s=parseInt(i+n,2));var a=t.charCodeAt(r);++r,a===255&&(i=t.charCodeAt(r).toString(2),i=goog.string.padNumber(i,8),++r,n=t.charCodeAt(r).toString(2),n=goog.string.padNumber(n,8),++r,a=parseInt(i+n,2)),o(s,a)}};re.intervalsComparator_=function(t,o){return t[0]<o[0]?-1:o[0]<t[0]?1:0};re.intervals_=kl(re.toIntervals_(re.CharType.LETTER_OR_DIGIT,"MAkRGSAZSQALAAUABhYYHiD/Acn/Ac4LGgQMAAIAggQGAQQDBQAHAAICBAACExVSVIqTpaclKAAHKHAaHwMxKkAJDgEDYmQAEAEJDhEAEQACHTtYZAAPKjQBBgAGFRoACgAEABgYIApAFBYRTjU5ABMACAkOCQsPFAcKAQQVFwYIAAQDBwARAA4BAwIHCxYACQUKAQQVFwYIAQMBAwEhAwUACAkMAhMICgIEFRcGCAEDBAgAEwAQAQYJEwAMBwoBBBUXBggBAwQIAB8BAwIHCQsAEgACBQkCBAMHAQMAAgEFAQUCBgsiABYJHwcJAgQWGA8TABsCCAEGCRoABQcJAgQWGAkLBAgAIQACAQYJCwETCAoCBCgrABEABgILAgcJFAULERUXGQgKAAMGJgkbLzEBDgYQCTEBAwACBAYXGQACCQsBCwADBAYACgkMAyQAIAkgBwkjPwR4Kj8KEQUKAwcABAEJAgcMGQACCRAlJwAGAAMqLAP/AQRISgMGBggAAgMGKCoDBiAiAwYGCAACAwYOEDg6AwZCaA8gVVgFCf8Ca/8CbhASGR9KUQcPDA4DEhEgESAMDgISM1cABQAECTAJEFhgBAchIwAGRVAeRicqBBArMBkgCTAWIDRgCRAJFwBeLkAGCwkzHSs3UiNACQ0wMwgQKi0CLAMFBQcBBQAGv/8BAP8BFf8BGAUIJSgFCAcJAAIAAgACHiE0NgYIAAQCBAYKAwYFCgwSAgQGewAOABEMcgAFAAMJCwAEBAsAAgACAAIDBQoNAwkECQA1Af8KfS4wLjCEiwMHAQ4lJwAGAAM3PwARFiAGCAYIBggGCAYIBggGCAZXAP8C1iqbH/9uYP8EjP8E0C0w/wEM/wEQGzAuPx4hRXcIC2ZpNDcIMwwOAgQDBRY0M0IxTgkiBQkAAgEDJTAWVC5LChEEBhgaKEACBAcMCRAWGgAEMTMABAEEBAcAAgAZAgUKEgIPBQgFCAUPBggGCCosDRRygAn/TxAGEwQKAAIJCwwOBAYAAgEDAQNrjf8Bav8BfT9CNV4LgAQGhpoJERkgGSU5"),kl(re.toIntervals_(re.CharType.WHITESPACE,"CQQTBP8WZAD/CYAGCAIgATcA/w+hAA=="),re.toIntervals_(re.CharType.CJK,"/xEA/wD//x2A/wFf/wFw/wEP/wFBXY//G///HED/Uf//W2Ac/wKg/yuj/yuwFhsw/yE1/wH//wUwH/8BcB4iBQgFCAUIAg=="),re.intervalsComparator_),re.intervalsComparator_);re.extractFirstLetter=function(t){let o=t.codePointAt(0);return(o?String.fromCodePoint(o):"?").toUpperCase()};re.countCodePoints=function(t){return Array.from(t).length};var ge=re;sync.util.Unicode=re;namespace("sync.caret");var eo=function(t,o){p.call(this),t&&p.moveToPosition(this,t),this.disabledBetweenTableCellSkipping_=o,this.isBetweenTableCells()&&this.next_()};goog.inherits(eo,p);eo.prototype.elementAcceptsCaret=function(t){var o=goog.dom.isElement(t);return o=o&&eo.superClass_.elementAcceptsCaret.call(this,t),o=o&&sync.style.isDisplayed(t),o};eo.prototype.isBetweenSurrogates_=function(){if(this.isOnTextNode()&&ge.isLowSurrogate(this.getChar().charCodeAt(0))){var t=this.getCharBefore();if(t&&ge.isHighSurrogate(t.charCodeAt(0)))return!0}return!1};eo.prototype.next_=function(){eo.superClass_.next_.call(this),this.isBetweenSurrogates_()&&eo.superClass_.next_.call(this),this.isBetweenTableCells()&&this.next_()};eo.prototype.prev_=function(){eo.superClass_.prev_.call(this),this.isBetweenSurrogates_()&&eo.superClass_.prev_.call(this),this.isBetweenTableCells()&&this.prev_()};eo.prototype.isValidCaretPosition=function(){var t=eo.superClass_.isValidCaretPosition.call(this),o=this.getNodeIdAtPosition_();if(o){var i=h.getInstance().getXmlNodeById(o);i&&(p.isTextHidden(i)||!sync.style.isDisplayed(i))&&(t=!1)}return t};eo.prototype.isBetweenTableCells=function(){if(this.disabledBetweenTableCellSkipping_)return!1;var t=!1,o=sync.model.XmlDom.getContainingXmlNode(this.node);if(o)if(o.tagName===String(goog.dom.TagName.TD)||o.tagName===String(goog.dom.TagName.TH)){var i=this.getContentInformation();i&&i.tagElementId&&i.isOnStartTag()&&(t=!0)}else(o.tagName===String(goog.dom.TagName.TR)||o.tagName===String(goog.dom.TagName.TBODY)||o.tagName===String(goog.dom.TagName.THEAD)||o.tagName===String(goog.dom.TagName.TFOOT))&&(t=!0);return t};eo.prototype.getCharType=function(){return this.getContentInformation().isOnText()?ge.getCharType(this.node.textContent,this.offset):-1};var ce=eo;sync.caret.VisualContentIterator=eo;var Ll=class{constructor(o){this.min_=o}trimTextStart(o){var i=this.getStartSentenceTrimCandidate_(o);if(i!==null)return i;var n=this.getStartSpaceTrimCandidate_(o);return this.isValidTrim_(n)?n:o}isValidTrim_(o){return o!==null&&o.length>=this.min_}getStartSpaceTrimCandidate_(o){var i=o.indexOf(" ");return i!==-1?o.substring(i+1):null}getStartSentenceTrimCandidate_(o){var i=this.getLastSentenceStartIndex_(o);return i!==-1?o.substring(i+". ".length):null}getLastSentenceStartIndex_(o){for(var i=-1,n,r=/[.?!] [A-Z]/g;n=r.exec(o);)i=n.index;return i}trimTextEnd(o){var i=this.getEndSentenceTrimCandidate_(o);if(i!==null)return i;var n=this.getEndSpaceTrimCandidate_(o);return this.isValidTrim_(n)?n:o}getEndSpaceTrimCandidate_(o){var i=o.lastIndexOf(" ");return i!==-1?o.substring(0,i):null}getEndSentenceTrimCandidate_(o){var i=o.match(/[.?!] [A-Z]/);return i?o.substring(0,i.index+1):null}};namespace("sync.model");var uo=function(){};uo.prototype.getTextBetween=function(t,o){var i=this.getInterval(t,o),n="";for(var r of i){var s=r.textNode;if(s){n+=s.textContent.substring(r.start,r.end);break}}return n};uo.prototype.getCharAt=function(t){var o=p.fromRelativeContentPosition(t),i=o.getContentInformation();return i&&i.isOnText()?o.getChar():null};uo.prototype.getCharBefore=function(t){var o=p.fromRelativeContentPosition(t),i=o.getContentInformationBefore();return i&&i.isOnText()?(o.prev(),o.getChar()):null};uo.prototype.getTextAfter=function(t,o){for(var i="",n=p.fromRelativeContentPosition(t),r=0;r<o;r++){if(n.isOnTextNode())i=i+n.getChar();else if(this.isBlockSentinelOrDocBoundary_(n))break;n.next()}let s=o/2;return new Ll(s).trimTextEnd(i)};uo.prototype.isBlockSentinelOrDocBoundary_=function(t){var o=t.getContentInformation();return o===null||!this.isInlineSentinel_(o.tagElementId)};uo.prototype.getTextBefore=function(t,o){for(var i="",n=p.fromRelativeContentPosition(t),r=0;r<o;r++){var s=this.moveIteratorBackwards_(n);if(s&&n.isOnTextNode())i=n.getChar()+i;else if(!s||this.isBlockSentinelOrDocBoundary_(n))break}let a=o/2;return new Ll(a).trimTextStart(i)};uo.prototype.moveIteratorBackwards_=function(t){try{return t.prev(),!0}catch{return!1}};uo.prototype.isInlineSentinel_=function(t){var o=p.getSentinelNode(t,f.BEFORE);return goog.dom.classlist.contains(o,"tag-inline")};uo.prototype.isOnlyText=function(t,o){var i=this.getInterval(t,o),n=!1;for(var r of i)if(r.sentinel){n=!0;break}return!n};uo.prototype.getInterval=function(t,o,i){for(var n=[];p.compareCanonicalRelativePositions(t,o)<0;){var r=new p.fromRelativeContentPosition(t),s=r.getContentInformation();if(!s)break;if(s.isOnText()){var a=p.getTextNodeAtPositionIfExists(t);if(!a)break;var l=new T(a,a.childNodes.length).toRelativeContentPosition(),c=this.minPos_(l,o);n.push({textNode:a,start:t.distance,end:c.distance}),t=c}else if(i&&s.isOnStartTag()&&this.isNodeBetweenPositions_(s.tagElementId,t,o))n.push({node:h.getInstance().getXmlNodeById(s.tagElementId)}),t=new sync.position.RelativeContentPosition(s.tagElementId,f.AFTER,0);else{if(n.push({sentinel:r.node}),p.isBoundarySentinel_(r.node))break;r.next(),t=r.toRelativeContentPosition()}}return n};uo.prototype.minPos_=function(t,o){return p.compareCanonicalRelativePositions(t,o)<0?t:o};uo.prototype.isNodeBetweenPositions_=function(t,o,i){var n=h.getInstance().getXmlNodeById(t),r=new T(n,0).toRelativeContentPosition(),s=new T(n,n.childNodes.length).toRelativeContentPosition();return p.compareCanonicalRelativePositions(o,r)<=0&&p.compareCanonicalRelativePositions(s,i)<=0};uo.getTextFromSelection=function(t){for(var o=new ce(t.start),i=new ce(t.end),n="";!o.equals(i);)o.getContentInformation().isOnText()&&(n+=o.getChar()),o.next();return n};var To=uo;sync.model.ContentModel=uo;var Hv=function(t,o,i,n){this.find=goog.isDefAndNotNull(t)?t:"",this.replace=goog.isDefAndNotNull(o)?o:null,this.matchCase=goog.isDefAndNotNull(i)?i==="true":null,this.wholeWords=goog.isDefAndNotNull(n)?n==="true":null},id=Hv;namespace("sync.util.find");sync.util.find.extractTextFromSelection=function(t){var o="";if(!t.isEmpty()){o=To.getTextFromSelection(t);var i=o.split(" ",2);i[1]===""&&(o=i[0])}return o};sync.util.find.createFindReplaceQueryFromSelection=function(t){var o=sync.util.find.extractTextFromSelection(t);return new id(o)};var GT=sync.util.find;goog.require("goog.dom.BrowserFeature");goog.require("goog.crypt.base64");goog.require("goog.object");goog.require("goog.userAgent");goog.require("goog.dom.classlist");goog.require("goog.dom.DomHelper");goog.require("goog.math.Size");namespace("sync.util");sync.util.genUid=function(){return sync.util.lastUid_++};sync.util.lastUid_=0;sync.util.createCachedFunction=function(t){return{id:sync.util.genUid(),fn_:t,apply:function(){return t.apply(null,arguments)}}};sync.util.extend=function(t,o){return goog.object.extend(t,o),t};sync.util.sameSiteNoneEnabledButOnHttp=function(){var t=sync.options.ServerOptions.getServerOption("force.cookies.samesite.none")===!0,o=location.protocol==="http:";return t&&o};sync.util.sameSiteNoneNeeded=function(){document.cookie="Try=H";var t=document.cookie.indexOf("Try=")!==-1;document.cookie="Try=1; expires=Thu, 01-Jan-1970 00:00:01 GMT";var o=!1;if(!t){var i=sync.options.ServerOptions.getServerOption("force.cookies.samesite.none")===!0,n,r;try{n=window.parent!==window,r=window.parent.location.hostname!==location.hostname}catch{r=!0}o=!i&&n&&r}return o};sync.util.setCookie=function(t,o,i){sync.util.cookieUtils.setCookie(t,o,i)};sync.util.getCookie=function(t){return sync.util.cookieUtils.getCookie(t)};sync.util.eraseCookie=function(t){sync.util.setCookie(t,"",-1)};sync.util.areCookiesEnabled=function(){if(navigator.cookieEnabled)return!0;document.cookie="T=H";var t=document.cookie.indexOf("T=")!==-1;return document.cookie="T=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",t};sync.util.sortMap=function(o){var i=[];for(var n in o)o.hasOwnProperty(n)&&i.push(n);i.sort();for(var r=[],s=0;s<i.length;s++)r[i[s]]=o[i[s]];return r};sync.util.isSafeToInsertTextClientSide=function(t,o){var i=!0;(!t||!t.isEmpty())&&(i=!1);var n=p.fromHTMLPosition(t.focus),r=n.getContentInformation();return r!=null?r.isOnText()||(r=n.getContentInformationBefore(),(!r||!r.isOnText())&&(i=!1)):i=!1,o.evalSelectionFunction(sync.util.isInReadOnlyContent)&&(i=!1),i};sync.util.isInReadOnlyContent=sync.util.createCachedFunction(function(t){var o=t.getNodeAtSelection(),i=t.focus,n=o&&o.getHtmlNode(),r=!1;if(goog.dom.dataset.get(n,"readonly")==="true")r=!0;else{var s=sync.model.XmlDom.getFirstChild(n);if(sync.model.XmlDom.isReference(s)&&!sync.model.XmlDom.isEntity(s)){var a=i.toRelativeContentPosition();a.distance===0&&a.sentinelType===f.BEFORE&&(r=!0)}}return r});sync.util.isTouchscreen=function(){return"ontouchstart"in window||"onmsgesturechange"in window};sync.util.getURLParameter=function(t){var o=new E(window.location),i=o.getUrlParam(t);return goog.isDefAndNotNull(i)?encodeURIComponent(i):null};sync.util.setUrlParameter=function(t,o){for(var i=window.location.search.substring(1),n=i.split("&"),r=[],s=!1,a=0;a<n.length;a++){var l=n[a].split("=");t===l[0]?(s=!0,o&&r.push({name:t,value:encodeURIComponent(o)})):r.push({name:l[0],value:l[1]})}!s&&o&&r.push({name:t,value:encodeURIComponent(o)});var c=r.length?"?":"";for(a=0;a<r.length;a++)c+=r[a].name+"="+r[a].value+(a===r.length-1?"":"&");var d=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")+window.location.pathname+c+window.location.hash,g=window.history.state||{};g[t]=o,window.history.replaceState(g,null,d)};sync.util.fixupFileUrl=function(t){return sync.util.isDevMode()&&t&&(t.indexOf("\\")!==-1||t.indexOf(":")===-1)&&(t=t.replace(/"/g,""),t="file:/"+t.replace(/\\/g,"/")),t};sync.util.serializeQueryString=function(t,o){var i="?url="+encodeURIComponent(t);for(var n in o)o.hasOwnProperty(n)&&(i+="&"+n+"="+encodeURIComponent(o[n]));var r=window.location.pathname.split("/"),s=r[r.length-1];return s+i};sync.util.getFileFromUrl=function(t){var o=new E(t);return decodeURIComponent(o.getFileName())};sync.util.getScreenWidth=function(){var t=Math.abs(window.orientation)-90==0?"landscape":"portrait";return t==="landscape"?screen.availHeight:screen.availWidth};sync.util.isMobile=function(){return goog.userAgent.ANDROID||goog.userAgent.IPAD||goog.userAgent.IPHONE};sync.util.getImageUrl=sync.util.image.getImageUrl;sync.util.hidpi_=null;sync.util.getHdpiFactor=function(){if(!sync.util.hidpi_){var t=window.devicePixelRatio,o=1.3;if(t)t>=o?sync.util.hidpi_=2:sync.util.hidpi_=1;else{var i=document.createElement("div");goog.dom.classlist.add(i,"-oxy-dpi-detect-class"),document.body.appendChild(i);try{var n=document.querySelector(".-oxy-dpi-detect-class");n.clientHeight&&n.clientHeight>o&&(sync.util.hidpi_=2)}finally{goog.dom.removeNode(i)}}}return sync.util.hidpi_};sync.util.computeHdpiIcon=function(t){var o=t;if(sync.util.getHdpiFactor()>1&&t){var i=t.lastIndexOf(".");o=t.substring(0,i)+"@2x"+t.substring(i)}return o};sync.util.renderLargeIcon=function(t){var o=null;return t&&(o=goog.dom.createDom("div","ui-action-large-icon"),goog.style.setStyle(o,"backgroundImage",'url("'+t+'")')),o};sync.util.renderSmallIcon=function(t){var o=null;return t&&(o=goog.dom.createDom("div","ui-action-small-icon"),goog.style.setStyle(o,"backgroundImage",'url("'+t+'")')),o};sync.util.getDocContainerAncestor=function(t){return goog.dom.getAncestor(t,function(o){return o.id==="editor-frame"})};sync.util.domHelper_=null;sync.util.getDocDomHelper=function(){if(sync.util.domHelper_==null){var t=document;sync.util.shouldUseIframe()&&(t=document.getElementById("editor-frame").contentWindow.document),sync.util.domHelper_=new goog.dom.DomHelper(t)}return sync.util.domHelper_};sync.util.shouldUseIframe=function(){return!1};sync.util.isDevMode=function(){var t=!1;return goog.isDef(t)?t:!0};sync.util.defaultRelativizeValueToUrl=function(t,o){if(!t)throw new Error("Argument value must be provided");if(!o)return t;var i=new E(o),n=new E(t);if(i.getDomain()!==n.getDomain()||i.getScheme()!==n.getScheme())return t;var r=sync.util.removeExtraDirectoryTraverses(i.getPathName()),s=r.lastIndexOf("/");r=r.substring(0,s+1);var a=sync.util.removeExtraDirectoryTraverses(n.getPathName());s=a.lastIndexOf("/");var l=a.substring(s+1);a=a.substring(0,s+1);var c=sync.util.commonPath(r,a),d=r.indexOf(c)+c.length,g=sync.util.commonPath(a,r),m=a.indexOf(g)+g.length,v=r.substring(d),C=a.substring(m),N=sync.util.countOccurrences(v,"/"),D="",H;for(H=0;H<N;H++)D+="../";D+=C?C+l:l;var ne=n.getQuery();ne&&(D+="?"+ne);var ht=n.getFragment();return ht&&(D+="#"+ht),D};sync.util.removeExtraDirectoryTraverses=function(t){for(var o=/\w+\/\.\.\//,i=new RegExp("/./","g"),n=new RegExp("//","g");o.test(t);)t=t.replace(o,"");for(;t.indexOf("/./")!==-1;)t=t.replace(i,"/");for(;t.indexOf("//")!==-1;)t=t.replace(n,"/");return t};sync.util.countOccurrences=function(t,o){if(t+="",o+="",o.length<=0)return t.length+1;for(var i=0,n=0,r=o.length;n=t.indexOf(o,n),n>=0;)i++,n+=r;return i};sync.util.commonPath=function(...t){var o="",i,n,r=[];for(i=0;i<t.length;i++){if(typeof t[i]!="string")throw new Error("Arguments must be strings");r[i]=t[i].split("/")}for(n=0;n<r[0].length;n++){var s=r[0][n],a=!0;for(i=1;i<r.length&&a;i++)if(r[i].length<n){a=!1;break}else a&=r[i][n]===s;if(a)(n!==r[0].length-1||s!=="")&&(o+=s+"/");else break}return o};sync.util.decodeB64=function(t){return t=t.replace(/\s/g,""),t=goog.crypt.base64.decodeString(t),t=t.replace(/([^a-zA-Z0-9])/g,function(o){var i=o.charCodeAt(0);return i>=16?"%"+i.toString(16):"%0"+i.toString(16)}),t.substring(0,9)==="%ef%bb%bf"&&(t=t.substring(9)),decodeURIComponent(t)};sync.util.encodeB64=function(t){return t=encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(o,i){return String.fromCharCode("0x"+i)}),goog.crypt.base64.encodeString(t)};sync.util.isUrl=function(t){var o=new goog.Uri(t);return t===o.toString()&&!!o.getScheme()};sync.util.makeIterator=function(t){var o=0;return{next:function(){return o<t.length?{value:t[o++],done:!1}:{done:!0}}}};sync.util.goToDashboard=function(){sync.util.setUrlParameter("url"),window.location.reload()};sync.util.trimMessage=function(t,o){var i=0,n=t;if(t.length>o){var r=t.indexOf(".");if(r>0&&r<o)for(;r<o&&r>0;)i=r,r=t.indexOf(".",r+1);else i=t.indexOf(" ",o)}return i>0&&(n=t.substring(0,i+1)),n};sync.util.getInnerHTML=function(t){return t.innerHTML};sync.util.getOuterHTML=function(t){return t.outerHTML};sync.util.openUrlInIframe_=null;sync.util.open=function(t,o){if(goog.userAgent.EDGE){if(!sync.util.openUrlInIframe_){var i=document.createElement("iframe");document.body.appendChild(i),sync.util.openUrlInIframe_=i}return sync.util.openUrlInIframe_.contentWindow.open(t,o||"_blank")}else return window.open(t,o||"_blank","noreferrer")};sync.util.isOptionTrue=function(t){return t==="true"||t===!0};sync.util.deepEqual=function(t,o){if(goog.isString(t)||goog.isNull(t)||goog.isNull(o))return t===o;if(goog.isArray(t))return goog.isArray(o)&&goog.array.equals(t,o,sync.util.deepEqual);var i=Object.keys(t);return goog.array.equals(Object.keys(o),i)&&goog.array.every(i,n=>sync.util.deepEqual(t[n],o[n]))};sync.util.percentEncodeWithDots=function(t){var o=".",i="..";return t=t.split(o).join(i),o="%",i=".",t.split(o).join(i)};sync.util.dotEncodeURIComponent=function(t){return sync.util.percentEncodeWithDots(encodeURIComponent(t))};var sb=sync.util;namespace("sync.api");var gs=class{constructor(o,i,n,r,s,a){this.ditamapUrl=sync.util.fixupFileUrl(o),this.filterUrl=sync.util.fixupFileUrl(i),this.guessed=!!n,this.ditaProjectUrl=sync.util.fixupFileUrl(r),this.ditaProjectContextId=s,this.isProjectActive=!!a}};sync.api.DitaContext=gs;goog.require("goog.events.EventTarget");namespace("sync.api");sync.api.EditingContextManager=function(){goog.events.EventTarget.call(this)};goog.inherits(sync.api.EditingContextManager,goog.events.EventTarget);sync.api.EditingContextManager.prototype.getDitaContext=function(){return null};sync.api.EditingContextManager.prototype.updateDitaContext=function(t){};sync.api.EditingContextManager.EventTypes={CONTEXT_CHANGED:"editing_context_changed"};goog.require("goog.events.EventTarget");namespace("sync.util");var Tt=function(t){goog.events.EventTarget.call(this),this.storage=t};goog.inherits(Tt,goog.events.EventTarget);Tt.STORAGE_KEY="DITA.ditamap.history";Tt.prototype.addDitaContext=function(t){var o=this.getDitaContextHistory_(),i=this.getStorageEntry_(t);if(!!this.getEntryUrl_(i)){for(var n=0;n<o.length;n++)if(this.areEqual_(o[n],i)){o.splice(n,1);break}o.push(i);var r=10;o.splice(r,o.length-r-1);try{var s=this.storage||localStorage;s.setItem(Tt.STORAGE_KEY,JSON.stringify(o))}catch{}}};Tt.prototype.guessDitaContext=function(t,o){var i=this.getUrl_(t),n=this.getSameServerContexts_(i,o);return this.getBestCandidate_(n,i.getUrl())};Tt.prototype.guessDitaMap=function(t,o){var i=this.getUrl_(t),n=this.getSameServerMaps_(i,o);return this.getBestCandidate_(n,i.getUrl())};Tt.prototype.getBestCandidate_=function(t,o){if(!!t.length){for(var i=t.filter(function(c){var d=new E(c.ditamapUrl||c.ditaProjectUrl);d.setUserInfo("");var g=d.getFolderUrl();return goog.string.startsWith(o,g)}),n=i.length?i:t,r=n[0],s=this.getScore(n[0]),a=1;a<n.length;a++){var l=this.getScore(n[a]);l<=s&&(s=l,r=n[a])}return r}};Tt.prototype.getScore=function(t){return new E(this.getEntryUrl_(t)).getPathName().split("/").length};Tt.prototype.getSameServerContexts_=function(t,o){var i=this.getDitaContextHistory_();if(!o){var n=t.getScheme(),r=t.getDomain(),s=t.getPort();o=n+"://"+r+(s?":"+s:"")}return i.filter(function(a){var l=new E(a.ditamapUrl||a.ditaProjectUrl);return l.setUserInfo(""),goog.string.startsWith(l.getUrl(),o)})};Tt.prototype.getSameServerMaps_=function(t,o){var i=this.getSameServerContexts_(t,o);return i.filter(function(n){return goog.isDefAndNotNull(n.ditamapUrl)})};Tt.prototype.getDitaContextHistory_=function(){var t=[];try{var o=this.storage||localStorage;t=JSON.parse(o.getItem(Tt.STORAGE_KEY))||[];for(var i=0;i<t.length;i++)t[i]=this.getDitaContext_(t[i])}catch{}return t};Tt.prototype.getDitaContext_=function(t){return goog.isDefAndNotNull(t.ditamap)?new sync.api.DitaContext(t.ditamap,null):goog.isDefAndNotNull(t.ditamapUrl)?new sync.api.DitaContext(t.ditamapUrl,null):new sync.api.DitaContext(null,null,!1,t.ditaProjectUrl,t.ditaProjectContextId)};Tt.prototype.getStorageEntry_=function(t){if(t.isProjectActive){var o=t.ditaProjectUrl,i=t.ditaProjectContextId;return new sync.api.DitaContext(null,null,!1,o,i)}else return new sync.api.DitaContext(t.ditamapUrl,null)};Tt.prototype.areEqual_=function(t,o){return!sync.util.DitaContextUtil.isDitaContextChanged(t,o)};Tt.prototype.getEntryUrl_=function(t){return t.ditamapUrl||t.ditaProjectUrl};Tt.prototype.getUrl_=function(t){var o=new E(t);return o.setUserInfo(""),o};var Fh=Tt;sync.util.DitamapHistory=Tt;namespace("sync.util");sync.util.DitaContextUtil={};sync.util.DitaContextUtil.createDitaContext=function(t){if(t){var o=t["dita.project.url"];let i=t.ditamap;return(i==="null"||i==="")&&(i=null),new gs(i,t["dita.val.url"],!1,o,t["dita.project.contextid"],o!=null)}else return sync.util.DitaContextUtil.createEmptyDitaContext()};sync.util.DitaContextUtil.isDitaContextChanged=function(t,o){var i=!0;return o&&(i=t.ditamapUrl!==o.ditamapUrl||t.filterUrl!==o.filterUrl||t.guessed!==o.guessed,i=i||t.ditaProjectUrl!==o.ditaProjectUrl||t.ditaProjectContextId!==o.ditaProjectContextId||t.isProjectActive!==o.isProjectActive),i};sync.util.DitaContextUtil.clone=function(t){return new gs(t.ditamapUrl,t.filterUrl,t.guessed,t.ditaProjectUrl,t.ditaProjectContextId,t.isProjectActive)};sync.util.DitaContextUtil.areDitaContextsEqual=function(t,o){return sync.util.DitaContextUtil.isEqualIgnoringNullAndUndefined_(t.ditamapUrl,o.ditamapUrl)&&sync.util.DitaContextUtil.isEqualIgnoringNullAndUndefined_(t.filterUrl,o.filterUrl)&&sync.util.DitaContextUtil.isEqualIgnoringNullAndUndefined_(t.guessed,o.guessed)&&sync.util.DitaContextUtil.isEqualIgnoringNullAndUndefined_(t.ditaProjectUrl,o.ditaProjectUrl)&&sync.util.DitaContextUtil.isEqualIgnoringNullAndUndefined_(t.ditaProjectContextId,o.ditaProjectContextId)&&sync.util.DitaContextUtil.isEqualIgnoringNullAndUndefined_(t.isProjectActive,o.isProjectActive)};sync.util.DitaContextUtil.isEqualIgnoringNullAndUndefined_=function(t,o){return sync.util.DitaContextUtil.isNullOrUndefined_(t)&&sync.util.DitaContextUtil.isNullOrUndefined_(o)?!0:t===o};sync.util.DitaContextUtil.isNullOrUndefined_=function(t){return t==null};sync.util.DitaContextUtil.createEmptyDitaContext=function(){return new gs(null,null,!1,null,null,!1)};sync.util.DitaContextUtil.isNotEmpty=function(t){return goog.isDef(t.ditamapUrl)||goog.isDef(t.filterUrl)||goog.isDef(t.ditaProjectUrl)};var wg=sync.util.DitaContextUtil;goog.require("goog.Promise");namespace("sync.model");var Bo=function(){sync.api.EditingContextManager.call(this),this.ditaContext_=sync.util.DitaContextUtil.createEmptyDitaContext(),this.ditaContextHistory_=new Fh,this.eventHandler_=new goog.events.EventHandler(this)};goog.inherits(Bo,sync.api.EditingContextManager);Bo.EventTypes={SHOW_EXCLUDED_CONTENT_CHANGED:"show_excluded_content_changed"};Bo.prototype.getDitaContext=function(){return this.ditaContext_};Bo.prototype.guessDitaContext=function(t,o){return this.ditaContext_.filterUrl?this.ditaContextHistory_.guessDitaMap(t,o):this.ditaContextHistory_.guessDitaContext(t,o)};Bo.prototype.updateDitaContext=function(t){this.ditaContext_=t,this.ditaContextHistory_.addDitaContext(t),this.dispatchEvent(new goog.events.Event(sync.api.EditingContextManager.EventTypes.CONTEXT_CHANGED))};Bo.prototype.updateHiddenContentState=function(){this.isHiddenContent_()?(this.addHiddenContentStripe_(),this.isFilteredContentHidden_!==!0&&this.dispatchEvent(new goog.events.Event(Bo.EventTypes.SHOW_EXCLUDED_CONTENT_CHANGED)),this.isFilteredContentHidden_=!0):(this.removeHiddenContentStripe_(),this.isFilteredContentHidden_=!1,this.isFilteredContentHidden_!==!1&&this.dispatchEvent(new goog.events.Event(Bo.EventTypes.SHOW_EXCLUDED_CONTENT_CHANGED)))};Bo.prototype.addHiddenContentStripe_=function(){if(this.hiddenContentStripe_)workspace.addEditorStripe(this.hiddenContentStripe_);else{var t=workspace.createEditorStripe();goog.dom.classlist.addAll(t,["flash-message-info","hidden-content-stripe"]);var o=goog.dom.createDom("button","corner-close-button"),i=goog.dom.createDom("div","hidden-content-text",tr(msgs.FILTERED_CONTENT_HIDDEN_));i.title=tr(msgs.FILTERED_CONTENT_HIDDEN_),goog.dom.append(t,i,o),this.eventHandler_.listen(o,goog.events.EventType.CLICK,this.removeHiddenContentStripe_),this.hiddenContentStripe_=t}};Bo.prototype.removeHiddenContentStripe_=function(){this.hiddenContentStripe_&&workspace.removeEditorStripe(this.hiddenContentStripe_)};Bo.prototype.isHiddenContent_=function(){return workspace.getWorkspaceOptions().getOption("show.excluded.content")==="false"&&this.ditaContext_?this.ditaContext_.isProjectActive?Boolean(this.ditaContext_.ditaProjectContextId):Boolean(this.ditaContext_.filterUrl):!1};var nd=Bo;sync.model.EditingContextManager=Bo;namespace("sync.options");var kt=function(){var t=this.getUrlParams_();!t.userName&&t.author&&(t.userName=t.author,delete t.author),this.options=this.filterNonEditorSpecificParams_(t),this.firstEditorOptions=goog.object.clone(t),window.history.replaceState(this.firstEditorOptions,null),this.editingContextManager_=new nd,this.editingContextManager_.updateDitaContext(sync.util.DitaContextUtil.createDitaContext(this.options)),goog.events.listen(this.editingContextManager_,sync.api.EditingContextManager.EventTypes.CONTEXT_CHANGED,goog.bind(function(){var o=this.editingContextManager_.getDitaContext();o.guessed?(this.guessedDitamap=o.ditamap,this.guessedDitaProject=o.ditaProjectUrl,this.guessedContextId=o.ditaProjectContextId):(this.guessedDitamap=null,this.guessedDitaProject=null,this.guessedContextId=null,o.isProjectActive||!o.ditamapUrl?(o.ditaProjectContextId?this.options["dita.project.contextid"]=o.ditaProjectContextId:delete this.options["dita.project.contextid"],sync.util.setUrlParameter("dita.project.contextid",o.ditaProjectContextId),o.ditaProjectUrl?this.options["dita.project.url"]=o.ditaProjectUrl:delete this.options["dita.project.url"],sync.util.setUrlParameter("dita.project.url",o.ditaProjectUrl)):(delete this.options["dita.project.contextid"],delete this.options["dita.project.url"],sync.util.setUrlParameter("dita.project.contextid",null),sync.util.setUrlParameter("dita.project.url",null)),o.ditamapUrl?this.options.ditamap=o.ditamapUrl:delete this.options.ditamap,sync.util.setUrlParameter("ditamap",o.ditamapUrl),o.filterUrl?this.options["dita.val.url"]=o.filterUrl:delete this.options["dita.val.url"],sync.util.setUrlParameter("dita.val.url",o.filterUrl))},this)),k.getInstance().listenOption(S.STYLESHEET_TITLES,goog.bind(this.stylesheetTitlesChangedHandler_,this))};kt.prototype.stylesheetTitlesChangedHandler_=function(){sync.util.getURLParameter(S.STYLESHEET_TITLES)&&sync.util.setUrlParameter(S.STYLESHEET_TITLES,null)};kt.EDITOR_SPECIFIC_PARAMS=["roomId","roomType","url","title","content","contentType","stylesheet-titles","expandTopicRefs","editReferencesInPlace","spell.check.language","KeyscopeStack","search.find","search.replace","search.matchCase","search.wholeWords"];kt.prototype.getEditingContextManager=function(){return this.editingContextManager_};kt.prototype.filterNonEditorSpecificParams_=function(t){var o=goog.object.clone(t);return goog.array.forEach(kt.EDITOR_SPECIFIC_PARAMS,function(i){delete o[i]}),o};kt.prototype.getUrlParams_=function(){var t=new E(window.location.href).getUrlParameters();return t.url&&(t.url=sync.util.fixupFileUrl(t.url)),t.ditamap&&(t.ditamap=sync.util.fixupFileUrl(t.ditamap)),t};kt.prototype.getOption=function(t){return this.options[t]};kt.prototype.setOption=function(t,o){this.options[t]=o,sync.util.setUrlParameter(t,o)};kt.prototype.getOptions=function(){return goog.object.clone(this.options)};kt.prototype.getOpenLinkOptions=function(){var t=this.getOptions();return(this.guessedDitamap||this.guessedDitaProject||this.guessedContextId)&&(delete t.ditamap,delete t["dita.project.url"],delete t["dita.project.contextid"]),t};kt.prototype.getFirstEditorOptions=function(){return goog.object.clone(this.firstEditorOptions)};kt.prototype.updateOptions=function(t){delete this.firstEditorOptions,this.options=this.filterNonEditorSpecificParams_(t);var o=this.editingContextManager_.getDitaContext(),i=sync.util.DitaContextUtil.createDitaContext(this.options);!sync.util.DitaContextUtil.areDitaContextsEqual(o,i)&&sync.util.DitaContextUtil.isNotEmpty(i)&&this.editingContextManager_.updateDitaContext(i)};kt.serializeQueryString=function(t,o){var i={url:t};goog.object.extend(i,o);var n=new E(window.location.href);return n.setQuery(goog.Uri.QueryData.createFromMap(i)),n.getFileName()+"?"+n.getQuery()};kt.getEditorSpecificURLParameters=function(){var t={};return goog.array.forEach(kt.EDITOR_SPECIFIC_PARAMS,function(o){var i=sync.util.getURLParameter(o);i!==null&&(t[o]=decodeURIComponent(i))}),t};kt.prototype.updateUrlParameters=function(t){var o=t?goog.object.clone(t):{};(this.guessedDitamap||this.guessedDitaProject||this.guessedContextId)&&(delete o.ditamap,delete o["dita.project.url"],delete o["dita.project.contextid"]);var i=[];goog.array.forEach(goog.object.getKeys(o),function(s){var a=o[s];goog.isDef(a)&&i.push({name:s,value:a})}),goog.array.sort(i,function(s,a){return s.name==="url"?-1:a.name==="url"?1:0});var n=new goog.Uri.QueryData;goog.array.forEach(i,function(s){n.add(s.name,s.value)});var r=new E(window.location.href);r.setQuery(n),window.history.pushState(t,null,r.getUrl())};var hs=kt;sync.options.WorkspaceOptions=kt;namespace("sync.api.change_tracking");sync.api.change_tracking.ChangeTrackingInitialState={DEFAULT:"default",ENABLED:"enabled",FORCED:"forced",FORCED_OFF:"forcedOff"};goog.require("goog.events.EventTarget");namespace("sync.api");sync.api.Dialog=function(){goog.Disposable.call(this)};goog.inherits(sync.api.Dialog,goog.events.EventTarget);sync.api.Dialog.prototype.focus=function(){};sync.api.Dialog.prototype.show=function(){};sync.api.Dialog.prototype.hide=function(){};sync.api.Dialog.prototype.setResizable=function(t){};sync.api.Dialog.prototype.setPreferredSize=function(t,o){};sync.api.Dialog.prototype.setContentPreferredSize=function(t,o){};sync.api.Dialog.prototype.getElement=function(){};sync.api.Dialog.prototype.setTitle=function(t){};sync.api.Dialog.prototype.setPosition=function(t,o){};sync.api.Dialog.prototype.setHasTitleCloseButton=function(t){};sync.api.Dialog.prototype.setBackgroundElementOpacity=function(t){};sync.api.Dialog.ButtonConfiguration={OK_CANCEL:"ok_cancel",OK:"ok",CANCEL:"cancel",YES_NO:"yes_no"};sync.api.Dialog.prototype.setButtonConfiguration=function(t){};sync.api.Dialog.prototype.onSelect=function(t){};sync.api.Dialog.prototype.dispose=function(){sync.api.Dialog.superClass_.dispose.call(this)};sync.api.Dialog.prototype.isVisible=function(){};sync.api.Dialog.prototype.setModal=function(t){};sync.api.Dialog.prototype.getEventTarget=function(){};sync.api.Dialog.SizeChangedEvent=function(t,o){this.type=t,this.size=o};sync.api.Dialog.EventType={SIZE_CHANGED:"size_changed"};namespace("sync.react");sync.react.genClasses=function(t){return t.filter(function(o){return o}).join(" ")};sync.react.tr=function(t,o){t=tr(t);var i=t.split(/\{|}/),n=i.map(function(r,s){return r&&(r.charAt(0)==="$"||r.charAt(0)>="0"&&r.charAt(0)<="9")?o[r]:sync.react.createElement("span",{key:s},r)});return sync.react.createElement("span",null,n)};var us=typeof React!="undefined";sync.react.createElement=us?React.createElement:window.preact.createElement;sync.react.render=us?window.ReactDOM.render:function(t,o){var i=null;o.childNodes.length!==0&&(i=o.childNodes[0]),window.preact.render(t,o,i)};sync.react.cloneElement=us?React.cloneElement:window.preact.cloneElement;sync.react.unmountComponentAtNode=us?window.ReactDOM.unmountComponentAtNode:function(t){sync.react.render(sync.react.createElement(()=>null),t)};sync.react.findDomNode=us?window.ReactDOM.findDOMNode:function(t){return t.base};sync.react.Component=us?React.Component:window.preact.Component;window.h=sync.react.h=us?function(){return arguments.length>1&&arguments[1]&&arguments[1].ondblclick&&(arguments[1].onDoubleClick=arguments[1].ondblclick,delete arguments[1].ondblclick),React.createElement.apply(React.createElement,arguments)}:window.preact.h;var Ub=sync.react;goog.require("goog.userAgent");namespace("sync.view");var Uh=class extends sync.react.Component{render(){return sync.react.h("div",{style:{height:"100%"}},sync.react.h("div",{className:"oxy-spinner",style:{position:"relative",top:"50%"}}))}},rd=Uh;sync.view.LoadingSpinner=Uh;goog.require("goog.events.KeyCodes");namespace("sync.view");var Bh=class extends sync.react.Component{constructor(t){super(t);this.templateEntryClicked=goog.bind(this.templateEntryClicked,this),this.templateEntryKeydown=goog.bind(this.templateEntryKeydown,this)}templateEntryClicked(t){this.props.onClick(t,this.props.template,t.detail===2,!!this.props.path)}templateEntryKeydown(t){if(t.keyCode===goog.events.KeyCodes.SPACE)t.preventDefault(),this.props.onClick(t,this.props.template,!1,!!this.props.path);else if(t.keyCode===goog.events.KeyCodes.ENTER){t.preventDefault();var o=this.props.selected;this.props.onClick(t,this.props.template,o,!!this.props.path)}}renderBigIcon(){var t;sync.util.getHdpiFactor()===2?t="url('images/no-sprite/UnknownFile48@2x.png')":t="url('images/no-sprite/UnknownFile48.png')",this.props.template.bigIcon&&(t='url("'+sync.util.image.getImageUrl(this.props.template.bigIcon,sync.util.getHdpiFactor())+'")');var o={backgroundImage:t};return sync.react.h("div",{className:"tlp-bigIcn-wrp"},sync.react.h("div",{className:"big-plchlr"}),sync.react.h("span",{className:"tlp-bigIcn",style:o}))}render(){var t=this.renderBigIcon(),o=this.props.template.name,i=this.props.path,n="tpl-e";this.props.selected&&(n+=" selected");var r={className:n,onKeyDown:this.templateEntryKeydown,onClick:this.templateEntryClicked,tabIndex:0,"aria-role":"button","data-location":this.props.template.location};return sync.react.h("div",{...r},sync.react.h("div",{className:"tpl-r"},t,sync.react.h("div",{className:"tpl-info"},sync.react.h("div",{className:"tpl-name"},o),i?sync.react.h("div",{className:"tpl-path"},i):null)))}},Dg=Bh;sync.view.TemplateEntry=Bh;namespace("sync.model");var qb=sync.model.TemplatesFilter;namespace("sync.model");var lr=function(...t){this.filters=t};lr.prototype.acceptsByNameAndType=function(t){var o=!0;return goog.array.forEach(this.filters,function(i){o=o&&i.acceptsByNameAndType(t)}),o};lr.prototype.acceptsByType=function(t){var o=!0;return goog.array.forEach(this.filters,function(i){o=o&&i.acceptsByType(t)}),o};lr.prototype.acceptsPopularTemplates=function(){var t=!0;return goog.array.forEach(this.filters,function(o){t=t&&o.acceptsPopularTemplates()}),t};lr.prototype.acceptsNormalTemplates=function(){var t=!0;return goog.array.forEach(this.filters,function(o){t=t&&o.acceptsNormalTemplates()}),t};lr.prototype.mix=function(t){if(!t)return this;var o=new lr(null);return o.filters=this.filters.slice(),o.filters.push(t),o};var Hh=lr;sync.model.FrameworkTemplateFilters=lr;namespace("sync.model");var bo=function(t,o,i,n){this.pattern_=t,this.templateType_=o,this.showPopular_=Boolean(i),this.showNormal_=Boolean(n)};bo.prototype.acceptsByNameAndType=function(t){return t.name.match(this.pattern_)&&this.acceptsTemplateType_(t)};bo.prototype.acceptsByType=function(t){return this.acceptsTemplateType_(t)};bo.prototype.acceptsPopularTemplates=function(){return this.showPopular_};bo.prototype.acceptsNormalTemplates=function(){return this.showNormal_};bo.prototype.mix=function(t){return t?new Hh(this,t):this};bo.prototype.acceptsTemplateType_=function(t){var o=!1,i=[];t.templateType?i=[t.templateType]:t.templateTypes_?i=Object.keys(t.templateTypes_):o=!0;for(var n=0;n<i.length;++n)if(i[n].match(this.templateType_)){o=!0;break}return o};bo.ALL=new bo(/./,/./,!0,!0);bo.NORMAL=new bo(/./,/./,!1,!0);bo.POPULAR=new bo(/./,/./,!0,!1);var Ji=bo;sync.model.FrameworkTemplateFilter=bo;goog.require("goog.string");namespace("sync.view");var jh=class extends sync.react.Component{constructor(t){super(t);this.state={selectedCategory:"0"}}categoryClicked(t,o){this.state.selectedCategory!==t&&(this.setState({selectedCategory:t}),this.props.onFilterChosen(o))}renderCategory(t,o,i,n){var r="tlp-ctg-e";t===this.state.selectedCategory&&(r+=" selected");var s={key:t+i,tabIndex:0,className:r,onClick:goog.bind(this.categoryClicked,this,t,o)};if(n){var a=this;s.ref=function(l){a.firstFocus=l}}return sync.react.h("button",{...s},i)}componentDidMount(){var t=this;setTimeout(function(){t.firstFocus&&t.firstFocus.focus()})}render(){var t=[],o=0,i=Ji.POPULAR.mix(this.props.categoriesFilter);t.push(this.renderCategory(o.toString(),i,tr(msgs.POPULAR_),!0)),++o;var n=Ji.NORMAL.mix(this.props.categoriesFilter);t.push(this.renderCategory(o.toString(),n,tr(msgs.All_))),++o,t.push(sync.react.h("br",{key:"<--->"}));var r=this;return goog.array.forEach(this.props.mainCategories,function(s,a){t.push(r.renderCategory(o.toString(),new Ji(new RegExp("^"+goog.string.regExpEscape(s.name)+"$"),s.templateTypesMatcher,!0,!0).mix(r.props.categoriesFilter),s.name)),++o}),sync.react.h("div",{className:"tpl-ctg-wrp"},t)}},Vh=jh;sync.view.TemplateCategoryChooser=jh;namespace("sync.view");var Wh=class extends sync.react.Component{constructor(t){super(t)}render(){return sync.react.h("div",{className:"tlp-desc"},sync.react.h("h1",null,this.props.template.name),sync.react.h("div",{dangerouslySetInnerHTML:{__html:this.props.template.longDescription}}))}},Kh=Wh;sync.view.TemplateDescription=Wh;namespace("sync.mode");sync.model.FrameworkTemplate=function(t){goog.object.extend(this,t),t.children&&(this.children=goog.array.map(this.children,function(o){return new sync.model.FrameworkTemplate(o)}))};sync.model.FrameworkTemplate.prototype.getDownloadUrl=function(){return sync.rest.getRestApiUrl("RESTAssetLoader.loadTemplate",{url:encodeURIComponent(this.location),type:this.type})};sync.model.FrameworkTemplate.prototype.getExtension=function(){return new E(this.location).getExtension()};sync.model.FrameworkTemplate.prototype.updateFileExtension=function(t){var o=t.lastIndexOf(".");if(o!==-1){var i=t.substring(0,o);return i+"."+this.getExtension()}else return t};sync.model.FrameworkTemplate.prototype.computeAlternateName=function(t,o){var i=t||goog.functions.FALSE,n=new E(this.location).getFileName(),r=n.lastIndexOf(".");r===-1&&(r=n.length);var s=n.substring(0,r),a=n.substring(r),l=this.filenamePrefix?this.filenamePrefix:"",c=this.filenameSuffix?this.filenameSuffix:"",d=l+s+c+a;if(s!==""&&i.call(o,d))for(var g=100,m=2;m<g&&(d=l+s+"-"+m+c+a,!!i.call(o,d));m++);return d};var lA=sync.mode.FrameworkTemplate;goog.require("goog.array");goog.require("goog.string");namespace("sync.model");var xn=function(t,o){this.templates_=goog.array.map(t,function(i){return new sync.model.FrameworkTemplate(i)}),this.init_(o)};xn.prototype.init_=function(t){t&&goog.array.stableSort(this.templates_[0].children,t),goog.array.forEach(this.templates_[0].children,function(o){this.traverse_(o,function(n,r){o.templateTypes_=o.templateTypes_||{},o.templateTypes_[r.templateType]=1});var i=goog.array.map(Object.keys(o.templateTypes_),goog.string.regExpEscape).join("|");o.templateTypesMatcher=new RegExp("^("+i+")$")},this)};xn.prototype.traverse_=function(t,o){var i=[t.name];(function n(r){for(var s=0;s<r.length;++s){var a=r[s];a.type==="template"?o(i.slice(),a):a.type==="folder"&&(i.push(a.name),n(a.children),i.pop())}})(t.children)};xn.prototype.getMainCategories=function(t){var o=[];return goog.array.forEach(this.templates_[0].children,function(i){t.acceptsByType(i)&&o.push(i)},this),o};xn.prototype.getFilteredCategories=function(t){var o=[];return goog.array.forEach(this.templates_[0].children,function(i){t.acceptsByNameAndType(i)&&o.push(i)},this),o};xn.prototype.getTemplates=function(t){return goog.array.map(this.getFilteredCategories(t),function(o){var i=[],n=[],r=[],s=goog.bind(this.assignToList_,this,i,n,r,t);return this.traverse_(o,goog.bind(function(a,l){t.acceptsByType(l)&&s(a,l)},this)),t.acceptsPopularTemplates()&&!t.acceptsNormalTemplates()&&!i.length&&(i=n),{category:o,popularTemplates:i,allTemplates:r}},this)};xn.prototype.assignToList_=function(t,o,i,n,r,s){n.acceptsPopularTemplates()&&(this.isPopular_(s)?t.push({template:s,path:r}):o.push({template:s,path:r})),n.acceptsNormalTemplates()&&i.push({template:s,path:r})};xn.prototype.isPopular_=function(t){return t.tags&&t.tags.indexOf("popular")!==-1};var Gh=xn;sync.model.FrameworksTemplatesModel=xn;goog.require("goog.array");namespace("sync.view");var qh=class extends sync.react.Component{constructor(t){super(t);this.state={currentFilter:this.getCurrentFilter(this.props.templatesModel),selectedTemplate:null,selectedTemplateInPopularCategory:null,templatesModel:this.props.templatesModel,loading:!1},this.onTemplateSelected=goog.bind(this.onTemplateSelected,this),this.onTemplateSubmit=goog.bind(this.onTemplateSubmit,this),this.renderSections=goog.bind(this.renderSections,this),this.filterChanged=goog.bind(this.filterChanged,this)}getCurrentFilter(t){var o;return this.getMainCategories(t).length!==1?o=Ji.POPULAR.mix(this.props.templatesFilter):o=Ji.ALL.mix(this.props.templatesFilter),o}getMainCategories(t){return t?t.getMainCategories(this.props.templatesFilter||Ji.ALL):[]}componentDidMount(){this.state.templatesModel||(this.setState({loading:!0}),sync.rest.callAsync("RESTActionsManager.retrieveTemplates",{}).then(goog.bind(function(t){var o=new Gh(t,this.props.categoryComparator);this.setState({loading:!1,templatesModel:o,currentFilter:this.getCurrentFilter(o)})},this)).thenCatch(goog.bind(function(t){console.error("Error loading templates",t),this.setState({loading:!1})},this)))}onTemplateSelected(t,o,i,n){var r=!1;(!this.state.selectedTemplate||this.state.selectedTemplate.location!==o.location||this.state.selectedTemplateInPopularCategory!==n)&&(this.setState({selectedTemplate:o,selectedTemplateInPopularCategory:n}),r=!0,this.props.onTemplateSelected(o)),i&&!r&&this.props.onTemplateSubmitted(o)}onTemplateSubmit(){this.props.onTemplateSubmitted(this.state.selectedTemplate)}renderSections(){var t=this,o=this.state.templatesModel.getTemplates(this.state.currentFilter);return goog.array.map(o,function(i,n){var r=i.popularTemplates,s=i.allTemplates;r=goog.array.map(r,function(C){var N=C.path.join(" > "),D=C.template;return sync.react.h(Dg,{onClick:t.onTemplateSelected,selected:t.isSelected(D,!0),template:D,path:N,key:D.name+D.location})});for(var a=null,l=[],c=0;c<s.length;++c){var d=s[c],g=d.path;(a===null||goog.array.compare3(a,g)!==0)&&(a=g,a&&l.push(sync.react.h("h1",null,a.join(" > "))));var m=d.template;l.push(sync.react.h(Dg,{onClick:t.onTemplateSelected,selected:t.isSelected(m,!1),template:m}))}if(r.length||l.length){var v;return t.state.currentFilter.acceptsPopularTemplates()&&r.length&&(v=sync.react.h("h1",null,i.category.name," "," > "," ",tr(msgs.POPULAR_TEMPLATES_BADGE_))),sync.react.h("section",{key:n},v,r,l)}else return null})}isSelected(t,o){var i=this.state.selectedTemplate&&t.location===this.state.selectedTemplate.location;return o?i=i&&this.state.selectedTemplateInPopularCategory:i=i&&!this.state.selectedTemplateInPopularCategory,i}filterChanged(t){this.setState({currentFilter:t,selectedTemplate:null,selectedTemplateInPopularCategory:null}),this.props.onTemplateSelected(null)}renderError(){return sync.react.h("span",null,tr(msgs.ERROR_LOADING_TEMPLATES_))}renderTemplates(){var t=this.renderSections(),o="tpl-wrp",i=this.getMainCategories(this.state.templatesModel),n=i.length!==1;if(n)var r=sync.react.h(Vh,{mainCategories:i,categoriesFilter:this.props.templatesFilter,onFilterChosen:this.filterChanged});if(this.state.selectedTemplate&&this.state.selectedTemplate.longDescription){n?o+=" compact":o+=" compactbig";var s=sync.react.h(Kh,{template:this.state.selectedTemplate})}return sync.react.h("div",{className:"tpl-chooser"},r,sync.react.h("div",{className:o},sync.react.h("div",{className:"tpl-wrp-inner"},t),sync.react.h("div",{className:"tpl-wrp-desc"},s)))}render(){return this.state.loading?sync.react.h(rd,null):this.state.templatesModel?this.renderTemplates():this.renderError()}},sd=qh;sync.view.TemplateChooser=qh;namespace("sync.util");var ms=function(){};ms.prototype.renderTemplateChooser=function(t,o,i){sync.react.render(sync.react.createElement(sd,{onTemplateSelected:i,onTemplateSubmitted:o}),t)};ms.prototype.create=function(t,o,i,n){var r=sync.api.UrlChooser.SaveResult;if(i!=null){var s={targetURL:i,fileURL:t,confirmOverwrite:Boolean(n)};sync.rest.callAsync("RESTFileBrowser.saveNewFile",{$entity:s}).then(goog.bind(function(a){var l=a.url||i;o(l,r.SAVED_AVAILABLE_URL)})).thenCatch(function(a){o(null,r.FAILED,a.message)})}else o&&o(null,r.CANCELED)};ms.prototype.handleCreateFileResult=function(t,o,i){var n=sync.api.UrlChooser.SaveResult;if(o===n.SAVED_AVAILABLE_URL){var r=new sync.api.Editor.LinkOpenedEvent(t,!1,{},sync.api.Editor.LinkOpenedEvent.Target.SELF);workspace.openLink(r)}else if(o===n.SAVED_UNAVAILABLE_URL)workspace.widgets.getProblemReporter().showInfo(tr(msgs.FILE_CREATED_),!0);else if(o!==n.CANCELED){var s=goog.dom.createDom("span","",tr(msgs.NEW_FILE_CREATION_FAIL_));i&&goog.dom.appendChild(s,goog.dom.createDom("div","new-file-error-message",i)),workspace.widgets.getProblemReporter().showError(s,!0)}};ms.prototype.uploadImage=function(t,o,i,n){var r=o.substring("data:image/".length,o.indexOf(";")),s=t||tr(msgs.UNTITLED_LOWERCASE_)+"."+r,a=workspace.getUrlChooser();a&&a.supportsOperation(sync.api.UrlChooser.Purpose.CHOOSE_SAVE_LOCATION)?a.saveFile(o,s,(l,c,d)=>{if(c===sync.api.UrlChooser.SaveResult.SAVED_AVAILABLE_URL){var g=workspace.makeRelative(i,l);n(g)}else if(c===sync.api.UrlChooser.SaveResult.CANCELED)n(null);else{var m=this.getImageSavingError_(d);workspace.getNotificationManager().showError(m),n(null)}}):n(o)};ms.prototype.getImageSavingError_=function(t){var o=tr(msgs.ERROR_WHILE_SAVING_IMAGE_);return t?goog.dom.createDom("div","",goog.dom.createTextNode(o),goog.dom.createDom("br"),goog.dom.createTextNode(t)):o};var ii=ms;sync.util.NewFileHelper=ms;namespace("sync.api");sync.api.UrlChooser=function(){};sync.api.UrlChooser.prototype.chooseUrl=function(t,o,i){};sync.api.UrlChooser.prototype.saveFile=function(t,o,i){var n=new sync.api.UrlChooser.Context(sync.api.UrlChooser.Type.EXTERNAL_REF,o);this.chooseUrl(n,goog.bind(this.handleSaveUrlChosen,this,t,i),sync.api.UrlChooser.Purpose.CHOOSE_SAVE_LOCATION)};sync.api.UrlChooser.prototype.handleSaveUrlChosen=function(t,o,i){new ii().create(t,o,i,!0)};sync.api.UrlChooser.prototype.supports=function(t){return!1};sync.api.UrlChooser.prototype.supportsOperation=function(t){return t===sync.api.UrlChooser.Purpose.CHOOSE};sync.api.UrlChooser.Type={IMAGE:"image",EXTERNAL_REF:"xref",GENERIC:"generic"};sync.api.UrlChooser.SaveResult={SAVED_AVAILABLE_URL:"saved-and-available",SAVED_UNAVAILABLE_URL:"saved-unavailable",FAILED:"save-failed",CANCELED:"save-canceled"};sync.api.UrlChooser.Purpose={SAVE:"save",CHOOSE_SAVE_LOCATION:"choose_save_location",CHOOSE:"choose"};sync.api.UrlChooser.Context=function(t,o){this.type_=t,this.fileName_=o,this.defaultSaveExtension_=null};sync.api.UrlChooser.Context.prototype.getType=function(){return this.type_};sync.api.UrlChooser.Context.prototype.getSuggestedFileName=function(){return this.fileName_};sync.api.UrlChooser.Context.prototype.getDefaultSaveExtension=function(){return this.defaultSaveExtension_};sync.api.UrlChooser.Context.prototype.setDefaultSaveExtension=function(t){this.defaultSaveExtension_=t};sync.api.UrlChooser.Context.prototype.getInitialUrl=function(){return this.initialUrl_};sync.api.UrlChooser.Context.prototype.setInitialUrl=function(t){this.initialUrl_=t};goog.require("goog.events.EventHandler");goog.require("goog.dom");namespace("sync.view");var $i=function(t,o){var i=goog.dom.createDom;this.content_=i("span");var n=[];o||(this.closeButton_=i("div",["corner-close-button","inplace-notification-close"]),n.push(this.closeButton_)),n.push(this.content_);var r=["inplace-notification"];o||r.push("inplace-notification-has-close"),this.inplaceNotification_=i("div",r,n),this.eventHandler_=new goog.events.EventHandler,goog.dom.insertChildAt(t,this.inplaceNotification_,0),o||this.eventHandler_.listen(this.closeButton_,goog.events.EventType.CLICK,goog.bind(this.hide,this))};$i.prototype.hide=function(){var t=["inplace-notification-shown"];Object.keys($i.types).forEach(function(o){t.push($i.types[o])}),goog.dom.classlist.removeAll(this.inplaceNotification_,t)};$i.prototype.show=function(t,o){this.content_.textContent=t;var i=[];Object.keys($i.types).forEach(function(r){i.push($i.types[r])}),goog.dom.classlist.removeAll(this.inplaceNotification_,i);var n=["inplace-notification-shown"];o&&n.push(o),goog.dom.classlist.addAll(this.inplaceNotification_,n)};$i.prototype.dispose=function(){goog.dom.removeNode(this.inplaceNotification_),this.eventHandler_.dispose()};$i.types={SUCCESS:"inplace-notification-success",WARNING:"inplace-notification-warn",ERROR:"inplace-notification-error",INFO:"inplace-notification-info"};var Rn=$i;sync.view.InplaceNotificationReporter=$i;var Ng=class{constructor(o,i,n){this.filesList_=o,this.directoryUrl_=i,this.userActionRequiredException_=n}getFilesList(){return this.filesList_}getDirectoryUrl(){return this.directoryUrl_}isAuthenticationRequired(){return Boolean(this.userActionRequiredException_)}getUserActionRequiredException(){return this.userActionRequiredException_}fileExists(o){var i=!1;if(goog.isArray(this.filesList_)){for(var n of this.filesList_)if(decodeURIComponent(n.name)===o){i=!0;break}}return i}},fs=class{constructor(o){this.listFolder_=o||fs.retrieveChildrenREST}list(o){return new Promise((i,n)=>this.listFolder_(o.getFolderUrl(),i,n)).then(i=>new Ng(i,o,null)).catch(i=>{if(i instanceof sync.RESTException&&i.type==="user_action_required_error")return new Ng(null,o,i);var n=tr(msgs.ERROR_RETRIEVING_FILES_);if(i.message)try{var r=JSON.parse(i.message);n+=": "+tr(msgs[r.id],r.params)}catch{n+=": "+i.message}throw n})}static retrieveChildrenREST(o,i,n){sync.rest.callAsync("RESTFileBrowser.retrieveFiles",{url:encodeURIComponent(o)}).then(i).thenCatch(n)}};namespace("sync.view");var Xh=class extends sync.react.Component{constructor(t){super(t);this.handleFileNameInputChanges_=goog.bind(this.handleFileNameInputChanges_,this)}handleFileNameInputChanges_(t){var o=t.target.value;this.props.fileNameChanged(o)}render(){var t=this.props.fileName?this.props.fileName:"";return sync.react.h("div",{className:"file-browser-filename"},sync.react.h("label",{className:"file-browser-filename-label",htmlFor:"file-browser-filename-input"},tr(msgs.FILE_NAME_)+":"),sync.react.h("span",{className:"file-browser-filename-input-wrapper"},sync.react.h("input",{autoComplete:"false",onInput:this.handleFileNameInputChanges_,onChange:this.handleFileNameInputChanges_,id:"file-browser-filename-input",name:"file-browser-filename-input",type:"text",value:t})))}},zh=Xh;sync.view.FileNameInput=Xh;namespace("sync.view");sync.view.NewFileInPlaceDialog=function(t,o){this.widgets_=t,this.newFileHelper_=o;var i=goog.dom.createDom,n=goog.dom.TagName.DIV,r=i(n,"new-file-templates-label",tr(msgs.Select_template_));this.templatesContainer_=i(n,"new-file-templates-container"),this.fileNameInput_=i(goog.dom.TagName.INPUT,{className:"new-file-templates-filename-input",type:"text"});var s=i("label","new-file-templates-filename-label",tr(msgs.Choose_file_name_),this.fileNameInput_);goog.events.listen(this.fileNameInput_,goog.events.EventType.CHANGE,goog.bind(function(){this.userChangedFileName_=!0,this.hideErrorMessages_()},this)),this.errorsDiv_=i(n,"new-file-templates-errors-div"),this.container_=i(n,"new-file-new-container",this.errorsDiv_,r,this.templatesContainer_,s);var a=this.widgets_.createDialog("new-file-dialog",!1,goog.functions.NULL);a.setTitle(tr(msgs.Create_file_)),goog.dom.appendChild(a.getElement(),this.container_),a.setButtonConfiguration([{key:goog.ui.Dialog.DefaultButtonKeys.OK,caption:tr(msgs.CREATE_),default:!0},{key:goog.ui.Dialog.DefaultButtonKeys.CANCEL,caption:tr(msgs.CANCEL_),cancel:!0}]),a.setContentPreferredSize(900,700),a.setResizable(!0),this.newFileInPlaceDialog_=a,this.initialized_=null,this.userChangedFileName_=null,this.destinationFolderURL_=null,this.fileExists_=goog.nullFunction,this.selectedTemplate_=null};sync.view.NewFileInPlaceDialog.prototype.show=function(t,o,i){o&&(this.userChangedFileName_=!1,this.initialized_||(this.loadTemplates_(),this.initialized_=!0),this.destinationFolderURL_=o,this.fileExists_=i,this.hideErrorMessages_(),this.newFileInPlaceDialog_.onSelect(goog.bind(function(n,r){n==="ok"&&(this.createNewFile_(!0),r.preventDefault())},this)),this.newFileInPlaceDialog_.show())};sync.view.NewFileInPlaceDialog.prototype.showErrorMessage_=function(t){this.errorReporter_||(this.errorReporter_=new Rn(this.errorsDiv_)),t?this.errorReporter_.show(t,Rn.types.ERROR):this.hideErrorMessages_()};sync.view.NewFileInPlaceDialog.prototype.hideErrorMessages_=function(){this.errorReporter_&&this.errorReporter_.hide()};sync.view.NewFileInPlaceDialog.prototype.loadTemplates_=function(){this.newFileHelper_.renderTemplateChooser(this.templatesContainer_,goog.bind(this.createNewFile_,this,!1),goog.bind(this.templateSelected_,this))};sync.view.NewFileInPlaceDialog.prototype.templateSelected_=function(t){if(this.selectedTemplate_=t,this.hideErrorMessages_(),t&&(!this.fileNameInput_.value||!this.userChangedFileName_)){this.userChangedFileName_=!1;var o=t.computeAlternateName(this.fileExists_,this);this.fileNameInput_.value=decodeURIComponent(o)}t&&(this.fileNameInput_.value=t.updateFileExtension(this.fileNameInput_.value))};sync.view.NewFileInPlaceDialog.prototype.createNewFile_=function(t){this.fileNameInput_.value?this.selectedTemplate_?this.saveFileWithConfirmation_(this.fileNameInput_.value):t&&this.showErrorMessage_(tr(msgs.Select_template_error_)):(this.showErrorMessage_(tr(msgs.Choose_file_name_error_)),this.fileNameInput_.focus())};sync.view.NewFileInPlaceDialog.prototype.saveFileWithConfirmation_=function(t){var o,i=this.selectedTemplate_.getExtension();t.indexOf(".")===-1&&i?o=t+"."+i:o=t,this.fileExists_(o)?this.widgets_.confirm(tr(msgs.CONFIRM_OVERWRITE_),trDom(msgs.CONFIRM_OVERWRITE_MESSAGE_,{$FILE_NAME:o,$LINE_BREAK:goog.dom.createDom("br")})).then(goog.bind(function(n){n&&this.saveFile_(o)},this)):this.saveFile_(o)};sync.view.NewFileInPlaceDialog.prototype.saveFile_=function(t){var o=new E("placeholder:/");o.setUrl(this.destinationFolderURL_),o.setFileName(encodeURIComponent(t));var i=o.getUrl();this.newFileInPlaceDialog_.hide();var n=this.selectedTemplate_.getDownloadUrl();this.newFileHelper_.create(n,this.newFileHelper_.handleCreateFileResult,i,!0)};sync.view.NewFileInPlaceDialog.prototype.dispose=function(){this.newFileInPlaceDialog_.dispose()};var LA=sync.view.NewFileInplaceDialog;namespace("sync.view");var Yh=class extends sync.react.Component{constructor(t){super(t);this.textContent=decodeURIComponent(this.props.fileJSON.name),this.handleClick_=this.handleeClick_.bind(this),this.handleDblClick_=this.handleDblClick_.bind(this)}handleeClick_(){this.props.handleFileClick(this.props.fileJSON.folder,this.textContent,this.props.id,!1)}handleDblClick_(){this.props.handleFileClick(this.props.fileJSON.folder,this.textContent,this.props.id,!0)}render(){var t=sync.react.genClasses(["file-browser-entry",this.props.fileJSON.folder?"directory":"file",this.props.isSelected&&"file-browser-entry-selected"]);return sync.react.h("li",{className:t,role:"option","aria-selected":this.props.isSelected||null,onClick:this.handleClick_,ondblclick:this.handleDblClick_,id:"file-entry-"+this.props.id},this.textContent)}},Qh=Yh;sync.view.FileEntry=Yh;namespace("sync.view");var ni=function(t,o){this.type=o||t.type,this.browserEvent_=t,this.key=ni.NORMALIZED_KEYS[t.key]||t.key,t.altKey&&t.ctrlKey&&goog.userAgent.EDGE&&(this.key=String.fromCharCode(t.charCode)),this.altKey=t.altKey,this.ctrlKey=t.ctrlKey,this.metaKey=t.metaKey};ni.modifiers=["Alt","AltGraph","CapsLock","Control","Fn","FnLock","Hyper","Meta","NumLock","ScrollLock","Shift","Super","Symbol","Symbollock"];ni.NORMALIZED_KEYS={Divide:"/",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Spacebar:" "};ni.prototype.isKeyIdentified=function(){return this.key!=="Unidentified"};ni.prototype.isModifier=function(){var t=!1;if(this.altKey&&this.browserEvent_.location===3&&(t=!0),ni.modifiers.indexOf(this.key)!==-1&&(t=!0),!this.isKeyIdentified()){var o=this.browserEvent_,i=o.keyCode,n=goog.events.KeyCodes;(o.shiftKey&&i===n.SHIFT||o.ctrlKey&&i===n.CTRL||o.altKey&&i===n.ALT||o.metaKey&&i===n.META)&&(t=!0)}return t};ni.prototype.getKeyCode=function(){return this.browserEvent_.type===goog.events.EventType.KEYDOWN?this.browserEvent_.keyCode:0};ni.prototype.isPrintable=function(){var t=!1;return(this.ctrlKey&&this.altKey||goog.userAgent.MAC&&this.altKey||!this.altKey&&!this.ctrlKey&&!this.metaKey)&&(t=!0),t&&this.key&&this.key.length===1&&this.key!=="\uE000"};ni.prototype.getBrowserEvent=function(){return this.browserEvent_};ni.prototype.preventDefault=function(){this.browserEvent_.preventDefault()};var On=ni;sync.view.KeyEvent=ni;namespace("sync.view");var Mg=class extends sync.react.Component{constructor(t){super(t);this.handleClick_=this.handleClick_.bind(this),this.handleKeyPress_=this.handleKeyPress_.bind(this),this.handleTouch_=this.handleTouch_.bind(this),this.lastCharTimestamp_=0,this.state={charsSoFar:"",isTouch:!1,selectedEntryIndex:this.computeSelectedIndex_(t)}}componentDidMount(){this.removeKeyHandler_(),this.kh_=goog.events.listen(this.listNode,goog.events.EventType.KEYDOWN,this.handleKeyPress_,!0)}componentWillUnmount(){this.removeKeyHandler_()}removeKeyHandler_(){this.kh_&&goog.events.unlistenByKey(this.kh_)}handleClick_(t,o,i,n){this.setState({selectedEntryIndex:i}),this.props.fileSelected(o),(n||this.state.isTouch)&&this.props.fileChosen(t===!0)}handleKeyPress_(t){this.updateNavigationCharsBuffer_(t);var o=goog.events.KeyCodes;if(t.keyCode===o.BACKSPACE){t.preventDefault(),this.props.upOneLevel();return}var i=this.getSelectedIndex_();if(i!==-1&&(t.keyCode===o.ENTER||t.keyCode===o.SPACE))this.props.fileChosen(this.props.filesJSON[i].folder,t),t.preventDefault();else{var n=this.computeNextIndex_(this.props.filesJSON,i,t);if(this.setState({selectedEntryIndex:n}),n!==-1&&n!==i){t.preventDefault();var r=decodeURIComponent(this.props.filesJSON[n].name);this.props.fileSelected(r)}}}updateNavigationCharsBuffer_(t){var o=this.state.charsSoFar,i=new On(t.getBrowserEvent());if(i.isPrintable()){var n=goog.now();n-this.lastCharTimestamp_>1e3&&(o=""),this.lastCharTimestamp_=goog.now()}else this.lastCharTimestamp_=0,o="";this.setState({charsSoFar:o})}getIndexNavigationKey_(t,o,i){switch(t){case goog.events.KeyCodes.DOWN:return Math.min(i,o+1);case goog.events.KeyCodes.UP:return Math.max(0,o-1);case goog.events.KeyCodes.PAGE_DOWN:return Math.min(i,o+10);case goog.events.KeyCodes.PAGE_UP:return Math.max(0,o-10);case goog.events.KeyCodes.HOME:return 0;case goog.events.KeyCodes.END:return i;default:return-1}}getIndexPrintableKey_(t,o,i){var n=this.state.charsSoFar;n+=o.key.toLowerCase(),this.setState({charsSoFar:n});for(var r=0;r<t.length;r++){var s=(i+r+1)%t.length;if(n.length>1&&(s=(i+r)%t.length),s!==-1){var a=decodeURIComponent(t[s].name).toLowerCase();if(a.indexOf(n)===0)return s}}return-1}computeNextIndex_(t,o,i){var n=-1;if(t&&(n=this.getIndexNavigationKey_(i.keyCode,o,t.length-1),n===-1)){var r=new On(i.getBrowserEvent());r.isPrintable()&&(n=this.getIndexPrintableKey_(t,r,o))}return n}getSelectedIndex_(){return this.state.selectedEntryIndex}computeSelectedIndex_(t){var o=-1;return t.filesJSON&&t.selectedFile&&!t.updateInProgress&&(o=goog.array.findIndex(t.filesJSON,function(i){return decodeURIComponent(i.name)===t.selectedFile})),o}componentDidUpdate(t,o){if(this.selectedNode){var i=sync.react.findDomNode(this.selectedNode);i&&goog.style.scrollIntoContainerView(i,this.listNode)}}handleTouch_(){this.setState({isTouch:!0})}componentWillReceiveProps(t){var o=this.computeSelectedIndex_(t);this.setState({selectedEntryIndex:o})}focus(){this.listNode&&this.listNode.focus()}render(){var t=this.getSelectedIndex_(),o=this.props.updateInProgress?null:this.props.filesJSON,i=o?goog.array.map(o,function(s,a){var l=t===a;return sync.react.h(Qh,{key:s.name,fileJSON:s,isSelected:l,handleFileClick:this.handleClick_,id:a,ref:c=>l?this.selectedNode=c:null})},this):"",n=sync.react.genClasses(["file-browser-list","oxy-simulate-focus",t===-1&&"no-file-selected",this.props.updateInProgress&&"oxy-spinner"]),r=t!==-1&&"file-entry-"+t;return sync.react.h("ul",{className:n,onTouchStart:this.handleTouch_,role:"listbox","aria-activedescendant":r,tabIndex:0,ref:s=>this.listNode=s},i)}};Mg.FILES_JSON_IN_PROGRESS=[];var Jh=Mg;sync.view.FilesList=Mg;namespace("sync.view");var ad=class extends sync.react.Component{constructor(t){super(t);this.switchToReadOnlyMode_=goog.bind(this.switchToReadOnlyMode_,this),this.switchToEditMode_=goog.bind(this.switchToEditMode_,this),this.handleKeyDown_=goog.bind(this.handleKeyDown_,this),this.closeOnBlur_=goog.bind(this.closeOnBlur_,this),this.state={inEditMode:!1}}handleKeyDown_(t){(t.keyCode===goog.events.KeyCodes.ENTER||t.keyCode===goog.events.KeyCodes.SPACE)&&(t.preventDefault(),this.switchToEditMode_(t),t.stopPropagation())}switchToEditMode_(t){var o=t.target;goog.dom.classlist.contains(o,"file-browser-path-entry-link")?this.props.folderPathChanged({path:ad.getFilePath_(o)}):this.updateState_(!0)}closeOnBlur_(){this.updateState_(!1)}switchToReadOnlyMode_(t){var o=t.keyCode;if(o===goog.events.KeyCodes.ENTER){this.updateState_(!1);var i=ad.sanitizePath_(t.target.value);i&&(!this.state.path||this.state.path!==i)&&(this.props.folderPathChanged({path:i}),t.preventDefault())}else o===goog.events.KeyCodes.ESC&&(this.updateState_(!1),this.setState({focusAfterSwitch:!0}));t.stopPropagation()}static sanitizePath_(t){return t=t.trim(),goog.string.startsWith(t,"/")||(t="/"+t),goog.string.endsWith(t,"/")||(t=t+"/"),t.replace("//","/")}updateState_(t){this.setState({inEditMode:t})}componentDidUpdate(t,o){this.state.focusAfterSwitch&&(this.readOnlyInput.focus(),this.setState({focusAfterSwitch:!1})),this.state.inEditMode?this.editInput&&this.editInput.select():this.readOnlyInput&&(this.readOnlyInput.scrollLeft=1e4)}static getFilePath_(t){for(var o=[];t!=null;){o.unshift(encodeURIComponent(t.textContent));var i=goog.dom.getPreviousElementSibling(t);t=i&&goog.dom.getPreviousElementSibling(i)}return o.shift(),"/"+o.map(function(n){return n+"/"}).join("")}shouldComponentUpdate(t,o){return t.updateInProgress!==!0}render(){var t;if(this.state.inEditMode)this.readOnlyInput=null,t=sync.react.h("input",{className:"file-browser-url-bar",onKeyDown:this.switchToReadOnlyMode_,onKeyPress:s=>s.stopPropagation(),onBlur:this.closeOnBlur_,ref:s=>this.editInput=s,value:this.props.path,onChange:goog.functions.NULL});else{this.editInput=null;var o=this.props.path,i=[];if(o){var n=sync.react.h("svg",{x:"0px",y:"0px",width:"10px",height:"20px",viewBox:"6 0 13 18",focusable:"false",fill:"#777C7F"},sync.react.h("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}));i.push(sync.react.h("span",{key:"file-browser-path-entry",className:"file-browser-path-entry file-browser-path-entry-link",title:tr(msgs.ROOT_)},tr(msgs.ROOT_))),i.push(sync.react.h("span",{key:"file-browser-path-bar-delimiter",className:"file-browser-path-bar-delimiter"},n));var r=o.substring(1).split("/");r.forEach(function(s,a){if(s=decodeURIComponent(s),a<r.length-1)if(a<r.length-2){i.push(sync.react.h("span",{key:a,className:"file-browser-path-entry file-browser-path-entry-link",title:s},s));var l=a+"_delimiter";i.push(sync.react.h("span",{key:l,className:"file-browser-path-bar-delimiter"},n))}else i.push(sync.react.h("span",{key:a,className:"file-browser-path-entry file-browser-current-dir-entry"},s))})}t=sync.react.h("div",{ref:s=>this.readOnlyInput=s,className:"vertical-align-children file-browser-url-bar kbd-focus-outline",onClick:this.switchToEditMode_,onKeyDown:this.handleKeyDown_,onKeyPress:s=>s.stopPropagation(),tabIndex:0,id:"fileURL"},i)}return sync.react.h("div",{className:"file-browser-url-bar-wrapper"},t)}},$h=ad;sync.view.FilePathBar=ad;namespace("sync.view");var ld=class extends sync.react.Component{constructor(t){super(t);this.hideMessage=this.props.hideMessage&&this.props.hideMessage.bind(this)}render(){if(this.props.message){var t=sync.react.genClasses(["inplace-notification","inplace-notification-shown","inplace-notification-has-close",this.props.type?this.props.type:ld.types.INFO]);return sync.react.h("div",{className:t},this.hideMessage?sync.react.h("div",{className:"corner-close-button inplace-notification-close",onClick:this.hideMessage}):null,sync.react.h("div",null,this.props.message))}else return null}};ld.types={SUCCESS:"inplace-notification-success",WARNING:"inplace-notification-warn",ERROR:"inplace-notification-error",INFO:"inplace-notification-info"};var Ho=ld;sync.view.InplaceMessagesNotifier=ld;namespace("sync.view");var Zh=class extends sync.react.Component{render(){return sync.react.h("div",{className:"sync-drag-target"},sync.react.h("div",{className:"sync-drag-target-inner"},sync.react.h("div",{className:"sync-drag-target-inner-bits"},sync.react.h("div",{className:"sync-drag-target-picture"}),sync.react.h("div",{className:"sync-drag-target-caption"},tr(msgs.DRAG_MASK_MSG_)))))}},eu=Zh;sync.view.FileBrowserDragFileMask=Zh;namespace("sync.view");sync.view.FileBrowserModel=function(t,o,i,n){this.rootUrl_=t,this.listedUrl_=o,this.selectedUrl_=i,this.listingResult_=n};sync.view.FileBrowserModel.prototype.getRootUrl=function(){return this.rootUrl_};sync.view.FileBrowserModel.prototype.getListedUrl=function(){return this.listedUrl_};sync.view.FileBrowserModel.prototype.getSelectedUrl=function(){return this.selectedUrl_};sync.view.FileBrowserModel.prototype.getListingResult=function(){return this.listingResult_};sync.view.FileBrowserModel.prototype.setListingResult=function(t){this.listingResult_=t};sync.view.FileBrowserModel.prototype.fileExists=function(t){return this.listingResult_&&this.listingResult_.fileExists(t)};var xg=sync.view.FileBrowserModel;goog.require("goog.dom");goog.require("goog.events");goog.require("goog.net.IframeIo");goog.require("goog.ui.IdGenerator");namespace("sync.view");var mo=function(t,o,i){this.descriptor=t,this.uploadStartListener=i,this.cb=o};mo.prototype.render=function(){var t=this.descriptor.container;typeof t=="string"&&(t=goog.dom.getElement(t)),this.uploadForm=this.getUploadForm_(),t.appendChild(this.uploadForm);var o=t.querySelector(".file-upload-input-wrapper input");goog.events.listen(o,goog.events.EventType.CHANGE,goog.bind(function(){this.choosingFile=!1,o.value&&this.startUpload()},this)),goog.events.listen(o,goog.events.EventType.FOCUS,goog.bind(this.handleFormInputFocus_,this)),goog.events.listen(o,[goog.events.EventType.FOCUS,goog.events.EventType.BLUR],goog.bind(this.toggleArtificialFocus_,this,o)),goog.events.listen(o,goog.events.EventType.CLICK,goog.bind(function(){this.choosingFile=!0},this)),this.preventSubmitOnEnter_(o)};mo.prototype.handleFormInputFocus_=function(){if(this.choosingFile){var t=500;setTimeout(goog.bind(function(){this.choosingFile&&(this.choosingFile=!1)},this),t)}};mo.prototype.preventSubmitOnEnter_=function(t){goog.events.listen(t,[goog.events.EventType.KEYDOWN,goog.events.EventType.KEYPRESS],function(o){o.keyCode===goog.events.KeyCodes.ENTER&&o.stopPropagation()})};mo.prototype.getUploadForm_=function(){var t=goog.ui.IdGenerator.getInstance();this.formId="form-upload"+t.getNextUniqueId(),this.inputId="input-id-upload"+t.getNextUniqueId().replace(":","-");var o=this.descriptor.accept,i=this.descriptor.buttonText||"",n={id:this.inputId,name:"file-upload-input",type:"file"};o&&(n.accept=o);var r=["file-upload-input-wrapper"];return i&&r.push("oxy-button"),goog.dom.createDom("form",{class:"webapp-file-uploader",id:this.formId,enctype:"multipart/form-data",method:"POST"},goog.dom.createDom("div",r,i,goog.dom.createDom("input",n)))};mo.prototype.startUpload=function(){if(!this.isUploading_){var t=this.buildParamsObject_(),o=this.getFileName_();this.uploadStartListener(o),sync.rest.callAsync(this.getRestMethod(),t).then(goog.bind(this.onUploadResult_,this)).thenCatch(goog.bind(this.onUploadResult_,this)),this.isUploading_=!0,this.toggleDisabledStatus(!0)}};mo.prototype.getFileName_=function(){var t=this.uploadForm.querySelector('input[name="file-upload-input"]');return t.value.split(/(\\|\/)/g).pop()};mo.prototype.toggleDisabledStatus=function(t){var o=goog.dom.getElement(this.inputId);o&&(o.disabled=t)};mo.prototype.buildParamsObject_=function(){return{$entity:new FormData(this.uploadForm),$contentType:sync.rest.OXY_UNDEFINED_CONTENT_TYPE}};mo.prototype.getRestMethod=goog.functions.NULL;mo.prototype.reset=function(){this.isUploading_=!1;var t=goog.dom.getElement(this.inputId);this.toggleDisabledStatus(!1),t.value=""};mo.prototype.onUploadResult_=function(t){this.reset();var o=this.extractResult_(t);o.success?this.cb(null,o.fileName):this.cb(o)};mo.prototype.extractResult_=function(t){var o;try{o=JSON.parse(t)}catch{o={success:!1,message:null},t&&typeof t=="string"&&t.trim().indexOf("413")===0&&(o.message=tr(msgs.UPLOADED_FILE_TOO_LARGE_))}return o};mo.prototype.toggleArtificialFocus_=function(t,o){var i=goog.dom.getAncestorByTagNameAndClass(t,"div","file-browser-action"),n="focus-visible";i&&(o.type===goog.events.EventType.FOCUS?goog.dom.classlist.add(i,n):goog.dom.classlist.remove(i,n))};var Rg=mo;sync.view.FileUploader=mo;namespace("sync.view");var cd=function(t,o,i){this.element_=t,this.classes_=["oxy-spinner"],i&&(this.classes_=this.classes_.concat(i)),goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("9")&&!goog.userAgent.isVersionOrHigher("10")&&this.classes_.push("ie-oxy-spinner"),this.delay_=o||500,this.timer_=null};cd.prototype.show=function(){this.element_&&(this.timer_=setTimeout(goog.bind(function(){goog.dom.classlist.addAll(this.element_,this.classes_)},this),this.delay_))};cd.prototype.hide=function(){this.element_&&(clearTimeout(this.timer_),goog.dom.classlist.removeAll(this.element_,this.classes_))};var rt=cd;sync.view.Spinner=cd;namespace("sync.view");var Zi=function(t,o,i,n,r){this.getCurrentFolderUrl_=i.bind(this),this.containsFile_=r.bind(this),Rg.call(this,t,goog.bind(o,this),n)};goog.inherits(Zi,Rg);Zi.prototype.getRestMethod=function(){return"RESTFileService.uploadFileToUrl"};var jv=Zi.prototype.buildParamsObject_;Zi.prototype.buildParamsObject_=function(...t){var o=jv.apply(this,t);return o.upload_destination=this.getCurrentFolderUrl_()+encodeURIComponent(this.getFileName_()),o};Zi.prototype.getFileName_=function(){var t=goog.dom.getElement(this.inputId),o=t.value,i="";return o.indexOf("/")!==-1?i="/":i="\\",o.substring(o.lastIndexOf(i)+1)};Zi.prototype.startUpload=function(){var t=this.getFileName_();this.containsFile_(t)?workspace.confirm(tr(msgs.CONFIRM_OVERWRITE_),trDom(msgs.CONFIRM_OVERWRITE_MESSAGE_,{$FILE_NAME:t,$LINE_BREAK:goog.dom.createDom("br")})).then(goog.bind(function(o){o?Zi.superClass_.startUpload.call(this):this.reset()},this)):Zi.superClass_.startUpload.call(this)};var tu=Zi;sync.view.FileBrowserUploader=Zi;namespace("sync.view");var ou=class extends sync.react.Component{constructor(t){super(t);this.fileUploaded_=this.fileUploaded_.bind(this),this.state={showUploadProgress:!1}}showInProgressStatus_(t){this.setState({showUploadProgress:t})}fileUploaded_(t,o){this.showInProgressStatus_(!1),this.props.fileUploaded(t,o)}componentDidMount(){this.fileUploader=new tu({container:this.moreActionsElement},this.fileUploaded_,goog.bind(function(){return this.props.folderUrl},this),goog.bind(this.showInProgressStatus_,this,!0),t=>this.props.fileExists(t)),this.fileUploader.render()}componentDidUpdate(){this.fileUploader.toggleDisabledStatus(this.props.disabled)}render(){var t=sync.react.genClasses(["file-browser-spinner","oxy-spinner",this.state.showUploadProgress===!0&&"file-browser-spinner-shown"]);return sync.react.h("div",{className:"file-browser-more-actions vertical-align-children file-browser-action",title:tr(msgs.UPLOAD_FILE_),ref:o=>this.moreActionsElement=o,disabled:this.props.disabled},sync.react.h("div",{className:t}),sync.react.h("div",{className:"upload-action-icon ui-action-large-icon"}),sync.react.h("div",{className:"upload-action-text"},tr(msgs.UPLOAD_FILE_)))}},iu=ou;sync.view.FileBrowserUploaderComponent=ou;goog.require("goog.async.Delay");namespace("sync.view");var nu=class extends sync.react.Component{constructor(t){super(t);this.showNewFileDialog_=this.showNewFileDialog_.bind(this)}showNewFileDialog_(){this.newFileInPlaceDialog_||(this.newFileInPlaceDialog_=new sync.view.NewFileInPlaceDialog(workspace.widgets,new ii)),this.newFileInPlaceDialog_.show(this.newFileElement,this.props.currentUrl.getUrl(),this.props.checkIfFileExists)}componentWillUnmount(){this.newFileInPlaceDialog_&&(this.newFileInPlaceDialog_.dispose(),this.newFileInPlaceDialog_=null)}render(){return sync.react.h("button",{className:"file-browser-new-action-container vertical-align-children file-browser-action",disabled:this.props.disabled,ref:t=>this.newFileElement=t,onClick:this.showNewFileDialog_},sync.react.h("div",{className:"file-browser-new-icon ui-action-large-icon"}),sync.react.h("div",{className:"file-browser-new-action-text"},tr(msgs.NEW_)))}},ru=nu;sync.view.NewFileButton=nu;namespace("sync.view");var su=class extends sync.react.Component{constructor(t){super(t);this.folderPathChanged_=this.folderPathChanged_.bind(this)}determinePath_(){var t="";this.props.currentUrl&&(t=this.props.currentUrl.getPathName());var o="/",i=this.props.correctedRoot;return i&&(o=new E(i).getPathName()),goog.string.startsWith(t,o)&&(t="/"+t.substring(o.length)),t}folderPathChanged_(t){var o="/",i=this.props.correctedRoot;i&&(o=new E(i).getPathName());var n=new E(this.props.currentUrl.getUrl());n.setPathName(o+t.path.substring(1)),this.props.onFolderChanged(n)}render(){return sync.react.h($h,{path:this.determinePath_(),folderPathChanged:this.folderPathChanged_,disabled:this.props.disabled})}},au=su;sync.view.FilePathBarRootAware=su;goog.require("goog.async.Delay");namespace("sync.view");var lu=class extends sync.react.Component{constructor(t){super(t);this.handleDrop_=this.handleDrop_.bind(this),this.clearDecoration_=this.clearDecoration_.bind(this),this.dragOver_=this.dragOver_.bind(this),this.dragOverTimeout_=new goog.async.Delay(this.clearDecoration_,200,this),this.state={dragMaskVisible:!1}}clearDecoration_(){this.setState({dragMaskVisible:!1})}dragOver_(t){t.preventDefault(),t.dataTransfer.dropEffect="copy",this.setState({dragMaskVisible:!0}),this.dragOverTimeout_.start()}doUploadFile_(t){var o=this.props.currentUrl.getFolderUrl(),i=o+encodeURIComponent(t.name),n=new E(i);this.props.onFileUploadStateChanged(!0,n);var r=new FormData;return r.append("file-upload-input",t),sync.rest.callAsync("RESTFileService.uploadFileToUrl",{upload_destination:i,$entity:r,$contentType:sync.rest.OXY_UNDEFINED_CONTENT_TYPE}).then(JSON.parse).then(s=>{s.success?this.props.onFileUploadStateChanged(!1,n):this.props.onFileUploadStateChanged(!1,n,s.message||tr(msgs.FILE_UPLOAD_FAILED_))}).thenCatch(s=>{this.props.onFileUploadStateChanged(!1,n,s.message||tr(msgs.FILE_UPLOAD_FAILED_))})}handleDrop_(t){this.clearDecoration_(),t.preventDefault();var o=t.dataTransfer||t.getBrowserEvent().dataTransfer,i=o.files,n;if(i&&i.length){var r=i[0],s=goog.bind(this.doUploadFile_,this,r);this.props.checkIfFileExists(r.name)?n=workspace.confirm(tr(msgs.CONFIRM_OVERWRITE_),trDom(msgs.CONFIRM_OVERWRITE_MESSAGE_,{$FILE_NAME:r.name,$LINE_BREAK:goog.dom.createDom("br")})).then(goog.bind(function(a){if(a)return s()},this)):n=s()}else n=goog.Promise.resolve();return n}render(){var t=null;return this.state.dragMaskVisible&&(t=sync.react.h(eu,null)),sync.react.h("div",{className:"file-browser-drop-zone",style:{position:"relative",height:"100%",width:"100%"},onDragOver:this.dragOver_,onDrop:this.handleDrop_},this.props.children,t)}},cu=lu;sync.view.FileBrowserDropZone=lu;goog.require("goog.async.Delay");namespace("sync.view");var cr=class extends sync.react.Component{constructor(t){super(t);this.fileSelected_=this.fileSelected_.bind(this),this.chooseFile_=this.props.chooseFile,this.fileChosen_=this.fileChosen_.bind(this),this.hideMessage_=this.showMessage_.bind(this,null),this.upOneLevelInFileList_=this.upOneLevelInFileList_.bind(this),this.currentUrlChanged_=this.props.currentUrlChanged||goog.nullFunction,this.currentSelectedUrlChanged_=this.props.currentSelectedUrlChanged||goog.nullFunction,this.onAuthenticationRequired=this.props.onAuthenticationRequired||goog.nullFunction,this.directoryLister_=this.props.directoryLister,this.fileUploaded_=this.fileUploaded_.bind(this),this.state={model:this.getModelFromProps(),message:null,isLoginRequired:!1,dragMaskVisible:!1}}updateModel_(t,o,i){this.props.onCurrentListedFilesChanged&&this.props.onCurrentListedFilesChanged(i),cr.urlsAreEqual_(this.state.model.getSelectedUrl(),o)||this.currentSelectedUrlChanged_(o),cr.urlsAreEqual_(this.state.model.getListedUrl(),t)||this.currentUrlChanged_(t);var n=new xg(this.state.model.getRootUrl(),t,o,i);this.setState({model:n})}getModelFromProps(){return new xg(this.getCorrectedRootUrlFromProps(),this.getCurrentUrlFromProps(this.props),this.props.selectedUrl?new E(this.props.selectedUrl):null,null)}listFolderAndFocusFileList_(t){this.loadFolderWithRootCheck_(t,null),this.filesList_.focus()}loadFolderWithRootCheck_(t,o){this.isRootOk_(t)?this.loadFolder_(t,o):this.showMessage_([tr(msgs.CANNOT_GO_ABOVE_ROOT_),Ho.types.WARNING])}loadFolder_(t,o){this.updateModel_(t,o,null),this.setState({updateInProgress:!0}),this.setState({message:null}),this.lastRequestedUrl_=t,this.directoryLister_.list(t).then(i=>{i.isAuthenticationRequired()?(this.onAuthenticationRequired(i.getUserActionRequiredException()),this.setState({isLoginRequired:!0})):cr.urlsAreEqual_(t,this.lastRequestedUrl_)&&(this.updateModel_(t,this.state.model.getSelectedUrl(),i),this.setState({message:null,isLoginRequired:!1,updateInProgress:!1}))}).catch(i=>{cr.urlsAreEqual_(t,this.lastRequestedUrl_)&&this.setState({updateInProgress:!1}),this.showMessage_([i,Ho.types.ERROR])})}componentDidUpdate(t){cr.propsAreEqual_(t,this.props)||this.updateStateFromProps_(t,this.props)}getCurrentUrlFromProps(t){var o=null;if(t.initialUrl)o=new E(t.initialUrl);else if(workspace.currentEditor){var i=workspace.currentEditor.options.url;i&&(o=new E(decodeURIComponent(i)))}if(o){o.setQuery(""),o.setFragment("");var n=o.getPathName();if(n.charAt(n.length-1)!=="/"){var r=new E(o.getUrl());r.setPathName(o.getParentPath()),o=r}}return o}updateStateFromProps_(t,o){var i=this.getModelFromProps(),n=this.getCurrentUrlFromProps(t);i.getListedUrl()&&!cr.urlsAreEqual_(n,i.getListedUrl())?this.loadFolderWithRootCheck_(i.getListedUrl(),i.getSelectedUrl()):i.setListingResult(this.state.model.getListingResult()),this.setState({model:i})}getCorrectedRootUrlFromProps(){var t=this.props.root;return t&&!goog.string.endsWith(t,"/")&&(t=t+"/"),t}fileChosen_(t,o){this.state.model.getSelectedUrl()&&(t?(o&&o.preventDefault(),this.loadFolder_(this.state.model.getSelectedUrl(),null)):this.chooseFile_(o))}isRootOk_(t){var o=!1,i=this.getCorrectedRootUrlFromProps();if(i){var n=t?t.getUrl():"";goog.string.startsWith(goog.Uri.removeDotSegments(n),i)&&(o=!0)}else o=!0;return o}fileSelected_(t){var o=this.state.model.getListedUrl().getPathName()+t.split("/").map(encodeURIComponent).join("/"),i=new E(this.state.model.getListedUrl().getUrl());i.setPathName(o),this.updateModel_(this.state.model.getListedUrl(),i,this.state.model.getListingResult())}upOneLevelInFileList_(){var t=new E(this.state.model.getListedUrl().getUrl());t.setPathName(this.state.model.getListedUrl().getParentPath()),this.loadFolderWithRootCheck_(t,null)}static urlsAreEqual_(t,o){var i=!0;return t instanceof E&&o instanceof E?i=t.equals(o):i=!t&&!o,i}static propsAreEqual_(t,o){var i=!1;if(t&&o)for(var n in t){if(o.hasOwnProperty(n)){var r=o[n],s=t[n];r instanceof E&&s instanceof E?i=r.equals(s):s||r?i=r===s:i=!0}else i=!1;if(!i)break}else i=!t&&!o;return i}showMessage_(t){this.setState({message:t})}fileUploaded_(t,o){t?this.showFileUploadError_(t):this.reloadCurrentFolderAndSelect_(o)}reloadCurrentFolderAndSelect_(t){var o=new E(this.state.model.getListedUrl().getUrl());o.setFileName(encodeURIComponent(t)),this.loadFolder_(this.state.model.getListedUrl(),o)}showFileUploadError_(t){this.setState({uploadInProgress:!1}),this.showMessage_([t.message||tr(msgs.FILE_UPLOAD_FAILED_),Ho.types.ERROR])}componentDidMount(){var t=this.state.model.getListedUrl();t&&this.isRootOk_(t)?(this.loadFolder_(t,this.state.model.getSelectedUrl()),this.currentUrlChanged_(t)):this.showMessage_([tr(msgs.CANNOT_GO_ABOVE_ROOT_),Ho.types.WARNING])}getSelectedFileName_(){var t=null,o=this.state.model.getSelectedUrl();return o&&(t=decodeURIComponent(o.getName()),o.isFolder()&&(t+="/")),t}onFileUploadStateChangedFromDropZone_(t,o,i){var n=this.state.folderUrlToUploadCounterMap,r=o.getFolderUrl();if(t)if(n){var s=n[r];n[r]=s?s+1:1}else n={},n[r]=1;else n[r]=n[r]-1,i?this.showMessage_([i,Ho.types.ERROR]):r===this.state.model.getListedUrl().getUrl()&&this.reloadCurrentFolderAndSelect_(decodeURIComponent(o.getFileName()));this.setState({folderUrlToUploadCounterMap:n})}isUploadingFromDropInCurrentDirectory_(){return this.state.folderUrlToUploadCounterMap?Boolean(this.state.folderUrlToUploadCounterMap[this.state.model.getListedUrl().getFolderUrl()]):!1}render(){var t=this.state.updateInProgress,o=this.state.isLoginRequired,i=this.isUploadingFromDropInCurrentDirectory_(),n=o||t;return sync.react.h("div",{className:sync.react.genClasses(["file-browser-container",i&&"oxy-spinner"])},sync.react.h("div",{className:"file-browser-header"},sync.react.h(au,{currentUrl:this.state.model.getListedUrl(),correctedRoot:this.state.model.getRootUrl(),onFolderChanged:this.listFolderAndFocusFileList_.bind(this),disabled:n}),sync.react.h("div",{className:"file-browser-more-actions-wrapper"},sync.react.h(iu,{fileUploaded:this.fileUploaded_,folderUrl:this.state.model.getListedUrl()&&this.state.model.getListedUrl().getFolderUrl(),fileExists:this.state.model.fileExists.bind(this.state.model),disabled:o})),this.props.includeNewAction&&sync.react.h(ru,{currentUrl:this.state.model.getListedUrl(),disabled:n,checkIfFileExists:this.state.model.fileExists.bind(this.state.model)})),sync.react.h(cu,{currentUrl:this.state.model.getListedUrl(),checkIfFileExists:this.state.model.fileExists.bind(this.state.model),onFileUploadStateChanged:this.onFileUploadStateChangedFromDropZone_.bind(this)},sync.react.h("div",{className:"file-browser-list-container"},sync.react.h(Ho,{message:this.state.message?this.state.message[0]:null,type:this.state.message?this.state.message[1]:null,hideMessage:this.hideMessage_}),sync.react.h(Jh,{filesJSON:this.state.model.getListingResult()?this.state.model.getListingResult().getFilesList():null,updateInProgress:t,selectedFile:this.getSelectedFileName_(),fileSelected:this.fileSelected_,fileChosen:this.fileChosen_,ref:r=>this.filesList_=r,upOneLevel:this.upOneLevelInFileList_}))))}},dd=cr;sync.view.FileBrowserComponent=cr;namespace("sync.view");var Og=class extends sync.react.Component{constructor(t){super(t);this.state={fileName:t.initialFileName?decodeURIComponent(t.initialFileName):null,selectedUrl:this.computeSelectedUrl_(t.initialFileName,t.initialUrl),initialUrl:this.props.initialUrl,currentListing:null}}computeSelectedUrl_(t,o){let i=null;return t&&o&&(i=new E(o),i.setFileName(encodeURIComponent(t))),i}static propsAreEqual(t,o){var i=!1;if(t&&o)for(var n in t){if(o.hasOwnProperty(n)){var r=o[n],s=t[n];r instanceof E&&s instanceof E?i=r.equals(s):s||r?i=r===s:i=!0}else i=!1;if(!i)break}else i=!t&&!o;return i}setFileNameForSelectedUrl_(t){let o=this.getFileNameForSelectedUrl_(t);o&&this.setFileName_(o)}getFileNameForSelectedUrl_(t){if(!t)return null;var o;return this.props.purpose===sync.api.UrlChooser.Purpose.CHOOSE?o=t.getFileName():o=t.getFileName()||this.state.fileName,decodeURIComponent(o||"")}setFileName_(t){var o=this.state.fileName!==t;o&&this.notifyCurrentFileNameChangedListener_(t);var i=this.state.selectedUrl;i&&i.setFileName(encodeURIComponent(t)),this.setState({fileName:t,selectedUrl:i})}notifyCurrentFileNameChangedListener_(t){var o=this.addDefaultFileExtension_(t),i;if(o){var n=this.state.currentListing;n&&!n.isAuthenticationRequired()?i=n.fileExists(o):i=!1}else i=!1;this.props.currentFileNameChanged(o,i,t)}addDefaultFileExtension_(t){var o=this.props.defaultSaveExtension;if(o&&t&&t.indexOf(".")===-1){var i=sync.api.UrlChooser.Purpose;(this.props.purpose===i.CHOOSE_SAVE_LOCATION||this.props.purpose===i.SAVE)&&(t=t+"."+o)}return t}componentDidUpdate(t){if(!Og.propsAreEqual(t,this.props)){let o=this.state.fileName,i=this.state.selectedUrl;(!t||t.initialUrl!==this.props.initialUrl&&this.props.initialUrl)&&(i=this.computeSelectedUrl_(this.props.initialFileName,this.props.initialUrl),this.state.selectedUrl!==i&&(this.props.currentSelectedUrlChanged(i),o=this.getFileNameForSelectedUrl_(i),this.notifyCurrentFileNameChangedListener_(o))),(!t||t.initialFileName!==this.props.initialFileName&&this.props.initialFileName)&&(o=this.props.initialFileName,this.notifyCurrentFileNameChangedListener_(o)),this.setState({initialUrl:this.props.initialUrl,selectedUrl:i,fileName:o})}}componentDidMount(){var t=this.state.fileName;if(t){var o=this.addDefaultFileExtension_(t);this.props.currentFileNameChanged(o,null,t)}}render(){var t=Object.assign({},this.props);return t.includeNewAction=!1,t.currentSelectedUrlChanged=o=>{this.props.currentSelectedUrlChanged(o),this.setState({selectedUrl:o}),this.setFileNameForSelectedUrl_(o)},t.currentUrlChanged=o=>{this.props.currentUrlChanged(o),this.setState({initialUrl:o.getUrl()})},t.onCurrentListedFilesChanged=o=>{this.setState({currentListing:o}),this.notifyCurrentFileNameChangedListener_(this.state.fileName)},t.selectedUrl=this.state.selectedUrl?this.state.selectedUrl.getUrl():null,t.initialUrl=this.state.initialUrl,sync.react.h("div",{className:"file-browser-with-filename"},sync.react.h("div",{className:"file-browser-with-filename__browser"},sync.react.h(dd,{...t})),sync.react.h("div",{className:"file-browser-with-filename__filename"},sync.react.h(zh,{fileName:this.state.fileName,fileNameChanged:this.setFileName_.bind(this)})))}},du=Og;sync.view.FileBrowserWithFileNameInput=Og;goog.require("goog.events");goog.require("goog.string");goog.require("goog.events.EventTarget");namespace("sync.api");sync.api.FileBrowsingDialog=function(t){t=t||{},this.fileBrowserProps=goog.object.clone(t),this.fileBrowserProps.directoryLister=new fs(t.listFolder),this.dialog=null,this.errorElement=null,this.currentUrl=null,this.fileNameInputValue_=null,this.fullFileName_=null,this.defaultSaveExtension_=null,this.needsRefresh_=!1,this.eventTarget=new goog.events.EventTarget,this.isRepoConfigShown=!1,this.displayRepoConfigArea=!0,this.fileBrowserProps.initialUrl&&this.setCurrentUrl_(new E(this.fileBrowserProps.initialUrl)),this.currentUrlChanged_=this.setCurrentUrl_.bind(this),this.currentSelectedUrlChanged_=this.setSelectedUrl_.bind(this),this.currentFileNameChanged_=this.setCurrentFileName_.bind(this),this.chooseFile_=this.doOk.bind(this),this.userActionRequiredError_=this.userActionRequiredError_.bind(this)};goog.inherits(sync.api.FileBrowsingDialog,sync.api.UrlChooser);sync.api.FileBrowsingDialog.FolderEntryDescriptor=function(t,o){this.name=t,this.folder=o};sync.api.FileBrowsingDialog.prototype.showErrorMessage=function(t,o){o||(o=Rn.types.ERROR),this.errorElement&&this.errorElement.show(t,o)};sync.api.FileBrowsingDialog.prototype.hideErrorElement=function(){this.errorElement&&this.errorElement.hide()};sync.api.FileBrowsingDialog.prototype.customizeDialog_=function(t){this.needsRefresh_&&sync.react.unmountComponentAtNode(this.fileBrowserParent),t===sync.api.UrlChooser.Purpose.CHOOSE?goog.dom.classlist.addRemove(this.dialog.getElement(),"file-browser-purpose-save","file-browser-purpose-choose"):goog.dom.classlist.addRemove(this.dialog.getElement(),"file-browser-purpose-choose","file-browser-purpose-save");var o=t===sync.api.UrlChooser.Purpose.CHOOSE?tr(msgs.CHOOSE_FILE_):tr(msgs.SAVE_FILE_);this.dialog.setTitle(o);var i=t===sync.api.UrlChooser.Purpose.CHOOSE||t===sync.api.UrlChooser.Purpose.CHOOSE_SAVE_LOCATION?tr(msgs.CHOOSE_):tr(msgs.SAVE_);this.buttonConfig=[{key:"ok",caption:i},{key:"cancel",caption:tr(msgs.CANCEL_)}],this.dialog.setButtonConfiguration(this.buttonConfig)};sync.api.FileBrowsingDialog.prototype.chooseUrl=function(t,o,i){this.getTheDialog_(),this.customizeDialog_(i),this.hideErrorElement(),this.defaultSaveExtension_=t&&t.getDefaultSaveExtension(),this.callback=o,this.dialog.onSelect(goog.bind(this.doSelect,this)),this.dialog.show();let n;t&&t.getInitialUrl()?n=t.getInitialUrl():this.currentUrl?n=this.currentUrl.getUrl():n=this.fileBrowserProps.initialUrl;let r;t&&t.getSuggestedFileName()?r=t.getSuggestedFileName():n&&!n.endsWith("/")?r=new URL(n).pathname.split("/").pop():this.fileNameInputValue_?r=this.fileNameInputValue_:this.fileBrowserProps.initialFileName?r=this.fileBrowserProps.initialFileName:r=null,this.updateFileBrowser_(n,r,i,this.fileBrowserProps.root),this.currentUrl?(this.isRepoConfigShown=!0,this.switchToFileBrowsing()):this.switchToRepoConfig()};sync.api.FileBrowsingDialog.prototype.doSelect=function(t,o){this.isRepoConfigShown?t===goog.ui.Dialog.DefaultButtonKeys.OK?this.handleOpenRepo(this.repoConfigArea,o):this.currentUrl&&(this.switchToFileBrowsing(),o.preventDefault()):t===goog.ui.Dialog.DefaultButtonKeys.OK?this.doOk(o):(this.callback(null),this.callback=null)};sync.api.FileBrowsingDialog.prototype.doOk=function(t){if(this.currentSelectedUrl){var o=this.currentSelectedUrl.getPathName(),i=goog.string.endsWith(o,"/");i?(this.fileBrowserParent&&sync.react.unmountComponentAtNode(this.fileBrowserParent),this.updateFileBrowser_(this.currentSelectedUrl.getUrl(),this.fileNameInputValue_,this.fileBrowserProps.purpose,this.fileBrowserProps.root),t&&t.preventDefault()):this.chooseFile(t)}else this.fullFileName_?this.chooseFile(t):(this.showErrorMessage(tr(msgs.NO_FILE_SELECTED_)),t&&t.preventDefault())};sync.api.FileBrowsingDialog.prototype.cancel=function(){this.dialog.hide()};sync.api.FileBrowsingDialog.prototype.supports=function(){return!0};sync.api.FileBrowsingDialog.prototype.supportsOperation=function(){return!0};sync.api.FileBrowsingDialog.prototype.setRootUrl=function(t){this.updateFileBrowser_(this.fileBrowserProps.initialUrl,this.fileBrowserProps.initialFileName,this.fileBrowserProps.purpose,t)};sync.api.FileBrowsingDialog.prototype.getRootUrl=function(){return this.fileBrowserProps.root};sync.api.FileBrowsingDialog.prototype.getTheDialog_=function(){if(!this.dialog){this.dialog=workspace.createDialog("file-browser-dialog"),this.dialog.setResizable(!0);var t=this;goog.events.listen(this.dialog.getEventTarget(),sync.api.Dialog.EventType.SIZE_CHANGED,function(){clearTimeout(t.fileUrlScrollTimeout_),t.fileUrlScrollTimeout_=setTimeout(function(){t.fileUrl&&t.fileUrl.scrollLeft()},200)}),this.setDialogLayout()}return this.dialog};sync.api.FileBrowsingDialog.prototype.setUpTheDialog=function(t){this.hideErrorElement(),this.setInitialUrl_(t)};sync.api.FileBrowsingDialog.prototype.setInitialUrl_=function(t){if(t){var o=new E(t);this.currentUrl=o,this.updateFileBrowser_(t,o.getFileName()||this.fileNameInputValue_,this.fileBrowserProps.purpose,this.fileBrowserProps.root)}};sync.api.FileBrowsingDialog.prototype.updateFileBrowser_=function(t,o,i,n){if(this.fileBrowserProps={root:n,initialUrl:t,directoryLister:this.fileBrowserProps.directoryLister,initialFileName:o,defaultSaveExtension:this.defaultSaveExtension_,currentUrlChanged:this.currentUrlChanged_,currentFileNameChanged:this.currentFileNameChanged_,currentSelectedUrlChanged:this.currentSelectedUrlChanged_,chooseFile:this.chooseFile_,onAuthenticationRequired:this.userActionRequiredError_,purpose:i},this.fileBrowserParent){this.needsRefresh_=!1,sync.react.render(sync.react.createElement(du,this.fileBrowserProps),this.fileBrowserParent);var r=this.fileBrowserParent.getElementsByClassName("file-browser-list")[0];r.focus()}};sync.api.FileBrowsingDialog.prototype.setDialogLayout=function(){var t=this.dialog.getElement();goog.dom.classlist.add(t,"file-browser-content"),this.repoConfigArea=this.displayRepoConfigArea?goog.dom.createDom("div","file-browser-repo-config-area"):null,this.fileBrowserParent=goog.dom.createDom("div","file-browser-component-container"),goog.dom.removeChildren(t),goog.dom.append(t,this.repoConfigArea,goog.dom.createDom("div","file-browser-component-container-parent",this.fileBrowserParent)),this.dialogElement=goog.dom.getAncestorByClass(t,"modal-dialog");var o=750;sync.util.getScreenWidth()<769&&(o=600,sync.api.FileBrowsingDialog.DEFAULT_HEIGHT=500),this.dialog.setPreferredSize(o,sync.api.FileBrowsingDialog.DEFAULT_HEIGHT),this.errorElement=new Rn(t)};sync.api.FileBrowsingDialog.prototype.chooseFile=function(t){var o=this.currentSelectedUrl?this.currentSelectedUrl:this.currentUrl,i=this.currentFileExists,n=new E("placeholder:/");n.setUrl(o.getUrl()),n.setFileName(encodeURIComponent(this.fullFileName_));var r=n.getUrl();this.fileBrowserProps.purpose===sync.api.UrlChooser.Purpose.CHOOSE_SAVE_LOCATION&&i!==!1?(t&&t.preventDefault(),i===!0&&workspace.confirm(tr(msgs.CONFIRM_OVERWRITE_),trDom(msgs.CONFIRM_OVERWRITE_MESSAGE_,{$FILE_NAME:this.fullFileName_,$LINE_BREAK:goog.dom.createDom("br")})).then(goog.bind(function(s){s&&this.finish(r)},this))):this.fileBrowserProps.purpose===sync.api.UrlChooser.Purpose.CHOOSE&&i!==!0?i===!1?(t&&t.preventDefault(),this.showErrorMessage(tr(msgs.CHOSEN_FILE_DOES_NOT_EXIST_))):this.finish(r):this.finish(r)};sync.api.FileBrowsingDialog.prototype.finish=function(t){this.callback(t),this.callback=null,this.dialog.hide(),this.fileBrowserProps.purpose===sync.api.UrlChooser.Purpose.CHOOSE_SAVE_LOCATION&&(this.fileNameInputValue_="",this.needsRefresh_=!0)};sync.api.FileBrowsingDialog.prototype.getEventTarget=function(){return this.eventTarget};sync.api.FileBrowsingDialog.prototype.refresh=function(){this.fileBrowserParent&&sync.react.unmountComponentAtNode(this.fileBrowserParent),this.updateFileBrowser_(this.currentUrl?this.currentUrl.getUrl():null,this.fileNameInputValue_,this.fileBrowserProps.purpose,this.fileBrowserProps.root)};sync.api.FileBrowsingDialog.EventTypes={USER_ACTION_REQUIRED:"user_action_required"};sync.api.FileBrowsingDialog.UserActionRequiredEvent=function(t){this.type=sync.api.FileBrowsingDialog.EventTypes.USER_ACTION_REQUIRED,this.message=new sync.api.WebappMessage(t)};sync.api.FileBrowsingDialog.prototype.switchToRepoConfig=function(){this.isRepoConfigShown||(this.hideErrorElement(),this.isRepoConfigShown=!0,goog.dom.classlist.add(this.dialog.getElement(),"file-browser-repoconfig"),this.repoConfigArea&&this.renderRepoEditing(this.repoConfigArea),this.dialog.setButtonConfiguration([{key:"ok",caption:tr(msgs.BROWSE_)},{key:"cancel",caption:tr(msgs.CANCEL_)}]))};sync.api.FileBrowsingDialog.DEFAULT_HEIGHT=600;sync.api.FileBrowsingDialog.prototype.switchToFileBrowsing=function(){this.isRepoConfigShown&&(this.isRepoConfigShown=!1,this.repoConfigArea&&this.renderRepoPreview(this.repoConfigArea),this.dialog.setPreferredSize(null,sync.api.FileBrowsingDialog.DEFAULT_HEIGHT),setTimeout(goog.bind(function(){this.dialog.setPreferredSize(null,sync.api.FileBrowsingDialog.DEFAULT_HEIGHT)},this),500),goog.dom.classlist.remove(this.dialog.getElement(),"file-browser-repoconfig"),this.dialog.setButtonConfiguration(this.buttonConfig))};sync.api.FileBrowsingDialog.prototype.clearFileBrowsingData=function(){this.updateFileBrowser_(null,null,null,null)};sync.api.FileBrowsingDialog.prototype.openUrl=function(t,o,i){o||goog.string.endsWith(t,"/")||(t=t+"/"),i&&i.preventDefault(),this.setUpTheDialog(t),this.switchToFileBrowsing(),o&&i&&this.doOk(null)};sync.api.FileBrowsingDialog.prototype.userActionRequiredError_=function(t){var o=JSON.parse(t.message);goog.events.dispatchEvent(this.eventTarget,new sync.api.FileBrowsingDialog.UserActionRequiredEvent(o)),this.needsRefresh_=!0};sync.api.FileBrowsingDialog.prototype.getCurrentFolderUrl=function(){return this.currentUrl&&this.currentUrl.getFolderUrl()};sync.api.FileBrowsingDialog.prototype.setCurrentUrl_=function(t){this.currentUrl=t};sync.api.FileBrowsingDialog.prototype.getFileName=function(){return this.fullFileName_};sync.api.FileBrowsingDialog.prototype.setCurrentFileName_=function(t,o,i){this.fileNameInputValue_=i,this.fullFileName_=t,this.currentFileExists=o};sync.api.FileBrowsingDialog.prototype.setSelectedUrl_=function(t){this.currentSelectedUrl=t};sync.api.FileBrowsingDialog.prototype.handleOpenRepo=function(t,o){};sync.api.FileBrowsingDialog.prototype.renderRepoEditing=function(t){};sync.api.FileBrowsingDialog.prototype.renderRepoPreview=function(t){};goog.require("goog.events.EventTarget");namespace("sync.api");sync.api.Workspace=function(){};goog.inherits(sync.api.Workspace,goog.events.EventTarget);sync.api.Workspace.prototype.setUrlChooser=function(t){};sync.api.Workspace.prototype.getUrlChooser=function(){};sync.api.Workspace.prototype.setStripesContainer=function(t){};sync.api.Workspace.prototype.createDialog=function(t){};sync.api.Workspace.prototype.getViewManager=function(){};sync.api.Workspace.prototype.getNotificationManager=function(){};sync.api.Workspace.prototype.addRelativeReferencesResolver=function(t,o){};sync.api.Workspace.prototype.makeRelative=function(t,o){};sync.api.Workspace.prototype.getOption=function(t,o){};sync.api.Workspace.prototype.setOption=function(t,o){};sync.api.Workspace.prototype.getEditingContextManager=function(){};sync.api.Workspace.prototype.getFileServersManager=function(){};sync.api.Workspace.prototype.openLink=function(t){};sync.api.Workspace.prototype.getEditingSupportManager=function(){};sync.api.Workspace.createEditorStripe=function(t,o,i){};sync.api.Workspace.prototype.removeEditorStripe=function(t,o){};sync.api.Workspace.EventType={BEFORE_EDITOR_LOADED:"before_editor_loaded",EDITOR_LOADED:"editor_loaded",EDITOR_LOADING_FAILED:"editor_loading_failed",EDITOR_DISPOSED:"editor_disposed",BEFORE_EDITOR_DISPOSED:"before_editor_disposed",BEFORE_DASHBOARD_LOADED:"before_dashboard_loaded",DASHBOARD_LOADED:"dashboard_loaded"};sync.api.Workspace.EditorLifecycleEvent=function(t,o){this.type=t,this.editor=o};sync.api.Workspace.BeforeEditorOpenedEvent=function(t,o,i){sync.api.Workspace.EditorLifecycleEvent.call(this,t,o),this.options=i};goog.inherits(sync.api.Workspace.BeforeEditorOpenedEvent,sync.api.Workspace.EditorLifecycleEvent);sync.api.Workspace.DashboardLifecycleEvent=function(t,o){this.type=t,this.options=o};goog.require("goog.events.EventTarget");namespace("sync.api");sync.api.EditingSupport=function(t){if(goog.events.EventTarget.call(this),this.options=t,!this.options)throw new Error('The sync.api.EditingSupport constructor must receive the "options" parameter')};goog.inherits(sync.api.EditingSupport,goog.events.EventTarget);sync.api.EditingSupport.EventType={DIRTY_STATUS_CHANGED:"AES_dirty_status_changed"};sync.api.EditingSupport.DirtyStatusChangedEvent=function(t){goog.events.Event.call(this,sync.api.EditingSupport.EventType.DIRTY_STATUS_CHANGED),this.isDirty=t};goog.inherits(sync.api.EditingSupport.DirtyStatusChangedEvent,goog.events.Event);sync.api.EditingSupport.prototype.getActionsManager=function(){return null};sync.api.EditingSupport.prototype.getSelectionManager=function(){return null};sync.api.EditingSupport.prototype.getHighlightsManager=function(){return null};sync.api.EditingSupport.prototype.getContent=function(t){};sync.api.EditingSupport.prototype.load=function(t,o,i){};sync.api.EditingSupport.prototype.getType=function(){return null};sync.api.EditingSupport.prototype.focus=function(){};sync.api.EditingSupport.prototype.getResourceDragHandler=function(){return null};sync.api.EditingSupport.prototype.getSpellChecker=function(){return null};sync.api.EditingSupport.prototype.getApplicationToolbar=function(){return null};sync.api.EditingSupport.prototype.getFirstToolbar=function(){return null};sync.api.EditingSupport.prototype.getOtherToolbars=function(t){t(null)};sync.api.EditingSupport.prototype.disposeInternal=function(){sync.api.EditingSupport.superClass_.disposeInternal.call(this)};sync.api.EditingSupport.prototype.getUrl=function(){return this.options.url};sync.api.EditingSupport.prototype.scrollToAnchor=function(t){return!1};sync.api.EditingSupport.prototype.getConcurrentEditingManager=function(){return null};var pu=sync.api.EditingSupport;namespace("sync.actions");sync.actions.AbstractAction=function(t){this.keystrokeStr=t,this.isRespectingDomUpdateSilencer=!1};sync.actions.AbstractAction.prototype.getShortcut=function(){return this.keystrokeStr};sync.actions.AbstractAction.prototype.actionPerformed=function(t){};sync.actions.AbstractAction.prototype.getDisplayName=function(){return""};sync.actions.AbstractAction.prototype.getDescription=function(){return""};sync.actions.AbstractAction.prototype.getLargeIcon=function(t){return""};sync.actions.AbstractAction.prototype.getSmallIcon=function(t){return""};sync.actions.AbstractAction.prototype.renderSmallIcon=function(){var t=this.getSmallIcon(sync.util.getHdpiFactor());return sync.util.renderSmallIcon(t)};sync.actions.AbstractAction.prototype.renderLargeIcon=function(){var t=this.getLargeIcon(sync.util.getHdpiFactor());return sync.util.renderLargeIcon(t)};sync.actions.AbstractAction.prototype.isEnabled=function(){return!0};sync.actions.AbstractAction.prototype.dispose=function(){};namespace("sync.actions");var fo=function(t){sync.actions.AbstractAction.call(this,t.keyStrokeStr),this.props=t};goog.inherits(fo,sync.actions.AbstractAction);fo.createActionWithBoundContext=function(t,o){var i=Object.create(t);return i.actionPerformed=function(n){t.actionPerformedFor(n,o)},i.isEnabled=function(){return t.isEnabledFor(o)},i};fo.createActionWithExtraCallbacks=function(t,o){var i=Object.create(t);return o=o||[],i.actionPerformed=function(n){t.actionPerformed(()=>{n();for(let r of o)r()})},i};fo.prototype.actionPerformed=function(t){this.props.actionPerformed(t)};fo.prototype.getDisplayName=function(){return this.props.displayName};fo.prototype.getDescription=function(){return this.props.description||""};fo.prototype.renderLargeIcon=function(){return this.props.largeIconClass?goog.dom.createDom("div",this.props.largeIconClass):fo.superClass_.renderLargeIcon.call(this)};fo.prototype.getLargeIcon=function(t){return this.props.largeIconPath&&sync.util.image.getImageUrl(this.props.largeIconPath,t)};fo.prototype.renderSmallIcon=function(){return this.props.smallIconClass?goog.dom.createDom("div",this.props.smallIconClass):fo.superClass_.renderSmallIcon.call(this)};fo.prototype.getSmallIcon=function(t){return this.props.smallIconPath&&sync.util.image.getImageUrl(this.props.smallIconPath,t)};fo.prototype.isEnabled=function(){return this.props.isEnabled?this.props.isEnabled():!0};var De=fo;sync.actions.BaseAction=fo;namespace("sync.util");var pd=function(t,o,i){this.callback_=t,this.called_=!1,this.expirationCallback_=i,this.timer=setTimeout(goog.bind(this.expire_,this),o)};pd.prototype.call=function(){this.called_||(this.called_=!0,this.callback_.call(),clearTimeout(this.timer))};pd.prototype.expire_=function(){this.called_=!0,this.callback_.call(),this.expirationCallback_.call()};var gu=pd;sync.util.ExpiringCallback=pd;namespace("sync.actions");var Ai=function(t){De.call(this,t),this.callsCallback=!0};goog.inherits(Ai,De);Ai.prototype.execute=function(){return this.props.execute?this.props.execute():new Promise(t=>{this.actionPerformed(()=>t())})};Ai.prototype.actionPerformed=function(t){this.props.actionPerformed?this.props.actionPerformed(t):this.execute().finally(t||goog.nullFunction)};Ai.executeAction=function(t,o,i){var n;if(Ai.shouldStartTimer(t)){var r=new gu(i,o,()=>console.warn("Action execution expired",t));n=goog.bind(r.call,r)}else n=goog.functions.once(i);try{t.actionPerformed(n)}catch(s){console.warn(s),n()}};Ai.shouldStartTimer=function(t){var o=!0;if(goog.isFunction(t.getFollowUp)){var i=t.getFollowUp();i&&(o=!1)}else t.callsCallback&&(o=!1);return o};Ai.willInvokeTheCallback=function(t){return Ai.shouldStartTimer(t)?new Ai({actionPerformed:goog.bind(t.actionPerformed,t)}):t};var _=Ai;sync.actions.Action=Ai;namespace("sync.actions");var gd=function(){};gd.prototype.executeAction=function(t){t.actionPerformed(goog.nullFunction)};gd.prototype.executeDocumentTransaction=function(t){return new Promise(o=>{this.executeAction(new _({execute:()=>{var i=t();return i.then(o),i}}))})};var Pn=gd;sync.actions.ActionsExecutor=gd;goog.require("goog.ui.KeyboardShortcutHandler");namespace("sync.actions");var yo=function(t){if(t)try{this.fromKeyStrokeString(t)}catch{this.keyCode=0,this.modifiers=0,t==="numpad_+"&&(this.keyCode=107)}else this.keyCode=0,this.modifiers=0};yo.prototype.PLATFORM_INDEPENDENT_TO_NATIVE={M1:goog.userAgent.MAC?"meta":"ctrl",M2:"shift",M3:"alt",M4:goog.userAgent.MAC?"ctrl":void 0};yo.KeyNames={};goog.object.extend(yo.KeyNames,goog.events.KeyNames,{12:"clear",20:"caps_lock",27:"escape",33:"page_up",34:"page_down",91:"windows",93:"context_menu",96:"numpad0",97:"numpad1",98:"numpad2",99:"numpad3",100:"numpad4",101:"numpad5",102:"numpad6",103:"numpad7",104:"numpad8",105:"numpad9",106:"multiply",107:"add",109:"subtract",110:"decimal",111:"divide",144:"num_lock",145:"scroll_lock",189:"minus",188:"comma",190:"period",191:"slash",192:"back_quote",219:"open_bracket",220:"back_slash",221:"close_bracket",222:"quote"});yo.KeyDisplayNames={37:"\u2190",38:"\u2191",39:"\u2192",40:"\u2193",59:";",61:"=",186:";",187:"=",189:"-",188:",",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",106:"Num-*",107:"Num-+",109:"Num--",110:"Num-.",111:"Num-/"};yo.prototype.getModsRenderString_=function(){var t=goog.ui.KeyboardShortcutHandler.Modifiers,o="";return(this.modifiers&t.CTRL)!=0&&(o+="Ctrl+"),(this.modifiers&t.META)!=0&&(o+="\u2318+"),(this.modifiers&t.ALT)!=0&&(goog.userAgent.MAC?o+="\u2325+":o+="Alt+"),(this.modifiers&t.SHIFT)!=0&&(o+="Shift+"),o};yo.prototype.getDisplayString=function(){var t;if(96<=this.keyCode&&this.keyCode<=105)t="Num-"+(this.keyCode-96);else if(t=yo.KeyDisplayNames[this.keyCode],!t){var o=yo.KeyNames[this.keyCode];o&&(t=o.split("_").map(goog.string.capitalize).join(" "))}var i="";return t&&(i=this.getModsRenderString_()+t),i};yo.prototype.fromKeyStrokeString=function(t){for(var o=t.split(" "),i="",n=0;n<o.length-1;n++){var r=this.PLATFORM_INDEPENDENT_TO_NATIVE[o[n]]||o[n];i+=r+"+"}i+=o[o.length-1];var s,a;try{a=goog.events.KeyNames,goog.events.KeyNames=yo.KeyNames,s=goog.ui.KeyboardShortcutHandler.parseStringShortcut(i)[0]}finally{goog.events.KeyNames=a}this.modifiers=s.modifiers,this.keyCode=parseInt(s.keyCode,10)};yo.prototype.fromKeyEvent=function(t){var o=goog.ui.KeyboardShortcutHandler.Modifiers;this.keyCode=t.keyCode,this.modifiers=(t.shiftKey?o.SHIFT:0)|(t.ctrlKey?o.CTRL:0)|(t.altKey?o.ALT:0)|(t.metaKey?o.META:0)};yo.prototype.equals=function(t){return this.keyCode===t.keyCode&&this.modifiers===t.modifiers};yo.prototype.getCode=function(){return this.keyCode&255|this.modifiers<<8};var J=yo;sync.actions.KeyStroke=yo;namespace("sync.api");sync.api.ActionsManagerCore=function(){};sync.api.ActionsManagerCore.prototype.registerAction=function(t,o,i){};sync.api.ActionsManagerCore.prototype.setActionShortcut=function(t,o){};sync.api.ActionsManagerCore.prototype.unregisterAction=function(t){};sync.api.ActionsManagerCore.prototype.getActionByShortcut=function(t){};sync.api.ActionsManagerCore.prototype.refreshActionsStatus=function(t){};sync.api.ActionsManagerCore.prototype.getActionById=function(t){};namespace("sync.api");sync.api.ActionsManager=function(){};goog.inherits(sync.api.ActionsManager,sync.api.ActionsManagerCore);sync.api.ActionsManager.prototype.invokeOperation=function(t,o,i,n,r){};sync.api.ActionsManagerCore.prototype.registerAction=function(t,o,i){};goog.require("goog.ui.ComboBox");namespace("sync.view");var ys=function(){goog.ui.ComboBox.call(this)};goog.inherits(ys,goog.ui.ComboBox);ys.prototype.createDom=function(){ys.superClass_.createDom.call(this);var t=this.makeId("sync-combo-menu"),o=this.getMenu().getElement();o.setAttribute("id",t);var i=this.getInputElement();goog.a11y.aria.setState(i,goog.a11y.aria.State.AUTOCOMPLETE,goog.a11y.aria.AutoCompleteValues.LIST),goog.a11y.aria.setState(i,goog.a11y.aria.State.OWNS,t),goog.a11y.aria.setState(i,goog.a11y.aria.State.EXPANDED,!0)};ys.prototype.enterDocument=function(){ys.superClass_.enterDocument.call(this);var t=this.getInputElement();this.getMenu().listen(goog.ui.Component.EventType.HIGHLIGHT,function(o){goog.a11y.aria.setActiveDescendant(t,o.target.getElement())})};var ua=ys;sync.view.BaseCombo=ys;namespace("sync.view");var Y=function(t,o,i,n){if(ua.call(this),this.scrollEventTarget_=o,this.onlyOptions_=!!n,this.highlightedItem_=null,this.detachedMenuContainer_=null,this.setUseDropdownArrow(!0),this.setItems(t),i){this.getLabelInput().setLabel(i);var r=this.getInputElement();r&&r.removeAttribute("aria-label")}this.eventHandler=new goog.events.EventHandler,this.menuEventHandler_=new goog.events.EventHandler(this)};goog.inherits(Y,ua);Y.prototype.setOnlyOptions=function(t){this.onlyOptions_=t};Y.prototype.setDetachedMenu=function(t){this.detachedMenuContainer_=t};Y.prototype.showMenu_=function(){var t=this.getMenu().getElement();if(this.detachedMenuContainer_!==null){this.menuEventHandler_.listen(this.scrollEventTarget_,goog.events.EventType.SCROLL,goog.bind(this.dismiss,this));var o=goog.style.getFontSize(this.getElement()),i=goog.style.getFontFamily(this.getElement()),n=goog.style.getSize(this.getElement()).width;t.style.fontSize=o+"px",t.style.fontFamily=i,t.style.width=n+"px",goog.dom.appendChild(this.detachedMenuContainer_,t)}goog.dom.classlist.add(t,"goog-menu-combo"),t.removeAttribute("tabIndex"),Y.superClass_.showMenu_.call(this),this.dispatchEvent(new goog.events.Event(goog.ui.Component.EventType.OPEN,this))};Y.prototype.hideMenu_=function(){Y.superClass_.hideMenu_.call(this),this.detachedMenuContainer_!==null&&(this.menuEventHandler_.removeAll(),goog.dom.appendChild(this.getContentElement(),this.getMenu().getElement())),this.dispatchEvent(new goog.events.Event(goog.ui.Component.EventType.CLOSE,this))};Y.prototype.createDom=function(){Y.superClass_.createDom.call(this),this.getMenu().forEachChild(function(t){t.title&&(t.getElement().title=t.title)})};Y.prototype.setItems=function(t){this.removeAllItems();for(var o=0;o<t.length;o++){var i;if(t[o]instanceof goog.ui.ComboBoxItem)i=t[o];else{var n=t[o].title;i=new goog.ui.ComboBoxItem(t[o].value),i.title=n,t[o].disabled&&i.setState(goog.ui.Component.State.DISABLED,!0)}this.addItem(i)}this.dummy=new goog.ui.ComboBoxItem(""),this.dummy.setSticky(!0),this.dummy.setEnabled(!1),this.addItem(this.dummy)};Y.prototype.dispatchChangeEvent_=function(t){t.preventDefault();var o="";if(this.onlyOptions_)if(this.highlightedItem_&&this.highlightedItem_.isEnabled())o=this.highlightedItem_.getCaption();else return;else{if(this.highlightedItem_&&!this.highlightedItem_.isEnabled())return;o=this.getInputElement().value}this.highlightedItem_!==this.dummy&&this.dispatchEvent(new goog.ui.ItemEvent(goog.ui.Component.EventType.ACTION,this,new goog.ui.MenuItem(t,o)))};Y.prototype.startListeners=function(){var t=this.getInputElement();this.eventHandler.listen(this.keyHandler_,goog.events.KeyHandler.EventType.KEY,goog.bind(this.handleKey_,this)),this.eventHandler.listen(t,goog.events.EventType.KEYDOWN,goog.bind(this.handleKeyDown_,this))};Y.prototype.handleKeyEvent=function(t){return t.keyCode===goog.events.KeyCodes.HOME||t.keyCode===goog.events.KeyCodes.END?!1:t.keyCode===goog.events.KeyCodes.TAB?(this.handleTab_(t),!0):(this.highlightedItem_=this.getMenu().getHighlighted(),Y.superClass_.handleKeyEvent.call(this,t))};Y.prototype.handleTab_=function(t){var o=null,i=this.getMenu();if(i.isVisible()){i.getElement().setAttribute("tabIndex","-1");var n=i.getHighlighted();if(n&&n.isEnabled()){n.performActionInternal(t);return}}this.onlyOptions_||this.dispatchEvent(new goog.ui.ItemEvent(goog.ui.Component.EventType.ACTION,this,new goog.ui.MenuItem(t,this.getInputElement().value)))};Y.prototype.handleKey_=function(t){t.keyCode===goog.events.KeyCodes.ENTER&&(this.dispatchChangeEvent_(t),t.stopPropagation())};Y.prototype.onMenuSelected_=function(t){var o=t.target;o.isEnabled()?(this.highlightedItem_=this.getMenu().getHighlighted(),Y.superClass_.onMenuSelected_.call(this,t)):(t.stopPropagation(),t.preventDefault())};Y.prototype.handleKeyDown_=function(t){t.keyCode===goog.events.KeyCodes.ESC&&this.dismiss()};Y.prototype.disposeInternal=function(){this.eventHandler.removeAll(),this.menuEventHandler_.removeAll(),Y.superClass_.disposeInternal.call(this)};Y.prototype.onInputEvent_=function(t){t.keyCode!==goog.events.KeyCodes.ENTER&&Y.superClass_.onInputEvent_.call(this,t)};Y.prototype.onInputBlur_=function(t){if(this.ignoreNextBlur_)this.ignoreNextBlur_=!1;else if(this.onlyOptions_){var o=this.findAllowedItem_();o&&this.setValue(o.getCaption())}else this.highlightedItem_&&!this.highlightedItem_.isEnabled()&&this.setValue("");Y.superClass_.onInputBlur_.call(this,t)};Y.prototype.findAllowedItem_=function(){var t;return!this.highlightedItem_||!this.highlightedItem_.isEnabled()?t=this.findExactItemOr1stEnabled(this.getValue()):this.highlightedItem_&&this.highlightedItem_.isEnabled()&&(t=this.highlightedItem_),t};Y.prototype.findExactItemOr1stEnabled=function(t){for(var o,i,n=this.getItemCount()-1;n>=0;--n){var r=this.getItemAt(n);if(r.isEnabled()&&(i=r,r.getCaption()===t)){o=r;break}}return o||i};Y.prototype.setValue=function(t,o){Y.superClass_.setValue.call(this,t),this.highlightedItem_=this.getMenu().getHighlighted(),o&&(this.setItemVisibilityFromToken_(""),this.getInputElement().select())};Y.prototype.onComboMouseDown_=function(t){if(document.activeElement===this.getInputElement()){goog.dom.classlist.contains(t.target,"goog-combobox-button")&&(this.ignoreNextBlur_=!0);var o;try{o=this.input_.select,this.input_.select=goog.nullFunction,t.preventDefault=goog.nullFunction,Y.superClass_.onComboMouseDown_.call(this,t)}finally{this.input_.select=o}}else Y.superClass_.onComboMouseDown_.call(this,t)};Y.prototype.repositionMenu=function(){this.positionMenu()};var ma=Y;sync.view.EditableCombo=Y;goog.require("goog.events");namespace("sync.attributes");var hu=class extends sync.react.Component{constructor(t){super(t);this.onEditActionClicked=this.onEditActionClicked.bind(this),this.stopPropagation=this.stopPropagation.bind(this),this.updateContainer_=o=>this.container_=o,this.state={editableCombo:null}}render(){var t=null;if(this.props.editAction){var o=this.props.editAction.getButtonClass(),i="chooser-input__icon brighten-on-hover "+o;t=sync.react.h("button",{className:i,onClick:this.onEditActionClicked,title:this.props.editAction.getTooltip()})}return sync.react.h("div",{onKeyDown:this.stopPropagation,className:sync.react.genClasses(["editable-combo",this.props.className,this.props.editAction&&"chooser-input"])},sync.react.h("div",{className:sync.react.genClasses(["editable-combo-container",this.props.editAction&&"chooser-input__input"]),ref:this.updateContainer_}),t)}componentDidMount(){var t=new ma([],this.props.scrollEventTarget,this.props.placeholderText,!0);this.props.detachedMenu&&t.setDetachedMenu(document.body);var o=this.container_;t.eventHandler.listen(t,goog.ui.Component.EventType.ACTION,n=>this.onOptionSelected(n)),t.render(o),this.props.initialValue&&t.setValue(this.props.initialValue);var i=t.getInputElement();goog.dom.classlist.add(i,"editable-combo__input"),this.props.id&&i.setAttribute("id",this.props.id),this.props.onFocus&&goog.events.listen(i,goog.events.EventType.FOCUS,this.props.onFocus),this.props.labelId&&i.setAttribute("aria-labelledby",this.props.labelId),t.startListeners(),this.setState({editableCombo:t}),this.props.startFocused&&this.focus(),this.updateOptions_(this.props.options,t)}onOptionSelected(t){if(this.props.onOptionSelected){var o=t.item.getContent()||{};this.props.onOptionSelected(t.item.getValue(),o)}}componentWillReceiveProps(t){t.initialValue!==this.props.initialValue&&setTimeout(()=>{this.state.editableCombo.setValue(t.initialValue)}),this.updateFocusListener(t),this.sameOptions(t)||this.updateOptions_(t.options)}sameOptions(t){var o=t.options||[],i=this.props.options||[];return goog.object.equals(o,i)}updateFocusListener(t){if(this.props.onFocus!==t.onFocus){var o=this.state.editableCombo.getInputElement();this.props.onFocus&&goog.events.unlisten(o,goog.events.EventType.FOCUS,this.props.onFocus),t.onFocus&&goog.events.listen(o,goog.events.EventType.FOCUS,t.onFocus)}}updateOptions_(t,o){var i=t||[];let n=i.map(function(r){typeof r=="string"&&(r={name:r});var s=r.editableState==="FALSE";return{value:r.name,title:r.title,disabled:s}});n.onlyAllowed=i.editableState==="ONLY_ALLOWED_ITEMS",this.setItems_(n,o)}componentWillUnmount(){this.state.editableCombo.exitDocument(),this.state.editableCombo.disposeInternal()}focus(){var t=this.container_.querySelector("input");t.focus(),t.select()}getSelectedValue(){return this.container_.querySelector("input").value}resetValue(){this.state.editableCombo.setValue(this.props.initialValue)}stopPropagation(t){var o=t.which||t.keyCode;o===goog.events.KeyCodes.ESC&&t.stopPropagation()}setItems_(t,o){var i=this.state.editableCombo||o;i.setItems(t),i.setOnlyOptions(t.onlyAllowed);var n=t.length!==0;goog.dom.classlist.enable(i.getElement(),"editable-combo--no-dropdown",!n),n&&i.repositionMenu()}onEditActionClicked(){var t=this.props.editAction;t&&this.props.ctrl.editingSupport.scheduleDocumentTransaction(()=>new Promise(o=>{t.editsDirectly?(this.onEditActionCancel(),t.actionPerformed(this.props.initialValue,()=>o(null))):t.actionPerformed(this.props.initialValue,(i,n)=>{this.onEditActionDone(i,n),o(i)})}))}onEditActionDone(t,o){t!==this.props.initialValue&&t&&(o&&(t=workspace.makeRelative(this.props.ctrl.editorUrl,t)),this.state.editableCombo.isInDocument()&&(this.state.editableCombo.setValue(t),this.props.onOptionSelected&&this.props.onOptionSelected(t)))}onEditActionCancel(){this.props.onCancel&&this.props.onCancel()}},dr=hu;sync.attributes.REditableComboBox=hu;namespace("sync.view");var Vv="review-comment",Wv="review-comment--multiline",Kv="review-comment__mention",Gv="review-comment__mention--mentions-me",uu="review-comment__mention-quote",mu=class extends sync.react.Component{constructor(t){super(t)}renderCommentSpans_(t,o){for(var i=[],n=0;n<t.length;n++){var r=t[n];if(r.mention){var s="";o||(s+=Kv,r.mention===this.props.currentUserName&&(s+=" "+Gv)),i.push(sync.react.h("span",{key:n.toString(),className:s},sync.react.h("span",null,"@"),sync.react.h("span",{className:uu},'"'),r.mention,sync.react.h("span",{className:uu},'"')))}else i.push(sync.react.h("span",{key:n.toString()},r.text))}return i}render(){if(!this.props.comment)return null;var t=this.props.comment.indexOf(`
`)!==-1;return sync.react.h("div",{className:sync.react.genClasses([Vv,t&&Wv,this.props.isDone&&"done"])},this.renderCommentSpans_(this.props.commentTokens,this.props.isDone))}},Fl=mu;sync.view.ReviewComment=mu;namespace("sync.actions.review");var fu=function(t,o){this.text=t,this.mention=o},_s=fu;sync.actions.review.CommentToken=fu;namespace("sync.actions.review");var fa=class{tokenize(o){var i=this.findMentionsRanges_(o);return this.buildTokens_(o,i)}findMentionsRanges_(o){for(var i=[],n,r=/(@[\w\d_-]+)|(@"[^"]+")/g;(n=r.exec(o))!=null;){var s=!1;if(n.index===0)s=!0;else{var a=o.charAt(n.index-1),l=[",",";"];(a.match(/\s/)||l.indexOf(a)!==-1)&&(s=!0)}s&&i.push({start:n.index,end:n.index+n[0].length})}return i}buildTokens_(o,i){var n=[],r=0;for(let d of i){var s=o.substring(r,d.start);s.length!==0&&n.push(new _s(s,null));var a=o.substring(d.start,d.end),l=this.getMentionedUser_(a);n.push(new _s(a,l)),r=d.end}var c=o.substring(r,o.length);return c.length!==0&&n.push(new _s(c,null)),n}getMentionedUser_(o){var i=o.substring(1);return goog.string.stripQuotes(i,'"')}};goog.require("goog.events");namespace("sync.view");var yu=class extends sync.react.Component{constructor(t){super(t)}render(){let t=this.props.marker,o=t.getType(),i=t.getId(),n=t.isDone()?" done":"",r=this.props.isMainMarker?" main-marker":"",s="comment-outer-wrapper"+n+r,a=this.getAuthorAndChangeType(t),l="",c=t.getAuthorComment();if(c&&c.length!==0){let ht=80;if(this.props.isThreadList&&c.length>ht){var d=this.trimCommentTokens_(t.getCommentTokens(),ht),g=d.map(Yi=>Yi.text).join("");l=sync.react.h("div",{className:"comment-wrapper"},sync.react.h(Fl,{comment:g,commentTokens:d,isDone:t.isDone(),currentUserName:this.props.currentUserName}))}else l=sync.react.h("div",{className:"comment-wrapper"},sync.react.h(Fl,{comment:c,commentTokens:t.getCommentTokens(),isDone:t.isDone(),currentUserName:this.props.currentUserName}))}let m=sync.react.h("span",{className:"preview-date"},this.getMarkerDate(t)),v=null,C=goog.nullFunction,N=C,D=this.props.onMouseEnter||C,H=this.props.onMouseLeave||C;this.props.isThreadList&&(s+=" threadlist",D=goog.bind(D,this,i),H=goog.bind(H,this,i),v=sync.react.h("div",{title:tr(msgs.SHOW_MORE_),className:"threadlistbutton vertical-align-children"},sync.react.h("div",{className:"hc-icon goToThread"})),N=goog.bind(function(){H(),typeof this.props.goToDetailView=="function"&&this.props.goToDetailView()},this));let ne=null;return!this.props.isMainMarker&&!this.props.isThreadList&&(ne={paddingLeft:(t.getLevel()?t.getLevel():1)*10+10}),sync.react.h("div",{style:ne,className:s,onClick:N,onMouseEnter:D,onMouseLeave:H},sync.react.h("div",{className:"vertical-align-children",style:{overflow:"hidden"}},sync.react.h("div",{className:sync.react.genClasses(["marker_preview_tooltip"])},sync.react.h("div",{className:"decoraticon decoraticon-"+o})),a),l,m,v)}trimCommentTokens_(t,o){var i=[],n=0;for(var r of t)if(n+r.text.length>o){if(r.mention)i.push(r),i.push(new _s("...",null));else{var s=n+r.text.length-o,a=sync.util.trimMessage(r.text,s)+"...";i.push(new _s(a,null))}break}else i.push(r),n+=r.text.length;return i}getAuthorAndChangeType(t){let o=t.getAuthor()||tr(msgs.ANONYMOUS_),i,n=this.getTextForChangeType(t.getType(),t.getChangeSubType());return n?i=sync.react.tr(n,{"0":sync.react.h("b",{key:"tr-react"},o)}):i=sync.react.h("span",{className:"preview-author",style:{fontWeight:"bold"}},o),i}getMarkerDate(t){let o="";if(t.getTimestamp()>0){let i=parseInt(t.getTimestamp(),10);i&&(o=sync.view.time.formatFullDate(new Date(i)))}return o}getTextForChangeType(t,o){let i=null;return t==="CHANGE_INSERT"?(i=tr(msgs.INSERTED_BY_AUTHOR_),o==="surround"?i=tr(msgs.SURROUNDED_BY_AUTHOR_):o==="split"&&(i=tr(msgs.SPLIT_BY_AUTHOR_))):t==="CHANGE_DELETE"&&(i=tr(msgs.DELETED_BY_AUTHOR_)),i}},Ul=yu;sync.view.MarkerTooltipItem=yu;goog.require("goog.events");namespace("sync.view");var _u=class extends sync.react.Component{constructor(t){super(t);this.replies_=null}renderActionsContainer_(t,o){return sync.react.h("div",{className:"hc-actionsContainer"},this.props.getEnabledActions(t).map(i=>this.renderActionButton_(t,o,i)))}renderActionButton_(t,o,i){let n=i.getShortName()||i.getDisplayName();return n===tr(msgs.REMOVE_)&&o&&(n=tr(msgs.REMOVE_ALL_)),sync.react.h("div",{className:"hc-action-buttons",onClick:goog.bind(this.doAction_,this,i,t),title:n,key:n},sync.react.h("div",{style:{backgroundImage:"url("+i.getSmallIcon(sync.util.getHdpiFactor()||1)+")"},className:"hc-action-icon"}),sync.react.h("div",null,n))}doAction_(t,o){this.props.onHideRequested(),this.isActionEnabled_(t,o)&&this.props.onActionExecuted(t,o)}isActionEnabled_(t,o){var i=this.props.getEnabledActions(o);return goog.array.contains(i,t)}render(){let t=this.props.discussion,o=t[0],i=t.slice();i.shift();let n=goog.array.map(i,d=>sync.react.h(Ul,{key:i.indexOf(d),marker:d,currentUserName:this.props.currentUserName}),this),r=sync.react.h(Ul,{marker:o,isMainMarker:!0,currentUserName:this.props.currentUserName}),s=n.length>0,a=s?sync.react.h("div",{className:"hc-separator"}):"",l=s?sync.react.h("div",{ref:d=>this.replies_=d,className:"hc-replies-container"},n):"",c=this.renderActionsContainer_(o.getId(),s);return sync.react.h("div",null,r,a,l,c)}componentDidMount(){this.replies_&&(this.replies_.scrollTop=this.replies_.scrollHeight)}},hd=_u;sync.view.MarkerTooltipDiscussionView=_u;goog.require("goog.events");namespace("sync.view");var vu=class extends sync.react.Component{constructor(t){super(t)}render(){let t=this.props.descriptors,o=[];for(var i=0;i<t.length;i++)o.push(this.getValueInput(this.props.descriptors[i],"key"+i));return sync.react.h("div",{className:"ask-sections-container"},o)}getValueInput(t,o){var i=t.type,n=t.defaultValue,r=null;if(i==="radio")r=this.getRadioInput(t);else if(i==="url")r=sync.react.h("div",null,sync.react.h("input",{autofocus:!0,value:n||""}));else if(i==="relative_url")r=sync.react.h("div",{className:"ask-url-chooser-container",onClick:this.chooseUrl},sync.react.h("input",{value:n||"",disabled:!0}),sync.react.h("button",{autofocus:!0,className:"ask-url-chooser"}));else if(i==="editable_combobox")r=this.getEditableComboboxInput(t);else if(i==="combobox")r=this.getComboboxInput(t);else{var s=i==="password"?"password":"text";r=sync.react.h("div",{className:"ask-input"},sync.react.h("input",{autofocus:!0,type:s,value:n||""}))}return sync.react.h("div",{className:"ask-value-section","data-type":i,key:o},sync.react.h("div",{className:"ask-message"}," ",t.message),sync.react.h("div",{className:"ask-input-container"},r))}getComboboxInput(t){var o=t.defaultValue,i=t.values,n=t.renderings,r=[],s;for(s=0;s<i.length;s++){var a=i[s],l=n[s],c=!1;(a===o||l===o)&&(c=!0),r.push(sync.react.h("option",{value:a,selected:c},l))}return sync.react.h("select",{autofocus:!0},r)}getEditableComboboxInput(t){var o=t.defaultValue,i=t.values,n=t.renderings,r,s=[],a;for(a=0;a<i.length;a++){var l=i[a],c=n[a];(l===o||c===o)&&(r=c),s.push({name:l,title:c})}return sync.react.h(dr,{initialValue:r,options:s,scrollEventTarget:this.props.scrollEventTarget,detachedMenu:!0})}getRadioInput(t){var o=t.defaultValue;let i=t.values,n=t.renderings,r=[];var s;for(s=0;s<i.length;s++){var a=i[s],l=n[s];let c=a===o||l===o;r.push(sync.react.h("div",null,sync.react.h("label",null,sync.react.h("input",{autofocus:!0,name:"ask-radio",type:"radio",value:a,checked:c?"true":"false"}),l)))}return sync.react.h("form",{autofocus:!0,action:""},r)}chooseUrl(t){var o=t.target.parentElement.querySelector("input");workspace.getUrlChooser().chooseUrl(new sync.api.UrlChooser.Context(sync.api.UrlChooser.Type.GENERIC),function(i){if(i){var n=decodeURIComponent(sync.util.getURLParameter("url"));o.value=workspace.makeRelative(n,i)}},sync.api.UrlChooser.Purpose.CHOOSE)}},Eu=vu;sync.view.AskDialogContentReact=vu;namespace("sync.util");var ri=function(t){this.scrollEventTarget_=t};ri.prototype.getValues=function(t,o){var i=this.getCleanDialog();return o&&i.setTitle(this.trimMorePunctuation_(o)),sync.react.render(sync.react.createElement(Eu,{descriptors:t,scrollEventTarget:this.scrollEventTarget_}),i.getElement()),this.askUser_(i,goog.bind(this.validateDialogContent_,this,i.getElement())).then(()=>this.getValuesFromDialog_()).thenCatch(()=>[])};ri.prototype.trimMorePunctuation_=function(t){var o="...",i=t;return t&&t.endsWith(o)&&(i=t.substring(0,t.lastIndexOf(o))),i};ri.prototype.getValuesFromDialog_=function(){var t=this.dialog.getElement().querySelectorAll(".ask-value-section"),o=[],i;for(i=0;i<t.length;i++){var n=t[i],r=n.dataset.type;if(r==="radio")o.push(n.querySelector("input:checked").value);else if(r==="combobox"){var s=n.querySelector("select");o.push(s.options[s.selectedIndex].value)}else o.push(n.querySelector("input").value)}return o};ri.prototype.validateDialogContent_=function(t){var o=!0,i="ask-invalid",n=t.querySelectorAll(".ask-value-section"),r;for(r=0;r<n.length;r++){var s=n[r],a=s.dataset.type;if(a==="generic"||a==="password"||a==="url"||a==="editable_combobox"||a==="relative_url"){var l=s.querySelector("input");a==="url"&&l.value&&!sync.util.isUrl(l.value)?(goog.dom.classlist.add(l,i),goog.events.listenOnce(l,goog.events.EventType.INPUT,function(c){goog.dom.classlist.remove(c.target,i)}),o=!1):goog.dom.classlist.contains(l,i)&&goog.dom.classlist.remove(l,i)}}return o};ri.prototype.askUser_=function(t,o){return o=o||function(){return!0},new goog.Promise(function(i,n){t.onSelect(function(a,l){a==="ok"?o()?i():l.preventDefault():n()}),t.show();var r=t.getElement().querySelector(".ask-sections-container").clientHeight;r>500&&(r=500);var s=r*1.5;s<350&&(s=350),t.setContentPreferredSize(s,r)})};ri.prototype.getCleanDialog=function(){if(!ri.dialog_){var t=workspace.createDialog();t.getElement().id="ask-dialog",t.setResizable(!0),t.setPreferredSize(400,300),ri.dialog_=t}this.dialog=ri.dialog_;var o=this.dialog.getElement();return goog.dom.removeChildren(o),sync.react.unmountComponentAtNode(o),this.dialog};ri.dialog_=null;var ud=ri;sync.util.InteractiveValues=ri;goog.require("goog.events.EventTarget");goog.require("goog.Promise");namespace("sync.actions");var to=function(){this.actionsById=new goog.structs.Map,this.idsByShortcuts=new goog.structs.Map,this.shortcutsById=new goog.structs.Map,this.actionsStatusEventSource=new goog.events.EventTarget};goog.inherits(to,sync.api.ActionsManagerCore);to.prototype.invokeAction=function(t){this.getActionById(t).actionPerformed(goog.nullFunction)};to.prototype.registerAction=function(t,o,i){if(this.unregisterAction(t),this.actionsById.set(t,o),i=i||o.getShortcut(),i){var n=new J(i);this.shortcutsById.set(t,n),goog.isFunction(o.isCompatible)&&!o.isCompatible()||this.idsByShortcuts.set(n.getCode(),t)}};to.prototype.setActionShortcut=function(t,o){var i=this.actionsById.get(t);if(i){var n=this.shortcutsById.get(t);if(n&&this.idsByShortcuts.remove(n.getCode()),this.shortcutsById.remove(t),o){var r=new J(o);this.idsByShortcuts.set(r.getCode(),t),this.shortcutsById.set(t,r)}}};to.prototype.unregisterAction=function(t){var o=this.actionsById.get(t);if(o){var i=this.shortcutsById.get(t);this.actionsById.remove(t),o.dispose(),i&&this.idsByShortcuts.remove(i.getCode()),this.shortcutsById.remove(t)}};to.prototype.getActionShortcut=function(t){return this.shortcutsById.get(t)};to.prototype.getActionShortcutForDisplay=function(t){var o,i=this.getActionById(t);return i&&goog.isFunction(i.getShortcutForDisplay)?o=i.getShortcutForDisplay():o=this.getActionShortcut(t),o};to.prototype.getActionByShortcut=function(t){var o;return typeof t=="string"?o=new J(t):t instanceof J?o=t:(t.key||t.keyCode)&&(o=new J,o.fromKeyEvent(t)),this.actionsById.get(this.idsByShortcuts.get(o.getCode()))};to.prototype.getActionById=function(t){return this.actionsById.get(t)};to.EventType={ACTIONS_STATUS_CHANGED:"actions_status_changed"};to.prototype.getEventSource=function(){return this.actionsStatusEventSource};to.prototype.refreshActionsStatus=function(...t){var o={type:to.EventType.ACTIONS_STATUS_CHANGED,ids:t};this.actionsStatusEventSource.dispatchEvent(o)};to.prototype.dispose=function(){this.actionsById.getValues().forEach(goog.dispose),this.actionsStatusEventSource.dispose()};var pr=to;sync.actions.ActionsManagerCore=to;goog.require("goog.events.EventTarget");goog.require("goog.Promise");namespace("sync.actions");var oo=function(){this.actionsManagerCore_=new pr};goog.inherits(oo,sync.api.ActionsManager);oo.prototype.setOperationsInvoker=function(t){this.opsInvoker_=t};oo.prototype.invokeOperation=function(t,o,i,n,r){if(!this.opsInvoker_)return null;var s=this.opsInvoker_.invoke(t,{params:o,selection:n,options:{background:r}});return sync.util.promise.thenNodeStyle(s,i),sync.util.promise.googPromise(s)};oo.prototype.invokeAction=function(t){this.actionsManagerCore_.invokeAction(t)};oo.prototype.registerAction=function(t,o,i){this.actionsManagerCore_.registerAction(t,o,i)};oo.prototype.setActionShortcut=function(t,o){this.actionsManagerCore_.setActionShortcut(t,o)};oo.prototype.unregisterAction=function(t){this.actionsManagerCore_.unregisterAction(t)};oo.prototype.getActionShortcut=function(t){return this.actionsManagerCore_.getActionShortcut(t)};oo.prototype.getActionShortcutForDisplay=function(t){return this.actionsManagerCore_.getActionShortcutForDisplay(t)};oo.prototype.getActionByShortcut=function(t){return this.actionsManagerCore_.getActionByShortcut(t)};oo.prototype.getActionById=function(t){return this.actionsManagerCore_.getActionById(t)};oo.prototype.getEventSource=function(){return this.actionsManagerCore_.getEventSource()};oo.prototype.refreshActionsStatus=function(...t){this.actionsManagerCore_.refreshActionsStatus(...t)};oo.prototype.dispose=function(){this.actionsManagerCore_.dispose()};var en=oo;sync.actions.ActionsManager=oo;goog.require("goog.events.EventTarget");namespace("sync.api");sync.api.SelectionManager=function(){goog.events.EventTarget.call(this)};goog.inherits(sync.api.SelectionManager,goog.events.EventTarget);sync.api.SelectionManager.prototype.getSelection=function(){return null};sync.api.SelectionManager.prototype.setSelection=function(t,o){};sync.api.SelectionManager.prototype.restoreSelectionInBrowser=function(){};sync.api.SelectionManager.prototype.scrollSelectionIntoView=function(t){};sync.api.SelectionManager.prototype.createEmptySelectionInNode=function(t,o){return sync.api.Selection.createEmptySelectionInNode(t,o)};sync.api.SelectionManager.prototype.createAroundNode=function(t){return sync.api.Selection.createAroundNode(t)};sync.api.SelectionManager.prototype.createEmptySelectionBeforeNode=function(t){};sync.api.SelectionManager.prototype.createEmptySelectionAfterNode=function(t){};sync.api.SelectionManager.prototype.createEmptySelectionInTextNode=function(t,o){};sync.api.SelectionManager.prototype.createEmptySelectionRelativeToNode=function(t,o,i){return sync.api.Selection.createEmptySelectionRelativeToNode(t,o,i)};sync.api.SelectionManager.EventType={SELECTION_CHANGED:"selection-changed"};sync.api.SelectionModel={};sync.api.SelectionModel.EventType={SELECTION_CHANGED:"selection-changed"};var Cu=sync.api.SelectionManager;namespace("sync.actions");var md=function(t){_.call(this,{keyStrokeStr:t})};goog.inherits(md,_);md.prototype.isSelected=function(){return!1};var jo=md;sync.actions.ToggleAction=md;goog.require("goog.ui.Toolbar");namespace("sync.view");var Bl=function(){goog.ui.Toolbar.call(this)};goog.inherits(Bl,goog.ui.Toolbar);Bl.prototype.handleMouseDown=function(t){this.isEnabled()&&this.setMouseButtonPressed(!0);var o=this.getKeyEventTarget();o&&goog.dom.isFocusableTabIndex(o)?o.focus({preventScroll:!0}):t.preventDefault()};Bl.prototype.handleKeyEventInternal=function(t){var o=this.getOpenItem();return o&&goog.isFunction(o.handleKeyEvent)?o.handleKeyEvent(t):goog.ui.Toolbar.prototype.handleKeyEventInternal.call(this,t)};var Hl=Bl;sync.view.Toolbar=Bl;goog.require("goog.ui.MenuItem");goog.require("goog.dom.dataset");namespace("sync.view");var ya=function(t,o,i){goog.ui.MenuItem.call(this,t,o),this.keyStroke_=i};goog.inherits(ya,goog.ui.MenuItem);ya.prototype.enterDocument=function(){if(ya.superClass_.enterDocument.call(this),this.keyStroke_){var t=this.keyStroke_.getDisplayString();t.length<=11&&goog.dom.dataset.set(this.getElement(),"key",t)}};ya.prototype.getKeyStroke=function(){return this.keyStroke_};var jl=ya;sync.view.BaseMenuItem=ya;goog.require("goog.dom.classlist");goog.require("goog.events");goog.require("goog.ui.SubMenu");namespace("sync.view");goog.ui.SubMenuRenderer.LEFT_ARROW_="\u25E4";goog.ui.SubMenuRenderer.RIGHT_ARROW_="\u25E2";var st=function(t,o,i,n,r){var s=t.renderSmallIcon(),a=t.getDisplayName();jl.call(this,st.buildButtonContent(s,a),null,i),!s&&t instanceof jo&&this.setSupportedState(goog.ui.Component.State.SELECTED,!0),this.action=t,this.actionId=o,this.context=n,this.actionsExecutor_=r};goog.inherits(st,jl);st.EventType={AFTER_ACTION:"aftAct"};st.buildButtonContent=function(t,o){var i=document.createElement("span");return i.className="goog-menuitem-content-wrapper",t&&(goog.dom.classlist.add(t,"goog-menuitem-icon"),goog.dom.appendChild(i,t)),o&&goog.dom.appendChild(i,document.createTextNode(o)),i};st.prototype.handleMouseUp=function(t){this.setActive(!0),st.superClass_.handleMouseUp.call(this,t)};st.prototype.getActionId=function(){return this.actionId};st.prototype.handleContextMenu=function(t){t.stopPropagation(),t.preventDefault()};st.prototype.handleKeyEventInternal=function(t){t.keyCode===goog.events.KeyCodes.ENTER&&(this.performActionInternal(t),t.preventDefault(),t.stopPropagation())};st.prototype.performActionInternal=function(t){var o=st.superClass_.performActionInternal.call(this,t);if(o){var i=De.createActionWithExtraCallbacks(this.action,[goog.bind(this.dispatchEvent,this,st.EventType.AFTER_ACTION)]);this.context&&(i=De.createActionWithBoundContext(i,this.context));var n=this.actionsExecutor_||new Pn;n.executeAction(i)}return o};st.prototype.isEnabled=function(){var t;try{this.context?t=this.action.isEnabledFor(this.context):t=this.action.isEnabled()}catch(o){t=!1,console.error(o)}return st.superClass_.setEnabled.call(this,t),t};st.prototype.isSelected=function(){return this.action instanceof jo&&this.action.isSelected()};st.prototype.setChecked=function(t){st.superClass_.setChecked.call(this,t),this.setSelected(t)};st.prototype.enterDocument=function(){st.superClass_.enterDocument.call(this);var t=this.action.getDescription()||"",o=this.getKeyStroke();if(o){var i=o.getDisplayString();t+=" ("+i+")"}this.getElement().setAttribute("title",t),this.getElement().setAttribute("name",this.actionId)};sync.view.SubMenuItem=function(t,o,i,n){var r=document.createDocumentFragment(),s=sync.util.getHdpiFactor(),a=sync.util.renderSmallIcon(sync.util.image.getImageUrl(t,s),s);a&&(goog.dom.classlist.add(a,"goog-menuitem-icon"),goog.dom.appendChild(r,a)),goog.dom.appendChild(r,document.createTextNode(o)),goog.ui.SubMenu.call(this,r),n&&this.setParent(n),this.children=i,this.menu=null,this.setPositionAdjustable(!0)};goog.inherits(sync.view.SubMenuItem,goog.ui.SubMenu);sync.view.SubMenuItem.prototype.populateSubMenu_=function(){this.clearSubMenu_();for(var t=null,o=0;o<this.children.length;o++){var i=this.children[o];i.isEnabled()?(this.menu.addChild(i,!0),t=i):i instanceof goog.ui.MenuSeparator&&(t instanceof goog.ui.MenuSeparator||t==null||(this.menu.addChild(i,!0),t=i))}if(t instanceof goog.ui.MenuSeparator&&this.menu.removeChild(t,!0),this.menu.getChildCount()===0){var n=new goog.ui.MenuItem("No actions available");n.setEnabled(!1),this.menu.addChild(n,!0)}};sync.view.SubMenuItem.prototype.clearSubMenu_=function(){this.menu&&(this.menu.removeChildren(!0),this.menu.dispose()),this.menu=new goog.ui.Menu,this.setMenu(this.menu)};sync.view.SubMenuItem.prototype.showSubMenu=function(){var t=this.getParent();t&&t.getHighlighted()===this&&this.populateSubMenu_(),sync.view.SubMenuItem.superClass_.showSubMenu.call(this)};sync.view.SubMenuItem.prototype.isEnabled=function(){var t=goog.array.find(this.children,function(o){return o.isEnabled()});return!!t};var mt=st;sync.view.MenuItem=st;goog.require("goog.ui.ToolbarSelect");namespace("sync.view");var Ii=function(t,o,i){goog.ui.ToolbarSelect.call(this,t),this.name=o,this.shouldCaptionBeUpdated=i};goog.inherits(Ii,goog.ui.ToolbarSelect);Ii.prototype.setOpen=function(t,o){if(Ii.superClass_.setOpen.call(this,t,o),this.getMenu().setHighlightedIndex(-1),t)for(var i=this.getMenu().getChildCount(),n=0;n<i;n++)this.getMenu().getChildAt(n).isSelected()&&this.setSelectedIndex(n)};Ii.prototype.addItem=function(t){Ii.superClass_.addItem.apply(this,arguments),t.listen(mt.EventType.AFTER_ACTION,this.updateCaptionTooltip_.bind(this)),t.isSelected()&&(this.getSelectionModel().setSelectedItem(t),this.updateCaptionTooltip_())};Ii.prototype.updateCaptionTooltip_=function(){var t=this.getSelectedItem();if(t){var o=t.action,i=this.name+": "+o.getDisplayName();this.setCaptionTooltip_(i)}};Ii.prototype.setCaptionTooltip_=function(t){this.getElement()||(this.createDom(),goog.dom.isElement(this.getContent())&&this.getContent().removeAttribute("title")),this.getElement().setAttribute("title",t)};Ii.prototype.updateCaption=function(){this.shouldCaptionBeUpdated&&Ii.superClass_.updateCaption.call(this)};var Su=Ii;sync.view.ToolbarSelect=Ii;goog.require("goog.ui.ToolbarMenuButton");namespace("sync.view");var _a=function(t){goog.ui.ToolbarMenuButton.call(this,t),this.menuClass_=null};goog.inherits(_a,goog.ui.ToolbarMenuButton);_a.prototype.setOpen=function(t,o){_a.superClass_.setOpen.call(this,t,o),t&&(this.menuClass_&&goog.dom.classlist.add(this.getMenu().getElement(),this.menuClass_),this.getMenu().forEachChild(function(i){i.setEnabled(i.isEnabled())},this))};_a.prototype.setMenuClass=function(t){this.menuClass_=t};var fd=_a;sync.view.ToolbarMenuButton=_a;goog.require("goog.ui.SubMenu");namespace("sync.view");var gr=function(t,o,i){this.name=i;var n=document.createDocumentFragment();if(t){var r=sync.util.getHdpiFactor(),s=sync.util.renderSmallIcon(icon);goog.dom.classlist.add(s,"goog-menuitem-icon"),goog.dom.appendChild(n,s)}goog.dom.appendChild(n,document.createTextNode(o)),goog.ui.SubMenu.call(this,n),this.setPositionAdjustable(!0)};goog.inherits(gr,goog.ui.SubMenu);gr.prototype.addChildren=function(t){goog.array.forEach(t,function(o){this.addItem(o)},this)};gr.prototype.createDom=function(){gr.superClass_.createDom.call(this);var t=this.getElement();t.setAttribute("name",this.name)};gr.prototype.isEnabled=function(){for(var t=!1,o=0;o<this.getItemCount();o++)if(this.getItemAt(o).isEnabled()){t=!0;break}return gr.superClass_.setEnabled.call(this,t),t};var Tu=gr;sync.view.ToolbarSubMenu=gr;goog.require("goog.ui.ToolbarButton");namespace("sync.view");var kn=function(t,o,i,n){this.actionsExecutor_=t,this.action=o,this.actionId=i;var r=kn.createContent(o);goog.ui.ToolbarButton.call(this,r);var s=o.getDescription();n&&(s+=" ("+n.getDisplayString()+")"),this.setTooltip(s)};goog.inherits(kn,goog.ui.ToolbarButton);kn.createContent=function(t){var o=t.renderLargeIcon();return o||(o=t.renderSmallIcon()),o||(o=t.getDisplayName()),o};kn.prototype.performActionInternal=function(t){return kn.superClass_.performActionInternal.call(this,t),this.actionsExecutor_.executeAction(this.action),!0};kn.prototype.createDom=function(){kn.superClass_.createDom.call(this);var t=this.getElement();t.setAttribute("name",this.actionId)};var vs=kn;sync.view.ToolbarButton=kn;goog.require("goog.ui.ToolbarToggleButton");namespace("sync.view");var hr=function(t,o,i){this.actionsExecutor_=t,this.action_=o,this.actionId_=i;var n=vs.createContent(o);goog.ui.ToolbarToggleButton.call(this,n),this.setTooltip(o.getDescription()),this.updateChecked_()};goog.inherits(hr,goog.ui.ToolbarToggleButton);hr.prototype.performActionInternal=function(t){return hr.superClass_.performActionInternal.call(this,t),this.actionsExecutor_.executeAction(De.createActionWithExtraCallbacks(this.action_,[goog.bind(this.updateChecked_,this)])),!0};hr.prototype.updateChecked_=function(){var t=this.action_.isSelected();this.setChecked(t),this.setEnabled(this.action_.isEnabled()),this.setTooltip(this.action_.getDescription())};hr.prototype.createDom=function(){hr.superClass_.createDom.call(this);var t=this.getElement();t.setAttribute("name",this.actionId_)};var bu=hr;sync.view.ToolbarToggleButton=hr;goog.require("goog.ui.MenuSeparatorRenderer");goog.require("goog.dom");goog.require("goog.dom.classlist");goog.require("goog.ui.ControlRenderer");namespace("sync.view");var tn=function(){goog.ui.MenuSeparatorRenderer.call(this)};goog.inherits(tn,goog.ui.MenuSeparatorRenderer);goog.addSingletonGetter(tn);tn.CSS_CLASS=goog.getCssName("toolbar-left-separator");tn.prototype.createDom=function(t){return t.getDomHelper().createDom("div",this.getCssClass()+" "+goog.ui.INLINE_BLOCK_CLASSNAME,"\xA0")};tn.prototype.decorate=function(t,o){return o=tn.superClass_.decorate.call(this,t,o),goog.dom.classlist.add(o,goog.ui.INLINE_BLOCK_CLASSNAME),o};tn.prototype.getCssClass=function(){return tn.CSS_CLASS};var Au=tn;sync.view.ToolbarLeftSeparatorRenderer=tn;goog.require("goog.Promise");namespace("sync.actions");var si=function(t,o,i,n,r){_.call(this,{keyStrokeStr:t.shortcut,displayName:t.name,description:t.tooltip,smallIconPath:t.icon16,largeIconPath:t.icon20}),this.id=t.id,this.compatible=t.compatible,this.roEnabled=t.roEnabled,this.roStatus=i,this.scrollEventTarget_=n,this.controller=o,this.selectionManager_=r,this.context={unexpandedAskVariables:[]};var s=new _({execute:goog.bind(this.executeFollowUp,this)});this.followUp={action:s}};goog.inherits(si,_);si.prototype.isEnabled=function(){return this.roStatus.isReadOnly()||this.selectionManager_.evalSelectionFunction(sync.util.isInReadOnlyContent)?this.roEnabled:!0};si.prototype.isCompatible=function(){return this.compatible};si.prototype.actionPerformed=function(t){this.performActionWithValuesInternal_([]).thenAlways(t||goog.nullFunction)};si.prototype.actionPerformedWithValues=function(t,o){this.performActionWithValuesInternal_(o).thenAlways(t||goog.nullFunction)};si.prototype.performActionWithValuesInternal_=function(t){return this.invokeServerAction_(t).then(goog.bind(function(o){o&&this.controller.applyUpdate_(o)},this)).thenCatch(sync.util.error.reloadPage)};si.prototype.invokeServerAction_=function(t){var o={expandedAskVariables:t||[],docId:this.controller.docId,actionId:sync.util.dotEncodeURIComponent(this.id)},i=this.selectionManager_.getSelection();return i&&i.extend(o),sync.rest.callAsync("RESTActionsManager.invokeAction",o).then(goog.bind(this.handleServerResponse_,this))};si.prototype.handleServerResponse_=function(t){return this.context.unexpandedAskVariables=t.unexpandedAskVariables,this.context.unexpandedAskVariables.length===0?t.docUpdate:null};si.prototype.executeFollowUp=function(){var t=this.context.unexpandedAskVariables,o;if(t.length===0)o=goog.Promise.resolve();else{var i=this.getDisplayName();o=new ud(this.scrollEventTarget_).getValues(t,i).then(n=>n.length?this.performActionWithValuesInternal_(n):goog.Promise.resolve())}return sync.util.promise.nativePromise(o)};si.prototype.getFollowUp=function(){return this.followUp};var ur=si;sync.actions.ServerAction=si;var yd=[],Es=[],Vt=class{static logToolbarConfig(o,i){yd.length===0&&console.info("ActionsConfig build-up: ",yd),yd.push({checkpoint:"ActionsConfig after "+o,config:JSON.parse(JSON.stringify(i))})}static logActionNotLoadedBecauseNotCompatible(o){Es.length===0&&console.warn("Some actions were not loaded: ",Es),Es.push("Action '"+o+"' not added on the toolbar because isn't compatible. See "+sync.util.help.getCustomizationDocumentationUrl(sync.util.help.customizationId.MIGRATE_FRAMEWORKS))}static logActionNotLoadedBecauseNotRegistered(o){Es.length===0&&console.warn("Some actions were not loaded: ",Es);let i=sync.api.Version.substring(1)+".0";Es.push("Action '"+o+"' not added on the toolbar because isn't registered to sync.api.ActionsManager. See https://www.oxygenxml.com/maven/com/oxygenxml/oxygen-webapp/"+i+"/jsdoc/sync.api.ActionsManager.html#registerAction__anchor")}static reset(){yd=[],Es=[]}};goog.require("goog.ui.Toolbar");goog.require("goog.ui.MenuSeparator");goog.require("goog.ui.ToolbarSeparator");goog.require("goog.array");goog.require("goog.structs.Map");namespace("sync.view");var Ue=function(t,o,i){goog.Disposable.call(this),this.actionsManager=t,this.actionsExecutor_=o||new Pn,this.controlsById_=new goog.structs.Map,this.handler_=new goog.events.EventHandler(this);var n=t.getEventSource();n&&this.handler_.listen(n,pr.EventType.ACTIONS_STATUS_CHANGED,this.refreshChangedActions_),i&&this.handler_.listen(i.getThrottledEventTarget(),sync.api.SelectionManager.EventType.SELECTION_CHANGED,this.refreshActionsStatus),this.dropdowns_=[],this.config=null,this.toolbarComponents_=[],this.displayShortcuts_=!0};goog.inherits(Ue,goog.Disposable);Ue.prototype.refreshChangedActions_=function(t){this.refreshActionsStatus(t.ids)};Ue.prototype.refreshActionsStatus=function(t){(!t||!t.length)&&(t=this.controlsById_.getKeys());var o={};for(var i of t){var n=this.controlsById_.get(i);if(n){var r=this.actionsManager.getActionById(i);if(r){var s=r.isEnabled();if(o[i]=s,n.setEnabled(s),r instanceof jo){var a=r.isSelected();n.setChecked(a)}}else{var l=n.getParent();l instanceof Hl&&this.removeOrphanSeparator_(l,n),n.dispose()}}}goog.array.forEach(this.dropdowns_,function(c){var d=this.isDropdownEnabled_(c,o);c.setEnabled(d)},this)};Ue.prototype.removeOrphanSeparator_=function(t,o){var i=t.indexOfChild(o),n=-1,r=-1;return i===0?n=i+1:i===t.getChildCount()-1&&(n=i-1),n>0&&t.getChildAt(n)instanceof goog.ui.Separator&&(r=n,t.removeChildAt(r,!0)),r};Ue.prototype.setDisplayShortcuts=function(t){this.displayShortcuts_=t};Ue.prototype.isDropdownEnabled_=function(t,o){var i=!1,n=this.getMenuItems_(t);for(var r of n)if(r instanceof mt&&this.isMenuItemEnabled_(r,o)||r instanceof goog.ui.SubMenu&&this.isDropdownEnabled_(r,o)){i=!0;break}return i};Ue.prototype.getMenuItems_=function(t){for(var o=[],i=0;i<t.getItemCount();i++)o.push(t.getItemAt(i));return o};Ue.prototype.isMenuItemEnabled_=function(t,o){var i=t.getActionId(),n;if(typeof o[i]!="undefined")n=o[i];else{var r=this.actionsManager.getActionById(i);if(r){var s=r.isEnabled();o[i]=s,n=s}}return n};Ue.prototype.render=function(t,o){var i=!1;for(var n of t){var r=this.getToolbarComponent_(n);if(r){this.registerDisposable(r),this.toolbarComponents_.push(r);var s=new Au,a=new goog.ui.ToolbarSeparator(s);a.render(o),this.registerDisposable(a),r.render(o);var l=r.getElement();l.setAttribute("name",n.name),l.setAttribute("display-name",n.displayName||n.name),n.small&&l.classList.add("goog-toolbar--small"),n.toBottom&&l.classList.add("goog-toolbar--bottom"),i=!0}}return this.refreshActionsStatus(),i};Ue.prototype.getToolbarComponent_=function(t){var o=new Hl;for(var i of t.children)i.type==="action"?this.addAction_(i.id,o):i.type==="sep"?this.addSeparator_(o):i.type==="list"&&this.dropdowns_.push(this.addDropdown_(i,o));var n=o.getChildCount();return o.getChildAt(n-1)instanceof goog.ui.Separator&&o.removeChildAt(n-1,!0),o.getChildCount()>0?o:null};Ue.prototype.addAction_=function(t,o){var i=this.actionsManager.getActionById(t);if(i)if(this.isCompatible_(i)){var n=null;if(i instanceof jo)n=new bu(this.actionsExecutor_,i,t);else{var r=this.getShortcutForDisplay_(t);n=new vs(this.actionsExecutor_,i,t,r)}o.addChild(n,!0),this.controlsById_.set(t,n)}else Vt.logActionNotLoadedBecauseNotCompatible(t);else Vt.logActionNotLoadedBecauseNotRegistered(t)};Ue.prototype.renderDropdownIcon_=function(t){var o=t.iconDom,i=t.displayName||t.name;if(!o){var n=t.icon20;if(n){var r=sync.util.image.getImageUrl(n,sync.util.getHdpiFactor());o=sync.util.renderLargeIcon(r)}else o=i}return goog.dom.isElement(o)&&!o.title&&(o.title=i),o};Ue.prototype.addDropdown_=function(t,o){var i=this.instantiateProperToolbarComponent_(t),n=this.generateMenuItems_(t);return n.length>0&&(goog.array.forEach(n,i.addItem,i),o.addChild(i,!0),i.getElement().setAttribute("name",t.name),i.getElement().setAttribute("aria-label",t.displayName||t.name)),i};Ue.prototype.generateMenuItems_=function(t){var o=[];for(var i of t.children){var n=this.generateMenuItem_(i);i.type==="sep"&&(o.length===0||o[o.length-1]instanceof goog.ui.MenuSeparator)&&(n=null),n!==null&&o.push(n)}return o[o.length-1]instanceof goog.ui.MenuSeparator&&o.pop(),o};Ue.prototype.isCompatible_=function(t){return t&&(!goog.isFunction(t.isCompatible)||t.isCompatible())};Ue.prototype.generateMenuItem_=function(t){var o=null;if(t.type==="action"){var i=this.actionsManager.getActionById(t.id);if(i)if(this.isCompatible_(i)){var n=this.getShortcutForDisplay_(t.id);o=new mt(i,t.id,n,null,this.actionsExecutor_),this.controlsById_.set(t.id,o)}else Vt.logActionNotLoadedBecauseNotCompatible(t.id);else Vt.logActionNotLoadedBecauseNotRegistered(t.id)}else if(t.type==="sep")o=new goog.ui.MenuSeparator;else if(t.type==="list"){var r=this.generateMenuItems_(t);r.length>0&&(o=new Tu(t.icon16,t.displayName,t.name),o.addChildren(r))}else console.warn("Unknown type '"+t.type+"'");return o};Ue.prototype.getShortcutForDisplay_=function(t){var o=null;return this.displayShortcuts_&&(o=this.actionsManager.getActionShortcutForDisplay(t)),o};Ue.prototype.instantiateProperToolbarComponent_=function(t){var o,i=this.renderDropdownIcon_(t);return this.isSelectList_(t.children)?o=new Su(i,t.displayName||t.name):o=new fd(i),o};Ue.prototype.isSelectList_=function(t){var o=!1,i=null;for(var n of t)if(n&&n.type==="action"&&this.actionsManager.getActionById(n.id)){i=n;break}return i&&this.actionsManager.getActionById(i.id)instanceof jo&&(o=!0),o};Ue.prototype.addSeparator_=function(t){if(!(t.getChildCount()===0||t.getChildAt(t.getChildCount()-1)instanceof goog.ui.Separator)){var o=new goog.ui.ToolbarSeparator;t.addChild(o,!0)}};Ue.prototype.disposeInternal=function(){Ue.superClass_.disposeInternal.call(this),this.handler_.dispose(),this.toolbarComponents_.forEach(function(t){t.dispose()})};var Be=Ue;sync.view.ExtensionToolbar=Ue;goog.require("goog.events");goog.require("goog.events.EventTarget");namespace("sync.model");var Vo=function(t){goog.events.EventTarget.call(this);var o=[];t?o=t.split(","):sync.util.isMobile()?o=["review","edit"]:o=["edit"],this.availableModes_=o,this.editMode_=o[0]==="edit"};goog.inherits(Vo,goog.events.EventTarget);Vo.EventTypes={EDIT_MODE_CHANGED:"edit_mode_changed"};Vo.ModeChanged=function(t){this.editMode=t,this.type=Vo.EventTypes.EDIT_MODE_CHANGED};Vo.prototype.isReviewModeAvailable=function(){return this.availableModes_.length>1};Vo.prototype.setEditMode=function(){this.setMode_(!0)};Vo.prototype.setMode_=function(t){this.editMode_!==t&&(this.editMode_=t,this.dispatchEditModeChanged_())};Vo.prototype.dispatchEditModeChanged_=function(){this.dispatchEvent(new Vo.ModeChanged(this.editMode_))};Vo.prototype.toggleEditMode=function(){this.editMode_=!this.editMode_,this.dispatchEditModeChanged_()};Vo.prototype.isEditMode=function(){return this.editMode_};var ft=Vo;sync.model.EditModeModel=Vo;namespace("sync.api");sync.api.ChangeTrackingManager=function(){goog.events.EventTarget.call(this)};goog.inherits(sync.api.ChangeTrackingManager,goog.events.EventTarget);sync.api.ChangeTrackingManager.prototype.isTrackingChanges=function(){};sync.api.ChangeTrackingManager.EventType={CHANGE_TRACKING_TOGGLED:"change-tracking-toggled"};goog.require("goog.style");namespace("sync.ctrl");var Ln=function(t,o){sync.api.ChangeTrackingManager.call(this),this.isTrackingChanges_=t,this.options_=o,this.updateChangeTrackingColorMode_(),this.listenForOptionChanges_()};goog.inherits(Ln,sync.api.ChangeTrackingManager);Ln.prototype.dispose=function(){goog.events.unlistenByKey(this.changeTrackingColorsKey_),goog.events.unlistenByKey(this.changeTrackingColorsInsKey_),goog.events.unlistenByKey(this.changeTrackingColorsDelKey_)};Ln.prototype.isTrackingChanges=function(){return this.isTrackingChanges_};Ln.prototype.setTrackingChangesState=function(t){var o=this.isTrackingChanges_;this.isTrackingChanges_=t,o!==t&&this.dispatchEvent(new goog.events.Event(sync.api.ChangeTrackingManager.EventType.CHANGE_TRACKING_TOGGLED))};Ln.prototype.listenForOptionChanges_=function(){this.changeTrackingColorsKey_=this.options_.listenOption(S.CHANGE_TRACKING_COLORS,t=>this.updateChangeTrackingColorMode_()),this.changeTrackingColorsInsKey_=this.options_.listenOption(S.CHANGE_TRACKING_COLORS_INS,t=>this.updateChangeTrackingColorMode_()),this.changeTrackingColorsDelKey_=this.options_.listenOption(S.CHANGE_TRACKING_COLORS_DEL,t=>this.updateChangeTrackingColorMode_())};Ln.prototype.updateChangeTrackingColorMode_=function(){var t=this.options_.getOption(S.CHANGE_TRACKING_COLORS,"color.per.author");let o=document.head.querySelector("#change-tracking-colors");if(o&&goog.dom.removeNode(o),t==="color.per.changeType"){let i=this.options_.getOption(S.CHANGE_TRACKING_COLORS_INS,"rgb(31, 161, 93)"),n=this.options_.getOption(S.CHANGE_TRACKING_COLORS_DEL,"rgb(220, 23, 23)");document.head.appendChild(goog.dom.createDom("style",{id:"change-tracking-colors"},goog.dom.createTextNode(this.getChangeTrackingStyleOverride_(i,n))))}};Ln.prototype.getChangeTrackingStyleOverride_=function(t,o){var i=`.oxy-marker[data-type="CHANGE_INSERT"]  .oxy-imgwrapper:before {
      background: linear-gradient(0deg, ${t} 2px, transparent 0px) repeat-x 0 100%;
    }
    .oxy-sentinel-marker[data-subtype="split"].oxy-end-sentinel-marker,
    .oxy-marker[data-type="CHANGE_INSERT"]:not(.oxy-selected) {
      color: ${t};
    }
    .oxy-marker[data-type="CHANGE_DELETE"]  .oxy-imgwrapper:before {
      background: linear-gradient(0deg, ${o} 2px, transparent 0px) repeat-x 100% 0;
    }
    .oxy-marker[data-type="CHANGE_DELETE"]:not(.oxy-selected) {
      color: ${o};
    }`,n=`.review-panel-item.review-panel-item.change_insert .review-panel-content {
      color: ${t};
    }
    .review-panel-item.review-panel-item.change_delete .review-panel-content {
      color: ${o};
    }`;return i+n};var Iu=Ln;sync.ctrl.ChangeTrackingManager=Ln;namespace("sync.ctrl");var Wo=function(t,o){this.oldElement_=t,this.newElementNonEnhanced_=o,this.morphMap_=new Map,this.recycledNodes_=new Set};Wo.prototype.getOldElement=function(){return this.oldElement_};Wo.prototype.getNewElement=function(){return this.newElementNonEnhanced_};Wo.prototype.findCorrespondingStaticContent=function(t){var o=sync.model.XmlDom.getContainingXmlNode(t),i=this.findCorrespondingXmlNode_(o);if(i){var n=this.getPseudoElementRole_(t);return goog.array.find(i.children,r=>this.getPseudoElementRole_(r)===n)}else return null};Wo.prototype.getPseudoElementRole_=function(t){return goog.dom.dataset.get(t,"role")};Wo.prototype.findCorrespondingXmlNode_=function(t){var o=h.getIdOfXmlNode(t);return o===h.getIdOfXmlNode(this.newElementNonEnhanced_)?this.newElementNonEnhanced_:h.getXmlNodeByIdWithinElement(o,this.newElementNonEnhanced_)};Wo.prototype.areCompatible=function(t,o){var i=this.getAncestorsUntil_(t,this.oldElement_),n=this.getAncestorsUntil_(o,this.newElementNonEnhanced_);return this.areAncestorsCompatible_(i,n)};Wo.prototype.areAncestorsCompatible_=function(t,o){if(t.length!==o.length)return!1;for(var i=0;i<t.length;i++)if(t[i].nodeName!==o[i].nodeName)return!1;return!0};Wo.prototype.getAncestorsUntil_=function(t,o){for(var i=[];t!==o;)i.push(t),t=t.parentElement;return i.push(o),i};Wo.prototype.reportRecycledPair=function(t,o){for(var i=this.getAncestorsUntil_(t,this.oldElement_),n=this.getAncestorsUntil_(o,this.newElementNonEnhanced_),r=0;r<i.length;r++)this.morphMap_.set(i[r],n[r]);this.recycledNodes_.add(t)};Wo.prototype.isRecycled=function(t){return this.recycledNodes_.has(t)};Wo.prototype.getMorphPair=function(t){return this.morphMap_.get(t)};var wu=Wo;sync.ctrl.Recycler=Wo;namespace("sync.ctrl");var Pg=function(t,o){this.selection=o,this.peerId=t.peerId,this.username=t.username,this.color=t.color,this.cemSelectionHash=t.cemSelectionHash,this.isConnected=t.isConnected};Pg.prototype.updateSelection=function(t){var o=this.selection;return this.selection=t.updateSelection(this.selection),o!==this.selection};var Du=Pg;sync.ctrl.PeerSelection=Pg;namespace("sync.position");var on=function(t,o,i){this.nodeId=t,this.sentinelType=o,this.distance=i};on.prototype.toHTMLPosition=function(){var t=p.fromRelativeContentPosition(this);return t.toHTMLPosition()};on.prototype.toJson=function(){return{nodeId:+this.nodeId,sentinelType:this.sentinelType,distance:this.distance}};on.prototype.toString=function(){var t=`{
`;return t+="elementId: "+this.nodeId+`,
`,t+="sentinelType: "+this.sentinelType+`,
`,t+="distance: "+this.distance+`,
`,t+="}",t};on.prototype.extend=function(t){goog.object.extend(t,{distance:this.distance,sentinelType:this.sentinelType,referenceNodeId:this.nodeId})};on.prototype.equals=function(t){return this.distance==t.distance&&this.sentinelType==t.sentinelType&&this.nodeId==t.nodeId};on.prototype.clone=function(){return new on(this.nodeId,this.sentinelType,this.distance)};on.prototype.movedBy=function(t){var o=this.clone();return o.distance+=t,o};var _o=on;sync.position.RelativeContentPosition=on;namespace("sync.select");var mr=function(){};mr.prototype.getTableSelection=function(t){var o=null;if(t){if(t instanceof z)o=t;else if(!t.isEmpty()){var i=this.getStartAndEndCells_(t);if(i){var n=t.isBackwards(),r=n?i.endCellId:i.startCellId,s=n?i.startCellId:i.endCellId;o=new z(r,s,t.getFullySelectedNodeId())}}}return o};mr.prototype.getStartAndEndCells_=function(t){var o=null,i=this.getSelectionParentHtmlNode_(t),n=sync.util.TableUtil.getSurroundingTableElement(i);if(n){var r=this.getStartCellId_(t);if(r){var s=this.getEndCellId_(t);s&&this.areCellsFromTheSameTable_(r,s,n)&&(o={startCellId:r,endCellId:s})}}return o};mr.prototype.getSelectionParentHtmlNode_=function(t){var o=null,i=t.getFullySelectedNodeId();if(i)o=h.getInstance().getXmlNodeById(i);else{var n=p.getNodeIdAt(t.start),r=h.getInstance().getXmlNodeById(n),s=p.getNodeIdAt(t.end),a=h.getInstance().getXmlNodeById(s);o=goog.dom.findCommonAncestor(r,a)}return o};mr.prototype.getStartCellId_=function(t){for(var o=null,i=t.start.toRelativeContentPosition(),n=t.end.toRelativeContentPosition();p.compareCanonicalRelativePositions(i,n)<0;){var r=new p.fromRelativeContentPosition(i),s=r.getContentInformation();if(!s)break;if(s.isOnText()){var c=p.getTextNodeAtPositionIfExists(i);if(!c)break;i=new T(c,c.childNodes.length).toRelativeContentPosition()}else{var a=s.elementId,l=h.getInstance().getXmlNodeById(a);if(sync.util.TableUtil.isTableCellElement(l)){o=a;break}r.next(),i=r.toRelativeContentPosition()}}return o};mr.prototype.getEndCellId_=function(t){for(var o=null,i=t.start.toRelativeContentPosition(),n=t.end.toRelativeContentPosition();p.compareCanonicalRelativePositions(i,n)<0;){var r=new p.fromRelativeContentPosition(n);r.prev(),n=r.toRelativeContentPosition();var s=r.getContentInformation();if(!s)break;if(s.isOnText()){var c=p.getTextNodeAtPositionIfExists(n);if(!c)break;var d=new T(c,0).toRelativeContentPosition();r=new p.fromRelativeContentPosition(d),n=r.toRelativeContentPosition()}else{var a=s.tagElementId,l=h.getInstance().getXmlNodeById(a);if(sync.util.TableUtil.isTableCellElement(l)){o=a;break}}}return o};mr.prototype.areCellsFromTheSameTable_=function(t,o,i){var n=h.getInstance().getXmlNodeById(t),r=h.getInstance().getXmlNodeById(o);return sync.util.TableUtil.isCellFromTable(n,i)&&sync.util.TableUtil.isCellFromTable(r,i)};var _d=mr;sync.select.TableSelectionConverter=mr;var qv=function(t){var o,i=t,n=new _o(i.startReferenceNodeId+"",i.startSentinelType,i.startDistance);if(i.collapsed)o=new sync.select.SavedSelection(n);else{var r=new sync.position.RelativeContentPosition(i.endReferenceNodeId+"",i.endSentinelType,i.endDistance),s=t.isBackwards?n:r,a=t.isBackwards?r:n;o=new sync.select.SavedSelection(n,r,a,s);try{var l=new _d().getTableSelection(o.restore());l&&(o=l.save())}catch(c){console.warn("Error while trying to convert selection to table selection.",c)}}return o},va=qv;namespace("sync.ctrl");var Vl=function(t){this.peerSelection_=t};Vl.prototype.getPeerSelection=function(){return this.peerSelection_};Vl.fromDocumentUpdatePeerSelection=function(t){var o=va(t.selection),i=new Du(t,o);return new Vl(i)};var Ea=Vl;sync.ctrl.PeerSelectionUpdate=Vl;namespace("sync.ctrl");var Wl=function(t){goog.object.extend(this,t),this.type=t.type;var o=t.pos;this.pos=o&&new _o(String(o.nodeId),o.sentinelType,o.distance)};Wl.prototype.equals=function(t){return this.type!==t.type?!1:this.type==="delete"?this.length===t.length&&this.pos.equals(t.pos):this.type==="insert"?this.text===t.text&&this.pos.equals(t.pos):this.type==="un-delete"?this.equalsUnDelete_(t):!1};Wl.prototype.equalsUnDelete_=function(t){return this.html===t.html&&this.pos.equals(t.pos)&&this.length===t.length};Wl.prototype.getAffectedNodeId=function(){if(this.pos){var t=p.fromRelativeContentPosition(this.pos),o=t.getContentInformation();return o?String(o.elementId):null}else if(this.type!=="add_marker"&&this.type!=="remove_marker")return console.error("Patch type unexpected: ",this),null};var vd=Wl;sync.ctrl.Patch=Wl;namespace("sync.ctrl");sync.ctrl.ComposedConcurrentDocumentUpdate=function(t){t&&(goog.object.extend(this,t),this.update=Z.of(t.update),this.concurrentUpdate&&this.concurrentUpdate.authorDocUpdate&&(this.concurrentUpdate.authorDocUpdate=Z.of(this.concurrentUpdate.authorDocUpdate)))};sync.ctrl.ComposedConcurrentDocumentUpdate.of=function(t){return t instanceof sync.ctrl.ComposedConcurrentDocumentUpdate?t:new sync.ctrl.ComposedConcurrentDocumentUpdate(t)};sync.ctrl.ComposedConcurrentDocumentUpdate.prototype.update={};sync.ctrl.ComposedConcurrentDocumentUpdate.prototype.concurrentUpdate=null;var Z=function(t){t&&goog.object.extend(this,t)};Z.of=function(t){return t instanceof Z?t:new Z(t)};Z.prototype.isEditorModified=null;Z.prototype.isSerializedContentModified=null;Z.prototype.nodesIds=[];Z.prototype.fragments=[];Z.prototype.patches=[];Z.prototype.markerUpdates=[];Z.prototype.mutation={};Z.prototype.highlightsUpdates=[];Z.prototype.selection=null;Z.prototype.peersSelection=[];Z.prototype.messages=[];Z.prototype.undoState=null;Z.prototype.cssActions=[];Z.prototype.getUpdateSelection=function(){var t=null;try{this.selection&&(t=this.convertSelection_(this.selection))}catch(o){console.warn("error while converting server selection",o)}return t};Z.prototype.convertSelection_=function(t){return va(t)};Z.prototype.clearPeerSelections=function(){this.peersSelection=null};Z.prototype.getPeersSelections=function(){return this.peersSelection?this.peersSelection.map(Ea.fromDocumentUpdatePeerSelection):null};Z.prototype.getPatches=function(){return this.patches.map(t=>new vd(t))};Z.prototype.containsModelChanges=function(){var t=this.mutation;if(!t)return!1;var o=!!(t.updated&&t.updated.length),i=!!(t.inserted&&t.inserted.length),n=!!(t.deleted&&t.deleted.length);return o||i||n};Z.prototype.affectedTextNodeStillPresentInDoc=function(t){var o=this.getNumberOfMutations();if(o.updated+o.inserted+o.deleted!==1)return!1;var i;o.updated===1?i=this.mutation.updated[0]:o.deleted===1&&(i=this.mutation.deleted[0]);var n=!1;if(i){var r=t.jsonNodeToApiNode(i);r instanceof ed&&(n=!0)}return n};Z.prototype.getNumberOfMutations=function(){var t={inserted:0,updated:0,deleted:0},o=this.mutation;return o&&(t.updated=o.updated&&o.updated.length||0,t.inserted=o.inserted&&o.inserted.length||0,t.deleted=o.deleted&&o.deleted.length||0),t};Z.prototype.hasContentChanges=function(){var t=this.patches&&this.patches.length>0,o=this.fragments&&this.fragments.length>0,i=this.nodesIds&&this.nodesIds.length>0;return t||o||i};Z.prototype.hasChanges=function(){return this.hasContentChanges()||this.highlightsUpdates&&this.highlightsUpdates.length!==0};Z.prototype.clearModelChanges=function(){this.fragments=[],this.nodesIds=[],this.patches=[]};Z.prototype.clearSelection=function(){var t=this.getUpdateSelection();return this.selection=null,t};Z.prototype.getAffectedNodeIds=function(){var t=this.fragments||[],o=t.map(n=>/ data-id="([^"]+)"/.exec(n)[1]),i=this.getPatches().map(n=>n.getAffectedNodeId()).filter(n=>!!n);return o.concat(i)};var Ne=Z;sync.ctrl.DocumentUpdate=Z;namespace("sync.ctrl");var ai=function(t){this.recyclers_=t};ai.prototype.updateOrReplaceElements=function(){var t=[];return this.recyclers_.forEach(o=>{var i=this.updateOrReplace_(o);t.push(i)}),t};ai.prototype.updateOrReplace_=function(t){var o=t.getOldElement(),i=t.getNewElement();return i===t.getMorphPair(o)?(this.updateElement_(t,o,i),o):(this.isDocumentNode_(o)&&(i.contentEdiable=o.contentEditable,this.updateDocSentinels_(o,i)),goog.dom.replaceNode(i,o),i)};ai.prototype.isDocumentNode_=function(t){return sync.model.XmlDom.isDocument(t)};ai.prototype.updateDocSentinels_=function(t,o){var i=h.getIdOfXmlNode(o);t.previousSibling.setAttribute("data-id","tag-0-"+i),t.nextSibling.setAttribute("data-id","tag-1-"+i)};ai.prototype.updateElement_=function(t,o,i){this.updateAttrs_(o,i),t.isRecycled(o)||this.updateChildren_(t,o,i)};ai.prototype.updateAttrs_=function(t,o){this.removeExtraAttrs_(t,o),this.addMissingAttributes_(t,o)};ai.prototype.removeExtraAttrs_=function(t,o){for(var i=t.attributes,n=i.length-1;n>=0;n--){var r=i[n].name;o.hasAttribute(r)||t.removeAttribute(r)}};ai.prototype.addMissingAttributes_=function(t,o){for(var i=o.attributes,n=i.length-1;n>=0;n--){var r=i[n],s=r.name,a=r.value,l=t.getAttribute(s);l!==a&&t.setAttribute(s,a)}};ai.prototype.updateChildren_=function(t,o,i){for(var n of goog.array.toArray(o.childNodes)){var r=t.getMorphPair(n);r?(this.moveChildrenUntil_(i,n,r),r.remove(),this.updateElement_(t,n,r)):n.remove()}goog.dom.append(o,i.childNodes)};ai.prototype.moveChildrenUntil_=function(t,o,i){for(;;){var n=t.firstChild;if(n==null||n===i)break;goog.dom.insertSiblingBefore(n,o)}};var Nu=ai;sync.ctrl.DomUpdater=ai;namespace("sync.model");var Fn=function(t,o,i){this.markers_=t,this.newMarkers_=[],this.highlights_=o,goog.array.sortByKey(this.highlights_,function(n){return n.start}),this.highlightIndex_=0,this.outside_=i,this.start_=0,this.end_=0};Fn.prototype.addAll=function(){for(var t=0;t<this.markers_.length;++t){var o=this.markers_[t];this.isMarkerEmpty_(o)?this.visitEmptyMarker_(o):this.visitNonEmptyMarker_(o)}if(this.highlightIndex_<this.highlights_.length){var i=this.highlights_[this.highlights_.length-1];this.isMarkerEmpty_(i)&&this.newMarkers_.push(i)}return this.newMarkers_};Fn.prototype.visitEmptyMarker_=function(t){var o=this.highlightIndex_<this.highlights_.length?this.highlights_[this.highlightIndex_]:null;o&&o.start===t.start?(t.nodes=this.mergeMarkerNodes_(o.nodes,t.nodes,this.outside_),this.newMarkers_.push(t),++this.highlightIndex_):this.newMarkers_.push(t)};Fn.prototype.visitNonEmptyMarker_=function(t){for(this.start_=this.end_=t.start;this.start_<t.end;){var o=this.highlightIndex_<this.highlights_.length?this.highlights_[this.highlightIndex_]:null;o&&this.markersIntersect_(t,o)?this.visitMarkerThatIntersectsHighlight_(t,o):o&&this.isMarkerEmpty_(o)&&o.start===t.start?(this.newMarkers_.push(o),++this.highlightIndex_):(this.end_=t.end,this.newMarkers_.push({start:this.start_,end:this.end_,nodes:goog.array.clone(t.nodes)})),this.start_=this.end_}};Fn.prototype.visitMarkerThatIntersectsHighlight_=function(t,o){this.end_=Math.max(o.start,this.end_),this.end_-this.start_>0&&this.newMarkers_.push({start:this.start_,end:this.end_,nodes:goog.array.clone(t.nodes)}),this.start_=this.end_,this.end_=Math.min(o.end,t.end),this.end_-this.start_>0?this.newMarkers_.push({start:this.start_,end:this.end_,nodes:this.mergeMarkerNodes_(o.nodes,t.nodes,this.outside_)}):this.isMarkerEmpty_(o)&&this.newMarkers_.push(o),this.end_===o.end&&++this.highlightIndex_};Fn.prototype.mergeMarkerNodes_=function(t,o,i){var n;return i?n=t.concat(o):n=o.concat(t),n};Fn.prototype.isMarkerEmpty_=function(t){return t.start===t.end};Fn.prototype.markersIntersect_=function(t,o){var i=!1;return o.start<t.end&&o.end>t.start&&(i=!0),i};var Mu=Fn;sync.model.TextNodeModelHighlightsAdder=Fn;goog.require("goog.array");goog.require("goog.dom.TagIterator");namespace("sync.model");var Xe=function(t){this.doc=t.ownerDocument,this.text="",this.markers=[],this.addToModel_(t)};Xe.prototype.addToModel_=function(t){var o=new goog.dom.TagIterator(t);o.next();for(var i=[],n=!1;;){var r=o.next();if(r===t)break;if(r.nodeType!==goog.dom.NodeType.TEXT)o.isStartTag()?(i.push(r),n=!1):o.isEndTag()&&(n||(this.markers.push({start:this.text.length,end:this.text.length,nodes:goog.array.clone(i)}),n=!0),i.pop());else{var s=this.text.length;this.text+=r.textContent,this.markers.push({start:s,end:this.text.length,nodes:goog.array.clone(i)}),n=!0}}};Xe.prototype.insertText=function(t,o,i){var n=0,r,s;this.text=this.text.substring(0,t)+o+this.text.substring(t,this.text.length);var a=this.markers.length>0?this.markers[this.markers.length-1]:null;if(a&&a.start!==a.end&&a.end===t)n=this.markers.length;else for(r=0;r<this.markers.length;r++)if(s=this.markers[r],s.start===t){n=r;break}else if(s.start<t&&t<s.end){var l={start:s.start,end:t,nodes:s.nodes},c={start:t,end:s.end,nodes:s.nodes};this.markers.splice(r,1,l,c),n=r+1;break}for(r=n;r<this.markers.length;r++)s=this.markers[r],s.start+=o.length,s.end+=o.length;var d={start:t,end:t+o.length,nodes:i};this.markers.splice(n,0,d);var g=this.tryMergeWithPrevious_(this.markers,n);this.tryMergeWithPrevious_(this.markers,g?n:n+1)};Xe.prototype.tryMergeWithPrevious_=function(t,o){var i=!1,n=o<t.length?t[o]:null,r=o>0?t[o-1]:null;return r&&n&&(this.shouldExtendPreviousMarker_(r,n)?(t.splice(o-1,2,{start:r.start,end:n.end,nodes:n.nodes}),i=!0):this.markersAreEmpty_(r,n)&&(goog.array.forEach(n.nodes,function(s){var a=goog.array.findIndex(r.nodes,function(l){return this.markerNodesEqual_(l,s)},this)!==-1;a||r.nodes.push(s)},this),t.splice(o-1,2,{start:r.start,end:r.end,nodes:r.nodes}))),i};Xe.prototype.markersAreEmpty_=function(t,o){return t.start===t.end&&o.start===o.end};Xe.prototype.deleteText=function(t,o){for(var i=[],n=0;n<this.markers.length;++n){var r=this.markers[n];if(this.markerIsOutsideInterval_(r,t,o)){r.start>t&&(r.start=Math.max(r.start-o,t)),r.end>t&&(r.end=Math.max(r.end-o,t));var s=i.length&&i[i.length-1];this.shouldExtendPreviousMarker_(s,r)?s.end=r.end:i.push(r)}}this.markers=i,this.text=this.text.substring(0,t)+this.text.substring(t+o,this.text.length)};Xe.prototype.shouldExtendPreviousMarker_=function(t,o){return!t||t.start===t.end?!1:goog.array.equals(t.nodes,o.nodes,this.markerNodesEqual_.bind(this))};Xe.prototype.markerNodesEqual_=function(t,o){return sync.util.dom.shallowEquivalent(t,o)};Xe.prototype.markerIsOutsideInterval_=function(t,o,i){var n=!0;return(t.start!==t.end&&t.start>=o&&t.end<=o+i||t.start===t.end&&t.start>=o&&t.end<o+i)&&(n=!1),n};Xe.prototype.cloneMarker_=function(t){return{start:t.start,end:t.end,nodes:goog.array.clone(t.nodes)}};Xe.prototype.split=function(t){for(var o=[],i=0;i<this.markers.length;i++)o.push(this.cloneMarker_(this.markers[i])),this.splitLastMarkerAt_(o,t);var n=this.doc.createElement("span"),r=new Xe(n),s=new Xe(n);r.text=this.text.substring(0,t),s.text=this.text.substring(t,this.text.length);for(var a=0;a<o.length;a++){var l=o[a];l.start<t?r.markers.push(l):s.markers.push({start:l.start-t,end:l.end-t,nodes:l.nodes})}return[r,s]};Xe.prototype.splitLastMarkerAt_=function(t,o){var i=t[t.length-1];i.start<o&&o<i.end&&(t[t.length-1]={start:i.start,end:o,nodes:i.nodes},t.push({start:o,end:i.end,nodes:goog.array.clone(i.nodes)}))};Xe.prototype.addHighlight=function(t,o,i,n){this.addHighlights([{start:t,end:o,nodes:[i]}],n)};Xe.prototype.addHighlights=function(t,o){for(var i=new Mu(this.markers,t,o).addAll(),n=0;n<i.length;)this.tryMergeWithPrevious_(i,n)||++n;this.markers=i};Xe.prototype.removeHighlightsByClass=function(t){for(var o=[],i=0;i<this.markers.length;i++){var n=this.markers[i],r=goog.array.removeAllIf(n.nodes,function(s){return goog.dom.classlist.contains(s,t)});r&&n.nodes.length===0&&n.start===n.end||o.push(n)}for(i=0;i<o.length;)this.tryMergeWithPrevious_(o,i)||++i;this.markers=o};Xe.prototype.isEmpty=function(){return this.markers.length===0};Xe.prototype.getText=function(){return this.text};Xe.prototype.render=function(){var t=this.doc.createElement("span");goog.dom.dataset.set(t,"role","text");for(var o=0;o<this.markers.length;o++){for(var i=this.markers[o],n=this.doc.createTextNode(this.text.substring(i.start,i.end)),r=i.nodes.length-1;r>=0;--r){var s=i.nodes[r].cloneNode(!1);s.appendChild(n),n=s}t.appendChild(n)}return t};Xe.prototype.append=function(t){var o=this.text.length;this.text=this.text+t.text;for(var i=this.markers.length,n=t.markers,r=0;r<n.length;r++)n[r].start+=o,n[r].end+=o;this.markers=this.markers.concat(n),this.tryMergeWithPrevious_(this.markers,i)};var Ko=Xe;sync.model.TextNodeModel=Xe;namespace("sync.ctrl");var nn=function(){};nn.prototype.renderTextHighlights=function(t){};nn.prototype.renderMarker=function(t,o,i){};nn.prototype.renderMarkerElement=function(t){};nn.prototype.renderMarkerInternal=function(t,o,i){};nn.prototype.removeTextHighlightByClass=function(t,o){};nn.prototype.removeMarkersByClass=function(t,o){};nn.prototype.removeMarkerInternal=function(t){};nn.prototype.removeMarker=function(t){};var xu=nn;sync.ctrl.HighlighterBase=nn;namespace("sync.model");var Kl=function(){this.nodeId=null,this.newAttrValue=null,this.content=null,this.onlyMarkup=null,this.color=null,this.isWhitespace=null};Kl.prototype.updateTextContentProps=function(t){this.content="",this.onlyMarkup=!0;for(var o of t){var i=goog.dom.classlist.contains(o,"oxy-sentinel-marker");i||(i=goog.dom.dataset.get(o,"subtype")==="split"),this.onlyMarkup=this.onlyMarkup&&i,this.content+=i?" ":o.textContent}this.content=this.content.trim().replace(/\s+/g," "),this.isWhitespace=this.content.length===0};Kl.prototype.getElementAttributes=function(){if(this.nodeId&&!this.attributes_){var t=h.getInstance().getXmlNodeById(this.nodeId);this.attributes_=sync.model.XmlDom.getAttributes(t)}return this.attributes_};Kl.prototype.getElementName=function(){if(this.nodeId&&!this.elementName_){var t=h.getInstance().getXmlNodeById(this.nodeId);this.elementName_=sync.model.XmlDom.getTagDisplayName(t)}return this.elementName_};var Ru=Kl;sync.model.MarkerContentProps=Kl;namespace("sync.model");var q=function(t){this.id=goog.isDefAndNotNull(t.id)?String(t.id):null,this.type=t["marker-type"],this.author=t.author,this.authorComment=t.comment,this.timestamp=Number(t.timestamp),this.changeSubtype=t.type,this.level=t.level||null,this.flag=t.flag,this.oldValue=t.oldValue,this.attrName=t.ATTR_NAME,this.nodeId=t["node-id"],this.authorNumber=Number(t["author-no"]),this.readOnly_=!!t.ro,this.inRef_=t.ro==="ref",this.contentProps_=null,this.customProps_=t.customProperties};q.prototype.getId=function(){return this.id};q.prototype.getAuthor=function(){return this.author};q.prototype.getAuthorNumber=function(){return this.authorNumber};q.prototype.getAuthorComment=function(){return this.authorComment};q.prototype.getTimestamp=function(){return this.timestamp};q.prototype.getLevel=function(){return this.level};q.prototype.getFlag=function(){return this.flag};q.prototype.isDone=function(){return this.flag?this.flag.split(" ").indexOf("done")!==-1:!1};q.prototype.getCommentTokens=function(){return this.authorComment?new fa().tokenize(this.authorComment):null};q.prototype.getType=function(){return this.type};q.prototype.getChangeSubType=function(){return this.changeSubtype};q.prototype.setAuthor=function(t){this.author=t};q.prototype.setFlag=function(t){this.flag=t};q.prototype.setAuthorComment=function(t){this.authorComment=t};q.prototype.setTimestamp=function(t){this.timestamp=t};q.prototype.setLevel=function(t){this.level=t};q.prototype.setType=function(t){this.type=t};q.prototype.setChangeSubType=function(t){this.changeSubType=t};q.prototype.getOldValue=function(){return this.oldValue};q.prototype.getAttrName=function(){return this.attrName};q.prototype.getNodeId=function(){return this.nodeId};q.prototype.isReadOnly=function(){return this.readOnly_};q.prototype.isInRef=function(){return this.inRef_};q.prototype.getAllChunks=function(){var t;if(this.isAttributeChange()){var o=p.getSentinelNode(this.getNodeId(),f.BEFORE);t=[o]}else t=document.querySelectorAll('*[data-marker-id="'+this.id+'"]');return t};q.prototype.updateContentProps=function(t){if(this.contentProps_=new Ru,!this.getLevel()){if(this.isAttributeChange()){var o=h.getInstance().getXmlNodeById(this.getNodeId()),i=sync.model.XmlDom.getAttributes(o),n=i[this.getAttrName()];this.contentProps_.newAttrValue=n&&n.attributeValue||""}else if(this.isChange())this.contentProps_.updateTextContentProps(t||this.getAllChunks()),this.getChangeSubType()==="surround"&&(this.contentProps_.nodeId=this.nodeId);else if(this.isCustomHighlight()){var r=t||this.getAllChunks();this.contentProps_.updateTextContentProps(r),r&&r.length>0&&(this.contentProps_.color=goog.dom.dataset.get(r[0],"background"))}}};q.prototype.getContentProps=function(){return this.contentProps_||this.updateContentProps(),this.contentProps_};q.prototype.resetContentProps=function(){this.contentProps_=null};q.prototype.isAttributeChange=function(){return goog.string.startsWith(this.type,"CHANGE_ATTRIBUTE_")};q.prototype.isChange=function(){return goog.string.startsWith(this.type,"CHANGE_")};q.prototype.isCommentLike=function(){return this.type===q.Type.COMMENT||this.type===q.Type.CUSTOM_HIGHLIGHT&&this.authorComment};q.prototype.isCustomHighlight=function(){return this.type===q.Type.CUSTOM_HIGHLIGHT};q.prototype.getCustomProperties=function(){return this.customProps_};q.Type={COMMENT:"COMMENT",CUSTOM_HIGHLIGHT:"CUSTOM_HIGHLIGHT",CHANGE_INSERT:"CHANGE_INSERT",CHANGE_DELETE:"CHANGE_DELETE",CHANGE_ATTRIBUTE_INSERTED:"CHANGE_ATTRIBUTE_INSERTED",CHANGE_ATTRIBUTE_DELETED:"CHANGE_ATTRIBUTE_DELETED",CHANGE_ATTRIBUTE_MODIFIED:"CHANGE_ATTRIBUTE_MODIFIED"};var Se=q;sync.model.Marker=q;goog.require("goog.structs.Set");namespace("sync.ctrl");var he=function(t,o,i){this.documentNode=t,this.xmlModel_=i||h.getInstance(),this.canRender_=!0,this.markerParentIds_=[],this.contentModel_=new To,this.renderTextHighlights=o.wrapFunctionToIgnoreLayoutChanges(this.renderTextHighlights,this),this.renderMarker=o.wrapFunctionToIgnoreLayoutChanges(this.renderMarker,this),this.renderMarkerElement=o.wrapFunctionToIgnoreLayoutChanges(this.renderMarkerElement,this),this.renderMarkerInternal=o.wrapFunctionToIgnoreLayoutChanges(this.renderMarkerInternal,this),this.removeTextHighlightByClass=o.wrapFunctionToIgnoreLayoutChanges(this.removeTextHighlightByClass,this),this.removeMarkersByClass=o.wrapFunctionToIgnoreLayoutChanges(this.removeMarkersByClass,this),this.removeMarkerInternal=o.wrapFunctionToIgnoreLayoutChanges(this.removeMarkerInternal,this),this.removeMarker=o.wrapFunctionToIgnoreLayoutChanges(this.removeMarker,this)};goog.inherits(he,xu);he.prototype.renderTextHighlight_=function(t,o,i){for(var n=this.contentModel_.getInterval(t,o),r=goog.dom.createDom("span",i),s=0;s<n.length;s++){var a=n[s].textNode;if(!!a){var l=new Ko(a);l.addHighlight(n[s].start,n[s].end,r),goog.dom.replaceNode(l.render(),a)}}};he.prototype.renderTextHighlights=function(t){for(var o=[],i=0;i<t.length;i++){var n=t[i];if(!this.inSameTextNode_(n.start,n.end))this.renderTextHighlight_(n.start,n.end,n.attrs);else{if(o.length!==0){var r=o[o.length-1];this.inSameTextNode_(r.start,n.end)||(this.renderTextHighlightsInSameNode_(o),o=[])}o.push(n)}}this.renderTextHighlightsInSameNode_(o)};he.prototype.inSameTextNode_=function(t,o){return t.nodeId===o.nodeId&&t.sentinelType===o.sentinelType};he.prototype.renderTextHighlightsInSameNode_=function(t){if(t.length!==0){var o=t[0],i=p.getTextNodeAtPositionIfExists(o.start);if(i){var n=new Ko(i);t=goog.array.map(t,function(r){return{start:r.start.distance,end:r.end.distance,nodes:[goog.dom.createDom("span",r.attrs)]}}),n.addHighlights(t),goog.dom.replaceNode(n.render(),i)}}};he.prototype.renderMarker=function(t,o,i){var n=this.getMarkerAttributes_(i);this.renderMarkerInternal(t,o,n)};he.prototype.getMarkerAttributes_=function(t){var o={class:"oxy-marker author"+t.getAuthorNumber()};return t.getId()&&(o["data-marker-id"]=t.getId()),o["data-type"]=t.getType(),t.getLevel()&&(o["data-level"]=t.getLevel()),t.getChangeSubType()&&(o["data-subtype"]=t.getChangeSubType()),o};he.prototype.getMarkerElement_=function(t){return t.type==="CHANGE_INSERT"?"ins":t.type==="CHANGE_DELETE"?"del":"mark"};he.prototype.renderMarkerElement=function(t){var o=this.getMarkerElement_(t),i=this.getMarkerAttributes_(t);return goog.dom.createDom(o,i)};he.prototype.renderMarkerInternal=function(t,o,i){if(!t.equals(o)){var n=this.adjustStart_(t),r=this.adjustEnd_(o);if(!(!n||!r)){var s=p.getNodesToHighlightInfo(n.container,r.container);if(s.length>0){if(this.initialPreps_(s),!this.canRender_)return;for(var a=s.length-1;a>=0;a--){var l=0;a===0?l=-1:a===s.length-1&&(l=1);var c=s[a];this.renderCommentFragmentsInElement_(c,l,n,r,i)}}}}};he.prototype.adjustStart_=function(t){var o=t.container,i=t.offset;if(o.nodeType===goog.dom.NodeType.ELEMENT){if(o=o.childNodes[t.offset],!o)return null;o.nodeType===goog.dom.NodeType.ELEMENT&&(o=o.firstChild),i=0}return new T(o,i)};he.prototype.adjustEnd_=function(t){var o=t.container,i=t.offset;return o.nodeType===goog.dom.NodeType.ELEMENT&&t.offset>0&&(o=o.childNodes[t.offset-1],p.getSentinelAncestor(o)&&(o=o.firstChild),i=o.nodeType===goog.dom.NodeType.ELEMENT?o.childNodes.length:o.textContent.length),new T(o,i)};he.prototype.removeTextHighlightByClass=function(t,o){var i=this.xmlModel_.getXmlNodeById(t);if(!!i){for(var n=i.querySelectorAll("."+o),r=new goog.structs.Set,s=0;s<n.length;s++){var a=goog.dom.getAncestor(n[s],sync.model.XmlDom.isTextNode);!a||r.add(a)}r.getValues().forEach(function(l){var c=new Ko(l);c.removeHighlightsByClass(o),goog.dom.replaceNode(c.render(),l)})}};he.prototype.removeMarkersByClass=function(t,o){var i=this.xmlModel_.getXmlNodeById(t);if(i)for(var n=i.querySelectorAll("."+o),r=0;r<n.length;r++){var s=n[r];this.removeMarkerInternal(s)}};he.prototype.initialPreps_=function(t){this.canRender_=!0,this.markerParentIds_=[];var o=[0];t.length>1&&o.unshift(t.length-1);for(var i,n=0;n<o.length;n++){var r=t[o[n]].oxyParentId,s=this.xmlModel_.getXmlNodeById(r),a=t[o[n]].nodePath,l=p.getNodeByNodePath(a,s);i=l.parentNode,sync.model.XmlDom.isSentinelNode(i)&&(i=i.parentNode)}for(;i&&i.getAttribute("data-type")==="COMMENT";){var c=i.getAttribute("data-marker-id");if(c===""||c===null){console.error("The parent marker should have an id");break}this.markerParentIds_.push(c),i=i.parentNode}};he.prototype.shouldSkipInSentinels_=function(t,o){var i=t.parentNode,n=p.getSentinelAncestor(i);return n!==i?!1:o===1&&i.firstChild===t||o===-1&&i.lastChild===t};he.prototype.renderCommentFragmentsInElement_=function(t,o,i,n,r){var s=this.xmlModel_.getXmlNodeById(t.oxyParentId),a=t.nodePath,l=goog.dom.createDom,c=goog.dom.classlist,d=goog.dom.removeNode,g=p.getNodeByNodePath(a,s);if(!g){console.warn("The getNodeByNodePath return value should be not null at this point. Skipping the marker.");return}var m=g.parentNode;if(goog.dom.classlist.contains(m,"selection-placeholder")){console.warn("Tried to wrap a fragment that is already wrapped. Skipping.");return}if(!this.shouldSkipInSentinels_(g,o)){var v,C;if(g.nodeName==="IMG"){var N;C=this.getParentMarkerToWrap_(g),C.markerToWrap?(N=l("span","oxy-imgwrapper"),v=l("span",r,N),sync.util.dom.wrap(v,C.markerToWrap)):(N=l("span","oxy-imgwrapper"),v=l("span",r,N),sync.util.dom.wrap(v,g));return}var D=a[a.length-1],H,ne=g.nodeValue;if(i.container===n.container)if(H=ne.substring(i.offset,n.offset),c.contains(m,"tag")||c.contains(m,"oxy-static"))v=l("span",r),sync.util.dom.wrap(v,m);else if(C=this.getParentMarkerToWrap_(g),!C.highestMarker)H&&(v=l("span",r,H),i.offset&&goog.dom.insertChildAt(m,goog.dom.createTextNode(ne.substring(0,i.offset)),D++),goog.dom.insertChildAt(m,v,D++),n.offset!==ne.length&&goog.dom.insertChildAt(m,goog.dom.createTextNode(ne.substring(n.offset)),D),d(g));else{this.splitNodeInThree_(g,i.offset,n.offset,C.highestMarker),v=l("span",r,H);for(var ht=C.highestMarker;ht.firstChild;)ht=ht.firstChild;goog.dom.replaceNode(v,ht)}else if(o===-1)if(H=ne.substring(i.offset),c.contains(m,"tag-core"))m=m.parentNode,v=l("span",r),sync.util.dom.wrap(v,m);else if(c.contains(m,"tag")||c.contains(m,"oxy-static")||c.contains(m,"empty"))v=l("span",r),sync.util.dom.wrap(v,m);else if(C=this.getParentMarkerToWrap_(g),!C.highestMarker)H&&(v=l("span",r,H),i.offset>0&&goog.dom.insertChildAt(m,goog.dom.createTextNode(ne.substring(0,i.offset)),D++),goog.dom.insertChildAt(m,v,D++),d(g));else{var Yi=this.splitNodeInTwo_(g,i.offset,C.highestMarker,!0);goog.dom.insertSiblingBefore(Yi,C.highestMarker),g=p.getNodeByNodePath(t.nodePath,s),m=g.parentNode,v=l("span",r,H),goog.dom.replaceNode(v,g),goog.dom.insertSiblingAfter(C.highestMarker.previousSibling,C.highestMarker)}else if(o===0)C=this.getParentMarkerToWrap_(g),C.markerToWrap?(v=l("span",r),sync.util.dom.wrap(v,C.markerToWrap)):(H=ne,c.contains(m,"tag-core")?(m=m.parentNode,v=l("span",r),sync.util.dom.wrap(v,m)):c.contains(m,"tag")||c.contains(m,"oxy-static")||c.contains(m,"empty")?(v=l("span",r),sync.util.dom.wrap(v,m)):(v=l("span",r,H),goog.dom.replaceNode(v,g)));else if(o===1){if(!ne)return;if(C=this.getParentMarkerToWrap_(g),H=ne.substring(0,n.offset),C.markerToWrap){var cs=this.splitNodeInTwo_(g,n.offset,C.highestMarker);if(goog.dom.insertSiblingBefore(cs,C.highestMarker),g=p.getNodeByNodePath(t.nodePath,s),g===null)return;C=this.getParentMarkerToWrap_(g),v=l("span",r),sync.util.dom.wrap(v,C.markerToWrap)}else if(c.contains(m,"tag-core"))m=m.parentNode,v=l("span",r),sync.util.dom.wrap(v,m);else if(c.contains(m,"tag")||c.contains(m,"oxy-static")||c.contains(m,"empty"))v=l("span",r),sync.util.dom.wrap(v,m);else if(H)if(v=l("span",r,H),C.highestMarker){var ls=this.splitNodeInTwo_(g,n.offset,C.highestMarker);goog.dom.insertSiblingBefore(ls,C.highestMarker),g=p.getNodeByNodePath(t.nodePath,s),m=g.parentNode,goog.dom.insertChildAt(m,v,D++),d(g)}else goog.dom.insertChildAt(m,v,D++),n.offset>0&&goog.dom.insertChildAt(m,goog.dom.createTextNode(ne.substring(n.offset)),D++),d(g)}}};he.prototype.splitNodeInTwo_=function(t,o,i,n){var r=this.getNodeIndexInParent_(i),s=i.parentNode,a,l=t.ownerDocument;if(n===!0){var c=l.createRange();c.setStart(t,o),c.setEnd(s,r+1),a=c.cloneContents();var d=l.createRange();d.setStart(t,o),d.setEnd(t,t.nodeValue.length),d.deleteContents()}else{var g=l.createRange();g.setStart(s,r),g.setEnd(t,o),a=g.cloneContents();var m=l.createRange();m.setStart(t,0),m.setEnd(t,o),m.deleteContents()}return a};he.prototype.splitNodeInThree_=function(t,o,i,n){var r=this.getNodeIndexInParent_(n),s=n.parentNode,a=t.ownerDocument,l=a.createRange();l.setStart(t,i),l.setEnd(s,r+1);var c=l.extractContents(),d=a.createRange();d.setStart(s,r),d.setEnd(t,o);var g=d.extractContents();goog.dom.insertSiblingBefore(g,n),goog.dom.insertSiblingAfter(c,n)};he.prototype.getNodeIndexInParent_=function(t){for(var o,i=t.parentNode,n=0;n<i.childNodes.length;n++)if(t===i.childNodes[n]){o=n;break}return o};he.MarkerDataTypes=["COMMENT","CUSTOM_HIGHLIGHT","CHANGE_INSERT","CHANGE_DELETE","CHANGE_ATTRIBUTE_INSERTED","CHANGE_ATTRIBUTE_DELETED","CHANGE_ATTRIBUTE_MODIFIED"];he.prototype.getParentMarkerToWrap_=function(t){var o=null,i=null,n=t.parentNode;goog.dom.classlist.contains(n,"tag")&&(n=n.parentNode),goog.dom.classlist.contains(n,"oxy-static")&&(n=n.parentNode),goog.dom.classlist.contains(n,"oxy-imgwrapper")&&(n=n.parentNode);for(var r;n&&he.MarkerDataTypes.indexOf(r=n.getAttribute("data-type"))!==-1;){var s=n.getAttribute("data-marker-id");if(s===""||s===null){console.error("The parent marker should have an id");break}(this.markerParentIds_.indexOf(s)===-1||r&&r!=="COMMENT")&&(o=n),i=n,n=n.parentNode,goog.dom.classlist.contains(n,"oxy-imgwrapper")&&(n=n.parentNode)}return{markerToWrap:o,highestMarker:i}};he.prototype.removeMarkerInternal=function(t){var o=t.parentNode,i=t.firstChild;if(this.checkAtMostOneChildrenInvariant(t),i){var n=t.previousSibling;goog.dom.classlist.contains(i,"oxy-imgwrapper")&&(i=i.firstChild),n?goog.dom.insertSiblingAfter(i,n):goog.dom.insertChildAt(o,i,0)}goog.dom.removeNode(t),sync.util.normalize(o),i&&this.mergeSameMarkerSiblings_(i)};he.prototype.removeMarker=function(t){for(var o=this.documentNode.querySelectorAll('*[data-marker-id="'+t+'"]'),i=0;i<o.length;i++){var n=o[i];this.removeMarkerInternal(n)}};he.prototype.mergeSameMarkerSiblings_=function(t){var o=t.parentNode;if(t.nodeType===goog.dom.NodeType.TEXT&&o){var i=o.previousSibling,n=o.nextSibling;if(!i&&!n)return;var r=o.getAttribute("data-marker-id");r&&(i&&i.nodeType===goog.dom.NodeType.ELEMENT&&i.getAttribute("data-marker-id")===r&&i.firstChild&&i.firstChild.nodeType===goog.dom.NodeType.TEXT&&(this.checkAtMostOneChildrenInvariant(i),goog.dom.insertSiblingBefore(i.firstChild,t),goog.dom.removeNode(i)),n&&n.nodeType===goog.dom.NodeType.ELEMENT&&n.getAttribute("data-marker-id")===r&&n.firstChild&&n.firstChild.nodeType===goog.dom.NodeType.TEXT&&(this.checkAtMostOneChildrenInvariant(n),goog.dom.appendChild(o,n.firstChild),goog.dom.removeNode(n)),sync.util.normalize(o))}};he.prototype.checkAtMostOneChildrenInvariant=function(t){if(t.childNodes.length>1)throw new Error("Invariant: Marker span has multiple children. Parent HTML: "+sync.util.getInnerHTML(t.parentNode)+". Marker HTML: "+sync.util.getInnerHTML(t))};var Ed=he;sync.ctrl.Highlighter=he;namespace("sync.actions.review");var Xv={FINAL:"final",ORIGINAL:"original",ALL_CHANGES:"all"},Pe=Xv;goog.require("goog.dom.classlist");namespace("sync.actions.review");var Go=function(t,o){sync.actions.AbstractAction.call(this,null),this.viewModesHandler_=t,this.mode_=o};goog.inherits(Go,sync.actions.AbstractAction);Go.prototype.actionPerformed=function(t){this.viewModesHandler_.switchTo(this.mode_),t()};Go.prototype.getDescription=function(){return Go.getDescription(this.mode_)};Go.prototype.getDisplayName=function(){return Go.getDisplayName(this.mode_)};Go.prototype.renderSmallIcon=function(){return sync.util.renderSmallIcon(Go.getIconUrl(this.mode_,!0))};Go.getIconUrl=function(t,o){var i;switch(t){case Pe.FINAL:i="TrackChangesFinal";break;case Pe.ORIGINAL:i="TrackChangesOriginal";break;case Pe.ALL_CHANGES:i="TrackChangesFinalWithChanges";break}var n=o?"16":"24",r=sync.util.getHdpiFactor();return"images/no-sprite/"+i+n+(r===2?"@2x":"")+".png"};Go.getDescription=function(t){var o;switch(t){case Pe.FINAL:o=tr(msgs.TRACK_CHANGES_FINAL_TOOLTIP_);break;case Pe.ORIGINAL:o=tr(msgs.TRACK_CHANGES_ORIGINAL_TOOLTIP_);break;case Pe.ALL_CHANGES:o=tr(msgs.VIEW_ALL_CHANGES_DESCRIPTION_);break}return o};Go.getDisplayName=function(t){var o;switch(t){case Pe.FINAL:o=tr(msgs.TRACK_CHANGES_FINAL_MODE_);break;case Pe.ORIGINAL:o=tr(msgs.TRACK_CHANGES_ORIGINAL_MODE_);break;case Pe.ALL_CHANGES:o=tr(msgs.TRACK_CHANGES_FINAL_WITH_CHANGES_MODE_);break}return o};var fr=Go;sync.actions.review.SetChangesViewMode=Go;goog.require("goog.style");namespace("sync.ctrl");var bt=function(t,o){this.mode_=Pe.ALL_CHANGES,this.docWrapper_=t,this.ctrl_=o};goog.inherits(bt,pe);bt.prototype.enterDocument=function(t){this.isOriginalOrFinalMode_()&&t.forEach(o=>{if(this.isNodeHiddenInCurrentMode_(o)){let i=h.getIdOfXmlNode(o);p.breakSentinelMigrationInNode(i)}})};bt.prototype.isOriginalOrFinalMode_=function(){return this.mode_===Pe.FINAL||this.mode_===Pe.ORIGINAL};bt.prototype.enhanceDom=function(t){this.isOriginalOrFinalMode_()&&t.forEach(o=>{if(!this.isNodeHiddenInCurrentMode_(o)){var i=this.getSpecificAttributeForHiddenNodes_();goog.array.forEach(o.querySelectorAll("["+i+"]"),n=>{var r=p.getSentinelsMigratedInNode(n),s;r.forEach(a=>{var l=p.getSentinelType(a);l===f.BEFORE?goog.dom.insertSiblingBefore(a,n):(goog.dom.insertSiblingAfter(a,s||n),s=a)})})}})};bt.prototype.getSpecificAttributeForHiddenNodes_=function(){var t=null;return this.mode_===Pe.FINAL?t="data-deleted":this.mode_===Pe.ORIGINAL&&(t="data-added"),t};bt.prototype.isNodeHiddenInCurrentMode_=function(t){var o=!1,i=this.getSpecificAttributeForHiddenNodes_();return i&&(o=t.getAttribute(i)==="true"),o};bt.prototype.switchTo=function(t){var o=this.mode_;t!==o&&(this.mode_=t,this.updateViewModesToolbarButton(),this.setChangesViewModeStylesToDoc_(o,t),this.breakSentinelMigrationInHiddenNodes_(t),this.handler_&&(this.handler_.dispose(),this.handler_=null),t===Pe.ORIGINAL&&(this.handler_=new goog.events.EventHandler,this.handler_.listen(this.ctrl_,M.EventType.BEFORE_MODEL_CHANGED,goog.bind(this.switchTo,this,Pe.ALL_CHANGES))))};bt.prototype.setChangesViewModeStylesToDoc_=function(t,o){var i=this.getChangesViewModeCSSClass_(t);i&&goog.dom.classlist.remove(this.docWrapper_,i);var n=this.getChangesViewModeCSSClass_(o);n&&goog.dom.classlist.add(this.docWrapper_,n)};bt.prototype.getChangesViewModeCSSClass_=function(t){var o=null;switch(t){case Pe.FINAL:o=bt.ViewFinalClass;break;case Pe.ORIGINAL:o=bt.ViewOriginalClass;break}return o};bt.prototype.breakSentinelMigrationInHiddenNodes_=function(t){if(this.isOriginalOrFinalMode_()){var o=t===Pe.FINAL?"data-deleted":"data-inserted",i=document.querySelectorAll("*["+o+'="true"]');goog.array.forEach(i,function(n){p.breakSentinelMigrationInNode(h.getIdOfXmlNode(n))})}};bt.prototype.dispose=function(){goog.dom.classlist.remove(this.docWrapper_,bt.ViewFinalClass),goog.dom.classlist.remove(this.docWrapper_,bt.ViewOriginalClass)};bt.ViewFinalClass="oxy-view-final";bt.ViewOriginalClass="oxy-view-original";bt.prototype.updateViewModesToolbarButton=function(){var t=document.getElementById("track-changes-view-mode");if(!!t){t.title=tr(msgs.TRACK_CHANGES_)+": "+fr.getDisplayName(this.mode_)+`
`+fr.getDescription(this.mode_);var o=fr.getIconUrl(this.mode_,!1);t.style.backgroundImage=o&&"url("+o+")"}};var Ou=bt;var Ca=class{constructor(o,i){this.xmlModel_=o,this.docWrapper_=i}getXmlDocument(){return this.xmlModel_.getDocument(this.docWrapper_)}};var rn=class extends goog.events.EventTarget{constructor(o){super();this.docId=o}applyUpdate_(o,i){throw new Error("not implemented")}};rn.EventType={READ_ONLY_STATUS_RECEIVED:"ro_status_received"};goog.require("goog.events.EventTarget");goog.require("goog.dom.dataset");namespace("sync.ctrl");var li=class extends rn{constructor(o,i,n,r,s,a){super(i);this.docContainer_=o,this.xmlModel_=n,this.documentNode=o?o.ownerDocument:document,this.a11y_=s,this.changeTrackingManager_=new Iu(a,k.getInstance()),this.viewModesHandler_=new Ou(o,this),this.documentUpdateFilters=[],this.highlighter_=new Ed(this.documentNode,r,n),this.markersModel=null}disposeInternal(){li.superClass_.disposeInternal.call(this),this.changeTrackingManager_.dispose(),this.viewModesHandler_.dispose()}getXmlModel(){return this.xmlModel_}getXmlDocumentProvider(){var o=this.docContainer_.firstElementChild;return new Ca(this.xmlModel_,o)}getDocument(){return this.getXmlDocumentProvider().getXmlDocument()}getDocumentHtmlNode(){return this.getDocument().getHtmlNode()}setHighlightsManager(o){this.highlightsManager_=o}setMarkersModel(o){this.markersModel=o}registerDocumentFilter(o){this.documentUpdateFilters.push(o)}insertTextAtSavedSelection(o,i,n){var r={id:this.docId,text:o};i.extend(r),this.insertWithParams_(r,n)}insertWithParams_(o,i){if(i)sync.rest.callAsync("RESTDocumentControllers.documentController.insertText",o).then(a=>a.update).then(goog.bind(this.applyUpdate_,this)).thenAlways(i);else{var n=sync.rest.getSyncMethod("RESTDocumentControllers.documentController.insertText"),r=n(o),s=r.update;this.applyUpdate_(s)}}insertText(o,i,n){var r={id:this.docId,text:o};i.extend(r),this.insertWithParams_(r,n)}insertPastedText(o,i){var n={id:this.docId,text:o};return i.extend(n),sync.rest.callAsyncNative("RESTDocumentControllers.documentController.insertPastedText",n).then(goog.bind(this.applyUpdate_,this)).catch(sync.util.error.reloadPage)}insertHtml(o,i,n){if(o.length){var r={id:this.docId,html:o,asLink:n};return i.extend(r),sync.rest.callAsyncNative("RESTDocumentControllers.documentController.insertHtml",r).then(goog.bind(this.applyUpdate_,this))}else return Promise.resolve()}insertXml(o,i,n){var r={id:this.docId,xml:o};i.extend(r),sync.rest.callAsync("RESTDocumentControllers.documentController.insertXml",r).then(goog.bind(this.applyUpdate_,this)).thenAlways(n)}deleteSelection(o,i,n,r,s){var a=r||1,l={id:this.docId,backspace:o===goog.events.KeyCodes.BACKSPACE,count:a,wordLevel:i};if(n.extend(l),goog.isFunction(s))sync.rest.callAsync("RESTDocumentControllers.documentController.removeText",l).then(m=>m.update).then(goog.bind(this.applyUpdate_,this)).thenCatch(sync.util.error.reloadPage).then(s);else{var c=sync.rest.getSyncMethod("RESTDocumentControllers.documentController.removeText"),d=c(l),g=d.update;this.applyUpdate_(g)}}deleteTextInterval_(o,i){var n=p.getTextNodeAtPositionIfExists(o);if(n){var r=new Ko(n);r.deleteText(o.distance,i),goog.dom.replaceNode(r.render(),n)}}insertTextAtPos_(o,i){var n=o.distance,r=p.getTextNodeAtPositionOrCreate(o),s=new Ko(r),a=this.getMarkersAtPositionForInsert_(o);a=a.concat(this.getAllNonPersistentHighlightsAtPosition_(o)),s.insertText(n,i,a);var l=s.render();goog.dom.replaceNode(l,r)}getMarkersAtPositionForInsert_(o){var i=[],n=[];if(this.markersModel&&(n=this.markersModel.getAllMarkersAtPosition(o,!0),n=n.filter(this.discardInsertsByOthers_.bind(this)),i=n.map(goog.bind(this.markersModel.getFirstChunkForMarker,this.markersModel)),i.reverse()),this.changeTrackingManager_&&this.changeTrackingManager_.isTrackingChanges()){var r=this.computeChangeInsertMarker_(o,n);r&&i.push(r)}return i}computeChangeInsertMarker_(o,i){var n=null,r;if(i.length){var s=this.markersModel.getMarker(i[0]);s.getAuthorNumber()===0&&s.getType()===Se.Type.CHANGE_INSERT&&(r=this.markersModel.getFirstChunkForMarker(i[0]))}if(!r){var a=this.markersModel.getAllMarkersAtPosition(o,!1),l={"author-no":0},c=goog.array.findRight(a,g=>this.isMyChange_(g));c&&(l.id=c);var d=new Se(l);d.setType(Se.Type.CHANGE_INSERT),n=this.highlighter_.renderMarkerElement(d)}return n}discardInsertsByOthers_(o){var i=this.markersModel.getMarker(o);return i.getType()!==Se.Type.CHANGE_INSERT||i.getAuthorNumber()===0}isMyChange_(o){var i=this.markersModel.getMarker(o);return i.getAuthorNumber()===0&&i.getType()===Se.Type.CHANGE_INSERT}getAllNonPersistentHighlightsAtPosition_(o){var i=[];return this.highlightsManager_&&this.highlightsManager_.documentContainsHighlights()&&(i=this.highlightsManager_.getLocator().setIncludeEnding(!0).getMarkersAtPosition(o).map(this.highlightsManager_.getFirstChunkForHighlight,this.highlightsManager_)),i}previewInsertion(o){var i=this.computePreviewInsertion(o);return i.success&&this.applyUpdate_(i.update),i}computePreviewInsertion(o){var i=!1,n=null,r=null;try{var s={id:this.docId};o.extend(s);var a=sync.rest.getSyncMethod("RESTDocumentControllers.documentController.previewInsertion");n=a(s),r=n.update,i=r.nodesIds&&r.nodesIds.length>0}catch{i=!1}return{success:i,rollbackUpdate:n.rollbackUpdate,update:r,oldSelection:this.selectionConversion_(n.rollbackUpdate.selection)}}selectionConversion_(o){var i=new sync.position.RelativeContentPosition(o.startReferenceNodeId+"",o.startSentinelType,o.startDistance),n=null;if(o.collapsed)n=new sync.select.SavedSelection(i,i,i,i);else{var r=new sync.position.RelativeContentPosition(o.endReferenceNodeId+"",o.endSentinelType,o.endDistance),s=o.isBackwards?i:r,a=o.isBackwards?r:i;n=new sync.select.SavedSelection(i,r,a,s)}return n}applyClientSideUpdate_(o){if(!this.isDisposed()){this.a11y_&&this.a11y_.pauseScreenReader(this.getDocumentHtmlNode());try{this.fireBeforeModelChanged(o,!1),this.fireSelectionModelChanged(null,!1),this.applySimplePatches_(o.getPatches()),this.fireClientSideModelChanged_(o),this.fireSelectionUpdate_(o,!1)}finally{this.a11y_&&this.a11y_.resumeScreenReader(this.getDocumentHtmlNode())}}}applyUpdate_(o,i){if(!this.isDisposed())if(o){o=Ne.of(o),this.a11y_&&this.a11y_.pauseScreenReader(this.getDocumentHtmlNode());try{this.fireBeforeModelChanged(o,i),this.fireSelectionModelChanged(null,i),this.applySimplePatches_(o.getPatches()),o.nodesIds&&o.fragments&&this.applyUpdateInternal_(o.nodesIds,o.fragments),this.fireServerUpdates(o,i)}finally{this.a11y_&&this.a11y_.resumeScreenReader(this.getDocumentHtmlNode())}}else console.error("No update received")}fireBeforeModelChanged(o,i){var n=new sync.ctrl.ModelChangedEvent(o,li.EventType.BEFORE_MODEL_CHANGED,void 0,i);this.dispatchEvent(n)}lieAboutBeforeModelChanged(o){var i=new sync.ctrl.ModelChangedEvent(o,li.EventType.LIE_BEFORE_MODEL_CHANGED);this.dispatchEvent(i)}fireServerUpdates(o,i){var n=new sync.ctrl.ModelChangedEvent(o,li.EventType.MODEL_CHANGED,!1,i);this.dispatchEvent(n),this.fireSelectionUpdate_(o,i);var r=new sync.ctrl.ModelChangedEvent(o,li.EventType.UPDATE_MESSAGES_RECEIVED);this.dispatchEvent(r);var s=new sync.ctrl.ModelChangedEvent(o,rn.EventType.READ_ONLY_STATUS_RECEIVED);this.dispatchEvent(s)}fireClientSideModelChanged_(o){var i=new sync.ctrl.ModelChangedEvent(o,li.EventType.MODEL_CHANGED,!0,!1);this.dispatchEvent(i)}fireSelectionUpdate_(o,i){var n=o.getUpdateSelection();n&&this.fireSelectionModelChanged(n.restore(),i)}fireSelectionModelChanged(o,i){var n=new sync.ctrl.SelectionModelChangedEvent(o,li.EventType.SERVER_SELECTION_CHANGED,i);this.dispatchEvent(n)}applySimplePatches_(o){if(!!o)for(var i=0;i<o.length;i++){var n=o[i];n.type==="delete"?this.deleteTextInterval_(n.pos,n.length):n.type==="insert"?this.insertTextAtPos_(n.pos,n.text):n.type==="un-delete"?this.replaceTextNode_(n.pos,n.html):n.type==="insert_node"?this.insertNode_(n.pos,n.nodeHtml):n.type==="delete_node"?this.deleteNode_(n.nodeId):n.type==="add_marker"?this.addMarkerHighlight_(n.start,n.end,n.marker):n.type==="remove_marker"&&this.removeMarkerHighlight_(n.markerId)}}deleteNode_(o){var i=this.xmlModel_.getXmlNodeById(o);if(i){p.breakSentinelMigrationInNode(o);var n=sync.model.XmlDom.getNextSibling(i),r=sync.model.XmlDom.getPreviousSibling(i);if(goog.dom.removeNode(i),sync.model.XmlDom.isTextNode(n)&&sync.model.XmlDom.isTextNode(r)){var s=new Ko(r);s.append(new Ko(n)),goog.dom.removeNode(r),goog.dom.replaceNode(s.render(),n)}}}insertNode_(o,i){var n=this.parseHTML([i]);if(T.TABLE_RELATED_TAGS.indexOf(n[0].tagName)!==-1)this.insertTableNode_(o,n[0]);else{var r=p.getTextNodeAtPositionOrCreate(o),s=new Ko(r),a=this.documentNode.createDocumentFragment(),l=s.split(o.distance);(!l[0].isEmpty()||sync.model.XmlDom.getPreviousSibling(r))&&goog.dom.appendChild(a,l[0].render()),goog.dom.appendChild(a,n[0]),(!l[1].isEmpty()||sync.model.XmlDom.getNextSibling(r))&&goog.dom.appendChild(a,l[1].render()),goog.dom.replaceNode(a,r),this.cleanupDuplicateSentinels_(n[0])}this.enterDocument(n)}insertTableNode_(o,i){var n=p.getTextNodeAtPositionOrCreate(o),r=n.nextElementSibling;if(r&&r.tagName===String(goog.dom.TagName.TABLE)){var s=sync.model.XmlDom.getNextSibling(n);s?goog.dom.insertSiblingBefore(n,s):goog.dom.appendChild(r,n)}goog.dom.replaceNode(i,n)}migrateSentinelsMissingInUpdate_(o,i,n){for(var r=i.parentNode,s=r;s;){var a=h.getIdOfXmlNode(s),l=p.getSentinelNode(a,n);if(goog.dom.isElement(l)&&goog.dom.contains(i,l)){var c=h.getIdOfSentinel(l);h.getSentinelByIdWithinElement(c,o)==null&&p.migrateSentinel(l,n,r)}else break;s=sync.model.XmlDom.getParentNode(s)}}cleanupDuplicateSentinels_(o){var i=p.getSentinelsMigratedInNode(o);i.forEach(n=>{var r=h.getIdOfSentinel(n),s=this.xmlModel_.getSentinelById(r);s&&this.cleanupExtraMigratedSentinel_(s)})}cleanupExtraMigratedSentinel_(o){var i=sync.model.XmlDom.getWrappedSentinel(o),n=p.getSentinelType(o),r=p.getEmptyMarkerTextNode(i,n);goog.dom.removeNode(r),goog.dom.removeNode(i)}replaceTextNode_(o,i){var n=p.getTextNodeAtPositionOrCreate(o);n.innerHTML=i}addMarkerHighlight_(o,i,n){this.highlighter_.renderMarker(o,i,n)}removeMarkerHighlight_(o){this.highlighter_.removeMarker(o)}getHighlighter(){return this.highlighter_}applyUpdateInternal_(o,i){var n,r=[],s;for(n=0;n<o.length;n++){if(s=this.xmlModel_.getXmlNodeById(o[n]),!s)throw new Error("Could not find the node with id "+o[n]);r.push(s)}var a=this.parseHTMLInternal(i);this.fixupMigratedSentinls_(r,a);var l=this.recycle(r,a);this.exitDocument(r),this.enhanceDom(a);var c=new Nu(l),d=c.updateOrReplaceElements();this.enterDocument(d)}fixupMigratedSentinls_(o,i){for(var n=0;n<o.length;n++){var r=o[n];goog.dom.classlist.contains(r.parentNode,"oxy-document")||this.cleanupDuplicateSentinels_(i[n]),this.migrateSentinelsMissingInUpdate_(i[n],r,f.BEFORE),this.migrateSentinelsMissingInUpdate_(i[n],r,f.AFTER)}}getChangeTrackingViewModesHandler(){return this.viewModesHandler_}recycle(o,i){for(var n=[],r=0;r<o.length;r++)n.push(new wu(o[r],i[r]));return this.documentUpdateFilters.forEach(s=>s.recycle(n)),n}enterDocument(o){for(var i=0;i<this.documentUpdateFilters.length;i++)this.documentUpdateFilters[i].enterDocument(o)}exitDocument(o){for(var i=0;i<this.documentUpdateFilters.length;i++)this.documentUpdateFilters[i].exitDocument(o)}enhanceDom(o){for(var i=0;i<this.documentUpdateFilters.length;i++)this.documentUpdateFilters[i].enhanceDom(o)}addChildren_(o,i){for(var n=this.documentNode.createDocumentFragment(),r=Array.prototype.slice.call(i),s=0;s<r.length;s++)n.appendChild(r[s]);goog.dom.appendChild(o,n)}dropNodes(o){for(var i=0;i<this.documentUpdateFilters.length;i++)this.documentUpdateFilters[i].dropNodes(o)}parseHTMLInternal(o){for(var i=[],n=0;n<o.length;n++){var r=$.parseHTML(o[n],this.documentNode)[0];i.push(r)}return i}parseHTML(o){var i=this.parseHTMLInternal(o);return this.enhanceDom(i),i}getContent(){return sync.rest.callAsync("RESTDocumentManager.downloadUtf8XMLContent",{id:this.docId,fileName:"file.xml"})}getChangeTrackingManager(){return this.changeTrackingManager_}};li.EventType={MODEL_CHANGED:"model_changed",LIE_BEFORE_MODEL_CHANGED:"lie_before_model_changed",BEFORE_MODEL_CHANGED:"before_model_changed",SERVER_SELECTION_CHANGED:"server_selection_changed",UPDATE_MESSAGES_RECEIVED:"messages_received"};sync.ctrl.SelectionModelChangedEvent=function(t,o,i){goog.events.Event.call(this,o),this.selection=t,this.isCausedByBackgroundSync=i};goog.inherits(sync.ctrl.SelectionModelChangedEvent,goog.events.Event);sync.ctrl.ModelChangedEvent=function(t,o,i,n){this.docUpdate=t,this.type=o,this.isClientSide=Boolean(i),this.isBackgroundSync=n};sync.ctrl.MarkerUpdate=function(){};sync.ctrl.MarkerUpdate.prototype.id=null;sync.ctrl.MarkerUpdate.prototype.markerType=null;sync.ctrl.MarkerUpdate.prototype.type=null;sync.ctrl.HighlightUpdate=function(){};sync.ctrl.HighlightUpdate.prototype.id=null;sync.ctrl.HighlightUpdate.prototype.type=null;var M=li;sync.ctrl.Controller=li;namespace("sync.actions");var Cs=function(t,o){_.call(this,{keyStrokeStr:"M1 Z",displayName:tr(msgs.EDIT_UNDO_),description:tr(msgs.EDIT_UNDO_)}),this.undoManager_=t,this.selectionManager_=o};goog.inherits(Cs,_);Cs.prototype.execute=function(){return sync.util.promise.nativePromise(this.undoManager_.undo(this.selectionManager_.getSelection()))};Cs.prototype.isEnabled=function(){return this.undoManager_.isUndoEnabled()};Cs.prototype.renderLargeIcon=function(){return goog.dom.createDom("div","Undo24_light")};Cs.prototype.getSmallIcon=function(){return sync.util.image.getImageUrl("/images/Undo16.png",sync.util.getHdpiFactor())};var Pu=Cs;sync.actions.UndoAction=Cs;namespace("sync.actions");var Ss=function(t,o){var i=goog.userAgent.MAC?"M1 Shift Z":"Ctrl Y";_.call(this,{keyStrokeStr:i,displayName:tr(msgs.EDIT_REDO_),description:tr(msgs.EDIT_REDO_)}),this.undoManager_=t,this.selectionManager_=o};goog.inherits(Ss,_);Ss.prototype.execute=function(){return sync.util.promise.nativePromise(this.undoManager_.redo(this.selectionManager_.getSelection()))};Ss.prototype.isEnabled=function(){return this.undoManager_.isRedoEnabled()};Ss.prototype.renderLargeIcon=function(){return goog.dom.createDom("div","Redo24_light")};Ss.prototype.getSmallIcon=function(t){return sync.util.image.getImageUrl("/images/Redo16.png",t)};var ku=Ss;sync.actions.RedoAction=Ss;namespace("sync.cc");var Un=function(t){this.extensionFilterCCItems=new goog.structs.Set,this.extensionActions=[],this.extensionCCItems=[],this.actionsManager=t,this.extensionConfigurationChanged=!1};Un.prototype.addExtensionConfiguration=function(t,o){this.extensionCCItems=t||[],this.extensionFilterCCItems=new goog.structs.Set(o),this.extensionConfigurationChanged=!0};Un.prototype.determineExtensionActions_=function(){if(this.extensionConfigurationChanged){this.extensionActions=[];for(var t=0;t<this.extensionCCItems.length;t++){var o=this.extensionCCItems[t],i=o.id,n=i!=null?this.actionsManager.getActionById(i):null;if(n&&(typeof n.isCompatible!="function"||n.isCompatible())){var r=o.ccItemAlias||n.getDisplayName(),s=new sync.cc.CCItem(r,1);s.action=n,this.extensionActions.push(s)}}this.extensionConfigurationChanged=!1}};Un.prototype.addExtensionActions=function(t){if(this.determineExtensionActions_(),this.extensionActions){for(var o=goog.array.findIndexRight(t,Un.shouldRemainAtTop_),i=0;i<=o;i++)t[i].isSplitEntry=!0;for(var n=0;n<this.extensionActions.length;n++){var r=this.extensionActions[n];r.action.isEnabled()&&t.push(r)}}};Un.shouldRemainAtTop_=function(t){return sync.cc.CCItem.isSplitItem_(t,t.displayName)||t.type===sync.cc.CCItem.LINE_BREAK_CC_ITEM_TYPE};Un.prototype.removedFilteredActions=function(t){goog.array.removeAllIf(t,this.isFiltered_,this)};Un.prototype.isFiltered_=function(t){var o=!1;if(this.extensionFilterCCItems.contains(t.displayName))o=!0;else if(t.type===sync.cc.CCItem.SPLIT_CC_ITEM_TYPE){var i=t.displayName.substring(t.displayName.indexOf(" ")+1);o=this.extensionFilterCCItems.contains("<SPLIT> "+i)||this.extensionFilterCCItems.contains("<SPLIT>")}else t.type===sync.cc.CCItem.LINE_BREAK_CC_ITEM_TYPE&&(o=this.extensionFilterCCItems.contains("<ENTER>"));return o};var Lu=Un;sync.cc.CCCustomizer=Un;namespace("sync.actions");var Sa=function(t){sync.actions.AbstractAction.call(this,t)};goog.inherits(Sa,sync.actions.AbstractAction);Sa.Context=function({computeSelection:t,marker:o,markers:i,markerId:n,anchor:r}){this.computeSelection=t,this.markers=i,this.markerId=n,this.markerId||(this.markerId=o?o.getId():null),this.marker=o,this.anchor=r};Sa.prototype.actionPerformedFor=function(t,o){};Sa.prototype.isEnabledFor=function(t){return!0};var I=Sa;sync.actions.ActionWithContext=Sa;namespace("sync.view");var qo=function(t){goog.ui.ComboBoxItem.call(this,null,t),this.caption_=this.computeCaption_()};goog.inherits(qo,goog.ui.ComboBoxItem);qo.prototype.getCaption=function(){return this.caption_};qo.prototype.getSortRank=function(t){var o,i=this.caption_,n=this.getModel();return goog.string.caseInsensitiveEquals(n.displayName,t)||goog.string.caseInsensitiveEquals(i,t)?o=0:goog.string.caseInsensitiveStartsWith(i,t)?o=2:o=4,n.valid||(o+=1),o};qo.prototype.matches=function(t){var o=this.getModel();if(t!==""&&o&&o.isSplitEntry)return!1;var i=o.displayName,n=this.caption_+" "+i;return n.toUpperCase().indexOf(t.toUpperCase())!==-1};qo.prototype.handleMouseOut=function(t){goog.dom.getAncestorByClass(t.relatedTarget,goog.ui.MenuItemRenderer.CSS_CLASS)&&qo.superClass_.handleMouseOut.call(this,t)};qo.prototype.createDom=function(){qo.superClass_.createDom.call(this);var t=this.getContentElement();t.textContent=this.caption_;var o=this.getModel();o.valid||goog.dom.classlist.add(t,"invalid-cc-item"),o.isSplitEntry&&goog.dom.classlist.add(t,"top-cc-item")};qo.prototype.setHandleMouseEvents=function(t){};qo.prototype.computeCaption_=function(){var t=this.getModel(),o=t.displayName,i;if(t.isSplitEntry){var n=o.indexOf(" "),r=o.substr(0,n);r+=" ";var s=o.substr(n+1),a=sync.view.NodeRenderer.getRenderedText(s);a!==s?i=r+a:i=o}else i=sync.view.NodeRenderer.getRenderedText(o);return i};qo.prototype.setFormatFromToken=function(t){var o=this.getCaption(),i=this.getContentElement(),n=o.toLowerCase().indexOf(t);if(t==="")i.textContent=o;else if(n>=0){if(goog.dom.removeChildren(i),n!==0&&i.appendChild(document.createTextNode(o.substr(0,n))),t.length!==0){var r=document.createElement("b");r.textContent=o.substr(n,t.length),i.appendChild(r)}n+t.length!==o.length&&i.appendChild(document.createTextNode(o.substr(n+t.length)))}};var Fu=qo;sync.view.CCMenuItem=qo;namespace("sync.view");var Uu=class extends sync.react.Component{renderStyleGuideInfo_(t){var o=null;return t.linkDescriptors.length&&(o=sync.react.h("div",{className:"cc-info-box--links"},t.linkDescriptors.map(function(i){return sync.react.h("a",{href:i.target,key:i.target,className:"cc-info-box--link",target:"_blank"},i.linkText)}))),sync.react.h("div",null,sync.react.h("div",{className:"cc-info-box--styleguide",dangerouslySetInnerHTML:{__html:t.htmlContent}}),o)}render(){var t=this.props.ccItem,o=null;t.valid||(o=sync.react.h("div",{className:"cc-info-box--not-valid"},tr(msgs.ELEMENT_CANNOT_BE_INSERTED_)));var i=null;return t.action?i=sync.react.h("span",null,t.action.getDescription()):t.description?i=sync.react.h("span",null,t.description):i=this.props.info&&this.renderStyleGuideInfo_(this.props.info),!o&&!i?null:sync.react.h("div",null,o,i)}},Bu=Uu;sync.view.CCElementInfo=Uu;namespace("sync.cc");var Ts=function(){this.container_=null,this.data_=null,this.getElementInfo_=null,this.getElementInfoPromise_=null,this.currentItem_=null};Ts.prototype.setElementInfoProvider=function(t){this.getElementInfo_=t};Ts.prototype.render=function(t){this.container_=t};Ts.prototype.update=function(t){this.currentItem_=t,!!this.container_&&(this.data_||!this.getElementInfoPromise_&&this.getElementInfo_&&(this.getElementInfoPromise_=this.getElementInfo_(),this.getElementInfoPromise_.then(goog.bind(function(o){this.data_=o,this.showInfo_()},this))),this.showInfo_())};Ts.prototype.showInfo_=function(){if(this.currentItem_){var t=this.data_&&this.data_[this.currentItem_.displayName],o={ccItem:this.currentItem_,info:t};sync.react.render(sync.react.createElement(Bu,o),this.container_)}};Ts.prototype.unrender=function(){this.container_&&sync.react.unmountComponentAtNode(this.container_),this.currentItem_=null};var Hu=Ts;sync.cc.ContentCompletionInfoBox=Ts;namespace("sync.view");var at=function(){ua.call(this),this.getLabelInput().setLabel(tr(msgs.SEARCH_)),this.setUseDropdownArrow(!1),this.loadingItem_=null,this.noMatchEntry_=null,this.items_=[],this.mouseMovedSinceItemsAppeared_=!1,this.dispatchFirstItemAfterLoad_=!1};goog.inherits(at,ua);at.prototype.matchFunction_=function(t,o){return t.matches(o)};at.prototype.enterDocument=function(){at.superClass_.enterDocument.call(this),this.showMenu_(),this.getHandler().listen(this.getMenu().getElement(),goog.events.EventType.MOUSEMOVE,function(){this.mouseMovedSinceItemsAppeared_=!0}),this.getHandler().listen(this.getMenu().getElement(),goog.events.EventType.MOUSEOVER,function(t){this.mouseMovedSinceItemsAppeared_||t.stopPropagation()},!0)};at.prototype.dismiss=function(){};at.prototype.positionMenu=function(){};at.prototype.handleKeyEvent=function(t){var o;return t.keyCode===goog.events.KeyCodes.TAB?o=!0:t.keyCode===goog.events.KeyCodes.ESC?(o=!0,this.dispatchEvent(goog.ui.Component.EventType.DEACTIVATE)):t.keyCode===goog.events.KeyCodes.ENTER&&this.isLoading()?(this.dispatchFirstItemAfterLoad_=!0,o=!0):o=at.superClass_.handleKeyEvent.call(this,t),o};at.prototype.isLoading=function(){return this.loadingItem_!==null};at.prototype.setLoading=function(t){if(this.loadingItem_&&!t)this.removeItem(this.loadingItem_),this.loadingItem_=null;else if(this.loadingItem_===null&&t){var o=goog.dom.createDom("span","cc-loading-label",tr(msgs.LOADING_)+"...");this.loadingItem_=new goog.ui.ComboBoxItem(o),this.loadingItem_.setEnabled(!1),this.loadingItem_.setSticky(!0),this.addItem(this.loadingItem_)}};at.prototype.setItems=function(t){if(this.dispatchFirstItemAfterLoad_){this.dispatchFirstItemAfterLoad_=!1,t.length>0&&(this.dispatchEvent(new goog.ui.ItemEvent(goog.ui.Component.EventType.ACTION,this,t[0])),this.dismiss());return}this.setLoading(!1),this.items_=t,this.noMatchEntry_=this.createNoMatchEntry_(),this.removeAllItems();for(var o of t)this.addItem(o);this.addItem(this.noMatchEntry_),this.getLabelInput().getValue()&&this.handleInputChange_()};at.prototype.createNoMatchEntry_=function(){var t=new goog.ui.ComboBoxItem(tr(msgs.NO_ELEMENTS_AVAILABLE_));return t.setSticky(!0),t.setEnabled(!1),t.setVisible(!1),t};at.prototype.sortByRank_=function(t,o){var i=new goog.structs.Set,n={};t.forEach(function(s){var a=s.getSortRank(o);n[a]||(n[a]=[]),n[a].push(s),i.add(a)});var r=[];return i.getValues().sort().forEach(function(s){r=r.concat(n[s])}),r};at.prototype.handleInputChange_=function(){this.handleInputChange()};at.prototype.handleInputChange=function(){this.mouseMovedSinceItemsAppeared_=!1;var t=this.getTokenText_();this.setItemVisibilityFromToken_(t),this.setItemHighlightFromToken_(t),this.lastToken_=t,this.dispatchEvent(goog.ui.Component.EventType.CHANGE)};at.prototype.sortItems_=function(t){if(this.loadingItem_===null){var o=this.items_;t!==""&&(o=this.sortByRank_(o,t),o=goog.array.filter(o,function(r){return r.matches(t)}));for(var i=this.getMenu(),n=0;n<o.length;n++)i.addChildAt(o[n],n);i.addChild(this.noMatchEntry_)}};at.prototype.setItemVisibilityFromToken_=function(t){var o=!1,i=0;this.sortItems_(t);for(var n=0,r=this.menu_.getChildCount();n<r;n++){var s=this.menu_.getChildAt(n);if(s instanceof goog.ui.MenuSeparator)s.setVisible(o),o=!1;else if(s instanceof goog.ui.MenuItem){var a=s.isSticky()||this.matchFunction_(s,t);s.setVisible(!!a),o=a||o}else o=s.isVisible()||o;!(s instanceof goog.ui.MenuSeparator)&&s.isVisible()&&i++}this.setFormatFromToken_(t),i>1&&(this.noMatchEntry_.setVisible(!1),i-=1),this.visibleCount_=i};at.prototype.setFormatFromToken_=function(t){for(var o=0,i=this.menu_.getChildCount();o<i;o++){var n=this.menu_.getChildAt(o);n.isEnabled()&&n.isVisible()&&n.setFormatFromToken(t)}};at.prototype.setItemHighlightFromToken_=function(t){for(var o=0,i=this.menu_.getChildCount();o<i;o++){var n=this.menu_.getChildAt(o);if(n.isEnabled()&&this.matchFunction_(n,t)){this.menu_.setHighlightedIndex(o),n.isEnabled()&&n.setFormatFromToken(t);return}}this.menu_.setHighlightedIndex(-1)};var ju=at;sync.view.ContentCompletionList=at;goog.require("goog.functions");goog.require("goog.dom");goog.require("goog.events.EventTarget");goog.require("goog.string");goog.require("goog.style");goog.require("goog.events.EventTarget");goog.require("goog.events.EventHandler");namespace("sync.cc");var vo=function(){goog.events.EventTarget.call(this),this.infoBox_=new Hu,this.ccDropdownWidth_=300,this.eventHandler_=new goog.events.EventHandler(this)};goog.inherits(vo,goog.events.EventTarget);vo.prototype.setElementInfoProvider=function(t){this.infoBox_.setElementInfoProvider(t)};vo.prototype.compareCCItems_=function(t,o){return t.getModel().sortPriority===o.getModel().sortPriority?t.getModel().valid===o.getModel().valid?t.getCaption().toLowerCase()<o.getCaption().toLowerCase()?-1:1:t.getModel().valid===!0?-1:1:o.getModel().sortPriority-t.getModel().sortPriority};vo.prototype.setCCItems=function(t){var o=t.map(function(i){return new Fu(i)});goog.array.stableSort(o,goog.bind(this.compareCCItems_,this)),this.ccList.setItems(o),this.ccList.getMenu().setHighlightedIndex(0)};vo.prototype.positionInfoBox_=function(t,o){var i=5,n=150,r=300;if(o.width<this.ccDropdownWidth_+2*(n+2*i))return null;var s=o.width-t.x-this.ccDropdownWidth_-2*i,a=t.x-2*i,l,c=null;s>=a?(c="right",l=Math.min(r,s)):(c="left",l=Math.min(r,a));var d=new goog.math.Size(l,250);return{side:c,size:d}};vo.prototype.renderInfoBox_=function(t){var o;if(goog.dom.classlist.contains(t.lastElementChild,"cc-info"))o=t.lastElementChild;else{var i=parseInt(t.style.left.replace("px",""),10),n=parseInt(t.style.top.replace("px",""),10),r=new goog.math.Coordinate(i,n),s=goog.dom.getViewportSize(),a=this.positionInfoBox_(r,s);a&&(o=goog.dom.createDom("div","cc-info"),o.tabIndex=0,o.style[a.side]="-"+a.size.width+"px",o.style.width=a.size.width+"px",o.style.maxHeight=a.size.height+"px",goog.dom.appendChild(t,o))}o&&this.infoBox_.render(o)};vo.prototype.fixupPosition_=function(t,o,i){var n=o.width,r=o.height,s=t.top+t.height,a=t.left;return s>i.bottom-r&&(s=Math.min(i.bottom,s)-r),s<i.top&&(s=i.top),i.right-i.left<a+n&&(a=Math.max(0,a-n)+"px"),new goog.math.Coordinate(a,s)};vo.prototype.bindInfoBox_=function(t){var o=null;t.getMenu().listen(goog.ui.Component.EventType.HIGHLIGHT,function(i){this.renderInfoBox_(t.getElement().parentElement),this.infoBox_.update(i.target.getModel()),o=i.target},!1,this),t.getMenu().listen(goog.ui.Component.EventType.UNHIGHLIGHT,function(i){i.target===o&&this.infoBox_.unrender()},!1,this)};vo.prototype.show=function(t){var o=t.focus.getCaretRect();this.showAtAnchor(o)};vo.prototype.showAtAnchor=function(t){var o=new ju;o.setLoading(!0),this.ccList=o;var i="content-completion",n=goog.dom.createDom("div",i);n.style.setProperty("width",this.ccDropdownWidth_+"px"),goog.dom.appendChild(document.body,n),o.listen(goog.ui.Component.EventType.ACTION,function(l){this.dispatchEvent(new sync.cc.CCSelectedEvent(sync.cc.EventType.CCITEM_CHOSEN,l.item.getModel())),this.dispose(),l.preventDefault()},!1,this),o.listen(goog.ui.Component.EventType.DEACTIVATE,this.nothingChosen_,!1,this),this.eventHandler_.listen(document,[goog.events.EventType.MOUSEDOWN,goog.events.EventType.TOUCHSTART],goog.bind(function(l){goog.dom.contains(n,l.target)||this.nothingChosen_()},this)),this.eventHandler_.listen(window,"wheel",goog.bind(function(l){goog.dom.getAncestorByClass(l.target,i)||this.nothingChosen_()},this)),o.render(n);var r=goog.style.getSize(n),s=goog.style.getVisibleRectForElement(n),a=this.fixupPosition_(t,r,s);goog.style.setPosition(n,a),this.bindInfoBox_(o),o.getInputElement().focus()};vo.prototype.nothingChosen_=function(){this.dispatchEvent(new sync.cc.CCSelectedEvent(sync.cc.EventType.NOTHING_CHOSEN)),this.dispose()};vo.prototype.disposeInternal=function(){this.eventHandler_.dispose(),goog.dom.removeNode(this.ccList.getElement().parentElement),this.ccList.dispose(),vo.superClass_.disposeInternal.call(this)};sync.cc.EventType={CCITEM_CHOSEN:"ccselected",NOTHING_CHOSEN:"noccselected"};sync.cc.CCFocusEvent=function(t,o){this.type=t,this.selection=o};sync.cc.CCSelectedEvent=function(t,o){this.type=t,this.ccItem=o};sync.cc.CCItem=function(t,o,i,n,r,s,a,l){this.displayName=t,this.type=o||0,this.valid=!0,this.description=i,this.sortPriority=n||0,this.id=this.displayName+"-"+this.type,this.actionId=r,this.alias=s,this.useActionName=a,this.elementProxy=l};sync.cc.CCItem.prototype.action=null;sync.cc.CCItem.prototype.isSplitEntry=!1;sync.cc.CCItem.fromJson=function(t){var o=t.elementProxy?sync.cc.CCItem.fromJson(t.elementProxy):null;return new sync.cc.CCItem(t.displayName,t.type,t.description,t.sortPriority,t.actionId,t.alias,t.useActionName,o)};sync.cc.CCItem.prototype.setValid=function(t){this.valid=t,this.elementProxy&&(this.elementProxy.valid=t)};sync.cc.CCItem.SPLIT_CC_ITEM_TYPE=6;sync.cc.CCItem.LINE_BREAK_CC_ITEM_TYPE=0;sync.cc.CCItem.ELEMENT_CC_ITEM_TYPE=0;sync.cc.CCItem.isSplitItem_=function(t,o){var i=!1;return t?t.type===sync.cc.CCItem.SPLIT_CC_ITEM_TYPE&&(i=!0):o.indexOf(" ")!==-1&&(i=!0),i};var Gl=vo;sync.cc.CodeCompletionDropdown=vo;namespace("sync.actions");var At=function(t,o,i,n,r,s){I.call(this,r),this.controller=i,this.actionsManager_=t,this.selectionManager_=o,this.notificationsManager_=n,this.readOnlyStatus_=s,this.shortcutForDisplay_=!1,this.callsCallback=!0};goog.inherits(At,I);At.prototype.getProposals=goog.abstractMethod;At.prototype.getCCDropDown=goog.abstractMethod;At.prototype.itemChosen=goog.abstractMethod;At.createCCItems=function(t){return t.map(sync.cc.CCItem.fromJson)};At.prototype.getSelectionManager=function(){return this.selectionManager_};At.prototype.actionPerformed=function(t){if(this.selectionManager_.evalSelectionFunction(sync.util.isInReadOnlyContent)===!0)this.notificationsManager_.showWarning(tr(msgs.READ_ONLY_CONTENT_)+": "+tr(msgs.USE_EDIT_REFERENCE_ACTION_,{"0":tr(msgs.EDIT_REFERENCE_)})),t&&t();else{var o=new I.Context({computeSelection:()=>this.selectionManager_.getSelection()});this.actionPerformedFor(t,o)}};At.prototype.actionPerformedFor=function(t,o){var i=o.computeSelection();this.selectionManager_.scrollSelectionIntoView(i);var n=this.getCCDropDown();this.registerListeners_(n,t,i);var r=this.actionsManager_;if(this.getProposals(i).then(goog.bind(this.replaceIncompatibleActionsWithElements_,this,r)).then(goog.bind(n.setCCItems,n)).thenCatch(t||goog.nullFunction),o.anchor){var s=goog.style.getBounds(o.anchor);n.showAtAnchor(s)}else n.show(i)};At.prototype.replaceIncompatibleActionsWithElements_=function(t,o){return o.map(function(i){var n=i;if(i.actionId&&i.elementProxy){var r=t.getActionById(i.actionId);r&&goog.isFunction(r.isCompatible)&&!r.isCompatible()&&(n=i.elementProxy)}return n})};At.prototype.registerListeners_=function(t,o,i){var n=i.save();goog.events.listen(t,sync.cc.EventType.CCITEM_CHOSEN,goog.bind(function(r){i=n.restore(),this.selectionManager_.setSelection(i),this.executeAction(r,o,n)},this)),goog.events.listen(t,sync.cc.EventType.NOTHING_CHOSEN,goog.bind(function(){this.selectionManager_.restoreSelection(),o&&o()},this))};At.prototype.executeAction=function(t,o,i){var n=t.ccItem;n.action?n.action.actionPerformed(o):n.actionId?this.ccReplacementActionSelected_(n,o):this.ccElementSelected(n,o,i)};At.prototype.ccReplacementActionSelected_=function(t,o){var i=this.actionsManager_.getActionById(t.actionId);i.actionPerformed(o)};At.prototype.ccElementSelected=function(t,o,i){var n={docId:this.controller.docId,displayName:t.displayName,type:t.type||0,valid:t.valid,action:t.action},r=i&&i.restore();r=r||this.selectionManager_.getSelection(),r.extend(n);var s=this;this.itemChosen(n,function(a,l,c){try{s.controller.applyUpdate_(c)}finally{o&&o()}})};At.prototype.isEnabled=function(){return!this.readOnlyStatus_.isReadOnly()&&!this.selectionManager_.evalSelectionFunction(sync.util.isInReadOnlyContent)&&this.isEnabledInternal()};At.prototype.isEnabledInternal=function(){};At.prototype.getShortcutForDisplay=function(){return this.shortcutForDisplay_};At.prototype.setShortcutForDisplay=function(t){this.shortcutForDisplay_=new J(t)};var io=At;sync.actions.CCAction=At;namespace("sync.actions");var wi=function(t,o,i,n,r,s,a){io.call(this,t,o,i,n.getProblemReporter(),null,r),this.widgets=n,this.getElementInfo_=s,this.ccCustomizer_=a};goog.inherits(wi,io);wi.prototype.getProposals=function(){var t={docId:this.controller.docId};return this.selectionManager_.getSelection().extend(t),sync.rest.callAsync("RESTContentCompletionManager.getProposedElementsForSurround",t).then(io.createCCItems).then(goog.bind(this.customizeItems_,this))};wi.prototype.customizeItems_=function(t){return this.ccCustomizer_.addExtensionActions(t),this.ccCustomizer_.removedFilteredActions(t),t};wi.prototype.itemChosen=function(t,o){var i=sync.rest.getSyncMethod("RESTContentCompletionManager.surroundWithElement");i(sync.util.extend(t,{$callback:o}))};wi.prototype.getDisplayName=function(){return tr(msgs.SURROUND_WITH_)+"..."};wi.prototype.isEnabledInternal=function(){var t=this.selectionManager_.getSelection();return t.hasXMLContent()};wi.prototype.getCCDropDown=function(){var t=this.widgets.createSurroundWithDropdown();return t.setElementInfoProvider(this.getElementInfo_),t};wi.prototype.getSmallIcon=function(){return sync.util.image.getImageUrl("/images/SurroundWith16.png",sync.util.getHdpiFactor())};wi.prototype.getDescription=function(){return tr(msgs.SURROUND_WITH_ELEMENT_)};var Vu=wi;sync.actions.SurroundWithElementAction=wi;goog.require("goog.log");namespace("sync.actions");var yr=function(t,o,i,n,r,s,a){io.call(this,t,o,i,n.getProblemReporter(),"enter",r),this.widgets=n,this.getElementInfo_=s,this.allElementsPromise=sync.rest.callAsync("RESTContentCompletionManager.getAllElements",{docId:i.docId}).then(function(l){return l.map(function(c){var d=sync.cc.CCItem.fromJson(c);return d.setValid(!1),d})}),this.ccCustomizer_=a};goog.inherits(yr,io);yr.prototype.getProposals=function(){var t={docId:this.controller.docId};this.selectionManager_.getSelection().extend(t);var o=sync.rest.callAsync("RESTContentCompletionManager.getProposedElementsForEnter",t).then(io.createCCItems);return goog.Promise.all([o,this.allElementsPromise]).then(goog.bind(this.getCCItemsList_,this))};yr.prototype.getCCItemsList_=function(t){var o=t[0],i=o.map(function(l){return l.id}),n=new goog.structs.Set(i),r=t[1],s=goog.array.filter(r,function(l){return!n.contains(l.id)});this.ccCustomizer_.addExtensionActions(o);var a=o.concat(s);return this.ccCustomizer_.removedFilteredActions(a),a};yr.prototype.itemChosen=function(t,o){var i=sync.rest.getSyncMethod("RESTContentCompletionManager.contentCompletion");i(sync.util.extend(t,{$callback:o}))};yr.prototype.getCCDropDown=function(){var t=this.widgets.createEnterDropdown();return t.setElementInfoProvider(this.getElementInfo_),t};yr.prototype.isEnabledInternal=function(){var t=this.selectionManager_.getSelection();return!t.hasXMLContent()};var Wu=yr;sync.actions.Enter=yr;namespace("sync.actions");var sn=function(t,o,i,n,r,s,a){io.call(this,t,o,i,n.getProblemReporter(),null,r),this.widgets=n,this.getElementInfo_=s,this.ccCustomizer_=a};goog.inherits(sn,io);sn.prototype.getProposals=function(t){var o={docId:this.controller.docId},i=t.focus.toRelativeContentPosition();return i.extend(o),sync.rest.callAsync("RESTContentCompletionManager.getProposedElementsForInsert",o).then(io.createCCItems).then(n=>this.customizeItems_(n))};sn.prototype.customizeItems_=function(t){return this.ccCustomizer_.addExtensionActions(t),this.ccCustomizer_.removedFilteredActions(t),t};sn.prototype.ccElementSelected=function(t,o,i){var n={docId:this.controller.docId,displayName:t.displayName,type:t.type},r=i.restore().focus.toRelativeContentPosition();r.extend(n);var s=sync.rest.getSyncMethod("RESTContentCompletionManager.insertElement"),a=s(n);try{this.controller.applyUpdate_(a)}catch(l){console.error(l)}o&&o()};sn.prototype.getDisplayName=function(){return tr(msgs.INSERT_ELEMENT_)+"..."};sn.prototype.getCCDropDown=function(){var t=this.widgets.createInsertElementDropdown();return t.setElementInfoProvider(this.getElementInfo_),t};sn.prototype.isEnabledInternal=function(){var t=this.selectionManager_.getSelection();return!t.hasXMLContent()};sn.prototype.getDescription=function(){return tr(msgs.INSERT_ELEMENT_)};var Di=sn;sync.actions.InsertElementAction=sn;namespace("sync.actions");var Ni=function(t,o,i,n,r,s){io.call(this,t,o,i,n.getProblemReporter(),null,r),this.widgets=n,this.getElementInfo_=s};goog.inherits(Ni,io);Ni.prototype.getProposals=function(t){var o=t||this.selectionManager_.getSelection(),i=o.start.toRelativeContentPosition(),n=o.end.toRelativeContentPosition(),r={docId:this.controller.docId,startReferenceNodeId:i.nodeId,startSentinelType:i.sentinelType,startDistance:i.distance,endReferenceNodeId:n.nodeId,endSentinelType:n.sentinelType,endDistance:n.distance};return sync.rest.callAsync("RESTContentCompletionManager.getProposedElementsForRename",r).then(io.createCCItems)};Ni.prototype.itemChosen=function(t,o){var i=sync.rest.getSyncMethod("RESTContentCompletionManager.renameElement");i(sync.util.extend(t,{$callback:o}))};Ni.prototype.getDisplayName=function(){return tr(msgs.RENAME_ELEMENT_)+"..."};Ni.prototype.getCCDropDown=function(){var t=this.widgets.createRenameDropdown();return t.setElementInfoProvider(this.getElementInfo_),t};Ni.prototype.isEnabledInternal=function(){var t=this.selectionManager_.getSelection();return t.getNodeAtSelection()||t.isEmpty()};Ni.prototype.isEnabledFor=function(t){return!this.readOnlyStatus_.isReadOnly()&&!sync.util.isInReadOnlyContent.apply(t.computeSelection())};Ni.prototype.getSmallIcon=function(){return sync.util.image.getImageUrl("/images/RenameElement16.png",sync.util.getHdpiFactor())};Ni.prototype.getDescription=function(){return tr(msgs.RENAME_ELEMENT_)};var Ku=Ni;sync.actions.RenameElementAction=Ni;namespace("sync.actions");var bs=function(t,o,i,n,r,s,a){Di.call(this,t,o,i,n,r,s,a)};goog.inherits(bs,Di);bs.prototype.actionPerformedFor=function(t,o){var i=o.computeSelection().getNodeAtSelection();o.computeSelection=()=>sync.api.Selection.createEmptySelectionInNode(i,"after"),bs.superClass_.actionPerformedFor.call(this,t,o)};bs.prototype.getDisplayName=function(){return tr(msgs.APPEND_CHILD_)+"..."};bs.prototype.getDescription=function(){return""};var Gu=bs;sync.actions.AppendChildAction=bs;namespace("sync.actions");var _r=function(t,o,i,n,r,s,a){Di.call(this,t,o,i,n,r,s,a)};goog.inherits(_r,Di);_r.prototype.actionPerformedFor=function(t,o){var i=o.computeSelection().getNodeAtSelection();i&&(o.computeSelection=()=>this.selectionManager_.createEmptySelectionAfterNode(i)),_r.superClass_.actionPerformedFor.call(this,t,o)};_r.prototype.getDisplayName=function(){return tr(msgs.INSERT_AFTER_)+"..."};_r.prototype.getDescription=function(){return""};_r.prototype.isEnabledFor=function(t){var o=t.computeSelection();return!this.readOnlyStatus_.isReadOnly()&&!sync.util.isInReadOnlyContent.apply(o)&&o.getNodeAtSelectionStart().parentNode.nodeType!==Node.DOCUMENT_NODE};var qu=_r;sync.actions.InsertElementAfterAction=_r;namespace("sync.actions");var vr=function(t,o,i,n,r,s,a){Di.call(this,t,o,i,n,r,s,a)};goog.inherits(vr,Di);vr.prototype.actionPerformedFor=function(t,o){var i=o.computeSelection().getNodeAtSelection();i&&(o.computeSelection=()=>this.selectionManager_.createEmptySelectionBeforeNode(i)),vr.superClass_.actionPerformedFor.call(this,t,o)};vr.prototype.getDisplayName=function(){return tr(msgs.INSERT_BEFORE_)+"..."};vr.prototype.getDescription=function(){return""};vr.prototype.isEnabledFor=function(t){var o=t.computeSelection();return!this.readOnlyStatus_.isReadOnly()&&!sync.util.isInReadOnlyContent.apply(o)&&o.getNodeAtSelectionStart().parentNode.nodeType!==Node.DOCUMENT_NODE};var Xu=vr;sync.actions.InsertElementBeforeAction=vr;namespace("sync.actions");var ql=function(t,o,i){sync.actions.AbstractAction.call(this,t),this.readOnlyStatus_=o,this.controller=i};goog.inherits(ql,sync.actions.AbstractAction);ql.prototype.actionPerformed=function(t){var o={docId:this.controller.docId};sync.select.getSelection().extend(o);var i=this.controller,n=sync.rest.getSyncMethod("RESTContentCompletionManager.splitElement");n(sync.util.extend(o,{$callback:function(r,s,a){try{i.applyUpdate_(a)}finally{typeof t=="function"&&t()}}}))};ql.prototype.isEnabled=function(){return!this.readOnlyStatus_.getReadOnlyState().readOnly&&!sync.select.evalSelectionFunction(sync.util.isInReadOnlyContent)};var zu=ql;sync.actions.SplitElementAtCaretAction=ql;namespace("sync.actions");var Ta=function(t,...o){sync.actions.AbstractAction.call(this,t),this.actionList=o};goog.inherits(Ta,sync.actions.AbstractAction);Ta.prototype.actionPerformed=function(...t){var o=this.getEnabledAction_();o!=null&&o.actionPerformed.apply(o,t)};Ta.prototype.isEnabled=function(){return this.getEnabledAction_()!=null};Ta.prototype.getEnabledAction_=function(){for(var t=null,o=0;o<this.actionList.length;o++)if(this.actionList[o].isEnabled()){t=this.actionList[o];break}return t};var kg=Ta;sync.actions.CompoundAction=Ta;namespace("sync.ctrl");var Ao=function(t,o,i,n,r){goog.events.EventTarget.call(this),this.isUndoEnabled_=!!n,this.isRedoEnabled_=!!r,this.controller=t,this.readOnlyStatus=o,this.dirtyStatusEventTarget_=i,goog.events.listen(t,M.EventType.MODEL_CHANGED,function(s){this.applyUpdate(s.docUpdate.undoState)},!0,this)};goog.inherits(Ao,goog.events.EventTarget);Ao.prototype.isUndoEnabled=function(){return this.isUndoEnabled_&&!this.readOnlyStatus.isReadOnly()};Ao.prototype.isRedoEnabled=function(){return this.isRedoEnabled_&&!this.readOnlyStatus.isReadOnly()};Ao.prototype.applyUpdate=function(t){if(t){var o=this.isUndoEnabled_!=t[0]||this.isRedoEnabled_!=t[1];this.isUndoEnabled_=t[0],this.isRedoEnabled_=t[1],o&&this.dispatchEvent(new Ao.UndoStateChangedEvent(this.isUndoEnabled_,this.isRedoEnabled_))}};Ao.prototype.undo=function(t){var o=t.focus.toRelativeContentPosition(),i={id:this.controller.docId};return o&&o.extend(i),sync.rest.callAsync("RESTDocumentControllers.documentController.undo",i).then(goog.bind(this.handleResult_,this)).thenCatch(sync.util.error.reloadPage)};Ao.prototype.handleResult_=function(t){this.controller.applyUpdate_(t),t.isEditorModified||this.dirtyStatusEventTarget_.dispatchEvent(new sync.api.EditingSupport.DirtyStatusChangedEvent(!1))};Ao.prototype.redo=function(t){var o=t.focus.toRelativeContentPosition(),i={id:this.controller.docId};return o&&o.extend(i),sync.rest.callAsync("RESTDocumentControllers.documentController.redo",i).then(goog.bind(this.handleResult_,this)).thenCatch(sync.util.error.reloadPage)};Ao.EventType={UNDO_STATE_CHANGED:"undo_state_changed"};Ao.UndoStateChangedEvent=function(t,o){this.undoState=t,this.redoState=o};Ao.UndoStateChangedEvent.prototype.type=Ao.EventType.UNDO_STATE_CHANGED;var Cd=Ao;sync.ctrl.UndoManager=Ao;namespace("sync.select");var He=function(t){this.options_=k.getInstance(),this.xmlModel_=t};He.prototype.fixupBrowserSelectionOnKey=function(t,o,i){var n=t;if(t&&i&&i.type.indexOf("key")!==-1){var r=this.fixupBrowserCaret_(t.focus,o.focus,i);r&&(t.isEmpty()?n=new sync.select.Selection(r):t.isBackwards()?n=new sync.select.Selection(r,t.end,t.end,r):n=new sync.select.Selection(t.anchor,r))}return n};He.prototype.fixupBrowserCaret_=function(t,o,i){if(this.isHome_(i))return this.fixupCaretOnHome_(t,o);if(this.isEnd_(i))return this.fixupCaretOnEnd_(t,o);var n=null;if(this.isUpDown_(i)){var r=this.fixupPositionNearTableCell(t);if(r){if(o.toHTMLPosition().equals(r)){var s=new ce(r);s.next(),r=s.toHTMLPosition()}n=r}}return n};He.prototype.isUpDown_=function(t){return t?t.keyCode===goog.events.KeyCodes.DOWN||t.keyCode===goog.events.KeyCodes.UP:!1};He.prototype.isHome_=function(t){return t?t.keyCode===goog.events.KeyCodes.HOME||t.metaKey&&t.keyCode===goog.events.KeyCodes.LEFT:!1};He.prototype.fixupCaretOnHome_=function(t,o){for(var i=new ce(t),n=i.getContentInformation(),r=!1;n.isOnStartTag();){var s=p.getSentinelNode(n.tagElementId,f.BEFORE);if(goog.dom.classlist.contains(s,"tag-inline"))break;r=!0,i.next(),n=i.getContentInformation()}var a=i.toHTMLPosition(),l=o.toHTMLPosition();return p.comparePositions(a.container,a.offset,l.container,l.offset)<0?r&&(t=a):t=l,t};He.prototype.isEnd_=function(t){return t?t.keyCode===goog.events.KeyCodes.END||t.metaKey&&t.keyCode===goog.events.KeyCodes.RIGHT:!1};He.prototype.fixupCaretOnEnd_=function(t,o){for(var i=new ce(t),n=i.getContentInformationBefore(),r=!1;n&&n.isOnEndTag();){var s=p.getSentinelNode(n.tagElementId,f.AFTER);if(goog.dom.classlist.contains(s,"tag-inline"))break;r=!0,i.prev(),n=i.getContentInformationBefore()}if(!r){var a=p.getStaticContentAncestor(t.container);if(a){var l=!p.isStaticContentBefore(a);l&&(r=!0)}}var c=i.toHTMLPosition(),d=o.toHTMLPosition();return p.comparePositions(c.container,c.offset,d.container,d.offset)>0?r&&(t=c):t=d,t};He.prototype.selectionSkipInvisibleSentinels_=function(t){var o=this.skipInvisibleSentinels_(t.start),i=this.skipInvisibleSentinels_(t.end),n=new sync.select.Selection(o,i);return t.isBackwards()&&(n=n.inverted()),n};He.prototype.selectionSkipPositionsBetweenTableCells_=function(t,o){var i=this.fixupPositionNearTableCell(t.focus,o);return i&&(t=new sync.select.Selection(i)),t};He.prototype.fixupPositionNearTableCell=function(t,o){var i=null,n=sync.model.XmlDom.getContainingXmlNode(o||t.container),r=n&&(n.tagName===String(goog.dom.TagName.TD)||n.tagName===String(goog.dom.TagName.TH));return r&&(i=this.fixupPositionInsideTableCell_(t,n)),i};He.prototype.fixupPositionInsideTableCell_=function(t,o){var i=null,n=p.fromHTMLPosition(t),r=n.getContentInformation(),s=h.getIdOfXmlNode(o);if(r){if(!r.isOnText())if(r.isOnStartTag()){var a=r.getNodeOfTag().getHtmlNode();if(!n.getContentInformationBefore().isOnText())if(a!==o){let c=new sync.position.RelativeContentPosition(s,f.AFTER,0);i=p.positionBefore(c.toHTMLPosition())}else{var l=new sync.position.RelativeContentPosition(s,f.BEFORE,0);i=l.toHTMLPosition()}}else{let c=new sync.position.RelativeContentPosition(s,f.AFTER,0);i=p.positionBefore(c.toHTMLPosition())}}return i};He.prototype.skipInvisibleSentinels_=function(t){var o=p.fromHTMLPosition(t),i=o.getContentInformation();if(this.isEntityEndSentinel_(i)&&this.isSentinelInvisible_(i))o.next();else for(;this.shouldSkipSentinelBefore_(o);)o.prev();return o.toHTMLPosition()};He.prototype.shouldSkipSentinelBefore_=function(t){var o=t.getContentInformationBefore(),i=!1;return o&&!o.isOnText()&&(i=this.isSentinelInvisible_(o)&&!this.isEntityEndSentinel_(o)),i};He.prototype.isEntityEndSentinel_=function(t){var o=!1;if(t.isOnEndTag()){var i=this.xmlModel_.getXmlNodeById(t.tagElementId);sync.model.XmlDom.isEntity(i)&&(o=!0)}return o};He.prototype.isSentinelInvisible_=function(t){var o=t.isOnStartTag()?f.BEFORE:f.AFTER,i=p.getSentinelNode(t.tagElementId,o),n=!1;if(goog.dom.isElement(i)){var r=this.xmlModel_.getXmlNodeById(t.tagElementId),s;this.options_.getOption(S.SENTINELS_DISPLAY_MODE)==="no-tags"?s=goog.dom.classlist.contains(i,"tag-min"):s=goog.dom.dataset.has(r,"noTags");var a=p.getCssContent(r)||p.hasStaticContent(r,t.type);n=s&&!a&&goog.dom.classlist.contains(i,"tag-inline")}return n};He.prototype.fixupBrowserSelectionOnMouse=function(t,o){var i;if(t.isEmpty()){i=this.selectionSkipPositionsBetweenTableCells_(t,o.target);var n=this.fixupPositionInStaticContent_(i.focus);i=new sync.select.Selection(n)}else if(i=He.fixupSelectionInStaticContent(t),!i){var r=this.fixupPositionInStaticContent_(t.start),s=this.fixupPositionInStaticContent_(t.end);i=new sync.select.Selection(r,s),t.isBackwards()&&(i=i.inverted())}return(this.isCloseToCaret_(o.clientX,o.clientY,i.focus)||!i.isEmpty()&&goog.userAgent.IE)&&(i=this.selectionSkipInvisibleSentinels_(i)),i};He.prototype.isCloseToCaret_=function(t,o,i){var n=i.getCaretRect();return n.width<n.height&&n.top+n.height+10>o&&o>n.top-10&&Math.abs(t-n.left)<10};He.prototype.fixupPositionInStaticContent_=function(t){var o=t,i=p.getPositionRelativeToContent(t);return(i!==0||this.isInsideEmptyElement_(t))&&(o=this.fixupTowardsInside(t)),o};He.prototype.isInsideEmptyElement_=function(t){var o=p.fromHTMLPosition(t),i=o.toRelativeContentPosition();if(i.sentinelType===f.BEFORE&&i.distance===0){o.next();var n=o.toRelativeContentPosition();return n.sentinelType===f.AFTER&&n.nodeId===i.nodeId}return!1};He.prototype.fixupTowardsInside=function(t){return p.fromHTMLPosition(t).toHTMLPosition()};He.fixupSelectionInStaticContent=function(t){var o=t.start,i=t.end,n=null;if(!o.equals(i)){var r=new ce(o),s=new ce(i);if(r.equals(s)){var a=o,l=i;p.getPositionRelativeToContent(o)<0?(r.prev(),a=r.toHTMLPosition(),l=s.toHTMLPosition()):p.getPositionRelativeToContent(i)>0&&(s.next(),a=r.toHTMLPosition(),l=s.toHTMLPosition()),n=new sync.select.Selection(a,l,t.isBackwards()?l:a,t.isBackwards()?a:l)}}return n};var Sd=He;sync.select.SelectionFixUps=He;goog.require("goog.dom");goog.require("goog.userAgent");goog.require("goog.string");goog.require("goog.log");namespace("sync.actions");var Xl=function(t,o){I.call(this,o),this.selectionManager=t};goog.inherits(Xl,I);Xl.prototype.cleanupCopyDiv=function(t){t.blur(),goog.dom.removeNode(t),this.selectionManager.restoreSelection()};Xl.prototype.createEditableDivInView=function(){return goog.dom.createDom("div",{style:"opacity: 0; top: 0px; left: 0px; position: fixed; whitespace: pre;",contentEditable:!0})};var zl=Xl;sync.actions.ClipboardAction=Xl;namespace("sync.select");var Lg=function(t,o,i,n,r){t&&(this.type=t,this.selection=o,this.fake=n,this.selectionChunks=i,this.scrollIntoView=r)};Lg.prototype.type=sync.api.SelectionManager.EventType.SELECTION_CHANGED;var Yl=Lg;sync.select.SelectionChangedEvent=Lg;namespace("sync.util");sync.util.TableUtil={};sync.util.TableUtil.getSurroundingTableElement=function(t){return goog.dom.getAncestor(t,sync.util.TableUtil.isTableElement,!0)};sync.util.TableUtil.getParentTableElement=function(t){var o=h.getInstance().getXmlNodeById(t);return sync.util.TableUtil.getSurroundingTableElement(o)};sync.util.TableUtil.getSurroundingCellElement=function(t,o){return goog.dom.getAncestor(t,function(i){return sync.util.TableUtil.isTableCellElement(i)&&(!o||sync.util.TableUtil.isCellFromTable(i,o))},!0)};sync.util.TableUtil.isTableElement=function(t){return t.nodeName===String(goog.dom.TagName.TABLE)};sync.util.TableUtil.isTableCellElement=function(t){return t.nodeName===String(goog.dom.TagName.TD)||t.nodeName===String(goog.dom.TagName.TH)};sync.util.TableUtil.isCellFromTable=function(t,o){return sync.util.TableUtil.getSurroundingTableElement(t)===o};sync.util.TableUtil.getFullySelectedTableNode=function(t){var o=null;if(t&&t.length>0){var i=h.getInstance().getXmlNodeById(t[0]),n=h.getInstance().getXmlNodeById(t[t.length-1]);if(i===n)o=i;else{var r=sync.model.XmlDom.getPreviousSibling(i),s=sync.model.XmlDom.getNextSibling(n);!sync.model.XmlDom.isXmlElement(r)&&!sync.model.XmlDom.isXmlElement(s)&&(o=goog.dom.findCommonAncestor(i,n))}}return o};var bR=sync.util.TableUtil;namespace("sync.select");var an=function(){};an.prototype.extendSelection=function(t,o,i){var n=null,r=sync.util.TableUtil.getSurroundingCellElement(o,i);if(r){var s=sync.util.TableUtil.getSurroundingCellElement(t,i);if(s&&s!==r){let a=h.getIdOfXmlNode(s),l=h.getIdOfXmlNode(r);n=new z(a,l)}}return n};an.prototype.getCellId_=function(t){var o=null;if(t){var i=p.getSentinelParentId(t);if(i){var n=h.getInstance().getXmlNodeById(i);sync.util.TableUtil.isTableCellElement(n)&&(o=i)}}return o};an.prototype.isRightClickInsideTableSelection=function(t,o){var i=!1;if((t.isButton(goog.events.BrowserEvent.MouseButton.RIGHT)||t.type===goog.events.EventType.CONTEXTMENU)&&o instanceof z)for(var n=o,r=n.getSelectedCells(),s=0;s<r.length;s++){var a=r[s];if(a){var l=h.getInstance().getXmlNodeById(r[s]);if(l===t.target||goog.dom.contains(l,t.target)){i=!0;break}}}return i};an.prototype.isTripleClickInsideCell=function(t){var o=!1;if(t.getBrowserEvent().detail===3&&t.isButton(goog.events.BrowserEvent.MouseButton.LEFT)){var i=t.target;if(i){var n=sync.util.TableUtil.getSurroundingCellElement(t.target);n&&(o=!0)}}return o};an.prototype.isShiftClickInsideTable=function(t){var o=!1;return t.target&&t.shiftKey&&t.isButton(goog.events.BrowserEvent.MouseButton.LEFT)&&sync.util.TableUtil.getSurroundingTableElement(t.target)&&(o=!0),o};an.prototype.getExtendSelectionOnShiftClick=function(t,o){var i=null,n;if(o instanceof z){var r=o;n=r.getAnchorCellId()}else n=p.getNodeIdAt(o.anchor);var s=h.getInstance().getXmlNodeById(n),a=goog.dom.findCommonAncestor(s,t.target);if(a){var l=sync.util.TableUtil.getSurroundingTableElement(a);l&&(i=this.extendSelection(s,t.target,l))}return i};an.prototype.isClickInsideCellSentinel=function(t){var o=!1;if(t.isButton(goog.events.BrowserEvent.MouseButton.LEFT)){var i=p.getSentinelAncestor(t.target);if(i&&goog.dom.classlist.contains(i,"tag-full")){var n=p.getSentinelParentId(i),r=h.getInstance().getXmlNodeById(n);o=sync.util.TableUtil.isTableCellElement(r)}}return o};an.prototype.isTableSelectionEvent=function(t,o){return sync.util.TableUtil.getSurroundingTableElement(t.target)!==null&&(this.isShiftClickInsideTable(t)||this.isRightClickInsideTableSelection(t,o)||this.isTripleClickInsideCell(t)||this.isClickInsideCellSentinel(t))};var Yu=an;sync.select.TableSelectionHandler=an;namespace("sync.events");var Er=function(t){goog.events.EventTarget.call(this),this.elem_=t,this.drag_=!1,this.lastClickEvent_=null,this.delay_=new goog.async.Delay(this.triggerEvent_,250,this),this.eventHandler=new goog.events.EventHandler(this),this.eventHandler.listen(t,goog.events.EventType.MOUSEDOWN,this.onMouseDown_),this.eventHandler.listen(t,goog.events.EventType.CLICK,this.onClick_)};goog.inherits(Er,goog.events.EventTarget);Er.prototype.triggerEvent_=function(){this.dispatchEvent(this.lastClickEvent_)};Er.prototype.onMouseDown_=function(t){t.getBrowserEvent().detail>1&&this.delay_.stop(),this.drag_=!1;var o=goog.events.listen(this.elem_,goog.events.EventType.MOUSEMOVE,goog.bind(function(){this.drag_=!0},this)),i=goog.events.listen(window,goog.events.EventType.MOUSEUP,function(){goog.events.unlistenByKey(o),goog.events.unlistenByKey(i)})};Er.prototype.onClick_=function(t){t.getBrowserEvent().detail===1?this.drag_||(this.lastClickEvent_=t,this.delay_.start()):this.delay_.stop()};Er.prototype.disposeInternal=function(){this.eventHandler.dispose(),this.delay_.dispose(),Er.superClass_.disposeInternal.call(this)};var Qu=Er;sync.events.SingleClickHandler=Er;namespace("sync.select");var Cr=function(){this.eventHandler_=new goog.events.EventHandler(this),this.lastDismissTableSelectionEvTime_=0,this.isDuringClick_=!1};Cr.prototype.shouldIgnoreSelectionChangeEvent=function(t){var o=this.isIgnoringSelectionchangeEvent_;if(!o&&t instanceof z){var i=goog.now()-this.lastDismissTableSelectionEvTime_<75;o=!i}return o};Cr.prototype.ignoreNextBrowserSelectEvent=function(){this.isIgnoringSelectionchangeEvent_=!0,clearTimeout(this.unignoreSelectionchangeEventTimeout_),this.unignoreSelectionchangeEventTimeout_=setTimeout(goog.bind(function(){this.isIgnoringSelectionchangeEvent_=!1,this.unignoreSelectionchangeEventTimeout_=null},this))};Cr.prototype.attach=function(t){var o=goog.events.EventType;if(goog.userAgent.GECKO)for(var i=[o.CLICK,o.TOUCHSTART],n=0;n<i.length;n++)this.eventHandler_.listenWithScope(t,i[n],this.onDismissTableSelectionEvent_,!0,this);this.eventHandler_.listen(t,o.MOUSEDOWN,function(){this.isDuringClick_=!0}),this.eventHandler_.listen(document,o.MOUSEUP,function(){this.isDuringClick_=!1})};Cr.prototype.detach=function(){this.eventHandler_.removeAll()};Cr.prototype.onDismissTableSelectionEvent_=function(){this.lastDismissTableSelectionEvTime_=goog.now()};Cr.prototype.isDuringClick=function(){return this.isDuringClick_};var Ju=Cr;sync.select.SelectionChangeEventDetective=Cr;namespace("sync.select");var $u=function(t,o){this.type=t,this.caretRect=o},Zu=$u;sync.select.CaretRectChangedEvent=$u;namespace("sync.dom");sync.dom.DomUpdateSilencerEvent=function(t,o){this.type=t,this.areUpdatesSilenced=o};sync.dom.DomUpdateSilencerEvent.EventType={SILENCED_STATE_CHANGED:"silenced_state_changed"};var ba=function(){goog.Disposable.call(this),this.silenceCounter_=0,this.eventTarget_=new goog.events.EventTarget,this.registerDisposable(this.eventTarget_)};goog.inherits(ba,goog.Disposable);ba.prototype.delayIfUpdatesAreSilenced=function(t){return this.areUpdatesSilenced()?sync.util.promise.nativePromise(sync.events.listenOnce(this.eventTarget_,sync.dom.DomUpdateSilencerEvent.EventType.SILENCED_STATE_CHANGED).then(()=>t)):Promise.resolve(t)};ba.prototype.setUpdatesSilenced=function(t){var o=this.areUpdatesSilenced();t?this.silenceCounter_++:this.silenceCounter_--;var i=this.areUpdatesSilenced();o!==i&&this.eventTarget_.dispatchEvent(new sync.dom.DomUpdateSilencerEvent(sync.dom.DomUpdateSilencerEvent.EventType.SILENCED_STATE_CHANGED,i))};ba.prototype.areUpdatesSilenced=function(){return this.silenceCounter_!==0};var em=ba;sync.dom.DomUpdateSilencer=ba;goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.events.EventHandler");goog.require("goog.events.MouseWheelHandler");goog.require("goog.object");goog.require("goog.functions");namespace("sync.select");var y=function(t,o,i,n){goog.events.EventTarget.call(this),this.docWrapper_=t,this.viewportScroller_=o,this.xmlModel_=i,this.xmlDocumentProvider_=new Ca(i,t),this.fakeSelectionRenderer_=n,this.eventHandler=new goog.events.EventHandler(this),this.mouseWheelHandler=null,this.frameDoc=sync.util.getDocDomHelper().getDocument(),this.fixups_=new Sd(this.xmlModel_),this.tableSelectionHandler_=new Yu,this.tableSelectionConverter_=new _d,this.selectionChangeDetective=new Ju,this.selectionIsTheInitialOne_=!1,this.isTableSelectionEnabled_=!0,this.selectionChangedCause=null,this.setInitialSelection_(),this.funsCache_={},this.clickHandler_=null,this.settingSelection_=!1};goog.inherits(y,goog.events.EventTarget);y.prototype.lastSelectionInDocument_=null;y.prototype.setLastSelectionInDocument=function(t){this.lastSelectionInDocument_=t};y.prototype.getLastSelectionInDocument=function(){return this.lastSelectionInDocument_};y.prototype.selectionCheckingTimerHandle=null;y.prototype.selectionChecks=0;y.prototype.attach=function(t){this.selectionChangeDetective.attach(this.docWrapper_),"onselectionchange"in this.frameDoc?(this.eventHandler.listen(this.frameDoc,"selectionchange",this.onBrowserSelectionChanged_,!0),this.updateSelectionAfterPageUpDownOnFirefox_(),this.eventHandler.listen(this.docWrapper_,goog.events.EventType.TEXTINPUT,this.onBrowserSelectionChanged_)):(this.listenOnCaptureOnDocument_(goog.events.EventType.KEYDOWN,this.handleKey_),this.listenOnCaptureOnDocument_(goog.events.EventType.BLUR,this.handleBlur_),this.listenOnCaptureOnDocument_(goog.events.EventType.TOUCHSTART,this.handleTouchStart_)),this.listenOnBubbleOnDocument_(goog.events.EventType.KEYUP,this.detectSelectionChangeSource_),this.listenOnBubbleOnDocument_(goog.events.EventType.KEYDOWN,this.detectSelectionChangeSource_),this.listenOnCaptureOnDocument_(goog.events.EventType.BLUR,this.clearSelectionOnBlur_),this.listenOnBubbleOnDocument_(goog.events.EventType.MOUSEDOWN,this.handleMouseDown_),this.listenOnCaptureOnDocument_(goog.events.EventType.MOUSEDOWN,this.handleFocusGainedOnRightClick_),this.eventHandler.listen(t,M.EventType.SERVER_SELECTION_CHANGED,this.onServerSelectionChanged_,!0),this.eventHandler.listen(t,M.EventType.MODEL_CHANGED,this.clearFunctionsCache_,!0),this.clickHandler_=new Qu(this.docWrapper_),this.eventHandler.listen(this.clickHandler_,goog.events.EventType.CLICK,this.fixupOnClick_),this.listenOnCaptureOnDocument_(goog.events.EventType.FOCUSIN,this.restoreSelectionOnFocus_),this.enableCustomMouseSelection_(),this.listenOnCaptureOnDocument_(goog.events.EventType.CONTEXTMENU,this.checkSelectionChangedOnContextMenu_)};y.prototype.updateSelectionAfterPageUpDownOnFirefox_=function(){goog.userAgent.GECKO&&this.listenOnCaptureOnDocument_(goog.events.EventType.KEYDOWN,goog.bind(function(t){t.type===goog.events.EventType.KEYDOWN&&(t.keyCode===goog.events.KeyCodes.PAGE_DOWN||t.keyCode===goog.events.KeyCodes.PAGE_UP)&&this.selectionMayChangeInFuture_()},this))};y.prototype.enableCustomMouseSelection_=function(){this.listenOnCaptureOnDocument_(goog.events.EventType.CLICK,this.selectElementOnTripleClick_),this.listenOnCaptureOnDocument_(goog.events.EventType.MOUSEDOWN,this.handleSelectionFromStaticContent_),this.listenOnCaptureOnDocument_(goog.events.EventType.MOUSEDOWN,this.handleWordSelection_),this.isTableSelectionEnabled_&&this.listenOnCaptureOnDocument_(goog.events.EventType.MOUSEDOWN,this.handleTableSelection_),this.listenOnCaptureOnDocument_(goog.events.EventType.CLICK,this.setSelectionOnClickOutsideDocument),this.listenOnCaptureOnDocument_(goog.events.EventType.MOUSEDOWN,this.selectElemOnMouseDownOnSentinels_),this.listenOnCaptureOnDocument_(goog.events.EventType.MOUSEUP,this.blockMouseUpDefaultActionOnSentinels_)};y.prototype.listenOnCaptureOnDocument_=function(t,o){this.eventHandler.listen(this.docWrapper_,t,o,!0)};y.prototype.listenOnBubbleOnDocument_=function(t,o){this.eventHandler.listen(this.docWrapper_,t,o,!1)};y.positionFromPointNormalized=function(t,o){var i=y.positionFromPoint(t,o);return i!==null&&(i=i.toRelativeContentPosition().toHTMLPosition()),i};y.positionFromPoint=goog.nullFunction;typeof document.caretPositionFromPoint=="function"?y.positionFromPoint=function(t,o){var i=document.caretPositionFromPoint(t,o),n;if(i)try{n=new T(i.offsetNode,i.offset)}catch{console.warn("Could not find caret position from point")}return n}:typeof document.caretRangeFromPoint=="function"&&(y.positionFromPoint=function(t,o){var i=document.caretRangeFromPoint(t,o),n;return i&&(n=new T(i.startContainer,i.startOffset)),n});y.prototype.isInside_=function(t,o){return t===o?!0:goog.dom.contains(o,t)};y.prototype.setInitialSelection_=function(){try{this.setLastSelectionInDocument(new sync.select.SavedSelection(this.getFirstCaretPosition_()))}catch(t){console.warn(t)}};y.prototype.getFirstCaretPosition_=function(t){var o=sync.model.XmlDom.getRootElement(this.docWrapper_);if(o){var i=h.getIdOfXmlNode(o),n=new sync.position.RelativeContentPosition(i,f.BEFORE,0),r;return t?r=new ce(n.toHTMLPosition()):r=p.fromRelativeContentPosition(n),r.skipSentinels(),r.toRelativeContentPosition()}else return new sync.position.RelativeContentPosition("0",f.BEFORE,0)};y.prototype.adjustInitialSelection=function(){if(!this.selectionIsTheInitialOne_){var t=this.lastSelectionInDocument_.focus,o=this.getFirstCaretPosition_(!0);o.equals(t)||this.setLastSelectionInDocument(new sync.select.SavedSelection(o))}};y.prototype.setSelectionOnClickOutsideDocument=function(t){if(goog.dom.classlist.contains(t.target,"oxy-document")){var o=t.target.childNodes[1],i=new T(o,o.childNodes.length);this.setCurrentCaretPosition_(i)}};y.prototype.blockMouseUpDefaultActionOnSentinels_=function(t){var o=p.getSentinelAncestor(t.target);o&&goog.dom.classlist.contains(o,"tag-full")&&t.preventDefault()};y.prototype.selectElemOnMouseDownOnSentinels_=function(t){var o=p.getSentinelAncestor(t.target);if(o&&goog.dom.classlist.contains(o,"tag-full")){var i=o.querySelector(".tag-core"),n=i.getBoundingClientRect(),r=p.getSentinelType(o),s=p.getSentinelParentId(o),a=new sync.position.RelativeContentPosition(s,r,0).toHTMLPosition();if(n.right<=t.clientX)this.setCurrentCaretPosition_(a);else if(n.left>=t.clientX){var l=p.positionBefore(a);this.setCurrentCaretPosition_(l)}else{var c=p.createSelectionAroundXmlNode(s);this.setCurrentSelection(c);var d=this.xmlModel_.getXmlNodeById(s);d&&sync.util.TableUtil.isTableCellElement(d)&&t.preventDefault()}}};y.prototype.isRightClick_=function(t){return t.isButton(goog.events.BrowserEvent.MouseButton.RIGHT)};y.prototype.isLeftClick_=function(t){return t.isButton(goog.events.BrowserEvent.MouseButton.LEFT)};y.prototype.isDoubleClick_=function(t){var o=2;return t.getBrowserEvent().detail===o&&this.isLeftClick_(t)};y.prototype.isTripleClick_=function(t){var o=3;return t.getBrowserEvent().detail===o&&this.isLeftClick_(t)};y.prototype.isSingleClick_=function(t){return t.getBrowserEvent().detail===1&&this.isLeftClick_(t)};y.prototype.moveSelectionOutOfInertStaticContent_=function(t){var o=!1;if(this.inInertStaticContent_(t)){var i=this.isRightClick_(t)&&this.isMouseEventInsideSelection_(t);o=!i}if(o){var n=p.getStaticContentAncestor(t.target),r=new T(n,0),s=this.fixupHtmlPositionForRendering_(r);t.preventDefault(),this.setCurrentCaretPosition_(s),this.extendSelectionOnMouseMove_(this.extendSelectionDrag_)}return o};y.prototype.isOnImageMap_=function(t){var o=t.target.tagName.toLowerCase()==="svg"?t.target:t.target.ownerSVGElement;if(o){var i=o.parentElement;return goog.dom.classlist.contains(i,"imagemap-wrapper")}return!1};y.prototype.isOnContentImage_=function(t){var o=goog.dom.classlist.contains(t.target,"oxy-img")||goog.dom.classlist.contains(t.target,"oxy-wrapper");if(o){var i=sync.model.XmlDom.getContainingXmlNode(t.target),n=p.getCssContent(i);return n&&n.contains(t.target)}return!1};y.prototype.fixupOnClick_=function(t){var o=this.getCurrentSelection();this.isDocFocused()&&!(o instanceof z)&&this.fixupBrowserSelectionOnMouse_(o,t)};y.prototype.onServerSelectionChanged_=function(t){var o=t.selection,i=!this.isDocFocused(),n=t.isCausedByBackgroundSync&&i,r=!n;if(o!=null&&(n||this.setBrowserSelection_(o),!this.selectionMightHaveChanged_(o))){var s=o.save();s&&this.setLastSelectionInDocument(s)}this.clearFunctionsCache_(),this.notifySelectionView_(o,null,n,r)};y.prototype.clearFunctionsCache_=function(){this.funsCache_={}};y.prototype.restoreSelectionOnFocus_=function(t){sync.model.XmlDom.isXmlNode(t.target)&&t.getBrowserEvent().relatedTarget===null&&!this.selectionChangeDetective.isDuringClick()&&!this.settingSelection_&&this.restoreSelectionInBrowser()};y.prototype.calcFocusRect_=function(){if(!goog.dom.contains(this.docWrapper_,this.frameDoc.activeElement))return null;var t=y.getBrowserSelectionRange(),o=null;if(t)if(t.isCollapsed()){var i=t.getBrowserRangeObject().getBoundingClientRect();o=new goog.math.Rect(i.left,i.top,i.width,i.height)}else o=this.calcFocusRectInNonCollapsedRange_(t);return goog.math.Rect.equals(o,sync.positioning.NULL_RECT)&&(o=null),o};y.prototype.calcFocusRectInNonCollapsedRange_=function(t){var o,i=t.getBrowserRangeObject(),n=i.getClientRects();if(n.length===0)return null;var r=i.getBoundingClientRect(),s=new goog.math.Rect(r.left,r.top,r.width,r.height);return t.isReversed()?(o=n[0],o=new goog.math.Rect(o.left,o.top,0,o.height),!s.intersects(o)&&n[1]&&(o=n[1],o=new goog.math.Rect(o.left,o.top,0,o.height))):(o=n[n.length-1],o=new goog.math.Rect(o.left,o.top,0,o.height),!s.intersects(o)&&n[n.length-2]&&(o=n[n.length-2],o=new goog.math.Rect(o.left,o.top,0,o.height))),o};y.prototype.onBrowserSelectionChanged_=function(){if(!!goog.dom.contains(this.docWrapper_,this.frameDoc.activeElement)&&(this.dispatchEvent(new Zu(y.EventType.CARET_RECT_CHANGED_INTERVAL,this.calcFocusRect_())),!this.selectionChangeDetective.shouldIgnoreSelectionChangeEvent(this.getCurrentSelection()))){var t=this.getBrowserSelection();if(this.shouldHandleBrowserSelectionChangedEvent_(t)){var o=this.selectionChangeRequiresScrollingIntoView_(this.selectionChangedCause),i=this.fixups_.fixupBrowserSelectionOnKey(t,this.getLastSelectionInDocument(),this.selectionChangedCause);i&&!i.equals(t)&&(t=i,this.setBrowserSelection_(t)),this.selectionChangedCause=null;var n=this.selectionMightHaveChanged_(t);n&&o&&this.viewportScroller_.scrollSelectionIntoView(t)}}};y.prototype.selectionChangeRequiresScrollingIntoView_=function(t){var o=!1,i=!1,n=!1;return t&&(o=t.type.indexOf("key")!==-1,!t.shiftKey&&(t.key==="End"||t.key==="Home")&&(i=!0),t.ctrlKey&&t.key==="a"&&(n=!0)),o&&!i&&!n};y.prototype.shouldHandleBrowserSelectionChangedEvent_=function(t){var o=!0;if(this.tableSelectonInProgress_)o=!1;else if(goog.userAgent.IE&&t&&t.isEmpty()){var i=this.getCurrentSelection();i instanceof z&&i.start.equals(t.start)&&(o=!1)}return o};y.prototype.isDocFocused=function(){var t=this.frameDoc.activeElement;return sync.model.XmlDom.isXmlNode(t)&&t.hasAttribute("contentEditable")};y.prototype.selectElementOnTripleClick_=function(t){this.isDocFocused()&&this.isTripleClick_(t)&&this.setCurrentSelectionAroundTargetElement_(t)};y.prototype.handleSelectionFromStaticContent_=function(t){if(!!this.isDocFocused()&&!!this.isSingleClick_(t)&&!this.isMouseEventInsideSelection_(t)){if(this.isOnContentImage_(t))this.setCurrentSelectionAroundTargetElement_(t);else if(this.inInertStaticContent_(t)){var o=y.positionFromPointNormalized(t.clientX,t.clientY),i=this.fixupHtmlPositionForRendering_(o);this.setCurrentCaretPosition_(i),t.preventDefault(),this.extendSelectionOnMouseMove_(this.extendSelectionDrag_)}}};y.prototype.inInertStaticContent_=function(t){return p.getStaticContentAncestor(t.target)&&!sync.formctrls.dom.isInsideFormControl(t.target)&&!this.isOnContentImage_(t)};y.prototype.shouldStartTableDragSelection_=function(t){var o=sync.util.TableUtil.getSurroundingTableElement(t.target)!=null,i=o&&this.isSingleClick_(t)&&this.isDocFocused();return sync.formctrls.dom.isInsideFormControl(t.target)&&(i=!1),this.isMouseEventInsideSelection_(t)&&(i=!1),i};y.prototype.handleTableSelection_=function(t){if(this.shouldStartTableDragSelection_(t)){var o=sync.util.TableUtil.getSurroundingTableElement(t.target),i=y.positionFromPointNormalized(t.clientX,t.clientY),n=null;if(i){var r=this.fixupHtmlPositionForRendering_(i);n=new sync.select.Selection(r)}this.extendSelectionOnMouseMove_(this.extendTableSelectionDrag_.bind(this,o,t.target),n),this.eventHandler.listenOnce(document,goog.events.EventType.MOUSEUP,goog.bind(function(){this.tableSelectonInProgress_=!1},this))}};y.prototype.extendTableSelectionDrag_=function(t,o,i,n){var r,s=this.tableSelectionHandler_.extendSelection(o,n.target,t);return s?(this.tableSelectonInProgress_=!0,this.ignoreNextIEClickEvent_=!0,n.preventDefault(),r=s):i&&(this.tableSelectonInProgress_=!1,n.preventDefault(),r=this.extendSelectionDrag_(i,n)),r};y.prototype.handleWordSelection_=function(t){if(!!this.isDocFocused()&&!!this.isDoubleClick_(t))if(this.isOnContentImage_(t))this.setCurrentSelectionAroundTargetElement_(t);else if(this.inInertStaticContent_(t)){var o=y.positionFromPointNormalized(t.clientX,t.clientY),i=this.fixupHtmlPositionForRendering_(o);this.setCurrentCaretPosition_(i),t.preventDefault(),this.extendSelectionOnMouseMove_(this.extendWordSelectionDrag_)}else{var n=this.selectWordOnDblClick_(t);n&&(t.preventDefault(),this.extendSelectionOnMouseMove_(this.extendWordSelectionDrag_))}};y.prototype.extendSelectionOnMouseMove_=function(t,o){var i=o||this.getCurrentSelection(),n=goog.events.listen(this.docWrapper_,goog.events.EventType.MOUSEMOVE,goog.bind(function(l){var c=t.call(this,i,l);c&&this.setCurrentSelection(c)},this)),r=null,s=null,a=function(){goog.events.unlistenByKey(n),goog.events.unlistenByKey(r),goog.events.unlistenByKey(s)};r=goog.events.listen(window,goog.events.EventType.MOUSEUP,a),s=goog.events.listen(window,goog.events.EventType.DRAGEND,a)};y.prototype.selectWordOnDblClick_=function(t){var o=y.positionFromPointNormalized(t.clientX,t.clientY),i=new ce(o),n=i.clone(),r=n.getCharType();if(r===ge.CharType.CJK)return!1;if(r===ge.CharType.LETTER_OR_DIGIT||r===ge.CharType.WHITESPACE||r===ge.CharType.OTHER){for(;n.getCharType()===r;)n.next();var s=i.clone();for(s.prev();s.getCharType()===r;)s.prev();s.next();var a=new sync.select.Selection(s.toHTMLPosition(),n.toHTMLPosition());this.setCurrentSelection(a)}else this.setCurrentCaretPosition_(i.toHTMLPosition());return!0};y.prototype.extendSelectionDrag_=function(t,o){var i=null,n=y.positionFromPointNormalized(o.clientX,o.clientY);if(n){var r=p.comparePositions(t.start.container,t.start.offset,n.container,n.offset);r>0?i=new sync.select.Selection(n,t.anchor,t.anchor,n):r<0&&(i=new sync.select.Selection(t.anchor,n,t.anchor,n))}return i};y.prototype.extendWordSelectionDrag_=function(t,o){var i=y.positionFromPointNormalized(o.clientX,o.clientY),n=null;if(p.comparePositions(i.container,i.offset,t.end.container,t.end.offset)>0?n=this.extendWordSelectionDragAfterEnd_(t.start,i):p.comparePositions(i.container,i.offset,t.start.container,t.start.offset)<0?n=this.extendWordSelectionBeforeStart_(t.end,i):n=t,n){var r=this.getCurrentSelection();r.equals(n)&&(n=null)}return n};y.prototype.extendWordSelectionDragAfterEnd_=function(t,o){var i=new ce(o),n=i.clone();n.prev();var r=n.getCharType();if(r!==ge.CharType.CJK&&r!==-1)for(;i.getCharType()===r;)i.next();return new sync.select.Selection(t,i.toHTMLPosition())};y.prototype.extendWordSelectionBeforeStart_=function(t,o){var i=new ce(o),n=i.getCharType(),r=i.clone();if(r.prev(),n!==ge.CharType.CJK&&n!==-1)for(;r.getCharType()===n;)r.prev();r.next();var s=r.toHTMLPosition();return new sync.select.Selection(s,t,t,s)};y.prototype.fixupBrowserSelectionOnMouse_=function(t,o){var i=!goog.userAgent.IE&&o.getBrowserEvent().detail>1;if(t&&!this.tableSelectonInProgress_&&!i){var n=this.fixups_.fixupBrowserSelectionOnMouse(t,o);t.equals(n)||this.setBrowserSelection_(n)}};y.prototype.detectSelectionChangeSource_=function(t){t.type===goog.events.EventType.KEYDOWN?this.selectionChangedCause=t:setTimeout(goog.bind(function(){this.selectionChangedCause=null},this))};y.prototype.isSelectionDifferentFromSavedSelection_=function(t){var o=!1;return t&&(o=!t.save().equals(this.getLastSelectionInDocument())),o};y.prototype.selectionMightHaveChanged_=function(t){var o=!1;return this.isSelectionDifferentFromSavedSelection_(t)&&(this.setLastSelectionInDocument(t.save()),this.funsCache_={},this.dispatchEvent(new Yl),o=!0),o};y.prototype.notifySelectionView_=function(t,o,i,n){var r=new Yl(y.EventType.SELECTION_CHANGED_INTERNAL,t,o,i,n);this.dispatchEvent(r)};y.prototype.getBrowserSelection=function(){try{var t=goog.dom.Range.createFromWindow(window);if(t){try{if(t.getStartNode().nodeType===-1)return null}catch{var o=sync.util.getDocDomHelper().getDocument().activeElement;return new sync.select.Selection(new T(o.parentNode,sync.util.indexInParent(o)))}var i=new sync.select.Selection(new T(t.getStartNode(),t.getStartOffset()),new T(t.getEndNode(),t.getEndOffset()),new T(t.getAnchorNode(),t.getAnchorOffset()),new T(t.getFocusNode(),t.getFocusOffset()));return i.isInsideDocument(this.docWrapper_)?i:null}}catch{}return null};y.getBrowserSelectionRange=function(){var t=null;try{if(t=goog.dom.Range.createFromWindow(sync.util.getDocDomHelper().getWindow()),t)try{t.getStartNode().nodeType===-1&&(t=null)}catch{t=null}}catch{}return t};y.prototype.setBrowserSelection_=function(t){this.settingSelection_=!0;try{this.fixFirefoxFocus_(t),y.setBrowserSelectionRaw(t.anchor.container,t.anchor.offset,t.focus.container,t.focus.offset)}finally{this.settingSelection_=!1}};y.setBrowserSelectionRaw=function(t,o,i,n){var r=goog.dom.TextRange.createFromNodes(t,o,i,n),s=goog.dom.getWindow(goog.dom.getOwnerDocument(t));s.getSelection()&&r.select()};y.prototype.fixFirefoxFocus_=function(t){if(goog.userAgent.GECKO&&t.isBackwards()){var o=t.focus.container.ownerDocument,i=o.activeElement;if(!(i.contentEditable==="true"&&goog.dom.contains(i,t.focus.container))){var n=goog.dom.getAncestor(t.focus.container,function(r){return goog.dom.isElement(r)&&r.contentEditable==="true"});n.focus()}}};sync.select.SelectionChangingKeys=function(){for(var t=goog.events.KeyCodes,o=[t.LEFT,t.RIGHT,t.UP,t.DOWN,t.PAGE_UP,t.PAGE_DOWN,t.HOME,t.END],i={},n=0;n<o.length;n++){var r=o[n];i[r]=!0}return i}();sync.select.isAltUpOrDown=function(t){return(t.keyCode===goog.events.KeyCodes.UP||t.keyCode===goog.events.KeyCodes.DOWN)&&t.altKey};sync.select.isSelectionChanging=function(t){var o=!1;return(t.type===goog.events.EventType.KEYDOWN&&t.keyCode in sync.select.SelectionChangingKeys&&!sync.select.isAltUpOrDown(t)||(t.metaKey||t.ctrlKey)&&t.key==="a")&&(o=!0),o};y.prototype.handleKey_=function(t){sync.select.isSelectionChanging(t)&&this.selectionMayChangeInFuture_(t)};y.prototype.handleMouseDownInFormControls_=function(t){var o=!1;String(goog.dom.TagName.TEXTAREA)===t.target.tagName?o=!0:t.target.tagName===String(goog.dom.TagName.INPUT)?goog.userAgent.product.FIREFOX&&["date","time","datetime-local"].indexOf(t.target.type)!==-1?(t.target.focus(),o=!1):o=!0:goog.dom.getAncestorByTagNameAndClass(t.target,goog.dom.TagName.SELECT)!==null&&(o=!0),o||(t.preventDefault(),this.simulateMouseDown_(t))};y.prototype.handleShiftClickInsideTable_=function(t){var o=!1,i=this.tableSelectionHandler_.getExtendSelectionOnShiftClick(t,this.getCurrentSelection());return i&&(t.preventDefault(),this.setCurrentSelection(i),this.notifySelectionView_(i,null,!1,!0),o=!0),o};y.prototype.simulateMouseDown_=function(t){var o=document.activeElement;(o.tagName===String(goog.dom.TagName.INPUT)||o.tagName===String(goog.dom.TagName.TEXTAREA)||goog.dom.getAncestorByTagNameAndClass(o,goog.dom.TagName.SELECT,2))&&(goog.dom.contains(o,t.target)||o.blur()),this.eventHandler.listenOnce(document,goog.events.EventType.MOUSEUP,function(i){i.target!==t.target&&t.clientX===i.clientX&&t.clientY===i.clientY&&i.target.click()})};y.prototype.setFakeSelectionRendered=function(t){this.fakeSelectionRendered_=t};y.prototype.handleFocusGainedOnRightClick_=function(t){if(this.isRightClick_(t)&&!this.getCurrentSelection().isEmpty()&&this.fakeSelectionRenderer_.isRendered()){if(this.fakeSelectionRenderer_.contains(t.target))this.restoreSelectionInBrowser();else if((goog.userAgent.GECKO||goog.userAgent.MAC)&&t.clientX&&t.clientY){var o=y.positionFromPointNormalized(t.clientX,t.clientY);this.setCurrentCaretPosition_(o)}}};y.prototype.handleMouseDown_=function(t){var o=!0;sync.formctrls.dom.isInsideFormControl(t.target)&&(o=!1,this.handleMouseDownInFormControls_(t));var i=this.isRightClick_(t);if(o&&i&&!this.getCurrentSelection().isEmpty()&&(this.fakeSelectionRenderer_.isRendered()&&this.fakeSelectionRenderer_.contains(t.target)&&t.preventDefault(),o=!1),o&&this.isLeftClick_(t)||i){var n=this.isMouseEventInsideSelection_(t);if(n)this.eventHandler.listenOnce(this.docWrapper_,goog.events.EventType.MOUSEUP,this.moveSelectionOutOfInertStaticContent_,!0),o=!0;else{var r=this.moveSelectionOutOfInertStaticContent_(t);o=!r}}if(this.isTableSelectionEnabled_){var s=this.handleMouseDownInTable_(t);s&&(o=!1)}o&&!t.getBrowserEvent().defaultPrevented&&(this.selectionMayChangeOnMouseEvents_(),this.mouseMoveKey_=goog.events.listen(this.frameDoc,goog.events.EventType.MOUSEMOVE,this.selectionMayChangeOnMouseEvents_,!0,this),this.mouseWheelHandler=new goog.events.MouseWheelHandler(this.frameDoc),this.mouseWheelKey_=goog.events.listen(this.mouseWheelHandler,goog.events.MouseWheelHandler.EventType.MOUSEWHEEL,this.selectionMayChangeOnMouseEvents_,!0,this),this.mouseUpKey_=goog.events.listen(this.frameDoc,goog.events.EventType.MOUSEUP,this.unregisterMouseDownListeners_,!0,this),this.dragEndKey_=goog.events.listen(this.frameDoc,goog.events.EventType.DRAGEND,this.unregisterMouseDownListeners_,!0,this))};y.prototype.handleMouseDownInTable_=function(t){var o=!1;this.tableSelectionHandler_.isShiftClickInsideTable(t)&&this.handleShiftClickInsideTable_(t)&&(o=!0),this.tableSelectionHandler_.isTripleClickInsideCell(t)&&(t.stopPropagation(),this.selectElementOnTripleClick_(t),this.selectionChangeDetective.ignoreNextBrowserSelectEvent(),o=!0);var i=this.getCurrentSelection();return this.tableSelectionHandler_.isRightClickInsideTableSelection(t,i)&&(this.selectionChangeDetective.ignoreNextBrowserSelectEvent(),o=!0),o};y.prototype.unregisterMouseDownListeners_=function(t){this.selectionMayChangeOnMouseEvents_();var o=this.getBrowserSelection();this.fixupBrowserSelectionOnMouse_(o,t),goog.events.unlistenByKey(this.mouseMoveKey_),goog.events.unlistenByKey(this.mouseWheelKey_),goog.events.unlistenByKey(this.mouseUpKey_),goog.events.unlistenByKey(this.dragEndKey_),this.mouseWheelHandler.dispose()};y.prototype.clearSelectionOnBlur_=function(t){if(sync.model.XmlDom.isXmlNode(t.target)){var o=y.getBrowserSelectionRange();if(window.getSelection&&window.Selection&&window.Selection.prototype.removeAllRanges){o&&(goog.dom.contains(t.target,o.getStartNode())||goog.dom.contains(t.target,o.getEndNode()))&&window.getSelection().removeAllRanges();return}this.selectionView.clearSelection()}};y.prototype.handleBlur_=function(){this.selectionMayChangeInFuture_()};y.prototype.handleTouchStart_=function(){try{this.touchMoveKey_=goog.events.listen(this.docWrapper_,goog.events.EventType.TOUCHMOVE,this.selectionMayChangeInFuture_,!0,this),this.touchEndKey_=goog.events.listen(this.docWrapper_,goog.events.EventType.TOUCHEND,this.handleTouchEnd_,!0,this)}catch(t){console.error(t)}};y.prototype.handleTouchEnd_=function(){this.selectionMayChangeInFuture_(),goog.events.unlistenByKey(this.touchMoveKey_),goog.events.unlistenByKey(this.touchEndKey_)};y.prototype.selectionMayChangeOnMouseEvents_=function(t){this.tableSelectonInProgress_||this.selectionMayChangeInFuture_(t)};y.prototype.selectionMayChangeInFuture_=function(t){this.stopSelectionChecking_(),this.selectionChecks=4;var o=goog.bind(function(){var i=this.getBrowserSelection();if(this.isSelectionDifferentFromSavedSelection_(i)){var n=this.getLastSelectionInDocument(),r=this.fixups_.fixupBrowserSelectionOnKey(i,n,t);r&&!r.equals(i)&&(i=r,this.setBrowserSelection_(i))}var s=this.selectionMightHaveChanged_(i);!s&&this.selectionChecks-- >0&&(this.selectionCheckingTimerHandle=setTimeout(o,125))},this);this.selectionCheckingTimerHandle=setTimeout(o,0)};y.prototype.stopSelectionChecking_=function(){clearTimeout(this.selectionCheckingTimerHandle)};y.prototype.getCurrentSelection=function(){return this.lastSelectionInDocument_.restore()};y.prototype.setCurrentSelection=function(t,o,i){if(this.selectionIsTheInitialOne_=!0,this.stopSelectionChecking_(),this.isTableSelectionEnabled_){var n=this.tableSelectionConverter_.getTableSelection(t);n&&(t=n)}if(!o){this.setBrowserSelection_(t);var r=this.getBrowserSelection();t instanceof z||(t=r)}this.selectionMightHaveChanged_(t);var s=!o;this.notifySelectionView_(t,i,o,s),this.selectionChangeDetective.ignoreNextBrowserSelectEvent()};y.prototype.setCurrentCaretPosition_=function(t){this.setCurrentSelection(new sync.select.Selection(t))};y.prototype.fixupHtmlPositionForRendering_=function(t){return new ce(t).toHTMLPosition()};y.prototype.setCurrentSelectionAroundTargetElement_=function(t){var o=sync.model.XmlDom.getContainingElement(t.target);if(o){var i=h.getIdOfXmlNode(o),n=p.createSelectionAroundXmlNode(i);this.setCurrentSelection(n)}};y.prototype.restoreSelectionInBrowser=function(){this.setCurrentSelection(this.getCurrentSelection())};y.prototype.detach_=function(){this.eventHandler.removeAll(),this.mouseWheelHandler&&this.mouseWheelHandler.dispose(),this.clickHandler_&&this.clickHandler_.dispose(),this.selectionChangeDetective.detach()};y.prototype.disposeInternal=function(){y.superClass_.disposeInternal.call(this),this.detach_()};y.EventType={SELECTION_CHANGED_INTERNAL:"changed_internal",SELECTION_CHANGED:"changed",CARET_RECT_CHANGED_INTERVAL:"caret"};y.prototype.checkSelectionChangedOnContextMenu_=function(t){if(!(this.isTableSelectionEnabled_&&this.tableSelectionHandler_.isRightClickInsideTableSelection(t,this.getCurrentSelection()))){var o=null,i=this.getBrowserSelection(),n=i==null||i.save().isCollapsed()||!this.isMouseEventInsideSelection_(t,i);if(n&&this.isOnContentImage_(t)){var r=sync.model.XmlDom.getParentNode(t.target);if(r){var s=h.getIdOfXmlNode(r);o=p.createSelectionAroundXmlNode(s)}}if(n&&this.isOnImageMap_(t)){var a=sync.model.XmlDom.getContainingElement(t.target),l=this.xmlDocumentProvider_.getXmlDocument();o=sync.api.Selection.createEmptySelectionInNode(l.createApiNodeOrParent(a),"before")}goog.userAgent.GECKO&&o===null?this.handleContextMenuFF_(t):(o=o||i,this.selectionMightHaveChanged_(o))}};y.prototype.isMouseEventInsideSelection_=function(t,o){var i=o||this.getCurrentSelection(),n=!1;if(t.clientX&&t.clientY){var r=y.positionFromPoint(t.clientX,t.clientY);r&&p.comparePositions(r.container,r.offset,i.start.container,i.start.offset)>=0&&p.comparePositions(r.container,r.offset,i.end.container,i.end.offset)<=0&&(n=!0)}return n};y.prototype.handleContextMenuFF_=function(t){var o=this.getCurrentSelection(),i=t.clientX&&t.clientY&&this.isRightClick_(t);if(i&&(o.isEmpty()||!this.isMouseEventInsideSelection_(t))){var n=y.positionFromPointNormalized(t.clientX,t.clientY);this.setCurrentCaretPosition_(n)}};y.focusIframeWindow_=function(){var t=sync.util.getDocDomHelper().getWindow();setTimeout(goog.bind(t.focus,t),500)};y.prototype.applyCachedFunction=function(t){if(!goog.isDef(this.funsCache_[t.id])){var o=this.getCurrentSelection();this.funsCache_[t.id]=t.fn_(o)}return this.funsCache_[t.id]};var It=y;sync.select.SelectionHandler=y;namespace("sync.actions");var Me=function(t,o){zl.call(this,t,o),this.contentModel_=new To};goog.inherits(Me,zl);Me.prototype.actionPerformed=function(t){this.actionPerformedFor(t,this.getCurrentContext())};Me.prototype.getCurrentContext=function(){return new I.Context({computeSelection:()=>this.selectionManager.getSelection()})};Me.prototype.actionPerformedFor=function(t,o){this.getClipboardPromise_(o).thenAlways(()=>this.capturePromise=null).thenAlways(t)};Me.prototype.captureBrowserEvent=function(t){t=t||this.getCurrentContext();var o,i=t.computeSelection(),n=Sd.fixupSelectionInStaticContent(i)||i;return n.isEmpty()?o=goog.Promise.resolve():document.queryCommandSupported(this.getCommand())?o=this.copyExecCmd_(n.save()):o=this.copyFallback(n.save()),this.capturePromise=o,o};Me.prototype.getClipboardPromise_=function(t){return this.capturePromise||(this.capturePromise=this.captureBrowserEvent(t)),this.capturePromise};Me.prototype.getCommand=function(){return"copy"};Me.prototype.copyFallback=goog.abstractMethod;Me.prototype.copyExecCmd_=function(t){var o=this.createEditableDivInView();this.editableDiv=o;var i=sync.util.getDocDomHelper();goog.dom.appendChild(i.getDocument().body,o),this.prepareCopy(o,t);var n;try{n=this.alterClipboard().then(goog.bind(this.cleanupCopyDiv,this,o))}catch{this.cleanupCopyDiv(o),n=this.copyFallback(t)}return n};Me.prototype.alterClipboard=function(){return document.execCommand(this.getCommand()),sync.util.promise.delayPromise(0)};Me.prototype.generateRandomId_=function(){for(var t="",o=4,i=2,n=i+o;t.length<o;)t=""+Math.random(),t.length>=n?t=t.substring(i,n):t="";return t};Me.prototype.processSelectedText_=function(t,o,i,n){t=t||" ",o.innerHTML=t,Fg(o.textContent.trim())||(this.selectionContainsSentinel(n)?this.addAdditionalTextForMarking(o):o.textContent=o.textContent);var r=goog.dom.createDom("span",{id:"oxy-"+i}),s=this.getTextNodeChild_(o);if(s){var a=this.computeSpanIndex_(s.textContent),l=sync.util.dom.insertNodeInTextNode(new T(s,a),r);sync.util.dom.flattenElement(l)}};Me.prototype.addAdditionalTextForMarking=function(t){t.firstChild.nodeType===goog.dom.NodeType.TEXT?t.firstChild.textContent=t.firstChild.textContent+"<>":goog.dom.appendChild(t.firstChild,goog.dom.createTextNode("<>"))};Me.prototype.getTextNodeChild_=function(t){var o=goog.dom.findNode(t,function(i){var n=i.nodeType===goog.dom.NodeType.TEXT,r=Fg(i.textContent.trim());return n&&r});return!o&&Fg(t.textContent.trim())&&(o=goog.dom.findNode(t,function(i){return i.nodeType===goog.dom.NodeType.TEXT})),o};function Fg(t){return t.length>2||ge.codePointLength(t)>1}Me.prototype.selectionContainsSentinel=function(t){return!this.contentModel_.isOnlyText(t.start,t.end)};Me.prototype.computeSpanIndex_=function(t){for(var o=1,i=0;i<t.length;i++)if(t[i].trim()!==""&&!ge.isHighSurrogate(t.charCodeAt(i))){o=i+1;break}return o};Me.prototype.prepareCopy=function(t,o){try{var i={id:this.controller.docId};o.extend(i);var n=this.getClipboardText(i),r=this.generateRandomId_();this.processSelectedText_(n,t,r,o),localStorage.setItem("copyId",r)}catch(a){let l=a.message?": "+a.message:"";throw workspace.getNotificationManager().showError("Copy failed"+l),a}t.focus();var s=t.firstChild||t;It.setBrowserSelectionRaw(s,0,t,t.childNodes.length)};Me.prototype.getClipboardText=function(t){var o=sync.rest.getSyncMethod("RESTDocumentControllers.documentController.addCopiedClipboardObject");return o(t)};Me.prototype.isEnabled=function(){return!this.selectionManager.getSelection().isEmpty()};Me.prototype.isEnabledFor=function(t){var o=t.computeSelection()||this.selectionManager.getSelection();return!o.isEmpty()};Me.prototype.getDescription=function(){return tr(msgs.EDIT_COPY_)};Me.prototype.getDisplayName=function(){return tr(msgs.EDIT_COPY_)};Me.prototype.getLargeIcon=function(t){return sync.util.image.getImageUrl("/images/Copy24.png",t)};Me.prototype.getSmallIcon=function(t){return sync.util.image.getImageUrl("/images/Copy16.png",t)};var Bn=Me;sync.actions.CopyBase=Me;goog.require("goog.dom");goog.require("goog.userAgent");goog.require("goog.string");goog.require("goog.log");namespace("sync.actions");var Sr=function(t,o,i){Bn.call(this,o,i||"M1 C"),this.controller=t,this.pending=!1};goog.inherits(Sr,Bn);Sr.prototype.logger=goog.log.getLogger("Copy");Sr.prototype.copyFallback=function(t){var o=this.createEditableDivInView(),i=sync.util.getDocDomHelper();return goog.dom.appendChild(i.getDocument().body,o),this.prepareCopy(o,t),sync.util.promise.delayPromise(0).then(goog.bind(this.cleanupCopyDiv,this,o))};Sr.prototype.actionPerformedFor=function(t,o){this.pending=!0,Sr.superClass_.actionPerformedFor.call(this,goog.bind(function(){this.pending=!1,t()},this),o)};Sr.prototype.isPending=function(){return this.pending};var Ql=Sr;sync.actions.Copy=Sr;goog.require("goog.dom");goog.require("goog.userAgent");goog.require("goog.log");namespace("sync.actions");var Mi=function(t,o){Ql.call(this,t,o,"M1 X"),this.controller=t,this.pendingCut=!1};goog.inherits(Mi,Ql);Mi.prototype.logger=goog.log.getLogger("Cut");Mi.prototype.actionPerformed=function(t){this.selectionManager.getSelection().isEmpty()?t():(this.pendingCut=!0,Mi.superClass_.actionPerformed.call(this,function(){setTimeout(function(){try{this.docUpdate?(this.controller.applyUpdate_(this.docUpdate),this.docUpdate=null):console.error("There was no update available after cut was performed!"),t(),this.pendingCut=!1}catch(o){console.error(o)}}.bind(this),0)}.bind(this)))};Mi.prototype.getClipboardText=function(t){var o=sync.rest.getSyncMethod("RESTDocumentControllers.documentController.cut"),i=o(t);return this.docUpdate=i.docUpdate,i.text};Mi.prototype.getDescription=function(){return tr(msgs.EDIT_CUT_)};Mi.prototype.getSmallIcon=function(t){return sync.util.image.getImageUrl("/images/Cut16.png",t)};Mi.prototype.getLargeIcon=function(t){return sync.util.image.getImageUrl("/images/Cut24.png",t)};Mi.prototype.isPending=function(){return this.pendingCut};var tm=Mi;sync.actions.Cut=Mi;namespace("sync.actions");var yt=function(t,o,i,n){sync.actions.AbstractAction.call(this,t),this.controller=o,this.concurrentEditingManager=i,this.selectionManager_=n,this.updates_=null,this.savedSelection=null,this.mergedSyncAction=null,this.callsCallback=!0,this.isRespectingDomUpdateSilencer=!0};goog.inherits(yt,sync.actions.AbstractAction);yt.prototype.shouldRollback_=!1;yt.prototype.serverUpdate_=null;yt.prototype.actionPerformedClientSide=function(){var t=this.selectionManager_.getSelection();if(this.savedSelection=t.save(),this.shouldExecuteClientSide(t)){var o=this.createClientSideUpdates();o.direct.isSerializedContentModified=!0,o.direct.isEditorModified=!0,this.controller.applyClientSideUpdate_(o.direct),this.updates_=o}};yt.prototype.mergeSyncAction=function(t){this.mergedSyncAction=t};yt.prototype.doesConcurrentSync=function(){return this.mergedSyncAction!==null};yt.prototype.getMergedSyncAction=function(){return this.mergedSyncAction};yt.prototype.wasExecutedClientSide=function(){return this.updates_!=null};yt.prototype.applyServerUpdate=function(t){t=sync.ctrl.ComposedConcurrentDocumentUpdate.of(t);var o=t.update,i=t.concurrentUpdate;this.applyServerUpdateInternal(o,i)};yt.prototype.applyServerUpdateInternal=function(t,o){this.wasExecutedClientSide()?!this.isClientSideExecutionCorrect(t)||o&&o.authorDocUpdate.hasChanges()?(this.shouldRollback_=!0,this.serverUpdate_=t,this.serverConcurrentUpdate_=o):(t.clearModelChanges(),t.markerUpdates=[],t.clearPeerSelections(),t.selection=null,this.controller.lieAboutBeforeModelChanged(t),this.controller.fireServerUpdates(t)):this.controller.applyUpdate_(t)};yt.prototype.isClientSideExecutionCorrect=function(t){if(t.fragments&&t.fragments.length!==0||t.markerUpdates&&t.markerUpdates.length!==0||t.highlightsUpdates&&t.highlightsUpdates.length!==0)return!1;var o=this.updates_.direct;if(!goog.array.equals(o.getPatches(),t.getPatches(),(r,s)=>r.equals(s)))return!1;var i=o.getUpdateSelection(),n=t.getUpdateSelection();return i.equals(n)};yt.prototype.shouldRollback=function(){return this.shouldRollback_};yt.prototype.rollBackClientSide=function(){if(this.updates_&&this.updates_.rollback&&(this.updates_.rollback.isSerializedContentModified=!0,this.updates_.rollback.isEditorModified=!0,this.controller.applyClientSideUpdate_(this.updates_.rollback)),this.serverUpdate_&&this.controller.applyUpdate_(this.serverUpdate_),this.serverConcurrentUpdate_){var t=this.serverUpdate_.getUpdateSelection();this.concurrentEditingManager.applyConcurrentUpdate(t,this.serverConcurrentUpdate_)}this.shouldRollback_=!1,this.serverUpdate_=null,this.serverConcurrentUpdate_=null,this.updates_=null,this.savedSelection=null};yt.prototype.actionFailedServerSide=function(t){sync.util.error.reloadPage(t),this.shouldRollback_=!0};yt.prototype.getSavedSelection=function(){return this.savedSelection||this.selectionManager_.getSelection().save()};yt.prototype.shouldExecuteClientSide=goog.abstractMethod;yt.prototype.createClientSideUpdates=goog.abstractMethod;yt.prototype.mergeIn=function(t){return!1};var no=yt;sync.actions.ClientSideAction=yt;namespace("sync.actions");var zv=null,Td=function(t,o){_.call(this,{keyStrokeStr:o,displayName:tr(msgs.DOWNLOAD_),description:tr(msgs.DOWNLOAD_TOOLTIP_),largeIconClass:"Download24",smallIconClass:"Download16"}),this.url=t};goog.inherits(Td,_);Td.prototype.actionPerformed=function(t){sync.util.dom.handleFileDownloadByDevice(zv,this.url),t&&t()};var Hn=Td;sync.actions.DownloadBaseAction=Td;namespace("sync.actions");var Ug=function(t,o){Hn.call(this,sync.rest.getRestApiUrl("RESTDocumentManager.downloadXMLContent",{id:t.docId,fileName:sync.util.dotEncodeURIComponent(t.getTitle())}),o)};goog.inherits(Ug,Hn);var Jl=Ug;sync.actions.DownloadXMLAction=Ug;namespace("sync.actions");var se=function(t,o,i,n){_.call(this,{displayName:"Share Editing Session"}),this.docWrapper_=t,this.concurrentEditingManager_=o,this.editor_=i,this.actionsManager_=n,this.dialog_=null,this.isPending_=!1,this.shareableUrl_=null,this.concurrentEditingManager_.isCreator()&&(this.shareableUrl_=this.computeRoomUrl_(i.options.roomId)),this.isGuest_=this.concurrentEditingManager_.isInRoom()&&!this.concurrentEditingManager_.isCreator()};goog.inherits(se,_);se.ID="Author/ShareSession";se.ROOM_TYPE="sharedSession";se.prototype.actionPerformed=function(t){this.shareableUrl_?this.showDialogWithRoomUrl_(t):this.showInitialDialog_(t)};se.prototype.computeRoomUrl_=function(t){var o=new URL(window.location.href+"&roomType="+se.ROOM_TYPE+"&roomId="+t);return o.searchParams.delete("author"),o.toString()};se.prototype.refreshOnRoomCreated_=function(t,o){this.isPending_=!1,this.actionsManager_.refreshActionsStatus(se.ID),this.updateIcon_(),this.dialog_&&(this.dialog_.dispose(),this.dialog_=null),o?(this.shareableUrl_=o,this.showDialogWithRoomUrl_(t)):this.showInitialDialog_(t)};se.prototype.showInitialDialog_=function(t){this.dialog_||this.createInitialDialog_(),this.dialog_.onSelect(goog.bind(this.onInitialDialogSubmit_,this,t)),this.dialog_.show()};se.prototype.showDialogWithRoomUrl_=function(t){this.dialog_||this.createDialogWithRoomUrl_(),t(),this.dialog_.show()};se.prototype.createDialogCommon_=function(){this.dialog_=workspace.createDialog(),this.dialog_.setTitle(tr(msgs.Share_session_title_)),this.dialog_.setPreferredSize(650,null)};se.prototype.createDialogWithRoomUrl_=function(){this.createDialogCommon_(),this.dialog_.setButtonConfiguration(sync.api.Dialog.ButtonConfiguration.OK);var t=this.getFirstSectionCommon_();t.appendChild(goog.dom.createDom("p",{style:"margin-left: 85px;"},tr(msgs.SHARE_SESSION_DETAILS_)));var o=this.renderLinkSection_();goog.dom.append(this.dialog_.getElement(),goog.dom.createDom("div","sync-content",t,o,this.renderDocumentationNote_()))};se.prototype.createInitialDialog_=function(){this.createDialogCommon_(),this.dialog_.setButtonConfiguration([{key:"ok",default:!0,caption:tr(msgs.SHARE_)},{key:"no",caption:tr(msgs.CANCEL_),cancel:!0}]);var t=this.getFirstSectionCommon_();t.appendChild(goog.dom.createDom("p",{style:"margin-left: 85px;"},[tr(msgs.BEFORE_SHARE_SESSION_DETAILS_FIRST_),goog.dom.createDom("br"),tr(msgs.BEFORE_SHARE_SESSION_DETAILS_SECOND_)]));var o=this.renderShareSessionNotes_();goog.dom.append(this.dialog_.getElement(),goog.dom.createDom("div","sync-content",t,o,this.renderDocumentationNote_()))};se.prototype.onInitialDialogSubmit_=function(t,o){o==="ok"?(this.isPending_=!0,this.actionsManager_.refreshActionsStatus(se.ID),this.concurrentEditingManager_.createRoomWithType(se.ROOM_TYPE).then(goog.bind(this.computeRoomUrl_,this)).then(goog.bind(this.refreshOnRoomCreated_,this,t)).thenCatch(goog.bind(this.onRoomCreationFailed_,this,t))):t()};se.prototype.getFirstSectionCommon_=function(){return goog.dom.createDom("div",{style:"position: relative; margin-top: 15px; margin-bottom: 25px;"},goog.dom.createDom("div","share-session-main-icon"))};se.prototype.renderShareSessionNotes_=function(){var t=goog.dom.createDom;return t("div","share-session-notes",t("p",{style:"margin: 0px; margin-left:5px;"},tr(msgs.SHARE_SESSION_NOTES_)),t("ul","share-session-notes-list",t("li","",tr(msgs.SHARE_SESSION_SAVE_NOTE_)),t("li","",tr(msgs.SHARE_SESSION_CLOSE_NOTE_))))};se.prototype.renderLinkSection_=function(){var t=goog.dom.createDom("input",{className:"shared-session-link",value:this.shareableUrl_});t.setAttribute("readonly","true");var o=goog.dom.createDom("button",{className:"share-session-link-button",title:tr(msgs.Copy_link_)});return goog.events.listen(o,goog.events.EventType.CLICK,goog.bind(this.onCopyPressed_,this,t,o)),goog.dom.createDom("div","share-session-link-section",t,o)};se.prototype.renderDocumentationNote_=function(){var t=goog.dom.createDom("a",{href:sync.util.help.getDocumentationUrl(sync.util.help.Id.CONCURRENT_EDITING_DOCS),target:"_blank"});return goog.dom.createDom("p","",trDom(msgs.SHARE_SESSION_DOC_LINK_,{$P_START:{end:"$P_END",node:t}}))};se.prototype.onCopyPressed_=function(t,o){o.setAttribute("data-label",tr(msgs.Copied_)),setTimeout(function(){o.removeAttribute("data-label")},3e3),t.focus(),t.setSelectionRange(0,t.value.length),document.execCommand("copy")};se.prototype.onRoomCreationFailed_=function(t,o){this.isPending_=!1,this.actionsManager_.refreshActionsStatus(se.ID),workspace.getNotificationManager().showError("Failed to share editing session. "+(o.message?o.message:"")),t()};se.prototype.isEnabled=function(){return this.concurrentEditingManager_&&!this.editor_.getReadOnlyStatus().isReadOnly()&&!this.isPending_&&!this.isGuest_};se.prototype.getDescription=function(){var t;return this.isEnabled()?t=tr(msgs.Share_session_description_long_):(t=tr(msgs.Share_session_description_short_),this.editor_.getReadOnlyStatus().isReadOnly()?t+=" "+tr(msgs.Share_session_description_ro_cause_):this.isGuest_&&(t+=" "+tr(msgs.Share_session_description_already_in_))),t};se.prototype.dispose=function(){this.dialog_&&this.dialog_.dispose()};se.prototype.updateIcon_=function(){goog.dom.removeChildren(this.iconElementWrapper_),goog.dom.appendChild(this.iconElementWrapper_,this.renderLargeIcon())};se.prototype.renderLargeIcon=function(){var t;return this.concurrentEditingManager_.isInRoom()?t=goog.dom.createDom("div","ConcurrentEditingOn24"):t=goog.dom.createDom("div","ConcurrentEditingOff24"),this.iconElementWrapper_=goog.dom.createDom("div",null,t),this.iconElementWrapper_};se.prototype.renderSmallIcon=se.prototype.renderLargeIcon;var Tr=se;sync.actions.SharedSessionAction=se;namespace("sync.position");var Lt=function(t,o,i,n){this.start=t,this.end=o,this.trStart=i,this.trEnd=n};Lt.parseArray=function(t){return(t||[]).map(Lt.parse)};Lt.parse=function(t){function o(a){return a?new sync.position.RelativeContentPosition(a.nodeId.toString(),a.sentinelType,a.distance):null}var i=o(t.start),n=o(t.end),r=o(t.trStart),s=o(t.trEnd);return new Lt(i,n,r,s)};Lt.fromPatch=function(t){var o=t.pos;return t.type==="delete"?new Lt(o,o.movedBy(t.length),o,null):t.type==="insert"?new Lt(o,null,o,o.movedBy(t.text.length)):t.type==="un-delete"?new Lt(o,null,o,o.movedBy(t.length)):null};Lt.prototype.updatePosition=function(t){var o,i,n,r;return this.deletes(t)?this.trStart:(this.isDelete()?(o=t.distance-this.end.distance,i=this.trStart.distance+o,n=this.trStart.nodeId,r=this.trStart.sentinelType):(o=t.distance-this.start.distance,i=this.trEnd.distance+o,n=this.trEnd.nodeId,r=this.trEnd.sentinelType),new sync.position.RelativeContentPosition(n,r,i))};Lt.prototype.updateSelection=function(t){var o=new sync.select.SavedSelection(this.updatePositionIfAffected_(t.start),this.updatePositionIfAffected_(t.end),this.updatePositionIfAffected_(t.anchor),this.updatePositionIfAffected_(t.focus));return t.equals(o)?t:o};Lt.prototype.updatePositionIfAffected_=function(t){return this.affectsPosition(t)?this.updatePosition(t):t};Lt.prototype.affectsPosition=function(t){var o=new sync.position.RelativeContentPosition(t.nodeId,t.sentinelType,0);return this.isDelete()?this.isBetween_(o,this.start,t):!t.equals(this.start)&&this.isBetween_(o,this.start,t)};Lt.prototype.isBetween_=function(t,o,i){return p.compareCanonicalRelativePositions(t,o)<=0&&p.compareCanonicalRelativePositions(o,i)<=0};Lt.prototype.compareTo=function(t){if(!t)return 1;var o=this.end||this.start,i=t.end||t.start,n=p.compareCanonicalRelativePositions(o,i);if(n!==0)return n;var r=!!this.end,s=!!t.end;return r?1:s?-1:this.trEnd.distance-t.trEnd.distance};Lt.prototype.isDelete=function(){return!!this.end};Lt.prototype.deletes=function(t){return this.isDelete()&&this.isBetween_(this.start,t,this.end)&&!t.equals(this.end)};var Aa=Lt;sync.position.IntervalTransformation=Lt;goog.require("goog.events.EventTarget");namespace("sync.model");var jn=function(t){goog.events.EventTarget.call(this),this.peerSelections_=[],t.listen(M.EventType.MODEL_CHANGED,this.update_,!0,this)};goog.inherits(jn,goog.events.EventTarget);jn.prototype.update_=function(t){if(t.isClientSide){var o=this.applyPatchesToSelections_(t.docUpdate.getPatches());if(o){var i=this.peerSelections_.map(r=>new Ea(r));this.firePeersSelectionModelChanged_(i)}}else{var n=t.docUpdate.getPeersSelections();n!==null&&this.setPeerSelectionsFromServer(n)}};jn.prototype.setPeerSelectionsFromServer=function(t){this.peerSelections_=t.map(o=>o.getPeerSelection()),this.firePeersSelectionModelChanged_(t)};jn.prototype.applyPatchesToSelections_=function(t){var o=!1;return t.forEach(i=>{var n=Aa.fromPatch(i);if(n)for(let s of this.peerSelections_){var r=s.updateSelection(n);o=o||r}}),o};jn.prototype.firePeersSelectionModelChanged_=function(t){this.dispatchEvent(new sync.model.PeersSelectionModelChangedEvent(t))};jn.EventType={PEERS_SELECTION_CHANGED:"peers_sel_changed"};sync.model.PeersSelectionModelChangedEvent=function(t){goog.events.Event.call(this,jn.EventType.PEERS_SELECTION_CHANGED),this.selections=t};goog.inherits(sync.model.PeersSelectionModelChangedEvent,goog.events.Event);var bd=jn;sync.model.PeerSelectionModel=jn;namespace("sync.view");var Xo=function(t,o){this.container_=t,this.stripesContainer_=o,this.center_=document.getElementById("editorContent"),this.editorWrapper_=goog.dom.getElement("editor-frame-wrapper"),this.dialogContainer_=null,this.docContainer_=null,this.stripesContainerBottom_=goog.dom.getElement("editor-stripes-bottom")};Xo.prototype.setStripesContainer=function(t){this.stripesContainer_=t};Xo.prototype.createLayout=function(){this.addPrintWarning_(),this.addUserAgentCSSClasses_(),this.createDocumentContainer_(),this.fixIe9PositionAbsoluteAndFocusBug_(),this.createDialogContainer_()};Xo.prototype.addUserAgentCSSClasses_=function(){goog.userAgent.ANDROID?goog.dom.classlist.add(this.container_,"ua-android"):(goog.userAgent.IPAD||goog.userAgent.IPHONE)&&goog.dom.classlist.add(this.container_,"ua-ios"),goog.userAgent.product.SAFARI&&goog.dom.classlist.add(this.container_,"ua-safari")};Xo.prototype.createDocumentContainer_=function(){var t=goog.dom.createDom("form",{id:"editor-frame"});t.setAttribute("spellcheck","false"),goog.events.listen(t,goog.events.EventType.SUBMIT,function(o){o.preventDefault(),o.stopPropagation()}),goog.dom.appendChild(this.editorWrapper_,t),this.docContainer_=t};Xo.prototype.createDialogContainer_=function(){this.dialogContainer_=goog.dom.createDom("div","dialog-container"),goog.dom.appendChild(this.container_,this.dialogContainer_)};Xo.prototype.getDocContainer=function(){return this.docContainer_};Xo.prototype.getDialogContainer=function(){return this.dialogContainer_};Xo.prototype.addEditorStripe=function(t,o,i,n){o&&(t.style.height=o+"px");var r=n===!0?this.stripesContainerBottom_:this.stripesContainer_;i?goog.dom.insertChildAt(r,t,0):goog.dom.appendChild(r,t)};Xo.prototype.removeEditorStripe=function(t,o){goog.dom.removeNode(t)};Xo.prototype.fixIe9PositionAbsoluteAndFocusBug_=function(){var t=9;goog.userAgent.IE&&goog.userAgent.VERSION<=t&&goog.events.listen(document,goog.events.EventType.KEYDOWN,function(o){o.keyCode===goog.events.KeyCodes.TAB&&o.preventDefault()},!0),$("body").on("blur",function(o){o.preventDefault(),o.stopImmediatePropagation()})};Xo.prototype.addPrintWarning_=function(){goog.dom.dataset.set(this.center_,sync.Translation.captionAttr,tr(msgs.EDITOR_PRINT_CAPABILITY_))};var om=Xo;sync.view.EditorLayoutEngine=Xo;namespace("sync.view");var wt=function(t){this.isInEditor_=t,this.hasAppBar_=!0,this.hasMainToolbar_=!0,this.hasEastPane_=!1,this.hasWestPane_=!1,this.wideEnoughToShowPanelsExpanded_=604,this.collapsedPanelWidth_=56,this.spacingOpen_=1,this.grayHeaderHeight_=50,this.mainToolbarHeight_=56};wt.STATE={OPEN:"open",CLOSED:"close"};wt.prototype.updatePaneState=function(t,o){var i=!!o;t==="east"?this.hasEastPane_=i:t==="west"?this.hasWestPane_=i:t==="mainToolbar"?this.hasMainToolbar_=i:t==="appBar"&&(this.hasAppBar_=i)};wt.prototype.getInitialStateFromLocalStorage_=function(t){var o;try{o=localStorage.getItem("layout."+t+".initialState")}catch{}return o};wt.prototype.saveInitialStateToLocalStorage_=function(t,o){if(this.isPaneInstalled(t))try{localStorage.setItem("layout."+t+".initialState",o)}catch{}};wt.prototype.isPaneInstalled=function(t){var o=!1;return t==="east"?o=this.hasEastPane_:t==="west"?o=this.hasWestPane_:t==="mainToolbar"?o=this.hasMainToolbar_:t==="appBar"&&(o=this.hasAppBar_),o};wt.prototype.isSidePanelInitOpen_=function(t){var o=!1,i=window.innerWidth>=this.wideEnoughToShowPanelsExpanded_,n=this.isPaneInstalled(t);return n&&i&&(o=this.getInitialStateFromLocalStorage_(t)!==wt.STATE.CLOSED),o};wt.prototype.isPanelIntendedStateConfigured=function(t){return goog.isDefAndNotNull(this.getInitialStateFromLocalStorage_(t))};wt.prototype.getHeaderSize=function(){return!this.hasMainToolbar_&&!this.hasAppBar_?1:this.hasMainToolbar_?this.hasAppBar_?this.mainToolbarHeight_+this.grayHeaderHeight_:this.mainToolbarHeight_:this.grayHeaderHeight_};wt.prototype.getOpenPanelWidth=function(t){var o=250;if(goog.isNumber(t)&&t>o)return t;var i=900,n=1440,r=350,s=300,a=goog.dom.getViewportSize().width;return a<i?r=o:a<n&&(r=s),r};wt.prototype.getSettings=function(){var t={maskIframesOnResize:sync.util.shouldUseIframe(),name:"outerLayout",enableCursorHotkey:!1};return t.east=this.getRightPanelLayoutSettings_(this.isInEditor_),t.west=this.getLeftPanelLayoutSettings_(this.isInEditor_),t.north={size:this.getHeaderSize(),resizable:!1,slidable:!1,spacing_open:0,closable:!1},t.south={size:0,initClosed:!1,resizable:!1,slidable:!1,spacing_open:0,closable:!1},t};wt.prototype.getCollapsedPanelWidth=function(){return this.collapsedPanelWidth_};wt.prototype.getRightPanelLayoutSettings_=function(){var t;return this.isInEditor_?(t={initHidden:!this.hasEastPane_,size:this.isSidePanelInitOpen_("east")?this.getOpenPanelWidth():this.collapsedPanelWidth_,spacing_open:this.isSidePanelInitOpen_("east")?this.spacingOpen_:0},goog.object.extend(t,this.getEditorCommonPanelsLayoutSettings_())):t=this.getDashboardPanelsLayoutSettings_(),t};wt.prototype.getLeftPanelLayoutSettings_=function(t){var o;return t?(o={initHidden:!this.hasWestPane_,size:this.isSidePanelInitOpen_("west")?this.getOpenPanelWidth():this.collapsedPanelWidth_,spacing_open:this.isSidePanelInitOpen_("west")?this.spacingOpen_:0},goog.object.extend(o,this.getEditorCommonPanelsLayoutSettings_())):o=this.getDashboardPanelsLayoutSettings_(),o};wt.prototype.getSidePanelOpenSpacing=function(){return this.spacingOpen_};wt.prototype.getEditorCommonPanelsLayoutSettings_=function(){var t=sync.util.isMobile();return{fxName:"none",minSize:0,slidable:!1,resizable:!t,enableCursorHotkey:!1,resizerDblClickToggle:!1}};wt.prototype.getDashboardPanelsLayoutSettings_=function(){return{fxName:"none",size:0,initClosed:!0,slidable:!1,resizable:!1,spacing_open:0,spacing_closed:0}};var As=wt;sync.view.LayoutConfigurator=wt;goog.require("goog.events");namespace("sync.view");var j=function(t,o,i){goog.events.EventTarget.call(this),this.container_=t,this.layoutEventTarget_=i,this.layout_=null,this.hasMainToolbarClass_="has-main-toolbar",this.pendingResize_=!1,this.layoutSizeFixListener_=null,this.panes_=[],this.header_=document.getElementById("header"),this.footer_=document.getElementById("footer"),this.center_=document.getElementById("editorContent"),this.addClassesToHeader_(),this.layoutConfigurator_=o,this.initLayoutEvent_(),this.ignoreFirstOpen_={},this.resizeWidth_={}};goog.inherits(j,goog.events.EventTarget);j.MIN_OPENED_PANE_WIDTH=250;j.prototype.createLayout=function(){this.fixLayoutSize_(),$(document).ready(goog.bind(this.createWhenVisible_,this))};j.prototype.addClassesToHeader_=function(){this.header_&&(goog.dom.classlist.add(this.header_,"has-app-bar"),goog.dom.classlist.add(this.header_,this.hasMainToolbarClass_))};j.prototype.triggerInitialEvents_=function(){this.layoutConfigurator_.isSidePanelInitOpen_("east")?this.onRightPanelOpen_(!0):this.onRightPanelClose_(!0),this.layoutConfigurator_.isSidePanelInitOpen_("west")?this.onLeftPanelOpen_(!0):this.onLeftPanelClose_(!0)};j.prototype.initLayoutEvent_=function(){var t=210,o=new goog.async.Debouncer(s,t,this),i=new goog.events.EventHandler;i.listen(window,goog.events.EventType.RESIZE,function(){o.fire()}),this.registerDisposable(i),this.registerDisposable(o);var n=50,r=new goog.async.Debouncer(s,n,this);this.registerDisposable(r),this.layoutChanged_=r.fire.bind(r);function s(){this.layoutEventTarget_.dispatchEvent(Ge.LAYOUT_CHANGED)}};j.prototype.createWhenVisible_=function(){sync.util.dom.waitForVisibility(this.container_).then(goog.bind(this.create_,this))};j.prototype.addMagicSettings_=function(t){sync.util.extend(t.east,{onopen:goog.bind(this.onRightPanelOpen_,this,!0),onclose:goog.bind(this.onRightPanelClose_,this,!0),onresize:goog.bind(this.onSidePanelResized_,this)}),sync.util.extend(t.west,{onopen:goog.bind(this.onLeftPanelOpen_,this,!0),onclose:goog.bind(this.onLeftPanelClose_,this,!0),onresize:goog.bind(this.onSidePanelResized_,this)})};j.prototype.onSidePanelResized_=function(t,o,i,n){var r=t==="east"?this.isRightPaneOpened:this.isLeftPaneOpened;r&&i.size<j.MIN_OPENED_PANE_WIDTH&&this.layout_.sizePane(t,j.MIN_OPENED_PANE_WIDTH),this.updateResizeBar_(t),this.layoutChanged_(),this.saveSidePanelWidth_(t)};j.prototype.isSidePanelCollapsed_=function(t){return this.layout_[t].state.layoutWidth<=this.layoutConfigurator_.getCollapsedPanelWidth()};j.prototype.updateResizeBar_=function(t){var o=this.layoutConfigurator_.getSidePanelOpenSpacing();this.isSidePanelCollapsed_(t)&&(o=0),this.layout_.options[t].spacing_open=o};j.prototype.saveSidePanelWidth_=function(t){var o=t==="west"||t==="east",i=this.layout_[t].state.size,n=i>=j.MIN_OPENED_PANE_WIDTH;o&&n&&(this.resizeWidth_[t]=this.layout_[t].state.size)};j.prototype.create_=function(t){var o=this.layoutConfigurator_.getSettings();this.addMagicSettings_(o),this.layout_=$(this.container_).layout(o),(t!==0||this.pendingResize_)&&(this.pendingResize_=!1,this.layout_.resizeAll(),this.layoutChanged_()),this.triggerInitialEvents_(),this.layoutEventTarget_.dispatchEvent(Ge.LAYOUT_CREATED),goog.dom.classlist.remove(this.container_,"layout-loading"),this.removeToggleButtons_()};j.prototype.openEastPane=function(){this.openPaneInternal_("east")};j.prototype.closeEastPane=function(){this.layout_&&(this.isRightPaneOpened=!1,this.layout_.sizePane("east",this.layoutConfigurator_.getCollapsedPanelWidth()),this.onRightPanelClose_()),this.layoutChanged_()};j.prototype.fixResizer_=function(t,o){if(o){var i=t==="west"?".ui-layout-resizer-west":".ui-layout-resizer-east",n=document.querySelector(i);n&&goog.style.setStyle(n,"display","block")}};j.prototype.installPane=function(t){if(!this.layoutConfigurator_.isPaneInstalled(t)){if(this.layoutConfigurator_.updatePaneState(t,!0),this.layout_){var o=this.layoutConfigurator_.isSidePanelInitOpen_(t);o?this.layout_.sizePane(t,this.layoutConfigurator_.getOpenPanelWidth(this.resizeWidth_[t])):(this.ignoreFirstOpen_[t]=!0,this.layout_.sizePane(t,this.layoutConfigurator_.getCollapsedPanelWidth())),this.layout_.show(t),this.fixResizer_(t,o)}this.layoutChanged_()}};j.prototype.uninstallPane=function(t){this.layoutConfigurator_.isPaneInstalled(t)&&(this.layoutConfigurator_.updatePaneState(t,!1),this.layout_&&this.layout_.hide(t),this.layoutChanged_())};j.prototype.openWestPane=function(){this.openPaneInternal_("west")};j.prototype.openPaneInternal_=function(t){this.layout_&&(sync.util.isMobile()&&this.paneAboutToBeOpened_(t),this.layout_.sizePane(t,this.layoutConfigurator_.getOpenPanelWidth(this.resizeWidth_[t])),t==="east"?this.onRightPanelOpen_():this.onLeftPanelOpen_()),this.layoutChanged_()};j.prototype.paneAboutToBeOpened_=function(t){if(t==="east"||t==="west"){var o=t==="east"?"west":"east";if(!this.isSidePanelCollapsed_(o)){var i=this.layout_.state.container.innerWidth,n=this.layout_.state[o].outerWidth,r=this.layoutConfigurator_.getOpenPanelWidth(this.resizeWidth_.west);i-n<r&&(o==="east"?this.closeEastPane():this.closeWestPane())}}};j.prototype.closeWestPane=function(){this.layout_&&(this.isLeftPaneOpened=!1,this.layout_.sizePane("west",this.layoutConfigurator_.getCollapsedPanelWidth()),this.onLeftPanelClose_()),this.layoutChanged_()};j.prototype.isWestPaneOpened=function(){return this.isLeftPaneOpened};j.prototype.isEastPaneOpened=function(){return this.isRightPaneOpened};j.prototype.removeAppBar=function(){goog.dom.classlist.addRemove(this.header_,"has-app-bar","no-app-bar"),this.layoutConfigurator_.updatePaneState("appBar",!1),this.updateNorthPane_()};j.prototype.updateNorthPane_=function(){if(this.layout_){var t=this.layoutConfigurator_.getHeaderSize();this.layout_.sizePane("north",t),t===1&&this.layout_.hide("north"),this.layoutChanged_()}};j.prototype.isNorthPaneShown=function(){return!this.layout_.state.north.isHidden};j.prototype.onRightPanelOpen_=function(t){if(this.ignoreFirstOpen_.east)this.ignoreFirstOpen_.east=!1;else{this.isRightPaneOpened=!0,t?this.layoutEventTarget_.dispatchEvent(new Ge.PanelInitializedEvent("right",!0,this.layoutConfigurator_.isPanelIntendedStateConfigured("east"))):this.layoutEventTarget_.dispatchEvent(new Ge.PanelToggledEvent("right",!0));var o="right-pane-is-open";goog.dom.classlist.add(this.header_,o),goog.dom.classlist.add(this.footer_,o),goog.dom.classlist.add(this.center_,o),this.layoutConfigurator_.saveInitialStateToLocalStorage_("east",As.STATE.OPEN)}};j.prototype.onLeftPanelOpen_=function(t){if(this.ignoreFirstOpen_.west)this.ignoreFirstOpen_.west=!1;else{this.isLeftPaneOpened=!0,t?this.layoutEventTarget_.dispatchEvent(new Ge.PanelInitializedEvent("left",!0,this.layoutConfigurator_.isPanelIntendedStateConfigured("west"))):this.layoutEventTarget_.dispatchEvent(new Ge.PanelToggledEvent("left",!0));var o="left-pane-is-open";goog.dom.classlist.add(this.header_,o),goog.dom.classlist.add(this.footer_,o),goog.dom.classlist.add(this.center_,o),this.layoutConfigurator_.saveInitialStateToLocalStorage_("west",As.STATE.OPEN)}};j.prototype.onRightPanelClose_=function(t){t?this.layoutEventTarget_.dispatchEvent(new Ge.PanelInitializedEvent("right",!1,this.layoutConfigurator_.isPanelIntendedStateConfigured("east"))):this.layoutEventTarget_.dispatchEvent(new Ge.PanelToggledEvent("right",!1));var o="right-pane-is-open";goog.dom.classlist.remove(this.header_,o),goog.dom.classlist.remove(this.footer_,o),goog.dom.classlist.remove(this.center_,o),this.layoutConfigurator_.saveInitialStateToLocalStorage_("east",As.STATE.CLOSED)};j.prototype.onLeftPanelClose_=function(t){t?this.layoutEventTarget_.dispatchEvent(new Ge.PanelInitializedEvent("left",!1,this.layoutConfigurator_.isPanelIntendedStateConfigured("west"))):this.layoutEventTarget_.dispatchEvent(new Ge.PanelToggledEvent("left",!1));var o="left-pane-is-open";goog.dom.classlist.remove(this.header_,o),goog.dom.classlist.remove(this.footer_,o),goog.dom.classlist.remove(this.center_,o),this.layoutConfigurator_.saveInitialStateToLocalStorage_("west",As.STATE.CLOSED)};j.prototype.fixLayoutSize_=function(){if(sync.util.isMobile()){this.updateContainerSize_();var t=200;this.layoutSizeFixListener_=goog.events.listen(window,goog.events.EventType.RESIZE,goog.functions.throttle(this.updateContainerSize_,t,this))}};j.prototype.updateContainerSize_=function(){goog.style.setStyle(this.container_,{width:document.documentElement.clientWidth+"px",height:document.documentElement.clientHeight+"px"})};j.prototype.setSize=function(t,o){goog.events.unlistenByKey(this.layoutSizeFixListener_),goog.style.setStyle(this.container_,{width:t+"px",height:o+"px"}),this.setSizeUpdate_()};j.prototype.setSizeUpdate_=function(){this.layout_?(this.layout_.resizeAll(),this.layoutChanged_()):this.pendingResize_=!0};j.prototype.addMainToolbar=function(){this.layoutConfigurator_.isPaneInstalled("mainToolbar")||(goog.dom.classlist.addRemove(this.header_,"no-main-toolbar",this.hasMainToolbarClass_),this.layoutConfigurator_.updatePaneState("mainToolbar",!0),this.updateNorthPane_())};j.prototype.removeMainToolbar=function(){goog.dom.classlist.addRemove(this.header_,this.hasMainToolbarClass_,"no-main-toolbar"),this.layoutConfigurator_.updatePaneState("mainToolbar",!1),this.updateNorthPane_()};j.prototype.removeToggleButtons_=function(){var t=document.querySelectorAll(".ui-layout-toggler");t.forEach(o=>goog.dom.removeNode(o))};var im=j;sync.view.JQLayoutengine=j;goog.require("goog.functions");goog.require("goog.dom");goog.require("goog.style");goog.require("goog.events");goog.require("goog.userAgent");goog.require("goog.userAgent.platform");namespace("sync.view");var L=function(t,o,i){goog.events.EventTarget.call(this),this.panes_=[],this.container_=t,this.layoutConfigurator_=new As(i),this.editorLayoutEngine_=new om(t,o),this.jqEngine_=new im(t,this.layoutConfigurator_,this)};goog.inherits(L,goog.events.EventTarget);L.LAYOUT_CREATED="layout_created";L.LAYOUT_CHANGED="layout_changed";L.PANEL_TOGGLED="panel_toggled";L.PanelToggledEvent=function(t,o){goog.events.Event.call(this,L.PANEL_TOGGLED),this.side=t,this.open=o};goog.inherits(L.PanelToggledEvent,goog.events.Event);L.PANEL_INITIALIZED="panel_initialized";L.PanelInitializedEvent=function(t,o,i){goog.events.Event.call(this,L.PANEL_INITIALIZED),this.side=t,this.open=o,this.isIntendedStateConfigured=i};goog.inherits(L.PanelInitializedEvent,goog.events.Event);L.prototype.create=function(){this.editorLayoutEngine_.createLayout(),this.jqEngine_.createLayout(),this.panes_=goog.array.map(document.getElementsByClassName("ui-layout-pane"),t=>t.id)};L.prototype.openEastPane=function(){this.jqEngine_.openEastPane()};L.prototype.closeEastPane=function(){this.jqEngine_.closeEastPane()};L.prototype.showEastPane=function(){this.jqEngine_.installPane("east")};L.prototype.hideEastPane=function(){this.jqEngine_.uninstallPane("east")};L.prototype.isEastPaneShown=function(){return this.layoutConfigurator_.isPaneInstalled("east")};L.prototype.isEastPaneOpened=function(){return this.jqEngine_.isEastPaneOpened()};L.prototype.isWestPaneOpened=function(){return this.jqEngine_.isWestPaneOpened()};L.prototype.openWestPane=function(){this.jqEngine_.openWestPane()};L.prototype.closeWestPane=function(){this.jqEngine_.closeWestPane()};L.prototype.showWestPane=function(){this.jqEngine_.installPane("west")};L.prototype.hideWestPane=function(){this.jqEngine_.uninstallPane("west")};L.prototype.isWestPaneShown=function(){return this.layoutConfigurator_.isPaneInstalled("west")};L.prototype.isNorthPaneShown=function(){return this.jqEngine_.isNorthPaneShown()};L.prototype.removeMainToolbar=function(){this.jqEngine_.removeMainToolbar()};L.prototype.addMainToolbar=function(){this.jqEngine_.addMainToolbar()};L.prototype.removeAppBar=function(){this.jqEngine_.removeAppBar()};L.prototype.hasAppBar=function(){return this.layoutConfigurator_.isPaneInstalled("appBar")};L.prototype.getEastPane=function(){return document.querySelector(".ui-layout-east")};L.prototype.getWestPane=function(){return document.querySelector(".ui-layout-west")};L.prototype.getLayoutContainer=function(){return this.container_};L.prototype.getDialogContainer=function(){return this.editorLayoutEngine_.getDialogContainer()};L.prototype.getFocusableLayoutPanes=function(){return this.panes_};L.prototype.setSize=function(t,o){this.jqEngine_.setSize(t,o)};L.prototype.setStripesContainer=function(t){this.editorLayoutEngine_.setStripesContainer(t)};L.prototype.addEditorStripe=function(t,o,i,n){this.editorLayoutEngine_.addEditorStripe(t,o,i,n)};L.prototype.createEditorStripe=function(t,o,i){var n=goog.dom.createDom("div",["no-print","editor-stripe"]);return this.addEditorStripe(n,t,o,i),n};L.prototype.removeEditorStripe=function(t,o){this.editorLayoutEngine_.removeEditorStripe(t,o)};L.prototype.getTitleDecorator=function(){return document.querySelector("#titleDiv > .decorators")};L.prototype.getDocContainer=function(){return this.editorLayoutEngine_.getDocContainer()};L.prototype.getNorthPane=function(){return document.getElementById("header")};L.prototype.getSouthPane=function(){return document.getElementById("footer")};L.prototype.getEditorArea=function(){return document.getElementById("editorContent")};L.prototype.getHeaderBar=function(){return document.getElementById("header-bar")};L.prototype.getHeaderTitle=function(){return document.getElementById("title")};var Ge=L;sync.view.LayoutManager=L;goog.require("goog.Promise");goog.require("goog.string");goog.require("goog.functions");goog.require("goog.structs.Set");goog.require("goog.events.EventTarget");namespace("sync.ctrl");var _t=function(t,o,i){goog.events.EventTarget.call(this),this.controller_=t,this.documentTypeId_=o,this.styleElement_=null,this.currentGroups_=i,this.availableGroups_=null};goog.inherits(_t,goog.events.EventTarget);_t.prototype.loadCSS=function(){return sync.rest.callAsync("RESTAssetLoader.loadCSS",{documentID:this.controller_.docId}).then(goog.bind(function(t){if(!this.isDisposed()){var o=goog.dom.createDom("style","",t);goog.dom.insertChildAt(document.head,o,0),this.dispatchEvent(new goog.events.Event(_t.EventType.AFTER_STYLES_CHANGED)),this.styleElement_=o}},this))};_t.getAllSelectedGroups=function(){var t=[],o=k.getInstance().getOption(S.STYLESHEET_TITLES);return o&&(t=goog.array.map(o.split(","),decodeURIComponent)),t};_t.prototype.getCurrentSelection=function(){return this.currentGroups_};_t.prototype.isForDocType_=function(t,o){var i="<"+t+">";return goog.string.startsWith(o,i)};_t.prototype.updatePersistedTitles_=function(t){this.currentGroups_=t;var o=_t.getAllSelectedGroups().filter(goog.functions.not(goog.bind(this.isForDocType_,this,this.documentTypeId_))),i="<"+this.documentTypeId_+">",n=goog.array.map(t,function(a){return i+a}),r=this.removeOldDocTypes_(o.concat(n)),s=goog.array.map(r,encodeURIComponent).join(",");k.getInstance().setOption(S.STYLESHEET_TITLES,s,!0)};_t.DOC_TYPES_THRESHOLD=50;_t.prototype.removeOldDocTypes_=function(t){var o=goog.array.map(t,function(n){return n.substring(1,n.indexOf(">"))}),i=new goog.structs.Set(o);return i.getCount()>_t.DOC_TYPES_THRESHOLD&&(t=goog.array.filter(t,goog.functions.not(goog.bind(this.isForDocType_,this,o[0])))),t};_t.EventType={BEFORE_STYLES_CHANGED:"before-styles-change",AFTER_STYLES_CHANGED:"after-styles-changed"};_t.prototype.applyGroups=function(t){return goog.Promise.resolve().then(goog.bind(function(){this.dispatchEvent(new goog.events.Event(_t.EventType.BEFORE_STYLES_CHANGED)),this.updatePersistedTitles_(t);var o={docId:this.controller_.docId,cssTitles:t};return sync.select.getSelection().extend(o),o},this)).then(function(o){return sync.rest.callAsync("RESTStylesManager.setGroups",o)}).then(goog.bind(function(o){this.controller_.applyUpdate_(o.docUpdate),o.cssContent&&this.styleElement_&&(this.styleElement_.textContent=o.cssContent,this.dispatchEvent(new goog.events.Event(_t.EventType.AFTER_STYLES_CHANGED)))},this)).thenCatch(sync.util.error.reloadPage)};_t.prototype.getGroups=function(){return this.availableGroups_||(this.availableGroups_=sync.rest.callAsync("RESTStylesManager.getAvailableGroups",{frameworkId:sync.util.dotEncodeURIComponent(this.documentTypeId_)})),this.availableGroups_};_t.prototype.disposeInternal=function(){goog.dom.removeNode(this.styleElement_),_t.superClass_.disposeInternal.call(this)};var br=_t;sync.ctrl.StylesManager=_t;namespace("sync.view");sync.view.LayoutChangeEvent=function(){goog.events.Event.call(this,sync.view.LayoutChangeEvent.TYPE),this.type=sync.view.LayoutChangeEvent.EVENT_TYPE};goog.inherits(sync.view.LayoutChangeEvent,goog.events.Event);sync.view.LayoutChangeEvent.EVENT_TYPE="update";var Te=function(){goog.events.EventTarget.call(this),this.eventHandler=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler),this.ignoreMutationsCounter_=0};goog.inherits(Te,goog.events.EventTarget);Te.prototype.attach=function(t,o,i,n){this.docViewport=n;var r=goog.bind(this.dispatchLayoutChanged,this);this.eventHandler.listen(window,goog.events.EventType.RESIZE,r),this.eventHandler.listen(n,goog.events.EventType.LOAD,r),t&&this.eventHandler.listen(t,Ge.LAYOUT_CHANGED,r),this.eventHandler.listen(i,S.DISPLAY_DENSITY,r),this.eventHandler.listen(o,br.EventType.AFTER_STYLES_CHANGED,r);var s=document.fonts;s&&this.eventHandler.listen(s,"loadingdone",r),this.createMutationObserver_(r)};Te.prototype.wrapFunctionToIgnoreLayoutChanges=function(t,o){return goog.bind(function(){this.beginMutationWithoutLayoutEffects();try{return t.apply(o,arguments)}finally{this.endMutationWithoutLayoutEffects()}},this)};Te.prototype.dispatchLayoutChanged=function(){this.willDispatchOnNextTick||(this.willDispatchOnNextTick=!0,setTimeout(goog.bind(function(){this.willDispatchOnNextTick=!1,this.dispatchEvent(new sync.view.LayoutChangeEvent)},this)))};Te.prototype.disposeInternal=function(){Te.superClass_.disposeInternal.call(this),this.documentMutationObserver_&&this.documentMutationObserver_.disconnect(),this.documentParentMutationObserver_&&this.documentParentMutationObserver_.disconnect()};Te.prototype.createMutationObserver_=function(){this.documentMutationObserver_=new MutationObserver(goog.bind(this.onDocumentMutation_,this)),this.documentParentMutationObserver_=new MutationObserver(goog.bind(function(){this.dispatchLayoutChanged(),this.connectDocumentMutationObserver_()},this));var t=sync.model.XmlDom.getDocumentNode(this.docViewport).parentElement;this.documentParentMutationObserver_.observe(t,{childList:!0})};Te.prototype.connectDocumentMutationObserver_=function(){this.disconnectDocumentMutationObserver_();var t=sync.model.XmlDom.getDocumentNode(this.docViewport.parentElement),o={attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0,characterData:!0};this.documentMutationObserver_.observe(t,o)};Te.prototype.disconnectDocumentMutationObserver_=function(){this.documentMutationObserver_&&this.documentMutationObserver_.disconnect()};Te.prototype.onDocumentMutation_=function(t){this.shouldMutationChangeLayout_(t)&&this.dispatchLayoutChanged()};Te.prototype.shouldMutationChangeLayout_=function(t){return goog.array.some(t,o=>o.type!=="attributes"||this.canAttributeChangeLayout_(o.target,o.attributeName,o.oldValue))};Te.prototype.canAttributeChangeLayout_=function(t,o,i){var n=o.startsWith("aria-"),r=!1;if(o==="class"){var s=i===null?[]:i.split(" "),a=goog.dom.classlist.get(t);r=this.wasClassToggled_(s,a,"oxy-cell-selected")}return!n&&!r};Te.prototype.beginMutationWithoutLayoutEffects=function(){var t=this.documentMutationObserver_.takeRecords();this.ignoreMutationsCounter_===0&&t.length!==0&&setTimeout(goog.bind(function(){this.onDocumentMutation_(t)},this)),this.ignoreMutationsCounter_++};Te.prototype.endMutationWithoutLayoutEffects=function(){this.documentMutationObserver_.takeRecords(),this.ignoreMutationsCounter_--};Te.prototype.wasClassToggled_=function(t,o,i){return goog.array.contains(t,i)!==o.contains(i)};Te.prototype.listen=function(){return this.hasListener(sync.view.LayoutChangeEvent.EVENT_TYPE)||this.connectDocumentMutationObserver_(),Te.superClass_.listen.apply(this,arguments)};Te.prototype.listenOnce=function(){return this.hasListener(sync.view.LayoutChangeEvent.EVENT_TYPE)||this.connectDocumentMutationObserver_(),Te.superClass_.listenOnce.apply(this,arguments)};Te.prototype.unlisten=function(){var t=Te.superClass_.unlisten.apply(this,arguments);return this.hasListener(sync.view.LayoutChangeEvent.EVENT_TYPE)||this.disconnectDocumentMutationObserver_(),t};Te.prototype.unlistenByKey=function(){var t=Te.superClass_.unlistenByKey.apply(this,arguments);return this.hasListener(sync.view.LayoutChangeEvent.EVENT_TYPE)||this.disconnectDocumentMutationObserver_(),t};Te.prototype.removeAllListeners=function(){var t=Te.superClass_.removeAllListeners.apply(this,arguments);return this.disconnectDocumentMutationObserver_(),t};var nm=Te;sync.view.LayoutChangeTracker=Te;goog.require("goog.style");goog.require("goog.dom");goog.require("goog.functions");goog.require("goog.array");namespace("sync.view");var je=function(t,o,i,n,r,s,a){goog.Disposable.call(this),this.docWrapper_=t,this.xmlModel_=o,this.layoutChangeTracker_=i,this.floatingCaret_=n,this.floatingCaret_.style.display="none",t.appendChild(this.floatingCaret_),this.hasSpansToDelete_=!1,this.caretAtStartClassAdded_=!1,this.fakeSelectionRendered_=!1,this.floatingCaretPosition_=null,this.fakeSelectionClass_=r,this.caretAtStartClass_=s,this.extraSpanClass_=r+je.EXTRA_SPAN_MARKER+a};goog.inherits(je,goog.Disposable);je.EXTRA_SPAN_MARKER="-extra-span-marker-";je.prototype.attachLayoutChangeListener_=function(){if(!this.layoutChangedListenerKey_){var t=goog.functions.throttle(this.onLayoutChanged_,100,this);this.layoutChangedListenerKey_=goog.events.listen(this.layoutChangeTracker_,sync.view.LayoutChangeEvent.EVENT_TYPE,t)}};je.prototype.detachLayoutChangeListener_=function(){this.layoutChangedListenerKey_&&goog.events.unlistenByKey(this.layoutChangedListenerKey_),this.layoutChangedListenerKey_=null};je.prototype.onLayoutChanged_=function(){this.floatingCaretPosition_&&this.renderFloatingCaret(this.floatingCaretPosition_.toHTMLPosition())};je.prototype.renderOnChunks=function(t){this.layoutChangeTracker_.beginMutationWithoutLayoutEffects();try{for(var o=0;o<t.length;o++)t[o].nodeType!==Element.COMMENT_NODE&&goog.dom.classlist.add(t[o],this.fakeSelectionClass_);this.fakeSelectionRendered_=!0}finally{this.layoutChangeTracker_.endMutationWithoutLayoutEffects()}this.fakeSelectionRendered_=!0};je.prototype.getContentSpanStartingAt=function(t){var o=p.fromHTMLPosition(t),i=o.toRelativeContentPosition(),n=null;if(i.distance===0){var r=p.getTextNodeAtPositionIfExists(i);if(r&&r.textContent.length!==0)n=r;else if(i.sentinelType===f.BEFORE){var s=o.getContentInformation();if(s&&s.isOnEndTag()){var a=this.xmlModel_.getXmlNodeById(s.elementId);n=p.getPlaceholder(a)}}}return n};je.prototype.renderFakeCaret=function(t,o){var i=this.getContentSpanStartingAt(t);i?(goog.dom.classlist.add(i,this.caretAtStartClass_),this.caretAtStartClassAdded_=!0,this.fakeSelectionRendered_=!0):this.renderFloatingCaret(t,o)};je.prototype.renderFloatingCaret=function(t,o){this.floatingCaretPosition_=t.toRelativeContentPosition(),this.attachLayoutChangeListener_();var i;if(o)i=o;else{i=t.getCaretRect();let s=goog.style.getPageOffset(this.docWrapper_);i.left-=s.x,i.top-=s.y}var n=i.height===0?1:i.height,r=i.width===0?1:i.width;goog.style.setPosition(this.floatingCaret_,i.left,i.top),goog.style.setStyle(this.floatingCaret_,"min-width",r+"px"),goog.style.setHeight(this.floatingCaret_,n),this.floatingCaret_.style.display="block",this.fakeSelectionRendered_=!0};je.prototype.renderSelectionAndCaret=function(t){var o=t.focus.toRelativeContentPosition(),i=this.renderSelection(t),n=this.getCaretRectAtIntervalsBondary_(i,t.isBackwards());this.renderFloatingCaret(o.toHTMLPosition(),n)};je.prototype.getCaretRectAtIntervalsBondary_=function(t,o){var i,n=o?0:t.length-1,r=t[n];if(r&&r.sentinel&&goog.dom.isElement(r.sentinel)){var s=sync.positioning.getNodeBoundingRect(r.sentinel);i=new goog.math.Rect(s.left+s.width,s.top,1,s.height)}return i};je.prototype.renderSelection=function(t){var o=new To,i=t.start.toRelativeContentPosition(),n=t.end.toRelativeContentPosition();this.clearExtraSpans();var r=o.getInterval(i,n,!0);return r.forEach(function(s){s.node?this.renderOnChunks([s.node]):s.sentinel?this.renderOnSentinel_(s.sentinel):this.renderOnTextNode_(s.textNode,s.start,s.end)},this),r};je.prototype.renderOnSentinel_=function(t){goog.dom.isElement(t)&&goog.dom.classlist.add(t,this.fakeSelectionClass_);var o=p.getSentinelParentId(t),i=h.getInstance().getXmlNodeById(o),n=p.getSentinelType(t),r=p.isStaticContentBefore;n===f.AFTER&&(r=goog.functions.not(r));var s=p.getStaticContent(i).filter(r);this.renderOnChunks(s),this.fakeSelectionRendered_=!0};je.prototype.renderOnTextNode_=function(t,o,i){if(o===0&&i===t.textContent.length)goog.dom.classlist.add(t,this.fakeSelectionClass_);else{var n=new Ko(t),r=goog.dom.createDom("span",[this.fakeSelectionClass_,this.extraSpanClass_]);n.addHighlight(o,i,r,!0),goog.dom.replaceNode(n.render(),t),this.hasSpansToDelete_=!0}this.fakeSelectionRendered_=!0};je.prototype.clear=function(){this.layoutChangeTracker_.beginMutationWithoutLayoutEffects();try{var t=this.docWrapper_.ownerDocument;this.floatingCaretPosition_=null,this.fakeSelectionRendered_&&(this.floatingCaret_.style.display="none",this.detachLayoutChangeListener_(),sync.util.dom.removeClass(t,this.fakeSelectionClass_),this.fakeSelectionRendered_=!1),this.caretAtStartClassAdded_&&(sync.util.dom.removeClass(t,this.caretAtStartClass_),this.caretAtStartClassAdded_=!1)}finally{this.layoutChangeTracker_.endMutationWithoutLayoutEffects()}};je.prototype.clearExtraSpans=function(){if(this.hasSpansToDelete_){this.layoutChangeTracker_.beginMutationWithoutLayoutEffects();try{var t=this.docWrapper_.ownerDocument,o=t.getElementsByClassName(this.extraSpanClass_),i=goog.array.toArray(o).map(function(r){return goog.dom.getAncestor(r,sync.model.XmlDom.isTextNode)}),n=[];i.forEach(function(r){n.indexOf(r)===-1&&n.push(r)}),n.forEach(this.clearExtraSpansInTextNode_,this),this.hasSpansToDelete_=!1}finally{this.layoutChangeTracker_.endMutationWithoutLayoutEffects()}}};je.prototype.clearExtraSpansInTextNode_=function(t){var o=new Ko(t);o.removeHighlightsByClass(this.extraSpanClass_);var i=o.render();goog.dom.replaceNode(i,t)};je.prototype.contains=function(t){return!!goog.dom.getAncestorByClass(t,this.fakeSelectionClass_)};je.prototype.isRendered=function(){return this.fakeSelectionRendered_};je.prototype.disposeInternal=function(){je.superClass_.disposeInternal.call(this),this.clear(),this.clearExtraSpans(),goog.dom.removeNode(this.floatingCaret_)};var Ad=je;sync.view.SelectionRenderer=je;goog.require("goog.Disposable");namespace("sync.support");var Io=function(t,o,i){this.a11y_=i;var n=ge.extractFirstLetter(o),r="12px",s="robotolight, Arial, Helvetica, sans-serif",a=this.getTextWidth_(n,r+" "+s);this.decoratorType_=null;var l=6,c=(l-a)/2,d=goog.dom.createDom("span",{className:"dot"},"\u25CF"),g=goog.dom.createDom("span",{className:"first-letter",style:"margin-left:"+c+"px;margin-right:"+c+"px"},n),m=goog.dom.createDom("span",{className:"username",style:"margin-left:"+c+"px;margin-right:"+c+"px"},o);this.decorator_=goog.dom.createDom("div",{className:"decorator",title:o,style:"min-width:"+l+"px; font-size:"+r+"; font-family:"+s},d,g,m),this.showSmallDecoratorDelay_=new goog.async.Delay(()=>this.setDecorator(Ar.SMALL),4e3),this.registerDisposable(this.showSmallDecoratorDelay_),this.setDecorator(Ar.LARGE);var v=new goog.events.EventHandler(this);v.listenWithScope(this.decorator_,goog.events.EventType.CLICK,this.onDecoratorClick_,this);var C=goog.dom.createDom("div",{className:"caret"});this.caretElement_=goog.dom.createDom("div",[Io.CARET_CLASS+" c"+t],C,this.decorator_)};goog.inherits(Io,goog.Disposable);Io.CARET_CLASS="peer-caret";var Ar={SMALL:"small",MEDIUM:"medium",LARGE:"large"};Io.prototype.getElement=function(){return this.caretElement_};Io.prototype.getTextWidth_=function(t,o){Io.canvas_||(Io.canvas_=document.createElement("canvas"));var i=Io.canvas_.getContext("2d");i.font=o;var n=i.measureText(t);return n.width};Io.prototype.onDecoratorClick_=function(){this.decoratorType_===Ar.LARGE?this.setDecorator(Ar.SMALL):this.setDecorator(Ar.LARGE)};Io.prototype.setDecorator=function(t){this.decoratorType_!==t&&(this.decoratorType_=t,goog.dom.dataset.set(this.decorator_,"type",t)),this.startShowSmallDecoratorTimer_()};Io.prototype.upgradeToMediumDecorator=function(){this.decoratorType_!==Ar.LARGE&&this.setDecorator(Ar.MEDIUM)};Io.prototype.startShowSmallDecoratorTimer_=function(){this.decoratorType_!==Ar.SMALL&&(this.showSmallDecoratorDelay_.stop(),!(this.a11y_&&this.a11y_.isEnabled())&&this.showSmallDecoratorDelay_.start())};var rm=Io;sync.support.ConcurrentCaret=Io;goog.require("goog.async.Delay");namespace("sync.support");var Wt=function(t,o,i,n,r,s,a){goog.Disposable.call(this),this.docWrapper_=t,this.xmlModel_=o,this.layoutChangeTracker_=i,this.peerId_=r,this.timeToIdle_=15e3,this.idleDelay_=new goog.async.Delay(this.onIdle_,this.timeToIdle_,this),this.registerDisposable(this.idleDelay_),this.idleDelay_.start(),this.renderedSelection_=null,this.renderedSelectionIsConnected_=null,this.renderedCemSelectionHash_=null,this.caret_=new rm(s,n,a),this.registerDisposable(this.caret_),this.isIdle_;var l=Wt.FAKE_SELECTION_CLASS_PREFIX+s,c="peer-caret-at-start";this.selectionRenderer_=new Ad(t,o,i,this.caret_.getElement(),l,c,r),this.registerDisposable(this.selectionRenderer_)};goog.inherits(Wt,goog.Disposable);Wt.FAKE_SELECTION_CLASS_PREFIX="oxy-peer-selected-c";Wt.prototype.render=function(t,o,i){var n=this.isFirstRendering_(),r=this.isNewSelectionChangedBySelf_(o),s=this.updateIdleAndConnectedState_(i,n,r);(n||r&&t.isEmpty())&&this.renderFirstLetter_();var a=this.computeSelectionToRender_(t,s,i);this.renderSelection_(a),this.renderedSelection_=t.save(),this.updateCemSelectionHash_(o)};Wt.prototype.updateIdleAndConnectedState_=function(t,o,i){return o?t?(this.isIdle_=!1,this.idleDelay_.start()):this.isIdle_=!0:i&&(this.isIdle_=!1,this.idleDelay_.start()),this.renderedSelectionIsConnected_=t,!this.isIdle_};Wt.prototype.updateCemSelectionHash_=function(t){this.renderedCemSelectionHash_=t};Wt.prototype.isFirstRendering_=function(){return this.renderedCemSelectionHash_===null};Wt.prototype.isNewSelectionChangedBySelf_=function(t){return this.renderedCemSelectionHash_!==t};Wt.prototype.computeSelectionToRender_=function(t,o,i){var n;return o?n=t:i?n=new sync.select.Selection(t.focus):n=null,n};Wt.prototype.renderSelection_=function(t){this.layoutChangeTracker_.beginMutationWithoutLayoutEffects();try{this.selectionRenderer_.clear(),t!==null&&(t.isEmpty()?this.selectionRenderer_.renderFloatingCaret(t.focus):this.selectionRenderer_.renderSelectionAndCaret(t))}finally{this.layoutChangeTracker_.endMutationWithoutLayoutEffects()}};Wt.prototype.renderFirstLetter_=function(t){this.layoutChangeTracker_.beginMutationWithoutLayoutEffects();try{this.caret_.upgradeToMediumDecorator()}finally{this.layoutChangeTracker_.endMutationWithoutLayoutEffects()}};Wt.prototype.onIdle_=function(){this.isIdle_=!0,this.renderedSelection_&&this.render(this.renderedSelection_.restore(),this.renderedCemSelectionHash_,this.renderedSelectionIsConnected_)};Wt.prototype.clear=function(){this.renderedSelection_=null,this.selectionRenderer_.clear()};Wt.prototype.clearExtraSpans=function(){this.selectionRenderer_.clearExtraSpans()};Wt.prototype.getPeerId=function(){return this.peerId_};var sm=Wt;sync.support.ConcurrentSelectionRenderer=Wt;namespace("sync.support");var xi=function(t,o,i,n,r,s){this.docWrapper_=n,this.xmlModel_=t,this.selectionManager_=o,this.a11y_=s,this.renderers_=new Map,this.layoutChangeTracker_=i;var a=new goog.events.EventHandler(this);this.registerDisposable(a),a.listen(r,bd.EventType.PEERS_SELECTION_CHANGED,this.onPeersSelectionChanged_)};goog.inherits(xi,goog.Disposable);xi.prototype.dispose=function(){xi.superClass_.dispose.call(this);for(let t of this.renderers_.values())t.dispose()};xi.prototype.onPeersSelectionChanged_=function(t){try{this.update_(t.selections)}catch(o){console.warn(o)}};xi.prototype.update_=function(t){var o=this.renderers_.size!==0&&t.length!==0,i=this.selectionManager_.isDocFocused()&&o;this.disposeLeftUsers_(t),this.createRenderersForNewUsers_(t),this.updateSelections_(t),i&&this.selectionManager_.setSelection(this.selectionManager_.getSelection())};xi.prototype.updateSelections_=function(t){this.renderers_.forEach(o=>o.clear()),t.forEach(o=>{var i=o.getPeerSelection();if(i.selection){var n=this.renderers_.get(i.peerId);n.render(i.selection.restore(),i.cemSelectionHash,i.isConnected)}})};xi.prototype.disposeLeftUsers_=function(t){var o=new Set(t.map(i=>i.getPeerSelection().peerId));this.renderers_.forEach((i,n)=>{o.has(n)||(i.dispose(),this.renderers_.delete(n))})};xi.prototype.createRenderersForNewUsers_=function(t){t.forEach(o=>{var i=o.getPeerSelection();if(!this.renderers_.has(i.peerId)){var n=this.createRenderer_(i);this.renderers_.set(i.peerId,n)}})};xi.prototype.createRenderer_=function(t){return new sm(this.docWrapper_,this.xmlModel_,this.layoutChangeTracker_,t.username,t.peerId,String(t.color),this.a11y_)};var am=xi;sync.support.ConcurrentSelectionManager=xi;namespace("sync.api");sync.api.ConcurrentEditingManager=function(){goog.events.EventTarget.call(this)};goog.inherits(sync.api.ConcurrentEditingManager,goog.events.EventTarget);sync.api.ConcurrentEditingManager.EventType={ROOM_CREATED:"room_created",CONCURRENT_EDITING_STARTED:"room_joined"};sync.api.ConcurrentEditingManager.prototype.createRoom=function(){return this.createRoomWithType("api")};sync.api.ConcurrentEditingManager.prototype.isCreator=function(){return!1};sync.api.ConcurrentEditingManager.prototype.isInRoom=function(){return!1};goog.require("goog.Disposable");goog.require("goog.events.EventHandler");namespace("sync.support");var Ia=function(t,o){this.controller_=t,this.selectionManager_=o,this.selectionChangedAfterLocalEdit_=!1;var i=new goog.events.EventHandler(this);this.registerDisposable(i),i.listen(t,M.EventType.BEFORE_MODEL_CHANGED,this.onBeforeModelChanged_,!0),i.listen(o,sync.api.SelectionManager.EventType.SELECTION_CHANGED,this.broadcastSelectionIfNewer_)};goog.inherits(Ia,goog.Disposable);Ia.prototype.onBeforeModelChanged_=function(){this.selectionChangedAfterLocalEdit_=!0,setTimeout(function(){this.selectionChangedAfterLocalEdit_=!1}.bind(this),0)};Ia.prototype.broadcastSelectionIfNewer_=function(){this.selectionChangedAfterLocalEdit_||this.broadcastSelection_()};Ia.prototype.broadcastSelection_=function(){var t={id:this.controller_.docId};return this.selectionManager_.getSelection().extend(t),sync.rest.callAsync("RESTDocumentControllers.documentController.broadcastSelection",t).thenCatch(o=>{var i=o.getUserReadableErrorMessage();if(i)workspace.getNotificationManager().showError(i,!0);else throw o})};var lm=Ia;sync.support.SelectionBroadcaster=Ia;namespace("sync.position");var $l=function(t){this.intervalTransformations_=t};$l.prototype.updatePosition=function(t){let o,i=this.findAffectingInterval_(t);return i?o=i.updatePosition(t):o=t,o};$l.prototype.updateSelection=function(t){return new sync.select.SavedSelection(this.updatePosition(t.start),this.updatePosition(t.end),this.updatePosition(t.anchor),this.updatePosition(t.focus))};$l.prototype.findAffectingInterval_=function(t){for(var o=null,i=0;i<this.intervalTransformations_.length;i++){var n=this.intervalTransformations_[i];if(n.deletes(t)){o=n;break}else n.affectsPosition(t)&&n.compareTo(o)>=0&&(o=n)}return o};var Id=$l;sync.position.IntervalTransformationPositionUpdater=$l;namespace("sync.selection");var Zl=function(t){this.xmlModel_=t,this.selectionBeforeApplyUpdates_=null,this.fixedDivergedSelection_=null};Zl.prototype.storeAndFixClientSelection=function(t,o,i){this.selectionBeforeApplyUpdates_=o;var n=!t.equals(o);if(!n)return;if(i===null){console.warn("Diverged client selection lost because server didn't provided interval transformations.");return}let r=Aa.parseArray(i),s=new Id(r);this.fixedDivergedSelection_=s.updateSelection(this.selectionBeforeApplyUpdates_)};Zl.prototype.restoreClientSelection=function(){var t;return this.isNonStaleTableSelection_(this.selectionBeforeApplyUpdates_)?t=this.selectionBeforeApplyUpdates_:t=this.fixedDivergedSelection_,this.selectionBeforeApplyUpdates_=null,this.fixedDivergedSelection_=null,t};Zl.prototype.isNonStaleTableSelection_=function(t){if(t instanceof sync.select.TableSavedSelection){try{t.restore()}catch(o){if(o instanceof ti)return!1;throw o}return!0}else return!1};var cm=Zl;sync.selection.ClientSelectionPreserver=Zl;namespace("sync.view");sync.view.ScrollEvent=function(){this.type=goog.events.EventType.SCROLL};var wa=function(t){goog.events.EventTarget.call(this),this.isIgnored_=!1;var o=new goog.events.EventHandler(this);this.registerDisposable(o),o.listen(t,goog.events.EventType.SCROLL,goog.bind(this.onBrowserScrollEvent_,this))};goog.inherits(wa,goog.events.EventTarget);wa.prototype.ignoreNextScrollEvent=function(){this.isIgnored_=!0,this.timeoutId_&&(clearTimeout(this.timeoutId_),this.timeoutId_=null),this.timeoutId_=setTimeout(goog.bind(function(){this.isIgnored_=!1,this.timeoutId_=null},this),2e3)};wa.prototype.onBrowserScrollEvent_=function(t){this.isIgnored_?(this.isIgnored_=!1,clearTimeout(this.timeoutId_),this.timeoutId_=null):this.fireScrollEvent_()};wa.prototype.fireScrollEvent_=function(){this.dispatchEvent(new sync.view.ScrollEvent)};var Bg=wa;sync.view.ScrollEventTarget=wa;goog.require("goog.style");namespace("sync.view");var Dt=function(t){Bg.call(this,t),this.docViewport_=t,this.padding_=30};goog.inherits(Dt,Bg);Dt.prototype.getScroll=function(){return new goog.math.Coordinate(this.docViewport_.scrollLeft,this.docViewport_.scrollTop).round()};Dt.prototype.getScrollTop=function(){return this.docViewport_.scrollTop};Dt.prototype.getScrollHeight=function(){return this.docViewport_.scrollHeight};Dt.prototype.scrollTo=function(t,o){this.docViewport_.scrollLeft=t,this.docViewport_.scrollTop=o};Dt.prototype.setScrollTopSilently=function(t){this.docViewport_.scrollTop=t,this.ignoreNextScrollEvent()};Dt.prototype.scrollElementByAmount_=function(t,o,i){this.scrollTo_(t,t.scrollLeft+o,t.scrollTop+i)};Dt.prototype.scrollTo_=function(t,o,i){t.scrollLeft=o,t.scrollTop=i};Dt.prototype.scrollSelectionIntoView=function(t){for(var o=t,i=sync.util.dom.scrollableParent(o.focus.container);i;){var n=sync.positioning.getSelectionRectsRelativeToAncestor(o,i),r=n.boundingRect.left,s=n.boundingRect.top,a=r+n.boundingRect.width,l=s+n.boundingRect.height,c=new goog.math.Rect(i.scrollLeft,i.scrollTop,i.offsetWidth,i.offsetHeight);c.width-this.padding_*2<n.boundingRect.width&&(r=n.focusRect.left,a=r+n.focusRect.width),c.height-this.padding_*2<n.boundingRect.height&&(s=n.focusRect.top,l=s+n.focusRect.height);var d=c.left+this.padding_,g=c.top+this.padding_,m=d+c.width-this.padding_*2,v=g+c.height-this.padding_*2,C=this.getDelta_(r,a,d,m),N=this.getDelta_(s,l,g,v);this.scrollElementByAmount_(i,C,N),i=sync.util.dom.scrollableParent(i)}};Dt.prototype.scrollIntoView=function(t){if(!(!t||t.length===0))for(var o=t[0],i=t[t.length-1],n=sync.util.dom.scrollableParent(o);n;){var r=sync.positioning.getOffset(o,n),s;t.length>1?s=sync.positioning.getOffset(i,n):s=r;var a;if(i.nodeType!==Element.COMMENT_NODE?a=goog.style.getSize(i):a={width:0,height:0},r&&s){var l=r.x,c=r.y,d=s.x+a.width,g=s.y+a.height,m=n.scrollLeft+this.padding_,v=n.scrollTop+this.padding_,C=m+n.offsetWidth-this.padding_*2,N=v+n.offsetHeight-this.padding_*2,D=this.getDelta_(l,d,m,C),H=this.getDelta_(c,g,v,N);this.scrollElementByAmount_(n,D,H)}n=sync.util.dom.scrollableParent(n)}};Dt.prototype.getDelta_=function(t,o,i,n){var r=0;if(t<=i)r=t-i;else if(t<n)o>=n&&o-t<n-i&&(r=o-n);else if(o>=n){var s=o-t,a=n-i;s>a?r=t-i:r=o-n}else r=t-i;return r};Dt.prototype.getRelativeY=function(t){return goog.style.getPageOffset(t).y};Dt.prototype.fixIosFocusScroll=function(){var t=window.pageYOffset;if(t!==0){var o=window.pageXOffset;window.scrollTo(o,0),this.docViewport_.scrollTop+=t}};Dt.prototype.getFirst=function(t){for(var o=null,i=this.getScroll().y,n=0;n<t.length;n++){var r=this.getRelativeY(t[n]);if(r.y>=i){o=t[n];break}}return o==null&&t.length>0&&(o=t[0]),o};Dt.prototype.getBoundingRect=function(){return sync.positioning.getNodeBoundingRect(this.docViewport_)};Dt.prototype.isScrollToBottom=function(){var t=goog.style.getBounds(this.docViewport_),o=this.docViewport_.querySelector(".oxy-document");if(o){var i=goog.style.getBounds(o);return this.docViewport_.scrollTop+t.height>=i.height}else return!1};Dt.prototype.isScrollToTop=function(){return this.docViewport_.scrollTop===0};var dm=Dt;sync.view.ViewportScroller=Dt;namespace("sync.scroll");var Hg=function(){};Hg.prototype.restoreScroll=function(t){return!1};var ln=Hg;sync.scroll.ScrollAnchor=Hg;namespace("sync.scroll");var wd=function(){};goog.inherits(wd,ln);wd.prototype.restoreScroll=function(t){return t.setScrollTopSilently(0),!0};var pm=wd;sync.scroll.TopScrollAnchor=wd;namespace("sync.scroll");var Dd=function(){};goog.inherits(Dd,ln);Dd.prototype.restoreScroll=function(t){return t.setScrollTopSilently(t.getScrollHeight()),!0};var gm=Dd;sync.scroll.BottomScrollAnchor=Dd;namespace("sync.scroll");var Nd=function(t,o){this.anchor1=t,this.anchor2=o};goog.inherits(Nd,ln);Nd.prototype.restoreScroll=function(t){return this.anchor1.restoreScroll(t)?!0:this.anchor2.restoreScroll(t)};var hm=Nd;sync.scroll.CompoundScrollAnchor=Nd;namespace("sync.scroll");var Md=function(t,o){this.xmlModel_=t,this.elementId_=h.getIdOfXmlNode(o),this.elementOffset_=goog.style.getBounds(o).top};goog.inherits(Md,ln);Md.prototype.restoreScroll=function(t){var o=this.elementId_,i=o&&this.xmlModel_.getXmlNodeById(o);if(i){var n=goog.style.getBounds(i),r=n.top;t.setScrollTopSilently(t.getScrollTop()+r-this.elementOffset_)}return!!i};var um=Md;sync.scroll.ElementRelativeScrollAnchor=Md;namespace("sync.scroll");var ec=function(t){this.selectionManager_=t,this.caretOffset_=this.getCaretOffset_()};goog.inherits(ec,ln);ec.prototype.restoreScroll=function(t){var o=this.getCaretOffset_();return t.setScrollTopSilently(t.getScrollTop()+o-this.caretOffset_),!0};ec.prototype.getCaretOffset_=function(){var t=this.selectionManager_.getSelection().focus.getCaretRect();return t.top};var mm=ec;sync.scroll.CaretRelativeScrollAnchor=ec;namespace("sync.view");var Ri=function(t,o,i){goog.Disposable.call(this);var n=goog.dom.createDom("div","caret-placeholder");this.selectionRenderer=new Ad(t,o,i,n,this.fakeSelectionClass_,this.caretAtStartClass_,"self"),this.registerDisposable(this.selectionRenderer)};goog.inherits(Ri,goog.Disposable);Ri.prototype.fakeSelectionClass_="oxy-selected";Ri.prototype.caretAtStartClass_="caret-at-start";Ri.prototype.render=function(t,o){this.selectionRenderer.clear(),t.isEmpty()?(this.selectionRenderer.renderFakeCaret(t.focus,o),this.selectionRenderer.clearExtraSpans()):this.selectionRenderer.renderSelection(t)};Ri.prototype.isRendered=function(){return this.selectionRenderer.isRendered()};Ri.prototype.renderOnChunks=function(t){this.selectionRenderer.clear(),this.selectionRenderer.renderOnChunks(t)};Ri.prototype.clear=function(){this.selectionRenderer.clear()};Ri.prototype.clearExtraSpans=function(){this.selectionRenderer.clearExtraSpans()};Ri.prototype.contains=function(t){return this.selectionRenderer.contains(t)};var xd=Ri;sync.view.FakeSelectionRenderer=Ri;goog.require("goog.math.Rect");goog.require("goog.style");namespace("sync.view");var Ir=function(t,o,i,n){this.viewportScroller_=t,this.selectionManager_=o,this.xmlModel_=i,this.xmlDocumentProvider_=n,this.scrollAnchor_=null};Ir.prototype.storeVisualContextPosition=function(){var t;if(this.viewportScroller_.isScrollToTop())t=new pm;else if(this.viewportScroller_.isScrollToBottom())t=new gm;else{var o=new mm(this.selectionManager_),i=this.getFirstElementInSight_();i?t=new hm(new um(this.xmlModel_,i),o):t=o}this.scrollAnchor_=t};Ir.prototype.restoreVisualContextPosition=function(){this.scrollAnchor_.restoreScroll(this.viewportScroller_)};Ir.prototype.getContextElement_=function(){var t=this.context_.elementId;return t&&this.xmlModel_.getXmlNodeById(t)};Ir.prototype.getFirstElementInSight_=function(){var t=this.xmlDocumentProvider_.getXmlDocument().getDocumentElement(),o=this.viewportScroller_.getBoundingRect(),i=this.getFirstElementInSightRecursive_(t,o);return i||null};Ir.prototype.getFirstElementInSightRecursive_=function(t,o){for(var i=null,n=t.getChildNodes(),r=0;r<n.length&&!i;r++){var s=n[r];if(s instanceof So){var a=this.xmlModel_.getXmlNodeById(s.id),l=goog.style.getBounds(a),c=this.compareToSight_(l.top,o);if(c===0)i=a;else{if(c>0)return null;this.compareToSight_(a.top+a.height,o)>=0&&(i=this.getFirstElementInSightRecursive_(s,o))}}}return i};Ir.prototype.compareToSight_=function(t,o){var i=o.top,n=o.height;return t<i?-1:t>n+i?1:0};var fm=Ir;sync.view.DocumentScrollPreserver=Ir;namespace("sync.formctrls");var jg=function(t){t.setSelectionRange&&(this.selectionStart=t.selectionStart,this.selectionEnd=t.selectionEnd,this.selectionDirection=t.selectionDirection,this.value=t.value)};jg.prototype.restore=function(t){this.selectionDirection&&this.value===t.value&&t.setSelectionRange(this.selectionStart,this.selectionEnd,this.selectionDirection)};var ym=jg;sync.formctrls.FormControlSelection=jg;goog.require("goog.dom");goog.require("goog.dom.dataset");goog.require("goog.asserts");namespace("sync.formctrls");var wr=function(){this.savedFocus_=null};wr.prototype.applyUpdate=function(t,o){this.saveFocus(),t.applyUpdate_(o),this.restoreFocus()};wr.prototype.saveFocus=function(){var t=sync.util.getDocDomHelper().getDocument().activeElement;this.savedFocus_=this.getNodeDescriptor_(t)};wr.prototype.getNodeDescriptor_=function(t){var o=null;t!=null&&(o=sync.formctrls.dom.getContainingFormControl(t));var i=null;if(o!=null){var n=goog.dom.getAncestor(o,sync.model.XmlDom.isXmlNode);i={id:h.getIdOfXmlNode(n),path:[],selection:new ym(t)};for(var r=t;r!==n;)i.path.push(this.indexInParent_(r)),r=r.parentElement;i.path.reverse()}return i};wr.prototype.indexInParent_=function(t){for(var o=0;t=goog.dom.getPreviousElementSibling(t);)o+=1;return o};wr.prototype.restoreFocus=function(){if(this.savedFocus_){var t=this.getNode(this.savedFocus_);t&&(t.focus(),this.savedFocus_.selection.restore(t))}};wr.prototype.getNode=function(t){for(var o=h.getInstance().getXmlNodeById(t.id),i=0;i<t.path.length;i++){if(!o)return null;var n=goog.dom.getChildren(o);o=n[t.path[i]]}return o};var cn=wr;sync.formctrls.FocusManager=wr;namespace("sync.concurrent");sync.concurrent.ConcurrentEditingSynchronizerEvent=function(t,o){goog.events.Event.call(this,t),this.update=o};goog.inherits(sync.concurrent.ConcurrentEditingSynchronizerEvent,goog.events.Event);var Oi=function(t,o,i,n,r,s){goog.events.EventTarget.call(this),this.docId_=t,this.controller_=o,this.selectionManager_=i,this.domUpdateSilencer_=n,this.docScrollPreserver_=new fm(s,this.selectionManager_,r,o.getXmlDocumentProvider()),this.clientSelectionPreserver_=new cm(r),this.formControlsFocusManager_=new cn,this.isInProgress_=!1};goog.inherits(Oi,goog.events.EventTarget);Oi.EventType={BEFORE_APPLY_SYNC:"before_apply_sync"};Oi.prototype.sync=function(){this.isInProgress_=!0;let t=this.selectionManager_.getSelection().save(),o={id:this.docId_};return this.selectionManager_.getSelection().extend(o),sync.rest.callAsyncNative("RESTDocumentControllers.documentController.getConcurrentUpdatesAndBroadcastSelection",o).then(goog.bind(this.domUpdateSilencer_.delayIfUpdatesAreSilenced,this.domUpdateSilencer_)).then(goog.bind(this.applyConcurrentUpdate,this,t)).finally(()=>this.isInProgress_=!1)};Oi.prototype.applyConcurrentUpdate=function(t,o){this.dispatchEvent(new sync.concurrent.ConcurrentEditingSynchronizerEvent(Oi.EventType.BEFORE_APPLY_SYNC,o));try{this.storeVisualContext_(t,o)}catch(i){console.warn(i),this.controller_.applyUpdate_(o.authorDocUpdate,!0);return}this.controller_.applyUpdate_(o.authorDocUpdate,!0),this.dispatchEvent(new sync.concurrent.ConcurrentEditingSynchronizerEvent(Oi.EventType.AFTER_APPLY_SYNC)),this.restoreVisualContext_()};Oi.prototype.storeVisualContext_=function(t,o){this.docScrollPreserver_.storeVisualContextPosition();let i=this.selectionManager_.getSelection().save();this.clientSelectionPreserver_.storeAndFixClientSelection(t,i,o.intervalTransformations),this.formControlsFocusManager_.saveFocus()};Oi.prototype.restoreVisualContext_=function(){try{let t=this.clientSelectionPreserver_.restoreClientSelection(),o=this.selectionManager_.getSelection().save();if(t&&!t.equals(o)){let n={focus:this.selectionManager_.isDocFocused()};this.selectionManager_.setSelection(t.restore(),n)}this.formControlsFocusManager_.restoreFocus(),this.docScrollPreserver_.restoreVisualContextPosition()}catch(t){console.warn(t)}};Oi.prototype.isSyncInProgress=function(){return this.isInProgress_};var Rd=Oi;sync.concurrent.ConcurrentEditingSynchronizer=Oi;namespace("sync.concurrent");var Od=function(t){this.synchronizer_=t};Od.prototype.updateSelection=function(t){return this.synchronizer_.isSyncInProgress()?sync.events.listenOnce(this.synchronizer_,Rd.EventType.BEFORE_APPLY_SYNC).then(o=>this.updateSelections_(t,o.update.intervalTransformations)):goog.Promise.resolve(t)};Od.prototype.updateSelections_=function(t,o){let i=Aa.parseArray(o),n=new Id(i);return t.map(r=>n.updateSelection(r))};var _m=Od;sync.concurrent.DivergedSelectionRestorer=Od;namespace("sync.util");var Da=function(t,o){this.timeout_=null,this.delay_=t,this.startedAt_=0,this.callback_=o};Da.prototype.isPending=function(){return this.timeout_!==null};Da.prototype.start=function(){this.timeout_=setTimeout(()=>this.trigger_(),this.delay_),this.startedAt_=Date.now()};Da.prototype.trigger_=function(){this.callback_.call(null),this.timeout_=null};Da.prototype.updateDelay=function(t){if(this.delay_!==t&&this.isPending()){clearTimeout(this.timeout_);var o=Date.now()-this.startedAt_,i=Math.max(0,t-this.delay_-o);this.timeout_=setTimeout(()=>this.trigger_(),i)}this.delay_=t};var vm=Da;sync.util.VariableDelayTimer=Da;namespace("sync.concurrent");var Dr=function(t){this.normalDelay_=100,this.lowFreqDelay_=1e3,this.callback_=t,this.silenceTimer_=new vm(this.normalDelay_,()=>this.silenceExpired_()),this.triggerAfterSilence_=!1,this.lowFrequencyRequestCount_=0};goog.inherits(Dr,goog.Disposable);Dr.prototype.requestSync=function(){this.silenceTimer_.isPending()?this.triggerAfterSilence_=!0:(this.trigger_(),this.silenceTimer_.start())};Dr.prototype.silenceExpired_=function(){this.triggerAfterSilence_&&(this.triggerAfterSilence_=!1,this.trigger_())};Dr.prototype.trigger_=function(){this.callback_.call(null)};Dr.prototype.enterLowFrequencyMode=function(){this.lowFrequencyRequestCount_+=1,this.silenceTimer_.updateDelay(this.lowFreqDelay_)};Dr.prototype.leaveLowFrequencyMode=function(){this.lowFrequencyRequestCount_-=1,this.lowFrequencyRequestCount_===0&&this.silenceTimer_.updateDelay(this.normalDelay_)};var Em=Dr;sync.concurrent.SyncThrottler=Dr;goog.require("goog.events.EventTarget");goog.require("goog.Disposable");namespace("sync.util");var Yv=6e4,Pd=class extends goog.Disposable{constructor(o){super();this.socket_=o,this.timer_=new goog.Timer(Yv),this.timer_.listen(goog.Timer.TICK,this.testConnection_.bind(this)),this.startTestConnectionMechanism_()}startTestConnectionMechanism_(){this.startTestConnectionInterval_(),this.testConnectionEventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.testConnectionEventHandler_),this.testConnectionEventHandler_.listen(document,"visibilitychange",()=>{document.hidden?this.stopTestConnectionInterval_():this.startTestConnectionInterval_()}),this.testConnectionEventHandler_.listenOnce(this.socket_,"error",this.dispose),this.testConnectionEventHandler_.listenOnce(this.socket_,"close",this.dispose)}startTestConnectionInterval_(){this.testConnection_(),this.timer_.start()}stopTestConnectionInterval_(){this.timer_.stop()}testConnection_(){this.socket_.send("test")}disposeInternal(){super.disposeInternal(),this.stopTestConnectionInterval_()}};goog.require("goog.events.EventTarget");namespace("sync.util");var xe=function(t){goog.events.EventTarget.call(this),this.socket_=new window.WebSocket(xe.computeUrl_(window.location.href,t)),this.waitingForPageToClose_=!1,this.hasSuppressedError_=!1,this.socket_.onmessage=goog.bind(this.onMessageReceived_,this),this.handler_=new goog.events.EventHandler(this),this.registerDisposable(this.handler_),this.handler_.listenOnce(this.socket_,"error",this.dispatchError_.bind(this)),this.handler_.listenOnce(this.socket_,"close",this.dispatchError_.bind(this)),this.handler_.listenOnce(this.socket_,"open",()=>{var o=new Pd(this.socket_);this.registerDisposable(o)}),this.handler_.listen(window,goog.events.EventType.BEFOREUNLOAD,this.beforePageCloses_),this.timer_=null};goog.inherits(xe,goog.events.EventTarget);xe.computeUrl_=function(t,o){var i=new E(t),n=i.getScheme();i.setScheme(n==="https"?"wss":"ws"),i.setQuery(o);var r=i.getParentPath();return i.setPathName(r+"../ws"),i.getUrl()};xe.ConnectMessage="connection-accepted";xe.EventType={CONNECT:"connect",ERROR:"error",MESSAGE:"message"};xe.ErrorEvent=function(t,o){goog.events.Event.call(this,xe.EventType.ERROR),this.code=t,this.reason=o};goog.inherits(xe.ErrorEvent,goog.events.Event);xe.WebSocketMessageEvent=function(t){this.type=xe.EventType.MESSAGE,this.data=t};goog.inherits(xe.WebSocketMessageEvent,goog.events.Event);xe.prototype.dispatchError_=function(t){this.waitingForPageToClose_?this.hasSuppressedError_=!0:this.dispatchEvent(new xe.ErrorEvent(t.getBrowserEvent().code,t.getBrowserEvent().reason))};xe.prototype.beforePageCloses_=function(){clearTimeout(this.timer_),this.dispatchSuppressedErrors_(),this.waitingForPageToClose_=!0;var t=3e3;this.timer_=setTimeout(goog.bind(this.waitForPageToClose_,this,t))};xe.prototype.waitForPageToClose_=function(t){this.timer_=setTimeout(goog.bind(function(){this.waitingForPageToClose_=!1,this.dispatchSuppressedErrors_()},this),t)};xe.prototype.dispatchSuppressedErrors_=function(){this.hasSuppressedError_&&(this.dispatchEvent(xe.EventType.ERROR),this.hasSuppressedError_=!1)};xe.prototype.onMessageReceived_=function(t){t.data===xe.ConnectMessage?this.dispatchEvent(xe.EventType.CONNECT):this.dispatchEvent(new xe.WebSocketMessageEvent(t.data))};xe.prototype.disposeInternal=function(){xe.superClass_.disposeInternal.call(this),this.socket_.onerror=null,this.socket_.onclose=null,this.socket_.close(),this.socket_=null,clearTimeout(this.timer_)};xe.prototype.close=function(t,o){this.socket_.onerror=null,this.socket_.onclose=null,clearTimeout(this.timer_),this.socket_.close(t,o)};var Is=xe;sync.util.WebSocket=xe;goog.require("goog.events.EventTarget");namespace("sync");var Ft=function(){goog.events.EventTarget.call(this),this.isAboutToReload_=!1,this.editorBackupFileName_=null,this.editorBackup_=null};goog.inherits(Ft,goog.events.EventTarget);Ft.EventType={RELOAD_INITIALIZED:"RELOAD_INITIALIZED",HARD_RELOAD:"WorkspaceState.HARD_RELOAD"};Ft.prototype.StorageKey_={AFTER_RELOAD_MSG:"WorkspaceState.AFTER_RELOAD_MSG",DOC_SESSION_TO_RELOAD:"WorkspaceState.DOC_SESSION_TO_RELOAD"};Ft.prototype.hardReload=function(){this.initReload(),this.dispatchEvent(new goog.events.Event(Ft.EventType.HARD_RELOAD,this)),window.location.reload()};Ft.prototype.initReload=function(){var t=!this.isAboutToReload_;this.isAboutToReload_=!0,t&&this.dispatchEvent(new goog.events.Event(Ft.EventType.RELOAD_INITIALIZED,this))};Ft.prototype.isAboutToReload=function(){return this.isAboutToReload_};Ft.prototype.setEditorBackup=function(t,o){this.editorBackupFileName_=t,this.editorBackup_=o};Ft.prototype.isEditorBackupAvailable=function(){return Boolean(this.editorBackup_)};Ft.prototype.getEditorBackup=function(){return{backupName:this.editorBackupFileName_,backup:this.editorBackup_}};Ft.prototype.saveDocSessionInfoForReload=function(t){if(t){var o=JSON.stringify({docId:t.docId,disposeId:t.disposeId});try{window.sessionStorage.setItem(this.StorageKey_.DOC_SESSION_TO_RELOAD,o)}catch{}}};Ft.prototype.getSavedDocSessionInfo=function(){var t=null;try{var o=window.sessionStorage.getItem(this.StorageKey_.DOC_SESSION_TO_RELOAD);t=JSON.parse(o),(!t.docId||!t.disposeId)&&(t=null)}catch{}return t};Ft.prototype.consumeSavedDocSessionInfo=function(){var t=null;try{t=this.getSavedDocSessionInfo(),window.sessionStorage.removeItem(this.StorageKey_.DOC_SESSION_TO_RELOAD)}catch{}return t};Ft.prototype.setAfterReloadMessage=function(t){try{window.sessionStorage.setItem(this.StorageKey_.AFTER_RELOAD_MSG,t)}catch{}};Ft.prototype.consumeAfterReloadMessage=function(){try{var t=window.sessionStorage.getItem(this.StorageKey_.AFTER_RELOAD_MSG);return window.sessionStorage.removeItem(this.StorageKey_.AFTER_RELOAD_MSG),t}catch{return null}};var ws=Ft;sync.WorkspaceState=Ft;namespace("sync.view");var Ds=class extends goog.Disposable{constructor(o,i,n){super();this.id_=o,this.message_=i,this.modalPopupDismissKey_=null,this.workspaceState_=n;var r=new goog.events.EventHandler(this);this.registerDisposable(r),r.listen(this.workspaceState_,ws.EventType.RELOAD_INITIALIZED,this.unblock)}block(){if(!this.workspaceState_.isAboutToReload()){this.showModalPopup_(this.getSpinnerContent_(this.message_));var o=document.getElementById(this.id_).querySelector(".spineee");new rt(o,1).show()}}unblock(){this.hideModalPopup_()}getSpinnerContent_(o){return goog.dom.createDom("div","modal-center",goog.dom.createDom("h3","title",o),goog.dom.createDom("div",{class:"spineee",style:"width: 23px;height: 23px;margin: 10px auto;"}))}showModalPopup_(o){if(document.getElementById(this.id_)===null){var i=goog.dom.createDom("div",{id:this.id_,className:"oxy-modal-message-wrapper"},goog.dom.createDom("div","oxy-modal-message-content",o));this.modalPopupDismissKey_=goog.events.listen(i,goog.events.EventType.CLICK,function(n){var r=goog.dom.getAncestorByClass(n.target,"oxy-modal-message-content");return r?!0:(n.stopPropagation(),n.preventDefault(),!1)}),goog.dom.appendChild(document.body,i)}}hideModalPopup_(){this.modalPopupDismissKey_&&(goog.events.unlistenByKey(this.modalPopupDismissKey_),this.modalPopupDismissKey_=null);var o=document.getElementById(this.id_);o&&document.body.removeChild(o)}};sync.view.ViewportInteractionsBlocker=Ds;var dn={SYNC:"sync",ROOM_CLOSED:"room-closed",RECONNECT_FAILED__ROOM_CLOSED:"recon_failed__room-closed",RECONNECT_FAILED__PEER_REMOVED:"recon_failed__peer_removed"},Cm=1e3,Qv="do-not-leave-room",Sm={SERVER_BLOCKS_WS_PEER_NOT_IN_ROOM:1016,SERVER_BLOCKS_WS_NO_ROOM:1017},Tm={SYNC:"sync",ROOM_CLOSED:"closed"},ze={CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",DISCONNECTED_PERMANENTLY__ROOM_CLOSED:"disconnected_permanently__room_closed",DISCONNECTED_PERMANENTLY__PEER_REMOVED:"disconnected_permanently__peer_removed",DISCONNECTED_PERMANENTLY__TO_RELOAD:"disconnected_permanently__to_reload"},bm=class extends goog.events.EventTarget{constructor(o,i,n,r){super();this.roomId_=o,this.docId_=i,this.workspaceState_=n,this.websocketFactory_=r,this.viewportInteractionsBlocker_=null,this.socket_=null,this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_),this.updateState_(ze.CONNECTING),this.eventHandler_.listenOnce(n,ws.EventType.HARD_RELOAD,()=>{this.state_===ze.CONNECTED&&this.updateState_(ze.DISCONNECTED_PERMANENTLY__TO_RELOAD)}),this.eventHandler_.listen(n,ws.EventType.RELOAD_INITIALIZED,()=>{this.unblockUserInteractions_()})}updateState_(o){if(this.workspaceState_.isAboutToReload()){this.unblockUserInteractions_();return}if(o!==ze.CONNECTING&&o!==ze.DISCONNECTED&&this.unblockUserInteractions_(),o===ze.CONNECTING)this.connectWebsocket_();else if(o===ze.CONNECTED)this.clearReconnectInfo_(),this.dispatchEvent(dn.SYNC);else if(o===ze.DISCONNECTED){var i;navigator.onLine?i=tr(msgs.TRYING_TO_RECONNECT_):i=tr(msgs.WAITING_FOR_INTERNET_),this.blockUserInteractions_(i),this.waitToReconnect_().then(()=>this.updateState_(ze.CONNECTING))}else if(o===ze.DISCONNECTED_PERMANENTLY__ROOM_CLOSED)this.state_===ze.CONNECTING?this.dispatchEvent(dn.RECONNECT_FAILED__ROOM_CLOSED):(this.closeSocket_(),this.dispatchEvent(dn.ROOM_CLOSED));else if(o===ze.DISCONNECTED_PERMANENTLY__PEER_REMOVED)this.state_===ze.CONNECTING&&this.dispatchEvent(dn.RECONNECT_FAILED__PEER_REMOVED);else if(o===ze.DISCONNECTED_PERMANENTLY__TO_RELOAD)this.closeSocketWithoutLeavingRoom_();else throw new Error("unknown state.");this.state_=o}blockUserInteractions_(o){this.unblockUserInteractions_(),this.viewportInteractionsBlocker_=new Ds("recon-modal-popup",o,this.workspaceState_),this.registerDisposable(this.viewportInteractionsBlocker_),this.viewportInteractionsBlocker_.block()}unblockUserInteractions_(){this.viewportInteractionsBlocker_&&(this.viewportInteractionsBlocker_.unblock(),this.viewportInteractionsBlocker_=null)}closeSocketWithoutLeavingRoom_(){this.socket_&&this.socket_.close(Cm,Qv)}closeSocket_(){this.socket_&&this.socket_.close(Cm)}connectWebsocket_(){this.socket_=this.websocketFactory_("roomId="+this.roomId_+"&docId="+this.docId_),this.registerDisposable(this.socket_),Promise.race([sync.events.listenOnceNative(this.socket_,Is.EventType.CONNECT),sync.events.listenOnceNative(this.socket_,Is.EventType.ERROR).then(o=>Promise.reject(o.code))]).then(()=>{this.eventHandler_.listen(this.socket_,Is.EventType.MESSAGE,this.onMessageReceived_),this.eventHandler_.listen(this.socket_,Is.EventType.ERROR,()=>{this.state_!==ze.DISCONNECTED_PERMANENTLY__ROOM_CLOSED&&this.state_!==ze.DISCONNECTED_PERMANENTLY__PEER_REMOVED&&this.updateState_(ze.DISCONNECTED)}),this.updateState_(ze.CONNECTED)}).catch(o=>{o===Sm.SERVER_BLOCKS_WS_NO_ROOM?this.updateState_(ze.DISCONNECTED_PERMANENTLY__ROOM_CLOSED):o===Sm.SERVER_BLOCKS_WS_PEER_NOT_IN_ROOM?this.updateState_(ze.DISCONNECTED_PERMANENTLY__PEER_REMOVED):this.updateState_(ze.DISCONNECTED)})}waitToReconnect_(){return this.waitUntilPageIsVisibleAndOnline_().then(()=>this.waitForReconnectDelay_())}waitUntilPageIsVisibleAndOnline_(){return document.hidden?sync.events.listenOnce(document,"visibilitychange").then(()=>this.waitUntilPageIsVisibleAndOnline_()):navigator.onLine?Promise.resolve():sync.events.listenOnce(window,"online").then(()=>this.waitUntilPageIsVisibleAndOnline_())}waitForReconnectDelay_(){if(this.firstReconnectStartTime_){var o=(new Date().getTime()-this.firstReconnectStartTime_)/6e4,i=o<=5?1e3:6e4;return sync.util.promise.delay(i)}else return this.firstReconnectStartTime_=new Date().getTime(),Promise.resolve()}clearReconnectInfo_(){this.firstReconnectStartTime_=null}onMessageReceived_(o){var i=o.data;Tm.SYNC===i?this.dispatchEvent(dn.SYNC):Tm.ROOM_CLOSED===i?this.updateState_(ze.DISCONNECTED_PERMANENTLY__ROOM_CLOSED):console.warn("Unknown message ",i)}},Am=bm;goog.require("goog.ui.TabBar");namespace("sync.view");var Ns=function(){this.contentShownClass_="sync-tab-content-show",this.tabObjects_=[]};Ns.prototype.render=function(t,o){goog.dom.classlist.add(t,"sync-tab-bar"),goog.dom.classlist.add(t,"goog-tab-bar-top");var i=new goog.ui.TabBar;this.renderTabs_(t,o),this.showFirstTabByDefault_(t,o),i.decorate(t),goog.events.listen(i,goog.ui.Component.EventType.SELECT,goog.bind(function(n){var r=this.contentShownClass_,s=n.target.getElement(),a=goog.dom.dataset.get(s,"targetId");if(a){for(var l=o.querySelector('[data-target-content-id="'+a+'"]'),c=o.querySelectorAll("."+r),d=0;d<c.length;d++)goog.dom.classlist.remove(c[d],r);goog.dom.classlist.add(l,r)}},this))};Ns.prototype.addTab=function(t){this.tabObjects_.push(t)};Ns.prototype.addTabs=function(t){this.tabObjects_=goog.array.concat(this.tabObjects_,t)};Ns.prototype.renderTabs_=function(t,o){var i=[],n=[];goog.array.forEach(this.tabObjects_,function(r){var s,a,l;s=r.caption,a=r.targetId||s,l=r.content,s&&l&&goog.dom.classlist.add(l,"sync-tab-content");var c=goog.dom.createDom("span","goog-tab",s);a&&(goog.dom.dataset.set(c,"targetId",a),goog.dom.dataset.set(l,"targetContentId",a)),i.push(c),n.push(l)}),goog.dom.append(t,i),goog.dom.append(o,n)};Ns.prototype.showFirstTabByDefault_=function(t,o){var i=t.querySelector(".goog-tab");goog.dom.classlist.add(i,"goog-tab-selected");var n=goog.dom.dataset.get(i,"targetId"),r=o.querySelector('[data-target-content-id="'+n+'"]');r&&goog.dom.classlist.add(r,this.contentShownClass_)};var kd=Ns;sync.view.TabBar=Ns;namespace("sync.view");var Vg=function(){};Vg.prototype.isEmailAddressValid=function(t){return t&&t.indexOf("@")!==-1};var Ld=Vg;sync.view.EmailAddressValidator=Vg;namespace("sync.view");var Na=function(t){this.emailDialog_=null,this.callbackAfterEmailSubmitted_=t||goog.nullFunction,this.emailAddressValidator_=null};goog.inherits(Na,goog.Disposable);Na.prototype.showEmailDialog=function(){this.emailDialog_||(this.emailDialog_=workspace.createDialog(),this.emailDialog_.setTitle(tr(msgs.INVALID_EMAIL_ADDRESS_)),this.emailDialog_.setButtonConfiguration([{key:"submit",caption:tr(msgs.CONTINUE_),disabled:!0},{key:"cancel",caption:tr(msgs.CANCEL_)}]),this.emailDialog_.setPreferredSize(500),this.appendDomStructure_(),this.emailDialog_.onSelect(goog.bind(function(o,i){goog.object.extend(i,{emailAddress:this.emailInput_.value}),this.callbackAfterEmailSubmitted_(i)},this))),this.emailDialog_.show();var t=this.emailDialog_.getElement().querySelector("input");t.value="",t.focus()};Na.prototype.appendDomStructure_=function(){var t=goog.dom.createDom;this.emailInput_=t("input",{style:"width: 370px; margin-left: 10px;",type:"text"}),goog.dom.append(this.emailDialog_.getElement(),t("div",{style:"line-height: 1.5em; padding-left: 10px;"},tr(msgs.INVALID_EMAIL_ADDRESS_)+"!",t("br"),tr(msgs.RECOMMEND_INCLUDE_EMAIL_ADDRESS_)),t("label",{style:"display:inline-block; padding: 30px 0 0 10px;width: 430px;"},tr(msgs.EMAIL_)+": ",this.emailInput_))};Na.prototype.validEmailProvided_=function(){this.emailAddressValidator_||(this.emailAddressValidator_=new Ld);var t=this.emailInput_.value;return this.emailAddressValidator_.isEmailAddressValid(t)};var Im=Na;sync.view.EmailAddressDialog=Na;namespace("sync.view");var Ms=function(t,o){this.containerClass_=t,this.caption_=o,this.container_=goog.dom.createDom("div",this.containerClass_)};Ms.prototype.getTabConfig=function(){return{caption:this.caption_,targetId:this.containerClass_,content:this.container_}};Ms.prototype.render=function(t){goog.dom.removeChildren(this.container_),goog.dom.append(this.container_,this.renderOption_(),this.renderContent(t))};Ms.prototype.renderContent=function(t){return""};Ms.prototype.getXmlReport=function(){return""};Ms.prototype.renderOption_=function(){return""};var ci=Ms;sync.view.ReportInfoPage=Ms;namespace("sync.view");var Nr=function(){this.placeholder_="-"};Nr.prototype.getProtocol=function(){var t=decodeURIComponent(sync.util.getURLParameter("url"));return t.substring(0,t.indexOf("/"))||this.placeholder_};Nr.prototype.isEditReferencesInPlaceEnabled=function(){var t=hs.getEditorSpecificURLParameters();return this.stringifyBoolean_(t.editReferencesInPlace)};Nr.prototype.stringifyBoolean_=function(t){return t?"true":"false"};Nr.prototype.isConcurrentEditing=function(){var t=!1;if(workspace.currentEditor){var o=workspace.currentEditor.getEditingSupport();if(o){var i=o.getConcurrentEditingManager();i&&(t=i.isInRoom())}else t=workspace.currentEditor.options&&!!workspace.currentEditor.options.roomId}return this.stringifyBoolean_(t)};Nr.prototype.getUserName=function(){var t=tr(msgs.ANONYMOUS_);return workspace.currentEditor&&(t=workspace.currentEditor.userName),t};Nr.prototype.getDocTypeId=function(){var t=this.placeholder_;return workspace.currentEditor&&(t=workspace.currentEditor.documentTypeId),t};var wm=Nr;sync.view.ReportInfoProvider=Nr;namespace("sync.view");var Pi=function(t,o){ci.call(this,t,o),this.infoProvider_=new wm,this.info_={},this.reportApplicationDetails_=null};goog.inherits(Pi,ci);Pi.prototype.renderContent=function(t){return this.info_=t,[this.renderContactDetailsForm_(),this.renderApplicationDetails_()]};Pi.prototype.createRow_=function(t,o,i){return goog.dom.createDom("tr","",goog.dom.createDom("td","",t),goog.dom.createDom("td",{"data-type":i},o))};Pi.prototype.renderApplicationDetails_=function(){var t=this.createRow_,o=""+this.infoProvider_.isConcurrentEditing(),i=""+this.infoProvider_.isEditReferencesInPlaceEnabled();return this.reportApplicationDetails_=goog.dom.createDom("div",{id:"report_application_details"},goog.dom.createDom("table",{border:"1"},goog.dom.createDom("tbody","",t(tr(msgs.NAME_),this.info_.appName,"name"),t(tr(msgs.USER_AGENT_),goog.userAgent.getUserAgentString(),"name"),t(tr(msgs.DOCUMENT_TYPE_),this.infoProvider_.getDocTypeId(),"name"),t(tr(msgs.CONCURRENT_EDITING_),o,"name"),t(tr(msgs.EDIT_REFERENCES_INPLACE_),i,"name"),t(tr(msgs.PROTOCOL_),this.infoProvider_.getProtocol(),"name"),t("Iframe",""+sync.util.dom.inIframe(),"iframe"),t("Document Changed",""+workspace.noReloadNo,"editor-changes"),t(tr(msgs.EDITION_),this.info_.edition,"edition"),t(tr(msgs.VERSION_),this.info_.version,"version"),t(tr(msgs.BUILD_ID_),this.assembleBuildId_(),"build"),t(tr(msgs.JVM_MEMORY_),this.info_.jvmMemory,"jvm_memory")))),goog.dom.dataset.set(this.reportApplicationDetails_,sync.Translation.captionAttr,tr(msgs.APPLICATION_DETAILS_)),this.reportApplicationDetails_};Pi.prototype.renderContactDetailsForm_=function(){var t=goog.dom.createDom("div",{id:"report_contact_details",className:"report_table_container"},this.renderInputForContactForm_(tr(msgs.NAME_)+":","report_contact_name",this.infoProvider_.getUserName()),this.renderInputForContactForm_(tr(msgs.COMPANY_)+":","report_contact_company",this.info_.company),this.renderInputForContactForm_(tr(msgs.EMAIL_)+":","report_contact_email"),goog.dom.createDom("div",{style:"text-align:center"},"("+tr(msgs.USER_CONTACT_FOR_FURTHER_DETAILS_)+")"));return goog.dom.dataset.set(t,sync.Translation.captionAttr,tr(msgs.CONTACT_DETAILS_)),t};Pi.prototype.renderInputForContactForm_=function(t,o,i){return i=i||"",goog.dom.createDom("div","",goog.dom.createDom("label",{className:"contact-detail-label",for:o},t),goog.dom.createDom("input",{id:o,className:"contact-detail",value:i}))};Pi.prototype.assembleBuildId_=function(){var t=[];return this.info_.buildID&&t.push(this.info_.buildID),this.info_.coreBuildID&&t.push(this.info_.coreBuildID),t.join("/")};Pi.prototype.getAppDetailsText_=function(t){return this.reportApplicationDetails_.querySelector('td[data-type="'+t+'"]').textContent};Pi.prototype.getXmlReport=function(){var t="",o=goog.bind(this.getAppDetailsText_,this),i=o("name"),n=o("edition"),r=o("version"),s=o("build"),a=o("jvm_memory"),l=o("iframe"),c=o("editor-changes");return t+=`<product>
<name>`+i+`</name>
<edition>`+n+`</edition>
<version>`+r+`</version>
<build>`+s+`</build>
<JVM_Memory>`+a+`</JVM_Memory>
<framework_id>`+this.infoProvider_.getDocTypeId()+`</framework_id>
<concurrent_editing>`+this.infoProvider_.isConcurrentEditing()+`</concurrent_editing>
<edit_refs_inplace>`+this.infoProvider_.isEditReferencesInPlaceEnabled()+`</edit_refs_inplace>
<protocol>`+this.infoProvider_.getProtocol()+`</protocol>
<iframe>`+l+`</iframe>
<doc_changes>`+c+`</doc_changes>
<user_agent>`+goog.userAgent.getUserAgentString()+`</user_agent>
</product>
`,t};var Dm=Pi;sync.view.GeneralInfoPage=Pi;namespace("sync.view");var Fd=function(t,o){ci.call(this,t,o),this.checkboxId_="",this.checkboxLabel_="",this.checkbox_=null};goog.inherits(Fd,ci);Fd.prototype.renderOption_=function(){return this.checkbox_=goog.dom.createDom("input",{type:"checkbox",id:this.checkboxId_,value:this.checkboxId_}),this.checkbox_.setAttribute("checked",!0),goog.dom.createDom("label","",this.checkbox_,this.checkboxLabel_)};var Ma=Fd;sync.view.ReportInfoPageOptional=Fd;namespace("sync.view");var tc=function(t,o){ci.call(this,t,o),this.systemPropertiesRows_=[],this.checkboxId_="include_system_properties",this.checkboxLabel_=tr(msgs.INCLUDE_SYSTEM_PROPERTIES_DETAILS_)};goog.inherits(tc,Ma);tc.prototype.renderContent=function(t){var o=t.systemProperties,i=goog.dom.createDom;for(var n in o)o.hasOwnProperty(n)&&this.systemPropertiesRows_.push(i("tr","",i("td","",n),i("td","",o[n])));return i("div","report_table_container",i("table",{border:"1"},i("tbody","",this.systemPropertiesRows_)))};tc.prototype.getXmlReport=function(){var t="";if(this.checkbox_.checked){t+="<properties>";for(var o of this.systemPropertiesRows_){var i=o.querySelectorAll("td");t+='<property name="'+i[0].textContent+'" value="'+i[1].textContent+`"/>
`}t+=`</properties>
`}return t};var Nm=tc;sync.view.SystemPropertiesInfoPage=tc;namespace("sync.view");var oc=function(t,o){ci.call(this,t,o),this.pluginRows_=[],this.checkboxId_="include_plugins_info",this.checkboxLabel_=tr(msgs.INCLUDE_PLUGIN_DETAILS_)};goog.inherits(oc,Ma);oc.prototype.renderContent=function(t){var o=goog.dom.createDom;for(var i of t.plugins)this.pluginRows_.push(o("tr","",o("td","",i)));return o("div","report_table_container",o("table",{border:"1"},o("thead","",o("tr","",o("td","",tr(msgs.PLUGINS_)))),o("tbody","",this.pluginRows_)))};oc.prototype.getXmlReport=function(){var t="";if(this.checkbox_.checked){t+=`<plugins>
`;for(var o of this.pluginRows_)t+="<plugin>"+o.textContent+`</plugin>
`;t+=`</plugins>
`}return t};var Mm=oc;sync.view.PluginsInfoPage=oc;namespace("sync.view");var ic=function(t,o){ci.call(this,t,o),this.frameworkRows_=[],this.checkboxId_="include_frameworks_details",this.checkboxLabel_=tr(msgs.INCLUDE_FRAMEWORKS_DETAILS_)};goog.inherits(ic,Ma);ic.prototype.renderContent=function(t){var o=goog.dom.createDom;for(var i of t.frameworks)this.frameworkRows_.push(o("tr","",o("td","",i)));return o("div","report_table_container",o("table",{border:"1"},o("thead","",o("tr","",o("td","",tr(msgs.FRAMEWORKS_)))),o("tbody","",this.frameworkRows_)))};ic.prototype.getXmlReport=function(){var t="";if(this.checkbox_.checked){t+=`<frameworks>
`;for(var o of this.frameworkRows_)t+="<framework>"+o.textContent+`</framework>
`;t+=`</frameworks>
`}return t};var xm=ic;sync.view.FrameworksInfoPage=ic;namespace("sync.view");var Ud=function(t){this.problemDescriptionInputId_=t};Ud.prototype.getInfoPagesReport_=function(t){for(var o="",i=0;i<t.length;i++)o+=t[i].getXmlReport();return o};Ud.prototype.generateXmlReport=function(t){var o=goog.dom.getElement,i=`<?xml version="1.0" encoding="UTF-8"?>
<reportProblem>
`;return i+='<description xml:space="preserve">'+o(this.problemDescriptionInputId_).value+`</description>
<user>
<name>`+o("report_contact_name").value+`</name>
<company>`+o("report_contact_company").value+`</company>
<email>`+o("report_contact_email").value+`</email>
</user>
`,i+=this.getInfoPagesReport_(t),i+="</reportProblem>",i};var Rm=Ud;sync.view.XmlReportGenerator=Ud;goog.require("goog.net.IframeIo");namespace("sync.actions");var Re=function(t,o,i){_.call(this,{keyStrokeStr:t,displayName:tr(msgs.REPORT_PROBLEM_FROM_DROPDOWN_)}),this.reportURL_=sync.options.ServerOptions.getServerOption("com.oxygenxml.report.problems.url")||"https://www.oxygenxml.com/site-commons/php/feedback.php",this.message_="",this.emailAddressDialog_=null,this.emailAddressValidator_=o,this.xmlReportGenerator_=i};goog.inherits(Re,_);Re.prototype.actionPerformed=function(t){this.dialog_||this.createDialog_(),this.dialog_.onSelect(goog.bind(this.onDialogSubmit_,this,t)),this.refreshDialog_(),this.dialog_.show()};Re.prototype.onDialogSubmit_=function(t,o,i){if(o==="submit")if(this.validEmailProvided_())this.sendReport_(t);else{i.preventDefault();var n=goog.bind(function(r){r.key==="submit"&&(this.dialogElement_.querySelector("#report_contact_email").value=r.emailAddress,this.dialog_.hide(),this.sendReport_(t))},this);this.emailAddressDialog_=new Im(n),this.emailAddressDialog_.showEmailDialog()}else t()};Re.prototype.getEmailAddress_=function(){var t=null,o=this.dialogElement_.querySelector("#report_contact_email");return o&&(t=o.value),t};Re.prototype.validEmailProvided_=function(){return this.emailAddressValidator_.isEmailAddressValid(this.getEmailAddress_())};Re.prototype.generateXmlReport=function(){var t=[this.generalInfo_,this.systemProperties_,this.plugins_,this.frameworks_];return this.xmlReportGenerator_.generateXmlReport(t)};Re.prototype.sendReport_=function(t){var o=this.generateXmlReport();goog.net.IframeIo.send(this.reportURL_,goog.nullFunction,"POST",!0,{report:o}),t&&t()};Re.prototype.getProblemDescriptionForm_=function(){return[tr(msgs.REPORT_WILL_BE_SENT_TO_URL_),goog.dom.createDom("div",{style:"word-break: break-all; height: 20px; overflow: hidden; font-weight: bold; flex-shrink: 0;"},this.reportURL_),goog.dom.createDom("label",{for:Re.PROBLEM_DESCRIPTION_ID},tr(msgs.PROBLEM_DESCRIPTION_)),goog.dom.createDom("textarea",{id:Re.PROBLEM_DESCRIPTION_ID},this.message_)]};Re.prototype.renderDialogContents_=function(){var t=goog.dom.createDom("div",{id:"report-problem-tabs"}),o=goog.dom.createDom("div",{id:"tabpane_content"});goog.dom.append(this.dialogElement_,goog.dom.createDom("div",{id:"report-problem-wrapper",style:"position: relative;top: 0; height: 100%"},this.getProblemDescriptionForm_(),tr(msgs.ADDITIONAL_INFO_),t,o)),this.generalInfo_=new Dm("generalinfo",tr(msgs.GENERAL_INFO_)),this.systemProperties_=new Nm("sysprop",tr(msgs.SYSTEM_PROPERTIES_)),this.plugins_=new Mm("rplugins",tr(msgs.PLUGINS_)),this.frameworks_=new xm("rframeworks",tr(msgs.FRAMEWORKS_));var i=new kd;i.addTabs([this.generalInfo_.getTabConfig(),this.systemProperties_.getTabConfig(),this.plugins_.getTabConfig(),this.frameworks_.getTabConfig()]),i.render(t,o)};Re.prototype.createDialog_=function(){var t=workspace.createDialog();t.setTitle(tr(msgs.REPORT_PROBLEM_)),t.setButtonConfiguration([{key:"submit",caption:tr(msgs.SUBMIT_)},{key:"cancel",caption:tr(msgs.CANCEL_)}]);var o=480,i=650;t.setPreferredSize(o,i),t.setResizable(!0),this.dialog_=t,this.dialogElement_=this.dialog_.getElement(),this.renderDialogContents_()};Re.prototype.setErrorMessage=function(t){return this.message_=t,this};Re.prototype.getGeneralInfoUrl_=function(){return window.location.protocol+"//"+window.location.host+"/"+window.location.pathname.split("/")[1]+"/rest/"+it+"/generalinfo"};Re.prototype.refreshDialog_=function(){sync.rest.callAsync("RESTStatus.getReportInfo",{}).then(goog.bind(function(t){this.systemProperties_.render(t),this.plugins_.render(t),this.frameworks_.render(t)},this)),goog.net.XhrIo.send(this.getGeneralInfoUrl_(),goog.bind(function(t){var o=t.target;if(o.getStatus()==200){var i=JSON.parse(o.getResponseText());this.generalInfo_.render(i)}},this),"GET")};Re.instance=null;Re.PROBLEM_DESCRIPTION_ID="problem-description-input";Re.getInstance=function(){return Re.instance||(Re.instance=new Re("",new Ld,new Rm(Re.PROBLEM_DESCRIPTION_ID))),Re.instance};Re.prototype.dispose=function(){this.dialog_&&this.dialog_.dispose(),this.emailAddressDialog_&&this.emailAddressDialog_.dispose()};var zo=Re;sync.actions.ReportProblemAction=Re;namespace("sync");var pn=function(t){this.workspaceState_=t};pn.prototype.handleFatalException=function(t){var o=t instanceof sync.RESTException;(!o||t.isServerProblem())&&(o&&t.isSessionExpired()?this.recoverUsingClientBackup(t):this.recoverUsingServerState(t))};pn.prototype.createRecoveryDialog_=function(t){var o=t||tr(msgs.PROBLEM_HAS_OCCURRED_),i=workspace.createDialog();return i.setTitle(tr(msgs.PROBLEM_HAS_OCCURRED_)),i.setResizable(!0),i.setPreferredSize(500),i.getElement().textContent=o,goog.dom.classlist.add(i.getElement(),"error-dialog-content"),i};pn.prototype.recoverUsingServerState=function(t){if(!this.workspaceState_.isAboutToReload()){console.log(t,t.stack),this.workspaceState_.initReload();var o=this.createRecoveryDialog_(t.message);throw this.fillGenericFatalExceptionDialog_(t,o),o.show(),t}};pn.prototype.showRecoverDialogForSessionLost=function(){if(!this.workspaceState_.isAboutToReload()){this.workspaceState_.initReload();var t=this.createRecoveryDialog_(tr(msgs.LOST_SESSION_));this.fillSessionLostDialog_(t),t.show()}};pn.prototype.recoverUsingClientBackup=function(t){if(!this.workspaceState_.isAboutToReload()){console.log(t,t.stack),this.workspaceState_.initReload();var o=this.createRecoveryDialog_(t.message);throw this.fillSessionLostDialog_(o),o.show(),t}};pn.prototype.fillSessionLostDialog_=function(t){this.workspaceState_.isEditorBackupAvailable()?(t.getElement().appendChild(goog.dom.createDom("div","",tr(msgs.INSTRUCTION_BACKUP_DOWNLOAD_))),t.setButtonConfiguration([{key:"backup",caption:tr(msgs.DOWNLOAD_BACKUP_)},{key:"reload",caption:tr(msgs.RELOAD_)}]),t.onSelect((o,i)=>{o==="backup"?(i.preventDefault(),this.downloadBackup_()):this.workspaceState_.hardReload()})):(t.setButtonConfiguration([{key:"reload",caption:tr(msgs.RELOAD_)}]),t.onSelect(()=>{this.workspaceState_.hardReload()}))};pn.prototype.fillGenericFatalExceptionDialog_=function(t,o){var i=sync.util.error.serializeException(t);o.setButtonConfiguration([{key:"recover",caption:tr(msgs.ATTEMPT_TO_RECOVER_)},{key:"report",caption:tr(msgs.REPORT_PROBLEM_)}]),o.onSelect(goog.bind(function(n,r){r.preventDefault(),n==="recover"?(this.workspaceState_.saveDocSessionInfoForReload(workspace.currentEditor),this.workspaceState_.hardReload()):(o.dispose(),zo.getInstance().setErrorMessage(i).actionPerformed(()=>{this.workspaceState_.hardReload()}))},this))};pn.prototype.downloadBackup_=function(){var{backupName:t,backup:o}=this.workspaceState_.getEditorBackup(),i="data:application/octet-stream;base64,"+o,n=document.createElement("a");if(navigator.msSaveBlob){var r=goog.crypt.base64.decodeStringToByteArray(o);navigator.msSaveBlob(new Blob([new Int8Array(r)],{type:"application/octet-stream;base64"}),t);return}"download"in n&&!goog.userAgent.product.EDGE_OR_IE?(n.href=i,n.setAttribute("download",t),n.style.display="none",n.addEventListener("click",function s(a){a.stopPropagation(),this.removeEventListener("click",s)}),document.body.appendChild(n),setTimeout(function(){n.click(),document.body.removeChild(n)},66)):sync.util.open(i)?alert("Your browser does not support backup downloads."):location.href=i};var Bd=pn;sync.WorkspaceErrorHandler=pn;namespace("sync.support");var Ye=function(t,o,i,n,r,s,a,l){sync.api.ConcurrentEditingManager.call(this),this.editor_=t;let c=t.getEditingSupport();this.editingSupport_=c,this.controller_=c.getController(),this.selectionManager_=c.getSelectionManager(),this.docWrapper_=r,this.viewportScroller_=s,this.docId_=i,this.layoutChangeTracker_=c.getLayoutChangeTracker(),this.domUpdateSilencer_=a,this.dialogBuilder_=new Hd,this.workspaceState_=l,this.serverNotificationsManager_=null,this.roomId_=null,this.roomType_=null,this.isCreator_=o.isRoomCreator,this.isKeepingIncompatibleActions_=sync.util.isOptionTrue(o.keepIncompatibleActions),this.syncAction_=null,this.divergedSelectionRestorer_=null,this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_),this.syncThrottle_=new Em(()=>this.scheduleSync_());var d=o.roomId;d&&(this.joinRoom_(d,o.roomType,n),goog.events.listen(t,sync.api.Editor.EventTypes.ACTIONS_LOADED,goog.bind(this.applyConcurrentEditingLimitations_,this)))};goog.inherits(Ye,sync.api.ConcurrentEditingManager);Ye.isEnabled=function(){return!!sync.options.ServerOptions.getServerOption("room.factory.registered")};Ye.prototype.createRoomWithType=function(t){return this.createRoomInternal_(t)};Ye.prototype.createRoomInternal_=function(t){var o={roomType:t,docId:this.docId_};return this.selectionManager_.getSelection().save().extend(o),sync.rest.callAsync("RESTDocumentManager.createRoomFromDocument",o).then(goog.bind(this.onRoomCreated_,this,t))};Ye.prototype.isInRoom=function(){return!!this.roomId_};Ye.prototype.isCreator=function(){return this.isCreator_};Ye.prototype.getRoomType=function(){return this.roomType_};Ye.prototype.isKeepingIncompatibleActions=function(){return this.isKeepingIncompatibleActions_};Ye.prototype.onRoomCreated_=function(t,o){return this.isCreator_=!0,this.controller_.applyUpdate_(o.docUpdate),this.joinRoom_(o.roomId,t,[]),this.applyConcurrentEditingLimitations_(),o.roomId};Ye.prototype.joinRoom_=function(t,o,i){this.roomId_=t,this.roomType_=o;var n=this.editingSupport_.getXmlModel(),r=new bd(this.controller_);this.registerDisposable(r);var s=new am(n,this.selectionManager_,this.layoutChangeTracker_,this.docWrapper_,r,this.a11y);this.registerDisposable(s),r.setPeerSelectionsFromServer(i);var a=new lm(this.controller_,this.selectionManager_);this.registerDisposable(a),this.connectServerNotificationsManager_(),this.synchronizer_=new Rd(this.docId_,this.controller_,this.selectionManager_,this.domUpdateSilencer_,n,this.viewportScroller_),this.registerDisposable(this.synchronizer_),this.syncAction_=new jd(this.synchronizer_),this.registerDisposable(this.syncAction_),this.divergedSelectionRestorer_=new _m(this.synchronizer_),this.registerDisposable(this.divergedSelectionRestorer_);try{this.dispatchEvent(new goog.events.Event(sync.api.ConcurrentEditingManager.EventType.ROOM_CREATED))}catch(l){console.error("Error in ROOM_CREATED event handler",l)}try{this.dispatchEvent(new goog.events.Event(sync.api.ConcurrentEditingManager.EventType.CONCURRENT_EDITING_STARTED))}catch(l){console.error("Error in ROOM_JOINED event handler",l)}};Ye.prototype.applyConcurrentUpdate=function(t,o){this.synchronizer_.applyConcurrentUpdate(t,o)};Ye.prototype.getDivergedSelectionRestorer=function(){return this.divergedSelectionRestorer_};Ye.prototype.getSyncThrottle=function(){return this.syncThrottle_};Ye.prototype.applyConcurrentEditingLimitations_=function(){if(this.editor_.listen(sync.api.Editor.EventTypes.LINK_OPENED,r=>r.forcePageReload=!0,!0),!this.isKeepingIncompatibleActions_){var t,o=["Author/DitaMapEditWithExpandedTopics"],i=this.editingSupport_.getActionsManager();for(t=0;t<o.length;t++)i.unregisterAction(o[t]),i.refreshActionsStatus(o[t]);var n=["Author/Reply","Author/MarkAsDone"];for(t=0;t<n.length;t++)i.refreshActionsStatus(n[t])}};Ye.prototype.scheduleSync_=function(){this.isDisposed()||(this.domUpdateSilencer_.areUpdatesSilenced()?this.domUpdateSilencer_.delayIfUpdatesAreSilenced().then(()=>{this.editingSupport_.scheduler.schedulePeerSync(this.syncAction_)}):this.editingSupport_.scheduler.schedulePeerSync(this.syncAction_))};Ye.prototype.shouldSetEditorDirty=function(t){let o;return t.isBackgroundSync?o=this.getRoomType()===Tr.ROOM_TYPE:o=!0,o};Ye.openOutsideRoom=function(){var t=new E(window.location.href),o=t.getUrlParameters();delete o.roomId,delete o.roomType,delete o.url;var i=new sync.api.Editor.LinkOpenedEvent(t.getUrlParam("url"),!1,o,sync.api.Editor.LinkOpenedEvent.Target.SELF);workspace.openLink(i)};Ye.prototype.connectServerNotificationsManager_=function(){this.serverNotificationsManager_=new Am(this.roomId_,this.docId_,this.workspaceState_,t=>new Is(t)),this.registerDisposable(this.serverNotificationsManager_),this.serverNotificationsManager_.listen(dn.SYNC,()=>this.syncThrottle_.requestSync()),this.serverNotificationsManager_.listen(dn.ROOM_CLOSED,()=>{this.syncAction_.dispose(),this.roomType_===Tr.ROOM_TYPE?this.dialogBuilder_.showWarnDialogWithLeaveAndDownload(tr(msgs.SHARED_SESSION_CLOSED_),tr(msgs.SHARED_SESSION_CLOSED_MESSAGE_),tr(msgs.FILE_OPEN_)):this.dialogBuilder_.showWarnDialogWithDownload(tr(msgs.CONCURRENT_EDITING_ERROR_TITLE_),tr(msgs.CONCURRENT_SESSION_CLOSED_UNEX),goog.dom.createDom("div","",tr(msgs.CONCURRENT_EDITING_DOWNLOAD_FILE_),goog.dom.createDom("br"),tr(msgs.CONCURRENT_EDITING_REOPEN_FILE_),goog.dom.createDom("br"),tr(msgs.ERROR_CONTACT_ADMINISTRATOR_)))}),this.serverNotificationsManager_.listen(dn.RECONNECT_FAILED__ROOM_CLOSED,()=>{this.syncAction_.dispose(),this.showSessionLostDoReloadDialog_()}),this.serverNotificationsManager_.listen(dn.RECONNECT_FAILED__PEER_REMOVED,()=>{this.syncAction_.dispose(),this.showSessionLostDoReloadDialog_()})};Ye.prototype.showSessionLostDoReloadDialog_=function(){new Bd(this.workspaceState_).recoverUsingClientBackup(new Error(tr(msgs.LOST_SESSION_)))};Ye.prototype.closeSocketWithoutLeavingRoom=function(){this.serverNotificationsManager_&&this.serverNotificationsManager_.closeSocketWithoutLeavingRoom()};var xs=Ye;sync.support.ConcurrentEditingManager=Ye;namespace("sync.support");var Rs=function(){};Rs.prototype.createWarningDialog=function(t,o,i){var n=o||tr(msgs.INFO_);return this.warnDialog_||(this.warnDialog_=this.createDialog(n)),this.setDialogContent(this.contentContainer_,t),this.setDialogContent(this.detailsContainer_,i),this.warnDialog_};Rs.prototype.setDialogContent=function(t,o){goog.dom.removeChildren(t),o&&(typeof o!="string"?t.appendChild(o):t.textContent=o)};Rs.prototype.createDialog=function(t){var o=workspace.createDialog();o.setTitle(t),o.setContentPreferredSize(500,null);var i=o.getElement();return i.style.lineHeight="normal",this.contentContainer_=goog.dom.createDom("div"),this.detailsContainer_=goog.dom.createDom("div",{style:"margin-left: 74px;"}),i.append(goog.dom.createDom("div",{style:"display: flex; align-items: center"},goog.dom.createDom("div",{className:"error-triangle-image",style:"background-repeat: no-repeat;"}),this.contentContainer_),this.detailsContainer_),o};Rs.prototype.showWarnDialogWithDownload=function(t,o,i){var n=this.createWarningDialog(o,t,i);n.setButtonConfiguration([{key:"download",cancel:!0,caption:tr(msgs.DOWNLOAD_FILE_)}]),n.onSelect(function(r,s){var a=new Jl(workspace.currentEditor,"");a.actionPerformed(),s.preventDefault()}),n.show()};Rs.prototype.showWarnDialogWithLeaveAndDownload=function(t,o,i){var n=this.createWarningDialog(o,t);n.setButtonConfiguration([{key:"open",default:!0,caption:i},{key:"download",cancel:!0,caption:tr(msgs.DOWNLOAD_)}]),n.onSelect(function(r,s){if(r==="open")xs.openOutsideRoom(),n.hide();else if(r==="download"){var a=new Jl(workspace.currentEditor,"");a.actionPerformed(),s.preventDefault()}}),n.show()};var Hd=Rs;sync.support.ConcurrentDialogBuilder=Rs;namespace("sync.concurrent");var Mr=function(t){_.call(this,{}),this.synchronizer_=t,this.isDisposed_=!1,this.dialogBuilder_=new Hd,this.isRespectingDomUpdateSilencer=!0};goog.inherits(Mr,_);Mr.prototype.execute=function(){return this.isDisposed_?Promise.resolve():this.synchronizer_.sync().catch(goog.bind(this.reportSyncFailed_,this))};Mr.prototype.mergeIn=function(t){let o=!1;return t instanceof Mr?o=!0:t instanceof no&&(t.mergeSyncAction(this),o=!0),o};Mr.prototype.reportSyncFailed_=function(){this.isDisposed_||this.dialogBuilder_.showWarnDialogWithLeaveAndDownload(tr(msgs.SYNCHRONIZATION_FAILED_TITLE_),tr(msgs.SYNCHRONIZATION_FAILED_),tr(msgs.LEAVE_SHARED_SESSION_))};Mr.prototype.dispose=function(){this.isDisposed_=!0};var jd=Mr;sync.concurrent.SyncAction=Mr;goog.require("goog.structs.Queue");namespace("sync.ctrl");var di=function(){this.queue_=new goog.structs.Queue,this.lastMergeableAction_=null};di.prototype.clear=function(){this.resetState_()};di.prototype.resetState_=function(){this.queue_.clear(),this.lastMergeableAction_=null};di.prototype.dequeue=function(){var t=this.queue_.dequeue();return t&&this.lastMergeableAction_===t.action&&(this.lastMergeableAction_=null),this.queue_.isEmpty()&&this.resetState_(),t};di.prototype.tryMergeIntoLastAction=function(t){if(goog.isFunction(t.mergeIn)&&this.lastMergeableAction_){var o=t.mergeIn(this.lastMergeableAction_);if(o)return this.lastMergeableAction_}return null};di.prototype.areAllExecutedClientSide=function(){return goog.array.every(this.queue_.getValues(),t=>goog.isFunction(t.action.wasExecutedClientSide)&&t.action.wasExecutedClientSide(),this)};di.prototype.enqueue=function(t){this.queue_.enqueue(t),t.type!==Qe.ActionType.UPDATE&&(this.lastMergeableAction_=t.action)};di.prototype.getValues=function(){return this.queue_.getValues()};di.prototype.hasPendingSync=function(){for(let t of this.queue_.getValues()){if(t.action instanceof jd)return!0;if(t.action instanceof no)return t.action.doesConcurrentSync()}return!1};di.prototype.hasNonUpdateActions=function(){for(let t of this.queue_.getValues())if(t.type!==Qe.ActionType.UPDATE)return!0;return!1};di.prototype.dropNonUpdateActions=function(){var t=this.queue_.getValues();this.queue_.clear();var o=null;for(let i of t)if(i.action instanceof no&&i.action.doesConcurrentSync()&&(o=i.action.getMergedSyncAction()),i.type===Qe.ActionType.UPDATE){this.enqueue(i);break}o&&this.queue_.isEmpty()&&this.enqueue({action:o,type:Qe.ActionType.UPDATE})};var Om=di;sync.ctrl.ActionsQueue=di;goog.require("goog.events");goog.require("goog.events.EventTarget");namespace("sync.ctrl");var B=function(t,o){goog.events.EventTarget.call(this),this.workspaceState_=t,this.domUpdateSilencer_=o,this.ongoingActionDescriptor_=null,this.actionQueue_=new Om,this.dropping_=!1,this.eventHandler_=new goog.events.EventHandler(this),this.eventHandler_.listen(document.body,[goog.events.EventType.MOUSEDOWN,goog.events.EventType.TOUCHSTART],this.blockMouseWhileDropping_,!0)};goog.inherits(B,goog.events.EventTarget);B.prototype.actionTimeoutMs_=100;B.prototype.disposeInternal=function(){this.eventHandler_.removeAll()};B.ActionType={ASYNC:"async",HANDLES_BLOCKING:"handles_blocking",UPDATE:"update"};B.prototype.blockMouseWhileDropping_=function(t){this.workspaceState_&&this.workspaceState_.isAboutToReload()||this.ongoingActionDescriptor_&&(this.ongoingActionDescriptor_.type===B.ActionType.HANDLES_BLOCKING||(this.actionQueue_.hasNonUpdateActions()||this.ongoingActionDescriptor_.type!==B.ActionType.UPDATE)&&(this.ongoingActionDescriptor_.isCausedByIme||(t.stopPropagation(),t.preventDefault(),this.startDropping_())))};B.prototype.getDefaultActionType_=function(t){return t instanceof ur?B.ActionType.ASYNC:B.ActionType.HANDLES_BLOCKING};B.prototype.schedule=function(t,o,i){if(this.isDisposed())return!1;var n=o||this.getDefaultActionType_(t),r=this.ongoingActionDescriptor_===null;if(t){var s={action:t,type:n,isCausedByIme:Boolean(i)};goog.isFunction(t.captureBrowserEvent)&&t.captureBrowserEvent(),r?(this.executeClientSide_(t),this.executeAction_(s)):this.scheduleLater_(s),this.dispatchEvent(new goog.events.Event(B.EventType.ACTION_SCHEDULED))}return r};B.prototype.scheduleLater_=function(t){this.dropping_||this.ongoingActionDescriptor_&&this.ongoingActionDescriptor_.type===B.ActionType.HANDLES_BLOCKING||this.enqueue_(t)};B.prototype.getFollowUpAction=function(t){var o=null;return goog.isFunction(t.getFollowUp)&&(o=t.getFollowUp(),o&&(o.action=_.willInvokeTheCallback(o.action),o.type||(o.type=B.ActionType.HANDLES_BLOCKING))),o};B.prototype.skipQueue=function(t){if(!this.isDisposed()){var o=this.actionQueue_.getValues();this.actionQueue_.clear(),this.enqueue_(t),o.forEach(goog.bind(this.enqueue_,this))}};B.prototype.enqueue_=function(t){var o=t.action,i=this.actionQueue_.tryMergeIntoLastAction(o);i?this.reExecuteClientSide_(i):(this.areAllExecutedClientSide()&&this.executeClientSide_(o),this.actionQueue_.enqueue(t))};B.prototype.areAllExecutedClientSide=function(){return this.actionQueue_.areAllExecutedClientSide()?this.ongoingActionDescriptor_?goog.isFunction(this.ongoingActionDescriptor_.action.wasExecutedClientSide)&&this.ongoingActionDescriptor_.action.wasExecutedClientSide():!0:!1};B.prototype.executeClientSide_=function(t){if(this.isClientSideAction_(t)&&!t.wasExecutedClientSide()){var o=t;try{o.actionPerformedClientSide()}catch(i){console.warn(i)}}};B.prototype.reExecuteClientSide_=function(t){if(this.isClientSideAction_(t)){var o=t;o.wasExecutedClientSide()&&(o.rollBackClientSide(),o.actionPerformedClientSide())}};B.prototype.executeAction_=function(t){this.ongoingActionDescriptor_=t,t.type===B.ActionType.HANDLES_BLOCKING&&this.stopDropping_(),this.domUpdateSilencer_.areUpdatesSilenced()?this.domUpdateSilencer_.delayIfUpdatesAreSilenced().then(()=>{_.executeAction(t.action,this.actionTimeoutMs_,()=>{this.processExecutedAfterSilencer_(t)})}):_.executeAction(t.action,this.actionTimeoutMs_,()=>{this.processExecutedAfterSilencer_(t)})};B.prototype.processExecutedAfterSilencer_=function(t){this.domUpdateSilencer_.areUpdatesSilenced()?this.domUpdateSilencer_.delayIfUpdatesAreSilenced().then(()=>this.processExecutedAndFireNext_(t)):this.processExecutedAndFireNext_(t)};B.prototype.isOngoingActionRespectingDomUpdateSilencer=function(){return this.ongoingActionDescriptor_?Boolean(this.ongoingActionDescriptor_.action.isRespectingDomUpdateSilencer):!0};B.prototype.processExecutedAndFireNext_=function(t){if(!this.isDisposed()){this.ongoingActionDescriptor_=null;var o=t.action;if(this.isClientSideAction_(o))o.shouldRollback()&&this.applyServerUpdatesForClientSideAction_(o);else{t.type===B.ActionType.HANDLES_BLOCKING&&this.actionQueue_.dropNonUpdateActions();var i=this.getFollowUpAction(o);i?this.skipQueue(i):this.reschedule_()}this.actionQueue_.hasNonUpdateActions()||this.stopDropping_();var n=this.actionQueue_.dequeue();n&&this.executeAction_(n)}};B.prototype.applyServerUpdatesForClientSideAction_=function(t){var o=this.actionQueue_.getValues();goog.array.forEachRight(o,goog.bind(this.rollbackAction_,this)),t.rollBackClientSide(),this.reschedule_()};B.prototype.reschedule_=function(){var t=this.actionQueue_.getValues();this.actionQueue_.clear(),t.forEach(goog.bind(this.enqueue_,this))};B.prototype.rollbackAction_=function(t){if(this.isClientSideAction_(t.action)){var o=t.action;o.wasExecutedClientSide()&&o.rollBackClientSide()}};B.prototype.stopDropping_=function(){this.dropping_&&(this.dropping_=!1,this.dispatchEvent(new B.DroppingStateEvent(B.EventType.STOPPED_DROPPING)))};B.prototype.startDropping_=function(){this.dropping_||(this.dropping_=!0,this.dispatchEvent(new B.DroppingStateEvent(B.EventType.STARTED_DROPPING)))};B.DroppingStateEvent=function(t){this.type=t};B.EventType={STARTED_DROPPING:"started_dropping",STOPPED_DROPPING:"stopped_dropping",ACTION_SCHEDULED:"action_scheduled"};B.prototype.isClientSideAction_=function(t){return t instanceof no};B.prototype.schedulePeerSync=function(t){this.isDisposed()||this.actionQueue_.hasPendingSync()||this.scheduleUpdate(t)};B.prototype.scheduleUpdate=function(t){if(!this.isDisposed()){var o={action:t,type:B.ActionType.UPDATE};if(this.ongoingActionDescriptor_===null)this.executeAction_(o);else{var i=this.actionQueue_.tryMergeIntoLastAction(t);i||this.actionQueue_.enqueue(o)}}};B.prototype.hasNonUpdateActions=function(){return this.actionQueue_.hasNonUpdateActions()||this.ongoingActionDescriptor_&&this.ongoingActionDescriptor_.type!==B.ActionType.UPDATE};var Qe=B;sync.ctrl.Scheduler=B;goog.require("goog.log");namespace("sync.actions.paste");var xr=class{constructor(o){this.pasteHelper_=o,this.logger_=goog.log.getLogger("PastedContentDescriptor")}isPastedFromWebapp(){var o="";try{o=localStorage.getItem("copyId")}catch{}var i=this.pasteHelper_.div,n=sync.util.getInnerHTML(i),r=this.determinePasteId_(n,i),s=!1;o&&r&&r===o&&(s=!0);var a=8;return(goog.userAgent.IPHONE||goog.userAgent.IPAD)&&parseInt(goog.userAgent.platform.VERSION,10)<a&&(s=this.isFromWebAppIosWorkaround(i)),s}determinePasteId_(o,i){var n="",r=i.querySelector('[id^="oxy-"]');return r&&(n=r.id.substring("oxy-".length),goog.log.info(this.logger_,"span id :"+n)),n}isFromWebAppIosWorkaround(o){goog.DEBUG&&(goog.log.info(this.logger_,"number of data-oxy elements : "+o.querySelectorAll('[data-oxy="true"]').length),goog.log.info(this.logger_,"number of oxy-img elements : "+o.querySelectorAll('[class="oxy-img"]').length));var i=!1;return(o.querySelector('[data-oxy="true"]')||o.querySelector('[class="oxy-img"]'))&&(goog.log.info(this.logger_,"the content was copied from the webApp but not through our mechanism"),i=!0),i}isDataImageUrlPasted(){var o=this.pasteHelper_.div,i=sync.util.getInnerHTML(o),n=o.textContent.trim();return this.isDataImageUrl_(i)&&this.isDataImageUrl_(n)}isDataImageUrl_(o){return goog.string.startsWith(o,"data:image/")}getPastedHTMLFromEditableDiv(){return sync.util.getInnerHTML(this.pasteHelper_.div)}getPastedTextFromEditableDiv(){var o=this.pasteHelper_.div;return o.textContent.trim()}getPastedHTML(){return this.pasteHelper_.html}getPastedText(){return this.pasteHelper_.plain}getPastedRtf(){return this.pasteHelper_.rtf}getPastedImage(){return this.pasteHelper_.pastedImage}};goog.require("goog.log");namespace("sync.actions.paste");var wo=class{constructor(o,i){this.pastedContentDescriptor_=i,this.controller_=o}handlePaste(o){}canHandlePaste(){return!1}};goog.require("goog.log");namespace("sync.actions.paste");var xa=class extends wo{constructor(o,i){super(o,i);this.logger_=goog.log.getLogger("WebappPasteHandler")}handlePaste(o){goog.log.info(this.logger_,"the pasted text is from web app.");var i={id:this.controller_.docId};return o.extend(i),sync.rest.callAsyncNative("RESTDocumentControllers.documentController.pasteFragment",i).then(n=>this.controller_.applyUpdate_(n))}canHandlePaste(){return this.pastedContentDescriptor_.isPastedFromWebapp()}};var Vd=class{constructor(o){this.fileReader_=o}onLoad(){return new Promise((o,i)=>{var n=()=>o(this.fileReader_.result),r=()=>i(this.fileReader_.error);this.fileReader_.readyState===FileReader.DONE?setTimeout(this.fileReader_.error?r:n,0):(this.fileReader_.onload=n,this.fileReader_.onerror=r,this.fileReader_.onabort=r)})}};var gn=class{constructor(o){this.newFileHelper_=new ii,this.baseUrl_=o}uploadImages(o){var i=Promise.resolve(),n=o.getElementsByTagName("img");return goog.array.toArray(n).filter(r=>this.isDataImageUrl_(r.src)).forEach(r=>{i=i.then(()=>this.uploadImage(r.src)).then(s=>r.src=s)}),i.then(()=>sync.util.getInnerHTML(o))}uploadImage(o,i){return new Promise((n,r)=>{this.newFileHelper_.uploadImage(i,o,this.baseUrl_,s=>{s?n(s):r(new Error)})})}isDataImageUrl_(o){return o.startsWith("data:image/")}};goog.require("goog.log");namespace("sync.actions.paste");var Wd=class extends wo{constructor(o,i,n){super(o,i);this.baseUrl_=n,this.logger_=goog.log.getLogger("ImagePasteHandler")}handlePaste(o){var i=this.pastedContentDescriptor_.getPastedImage(),n=new Vd(i.fileReader);return n.onLoad().then(r=>new gn(this.baseUrl_).uploadImage(r,i.name).then(s=>this.controller_.insertHtml("<img src='"+s+"'>",o))).catch(r=>goog.log.error(this.logger_,"Error on pasting image",r))}canHandlePaste(){return this.pastedContentDescriptor_.getPastedImage()!=null}};goog.require("goog.log");namespace("sync.actions.paste");var Kd=class extends wo{constructor(o,i,n){super(o,i);this.baseUrl_=n}handlePaste(o){return this.insertPastedDataImageElement_(o)}canHandlePaste(){return this.pastedContentDescriptor_.isDataImageUrlPasted()}insertPastedDataImageElement_(o){var i=this.pastedContentDescriptor_.getPastedHTML()||this.pastedContentDescriptor_.getPastedText();return new gn(this.baseUrl_).uploadImage(i).then(n=>this.controller_.insertHtml("<img src='"+n+"'>",o))}};goog.require("goog.log");namespace("sync.actions.paste");var Gd=class extends wo{constructor(o,i){super(o,i)}handlePaste(o){var i=this.getValidUrlPasted(this.getPastedContent());return this.controller_.insertHtml(i,o,!0)}canHandlePaste(){var o=this.getPastedContent(),i=o&&this.getValidUrlPasted(o);return!!i}getPastedContent(){return this.pastedContentDescriptor_.getPastedHTML()||this.pastedContentDescriptor_.getPastedText()||this.pastedContentDescriptor_.getPastedHTMLFromEditableDiv()||this.pastedContentDescriptor_.getPastedTextFromEditableDiv()}getValidUrlPasted(o){try{if(o.includes("://")&&!o.includes(" ")){var i=new URL(o);if(i.protocol==="http:"||i.protocol==="https:")return o}}catch{}return null}};goog.require("goog.log");namespace("sync.actions.paste");var Ra=class extends wo{constructor(o,i){super(o,i)}handlePaste(o){return this.controller_.insertPastedText(this.pastedContentDescriptor_.getPastedText(),o)}getPastedText_(){return this.pastedContentDescriptor_.getPastedText()||this.pastedContentDescriptor_.getPastedTextFromEditableDiv()}canHandlePaste(){return this.pastedContentDescriptor_.getPastedHTML()?!1:this.getPastedText_()}};function Jv(t){for(var o=[],i=0;i<t.length;i+=2)o.push(parseInt(t.substr(i,2),16));return o}var Pm="\\nonshppict",$v="{\\pict",qd=class{constructor(o){this.rtf_=o,this.crtIndex_=0}getImages(){for(var o=[];;){var i=this.getNextImage_();if(!i)break;if(i.isDisplayed){var n=this.getBase64Image_(i.start,i.end);o.push(n)}}return o}getNextImage_(){var o=this.rtf_.indexOf($v,this.crtIndex_);if(o===-1)return null;this.crtIndex_=o;var i=this.skipToImageDataStart_(),n=this.rtf_.indexOf("}",i);this.crtIndex_=n;var r=this.isDisplayedImage_(o);return{start:i,end:n,isDisplayed:r}}skipToImageDataStart_(){for(this.crtIndex_+=1;;)if(this.skipWhitespace_(),this.getCurrentChar_()==="\\")this.parseControlWordOrSymbol_();else if(this.getCurrentChar_()==="{")this.skipGroup();else break;return this.crtIndex_}skipWhitespace_(){for(;this.isWhitespace(this.getCurrentChar_());)this.crtIndex_+=1}getCurrentChar_(){return this.rtf_[this.crtIndex_]}skipGroup(){for(var o=0;;){var i=this.getCurrentChar_();if(i==="{"?o+=1:i==="}"&&(o-=1),this.crtIndex_+=1,o===0)break}}parseControlWordOrSymbol_(){if(this.crtIndex_+=1,this.getCurrentChar_().match(/[a-z]/))return this.parseControlWord_();var o=this.getCurrentChar_();return this.crtIndex_+=1,o}parseControlWord_(){for(var o="";this.getCurrentChar_().match(/[a-z]/);)o+=this.getCurrentChar_(),this.crtIndex_+=1;var i=this.getCurrentChar_();if(this.isWhitespace(i))o+=i,this.crtIndex_+=1;else if(i.match(/[0-9]/)||i==="-")for(o+=i,this.crtIndex_+=1;this.getCurrentChar_().match(/[0-9]/);)o+=this.getCurrentChar_(),this.crtIndex_+=1;return o}getBase64Image_(o,i){var n=this.rtf_.substring(o,i).replace(/[^a-fA-F0-9]/g,""),r=Jv(n),s=goog.crypt.base64.encodeByteArray(r);return"data:image/png;base64,"+s}isWhitespace(o){return o===" "||o==="	"||o===`
`||o==="\r"}isDisplayedImage_(o){for(var i=o;i>0&&this.isWhitespace(this.rtf_[i-1]);)i--;var n=this.rtf_.substring(i-Pm.length,i);return n!==Pm}};var Oa=class{constructor(o){this.div_=o}fixupImageReferencesOnPaste(o){var i=this.div_.getElementsByTagName("img"),n=goog.array.every(i,this.isLocalImage_,this);if(n&&o){var r=new qd(o).getImages();if(i.length===r.length)for(var s=0;s<r.length;s++)i[s].src=r[s]}}isLocalImage_(o){return o.src.startsWith("file:/")}};goog.require("goog.log");namespace("sync.actions.paste");var Xd=class extends wo{constructor(o,i,n,r){super(o,i);this.baseUrl_=r,this.pasteHelper_=n}handlePaste(o){var i=this.pasteHelper_.div;return new Oa(i).fixupImageReferencesOnPaste(this.pastedContentDescriptor_.getPastedRtf()),new gn(this.baseUrl_).uploadImages(i).then(()=>{var n=this.pastedContentDescriptor_.getPastedText();return sync.style.isInsideSpacePreserve(o.restore(),this.controller_.getXmlModel())&&n?this.controller_.insertText(n,o):this.controller_.insertHtml(this.pastedContentDescriptor_.getPastedHTML(),o)})}canHandlePaste(){return!0}};namespace("sync.actions.paste");var zd=class{constructor(o,i,n,r){this.selectionManager_=r,this.pastedContentDescriptor_=new xr(n),this.specificHandlers_=[new xa(i,this.pastedContentDescriptor_),new Wd(i,this.pastedContentDescriptor_,o),new Kd(i,this.pastedContentDescriptor_,o),new Gd(i,this.pastedContentDescriptor_),new Ra(i,this.pastedContentDescriptor_),new Xd(i,this.pastedContentDescriptor_,n,o)]}handlePaste(o){o=o||goog.nullFunction;var i=this.selectionManager_.getSelection().save(),n=this.specificHandlers_.find(r=>r.canHandlePaste());n&&n.handlePaste(i).finally(o)}};goog.require("goog.log");namespace("sync.actions");var nc=function(t,o,i,n){I.call(this),this.pasteHandler_=new zd(t,o,i,n)};goog.inherits(nc,I);nc.prototype.actionPerformed=function(t){this.pasteHandler_.handlePaste(t)};nc.prototype.isEnabledFor=function(){return!0};var rc=nc;sync.actions.PasteInsertText=nc;goog.require("goog.dom");goog.require("goog.userAgent");goog.require("goog.string");goog.require("goog.userAgent.platform");goog.require("goog.log");namespace("sync.actions");var Pa=class extends zl{constructor(o,i){super(o,i);this.pasteHelper={div:null,pastedImage:null,rtf:null,html:null,plain:null}}getFollowUpAction(){return null}getFollowUp(){return{action:this.getFollowUpAction(),type:Qe.ActionType.HANDLES_BLOCKING}}actionPerformed(o){var i=goog.bind(function(){this.capturePromise=null,o()},this);this.getClipboardPromise_().thenAlways(i)}getClipboardPromise_(){return this.capturePromise||(this.capturePromise=this.captureBrowserEvent()),this.capturePromise}captureBrowserEvent(){var o=this.createCaptureDiv();return this.pasteHelper.div=o,this.pasteHelper.pastedImage=null,this.capturePromise=this.pastedContentPresence_(o).then(goog.bind(this.cleanupCopyDiv,this,o)),this.capturePromise}createCaptureDiv(){var o=this.createEditableDivInView(),i=sync.util.getDocDomHelper();return i.appendChild(i.getDocument().body,o),o.focus(),It.setBrowserSelectionRaw(o,0,o,o.childNodes.length),o}pastedContentPresence_(o){var i=new goog.events.EventHandler(this);i.listenOnce(o,goog.events.EventType.PASTE,this.recordClipboardData_);var n=sync.events.listenOnce(o,goog.events.EventType.INPUT,!1,i);return goog.Promise.race([n,sync.util.promise.delayPromise(500)]).then(goog.bind(i.dispose,i))}recordClipboardData_(o){var i=o.getBrowserEvent().clipboardData;this.recordClipboardDifferentFormatsData_(i)}recordClipboardDifferentFormatsData_(o){this.pasteHelper.rtf=o.getData("text/rtf"),this.pasteHelper.plain=o.getData("text/plain"),this.pasteHelper.html=o.getData("text/html")}};goog.require("goog.dom");goog.require("goog.userAgent");goog.require("goog.string");goog.require("goog.userAgent.platform");goog.require("goog.log");namespace("sync.actions");var sc=class extends Pa{constructor(o,i,n){super(n,"M1 V");this.followUp=new rc(o,i,this.pasteHelper,n)}getFollowUpAction(){return this.followUp}getImageFile_(o){var i;o.files&&o.files.length?i=o.files[0]:o.items&&o.items.length&&(i=o.items&&o.items[0].getAsFile());var n=null;if(i){var r=o.getData("text/html"),s=!r||r.indexOf("<img src=")!==-1;s&&(n=i)}return n}recordClipboardData_(o){super.recordClipboardData_(o),this.recordClipboardImageData_(o.getBrowserEvent().clipboardData)}recordClipboardImageData_(o){var i=this.getImageFile_(o);if(i){var n=new FileReader;n.readAsDataURL(i),this.pasteHelper.pastedImage={fileReader:n,name:i.name}}}getSmallIcon(o){return sync.util.image.getImageUrl("/images/Paste16.png",o)}getDescription(){return tr(msgs.EDIT_PASTE_)}};sync.actions.Paste=sc;goog.require("goog.dom");goog.require("goog.userAgent");goog.require("goog.string");goog.require("goog.userAgent.platform");goog.require("goog.log");namespace("sync.actions");var Yd=class extends I{constructor(o,i,n){super();this.selectionManager_=i,this.pasteHandler_=new Ra(o,n)}actionPerformed(o){var i=this.selectionManager_.getSelection();this.pasteHandler_.handlePaste(i).finally(o)}isEnabledFor(o){return!0}};goog.require("goog.dom");goog.require("goog.userAgent");goog.require("goog.string");goog.require("goog.userAgent.platform");goog.require("goog.log");namespace("sync.actions");var Qd=class extends Pa{constructor(o,i){super(i,"M1 SHIFT V");this.pastedContentDescriptor_=new xr(this.pasteHelper),this.followUp=new Yd(o,i,this.pastedContentDescriptor_)}getFollowUpAction(){return this.followUp}};goog.require("goog.Disposable");goog.require("goog.events.EventHandler");namespace("sync.ctrl");var Yo=function(t,o,i,n,r){this.copyAction_=new Ql(o,r),this.cutAction_=new tm(o,r),this.pasteAction_=new sc(t,o,r),this.pasteAsTextAction_=new Qd(o,r),this.controller_=o,this.scheduler=i,this.readOnlyStatus_=n,this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_),this.blockCutAndPaste_=!1};goog.inherits(Yo,goog.Disposable);Yo.prototype.install=function(t){var o=goog.events.EventType;this.eventHandler_.listen(t,[o.BEFORECOPY,o.COPY],this.handleCopy_,!1),this.eventHandler_.listen(t,o.PASTE,this.handlePaste_,!1),this.eventHandler_.listen(t,[o.BEFORECUT,o.CUT],this.handleCut_,!1)};Yo.prototype.blockCutAndPaste=function(t){this.blockCutAndPaste_=t};Yo.prototype.getActions=function(){var t=new Map;return t.set("Author/Copy",this.copyAction_),t.set("Author/Paste",this.pasteAction_),t.set("Author/PasteAsText",this.pasteAsTextAction_),t.set("Author/Cut",this.cutAction_),t};Yo.prototype.handleCopy_=function(t){this.copyAction_.isPending()||this.scheduleAction_(this.copyAction_)};Yo.prototype.handlePaste_=function(t){if(this.blockCutAndPaste_){t.preventDefault();return}if(this.readOnlyStatus_.isReadOnly()){this.displayReadOnlyStatusMessage_();return}this.scheduleAction_(this.pasteAction_)};Yo.prototype.handleCut_=function(t){if(this.cutAction_.isPending())t.preventDefault();else if(this.isTargetInDocument_(t)){if(this.blockCutAndPaste_){t.preventDefault();return}if(this.readOnlyStatus_.isReadOnly()){this.displayReadOnlyStatusMessage_();return}this.scheduleAction_(this.cutAction_)}};Yo.prototype.isTargetInDocument_=function(t){var o=this.controller_.getDocument().getHtmlNode();return goog.dom.contains(o,t.target)};Yo.prototype.scheduleAction_=function(t){this.scheduler.schedule(t,Qe.ActionType.ASYNC)};Yo.prototype.displayReadOnlyStatusMessage_=function(){var t=this.readOnlyStatus_.getReadOnlyState(),o=t.message;o&&workspace.getNotificationManager().showWarning(o)};Yo.blockCopyPastePropagation=function(t){var o=function(r){r.stopPropagation()},i=goog.events.EventType,n=[i.COPY,i.PASTE,i.CUT,i.BEFORECOPY,i.BEFOREPASTE,i.BEFORECUT];goog.events.listen(t,n,o,!0)};var ka=Yo;sync.ctrl.CopyPasteManager=Yo;goog.require("goog.dom");namespace("sync.view");var pi=function(t,o){this.docElement=t,this.setEditable(o)};goog.inherits(pi,pe);pi.prototype.setEditable=function(t){this.editable!==t&&(this.editable=t,this.enhanceDom([this.docElement]),this.enterDocument([this.docElement]),this.editable?this.disableResizeHandles_():this.unregisterListeners_())};pi.prototype.enhanceDom=function(t){var o=[],i;for(i=0;i<t.length;i++){var n=null;sync.model.XmlDom.isDocument(t[i])?n=t[i]:(t[i].id==="editor-frame"||goog.dom.classlist.contains(t[i],"oxy-document"))&&(n=goog.dom.findNode(t[i],sync.model.XmlDom.isDocument)),n&&(goog.userAgent.IE?o=o.concat(sync.model.XmlDom.getChildNodes(n)):o.push(n))}this.enhanceEditableRoots_(o)};pi.prototype.enhanceEditableRoots_=function(t){goog.array.forEach(t,function(o){this.editable?(o.setAttribute("contentEditable","true"),o.setAttribute("role","textbox"),o.setAttribute("tabIndex","-1"),o.classList.add("no-focus-visible"),o.setAttribute("aria-label",tr(msgs.EDITOR_)),o.setAttribute("data-gramm","false"),o.setAttribute("spellcheck","false")):(o.removeAttribute("contentEditable"),o.removeAttribute("role"),o.removeAttribute("tabIndex"),o.classList.remove("no-focus-visible"))},this)};pi.prototype.enterDocument=function(t){if(goog.userAgent.IE){for(var o=[],i=0;i<t.length;i++){var n=t[i];sync.model.XmlDom.isDocument(n.parentNode)&&sync.model.XmlDom.isXmlNode(n)&&o.push(n)}this.enhanceEditableRoots_(o)}};pi.prototype.disableResizeHandles_=function(){var t=this.docElement.ownerDocument,o=goog.userAgent.product.FIREFOX||goog.userAgent.product.IE||goog.userAgent.product.EDGE||goog.userAgent.product.SAFARI;if(o){try{t.execCommand("enableInlineTableEditing",null,!1)}catch{}try{t.execCommand("enableObjectResizing",null,!1)}catch{}}this.controlSelectListener_=goog.bind(this.blockControlSelection_,this),t.attachEvent&&t.attachEvent("oncontrolselect",this.controlSelectListener_),this.msControlSelectKey_=goog.events.listen(t,"mscontrolselect",this.controlSelectListener_)};pi.prototype.blockControlSelection_=function(t){var o=t.target;if(sync.model.XmlDom.isXmlNode(o)){var i=function(){var n=h.getIdOfXmlNode(o),r=new sync.position.RelativeContentPosition(n,f.BEFORE,0),s=new sync.select.Selection(r.toHTMLPosition());sync.select.setSelection(s)};sync.actions.util.listenOnceFor(500,o,goog.events.EventType.CLICK,function(n){try{var r=o.ownerDocument.body.createTextRange();r.moveToPoint(n.clientX,n.clientY),r.select()}catch(s){console.log("Erorr while setting caret position",s),i()}},i)}return t.returnValue=!1,t.preventDefault&&t.preventDefault(),!1};pi.prototype.unregisterListeners_=function(){var t=sync.util.getDocDomHelper().getDocument();t.detachEvent&&t.detachEvent("oncontrolselect",this.controlSelectListener_),this.msControlSelectKey_&&(goog.events.unlistenByKey(this.msControlSelectKey_),this.msControlSelectKey_=null)};pi.prototype.disposeInternal=function(){this.unregisterListeners_(),pi.superClass_.disposeInternal.call(this)};var km=pi;sync.view.EditableSetter=pi;namespace("sync.model");var Jd=function(t,o,i,n,r,s,a){this.type=o,this.id=t,this.markerProperties=i,this.customProperties=n,this.refreshing=r,this.focus=s,this.useNativeSelection=!a};Jd.ModelEventType={MARKER_DELETED:"marker_deleted",MARKER_ADDED:"marker_added",MARKER_CHANGED:"marker_changed",REFRESH_MARKERS:"refresh_markers"};Jd.SelectionEventType={MARKER_SELECTED:"marker_selected",MARKER_UNSELECTED:"marker_unselected",MARKER_IN_SELECTION:"marker_in_selection",MARKER_OUT_FROM_SELECTION:"marker_out_from_selection"};var R=Jd;sync.model.MarkerEvent=Jd;namespace("sync.model");var Rr=function(){goog.events.EventTarget.call(this),this.currentlySelected=null,this.currentlySelectedMarkers=null};goog.inherits(Rr,goog.events.EventTarget);Rr.prototype.getSelectedMarker=function(){return this.currentlySelected};Rr.prototype.getAllSelectedMarkers=function(){return this.currentlySelectedMarkers};Rr.prototype.selectMarker=function(t,o,i){var n=this.currentlySelected;this.currentlySelected=t,n!==null&&this.dispatchEvent(new R(n,R.SelectionEventType.MARKER_UNSELECTED)),t!==null&&this.dispatchEvent(new R(t,R.SelectionEventType.MARKER_SELECTED,void 0,void 0,void 0,o,i));var r=t?[t]:[];this.saveAllSelectedMarkers(r)};Rr.prototype.saveAllSelectedMarkers=function(t){this.dispatchSelectionEvents_(this.currentlySelectedMarkers,R.SelectionEventType.MARKER_OUT_FROM_SELECTION),this.currentlySelectedMarkers=t,this.dispatchSelectionEvents_(this.currentlySelectedMarkers,R.SelectionEventType.MARKER_IN_SELECTION)};Rr.prototype.dispatchSelectionEvents_=function(t,o){if(t)for(var i of t)this.dispatchEvent(new R(i,o))};var Lm=Rr;sync.model.MarkersSelectionModel=Rr;goog.require("goog.structs.Map");namespace("sync.util");var Kt=function(){this.head=null,this.nodesById_=new goog.structs.Map};Kt.Node=function(t,o){this.id=t,this.value=o,this.prev=null,this.next=null};Kt.prototype.getFirst=function(){return this.head?this.head.id:null};Kt.prototype.toArray=function(){var t=[];return this.iterate(function(o){t.push(o)}),t};Kt.prototype.clear=function(){this.nodesById_.clear(),this.head=null};Kt.prototype.isEmpty=function(){return this.head==null};Kt.prototype.getNode_=function(t){return t===null?null:this.nodesById_.get(t)};Kt.prototype.get=function(t){var o=this.getNode_(t);return o&&o.value};Kt.prototype.addAfter=function(t,o,i){if(t===o)this.nodesById_.get(o).value=i;else{var n=new Kt.Node(o,i);this.nodesById_.set(o,n);var r=this.getNode_(t),s;goog.isDefAndNotNull(r)?s=r.next:(s=this.head,this.head=n),n.prev=r,r&&(r.next=n),n.next=s,s&&(s.prev=n)}};Kt.prototype.set=function(t,o){var i=this.getNode_(t);i&&(i.value=o)};Kt.prototype.remove=function(t){var o=this.getNode_(t);if(this.nodesById_.remove(t),!!o){var i=o.prev,n=o.next;i&&(i.next=n),n&&(n.prev=i),this.head===o&&(this.head=n)}};Kt.prototype.iterate=function(t,o){for(var i=o?this.getNode_(o):this.head;i!=null&&!t(i.value,i.id);)i=i.next};Kt.prototype.iterateBackwards=function(t,o){for(var i=o?this.getNode_(o):this.head;i!=null&&!t(i.value,i.id);)i=i.prev};Kt.prototype.next=function(t){var o=null;return this.iterate(function(i,n){return o=n,n!==t},t),o===t?null:o};Kt.prototype.prev=function(t){var o=null;return this.iterateBackwards(function(i,n){return o=n,n!==t},t),o===t?null:o};var Fm=Kt;sync.util.IndexedLinkedList=Kt;goog.require("goog.async.Debouncer");goog.require("goog.async.Throttle");namespace("sync.model");var Os=function(t,o){goog.events.EventTarget.call(this),this.queue=[],this.throttler_=new goog.async.Throttle(this.flush,400,this),this.eventHandler_=new goog.events.EventHandler(this);var i=R.ModelEventType;this.eventHandler_.listen(t,[i.MARKER_CHANGED,i.MARKER_DELETED,i.MARKER_ADDED,i.REFRESH_MARKERS],this.throttledDispatch_,!0);var n=R.SelectionEventType;this.eventHandler_.listen(o,[n.MARKER_SELECTED,n.MARKER_UNSELECTED,n.MARKER_IN_SELECTION,n.MARKER_OUT_FROM_SELECTION],this.throttledDispatch_,!0)};goog.inherits(Os,goog.events.EventTarget);Os.prototype.bufferEvent_=function(t){var o=t.type,i=R.ModelEventType,n=R.SelectionEventType;o===i.REFRESH_MARKERS?this.queue=[]:o===i.MARKER_DELETED?this.queue=this.queue.filter(function(r){return r.id!==t.id}):o===i.MARKER_CHANGED?this.queue=this.queue.filter(function(r){return!(r.id==t.id&&r.type===i.MARKER_CHANGED)}):(o===n.MARKER_SELECTED||o===n.MARKER_UNSELECTED)&&(this.queue=this.queue.filter(function(r){return!(r.id==t.id&&(r.type===n.MARKER_UNSELECTED||r.type===n.MARKER_SELECTED))})),this.queue.push(t)};Os.prototype.flush=function(){this.queue.forEach(this.dispatchEvent,this),this.queue=[]};Os.prototype.throttledDispatch_=function(t){this.bufferEvent_(t),this.fireThrottler_()};Os.prototype.fireThrottler_=function(){this.nextTick_||(this.nextTick_=sync.util.promise.nextTick(()=>{this.nextTick_=null,this.throttler_.fire()}))};var Um=Os;sync.model.MarkerEventsThrottler=Os;namespace("sync.model");var Vn=function(t){this.xmlModel_=t,this.htmlElementQuery_=()=>[],this.idAttr_="id",this.includeStarting_=!1,this.includeEnding_=!1};Vn.prototype.useElementName=function(t){return this.htmlElementQuery_=o=>o.getElementsByTagName(t),this};Vn.prototype.useElementClass=function(t){return this.htmlElementQuery_=o=>o.getElementsByClassName(t),this};Vn.prototype.setIdAttr=function(t){return this.idAttr_=t,this};Vn.prototype.setIncludeStarting=function(t){return this.includeStarting_=t,this};Vn.prototype.setIncludeEnding=function(t){return this.includeEnding_=t,this};Vn.prototype.getMarkersAtPosition=function(t){var o=p.fromRelativeContentPosition(t),i=o.getContentInformation(),n=i.elementId,r=this.xmlModel_.getXmlNodeById(n),s=new Map,a=[];return goog.array.toArray(this.htmlElementQuery_(r)).forEach(l=>{var c=l.getAttribute(this.idAttr_);c!==null&&(s.has(c)||(s.set(c,[]),a.push(c)),s.get(c).push(l))}),a.filter(l=>this.containsPos_(s.get(l),t)).reverse()};Vn.prototype.containsPos_=function(t,o){var i=new T(t[0],0).toRelativeContentPosition(),n=t[t.length-1],r=new T(n.parentNode,sync.util.dom.indexInParent(n)+1).toRelativeContentPosition(),s=p.compareCanonicalRelativePositions(i,o),a=p.compareCanonicalRelativePositions(o,r);return s<0&&a<0||this.includeStarting_&&s===0||this.includeEnding_&&a===0};var $d=Vn;sync.model.InlineMarkerLocator=Vn;goog.require("goog.dom");goog.require("goog.dom.classlist");goog.require("goog.dom.dataset");goog.require("goog.style");goog.require("goog.structs.Map");goog.require("goog.structs.Set");namespace("sync.model");var V=function(t,o,i){goog.events.EventTarget.call(this),this.docWrapper=o,this.docId=i.docId,this.reviewerName_=t,this.authorNumber_=0,this.markersById_=new Fm,this.changesCount_=0,this.commentsCount_=0,this.attributesChangesIds_=new goog.structs.Set;var n=R.ModelEventType;this.eventHandler_=new goog.events.EventHandler(this).listen(i,M.EventType.MODEL_CHANGED,goog.bind(this.applyUpdate_,this),!0).listen(this,n.REFRESH_MARKERS,this.refreshMarkers_,!0).listen(this,n.MARKER_ADDED,this.markerAdded_,!0).listen(this,n.MARKER_DELETED,this.markerDeleted_,!0).listen(this,[n.REFRESH_MARKERS,n.MARKER_ADDED,n.MARKER_DELETED],this.updateMarkersCount_,!0).listen(this,n.MARKER_CHANGED,this.markerChanged_,!0),this.getMarkerEndPoints=this.getMarkerEndPoints.bind(this),this.selectionManager_=new Lm,this.throttler_=new Um(this,this.selectionManager_),this.selectionContainsChanges=sync.util.createCachedFunction(function(r){return this.hasChangesInInterval(r.start.toRelativeContentPosition(),r.end.toRelativeContentPosition())}.bind(this)),this.xmlModel_=i.getXmlModel()};goog.inherits(V,goog.events.EventTarget);V.prototype.init=function(t,o,i){this.setReviewerName(t),this.authorNumber_=o;for(var n=this.collectMarkerChunksById_(),r=new goog.structs.Map,s=0;s<i.length;s++){var a=new Se(i[s]);this.setMarkerLevel_(a),a.updateContentProps(n.get(a.getId())),r.set(a.getId(),a)}this.insertMarkersInOrder_(r),this.updateMarkersCountOnInit_(r.getValues())};V.prototype.collectMarkerChunksById_=function(){for(var t=this.docWrapper.getElementsByClassName("oxy-marker"),o=new goog.structs.Map,i=0;i<t.length;i++){var n=t[i],r=goog.dom.dataset.get(n,"markerId"),s;o.containsKey(r)?s=o.get(r):(s=[],o.set(r,s)),s.push(n)}return o};V.prototype.getSelectionModel=function(){return this.selectionManager_};V.prototype.getThrottledEventTarget=function(){return this.throttler_};V.prototype.insertMarkersInOrder_=function(t){var o=t.getValues(),i=this.computeMarkerIdsInOrder_(o);this.markersById_.clear();for(var n=0;n<i.length;n++){var r=n===0?null:i[n-1],s=i[n],a=t.get(s);a||(a=new Se({id:s,"marker-type":"",author:"",timestamp:0})),a.id=s,this.markersById_.addAfter(r,s,a)}};V.prototype.getAuthorNumber=function(){return this.authorNumber_};V.prototype.refreshMarkers_=function(){this.insertMarkersInOrder_(new goog.structs.Map)};V.prototype.markerAdded_=function(t){if(goog.isDefAndNotNull(t.id)){var o=t.markerProperties;o.customProperties=t.customProperties;var i=new Se(o);if(this.setMarkerLevel_(i),t.refreshing&&!i.isAttributeChange())this.markersById_.set(i.id,i);else{var n=this.markersById_.toArray();n.push(i);for(var r=this.computeMarkerIdsInOrder_(n),s=r.indexOf(i.getId()),a=null,l=s-1;l>=0;l--){var c=r[l];if(goog.isDefAndNotNull(this.markersById_.get(c))){a=c;break}}this.markersById_.addAfter(a,t.id,i)}}};V.prototype.updateMarkersCount_=function(t){var o,i;if(goog.isDefAndNotNull(t.id)){var n=t.type;switch(n){case R.ModelEventType.REFRESH_MARKERS:this.commentsCount_=0,this.changesCount_=0,this.attributesChangesIds_.clear();break;case R.ModelEventType.MARKER_ADDED:o=t.markerProperties,o&&(i=o["marker-type"],goog.string.startsWith(i,"CHANGE_")?this.changesCount_++:this.commentsCount_++,goog.string.startsWith(i,"CHANGE_ATTRIBUTE_")&&this.attributesChangesIds_.add(o.id));break;case R.ModelEventType.MARKER_DELETED:o=t.markerProperties,o&&(i=o["marker-type"],goog.string.startsWith(i,"CHANGE_")?this.changesCount_--:this.commentsCount_--,goog.string.startsWith(i,"CHANGE_ATTRIBUTE_")&&this.attributesChangesIds_.remove(o.id));break}}};V.prototype.updateMarkersCountOnInit_=function(t){if(t)for(var o=0;o<t.length;o++){var i=t[o];i&&(i.isCommentLike()?this.commentsCount_++:i.isChange()&&this.changesCount_++,i.isAttributeChange()&&this.attributesChangesIds_.add(i.getId()))}};V.prototype.getChangeMarkersCount=function(){return this.changesCount_};V.prototype.markerDeleted_=function(t){goog.isDefAndNotNull(t.id)&&this.markersById_.remove(t.id)};V.prototype.markerChanged_=function(t){if(goog.isDefAndNotNull(t.id)){var o=t.markerProperties,i=this.markersById_.get(t.id);i&&(i.setAuthor(o.author),i.setAuthorComment(o.comment),i.setType(o["marker-type"]),i.setTimestamp(o.timestamp),i.setChangeSubType(o.type),i.setFlag(o.flag),i.resetContentProps())}};V.prototype.getMarkersInOrder=function(){return this.markersById_.toArray().map(function(t){return t.getId()})};V.prototype.getMarkersOfTypeInOrder=function(t){var o=this.markersById_.toArray().filter(function(i){return i.getType()===t});return o.map(function(i){return i.getId()})};V.prototype.getFirstMarker=function(t){var o=this.markersById_.toArray(),i=o.find(n=>Object.keys(t).every(r=>{var s=n[r];return s&&s.toString()===t[r]}));return i?i.getId():null};V.prototype.computeMarkerIdsInOrder_=function(t){for(var o=new goog.structs.Set,i=[],n=this.docWrapper.querySelectorAll(".oxy-marker"),r=0;r<n.length;r++){var s=n[r].getAttribute("data-marker-id");o.contains(s)||(i.push({id:s,node:n[r]}),o.add(s))}var a=this.getSortedAttrMarkersDescriptors_(t),l=kl(a,i,function(d,g){return goog.dom.compareNodeOrder(d.node,g.node)}),c=l.map(function(d){return d.id});return goog.array.removeDuplicates(c,null,goog.functions.identity),c};V.prototype.getSortedAttrMarkersDescriptors_=function(t){for(var o=[],i=0;i<t.length;i++){var n=t[i];if(n.isAttributeChange()){var r=p.getSentinelNode(n.getNodeId(),f.BEFORE);r&&o.push({id:n.getId(),node:r,name:n.getAttrName()})}}return goog.array.sort(o,function(s,a){var l=goog.dom.compareNodeOrder(s.node,a.node);return l===0?goog.array.defaultCompare(s.name,a.name):l}),o};V.prototype.getAllMarkersAtPosition=function(t,o){return new $d(this.xmlModel_).useElementClass("oxy-marker").setIdAttr("data-marker-id").setIncludeStarting(!o).setIncludeEnding(!o).getMarkersAtPosition(t)};V.prototype.getAllChunksForMarker=function(t){var o=this.markersById_.get(t);return o?o.getAllChunks():[]};V.prototype.getFirstChunkForMarker=function(t){return this.docWrapper.querySelector('*[data-marker-id="'+t+'"]')};V.prototype.setMarkerLevel_=function(t){if(t.isCommentLike()){var o=this.docWrapper.querySelector('*[data-marker-id="'+t.getId()+'"]');if(o){var i=goog.dom.dataset.get(o,"level");t.setLevel(i)}}};V.prototype.getMarker=function(t){return this.markersById_.get(t)};V.prototype.getMarkerByNode=function(t){var o=t.getAttribute("data-marker-id");return this.getMarker(o)};V.prototype.getMarkerEndPoints=function(t){var o=this.getAllChunksForMarker(t),i;if(o.length>0){var n=o[0],r=sync.util.dom.indexInParent(n),s=new T(n.parentNode,r).toRelativeContentPosition(),a=o[o.length-1],l=sync.util.dom.indexInParent(a)+1,c=new T(a.parentNode,l).toRelativeContentPosition();i={start:s,end:c}}return i};V.prototype.getAllMarkersIntersectingEndpoints=function(t){var o=this.getMarkerEndPoints(t),i=this.getAllMarkersAtPosition(o.start);return i=i.concat(this.getAllMarkersAtPosition(o.end)),goog.array.removeDuplicates(i),i};V.prototype.getNextMarker=function(t,o){for(var i=this.getMarkersInOrder(),n=-1,r=0;r<i.length;r++)i[r]===o&&(t?n=i[(r+i.length-1)%i.length]:n=i[(r+1)%i.length]);return n===-1&&console.warn("No marker is currently selected"),n};V.prototype.applyUpdate_=function(t){var o=t.docUpdate.markerUpdates||[],i=o.length,n=!1;i>0&&o[0].type===R.ModelEventType.REFRESH_MARKERS&&(n=!0);for(var r=0;r<i;r++){var s=new R(String(o[r].id),o[r].type,o[r].markerProperties,o[r].customProperties,n);this.dispatchEvent(s)}};V.prototype.getReviewerName=function(){return this.reviewerName_};V.prototype.setReviewerName=function(t){this.reviewerName_=t,sync.rest.callAsync("RESTReviewController.setReviewerName",{docId:this.docId,reviewerName:t}).thenCatch(sync.util.error.logError)};V.prototype.createCommentClientSide=function(t){return new Se({"author-no":this.authorNumber_,id:"CLIENT_SIDE_MARKER_ID",author:this.reviewerName_,"marker-type":"COMMENT",timestamp:Date.now(),comment:t})};V.prototype.getMarkersList=function(){return this.markersById_};V.prototype.getDiscussionRoot=function(t){var o=null;return this.markersById_.iterateBackwards(function(i,n){if(!i.level)return o=n,!0},t),o};V.prototype.getDiscussions=function(){var t=new goog.structs.Map,o=null;return this.markersById_.iterate(goog.bind(function(i,n){i.level||(o=n,t.set(o,[])),t.get(o).push(n)},this)),t};V.prototype.getDiscussion=function(t){var o=[];return this.markersById_.iterate(function(i,n){return i.level||n===t?(o.push(i),!1):!0},t),o};V.prototype.hasChangesInInterval=function(t,o){return this.markersById_.isEmpty()?!1:this.hasAttributesChangesInInterval(t,o)?!0:V.hasInsertOrDeleteChangesInInterval(this.docWrapper,t,o,this.getMarkerEndPoints)};V.prototype.hasAttributesChangesInInterval=function(t,o){for(var i=this.attributesChangesIds_.getValues(),n=null,r=0;r<i.length;r++){var s=i[r],a=this.markersById_.get(s),l=p.getSentinelNode(a.getNodeId(),f.BEFORE),c=new T(l.parentNode,0).toRelativeContentPosition();if(p.compareCanonicalRelativePositions(c,t)<0)n=s;else{if(p.compareCanonicalRelativePositions(c,o)>=0)break;return!0}}if(n&&n>=0){var d=this.getMarkerEndPoints(n).end;if(p.compareCanonicalRelativePositions(d,t)>0)return!0}return!1};V.hasInsertOrDeleteChangesInInterval=function(t,o,i,n){for(var r=t.querySelectorAll('*[data-marker-id][data-type^="CHANGE_"]'),s=null,a=0;a<r.length;a++){var l=r[a],c=goog.dom.dataset.get(l,"markerId");if(c!==s){var d=new T(l,0).toRelativeContentPosition();if(p.compareCanonicalRelativePositions(d,o)<0)s=c;else{if(p.compareCanonicalRelativePositions(d,i)>=0)break;return!0}}}if(s&&s>=0){var g=n(s).end;if(p.compareCanonicalRelativePositions(g,o)>0)return!0}return!1};var Bm=V;sync.model.MarkersModel=V;namespace("sync.model");var Or=function(t){var o=p.fromHTMLPosition(t);if(o!=null){var i=o.getContentInformation();if(i!=null){this.parentId=i.elementId,o.getContentInformation().isOnText()||(this.rightSentinel=o.node);try{o.prev(),o.getContentInformation().isOnText()||(this.leftSentinel=o.node),this.leftNodeId=o.getContentInformation().elementId}catch{this.leftSentinel=sync.util.getDocDomHelper().getDocument().querySelector(".tag.boundary"),this.leftNodeId="0"}try{o.next(),o.next(),this.rightNodeId=o.getContentInformation().elementId}catch{this.rightNodeId="0"}}}};Or.prototype.parentId=null;Or.prototype.leftNodeId=null;Or.prototype.rightNodeId=null;Or.prototype.leftSentinel=null;Or.prototype.rightSentinel=null;Or.prototype.equals=function(t){return t!=null&&this.parentId===t.parentId&&this.leftNodeId===t.leftNodeId&&this.rightNodeId===t.rightNodeId};var Zd=Or;sync.model.PositionInfo=Or;goog.require("goog.async.Delay");goog.require("goog.dom");goog.require("goog.events");goog.require("goog.positioning");goog.require("goog.positioning.AnchoredPosition");goog.require("goog.style");goog.require("goog.ui.Popup");namespace("sync.view");var ro=function(t,o,i){goog.Disposable.call(this);var n=goog.dom.createDom("div","tooltip");n.style.display="none",goog.dom.appendChild(t,n);var r=new goog.ui.Popup(n);this.registerDisposable(r),r.setAutoHide(!0),r.setPinnedCorner(goog.positioning.Corner.BOTTOM_END),this.popup_=r,this.container_=t,this.delay_=new goog.async.Delay(this.maybeShowAtCaret_,100,this),this.registerDisposable(this.delay_),this.lastFocus_=null,this.elementNameEnhancer_=o,this.a11y_=i,this.selectionManager_=null};goog.inherits(ro,goog.Disposable);ro.prototype.install=function(t,o,i){t.listen(ft.EventTypes.EDIT_MODE_CHANGED,goog.bind(function(n){n.editMode?this.attach(o,i):this.detach()},this)),t.isEditMode()&&this.attach(o,i)};ro.prototype.attach=function(t,o){this.selectionManager_=t,this.eventHandler_&&this.eventHandler_.getListenerCount()!==0&&this.detach();var i=goog.events.EventType;this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_),this.eventHandler_.listen(window,i.ORIENTATIONCHANGE,goog.bind(this.hide_,this),!0).listen(window,i.BLUR,goog.bind(this.hide_,this),!0).listen(this.container_,i.KEYDOWN,goog.bind(this.onKeyDown_,this),!0).listen(this.popup_.getElement(),i.MOUSEDOWN,function(n){n.preventDefault()}),this.eventHandler_.listen(o.getSelectionModel(),R.SelectionEventType.MARKER_SELECTED,goog.bind(function(n){n.focus&&this.delay_.stop()},this)).listen(t,sync.api.SelectionManager.EventType.SELECTION_CHANGED,goog.bind(function(){this.delay_.start()},this))};ro.prototype.detach=function(){this.selectionManager_=null,this.eventHandler_&&this.eventHandler_.dispose()};ro.prototype.maybeShowAtCaret_=function(){var t=this.selectionManager_.getSelection(),o=t.focus.toRelativeContentPosition();!this.lastFocus_||o.nodeId!==this.lastFocus_.nodeId||o.sentinelType!==this.lastFocus_.sentinelType?(this.lastFocus_=o,this.showAtPosition(t.focus),this.a11y_.isEnabled()||this.startHideTimer_()):this.hide_()};ro.prototype.showAtPosition=function(t,o){o||(o=new Zd(t));var i=t.getCaretRect(),n=goog.style.getClientPosition(this.container_),r=goog.style.getSize(this.container_),s=new goog.positioning.AbstractPosition;s.reposition=function(a,l,c,d){var g=new goog.math.Box(0,r.x,r.y,0);goog.positioning.positionAtCoordinate(new goog.math.Coordinate(i.left-n.x-1,i.top-n.y-1),a,l,c,g,goog.positioning.Overflow.ADJUST_X,d)},goog.dom.removeChildren(this.popup_.getElement()),goog.dom.append(this.popup_.getElement(),this.render(o)),this.popup_.setPosition(s),this.popup_.setVisible(!0)};ro.prototype.POPUP_HIDE_DELAY_MS_=1e3;ro.prototype.startHideTimer_=function(){this.hideTimer_&&goog.Timer.clear(this.hideTimer_),this.hideTimer_=goog.Timer.callOnce(goog.bind(this.hide_,this),this.POPUP_HIDE_DELAY_MS_)};ro.prototype.onKeyDown_=function(t){t.keyCode===goog.events.KeyCodes.ESC&&this.hide_()};ro.prototype.hide_=function(){this.popup_.setVisible(!1),this.hideTimer_&&(goog.Timer.clear(this.hideTimer_),this.hideTimer_=null)};ro.prototype.render=function(t){var o=goog.dom.createDom,i=null,n=null,r=null;if(t.leftSentinel!==null){var s=p.getSentinelType(t.leftSentinel);s===f.AFTER&&(n=o("span",["tooltip-before","tooltip-sentinel-before"],this.getDisplayTextFromElementById_(t.leftNodeId)))}if(t.rightSentinel!==null){var a=p.getSentinelType(t.rightSentinel);a===f.BEFORE&&(r=o("span",["tooltip-after","tooltip-sentinel-after"],this.getDisplayTextFromElementById_(t.rightNodeId)))}var l=o("span","tooltip-node",this.getDisplayTextFromElementById_(t.parentId)),c=o("span","tooltip-caret","|");return!n&&!r?i=[l]:n&&!r?i=[n,c,l]:!n&&r?i=[l,c,r]:i=[n,c,r],i};ro.prototype.getDisplayTextFromElementById_=function(t){return sync.view.NodeRenderer.getRenderedText(h.getInstance().getXmlNodeById(t),this.elementNameEnhancer_)};ro.prototype.disposeInternal=function(){ro.superClass_.disposeInternal.call(this),this.hideTimer_&&goog.Timer.clear(this.hideTimer_)};var Hm=ro;sync.view.Tooltip=ro;namespace("sync.view");var ac=function(t,o,i){this.mainTooltip_=t,this.elementNameEnhancer_=o,this.a11y=i};ac.prototype.show=function(t){var o=new Zd(t);this.mainTooltip_.showAtPosition(t,o),this.a11y.isEnabled()&&this.speakPositionInfo_(o)};ac.prototype.speakPositionInfo_=function(t){var o,i=p.getSentinelParentId,n=t.leftSentinel&&t.rightSentinel&&t.leftSentinel!==t.rightSentinel;n?o=tr(msgs.INSIDE_ELEMENT_BETWEEN_ELEMENTS_,{$INSIDE:this.getElName_(t.parentId),$BEFORE:this.getElName_(i(t.leftSentinel)),$AFTER:this.getElName_(i(t.rightSentinel))}):t.leftSentinel&&i(t.leftSentinel)!==t.parentId?o=tr(msgs.INSIDE_ELEMENT_AFTER_ELEMENT_,{$INSIDE:this.getElName_(t.parentId),$AFTER:this.getElName_(i(t.leftSentinel))}):t.rightSentinel&&i(t.rightSentinel)!==t.parentId?o=tr(msgs.INSIDE_ELEMENT_BEFORE_ELEMENT_,{$INSIDE:this.getElName_(t.parentId),$BEFORE:this.getElName_(i(t.rightSentinel))}):o=tr(msgs.INSIDE_ELEMENT_,{$INSIDE:this.getElName_(t.parentId)}),this.a11y.speak(o)};ac.prototype.getElName_=function(t){var o=h.getInstance().getXmlNodeById(t);return sync.view.NodeRenderer.getRenderedText(o,this.elementNameEnhancer_)};var jm=ac;sync.view.A11yTooltip=ac;goog.require("goog.events");goog.require("goog.events.EventTarget");namespace("sync.model");var Pr=function(){goog.events.EventTarget.call(this),this.state_={readOnly:!1,message:null,code:null}};goog.inherits(Pr,goog.events.EventTarget);Pr.EventTypes={READ_ONLY_STATUS_CHANGED:"read_only_status_changed"};Pr.prototype.setReadOnlyState=function(t){t.readOnly||(t={readOnly:!1,message:null,code:null});var o=this.state_;this.state_=t,(o.readOnly!==t.readOnly||o.message!==t.message||o.code!==t.code)&&this.dispatchEvent({type:Pr.EventTypes.READ_ONLY_STATUS_CHANGED,isReadOnly:this.state_.readOnly,state:this.state_})};Pr.prototype.isReadOnly=function(){return this.getReadOnlyState().readOnly};Pr.prototype.getReadOnlyState=function(){return this.state_};var ue=Pr;sync.model.ReadOnlyStatus=Pr;goog.require("goog.Disposable");namespace("sync.support.author");var Wn=function(t,o){goog.Disposable.call(this),this.editModeModel=t,this.readOnlyStatus=o};goog.inherits(Wn,goog.Disposable);Wn.prototype.init=function(){var t=this.editModeModel;goog.events.listen(t,ft.EventTypes.EDIT_MODE_CHANGED,o=>this.updateUI_(o.editMode)),this.updateUI_(t.isEditMode()),t.isReviewModeAvailable()&&(this.createSwitchButton_(),sync.util.isMobile()&&this.enableDoubleTapSwitching_())};Wn.prototype.createSwitchButton_=function(){var t=document.getElementById("editorContent"),o=goog.dom.createDom("div",{id:"mode_switcher",class:sync.ctrl.MarkersPreviewController.NO_MARKER_SELECTED_CLASS});goog.dom.insertChildAt(t,o,0),goog.dom.classlist.add(o,this.editModeModel.isEditMode()?"edit-mode-edit":"edit-mode-review"),goog.events.listen(o,goog.events.EventType.CLICK,goog.bind(function(){this.editModeModel.toggleEditMode()},this)),this.readOnlyStatus.isReadOnly()&&(o.style.display="none"),goog.events.listen(this.readOnlyStatus,ue.EventTypes.READ_ONLY_STATUS_CHANGED,function(i){o.style.display=i.state.readOnly?"none":"block"})};Wn.prototype.enableDoubleTapSwitching_=function(){var t=document.getElementById("editorContent"),o=0;goog.events.listen(t,goog.events.EventType.TOUCHSTART,goog.bind(function(){goog.now()-o<300&&!this.readOnlyStatus.isReadOnly()&&!this.editModeModel.isEditMode()&&this.editModeModel.setEditMode(),o=goog.now()},this))};Wn.prototype.updateUI_=function(t){var o=goog.dom.classlist,i=document.getElementById("footer");o.enable(i,"edit-mode",t);var n=document.getElementById("header");o.enable(n,"review-mode",!t);var r=document.getElementById("mode_switcher");r&&(o.enable(r,"edit-mode-edit",t),o.enable(r,"edit-mode-review",!t))};Wn.prototype.disposeInternal=function(){Wn.superClass_.disposeInternal.call(this),goog.dom.removeNode(document.getElementById("mode_switcher"))};var Vm=Wn;sync.support.author.ModeSwitcher=Wn;namespace("sync.select");var Gt=function(t,o){goog.events.EventTarget.call(this),this.handler_=t,this.foldingManager_=o,this.throttler_=new goog.events.EventTarget;var i=new goog.events.EventHandler(this);this.registerDisposable(i),i.listen(t,sync.api.SelectionManager.EventType.SELECTION_CHANGED,this.dispatchSelectionChangedEvent_),this.listen(sync.api.SelectionManager.EventType.SELECTION_CHANGED,goog.functions.throttle(this.throttler_.dispatchEvent,400,this.throttler_))};goog.inherits(Gt,sync.api.SelectionManager);Gt.prototype.getSelection=function(){return this.handler_.getCurrentSelection()};Gt.prototype.setSelection=function(t,o){var i=o||{};i.ignoreFolds||this.foldingManager_.expandFoldsAtSelection(t);var n=i.focus===!1;this.handler_.setCurrentSelection(t,n)};Gt.prototype.restoreSelectionInBrowser=function(){this.handler_.restoreSelectionInBrowser()};Gt.prototype.createEmptySelectionAfterNode=function(t){var o;if(t.getType()===goog.dom.NodeType.TEXT)o=this.createEmptySelectionInTextNode(t,t.textContent.length);else{var i=new sync.position.RelativeContentPosition(t.id,f.AFTER,0);o=new sync.select.Selection(i.toHTMLPosition())}return o};Gt.prototype.createEmptySelectionBeforeNode=function(t){var o,i=t.previousSibling;return i?o=this.createEmptySelectionAfterNode(i):o=this.createEmptySelectionInNode(t.parentNode,"before"),o};Gt.prototype.createEmptySelectionInTextNode=function(t,o){var i,n=t.previousSibling;if(n)i=new sync.position.RelativeContentPosition(n.id,f.AFTER,o);else{var r=t.parentNode;i=new sync.position.RelativeContentPosition(r.id,f.BEFORE,o)}return new sync.select.Selection(i.toHTMLPosition())};Gt.prototype.setFakeSelectionOnChunks=function(t){if(t.length){var o=t[t.length-1],i=new sync.select.Selection(new T(t[0],0),new T(o,o.childNodes.length));this.foldingManager_.expandFoldsAtSelection(i),this.handler_.setCurrentSelection(i,!0,t)}};Gt.prototype.scrollSelectionIntoView=function(t){this.handler_.viewportScroller_.scrollSelectionIntoView(t)};Gt.prototype.evalSelectionFunction=function(t){return this.handler_.applyCachedFunction(t)};Gt.prototype.restoreSelection=function(){this.handler_.restoreSelectionInBrowser()};Gt.prototype.fireInitialSelectionSet=function(){this.handler_.adjustInitialSelection(),this.handler_.restoreSelectionInBrowser(),this.dispatchSelectionChangedEvent_()};Gt.prototype.dispatchSelectionChangedEvent_=function(){var t=new Yl;this.dispatchEvent(t)};Gt.prototype.getThrottledEventTarget=function(){return this.throttler_};Gt.prototype.isDocFocused=function(){return this.handler_.isDocFocused()};var Wm=Gt;sync.select.SelectionManager=Gt;namespace("sync.api");sync.api.AuthorWidgetsFactory=function(){};sync.api.AuthorWidgetsFactory.prototype.getGuidingArrowRenderer=function(){return null};sync.api.AuthorWidgetsFactory.prototype.getHighlightsManager=function(){return null};namespace("sync.api");sync.api.AuthorEditingSupport=function(t){sync.api.EditingSupport.call(this,t)};goog.inherits(sync.api.AuthorEditingSupport,sync.api.EditingSupport);sync.api.AuthorEditingSupport.prototype.registerEnhancer=function(t,o){};sync.api.AuthorEditingSupport.prototype.getChangeTrackingManager=function(){return null};sync.api.AuthorEditingSupport.prototype.getPersistentHighlightsManager=function(){return null};sync.api.AuthorEditingSupport.prototype.getDocument=function(){return null};sync.api.AuthorEditingSupport.prototype.getWidgetsFactory=function(){return null};sync.api.AuthorEditingSupport.EventType={BEFORE_MODEL_CHANGED:"AES_before_model_changed",MODEL_CHANGED:"AES_model_changed"};sync.api.AuthorEditingSupport.AuthorModelChangedEvent=function(t,o){this.type=t,this.mutation=o};sync.api.AuthorEditingSupport.ModelChangedMutation=function(t,o,i){this.updated=t,this.deleted=o,this.inserted=i};goog.require("goog.events.EventTarget");namespace("sync.formctrls");var so=function(){};so.prototype.tabKeyPressCounter=0;so.EDITOR_SHORTCUTS=null;so.prototype.shouldBeHandledByEditor=function(t){if(so.EDITOR_SHORTCUTS===null&&(so.EDITOR_SHORTCUTS=[new J("M1 S").getCode(),new J("M1 F").getCode()]),t.ctrlKey||t.altKey||t.metaKey){var o=goog.events.KeyCodes,i=[o.CTRL,o.ALT,o.META,o.MAC_FF_META,o.MAC_WK_CMD_LEFT,o.MAC_WK_CMD_RIGHT];if(i.indexOf(t.keyCode)!==-1)return!0}else if(t.keyCode===goog.events.KeyCodes.TAB)return!0;var n=new J;return n.fromKeyEvent(t),so.EDITOR_SHORTCUTS.indexOf(n.getCode())!==-1};so.prototype.registerListeners=function(t){ka.blockCopyPastePropagation(t),this.fixTabBehavior(t),this.stopInputPropagation(t),this.updateHoverPseudoClass(t)};so.prototype.fixTabBehavior=function(t){goog.events.listen(t,goog.events.EventType.KEYDOWN,o=>{o.keyCode===goog.events.KeyCodes.TAB&&(this.tabKeyPressCounter=0)},!1),goog.events.listen(t,goog.events.EventType.KEYPRESS,o=>{o.keyCode===goog.events.KeyCodes.TAB&&(this.tabKeyPressCounter++,this.tabKeyPressCounter>1&&o.preventDefault())},!1)};so.prototype.updateHoverPseudoClass=function(t){var o=this.getHoverPseudoClass_(t);o!=null&&(goog.events.listen(t,goog.events.EventType.MOUSEOVER,i=>this.setHoverPseudoClass_(i.target)),goog.events.listen(t,goog.events.EventType.MOUSEOUT,i=>this.removeHoverPseudoClass_(i.target)))};so.prototype.getHoverPseudoClass_=function(t){var o=sync.formctrls.dom.getContainingFormControl(t);return goog.dom.dataset.get(o,"hoverpseudoclass")};so.prototype.setHoverPseudoClass_=function(t){var o=this.getHoverPseudoClass_(t),i=sync.model.XmlDom.getContainingXmlNode(t);sync.model.XmlDom.setPseudoClassClientSide(i,o)};so.prototype.removeHoverPseudoClass_=function(t){var o=this.getHoverPseudoClass_(t),i=sync.model.XmlDom.getContainingXmlNode(t);sync.model.XmlDom.removePseudoClassClientSide(i,o)};so.prototype.stopInputPropagation=function(t){var o=i=>i.stopPropagation();goog.events.listen(t,goog.events.EventType.TEXTINPUT,o,!1),goog.events.listen(t,goog.events.EventType.INPUT,o,!1),goog.events.listen(t,[goog.events.EventType.KEYDOWN,goog.events.EventType.KEYPRESS,goog.events.EventType.KEYUP],i=>{this.shouldBeHandledByEditor(i)||i.stopPropagation()},!1)};so.prototype.unregisterListeners=function(t){goog.events.removeAll(t)};var Km=so;sync.formctrls.EnhancerDefaultListener=so;goog.require("goog.dom");namespace("sync.formctrls");sync.formctrls.Enhancer=function(t,o){this.formControl=t,this.editingSupport=o,this.inReadOnlyPosition_=this.formControl&&goog.dom.dataset.get(this.formControl,"readonly")==="",this.listener_=new Km};sync.formctrls.Enhancer.ACTIVE_CLASS="oxy-active-form-control";sync.formctrls.Enhancer.prototype.isDocumentReadOnly_=!1;sync.formctrls.Enhancer.prototype.isDisabled=function(){return this.isDocumentReadOnly_||this.inReadOnlyPosition_};sync.formctrls.Enhancer.prototype.documentReadOnlyStatusChanged=function(t){this.isDocumentReadOnly_!==t&&(this.isDocumentReadOnly_=t,this.disabledStateUpdated(this.isDisabled()))};sync.formctrls.Enhancer.prototype.setDocumentReadOnly=function(t){this.isDocumentReadOnly_=t};sync.formctrls.Enhancer.prototype.disabledStateUpdated=function(t){};sync.formctrls.Enhancer.prototype.getParentNode=function(){let t=goog.dom.getAncestor(this.formControl,sync.model.XmlDom.isXmlNode);return this.editingSupport.getDocument().createApiNodeOrNull(t)};sync.formctrls.Enhancer.prototype.enhanceDom=function(){};sync.formctrls.Enhancer.prototype.enterDocument=function(t){this.listener_.registerListeners(this.formControl)};sync.formctrls.Enhancer.prototype.exitDocument=function(){this.listener_.unregisterListeners(this.formControl)};sync.formctrls.Enhancer.prototype.recycleFor=function(t){return!1};goog.require("goog.events");goog.require("goog.ui.PopupMenu");goog.require("goog.dom");goog.require("goog.dom.dataset");namespace("sync.formctrls");var Qo=function(t,o){sync.formctrls.Enhancer.call(this,t,o);var i=this.formControl.childNodes[0];i.localName==="span"&&(i=i.childNodes[0]),this.enableInReadOnlyContext_=goog.dom.dataset.get(i,"enableinreadonlycontext")==="true"};goog.inherits(Qo,sync.formctrls.Enhancer);Qo.prototype.displayAsUnkownAction=function(t){var o=goog.dom.getChildren(t)[0],i=goog.dom.createDom("span",{},"Unknown");goog.dom.replaceNode(i,o)};Qo.prototype.invokeActionWithValues_=function(t,o){var i=sync.rest.getSyncMethod("RESTActionsManager.invokeAction"),n=i(o),r=n.unexpandedAskVariables;!r||r.length===0?this.applyDocUpdate_(t,n.docUpdate):new ud(this.editingSupport.getScrollEventTarget()).getValues(r,tr(msgs.INPUT_)).then(s=>{s.length&&(o.expandedAskVariables=s,this.invokeActionWithValues_(t,o))})};Qo.prototype.applyDocUpdate_=goog.abstractMethod;Qo.prototype.updateGadgetIconAndLabel=function(t,o){if(t&&goog.dom.classlist.contains(o,"noActionAssociated")&&!goog.dom.classlist.contains(o,"useImposedProperties")){this.setLabel_(t,o),this.setTooltip_(t,o);var i=goog.dom.classlist.contains(o,"showIconFalse"),n=t.renderSmallIcon();if(n&&!i){var r=goog.dom.getChildren(o)[0],s=goog.dom.classlist.contains(o,"showLabelTrue"),a=goog.dom.classlist.contains(o,"showIconTrue"),l=goog.dom.classlist.contains(o,"showLabelFalse"),c=goog.dom.classlist.contains(o,"showIconNull"),d=goog.dom.classlist.contains(o,"showLabelNull");s&&a&&this.displayBothLabelAndIcon_(r,n),l&&a&&this.displayOnlyTheIcon_(r,n),s&&c&&this.displayBothLabelAndIcon_(r,n),l&&c&&this.displayOnlyTheIcon_(r,n),d&&c&&this.displayOnlyTheIcon_(r,n),d&&a&&this.displayOnlyTheIcon_(r,n)}}};Qo.prototype.setLabel_=function(t,o){var i=t.getDisplayName();if(i){var n=goog.dom.getChildren(o)[0],r=goog.dom.createDom("span",{},i);goog.dom.replaceNode(r,n)}};Qo.prototype.setTooltip_=function(t,o){var i=t.getDescription();i&&(o.title=i)};Qo.prototype.displayBothLabelAndIcon_=function(t,o){goog.dom.insertChildAt(t,o,0)};Qo.prototype.displayOnlyTheIcon_=function(t,o){var i=goog.dom.createDom("span",{},o);goog.dom.replaceNode(i,t)};Qo.prototype.isDisabled=function(){return Qo.superClass_.isDisabled.call(this)&&!this.enableInReadOnlyContext_};var La=Qo;sync.formctrls.ButtonsEnhancer=Qo;goog.require("goog.array");namespace("sync.formctrls");var kr=function(){};kr.prototype.normalizeClasses_=function(t){sync.util.dom.normalizeClass(t),goog.array.toArray(t.getElementsByTagName("*")).forEach(sync.util.dom.normalizeClass),t.classList.remove(sync.formctrls.Enhancer.ACTIVE_CLASS)};kr.prototype.removeFocusClasses_=function(t){var o=t.getElementsByClassName("focus-visible");goog.array.toArray(o).forEach(i=>{i.classList.remove("focus-visible"),i.removeAttribute("data-focus-visible-added")})};kr.prototype.removeActiveClass_=function(t){t.classList.remove(sync.formctrls.Enhancer.ACTIVE_CLASS)};kr.prototype.unloadImages_=function(t){var o=t.getElementsByTagName("img");goog.array.toArray(o).forEach(i=>i.removeAttribute("src"))};kr.prototype.canonicalize_=function(t){var o=t;return this.removeFocusClasses_(o),this.removeActiveClass_(o),this.unloadImages_(o),this.normalizeClasses_(o),o};kr.prototype.checkEquals=function(t,o){var i=t.cloneNode(!0),n=o.cloneNode(!0);i=this.canonicalize_(i),n=this.canonicalize_(n);var r=i.isEqualNode(n);return r||console.warn("Different rendering after update",sync.util.getOuterHTML(t),sync.util.getOuterHTML(o),sync.util.getOuterHTML(i),sync.util.getOuterHTML(n)),r};var hn=kr;sync.formctrls.DomCanonicalizer=kr;goog.require("goog.dom");goog.require("goog.dom.dataset");goog.require("goog.events");namespace("sync.formctrls");var Do=function(t,o){La.call(this,t,o)};goog.inherits(Do,La);Do.prototype.enhanceDom=function(){this.enhanceDomInternal_(this.formControl)};Do.prototype.enhanceDomInternal_=function(t){var o=t.childNodes[0];goog.userAgent.IE&&goog.dom.classlist.add(t,"ie");var i=this.editingSupport.getActionsManager(),n=goog.dom.dataset.get(o,"actionid"),r=i.getActionById(n);this.updateGadgetIconAndLabel(r,o)};Do.prototype.enterDocument=function(t){Do.superClass_.enterDocument.call(this,t),this.clickListenerKey_=goog.events.listen(this.formControl,goog.events.EventType.CLICK,goog.bind(this.executeAction,this,t))};Do.prototype.getSelectionForActionExecution_=function(){var t=this.editingSupport.getSelectionManager().getSelection(),o=this.formControl,i=o.childNodes[0],n=goog.dom.dataset.get(i,"context"),r=this.getParentNode(),s=r.getHtmlNode(),a=r.id,l=p.getStaticContentAncestor(o),c=goog.dom.dataset.get(l,"role");if(!(n==="caret"&&goog.dom.contains(s,t.start.container)&&goog.dom.contains(s,t.end.container))){var d=null;if(c.indexOf("BEFORE")===0||c==="CONTENT")d=new _o(a,f.BEFORE,0);else if(c.indexOf("AFTER")===0){d=new _o(a,f.AFTER,0);var g=p.fromRelativeContentPosition(d);g.prev(),d=g.toRelativeContentPosition()}if(d){var m=d.toHTMLPosition();t=new sync.select.Selection(m,m)}}return t};Do.prototype.executeAction=function(t){if(!this.isDisabled()){var o=this.formControl,i=o.childNodes[0],n=goog.dom.dataset.get(i,"actionid"),r=this.getSelectionForActionExecution_(),s=this.editingSupport.getActionsManager(),a=s.getActionById(n);if(a!=null){this.editingSupport.getSelectionManager().setSelection(r);var l=this.editingSupport.actionsExecutor;l.executeAction(a)}else{var c={actionId:n,docId:t.docId};r.extend(c),this.invokeActionWithValues_(t,c)}}};Do.prototype.applyDocUpdate_=function(t,o){t.applyUpdate_(o)};Do.prototype.exitDocument=function(){Do.superClass_.exitDocument.call(this),this.clickListenerKey_&&(goog.events.unlistenByKey(this.clickListenerKey_),this.clickListenerKey_=null)};Do.prototype.disabledStateUpdated=function(t){var o=this.formControl.childNodes[0];t?o.setAttribute("disabled","true"):o.removeAttribute("disabled")};Do.prototype.recycleFor=function(t){return this.enhanceDomInternal_(t),new hn().checkEquals(this.formControl,t)};var Gm=Do;sync.formctrls.ButtonEnhancer=Do;namespace("sync.formctrls");var lc=function(t,o){sync.formctrls.Enhancer.call(this,t,o),this.eventHandler=null};goog.inherits(lc,sync.formctrls.Enhancer);lc.prototype.enhanceDom=function(){this.enhanceDomInternal_(this.formControl)};lc.prototype.enhanceDomInternal_=function(t){let o=t.firstChild,i=o.hasAttribute("sandbox"),n=o.getAttribute("src"),r=new URL(n),s=goog.dom.createDom("i",{},r.protocol+"//"+r.host);if(i){let a;if(sync.options.ServerOptions.getServerOption("show.admin.link")){let v=window.location.href;a=goog.dom.createDom("a",{href:"admin.html#Security",target:"_blank"},trDom(msgs.TRUSTED_CODE_LOCATION_))}else a=trDom(msgs.TRUSTED_CODE_LOCATION_);let c=goog.dom.createDom("p","explanation",trDom(msgs.PAGE_BLOCKED_BECAUSE_NOT_TRUSTED_CODE_,{$hostname:s,$trustedCodeLocation:a})),d=goog.dom.createDom("a",{className:"read-more-link",href:sync.util.help.getDocumentationUrl(sync.util.help.Id.TRUSTED_CODE_LOCATIONS),target:"_blank"},tr(msgs.READ_MORE_)),g=goog.dom.createDom("a",{className:"iframe-link",href:n,target:"_blank"},tr(msgs.OPEN_IN_NEW_TAB_)),m=goog.dom.createDom("div","iframe-blocked-by-firewall",[c,d,g]);goog.dom.replaceNode(m,o)}};var qm=lc;sync.formctrls.BrowserEnhancer=lc;var ep=class{constructor(o){this.formControl_=o,this.visibilityBefore_=null}forceVisibility(){var o=p.getStaticContentAncestor(this.formControl_);this.visibilityBefore_=o.style.visibility,o.style.visibility="visible"}stopForcingVisibility(){if(goog.isString(this.visibilityBefore_)){var o=p.getStaticContentAncestor(this.formControl_);o.style.visibility=this.visibilityBefore_,this.visibilityBefore_=null}}};namespace("sync.formctrls");goog.require("goog.dom.dataset");goog.require("goog.events");goog.require("goog.ui.PopupMenu");var Nt=function(t,o){La.call(this,t,o),this.handler_=new goog.events.EventHandler(this)};goog.inherits(Nt,La);Nt.prototype.getMainButton_=function(t){var o=t||this.formControl;return o.childNodes[0]};Nt.prototype.getActionIds_=function(t){var o=t||this.formControl,i=o.childNodes[1],n=i.childNodes;return goog.array.map(n,r=>goog.dom.dataset.get(r,"actionid"))};Nt.prototype.populatePopupMenu_=function(t){var o=t.target;if(o.getChildCount()===0){var i=this.formControl.childNodes[1],n=i.childNodes;for(var r of n){var s=goog.dom.dataset.get(r,"actionid"),a=this.editingSupport.getActionsManager(),l=a.getActionById(s);l?this.updateGadgetIconAndLabel(l,r):this.displayAsUnkownAction(r),this.enhanceIcon_(r);var c=r.childNodes,d=a.getActionShortcutForDisplay(s),g=new jl(c,s,d);o.addChild(g,!0)}}};Nt.prototype.enhanceIcon_=function(t){var o=t.childNodes,i=o[0]&&o[0].childNodes[0];i&&i.nodeName==="IMG"&&(goog.dom.classlist.add(i,"goog-menuitem-icon"),i.src||(i.src=i.dataset.src))};Nt.prototype.enterDocument=function(t){Nt.superClass_.enterDocument.call(this,t);var o=new goog.ui.PopupMenu;this.popupMenu=o,o.render(document.body),goog.dom.classlist.add(o.getElement(),"oxy-btn-group-popup"),this.handler_.listen(o,goog.ui.Component.EventType.ACTION,goog.bind(this.handleAction_,this,t)),this.handler_.listen(o,goog.ui.Component.EventType.BEFORE_SHOW,this.populatePopupMenu_),this.handler_.listen(o,goog.ui.Component.EventType.BEFORE_SHOW,this.setActive_),this.handler_.listen(o,goog.ui.Component.EventType.HIDE,this.setInactive_);var i=new ep(this.formControl);this.handler_.listen(o,goog.ui.Component.EventType.BEFORE_SHOW,()=>i.forceVisibility()),this.handler_.listen(o,goog.ui.Component.EventType.HIDE,()=>i.stopForcingVisibility());var n=this.getMainButton_();o.attach(n,goog.positioning.Corner.BOTTOM_LEFT,goog.positioning.Corner.TOP_LEFT)};Nt.prototype.setActive_=function(){this.formControl.classList.add(sync.formctrls.Enhancer.ACTIVE_CLASS)};Nt.prototype.setInactive_=function(){this.formControl.classList.remove(sync.formctrls.Enhancer.ACTIVE_CLASS)};Nt.prototype.handleAction_=function(t,o){var i=this.getParentNode(),n=this.editingSupport.getSelectionManager(),r=n.createEmptySelectionInNode(i,"before");n.setSelection(r);var s=this.editingSupport.getActionsManager(),a=o.target.getValue(),l=s.getActionById(a);if(l){var c=this.editingSupport.actionsExecutor;c.executeAction(l)}else{var d={actionId:a,docId:t.docId};r.extend(d),this.invokeActionWithValues_(t,d)}};Nt.prototype.applyDocUpdate_=function(t,o){new cn().applyUpdate(t,o)};Nt.prototype.exitDocument=function(){this.handler_.dispose(),this.popupMenu&&(this.popupMenu.dispose(),this.popupMenu=null),Nt.superClass_.exitDocument.call(this)};Nt.prototype.disabledStateUpdated=function(t){var o=this.formControl.childNodes[0];t?o.setAttribute("disabled","true"):o.removeAttribute("disabled")};Nt.prototype.recycleFor=function(t){var o=goog.array.equals(this.getActionIds_(t),this.getActionIds_());return o&&this.checkEquals_(t)?(requestAnimationFrame(()=>this.updateMenuPosition_()),!0):!1};Nt.prototype.checkEquals_=function(t){var o=t.cloneNode(!0);o.childNodes[1].remove();var i=t.cloneNode(!0);return i.childNodes[1].remove(),new hn().checkEquals(i,o)};Nt.prototype.updateMenuPosition_=function(){if(this.popupMenu&&this.popupMenu.isVisible()){var t=this.getMainButton_(),o=new goog.positioning.MenuAnchoredPosition(t,goog.positioning.Corner.BOTTOM_LEFT,!0);o.reposition(this.popupMenu.getElement(),goog.positioning.Corner.TOP_LEFT)}};var Xm=Nt;sync.formctrls.ButtonGroupEnhancer=Nt;goog.require("goog.dom.dataset");goog.require("goog.events");goog.require("goog.Uri");namespace("sync.formctrls");var cc=function(t,o){sync.formctrls.Enhancer.call(this,t,o)};goog.inherits(cc,sync.formctrls.Enhancer);cc.prototype.logger=goog.log.getLogger("HTMLContentEnhancer");cc.prototype.enhanceDom=function(){goog.log.info(this.logger,"html form control");var t=goog.dom.dataset.get(this.formControl.childNodes[0],"baseUrl");if(!!t){var o=this.formControl.querySelectorAll("img");if(o!=null)for(var i=0;i<o.length;i++){var n=o.item(i),r=n.getAttribute("src");if(r.indexOf("http://")===-1)if(t.indexOf("@")===0)n.setAttribute("src",sync.util.image.getImageUrl(t+"/"+r));else{var s=new goog.Uri(t),a=s.resolve(new goog.Uri(r));n.setAttribute("src",sync.util.image.getImageUrl(a))}}}};var zm=cc;sync.formctrls.HTMLContentEnhancer=cc;goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.dataset");goog.require("goog.events");namespace("sync.formctrls");var Kn=function(t,o){sync.formctrls.Enhancer.call(this,t,o)};goog.inherits(Kn,sync.formctrls.Enhancer);Kn.prototype.enterDocument=function(t){Kn.superClass_.enterDocument.call(this,t);var o=this.formControl.childNodes[0];this.changeListeners_=[];for(var i=0;i<o.childNodes.length;i++){var n=o.childNodes[i].childNodes[0];goog.asserts.assert(n.tagName===String(goog.dom.TagName.INPUT)&&n.type==="checkbox");var r=goog.events.listen(n,goog.events.EventType.CHANGE,goog.bind(this.onchangeHandler_,this,t));this.changeListeners_.push(r)}};Kn.prototype.exitDocument=function(){Kn.superClass_.exitDocument.call(this);for(var t=0;t<this.changeListeners_.length;t++)goog.events.unlistenByKey(this.changeListeners_[t]);this.changeListeners_=null};Kn.prototype.onchangeHandler_=function(t,o){for(var i=o.target.parentNode.parentNode,n=goog.dom.dataset.get(i,"separator"),r="",s=0;s<i.childNodes.length;s++){var a=i.childNodes[s].childNodes[0];goog.asserts.assert(a.tagName===String(goog.dom.TagName.INPUT)&&a.type==="checkbox");var l=goog.dom.dataset.get(a,a.checked?"checked":"unchecked");l&&(r!==""&&(r+=n),r+=l)}var c=this.getParentNode(),d=c.id,g={docId:t.docId,nodeId:d,value:r},m=goog.dom.dataset.get(i,"attrname");m&&(g.toEdit=m);var v=this.editingSupport.getSelectionManager(),C=v.createEmptySelectionInNode(c,"before");C.extend(g);var N=sync.rest.getSyncMethod("RESTFormControlsSupport.editValue"),D=N(g);if(goog.userAgent.IPHONE||goog.userAgent.IPAD)o.target.focus(),t.applyUpdate_(D);else{var H=new cn;H.applyUpdate(t,D)}};Kn.prototype.disabledStateUpdated=function(t){var o=this.formControl.childNodes[0];this.changeListeners_=[];for(var i=0;i<o.childNodes.length;i++){var n=o.childNodes[i].childNodes[0];t?n.setAttribute("disabled","true"):n.removeAttribute("disabled")}};var Ym=Kn;sync.formctrls.CheckboxEnhancer=Kn;namespace("sync.formctrls");var Fa=function(t,o){this.enhancer_=t,this.attrName_=o,this.commited_=!1};Fa.prototype.commitValue=function(t,o){if(!!this.shouldCommit_(t,o)){var i=this.enhancer_.editingSupport.getController(),n=this.commitValueServerSide_(t,i.docId),r=new cn(i);r.applyUpdate(i,n)}};Fa.prototype.shouldCommit_=function(t,o){return!this.enhancer_.isDisabled()&&!this.commited_&&o!==t};Fa.prototype.commitValueServerSide_=function(t,o){var i=this.enhancer_.getParentNode(),n={value:t,nodeId:i.id,docId:o};this.attrName_&&(n.toEdit=this.attrName_);var r=this.enhancer_.editingSupport.getSelectionManager(),s=r.createEmptySelectionInNode(i,"before");s.extend(n);var a=sync.rest.getSyncMethod("RESTFormControlsSupport.editValue"),l=a(n);return this.commited_=this.overwrites(l,i.getHtmlNode()),l};Fa.prototype.overwrites=function(t,o){var i=!1;t.nodesIds=t.nodesIds||[];for(var n=0;n<t.nodesIds.length;n++){var r=this.enhancer_.editingSupport.getController(),s=r.getXmlModel(),a=s.getXmlNodeById(t.nodesIds[n]);if(goog.dom.contains(a,o)){i=!0;break}}return i};var un=Fa;sync.formctrls.EnhancerValueCommitter=Fa;goog.require("goog.dom.dataset");goog.require("goog.events");goog.require("goog.events.EventHandler");namespace("sync.formctrls");var qt=function(t,o){sync.formctrls.Enhancer.call(this,t,o),this.eventHandler=null};goog.inherits(qt,sync.formctrls.Enhancer);qt.prototype.logger=goog.log.getLogger("ComboEnhancer");qt.prototype.exitDocument=function(){this.eventHandler&&this.eventHandler.dispose(),this.nonEditableChangedKey_&&goog.events.unlistenByKey(this.nonEditableChangedKey_),this.cb&&setTimeout(goog.bind(function(){this.cb.dispose()},this),0),qt.superClass_.exitDocument.call(this)};qt.prototype.nonEditableComboDocumentEnter=function(){this.selectedValue||(this.select.selectedIndex=-1);var t=new un(this,this.attrName);this.nonEditableChangedKey_=goog.events.listen(this.select,goog.events.EventType.CHANGE,goog.bind(function(o){var i=o.target.value;t.commitValue(i,this.oldValue);var n=goog.dom.dataset.get(o.target,"actionid");if(n){var r=this.editingSupport.getActionsManager(),s=r.getActionById(n);s||(s=new ur({id:n},this.controller,this.editingSupport.getReadOnlyStatus(),this.editingSupport.getScrollEventTarget(),this.editingSupport.getSelectionManager())),s.actionPerformed(goog.nullFunction)}},this))};qt.prototype.updateWidth_=function(t,o){var i=t.style.width;if(i)o.style.width=i;else{var n=goog.dom.dataset.get(t,"columns");n&&(o.style.width=n+"em")}};qt.prototype.enhanceNonEditableCombo=function(t){var o=this.getSelect_(t);this.updateWidth_(o,o),goog.dom.classlist.add(o,"oxy-combo-arrow")};qt.prototype.enhanceEditableCombo=function(){this.originalDom_=sync.formctrls.dom.toJSON(this.formControl);var t=this.select.childNodes;this.cb=new ma(t,this.editingSupport.getScrollEventTarget()),this.cb.setDetachedMenu(this.editingSupport.widgets.getDialogContainer()),goog.dom.classlist.add(this.cb.getMenu().getElement(),"fc-combo");var o=this.select.parentNode;goog.dom.removeChildren(o),this.cb.render(o),this.selectedValue&&this.cb.setValue(this.selectedValue);var i=o.getElementsByTagName("input")[0];this.updateWidth_(this.select,i);var n=this.select.style.font;if(n==="inherit"){i.style.font="inherit";var r=o.getElementsByClassName("goog-combobox")[0];r.style.font="inherit"}};qt.prototype.editableComboDocumentEnter=function(){var t=this;this.eventHandler=new goog.events.EventHandler;var o=new un(this,this.attrName);this.cb.startListeners(),this.eventHandler.listen(this.cb,goog.ui.Component.EventType.ACTION,function(i){var n=i.item.getValue();o.commitValue(n,t.oldValue),i.stopPropagation()}).listen(this.cb.getInputElement(),goog.events.EventType.BLUR,function(){o.commitValue(t.cb.getValue(),t.oldValue)},!1)};qt.prototype.enhanceDom=function(){goog.log.info(this.logger,"combo enhance dom");var t=goog.dom.dataset.get,o=this.getSelect_(this.formControl);this.attrName=t(o,"attrname"),this.oldValue=t(o,"value");var i=t(o,"editable")==="true";this.separator=t(o,"separator"),this.selectedValue=this.oldValue,this.select=o,this.editable=i,i?this.enhanceEditableCombo():this.enhanceNonEditableCombo(this.formControl),goog.log.info(this.logger,"combo enhance dom done")};qt.prototype.getSelect_=function(t){return t.childNodes[0]};qt.prototype.enterDocument=function(t){goog.log.info(this.logger,"combo enter document: "+t),qt.superClass_.enterDocument.call(this,t),this.controller=t,this.editable?this.editableComboDocumentEnter():this.nonEditableComboDocumentEnter(),goog.log.info(this.logger,"combo enter document done")};qt.prototype.disabledStateUpdated=function(t){var o;this.cb?(o=this.cb.getInputElement(),this.cb.setEnabled(!this.isDisabled())):o=this.formControl.childNodes[0],t?o.setAttribute("disabled","true"):o.removeAttribute("disabled")};qt.prototype.recycleFor=function(t){var o=!1;if(this.editable)o=sync.util.deepEqual(this.originalDom_,sync.formctrls.dom.toJSON(t)),o&&requestAnimationFrame(()=>this.cb.repositionMenu());else{var i=t.cloneNode(!0);this.enhanceNonEditableCombo(i),o=this.formControl.isEqualNode(i)}return o};var Qm=qt;sync.formctrls.ComboEnhancer=qt;goog.require("goog.dom.dataset");goog.require("goog.events");goog.require("goog.events.EventHandler");namespace("sync.formctrls");var vt=function(t,o){sync.formctrls.Enhancer.call(this,t,o),this.scrollEventTarget_=o.getScrollEventTarget(),this.editingSupport_=o,this.eventHandler=null,this.isEditable_=null,this.popup_=null,this.commitCancelled_=null,this.multiSelOptions_=null,this.eventHandler_=null,this.popupOpenHandler_=null,this.enhancedSelect_=null};goog.inherits(vt,sync.formctrls.Enhancer);vt.prototype.exitDocument=function(){this.eventHandler_&&(this.eventHandler_.removeAll(),this.eventHandler_.dispose()),vt.superClass_.exitDocument.call(this)};vt.prototype.enhanceDom=function(){var t=goog.dom.dataset.get,o=this.formControl.childNodes[0];this.attrName=t(o,"attrname"),this.oldValue=t(o,"value"),this.rendererValue_=t(o,"rendererValue"),this.isEditable_=t(o,"editable")==="true",this.separator=t(o,"separator"),this.rendererSeparator_=t(o,"rendererSeparator")||this.separator,this.columns=t(o,"columns"),this.selectedValue=t(o,"value"),this.width=o.style.width,this.select=o;var i=null;sync.util.isMobile()?i=this.renderDefaultMultiSelect_():i=this.renderCustomMultiSelect_(),this.select.parentElement.replaceChild(i,this.select),this.enhancedSelect_=i};vt.prototype.renderDefaultMultiSelect_=function(){var t=goog.dom.createDom("select");return this.select.getAttribute("multiple")!==null&&t.setAttribute("multiple","true"),goog.dom.dataset.set(t,"attrname",this.attrName),goog.dom.dataset.set(t,"editable",this.isEditable_),goog.dom.dataset.set(t,"separator",this.separator),t.setAttribute("style",this.select.getAttribute("style")),goog.dom.append(t,this.makeOptionElements_(this.select)),t};vt.prototype.renderCustomMultiSelect_=function(){var t=goog.dom.createDom("button",{className:"popupSelContainer",title:tr(msgs.CLICK_TO_EDIT_)});this.select.getAttribute("multiple")!==null&&goog.dom.dataset.set(t,"multiple","true"),this.isDisabled()&&t.setAttribute("disabled","true");var o=this.select.getAttribute("style");o!==null&&t.setAttribute("style",o),this.multiSelOptions_=this.getOptions_(this.select);var i="";return this.rendererValue_&&(i=this.rendererValue_.split(this.rendererSeparator_).join(" "+this.rendererSeparator_+" ")),i===""&&(i="["+tr(msgs.EMPTY_)+"]"),t.textContent=i,t};vt.prototype.enterDocument=function(t){vt.superClass_.enterDocument.call(this,t),this.controller=t,this.selectedValue||(this.select.selectedIndex=-1),this.eventHandler_=new goog.events.EventHandler,sync.util.isMobile()?this.eventHandler_.listenWithScope(this.enhancedSelect_,goog.events.EventType.BLUR,this.defaultPopupSelectChanged_,!0,this):this.eventHandler_.listen(this.enhancedSelect_,goog.events.EventType.CLICK,goog.bind(this.showMultiSelectPopup_,this))};vt.prototype.getOptions_=function(t){for(var o=0,i=[],n=goog.dom.dataset.getAll(t),r=["Value","Title","Selected","Text"],s=n["option"+o+"Value"];s!=null;){var a={};goog.array.forEach(r,function(l){var c="option"+o+l,d=n[c];goog.isDef(d)&&(a[l.toLowerCase()]=d)}),i.push(a),o++,s=n["option"+o+"Value"]}return i};vt.prototype.showMultiSelectPopup_=function(){if(this.popup_)this.popup_.setVisible(!0);else{var t=goog.dom.createDom("div",{id:"popup-sel"});goog.dom.appendChild(workspace.layoutManager.getDialogContainer(),t);var o=new goog.positioning.AnchoredViewportPosition(this.enhancedSelect_,goog.positioning.Corner.BOTTOM_LEFT,!0),i=new goog.ui.Popup(t,o);i.setAutoHide(!0);var n=i.getElement();n.id="popup-sel-parent",i.setPinnedCorner(goog.positioning.Corner.TOP_LEFT),this.popup_=i,this.popupOpenHandler_=new goog.events.EventHandler(this).listen(i,goog.ui.PopupBase.EventType.BEFORE_SHOW,goog.bind(this.populatePopup_,this)).listen(i,goog.ui.PopupBase.EventType.HIDE,goog.bind(this.commitFromPopup_,this)).listen(n,goog.events.EventType.CLICK,goog.bind(this.closeButtonHidePopup_,this)).listen(document.body,goog.events.EventType.KEYDOWN,goog.bind(function(r){r.keyCode===goog.events.KeyCodes.ESC&&(this.commitCancelled_=!0,this.popup_.setVisible(!1))},this),!0).listenOnce(this.scrollEventTarget_,goog.events.EventType.SCROLL,goog.bind(function(){this.commitCancelled_=!0,this.popup_.setVisible(!1)},this),!1),i.setVisible(!0)}};vt.prototype.defaultPopupSelectChanged_=function(){for(var t="",o=this.enhancedSelect_.childNodes,i=0;i<o.length;i++)o[i].selected&&(t!==""&&(t+=this.separator),t+=o[i].value);var n=new un(this,this.attrName);n.commitValue(t,this.oldValue)};vt.prototype.commitFromPopup_=function(){if(this.commitCancelled_)this.commitCancelled_=!1,this.enhancedSelect_.focus();else{var t="",o=this.separator,i=document.querySelectorAll("#popup-sel-parent input");goog.array.forEach(i,function(r){r.checked&&(t+=r.value+o)}),t.indexOf(o)!==-1&&(t=t.slice(0,-o.length));var n=new un(this,this.attrName);n.commitValue(t,this.oldValue),this.moveSelectionInsideElement_()}this.popupOpenHandler_.removeAll(),this.popupOpenHandler_.dispose(),this.popup_.dispose(),this.popup_=null,goog.dom.removeNode(document.querySelector("#popup-sel-parent"))};vt.prototype.moveSelectionInsideElement_=function(){var t=this.editingSupport.getSelectionManager(),o=p.isStaticContentBefore(this.formControl.parentNode),i=t.createEmptySelectionInNode(this.getParentNode(),o?"before":"after");t.setSelection(i,{focus:!1}),this.editingSupport.focus()};vt.prototype.populatePopup_=function(){var t=this.multiSelOptions_,o=this.popup_.getElement();goog.dom.removeChildren(o),goog.dom.append(o,goog.dom.createDom("div","popup-sel-opts",this.makeCustomOptionElements_(t)),goog.dom.createDom("button","popup-sel-submit",tr(msgs.CLOSE_))),setTimeout(function(){var i=o.querySelector("input:checked")||o.querySelector("input");i&&i.focus()},0)};vt.prototype.closeButtonHidePopup_=function(t){var o=t.target;o&&goog.dom.getAncestorByClass(o,"popup-sel-submit")!==null&&this.popup_.setVisible(!1)};vt.prototype.makeOptionElements_=function(t){var o=this.getOptions_(t),i=[];return goog.array.forEach(o,function(n){var r=goog.dom.createDom("option",{value:n.value},n.text);goog.isDef(n.title)&&r.setAttribute("title",n.title),goog.isDef(n.selected)&&r.setAttribute("selected","true"),i.push(r)}),i};vt.prototype.makeCustomOptionElements_=function(t){var o=goog.dom.dataset.get(this.enhancedSelect_,"multiple"),i=o?"checkbox":"radio",n=[],r=this.attrName;return goog.array.forEach(t,function(s){var a=goog.dom.createDom("input",{type:i,value:s.value,class:"popup-sel__radio"});o||a.setAttribute("name","popup-sel-"+r),s.hasOwnProperty("selected")&&a.setAttribute("checked","checked");var l=goog.dom.createDom("label","popup-sel-item",a,goog.dom.createDom("span","popup-sel__opt-text",s.text));n.push(l)}),n};vt.prototype.disabledStateUpdated=function(t){var o=this.formControl.childNodes[0];t?(o.setAttribute("disabled","true"),tr(msgs.CLICK_TO_EDIT_)===o.getAttribute("title")&&o.removeAttribute("title")):(o.removeAttribute("disabled"),o.getAttribute("title")||o.setAttribute("title",tr(msgs.CLICK_TO_EDIT_)))};var Jm=vt;sync.formctrls.PopupSelectionEnhancer=vt;goog.require("goog.dom.dataset");goog.require("goog.events");namespace("sync.formctrls");var Jo=function(t,o,i){sync.formctrls.Enhancer.call(this,t,o),this.commitChangesWithCtrlPressed_=!!i,this.textInput_=this.formControl.childNodes[0],this.oldValue=this.textInput_.value,this.eventHandler=new goog.events.EventHandler(this),this.valueCommitter_=null};goog.inherits(Jo,sync.formctrls.Enhancer);Jo.prototype.enterDocument=function(t){Jo.superClass_.enterDocument.call(this,t),this.textInput_=this.formControl.childNodes[0];var o=this.getEnhancerAttributeName_();this.valueCommitter_=new un(this,o),this.eventHandler.listen(this.textInput_,goog.events.EventType.BLUR,()=>{this.valueCommitter_.commitValue(this.textInput_.value,this.oldValue)}),this.eventHandler.listen(this.textInput_,goog.events.EventType.KEYDOWN,goog.bind(this.onKeyDown_,this),!0),this.eventHandler.listen(this.textInput_,goog.events.EventType.KEYDOWN,goog.bind(this.onCtrlKeyDown_,this),!0)};Jo.prototype.onKeyDown_=function(t){var o=t.keyCode,i=goog.events.KeyCodes;if(o===i.ESC)this.textInput_.value=this.oldValue;else if(o===i.TAB)this.valueCommitter_.commitValue(this.textInput_.value,this.oldValue);else if(o===i.ENTER&&this.commitChangesWithCtrlPressed_===t.ctrlKey){t.preventDefault(),t.stopPropagation(),this.valueCommitter_.commitValue(this.textInput_.value,this.oldValue);var n=this.editingSupport.getSelectionManager(),r=n.getSelection().getNodeAtCaret(),s=n.createEmptySelectionRelativeToNode(r,0,!0);n.setSelection(s)}};Jo.prototype.onCtrlKeyDown_=function(t){if(t.ctrlKey||t.metaKey){if(t.keyCode===goog.events.KeyCodes.A){this.textInput_.select(),t.preventDefault(),t.stopPropagation();return}var o=new J;o.fromKeyEvent(t),o.getCode()===new J("M1 S").getCode()&&this.valueCommitter_.commitValue(this.textInput_.value,this.oldValue)}};Jo.prototype.getEnhancerAttributeName_=function(){var t=goog.dom.dataset.get(this.textInput_,"attrname");if(t==null){var o=goog.dom.dataset.get(this.textInput_,"xmlContentEdit");o&&(t="#CONTENT")}return t};Jo.prototype.exitDocument=function(){Jo.superClass_.exitDocument.call(this),this.eventHandler.dispose()};Jo.prototype.disabledStateUpdated=function(t){var o=this.formControl.childNodes[0];t?o.setAttribute("disabled","true"):o.removeAttribute("disabled")};Jo.prototype.recycleFor=function(t){return new hn().checkEquals(this.formControl,t)};Jo.prototype.makeClassListEqual_=function(t,o){t.classList.length?o.setAttribute("class",t.classList.value):(o.removeAttribute("class"),t.removeAttribute("class"))};var mn=Jo;sync.formctrls.TextEnhancer=Jo;namespace("sync.formctrls");var Ps=function(t){this.enhancer_=t,this.commited_=!1};Ps.prototype.getEditValue=function(){var t=sync.rest.getSyncMethod("RESTFormControlsSupport.editValue"),o=this.enhancer_.formControl.childNodes[0],i=o.value;if(i){var n=o.type;n==="datetime-local"?t=sync.rest.getSyncMethod("RESTFormControlsSupport.editDatetime"):n==="date"?t=sync.rest.getSyncMethod("RESTFormControlsSupport.editDate"):n==="time"&&(t=sync.rest.getSyncMethod("RESTFormControlsSupport.editTime"))}return t};Ps.prototype.hasCommitted=function(){return this.committed_};Ps.prototype.collectParams_=function(t,o,i){let n=h.getIdOfXmlNode(t);var r=goog.dom.dataset.get(o,"format"),s={nodeId:n,docId:i.docId,format:r},a=goog.dom.dataset.get(o,"attrname");a&&(s.toEdit=a);var l=new sync.position.RelativeContentPosition(n,f.BEFORE,0).toHTMLPosition(),c=new sync.select.Selection(l);return c.extend(s),s};Ps.prototype.commitValue=function(t,o){if(!(this.enhancer_.isDisabled()||this.commited_)){var i=this.enhancer_.getParentNode().getHtmlNode();if(o!=t){var n=this.enhancer_.editingSupport.getController(),r=this.enhancer_.formControl.childNodes[0],s=this.collectParams_(i,r,n);s.value=t;var a=this.getEditValue(),l=a(s);l&&(this.committed_=this.overwrites(l,i),goog.userAgent.EDGE?n.applyUpdate_(l):new cn().applyUpdate(n,l))}}};Ps.prototype.overwrites=function(t,o){var i=!1;t.nodesIds=t.nodesIds||[];for(var n=0;n<t.nodesIds.length;n++){var r=this.enhancer_.editingSupport.getController(),s=r.getXmlModel(),a=s.getXmlNodeById(t.nodesIds[n]);if(goog.dom.contains(a,o)){i=!0;break}}return i};var $m=Ps;sync.formctrls.DatePickerEnhancerCommitter=Ps;goog.require("goog.dom.dataset");goog.require("goog.events");goog.require("goog.events.EventHandler");namespace("sync.formctrls");var Et=function(t,o){sync.formctrls.Enhancer.call(this,t,o),this.textEnhancerFallback_=null,this.handler_=new goog.events.EventHandler(this),this.valueCommitter_=null};goog.inherits(Et,sync.formctrls.Enhancer);Et.prototype.enhanceDom=function(){this.enhanceDomInternal_(this.formControl)};Et.prototype.enhanceDomInternal_=function(t){var o=t.childNodes[0];if(o.type=goog.userAgent.IE?"text":goog.dom.dataset.get(o,"type"),o.type==="text"){var i=goog.dom.dataset.get(o,"unformattedValue");o.value=i,goog.dom.dataset.set(o,"value",i),this.textEnhancerFallback_=new mn(t,this.editingSupport),this.textEnhancerFallback_.enhanceDom()}else this.setValue_(o)};Et.prototype.formatDate_=function(t){var o=2;return t.getFullYear()+"-"+goog.string.padNumber(t.getMonth()+1,o)+"-"+goog.string.padNumber(t.getDate(),o)};Et.prototype.formatTime_=function(t){var o=2;return goog.string.padNumber(t.getHours(),o)+":"+goog.string.padNumber(t.getMinutes(),o)};Et.prototype.setValue_=function(t){var o={};["y","mo","d","h","m","s","ts"].forEach(function(s){var a=goog.dom.dataset.get(t,s);o[s]=a&&parseInt(a,10)});var i=t.type,n=goog.dom.dataset.get(t,"unformattedValue"),r=this.serializeValue_(o,i,n);t.value=r,goog.dom.dataset.set(t,"value",r)};Et.prototype.serializeValue_=function(t,o,i){var n=null,r=goog.isDefAndNotNull(t.ts);if(r)n=new Date(t.ts);else{var s=goog.isDefAndNotNull(t.y),a=goog.isDefAndNotNull(t.h);if(s&&a)n=new Date(t.y,t.mo-1,t.d,t.h,t.m);else if(!s&&a){var l=new Date(0);n=new Date(l.getFullYear(),l.getMonth(),l.getDate(),t.h,t.m)}else s&&!a&&(n=new Date(t.y,t.mo-1,t.d))}return this.formatForSerialization_(n,o,i)};Et.prototype.formatForSerialization_=function(t,o,i){var n;return o==="datetime-local"?n=t?this.formatDate_(t)+"T"+this.formatTime_(t):"":o==="date"?n=t?this.formatDate_(t):"":o==="time"?n=t?this.formatTime_(t):"":n=i,n};Et.prototype.enterDocument=function(t){if(this.textEnhancerFallback_){this.textEnhancerFallback_.enterDocument(t);return}Et.superClass_.enterDocument.call(this);var o=this.formControl.childNodes[0];o.nodeType===goog.dom.NodeType.ELEMENT&&(this.valueCommitter_=new $m(this),goog.userAgent.EDGE&&this.handler_.listen(o,goog.events.EventType.CHANGE,goog.bind(this.commitValue_,this)),this.handler_.listen(o,goog.events.EventType.BLUR,goog.bind(this.onBlur_,this)),this.handler_.listen(o,goog.events.EventType.KEYDOWN,goog.bind(this.onKeyDown_,this)))};Et.prototype.getValue=function(){var t=this.formControl.childNodes[0],o=t.value;if(o){var i=t.type;(i==="datetime-local"||i==="time")&&(o=o+":00")}else o="";return o};Et.prototype.commitValue_=function(){var t=this.formControl.childNodes[0],o=this.getValue(),i=goog.dom.dataset.get(t,"value");this.valueCommitter_.commitValue(o,i)};Et.prototype.onBlur_=function(){var t=this.formControl.childNodes[0];if(this.commitValue_(),this.valueCommitter_.hasCommitted()&&goog.userAgent.GECKO){var o=t.value;setTimeout(()=>{o!==t.value&&this.commitValue_()},0)}};Et.prototype.onKeyDown_=function(t){var o=t.keyCode,i=goog.events.KeyCodes,n=this.formControl.childNodes[0];o===i.ESC?n.value=goog.dom.dataset.get(n,"value"):o===i.TAB?n.type==="text"&&this.commitValue_():o===i.ENTER&&(this.commitValue_(),t.preventDefault())};Et.prototype.exitDocument=function(){if(this.textEnhancerFallback_){this.textEnhancerFallback_.exitDocument();return}Et.superClass_.exitDocument.call(this),this.handler_.dispose()};Et.prototype.disabledStateUpdated=function(t){var o=this.formControl.childNodes[0];t?o.setAttribute("disabled","true"):o.removeAttribute("disabled")};Et.prototype.recycleFor=function(t){return this.enhanceDomInternal_(t),new hn().checkEquals(this.formControl,t)};var Zm=Et;sync.formctrls.DatePickerEnhancer=Et;goog.require("goog.dom.dataset");goog.require("goog.events");namespace("sync.formctrls");var ks=function(t,o){mn.call(this,t,o,!0)};goog.inherits(ks,mn);ks.prototype.enhanceDom=function(){this.enhanceDomInternal_(this.formControl)};ks.prototype.enhanceDomInternal_=function(t){var o=t.childNodes[0];if(!o.hasAttribute("rows")&&!o.hasAttribute("cols")&&!goog.dom.classlist.contains(o,"oxy-width-set")){var i=sync.util.getDocDomHelper(),n=i.createDom("textArea");n.value=o.value,n.style.position="fixed",n.style.boxSizing="border-box",n.style.whiteSpace="pre",i.appendChild(document.body,n);var r=6,s=n.scrollHeight+r+"px",a=n.scrollWidth+r+"px";i.removeNode(n),o.style.height=s,o.style.width=a}};ks.prototype.disabledStateUpdated=function(t){var o=this.formControl.childNodes[0];t?o.setAttribute("disabled","true"):o.removeAttribute("disabled")};ks.prototype.recycleFor=function(t){return this.enhanceDomInternal_(t),new hn().checkEquals(this.formControl,t)};var ef=ks;sync.formctrls.TextAreaEnhancer=ks;namespace("sync.formctrls");var ki=function(t,o){mn.call(this,t,o)};goog.inherits(ki,mn);ki.prototype.enhanceDom=function(){ki.superClass_.enhanceDom.call(this);var t=workspace.getUrlChooser();if(t){var o=sync.util.getDocDomHelper();this.chooseButton=o.createDom("button","form-control-url-chooser-choose"),goog.dom.classlist.add(this.formControl,"form-control-url-chooser"),o.append(this.formControl,this.chooseButton)}};ki.prototype.enterDocument=function(t){ki.superClass_.enterDocument.call(this,t);var o=workspace.getUrlChooser();o&&goog.events.listen(this.chooseButton,goog.events.EventType.CLICK,goog.bind(function(){this.isDisabled()||(o.chooseUrl(new sync.api.UrlChooser.Context(sync.api.UrlChooser.Type.GENERIC),goog.bind(this.fileChosen,this,t),sync.api.UrlChooser.Purpose.CHOOSE),goog.isDef(o.dialog)&&goog.isDef(o.dialog.dialog)&&(o.dialog.dialog.lastFocus_=null))},this))};ki.prototype.exitDocument=function(){ki.superClass_.exitDocument.call(this),goog.events.removeAll(this.chooseButton)};ki.prototype.fileChosen=function(t,o){if(o){var i=this.formControl.querySelector("input");i.value=workspace.makeRelative(this.editingSupport.getUrl(),o),i.focus();var n=this.formControl.childNodes[0],r=goog.dom.dataset.get(n,"attrname"),s=new un(this,r);s.commitValue(n.value,"")}};ki.prototype.disabledStateUpdated=function(t){var o=this.formControl.childNodes[0];t?(this.formControl.setAttribute("disabled","true"),o.setAttribute("disabled","true")):(this.formControl.removeAttribute("disabled"),o.removeAttribute("disabled"))};var tf=ki;sync.formctrls.UrlChooserEnhancer=ki;goog.require("goog.events.EventHandler");goog.require("goog.dom");goog.require("goog.structs.Map");namespace("sync.formctrls");var Lr=function(t,o){sync.formctrls.Enhancer.call(this,t,o),this.imgSrc_=null,this.svgWrapper_=null};goog.inherits(Lr,sync.formctrls.Enhancer);Lr.prototype.enhanceDom=function(){var t=this.formControl.childNodes[0];t.tagName.toLowerCase()===String(goog.dom.TagName.SVG).toLowerCase()&&(this.imgSrc_=goog.dom.dataset.get(t,"imageHref"),this.svgWrapper_=goog.dom.createDom("div","imagemap-wrapper"),goog.dom.appendChild(this.svgWrapper_,t),goog.dom.appendChild(this.formControl,this.svgWrapper_))};Lr.prototype.getEncodedImageSrc=function(){var t=this.imgSrc_.match(/url=([^&]*)/);return t?t[1]:encodeURIComponent(encodeURIComponent(this.imgSrc_))};Lr.prototype.enterDocument=function(t){if(!!this.imgSrc_){var o=new Image,i=this.svgWrapper_;goog.dom.appendChild(i,o);var n=this.getEncodedImageSrc();o.src="../rest/"+it+"/load/image-cached/"+this.editingSupport.docId+"/?url="+n;var r=this.getRenderedSize(i).then(goog.bind(function(l){return i.style.width=l.width+"px",i.style.height=l.height+"px",l},this)),s="../rest/"+it+"/load/image-raw/?url="+n;goog.dom.dataset.set(i,"rawUrl",s);var a=sync.util.image.getImageSizeSlow(s);a.then(goog.bind(function(l){goog.dom.dataset.set(i,"rawWidth",l.width),goog.dom.dataset.set(i,"rawHeight",l.height)},this)),goog.Promise.all([r,a]).then(goog.bind(this.scaleSvgIfNeeded_,this))}};Lr.prototype.getRenderedSize=function(t){var o=t.querySelector("img"),i=t.querySelector("svg"),n={width:parseInt(i.getAttribute("width"),10),height:parseInt(i.getAttribute("height"),10)},r;return n.width&&n.height?r=goog.Promise.resolve(n):r=sync.util.image.getImageSizeSlow(o).then(function(s){return n.width?n.height=Math.round(n.width*(s.height/s.width)*10)/10:n.height?n.width=Math.round(n.height*(s.width/s.height)*10)/10:n=s,n}),r};Lr.prototype.scaleSvgIfNeeded_=function(t){var o=t[0],i=t[1];if(o.width!==i.width){var n=18;i.width<1024&&(n=0);var r=o.height-n,s=i.height/r,a=18*s,l=i.height+a,c=this.svgWrapper_.childNodes[0];c.setAttribute("viewBox","0 "+-a+" "+i.width+" "+l);var d=Math.round(12*s);c.setAttribute("font-size",d)}};var of=Lr;sync.formctrls.ImageMapEnhancer=Lr;goog.require("goog.events");goog.require("goog.structs.Map");goog.require("goog.dom.dataset");namespace("sync.formctrls");var lt=function(t){this.enhancersMap_=new goog.structs.Map,this.editingSupport=t,this.controller=null,this.enhancersByNodeId_=new goog.structs.Map,this.recycledEnhancer_=null,this.newDomForRecycledEnhancer_=null,this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_),this.attachReadOnlyStatusChangedListener_(),pe.call(this)};goog.inherits(lt,pe);lt.prototype.enhancersByNodeId_=null;lt.prototype.registerEnhancer=function(t,o){this.enhancersMap_.set(t,o)};lt.prototype.createEnhancer_=function(t){var o=null,i=null,n=this.getType_(t),r=this.enhancersMap_.get(n);return r&&(i=Object.create(r.prototype),i.setDocumentReadOnly(this.editingSupport.getReadOnlyStatus().isReadOnly()),o=r.apply(i,[t,this.editingSupport])),o!==null&&typeof o=="object"?o:i};lt.prototype.getType_=function(t){return goog.dom.dataset.get(t,"type")};lt.prototype.recycle=function(t){var o=this.getActiveFormControl_();if(o){var i=goog.array.findIndex(t,n=>goog.dom.contains(n.getOldElement(),o));i!==-1&&this.recycleEnhancerForActiveFormControl_(o,t[i])}};lt.prototype.getActiveFormControl_=function(){var t=document.activeElement;if(sync.formctrls.dom.isInsideFormControl(t))return sync.formctrls.dom.getContainingFormControl(t);var o=this.editingSupport.controller,i=o.getDocument().getHtmlNode();return i.getElementsByClassName(sync.formctrls.Enhancer.ACTIVE_CLASS)[0]};lt.prototype.recycleEnhancerForActiveFormControl_=function(t,o){var i=this.findCorrespondingFormControl_(t,o);if(i&&o.areCompatible(t,i)){var n=this.getEnhancer_(t);n&&n.recycleFor(i)&&(t.classList.contains(sync.formctrls.Enhancer.ACTIVE_CLASS)&&i.classList.add(sync.formctrls.Enhancer.ACTIVE_CLASS),this.recycledEnhancer_=n,this.newDomForRecycledEnhancer_=i,o.reportRecycledPair(t,i))}};lt.prototype.getEnhancer_=function(t){var o=sync.model.XmlDom.getContainingXmlNode(t),i=h.getIdOfXmlNode(o),n=this.enhancersByNodeId_.get(i);return goog.array.find(n,r=>r.formControl===t)};lt.prototype.findCorrespondingFormControl_=function(t,o){var i=p.getStaticContentAncestor(t),n=o.findCorrespondingStaticContent(i);if(n){var r=sync.formctrls.dom.getFormControls(i),s=r.indexOf(t),a=sync.formctrls.dom.getFormControls(n),l=a[s];if(l&&this.getType_(t)===this.getType_(l))return l}return null};lt.prototype.enhanceDom=function(t){for(var o of t){var i=o.querySelectorAll('[data-role="form-control"]');for(var n of i){var r=null;if(this.newDomForRecycledEnhancer_!==n&&(r=this.createEnhancer_(n)),r){r.enhanceDom(this.editingSupport),r.disabledStateUpdated(r.isDisabled());var s=sync.model.XmlDom.getContainingXmlNode(n),a=h.getIdOfXmlNode(s),l=this.enhancersByNodeId_.get(a);l||(l=[],this.enhancersByNodeId_.set(a,l)),l.push(r)}}}};lt.prototype.enterDocument=function(t){this.controller=this.controller||this.editingSupport.getController(),Mn.getXmlNodes(t).map(h.getIdOfXmlNode).forEach(o=>{var i=this.enhancersByNodeId_.get(o)||[];i.forEach(n=>{n!==this.recycledEnhancer_&&n.enterDocument(this.controller)})}),this.recycledEnhancer_=null,this.newDomForRecycledEnhancer_=null};lt.prototype.exitDocument=function(t){Mn.getXmlNodes(t).map(h.getIdOfXmlNode).forEach(o=>{var i=this.enhancersByNodeId_.get(o)||[];this.enhancersByNodeId_.remove(o),i.forEach(n=>{n!==this.recycledEnhancer_?n.exitDocument():this.enhancersByNodeId_.set(o,[this.recycledEnhancer_])})})};lt.prototype.dropNodes=function(t){Mn.getXmlNodes(t).map(h.getIdOfXmlNode).forEach(o=>{this.enhancersByNodeId_.remove(o)})};lt.prototype.registerBuiltinEnhancers=function(){var t={button:Gm,browser:qm,text:mn,textArea:ef,urlChooser:tf,datePicker:Zm,check:Ym,combo:Qm,popupSelection:Jm,buttonGroup:Xm,htmlContent:zm,"ro.sync.ecss.webapp.formcontrols.WebappImageMapRenderer":of};for(var o in t)t.hasOwnProperty(o)&&this.registerEnhancer(o,t[o])};lt.prototype.attachReadOnlyStatusChangedListener_=function(){this.eventHandler_.listen(this.editingSupport.getReadOnlyStatus(),ue.EventTypes.READ_ONLY_STATUS_CHANGED,this.readOnlyStatusChangedCallback_)};lt.prototype.readOnlyStatusChangedCallback_=function(t){this.enhancersByNodeId_.forEach(function(o){o.forEach(function(i){i.documentReadOnlyStatusChanged(t.isReadOnly)})})};lt.prototype.disposeInternal=function(){this.enhancersByNodeId_.getValues().forEach(function(t){t.forEach(function(o){o.exitDocument()})}),lt.superClass_.disposeInternal.call(this)};var nf=lt;sync.formctrls.Enhancers=lt;namespace("sync.ctrl");var Fr=function(t,o){goog.events.EventTarget.call(this),this.controller_=t,this.controller_.setParentEventTarget(this),this.selectionManager_=o,this.docId=t.docId};goog.inherits(Fr,goog.events.EventTarget);Fr.prototype.setAttribute=function(t,o,i){var n={docId:this.controller_.docId,nodeId:t,attributeName:o,attributeValue:i};goog.object.extend(n,this.selectionManager_.getSelection().save().toJson());var r=RESTAttributesManager.setAttribute(n);try{this.controller_.applyUpdate_(r)}catch(s){sync.util.error.reloadPage(s)}};Fr.prototype.setAttributes=function(t,o){var i={docId:this.controller_.docId,$entity:{nodeIDs:t,attributes:o,selection:this.selectionManager_.getSelection().save().toJson()}};return sync.rest.callAsyncNative("RESTAttributesManager.setAttributes",i).then(n=>{try{this.controller_.applyUpdate_(n)}catch(r){sync.util.error.reloadPage(r)}}).catch(n=>{sync.util.error.reloadPage(n)})};Fr.prototype.removeAttribute=function(t,o){var i={docId:this.controller_.docId,nodeId:t,attributeName:o};goog.object.extend(i,this.selectionManager_.getSelection().save().toJson());var n=RESTAttributesManager.removeAttribute(i);try{this.controller_.applyUpdate_(n)}catch(r){sync.util.error.reloadPage(r)}};Fr.prototype.getB64Content=function(){return sync.rest.callAsync("RESTDocumentManager.retrieveBase64Content",{id:this.docId})};Fr.prototype.getEditedDocumentsB64ContentZip=function(){return sync.rest.callAsync("RESTDocumentManager.retrieveDocAndReferencesAsBase64Zip",{id:this.docId})};var rf=Fr;sync.ctrl.XmlController=Fr;namespace("sync.actions");var Eo=class extends _{constructor(o,i,n){super(n);this.selectionManager_=i,this.foldingManager=o}actionPerformed(o){this.actionPerformedInternal(),this.selectionManager_.restoreSelectionInBrowser();var i=this.selectionManager_.getSelection();this.selectionManager_.scrollSelectionIntoView(i),o&&o()}actionPerformedInternal(){}};sync.actions.FoldAction=Eo;namespace("sync.actions");var dc=class extends Eo{constructor(o,i){super(o,i,{keyStrokeStr:"M1 divide",displayName:tr(msgs.COLLAPSE_OTHER_FOLDS_),description:tr(msgs.COLLAPSE_OTHER_FOLDS_TOOLTIP_),smallIconPath:"/images/CloseOtherFolds16.png",largeIconPath:"/images/CloseOtherFolds24.png"})}actionPerformedInternal(){var o=this.foldingManager.getCaretFoldableAncestor();this.foldingManager.foldOthers(o)}};sync.actions.FoldOthers=dc;namespace("sync.actions");var pc=class extends Eo{constructor(o,i){super(o,i,{keyStrokeStr:"M1 decimal",displayName:tr(msgs.COLLAPSE_CHILD_FOLDS_),description:tr(msgs.COLLAPSE_CHILD_FOLDS_TOOLTIP_),smallIconPath:"/images/CollapseChildFolds16.png",largeIconPath:"/images/CollapseChildFolds24.png"})}actionPerformedInternal(){var o=this.foldingManager.getCaretFoldableAncestor();this.foldingManager.foldChildren(o)}};sync.actions.FoldChildren=pc;namespace("sync.actions");var gc=class extends Eo{constructor(o,i){super(o,i,{displayName:tr(msgs.TOGGLE_FOLD_),description:tr(msgs.TOGGLE_FOLD_TOOLTIP_),smallIconPath:"/images/ToggleFold16.png",largeIconPath:"/images/ToggleFold24.png"})}actionPerformedInternal(){var o=this.foldingManager.getCaretFoldableAncestor();this.foldingManager.toggleFolding(o)}};sync.actions.ToggleFold=gc;namespace("sync.actions");var hc=class extends Eo{constructor(o,i){super(o,i,{keyStrokeStr:"M1 multiply",displayName:tr(msgs.EXPAND_ALL_),description:tr(msgs.EXPAND_ALL_TOOLTIP_),smallIconPath:"/images/ExpandAll16.png",largeIconPath:"/images/ExpandAll24.png"})}actionPerformedInternal(){this.foldingManager.expandAll()}};sync.actions.ExpandAll=hc;namespace("sync.actions");var uc=class extends Eo{constructor(o,i){super(o,i,{displayName:tr(msgs.EXPAND_CHILD_FOLDS_),description:tr(msgs.EXPAND_CHILD_FOLDS_TOOLTIP_),smallIconPath:"/images/ExpandChildFolds16.png",largeIconPath:"/images/ExpandChildFolds24.png"})}actionPerformedInternal(){var o=this.foldingManager.getCaretFoldableAncestor();this.foldingManager.expandChildren(o)}};sync.actions.ExpandChildren=uc;var Zv="oxy-static",eE="oxy-label",tE="oxy-img",tp=class{constructor(o){this.htmlElement_=o}isTextOrLabel(){return goog.dom.classlist.contains(this.htmlElement_,Zv)||goog.dom.classlist.contains(this.htmlElement_,eE)}isImage(){return goog.dom.classlist.contains(this.htmlElement_,tE)}};var op=class{constructor(o){this.htmlElement_=o}getItems(){return Array.from(this.htmlElement_.children).map(o=>this.getWrappedItem_(o))}getWrappedItem_(o){for(;goog.dom.classlist.contains(o,"oxy-sentinel-marker")||goog.dom.classlist.contains(o,"oxy-imgwrapper");)o=o.childNodes[0];return new tp(o)}};namespace("sync.actions");var mc=class extends Eo{constructor(o,i){super(o,i,{displayName:tr(msgs.COLLAPSE_ALL_),description:tr(msgs.COLLAPSE_ALL_),smallIconPath:"/images/CollapseAll16.png",largeIconPath:"/images/CollapseAll16.png"})}actionPerformedInternal(){this.foldingManager.foldAll()}};sync.actions.FoldAll=mc;goog.require("goog.structs.Set");goog.require("goog.structs.Queue");namespace("sync.ctrl");var F=function(t,o,i,n,r){pe.call(this),this.toggledElements_=new goog.structs.Set,this.foldedClass_="folded",this.foldableClass_="oxy-foldable",this.nonFoldableChildClass_="non-folded-child",this.foldedPlaceholderAttr_="folded-placeholder",this.actionIds_=[],this.eventHandler_=new goog.events.EventHandler(this).listen(t,goog.events.EventType.CLICK,this.handleClickInDoc_).listen(t,[goog.events.EventType.MOUSEDOWN,goog.events.EventType.CONTEXTMENU],this.preventEventsOnFoldingToggle_,!0).listen(o,br.EventType.BEFORE_STYLES_CHANGED,this.resetFoldedStates_),this.registerDisposable(this.eventHandler_),this.docContainer=t,this.elementNameEnhancer=i,this.xmlModel_=n,this.multipleNonFoldedChildren_=r.multipleNonFoldedChildren!=="false"&&r.multipleNonFoldedChildren!==!1,this.selectionManager_=null,this.nonEditableFolds_=goog.userAgent.EDGE,this.perfFoldedElementsQueue_=[],this.perfUnfoldingBatchSize_=10,this.perfUnfoldTimer_=0};goog.inherits(F,pe);F.prototype.perfUnfoldingPause=16;F.prototype.drainPerfFoldedElementsQueue_=function(){for(var t=0;t<this.perfFoldedElementsQueue_.length;t++)this.expand_(this.perfFoldedElementsQueue_[t]);clearTimeout(this.perfUnfoldTimer_),this.perfFoldedElementsQueue_=[]};F.prototype.startPerfUnfolding_=function(t){this.drainPerfFoldedElementsQueue_();for(var o=this.perfUnfoldingBatchSize_;o<t.length;o++){var i=t[o];this.isFolded_(i)||(this.fold_(i),this.perfFoldedElementsQueue_.push(i))}this.perfUnfoldTimer_=setTimeout(goog.bind(function(){requestAnimationFrame(goog.bind(this.unfoldBatch_,this))},this),this.perfUnfoldingPause)};F.prototype.unfoldBatch_=function(){var t=Math.min(this.perfUnfoldingBatchSize_,this.perfFoldedElementsQueue_.length);if(t!==0){for(var o=0;o<t;o++){var i=this.perfFoldedElementsQueue_.pop();this.expand_(i)}var n=Date.now();this.perfUnfoldTimer_=setTimeout(goog.bind(function(){var r=Date.now()-n;this.adjustPerfUnfoldBatchSize_(r),requestAnimationFrame(goog.bind(this.unfoldBatch_,this))},this),this.perfUnfoldingPause)}};F.prototype.adjustPerfUnfoldBatchSize_=function(t){t>100?this.perfUnfoldingBatchSize_=Math.max(1,this.perfUnfoldingBatchSize_-1):this.perfUnfoldingBatchSize_++};F.prototype.setSelectionManager=function(t){this.selectionManager_=t};F.prototype.enhanceDom=function(t){for(var o=t.length,i=[],n=0;n<o;n++){var r=this.enhanceSubtree_(t[n]);goog.array.extend(i,r)}this.startPerfUnfolding_(i)};F.prototype.registerActions=function(t){this.registerAction_(t,"Author/ToggleFold",new gc(this,this.selectionManager_)),this.registerAction_(t,"Author/FoldOthers",new dc(this,this.selectionManager_)),this.registerAction_(t,"Author/FoldAll",new mc(this,this.selectionManager_)),this.registerAction_(t,"Author/FoldChildren",new pc(this,this.selectionManager_)),this.registerAction_(t,"Author/ExpandChildren",new uc(this,this.selectionManager_)),this.registerAction_(t,"Author/ExpandAll",new hc(this,this.selectionManager_))};F.prototype.registerAction_=function(t,o,i){t.registerAction(o,i),this.actionIds_.push(o)};F.prototype.getActionIds=function(){return this.actionIds_};F.prototype.preventEventsOnFoldingToggle_=function(t){var o=t.target;goog.dom.isElement(o)&&goog.dom.classlist.contains(o,"folding-button")&&(t.stopPropagation(),t.preventDefault())};F.prototype.handleClickInDoc_=function(t){var o=t.target;if(goog.dom.isElement(o)&&goog.dom.classlist.contains(o,"folding-button")){var i=goog.dom.getAncestorByClass(o,this.foldableClass_);this.toggleFolding(i)}};F.prototype.enhanceSubtree_=function(t){this.isFoldable_(t)&&this.enhanceElement_(t);for(var o=t.getElementsByClassName(this.foldableClass_),i=o.length,n=0;n<i;n++)this.enhanceElement_(o[n]);let r=h.getIdOfXmlNode(t);if(r!==null){var s=h.getXmlNodeByIdWithinElement(r,this.docContainer);if(s&&this.isNonFoldedChild_(s)){goog.dom.classlist.add(t,this.nonFoldableChildClass_);var a=s.getAttribute(this.foldedPlaceholderAttr_);a&&t.setAttribute(this.foldedPlaceholderAttr_,a)}}return o};F.prototype.enhanceElement_=function(t){var o=this.isFolded_(t),i=o;let n=h.getIdOfXmlNode(t);this.toggledElements_.contains(n)&&(i=!o,o?goog.dom.classlist.remove(t,this.foldedClass_):goog.dom.classlist.add(t,this.foldedClass_)),i&&this.hideChildren_(t)};F.prototype.hideChildren_=function(t){this.nonEditableFolds_&&t.setAttribute("contentEditable","false");var o=this.getNonFoldableChildren_(t);if(o&&this.nonEditableFolds_&&o.forEach(function(r){r.setAttribute("contentEditable","true")}),o.length||(o=this.getNonFoldablePseudoElements_(t)),o.length){o.forEach(function(r){goog.dom.classlist.add(r,this.nonFoldableChildClass_)},this);var n=o[o.length-1];n.setAttribute(this.foldedPlaceholderAttr_,tr(msgs.FOLDED_))}else{var i=sync.view.NodeRenderer.getRenderedText(t,this.elementNameEnhancer);t.setAttribute(this.foldedPlaceholderAttr_,tr(msgs.FOLDED_ELEMENT_,{$element:i}))}};F.prototype.getNonFoldablePseudoElements_=function(t){return p.getPseudoElements(t).filter(this.isNonFoldableStatic_,this)};F.prototype.getNonFoldableChildren_=function(t){var o=[],i=goog.dom.dataset.get(t,"nfc");if(i)for(var n=","+i+",",r=sync.model.XmlDom.getFirstChild(t);r;){if(sync.model.XmlDom.isXmlElement(r)){var s=sync.model.XmlDom.getTagName(r);if(n.indexOf(","+s+",")!==-1&&(o.push(r),!this.multipleNonFoldedChildren_))break}r=sync.model.XmlDom.getNextSibling(r)}return o};F.prototype.getNonFoldedChild_=function(t){for(var o=sync.model.XmlDom.getFirstChild(t);o&&!this.isNonFoldedChild_(o);)o=sync.model.XmlDom.getNextSibling(o);return o};F.prototype.isNonFoldableStatic_=function(t){var o=new op(t);return o.getItems().every(i=>i.isTextOrLabel()||i.isImage())};F.prototype.unhideChildren_=function(t){t.removeAttribute("contentEditable");for(var o=!1,i=sync.model.XmlDom.getFirstChild(t);i;)sync.model.XmlDom.isXmlElement(i)&&goog.dom.classlist.contains(i,this.nonFoldableChildClass_)&&(goog.dom.classlist.remove(i,this.nonFoldableChildClass_),i.removeAttribute("contentEditable"),o=!0),i=sync.model.XmlDom.getNextSibling(i);var n;if(!o){var r=p.getPseudoElements(t);for(n=0;n<r.length;n++)goog.dom.classlist.remove(r[n],this.nonFoldableChildClass_)}t.removeAttribute(this.foldedPlaceholderAttr_);var s=t.children;for(n=0;n<s.length;n++)s[n].removeAttribute(this.foldedPlaceholderAttr_)};F.prototype.toggleFolding=function(t){if(goog.array.remove(this.perfFoldedElementsQueue_,t),this.drainPerfFoldedElementsQueue_(),t&&this.isFoldable_(t)){var o=goog.dom.classlist.contains(t,this.foldedClass_);let r=h.getIdOfXmlNode(t);var i=this.toggledElements_.contains(r);i?this.toggledElements_.remove(r):this.toggledElements_.add(r);var n=this.selectionManager_.getSelection().focus.toRelativeContentPosition();o?(this.unhideChildren_(t),goog.dom.classlist.remove(t,this.foldedClass_)):(this.hideChildren_(t),goog.dom.classlist.add(t,this.foldedClass_)),o||this.moveCaretOutOfFoldedElement_(n,t)}};F.prototype.moveCaretOutOfFoldedElement_=function(t,o){var i=t.toHTMLPosition().container;if(!!goog.dom.contains(o,i)){for(var n=i;n!==o;){if(goog.dom.classlist.contains(n,this.nonFoldableChildClass_))return;n=n.parentNode}var r,s,a=this.getFirstNonFoldableChild_(o);if(sync.model.XmlDom.isXmlElement(a)){let c=h.getIdOfXmlNode(a);r=new _o(c,f.BEFORE,0),s=r.toHTMLPosition()}else{let c=h.getIdOfXmlNode(o);r=new _o(c,f.AFTER,0);var l=new ce(r.toHTMLPosition());l.next(),l.skipSentinels(),s=l.toHTMLPosition()}this.selectionManager_.setSelection(new sync.select.Selection(s))}};F.prototype.getFirstNonFoldableChild_=function(t){return t.querySelector("."+this.nonFoldableChildClass_)};F.prototype.foldChildren=function(t){this.drainPerfFoldedElementsQueue_();for(var o=this.getFoldableChildren_(t),i=0;i<o.length;i++)this.fold_(o[i])};F.prototype.expandChildren=function(t){this.drainPerfFoldedElementsQueue_();for(var o=this.getFoldableChildren_(t),i=0;i<o.length;i++)this.expand_(o[i])};F.prototype.expandAll=function(){this.drainPerfFoldedElementsQueue_();for(var t=this.docContainer,o=t.querySelectorAll("."+this.foldedClass_),i=o.length,n=0;n<i;n++)this.expand_(o[n])};F.prototype.foldOthers=function(t){this.foldAll(),this.unfoldAncestors_(t)};F.prototype.unfoldAncestors_=function(t){var o=this.getAncestors_(t).filter(this.isFoldable_,this);for(var i of o)this.expand_(i)};F.prototype.foldAll=function(){this.drainPerfFoldedElementsQueue_();var t=this.docContainer,o=t.querySelectorAll("."+this.foldableClass_+":not("+this.foldedClass_+")");for(var i of o)this.fold_(i)};F.prototype.expandFoldsAtSelection=function(t){this.drainPerfFoldedElementsQueue_();for(var o=t.focus.container,i=this.getAncestors_(o).filter(this.isFolded_,this),n=0;n<i.length;n++){var r=i[n],s=this.getNonFoldedChild_(r),a=s&&goog.dom.contains(s,o);a||this.expand_(r)}};F.prototype.fold_=function(t){this.isFoldable_(t)&&!this.isFolded_(t)&&(this.toggleState_(t),this.hideChildren_(t),goog.dom.classlist.add(t,this.foldedClass_))};F.prototype.expand_=function(t){this.isFoldable_(t)&&this.isFolded_(t)&&(this.toggleState_(t),this.unhideChildren_(t),goog.dom.classlist.remove(t,this.foldedClass_))};F.prototype.toggleState_=function(t){let o=h.getIdOfXmlNode(t);var i=this.toggledElements_.contains(o);i?this.toggledElements_.remove(o):this.toggledElements_.add(o)};F.prototype.getFoldableChildren_=function(t){var o=t||this.getRoot_(),i=[],n=new goog.structs.Queue;for(n.enqueue(o);!n.isEmpty();){var r=n.dequeue();if(this.isFoldable_(r)&&r!==o)i.push(r);else for(var s=r.children,a=0;a<s.length;a++)n.enqueue(s[a])}return i};F.prototype.getAncestors_=function(t){for(var o=[];t;)o.push(t),t=t.parentNode;return o};F.prototype.getRoot_=function(){return sync.model.XmlDom.getRootElement(this.docContainer)};F.prototype.isFoldable_=function(t){return goog.dom.classlist.contains(t,this.foldableClass_)};F.prototype.isFolded_=function(t){return goog.dom.classlist.contains(t,this.foldedClass_)};F.prototype.isNonFoldedChild_=function(t){return goog.dom.classlist.contains(t,this.nonFoldableChildClass_)};F.prototype.resetFoldedStates_=function(){this.toggledElements_.clear()};F.prototype.disposeInternal=function(){clearTimeout(this.perfUnfoldTimer_),F.superClass_.disposeInternal.call(this)};F.prototype.getCurrentNode_=function(){var t=this.selectionManager_.getSelection(),o=t.getNodeAtSelection();return this.xmlModel_.getXmlNodeById(o.id)};F.prototype.getCaretFoldableAncestor=function(){return goog.dom.getAncestorByClass(this.getCurrentNode_(),"oxy-foldable")};var sf=F;sync.ctrl.FoldingManager=F;namespace("sync.actions");var fc=function(t){Pn.call(this),this.scheduler_=t};goog.inherits(fc,Pn);fc.prototype.executeAction=function(t){this.scheduler_.schedule(t)};fc.prototype.executeUpdate=function(t){this.scheduler_.scheduleUpdate(t)};var ip=fc;sync.actions.ScheduledActionsExecutor=fc;goog.require("goog.ui.Control");namespace("sync.view");var Wg=function(t){goog.ui.Control.call(this,t),this.addClassName("sync-view-label"),this.setSupportedState(goog.ui.Component.State.DISABLED,!1),this.setSupportedState(goog.ui.Component.State.HOVER,!1),this.setSupportedState(goog.ui.Component.State.ACTIVE,!1),this.setSupportedState(goog.ui.Component.State.FOCUSED,!1),this.setStateInternal(goog.ui.Component.State.DISABLED)};goog.inherits(Wg,goog.ui.Control);var Kg=Wg;sync.view.Label=Wg;goog.require("goog.ui.Control");namespace("sync.view");var Gg=function(t,o,i,n,r){goog.ui.Control.call(this,null,sync.view.ToolbarEditableComboRenderer.getInstance()),this.addClassName("sync-view-toolbar-edit-combo"),this.addClassName("vertical-align-children"),this.delegate=new ma([{value:i}],r),this.delegate.setOnlyOptions(!o),this.registerDisposable(this.delegate),this.eventHandler=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler),this.eventHandler.listen(this.delegate,[goog.ui.Component.EventType.OPEN,goog.ui.Component.EventType.CLOSE],function(s){s.target=this}),this.delegate.setParentEventTarget(this),this.name=t,this.initialValue=i,this.retrieveValues=n,this.setSupportedState(goog.ui.Component.State.HOVER,!0),this.setSupportedState(goog.ui.Component.State.OPENED,!0)};goog.inherits(Gg,goog.ui.Control);sync.view.ToolbarEditableComboRenderer=function(){goog.ui.ControlRenderer.call(this)};goog.inherits(sync.view.ToolbarEditableComboRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(sync.view.ToolbarEditableComboRenderer);sync.view.ToolbarEditableComboRenderer.prototype.createDom=function(t){var o=sync.view.ToolbarEditableComboRenderer.superClass_.createDom.call(this,t);o.setAttribute("name",t.name);var i=t.delegate;return i.render(o),i.setValue(t.initialValue),i.startListeners(),t.retrieveValues.then(function(n){if(!i.isDisposed()){var r=goog.array.map(n,s=>({value:s}));i.setItems(r)}}),o};var af=Gg;sync.view.ToolbarEditableCombo=Gg;goog.require("goog.ui.ToolbarSeparator");goog.require("goog.string");namespace("sync.model.formcontrols");var Li=function(t,o,i,n){this.actionsManager_=t,this.actionsExecutor_=o,this.xmlController_=i,this.scrollEventTarget_=n};Li.prototype.lexicalUnitToUiControl=function(t,o){var i=null,n=!0;if(typeof t=="object"){var r=t;switch(r.value){case"oxy_button":i=this.oxyButtonToUiControl(r);break;case"oxy_buttonGroup":i=this.oxyButtonGroupToUiControl(r);break;case"oxy_label":var s=r.args.text;i=new Kg(s),n=!1;break;case"oxy_combobox":i=this.oxyComboBoxToUiControl(r,o);break;default:}}else typeof t=="string"&&(t==="|"?i=new goog.ui.ToolbarSeparator:i=new Kg(t),n=!1);return i?{control:i,hasBehavior:n}:null};Li.prototype.oxyButtonToUiControl=function(t){var o=null,i=t.args.actionID;if(!i){var n=t.args.action;if(n&&n.value==="oxy_action")if(n.args.ID)i=n.args.ID;else{var r=t.args.showIcon==="true";let a=this.buildAction_(n.args,r,!0);o=new vs(this.actionsExecutor_,a,"unknown-id",null)}}if(i){var s=this.actionsManager_.getActionById(i);this.actionIsAvailable_(s)&&(o=new vs(this.actionsExecutor_,s,i,null))}return o};Li.prototype.actionIsAvailable_=function(t){var o=!0;return(!t||!t.isEnabled())&&(o=!1),t&&goog.isFunction(t.isCompatible)&&!t.isCompatible()&&(o=!1),o};Li.prototype.buildAction_=function(t,o,i){var n=i?t.name:"",r=t.description,s=o?t.icon:"",a=t.operation,l={};return Object.keys(t).forEach(function(c){if(goog.string.startsWith(c,"arg-")){var d=c.substring("arg-".length);l[d]=t[c]}}),new De({actionPerformed:goog.bind(function(){this.actionsManager_.invokeOperation(a,l)},this),displayName:n,description:r,largeIconPath:s})};Li.prototype.oxyToolbarMenuButton_=function(t){var o=null,i=this.actionsManager_.getActionById(t);return this.actionIsAvailable_(i)&&(o=new mt(i,t,null,null,this.actionsExecutor_)),o};Li.prototype.buildActionById_=function(t,o,i){return action&&(action=new De({actionPerformed:action.actionPerformed.bind(action),displayName:o?action.getDisplayName():"",description:action.getDescription(),largeIconPath:i?action.getLargeIcon():null,smallIconPath:i?action.getSmallIcon():null,isEnabled:action.isEnabled.bind(action)})),action};Li.prototype.oxyButtonGroupToUiControl=function(t){var{label:o,icon:i,tooltip:n,actionIDs:r,actions:s,actionStyle:a}=t.args;n=n||o,a=a||"text";var l;i?l=sync.util.renderSmallIcon(i):l=o;var c=a==="both"||a==="icon",d=a==="both"||a==="text",g=new fd(l);if(g.setTooltip(n),c&&!d&&g.setMenuClass("no-shortcut-placeholder"),r){var m=this.splitActionsIdsList(r);for(var v of m){var C=this.actionsManager_.getActionById(v);if(C&&this.actionIsAvailable_(C)){var N=new mt(C,v,null,null,this.actionsExecutor_),i=c?C.renderSmallIcon():null,D=d?C.getDisplayName():null;N.setContentInternal(mt.buildButtonContent(i,D)),g.addItem(N)}}}else if(s)for(var H of t.args.actions.posArgs){let ne=this.buildAction_(H.args,c,d);g.addItem(new mt(ne,"unknown-id",null,null,this.actionsExecutor_))}return g.getItemCount()===0&&(g=null),g};Li.prototype.splitActionsIdsList=function(t){return t.split(",").map(o=>o.trim())};Li.prototype.oxyComboBoxToUiControl=function(t,o){var i=t.args.edit,n=t.args.editable==="true";if(!goog.string.startsWith(i,"@"))return null;var r=i.substring(1),s=o.getAttribute(r),a=sync.rest.callAsync("RESTAttributesManager.getAllAttributeValues",{docId:this.xmlController_.docId,nodeId:o.id,attrName:r}).then(function(d){return d.values}),l="oxy_combobox"+i,c=new af(l,n,s,a,this.scrollEventTarget_);return c.listen(goog.ui.Component.EventType.ACTION,goog.bind(function(d){d instanceof goog.ui.ItemEvent&&r&&(d.preventDefault(),this.xmlController_.setAttribute(o.id,r,d.item.getValue()))},this)),c};var lf=Li;sync.model.formcontrols.OxyFormControls=Li;goog.require("goog.ui.Bubble");namespace("sync.view");var np=function(t,o,i){goog.ui.Bubble.call(this,t,o,i),this.fixClickInMenu_()};goog.inherits(np,goog.ui.Bubble);np.prototype.fixClickInMenu_=function(){this.popup_.listen(goog.ui.PopupBase.EventType.BEFORE_HIDE,function(t){this.isInside_(this,t.target)&&t.preventDefault()}.bind(this),!0)};np.prototype.isInside_=function(t,o){var i=!1;if(goog.dom.contains(t.getElement(),o))i=!0;else for(var n=t.getChildCount(),r=0;r<n;r++){var s=t.getChildAt(r);if(s instanceof goog.ui.MenuButton&&this.isInside_(s.getMenu(),o)||this.isInside_(s,o)){i=!0;break}}return i};var cf=np;goog.require("goog.events.EventHandler");goog.require("goog.Disposable");goog.require("goog.positioning");namespace("sync.view");var fn=function(t){goog.events.EventTarget.call(this),this.outOfBoundsCoordinate_=-100,this.oxyFormControls_=t,this.toolbarContainer_=goog.dom.createDom("div");var o={};goog.object.extend(o,goog.ui.Bubble.defaultConfig),o.bubbleWidth="",this.bubble_=new cf(this.toolbarContainer_,o),this.bubble_.setPinnedCorner(goog.positioning.Corner.BOTTOM_LEFT),this.bubble_.render(),this.bubble_.getElement().id="floating-toolbar-bubble",this.bubble_.setPosition(new goog.positioning.AbsolutePosition(this.outOfBoundsCoordinate_,this.outOfBoundsCoordinate_)),this.registerDisposable(this.bubble_),this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_),this.toolbarUI_=null};goog.inherits(fn,goog.events.EventTarget);fn.EventType={HIDE:"hide"};fn.prototype.updateAndShow=function(t,o,i){var n=!1;return this.renderToolbar_(t,o)&&(this.showBubble_(i),this.toolbarUI_.listenOnce(goog.ui.Component.EventType.ACTION,this.hide.bind(this)),n=!0),n};fn.prototype.showBubble_=function(t){this.bubble_.setVisible(!0);var o=t.x+goog.style.getBounds(this.bubble_.getElement()).width,i=50,n=window.innerWidth-i;o>n&&(t.x-=o-n),t.y-=10,this.bubble_.setPosition(new goog.positioning.AbsolutePosition(t))};fn.prototype.renderToolbar_=function(t,o){var i=!1;this.toolbarUI_=new Hl,this.bubble_.addChild(this.toolbarUI_);for(var n of t){var r=this.oxyFormControls_.lexicalUnitToUiControl(n,o);r&&(r.hasBehavior&&(i=!0),this.toolbarUI_.addChild(r.control,!0))}if(!i)return!1;var s=this.toolbarUI_.getChildCount()-1;return this.toolbarUI_.getChildAt(s)instanceof goog.ui.ToolbarSeparator&&this.toolbarUI_.removeChildAt(s,!0),this.toolbarUI_.render(this.toolbarContainer_),!0};fn.prototype.hide=function(){this.isVisible()&&(this.bubble_.setVisible(!1),this.bubble_.setPosition(new goog.positioning.AbsolutePosition(this.outOfBoundsCoordinate_,this.outOfBoundsCoordinate_))),this.eventHandler_.removeAll(),this.toolbarUI_&&this.toolbarUI_.dispose(),this.toolbarUI_=null,this.dispatchEvent(new goog.events.Event(fn.EventType.HIDE))};fn.prototype.isVisible=function(){return this.bubble_.isVisible()};var qg=fn;sync.view.FloatingToolbar=fn;goog.require("goog.math.Coordinate");namespace("sync.ctrl");var Mt=function({xmlController:t,documentContainer:o,actionsManager:i,scheduler:n,selectionManager:r,layoutChangeTracker:s,scrollEventTarget:a}){goog.events.EventHandler.call(this),this.docId_=t.docId,this.xmlController_=t,this.documentContainer_=o,this.scheduler_=n,this.selectionManager_=r,this.layoutChangeTracker_=s,this.scrollEventTarget_=a;var l=new ip(n);this.floatingToolbar_=new qg(new lf(i,l,t,a)),this.registerDisposable(this.floatingToolbar_),this.toolbarHideEventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.toolbarHideEventHandler_),this.floatingToolbar_.listen(qg.EventType.HIDE,goog.bind(function(){this.toolbarHideEventHandler_.removeAll()},this)),this.floatingToolbarCssAsJson_=null,this.loadRules_()};goog.inherits(Mt,goog.events.EventHandler);Mt.prototype.loadRules_=function(){sync.rest.callAsync("RESTAssetLoader.loadFloatingToolbarJson",{documentID:this.docId_}).then(goog.bind(function(t){this.isDisposed()||(this.floatingToolbarCssAsJson_=t,Lh(this.floatingToolbarCssAsJson_,o=>o.important),t&&t.length>0&&this.listen(this.documentContainer_,goog.events.EventType.MOUSEUP,function(o){o.currentTarget!==o.target&&o.button===0&&(this.showFloatingToolbarTimeout_=setTimeout(goog.bind(function(){this.showFloatingToolbar_(o.clientX,o.clientY)},this),0))}))},this)).thenCatch(sync.util.error.logError)};Mt.PSEUDO_CLASSES={OXY_SELECTED:"-oxy-selected",OXY_SELECTION_INSIDE:"-oxy-selection-inside"};Mt.prototype.showFloatingToolbar_=function(t,o){if(this.floatingToolbar_.hide(),!!this.selectionManager_.isDocFocused()){var i=this.selectionManager_.getSelection(),n=this.getNodesAffectedBySelection_(i),{rule:r,context:s}=this.getRuleWithContext_(n);r&&s&&this.floatingToolbar_.updateAndShow(r.description,s,new goog.math.Coordinate(t,o))&&this.listenForEventsThatShouldHideToolbar_()}};Mt.prototype.listenForEventsThatShouldHideToolbar_=function(){this.toolbarHideEventHandler_.listenOnce(this.scrollEventTarget_,goog.events.EventType.SCROLL,this.hideToolbar_,!0),this.toolbarHideEventHandler_.listenOnce(window,goog.events.EventType.RESIZE,this.hideToolbar_,!0),this.toolbarHideEventHandler_.listenOnce(this.scheduler_,Qe.EventType.ACTION_SCHEDULED,this.hideToolbar_),this.toolbarHideEventHandler_.listen(this.xmlController_,M.EventType.MODEL_CHANGED,this.hideToolbarAfterModelChanged_)};Mt.prototype.hideToolbarAfterModelChanged_=function(t){var o=t.isBackgroundSync||!t.docUpdate.hasChanges();o||(this.toolbarHideEventHandler_.unlisten(this.xmlController_,M.EventType.MODEL_CHANGED,this.hideToolbarAfterModelChanged_),this.hideToolbar_())};Mt.prototype.hideToolbar_=function(){this.floatingToolbar_.hide()};Mt.prototype.getNodesAffectedBySelection_=function(t){var o=[],i=t.getFullySelectedNode();if(i){o.push({node:i,pseudoClass:Mt.PSEUDO_CLASSES.OXY_SELECTED});var n=i.parentNode;n&&o.push({node:n,pseudoClass:Mt.PSEUDO_CLASSES.OXY_SELECTION_INSIDE})}else if(!t.isEmpty()){var r=this.getSelectionNodes_(t);r.start.id===r.end.id?o.push({node:r.start,pseudoClass:Mt.PSEUDO_CLASSES.OXY_SELECTION_INSIDE}):o.push({node:sync.api.dom.findCommonAncestor(r.start,r.end),pseudoClass:Mt.PSEUDO_CLASSES.OXY_SELECTION_INSIDE})}return o};Mt.prototype.getSelectionNodes_=function(t){var o=p.fromHTMLPosition(t.start).getContentInformation(),i=p.fromHTMLPosition(t.end);i.prev();var n=i.getContentInformation(),r=o.isOnText()?o.getParentNode():o.getNodeOfTag(),s=n.isOnText()?n.getParentNode():n.getNodeOfTag();return{start:r,end:s}};Mt.prototype.getRuleWithContext_=function(t){var o,i;this.layoutChangeTracker_.beginMutationWithoutLayoutEffects();try{for(var n=0;n<t.length;++n){var r=t[n],s=r.node.getHtmlNode();sync.model.XmlDom.setPseudoClassClientSide(s,r.pseudoClass);try{o=goog.array.findRight(this.floatingToolbarCssAsJson_,goog.bind(this.nodeMatchesRule_,this,s)),i=r.node}finally{sync.model.XmlDom.removePseudoClassClientSide(s,r.pseudoClass)}if(o)break}}finally{this.layoutChangeTracker_.endMutationWithoutLayoutEffects()}return{rule:o,context:i}};Mt.prototype.nodeMatchesRule_=function(t,o){if(o.media){var i=window.matchMedia(o.media);if(!i||!i.matches)return!1}return t.matches(o.selector)};Mt.prototype.disposeInternal=function(){Mt.superClass_.disposeInternal.call(this),clearTimeout(this.showFloatingToolbarTimeout_),delete this.docId_,delete this.xmlController_,delete this.documentContainer_,delete this.scheduler_,delete this.selectionManager_,delete this.layoutChangeTracker_,delete this.floatingToolbarCssAsJson_};var df=Mt;sync.ctrl.FloatingToolbarManager=Mt;namespace("sync.view");var ao=function(t,o,i){this.linkPartAncestor_=t,this.linkPartType_=this.getLinkPartType_(i,t),this.linkActivationTrigger_=this.getLinkActivationTrigger_(o),this.url_=this.getUrlFromLinkAncestor_(t)};ao.TYPE={ICON:"icon",LABEL:"label",TEXT:"text",TAG:"tag"};ao.prototype.getLinkActivationTrigger_=function(t){var o=goog.dom.dataset.get(t,"linkActivationTrigger");return o||(o=rp.LINK_ACTIVATION.AUTO),o};ao.prototype.getLinkPartType_=function(t,o){var i;return o.classList.contains("oxy-link-icon")?i=ao.TYPE.ICON:goog.dom.dataset.get(o,"ignore")==="static"?i=ao.TYPE.LABEL:t.classList.contains("tag-core")?i=ao.TYPE.TAG:i=ao.TYPE.TEXT,i};ao.prototype.getKeyref=function(){var t=sync.model.XmlDom.getContainingXmlNode(this.linkPartAncestor_),o=null;if(t){var i=goog.dom.dataset.has(t,"attrKeyref");i&&(o=sync.model.XmlDom.getAttributes(t).keyref.attributeValue)}return o};ao.prototype.getUrlFromLinkAncestor_=function(t){var o=goog.dom.dataset.get(t,"url");if(!o&&!sync.model.XmlDom.isXmlElement(t)&&(o=goog.dom.dataset.get(sync.model.XmlDom.getContainingElement(t),"url"),!o)){var i=goog.dom.dataset.get(t,"role");i&&i.indexOf("BEFORE_REF")===0&&(o=this.getLinkFromSiblings_(t))}return o};ao.prototype.getLinkFromSiblings_=function(t){for(var o=null,i;(i=goog.dom.getNextElementSibling(t))&&(o=goog.dom.dataset.get(i,"url"),!o);)t=i;return o};ao.prototype.getUrl=function(){return this.url_};ao.prototype.getElement=function(){return this.linkPartAncestor_};ao.prototype.getType=function(){return this.linkPartType_};ao.prototype.getActivationType=function(){return this.linkActivationTrigger_};var Ls=ao;sync.view.LinkPart=ao;namespace("sync.support");var pf={LINK_OPENED:"link_openend_es"},oE=function(t,o){this.type=pf.LINK_OPENED,this.url=t,this.external=o},gf={EventTypes:pf,LinkOpenedEvent:oE},sp=gf;sync.support.EditingSupport=gf;goog.require("goog.events.EventHandler");namespace("sync.view");var Ve=function(t){goog.Disposable.call(this),this.eventHandler_=new goog.events.EventHandler(this),this.eventHandler_.listen(t,goog.events.EventType.KEYDOWN,goog.bind(this.controlKeydown_,this)).listen(t,goog.events.EventType.KEYUP,goog.bind(this.controlKeyup_,this)).listen(t,[goog.events.EventType.MOUSEOVER,goog.events.EventType.MOUSEOUT],goog.bind(this.hoverOnLink_,this)),this.docContainer_=t,this.ctrlHoverStyleClass_="ctrl-hover-link",this.linkOpenedDispatcher_=null,this.currentlyHoveredLinkElement_=null};goog.inherits(Ve,goog.Disposable);Ve.LINK_ACTIVATION={CLICK:"click",MODIFIER_CLICK:"modifier-click",AUTO:"auto"};Ve.prototype.controlKeydown_=function(t){t.keyCode===goog.events.KeyCodes.CTRL&&(this.mouseMoveListener_=goog.events.listenOnce(this.docContainer_,goog.events.EventType.MOUSEMOVE,this.hoverOnLink_,!1,this))};Ve.prototype.controlKeyup_=function(t){t.keyCode===goog.events.KeyCodes.CTRL&&(this.currentlyHoveredLinkElement_&&this.currentlyHoveredLinkElement_.classList.remove(this.ctrlHoverStyleClass_),this.mouseMoveListener_&&goog.events.unlistenByKey(this.mouseMoveListener_))};Ve.prototype.getLinkAncestor_=function(t){return goog.dom.getAncestor(t,function(o){return goog.dom.isElement(o)&&goog.dom.dataset.get(o,"url")},!0)};Ve.prototype.isCtrlPressed_=function(t){return goog.userAgent.MAC?t.metaKey:t.ctrlKey};Ve.prototype.hoverOnLink_=function(t){this.isCtrlPressed_(t)&&t.type!==goog.events.EventType.MOUSEOUT?(this.currentlyHoveredLinkElement_=this.getLinkAncestor_(t.target),this.currentlyHoveredLinkElement_&&goog.dom.classlist.add(this.currentlyHoveredLinkElement_,this.ctrlHoverStyleClass_)):(this.currentlyHoveredLinkElement_=null,sync.util.dom.removeClass(this.docContainer_,this.ctrlHoverStyleClass_))};Ve.prototype.shouldLinkActivateOnCtrlClick_=function(t,o){var i=!1,n=o.getType();if(n===Ls.TYPE.ICON)i=!0;else{var r=o.getActivationType();if(r===Ve.LINK_ACTIVATION.MODIFIER_CLICK)i=!0;else if(r!==Ve.LINK_ACTIVATION.CLICK){var s=n===Ls.TYPE.LABEL&&r===Ve.LINK_ACTIVATION.AUTO;i=!s}}return i};Ve.prototype.shouldLinkActivateOnClick=function(t,o){var i=!1,n=o.getType();if(n===Ls.TYPE.ICON)i=!0;else if(n!==Ls.TYPE.TAG){var r=o.getActivationType();if(r===Ve.LINK_ACTIVATION.CLICK)i=!0;else if(r!==Ve.LINK_ACTIVATION.MODIFIER_CLICK){var s=n===Ls.TYPE.TEXT&&r===Ve.LINK_ACTIVATION.AUTO;i=!s}}return i};Ve.prototype.getLinkPartAncestor=function(t){var o=goog.dom.getAncestor(t,function(r){var s=!1;return goog.dom.isElement(r)&&(s=goog.dom.dataset.get(r,"linkActivationTrigger")||goog.dom.classlist.contains(r,"oxy-link")),s},!0),i=null;o&&(i=goog.dom.getAncestorByClass(o,"oxy-link"));var n=null;return i&&(n=new Ls(i,o,t)),n};Ve.prototype.handleClickOnLinks_=function(t){if(!sync.formctrls.dom.isInsideFormControl(t.target)){var o=this.getLinkPartAncestor(t.target);if(!!o){var i=!1;this.isCtrlPressed_(t)?i=this.shouldLinkActivateOnCtrlClick_(t,o):i=this.shouldLinkActivateOnClick(t,o),i&&this.dispatchLinkOpenedEvent_(o)}}};Ve.prototype.isExternal_=function(t){var o=goog.dom.dataset.has(t,"external");return!o&&!sync.model.XmlDom.isXmlElement(t)&&(o=goog.dom.dataset.has(sync.model.XmlDom.getContainingElement(t),"external")),o};Ve.prototype.dispatchLinkOpenedEvent_=function(t){var o=t.getUrl();if(o){var i=this.isExternal_(t.getElement());this.linkOpenedDispatcher_&&this.linkOpenedDispatcher_.dispatchEvent(new sp.LinkOpenedEvent(o,i))}};Ve.prototype.startListeningForClicks=function(t,o){this.linkOpenedDispatcher_=o,this.eventHandler_.listen(t,goog.events.EventType.CLICK,this.handleClickOnLinks_,!0)};Ve.prototype.disposeInternal=function(){goog.events.unlistenByKey(this.mouseMoveListener_),this.eventHandler_.dispose(),Ve.superClass_.disposeInternal.call(this)};var rp=Ve;sync.view.LinkHandler=Ve;namespace("sync.ctrl");window.scrollCausedByImgLoad=0;var yc=function(t){this.layoutChangeTracker_=t};goog.inherits(yc,pe);yc.prototype.enhanceDom=function(t){for(var o of t){var i=o.getElementsByTagName("img");for(var n of i)this.enhanceImage_(n)}};yc.prototype.enhanceImage_=function(t){if(!t.getAttribute("src")){var o=t.getAttribute("data-src");!o||(o=sync.util.image.addHidpiToSrc(o,t),t.setAttribute("src",o),t.addEventListener("load",()=>this.layoutChangeTracker_.dispatchLayoutChanged()),sync.util.image.moveAltToDataset(t))}};var hf=yc;sync.ctrl.ImageLoaderUpdateFilter=yc;namespace("sync.api.dom");var uf=function(){},mf=uf;sync.api.dom.DetachedNode=uf;goog.require("goog.events.EventHandler");namespace("sync.model.mutation");var Fs=function(t,o,i){goog.events.EventHandler.call(this),this.editingSupport_=t,this.problemReporter_=i,this.listen(o,[M.EventType.BEFORE_MODEL_CHANGED,M.EventType.LIE_BEFORE_MODEL_CHANGED],this.dispatchAuthorBeforeModelChanged_),this.listen(o,M.EventType.MODEL_CHANGED,this.dispatchAuthorModelChanged_)};goog.inherits(Fs,goog.events.EventHandler);Fs.prototype.dispatchAuthorBeforeModelChanged_=function(t){try{var o=sync.api.AuthorEditingSupport.EventType.BEFORE_MODEL_CHANGED;if(this.shouldDispatch_(t,o)&&t.docUpdate.containsModelChanges()){var i=this.editingSupport_.getDocument(),n=t.docUpdate.mutation,r=goog.array.map(n.updated,i.jsonNodeToApiNode,i),s=goog.array.map(n.deleted,i.jsonNodeToApiNode,i),a=goog.array.map(n.inserted,this.createDetachedNode_),l=new sync.api.AuthorEditingSupport.ModelChangedMutation(r,s,a);this.editingSupport_.dispatchEvent(new sync.api.AuthorEditingSupport.AuthorModelChangedEvent(o,l))}}catch(c){this.problemReporter_.showError(c,!1)}};Fs.prototype.dispatchAuthorModelChanged_=function(t){try{var o=sync.api.AuthorEditingSupport.EventType.MODEL_CHANGED;if(this.shouldDispatch_(t,o)&&t.docUpdate.containsModelChanges()){var i=t.docUpdate.mutation,n=this.editingSupport_.getDocument(),r=goog.array.map(i.updated,n.jsonNodeToApiNode,n),s=goog.array.map(i.deleted,this.createDetachedNode_),a=goog.array.map(i.inserted,n.jsonNodeToApiNode,n),l=new sync.api.AuthorEditingSupport.ModelChangedMutation(r,s,a);this.editingSupport_.dispatchEvent(new sync.api.AuthorEditingSupport.AuthorModelChangedEvent(o,l))}}catch(c){this.problemReporter_.showError(c,!1)}};Fs.prototype.shouldDispatch_=function(t,o){return t.docUpdate.mutation&&!t.isClientSide&&(this.editingSupport_.hasListener(o,!1)||this.editingSupport_.hasListener(o,!0))};Fs.prototype.createDetachedNode_=function(){return new mf};var ff=Fs;sync.model.mutation.AuthorModelChangedEventDispatcher=Fs;goog.require("goog.structs.Map");namespace("sync.ext");sync.ext.Registry=function(){};sync.ext.Registry.extension=null;sync.ext.Registry.registerExtension=function(t){sync.ext.Registry.extension=t};sync.ext.Registry.extensionURL=null;sync.ext.Registry.getExtensionURL=function(){return sync.ext.Registry.extensionURL};namespace("sync.ops");var _c=function(t,o,i){this.name_=t,this.controller_=o,this.selectionManager_=i};_c.prototype.doOperation_=function(t,o,i){var n={operationClassName:this.name_,operationParams:t,selection:{}},r=o||this.selectionManager_.getSelection();r&&r.extend(n.selection);var s=sync.util.promise.nativePromise(sync.rest.callAsync("RESTActionsManager.invokeOperation",{docId:this.controller_.docId,$entity:n})).then(goog.bind(this.operationSuccess_,this,!!i));return s.catch(sync.util.error.logError),s};_c.prototype.invoke=function(t){var o=t.options&&t.options.background;return this.doOperation_(t.params,t.selection,o)};_c.prototype.operationSuccess_=function(t,o){var i=new Ne(o);t&&(i.selection=null,i.clearPeerSelections());var n=i.messages||[],r=goog.array.find(n,function(a){return a.type===-2}),s=r?r.message:null;return this.controller_.applyUpdate_(i),s};var Fi=_c;sync.ops.ServerOperation=_c;namespace("sync.actions");var No=function(t){sync.actions.AbstractAction.call(this,null),this.delegate=t};goog.inherits(No,sync.actions.AbstractAction);No.prototype.getShortcut=function(){return this.delegate.getShortcut()};No.prototype.actionPerformed=function(t){return this.delegate.actionPerformed(t)};No.prototype.actionPerformedWithValues=function(t,o){return this.delegate.actionPerformedWithValues(t,o)};No.prototype.getDisplayName=function(){return this.delegate.getDisplayName()};No.prototype.getDescription=function(){return this.delegate.getDescription()};No.prototype.getLargeIcon=function(t){return this.delegate.getLargeIcon(t)};No.prototype.getSmallIcon=function(t){return this.delegate.getSmallIcon(t)};No.prototype.renderLargeIcon=function(){return this.delegate.renderLargeIcon()};No.prototype.renderSmallIcon=function(){return this.delegate.renderSmallIcon()};No.prototype.isEnabled=function(){return this.delegate.isEnabled()};No.prototype.dispose=function(){this.delegate.dispose()};var ee=No;sync.actions.WrapperAction=No;goog.require("goog.events");namespace("sync.ui");var Ur=function(t,o){this.element=t,this.resizeCallback=o||function(){},this.resizable_=!1,this.resizing_=!1,this.startMousePos_={x:0,y:0},this.startSize_={width:0,height:0},this.doResize=goog.bind(this.resize_,this),this.stopResize=goog.bind(this.stopResizer_,this),this.startHandlerKey=null,this.stopHandlerKey=null,this.moveHandlerKey=null,this.savedWidth_=null,this.savedHeight_=null,this.reqAnimF_=!1};Ur.prototype.setResizable=function(t){if(this.resizable_!==t){this.resizable_=t;var o;this.resizable_?(this.element.appendChild(goog.dom.createDom("div",{class:"resize-dragger"})),o=this.element.querySelector(".resize-dragger"),this.startHandlerKey||(this.startHandlerKey=goog.events.listen(o,[goog.events.EventType.MOUSEDOWN,goog.events.EventType.TOUCHSTART],goog.bind(this.startResizing_,this)))):(o=this.element.querySelector(".resize-dragger"),o&&this.element.removeChild(o),goog.events.unlistenByKey(this.startHandlerKey),this.startHandlerKey=null,goog.events.unlistenByKey(this.stopHandlerKey),this.stopHandlerKey=null,goog.events.unlistenByKey(this.moveHandlerKey),this.moveHandlerKey=null)}};Ur.prototype.setSize=function(t,o,i){if(!(!this.element.parentNode||!this.element.parentNode.parentNode)){var n=getComputedStyle(this.element.parentNode.parentNode),r=parseFloat(n.getPropertyValue("width")),s=parseFloat(n.getPropertyValue("height")),a=r*.98,l=s*.98;i||(this.savedWidth_=t||this.savedWidth_,this.savedHeight_=o||this.savedHeight_),i&&this.savedWidth_&&t<a&&(t=this.savedWidth_),i&&this.savedHeight_&&o<l&&(o=this.savedHeight_),t>a&&(t=a),o>l&&(o=l),t&&(this.element.style.width=t+"px"),o&&(this.element.style.height=o+"px"),this.resizeCallback({width:t,height:o})}};Ur.prototype.resizeToFit=function(){var t=this;if(!t.reqAnimF_){var o=getComputedStyle(t.element),i=parseFloat(o.getPropertyValue("width")),n=parseFloat(o.getPropertyValue("height"));if(!!t.element.parentNode){var r=getComputedStyle(t.element.parentNode),s=parseFloat(r.getPropertyValue("width")),a=parseFloat(r.getPropertyValue("height")),l=!1;a>n&&(t.savedHeight_||(t.element.style.height="auto",l=!0)),s>i&&(t.savedWidth_||(t.element.style.width="auto",l=!0)),l?(t.reqAnimF_=!0,requestAnimationFrame(function(){t.reqAnimF_=!1;var c=getComputedStyle(t.element),d=parseFloat(c.getPropertyValue("width")),g=parseFloat(c.getPropertyValue("height"));t.setSize(d,g,!0)})):t.setSize(i,n,!0)}}};Ur.prototype.startResizing_=function(t){requestAnimationFrame(goog.bind(function(){this.startMousePos_.x=t.clientX,this.startMousePos_.y=t.clientY;var o=getComputedStyle(this.element),i=parseFloat(o.getPropertyValue("width")),n=parseFloat(o.getPropertyValue("height"));this.startSize_.width=i,this.startSize_.height=n,this.resizing_=!0,this.moveHandlerKey||(this.moveHandlerKey=goog.events.listen(window,[goog.events.EventType.MOUSEMOVE,goog.events.EventType.TOUCHMOVE],this.doResize)),this.stopHandlerKey||(this.stopHandlerKey=goog.events.listen(window,[goog.events.EventType.MOUSEUP,goog.events.EventType.TOUCHEND],this.stopResize))},this))};Ur.prototype.stopResizer_=function(t){goog.events.unlistenByKey(this.stopHandlerKey),this.stopHandlerKey=null,goog.events.unlistenByKey(this.moveHandlerKey),this.moveHandlerKey=null,this.resizing_=!1};Ur.prototype.resize_=function(t){if(this.resizing_){t.preventDefault();var o=this;requestAnimationFrame(function(){var i=window.innerWidth-15,n=window.innerHeight-15,r;t.clientX>i?r=i:r=t.clientX;var s=r-o.startMousePos_.x,a;t.clientY>n?a=n:a=t.clientY;var l=a-o.startMousePos_.y,c=150,d=o.startSize_.width+s;d=d>c?d:c;var g=o.startSize_.height+l;g=g>c?g:c,o.setSize(d,g)})}};var yf=Ur;sync.ui.Resizer=Ur;goog.require("goog.events");namespace("sync.view");var ap=function(){this.createBrowserShortcuts_()};ap.prototype.createBrowserShortcuts_=function(){var t=goog.events.KeyCodes,o=[t.NUM_PLUS,t.NUM_MINUS,t.EQUALS,t.FF_EQUALS,t.NUM_MINUS,t.DASH,t.F5,t.F11,t.TAB,t.ZERO,t.NUM_ZERO,t.F6];goog.array.extend(o,[t.C,t.X,t.V,t.P,t.W,t.T,t.N,t.R,t.L,t.K,t.E]),this.ctrlShortcuts_=o,this.altShortcuts_=[t.D],this.shiftShortcuts_=[t.F10],this.metaShortcuts_=o.slice(0),this.metaShortcuts_.push(t.COMMA),this.metaShortcuts_.push(t.R),this.singleKeyShortcuts_=[t.F5,t.F6,t.F11,t.F12,t.ESC],this.ctrlShiftKeyCodes_=[t.TAB,t.T,t.V,t.C],this.ctrlShiftKeys_=["T","V"]};ap.prototype.shouldDelegateToBrowser=function(t){var o=!1,i=t.key,n=t.keyCode,r=t.ctrlKey,s=t.metaKey,a=t.shiftKey,l=t.altKey;return((r||s)&&a&&!l&&(this.ctrlShiftKeys_.indexOf(i)!==-1||this.ctrlShiftKeyCodes_.indexOf(n)!==-1)||r&&!(l||a)&&this.ctrlShortcuts_.indexOf(n)!==-1||s&&!(l||a)&&this.metaShortcuts_.indexOf(n)!==-1||!s&&!r&&!a&&l&&this.altShortcuts_.indexOf(n)!==-1||!s&&!r&&a&&!l&&this.shiftShortcuts_.indexOf(n)!==-1||this.singleKeyShortcuts_.indexOf(n)!==-1&&!(l||r||s||a))&&(o=!0),o};var lp=ap;sync.view.SafeShortcuts=ap;var iE=2,cp=class{constructor(){this.dialogIdToZIndex=new Map}getZIndexForNewDialog(o){var i=this.getMaxZIndex_()+1;return this.dialogIdToZIndex.set(o,i),i}getMaxZIndex_(){return this.dialogIdToZIndex.size===0?iE:Math.max(...this.dialogIdToZIndex.values())}dialogHidden(o){this.dialogIdToZIndex.delete(o)}};goog.require("goog.ui.Dialog");goog.require("goog.ui.PopupBase");goog.require("goog.functions");namespace("sync.view");var _f=new cp,nE=0,te=sync.view.Dialog=function(t){goog.ui.Dialog.call(this),this.setHasTitleCloseButton(!1),this.render(t),this.setModal(!0),this.safeShortcuts_=new lp;var o=te.superClass_.getContentElement.call(this);goog.dom.classlist.add(this.getTitleElement(),"vertical-align-children"),goog.dom.appendChild(o,goog.dom.createDom("div","modal-dialog-inner-content")),this.container_=t,this.focusTargetProvider_=goog.functions.identity,this.resizer_=new yf(this.getDialogElement(),goog.bind(function(i){this.dispatchEvent(new sync.api.Dialog.SizeChangedEvent(sync.api.Dialog.EventType.SIZE_CHANGED,i))},this)),this.dialogOpenHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.dialogOpenHandler_),this.reposition=goog.functions.throttle(this.reposition,200,this),this.id_=nE++};goog.inherits(te,goog.ui.Dialog);te.prototype.enterDocument=function(){te.superClass_.enterDocument.call(this);let t=this.getTitleCloseElement();t&&t.addEventListener(goog.events.EventType.KEYPRESS,o=>{!o.target.disabled&&o.keyCode===goog.events.KeyCodes.ENTER&&o.preventDefault()})};te.prototype.hiddenElements_=[];te.prototype.getContentElement=function(){var t=te.superClass_.getContentElement.call(this);return t.querySelector(".modal-dialog-inner-content")};te.prototype.setResizable=function(t){this.resizer_.setResizable(t)};te.prototype.setPreferredSize=function(t,o){this.resizer_.setSize(t,o),this.reposition()};te.prototype.setContentPreferredSize=function(t,o){var i=50,n=137,r=t?t+i:null,s=o?o+n:null;this.resizer_.setSize(r,s),this.reposition()};te.prototype.ariaHideSiblings_=function(t){for(var o=this.getDomHelper().getChildren(t.parentElement),i=0;i<o.length;i++){var n=o[i];n!==t&&!goog.a11y.aria.getState(n,goog.a11y.aria.State.HIDDEN)&&!goog.a11y.aria.getState(n,goog.a11y.aria.State.LIVE)&&(goog.a11y.aria.setState(n,goog.a11y.aria.State.HIDDEN,!0),this.hiddenElements_.push(n))}};te.prototype.setA11YDetectBackground=function(t){if(t)for(var o=this.getDomHelper().getDocument().body,i=this.element_;i!==o;)this.ariaHideSiblings_(i),i=i.parentElement;else{for(var n=0;n<this.hiddenElements_.length;n++)goog.a11y.aria.removeState(this.hiddenElements_[n],goog.a11y.aria.State.HIDDEN);this.hiddenElements_=[]}};te.prototype.setModal=function(t){te.superClass_.setModal.call(this,t);var o=this.getElement();t?(o.setAttribute("aria-modal","true"),goog.dom.classlist.remove(o,te.NON_MODAL_CLASS_)):(goog.dom.classlist.add(o,te.NON_MODAL_CLASS_),o.removeAttribute("aria-modal"))};te.prototype.setFocusTargetProvider=function(t){this.focusTargetProvider_=t};te.prototype.onHide=function(){this.lastFocus_=this.focusTargetProvider_(this.lastFocus_),te.superClass_.returnFocus_.call(this),te.superClass_.onHide.call(this)};te.prototype.returnFocus_=function(){};te.prototype.setVisible=function(t){if(te.superClass_.setVisible.call(this,t),t){var o=this.getElement().querySelector("*[autofocus]");o&&o.focus();var i=goog.events.EventType;this.dialogOpenHandler_.listen(window,[i.RESIZE,i.ORIENTATIONCHANGE],goog.bind(this.reposition,this,!0)),this.isEscapeToCancel()&&this.dialogOpenHandler_.listen(window,i.KEYDOWN,this.hideOnEsc_)}else this.dialogOpenHandler_.removeAll();this.handleStacking(t)};te.prototype.hideOnEsc_=function(t){t.keyCode===goog.events.KeyCodes.ESC&&this.onKey_(t)};te.prototype.setPosition=function(t,o){this.repositioned_=!0,goog.style.setPosition(this.getElement(),t,o),this.reposition()};te.prototype.reposition=function(t){requestAnimationFrame(goog.bind(function(){if(!!this.isVisible()){var o=this.getDomHelper().getDocument(),i=goog.dom.getWindow(o)||window,n=goog.style.getSize(this.getElement()),r=goog.dom.getViewportSize(i);this.repositioned_?this.repositionNonCentered_(n,r):this.repositionCentered_(n,r,t)}},this))};te.prototype.repositionCentered_=function(t,o,i){if(sync.util.isMobile()||o.height<450){var n=Math.max(o.width/2-t.width/2,0),r=15;goog.style.setPosition(this.getElement(),n,r),i&&this.resizer_.resizeToFit()}else i&&this.resizer_.resizeToFit(),te.superClass_.reposition.call(this)};te.prototype.repositionNonCentered_=function(t,o){var i=goog.style.getPageOffset(this.getElement());i.x=Math.max(i.x,0),i.x+t.width>o.width&&(i.x=o.width-t.width),i.y=Math.max(i.y,0),i.y+t.height>o.height&&(i.y=o.height-t.height),goog.style.setPosition(this.getElement(),i.x,i.y),goog.style.setPosition(this.tabCatcherElement_,i.x,i.y)};te.prototype.handleStacking=function(t){if(t){var o=_f.getZIndexForNewDialog(this.id_),i=this.getElement();i&&(i.style.zIndex=o)}else _f.dialogHidden(this.id_)};te.NON_MODAL_CLASS_="nonmodal";var vf=te;sync.view.Dialog=te;goog.require("goog.ui.Dialog.ButtonSet");namespace("sync.view");var Q=function(t,o,i){this.dialog=new vf(t),this.registerDisposable(this.dialog),this.setButtonConfiguration(sync.api.Dialog.ButtonConfiguration.OK_CANCEL),o&&this.dialog.getElement().setAttribute("id",o),this.setModal(!i)};goog.inherits(Q,sync.api.Dialog);Q.prototype.dispatchEvent=function(t){this.dialog.dispatchEvent(t)};Q.prototype.focus=function(){this.dialog.focus()};Q.prototype.isVisible=function(){return this.dialog.isVisible()};Q.prototype.show=function(){this.dialog.setVisible(!0)};Q.prototype.setFocusTargetProvider=function(t){this.dialog.setFocusTargetProvider(t)};Q.prototype.setResizable=function(t){this.dialog.setResizable(t)};Q.prototype.setPreferredSize=function(t,o){this.dialog.setPreferredSize(t,o)};Q.prototype.setContentPreferredSize=function(t,o){this.dialog.setContentPreferredSize(t,o)};Q.prototype.hide=function(){this.dialog.setVisible(!1),this.unlistenSelectEvent_()};Q.prototype.unlistenSelectEvent_=function(){this.clickListenerKey_&&(goog.events.unlistenByKey(this.clickListenerKey_),this.clickListenerKey_=null)};Q.prototype.getBackgroundElement=function(){return this.dialog.getBackgroundElement()};Q.prototype.getElement=function(){return this.dialog.getContentElement()};Q.prototype.setTitle=function(t){this.dialog.setTitle(t)};Q.prototype.onSelect=function(t){this.clickListenerKey_=goog.events.listen(this.dialog,goog.ui.Dialog.EventType.SELECT,goog.bind(function(o){var i=t(o.key,o);i&&i.then?(o.preventDefault(),this.setLoading_(!0),sync.util.promise.finally(i,goog.bind(this.setLoading_,this,!1)),i.then(goog.bind(this.hide,this))):o.defaultPrevented||this.unlistenSelectEvent_()},this))};Q.prototype.setLoading_=function(t){this.dialog.getButtonSet().setAllButtonsEnabled(!t),this.isDisposed()||goog.dom.classlist.toggle(this.getElement().parentNode,"oxy-spinner")};Q.createCustomButtonSet_=function(t){if(!!t.length){var o=goog.array.find(t,function(a){return goog.isDef(a.cancel)})!==null;!o&&t.length>=1&&(t[t.length-1].cancel=!0);var i=goog.array.find(t,function(a){return goog.isDef(a.default)})!==null;i||(t[0].default=!0,goog.userAgent.MAC&&t.reverse());for(var n=new goog.ui.Dialog.ButtonSet,r=0;r<t.length;r++){var s=t[r];n.addButton(s,s.default,s.cancel)}return n}};Q.prototype.getButtonSet=function(){return this.dialog.getButtonSet()};Q.prototype.setButtonLabel=function(t,o){let i=this.dialog.getButtonSet().getButton(t);i.textContent=o};Q.prototype.setButtonDisabledState=function(t,o){let i=this.dialog.getButtonSet().getButton(t);i.disabled=o};Q.prototype.setModal=function(t){if(this.dialog.setModal(t),this.dialog.setHasTitleCloseButton(!t),this.dialog.getHasTitleCloseButton()){var o=this.dialog.getTitleCloseElement();goog.dom.classlist.addAll(o,["corner-close-button","corner-close-button--big"]),o.title=tr(msgs.CLOSE_)}};Q.prototype.getEventTarget=function(){return this.dialog};Q.prototype.setHasTitleCloseButton=function(t){this.dialog.setHasTitleCloseButton(t)};Q.prototype.setPosition=function(t,o){this.dialog.setPosition(t,o)};Q.prototype.setBackgroundElementOpacity=function(t){return this.dialog.setBackgroundElementOpacity(t)};Q.getDefaultButtons_=function(){var t=goog.ui.Dialog.DefaultButtonKeys;return{OK:{key:t.OK,caption:tr(msgs.OK_)},CANCEL:{key:t.CANCEL,caption:tr(msgs.CANCEL_)},YES:{key:t.YES,caption:tr(msgs.YES_)},NO:{key:t.NO,caption:tr(msgs.NO_)}}};Q.createButtonConfiguration=function(t){var o=new goog.ui.Dialog.ButtonSet,i=Q.getDefaultButtons_();if(t===sync.api.Dialog.ButtonConfiguration.OK)o.addButton(i.OK,!0,!0);else if(t===sync.api.Dialog.ButtonConfiguration.CANCEL)o.addButton(i.CANCEL,!1,!0);else if(t instanceof Array)o=Q.createCustomButtonSet_(t);else{var n=sync.api.Dialog.ButtonConfiguration;t===n.OK_CANCEL?goog.userAgent.MAC?o.addButton(i.CANCEL,!1,!0).addButton(i.OK,!0):o.addButton(i.OK,!0).addButton(i.CANCEL,!1,!0):t===n.YES_NO&&(goog.userAgent.MAC?o.addButton(i.NO,!1,!0).addButton(i.YES,!0):o.addButton(i.YES,!0).addButton(i.NO,!1,!0))}return o};Q.prototype.setButtonConfiguration=function(t){t&&t.length!==0?goog.dom.classlist.remove(this.dialog.getElement(),"no-buttons-bar"):goog.dom.classlist.add(this.dialog.getElement(),"no-buttons-bar");var o=Q.createButtonConfiguration(t);this.dialog.setButtonSet(o),this.addButtonClasses_(o)};Q.prototype.addButtonClasses_=function(t){if(t){var o=t.getButton(t.getDefault()),i=goog.array.toArray(t.getAllButtons());goog.array.remove(i,o),i.forEach(n=>goog.dom.classlist.add(n,"oxy-button")),o&&goog.dom.classlist.addAll(o,["oxy-button","oxy-button--primary"])}};var Ef=Q;sync.view.ApiDialog=Q;namespace("sync.ui.util");(function(){var t=0;sync.ui.util.getGlobalId=function(){let n=t;return++t,`gid-${n}`},sync.ui.util.createElement=function(n,r={},...s){var a=document.createElement(n);o(a,r),s.length===1&&Array.isArray(s[0])&&(s=s[0]);for(let l of s)typeof l=="string"?a.appendChild(document.createTextNode(l)):a.appendChild(l);return a},sync.ui.util.attrBooleanValue=function(n){var r;return goog.isBoolean(n)?r=n:n==="false"?r=!1:r=goog.isDefAndNotNull(n),r},sync.ui.util.kebabCaseToCamelCase=function(n){return String(n).replace(/-([a-z])/g,function(r,s){return s.toUpperCase()})};function o(n,r){if(typeof r=="string"){n.className=r;return}for(var s in r)if(r.hasOwnProperty(s)){var a=i(s),l=r[s];goog.isBoolean(l)?l&&n.setAttribute(a,""):n.setAttribute(a,l)}}let i=function(n){return String(n).replace(/([A-Z])/g,"-$1").toLowerCase()}})();var XV=sync.ui.util;namespace("sync.ui");var Cf="sync-text-field",yn=sync.ui.util.createElement,dp=class extends HTMLElement{static get observedAttributes(){return["label","value","disabled","name","placeholder","autofocus","autocorrect","autocapitalize","autocomplete","suffix-icon","suffix-tooltip","suffix-label","show-clear","is-clearable","readonly"]}static get EventType(){return{CLICK_SUFFIX:"clicksuffix"}}constructor(){super();let t=sync.ui.util.getGlobalId();this.inputId_=t,this.currentSuffixIcon_="",this.label_=yn("label",{for:t,class:"sync-input__label"}),this.textInput_=yn("input",{id:t,class:"sync-input__input",type:"text"}),this.textInput_.addEventListener("input",()=>this.setValue(this.textInput_.value)),this.suffixArea_=this.createSuffixArea_(),this.root_=yn("div","sync-input",[this.label_,yn("div","sync-input__container",[this.textInput_,this.suffixArea_])])}connectedCallback(){super.appendChild(this.root_)}attributeChangedCallback(t,o,i){let n=sync.ui.util.kebabCaseToCamelCase(`set-${t}`);goog.isFunction(this[n])&&this[n](i,!1)}getInputId(){return this.inputId_}setLabel(t){this.label_.innerText=t}getLabel(){return this.label_.innerText}setValue(t){this.textInput_.value=t,this.root_.toggleAttribute("hasvalue",!!t)}getValue(){return this.textInput_.value}setDisabled(t,o=!0){t=sync.ui.util.attrBooleanValue(t),this.textInput_.disabled=t,o&&this.toggleAttribute("disabled",t)}isDisabled(){return this.textInput_.disabled}focus(t){this.textInput_.focus(t)}hasFocus(){return document.activeElement===this.textInput_}select(){this.textInput_.select()}setName(t){this.textInput_.name=t}setPlaceholder(t){this.textInput_.placeholder=t}setAutofocus(t){t=sync.ui.util.attrBooleanValue(t),this.textInput_.autofocus=t}setReadonly(t){t=sync.ui.util.attrBooleanValue(t),this.textInput_.setAttribute("readonly",t)}setAutocorrect(t){this.textInput_.setAttribute("autocorrect",t)}setAutocapitalize(t){this.textInput_.setAttribute("autocapitalize",t)}setAutocomplete(t){this.textInput_.autocomplete=t}getSelectionStart(){return this.textInput_.selectionStart}getSelectionEnd(){return this.textInput_.selectionEnd}setSuffixTooltip(t){this.suffixButton_.title=t}setSuffixLabel(t){this.suffixButton_.setAttribute("label",t)}setSuffixIcon(t){if(this.currentSuffixIcon_!==t){t=t||"";let o=this.currentSuffixIcon_.trim().split(/\s+/).filter(r=>r.length);this.suffixIcon_.classList.remove(...o);let i=t.trim().split(/\s+/).filter(r=>r.length);this.suffixIcon_.classList.add(...i);let n=t.length>0;this.textInput_.classList.toggle("sync-input__input--has-sufix-icon",n),this.suffixIconArea_.classList.toggle("sync-input__suffix-icon-area--present",n),this.currentSuffixIcon_=t}}setShowClear(t){this.root_.setAttribute("showclear",t)}setIsClearable(t){t=sync.ui.util.attrBooleanValue(t),t?this.suffixArea_.insertBefore(this.clearButton_,this.suffixIconArea_):this.suffixArea_.removeChild(this.clearButton_)}createSuffixArea_(){return this.clearButton_=yn("span",{class:"sync-input__clear-btn",role:"application"}),this.clearButton_.addEventListener("click",()=>{this.setValue(""),this.textInput_.dispatchEvent(new Event("input",{bubbles:!0}))}),yn("div","sync-input__suffix",[this.clearButton_,this.createSuffixIconArea_()])}createSuffixIconArea_(){return this.suffixIcon_=yn("div","oxy-button__icon"),this.suffixButton_=yn("button",{class:"oxy-button oxy-button--tiny oxy-button--icon-only oxy-button--text-only",type:"button"},[this.suffixIcon_]),this.suffixButton_.addEventListener("click",()=>this.dispatchEvent(new CustomEvent(dp.EventType.CLICK_SUFFIX))),this.suffixIconArea_=yn("div","sync-input__suffix-icon-area",yn("div","sync-input__suffix-icon-separator","\xA0"),this.suffixButton_),this.suffixIconArea_}};customElements.define(Cf,dp);var Mo=Cf;namespace("sync.actions");var Us=function(t,o,i,n,r){ee.call(this,t),this.editor_=i,this.webLinkOperationClassName_=o,this.params_=r||{},this.urlParamName_=n,this.callsCallback=!0,this.urlField_=null,this.dialogWidth_=360};goog.inherits(Us,ee);Us.prototype.actionPerformed=function(t){var o=this.getDialog();this.urlField_.setValue(""),o.show(),this.urlField_.focus(),o.onSelect(goog.bind(function(i,n){if(i===goog.ui.Dialog.DefaultButtonKeys.OK){var r=this.dialogElement_.querySelector('input[name^="oxy-param-"]');if(r.value){var s=new Fi(this.webLinkOperationClassName_,this.editor_.getController(),this.editor_.getSelectionManager());s.invoke({params:this.getParams()}).finally(t||goog.nullFunction)}else r.focus(),n.preventDefault()}else t&&t()},this))};Us.prototype.getDialog=function(){if(!this.dialog_){var t=workspace.createDialog();this.dialogElement_=t.getElement(),this.urlField_=sync.ui.util.createElement(Mo,{label:tr(msgs.CHOOSE_TARGET_WEB_RESOURCE_),name:"oxy-param-"+this.urlParamName_,placeholder:"URL",autofocus:"",autocorrect:"off",autocapitalize:"none"}),goog.dom.append(this.dialogElement_,this.urlField_),t.setTitle(tr(msgs.WEB_LINK_)),t.setButtonConfiguration([{key:"ok",caption:tr(msgs.INSERT_)},{key:"cancel",caption:tr(msgs.CANCEL_)}]),t.setPreferredSize(this.dialogWidth_,null),this.dialog_=t}return this.dialog_};Us.prototype.getParams=function(){var t=this.dialogElement_.querySelector('input[name^="oxy-param-"]');return this.params_[this.urlParamName_]=this.fixUpUrl_(t.value),this.params_};Us.prototype.fixUpUrl_=function(t){var o=new E(t);return o.getScheme()||(t="https://"+t),t};Us.prototype.dispose=function(){this.dialog_&&this.dialog_.dispose()};sync.actions.InsertWebLink=Us;namespace("sync.actions");var pp=function(t,o,i,n){ee.call(this,t),this.editor_=i,this.operationClassName_=o,this.params_=n||{},this.callsCallback=!0};goog.inherits(pp,ee);pp.prototype.actionPerformed=function(t){var o=workspace.getUrlChooser();if(!o){t&&t();return}this.chooserContext_==null&&(this.chooserContext_=new sync.api.UrlChooser.Context(sync.api.UrlChooser.Type.GENERIC));var i=t||goog.nullFunction;o.chooseUrl(this.chooserContext_,goog.bind(function(n){if(n!=null){var r=new Fi(this.operationClassName_,this.editor_.getController(),this.editor_.getSelectionManager());r.invoke({params:sync.util.extend(this.params_,{reference_value:n,format:"xml",scope:"","href type":"non dita resource"})}).finally(i)}else i()},this),sync.api.UrlChooser.Purpose.CHOOSE)};pp.prototype.isCompatible=function(){return!!workspace.getUrlChooser()};sync.actions.InsertFileReference=pp;namespace("sync.actions");var vc=function(t,o,i){ee.call(this,t),this.editingSupport_=i instanceof sync.api.Editor?i.getEditingSupport():i,this.imgOpClassName_=o,this.callsCallback=!0};goog.inherits(vc,ee);vc.prototype.actionPerformed=function(t){var o=workspace.getUrlChooser(),i=t||goog.nullFunction;if(o!=null&&o.supports(sync.api.UrlChooser.Type.IMAGE))this.chooserContext_==null&&(this.chooserContext_=new sync.api.UrlChooser.Context(sync.api.UrlChooser.Type.IMAGE)),o.chooseUrl(this.chooserContext_,goog.bind(function(s){if(s!=null){var a=new Fi(this.imgOpClassName_,this.editingSupport_.getController(),this.editingSupport_.getSelectionManager());a.invoke({params:{imageUrl:s}}).finally(i)}else i()},this),sync.api.UrlChooser.Purpose.CHOOSE);else{var n=this.createSimpleChooserDialog(),r=n.getElement().querySelector('[name="oxy-param-imageUrl"]');r.value="",n.show(),r.focus(),n.onSelect(goog.bind(function(s){if(s===goog.ui.Dialog.DefaultButtonKeys.OK){var a=new Fi(this.imgOpClassName_,this.editingSupport_.getController(),this.editingSupport_.getSelectionManager());a.invoke({params:{imageUrl:r.value}}).finally(i)}else i()},this))}};vc.prototype.createSimpleChooserDialog=function(){if(!this.simpleChooserDialog){this.simpleChooserDialog=workspace.createDialog();var t=goog.dom.createDom("input",{type:"text",name:"oxy-param-imageUrl",class:"oxy-input",style:"width:100%;margin-bottom:5px;"});sync.util.dom.setAttributes(t,{autofocus:"",autocorrect:"off",autocapitalize:"none"}),goog.dom.appendChild(this.simpleChooserDialog.getElement(),goog.dom.createDom("label","",tr(msgs.ENTER_IMAGE_URL_),t)),this.simpleChooserDialog.setTitle(tr(msgs.CHOOSE_IMAGE_URL_))}return this.simpleChooserDialog};vc.prototype.dispose=function(){this.simpleChooserDialog&&this.simpleChooserDialog.dispose()};sync.actions.InsertImage=vc;goog.require("goog.ui.Dialog");goog.require("goog.events");namespace("sync.actions");var ke=function(t,o,i,n,r,s,a){ee.call(this,t);var l=i instanceof sync.api.Editor?i.getEditingSupport():i;this.op_=new Fi(o,l.getController(),l.getSelectionManager()),this.allowedTypes_=n,this.allowedColumnWidths_=r,this.titleLabel_=s||tr(msgs.TITLE_),this.namespace_=a,this.dialog_=null,this.titleBehavior_=null,this.callsCallback=!0};goog.inherits(ke,ee);ke.TableTypes={HTML:"html",CALS:"cals",CUSTOM:"custom",DITA_SIMPLE:"dita_simple",DITA_CHOICE:"dita_choice"};ke.TitleBehavior={INSERT:"insert",SKIP:"skip",ASK:"ask"};ke.ColumnWidthTypes={PROPORTIONAL:"PROPORTIONAL_COL_WIDTHS",DYNAMIC:"DYNAMIC_COL_WIDTHS",FIXED:"FIXED_COL_WIDTHS"};ke.prototype.TABLE_CODES_={html:0,cals:1,custom:2,dita_simple:3,dita_choice:4};ke.prototype.getTableName_=function(t){switch(t){case"html":return"HTML";case"cals":return"CALS";case"dita_simple":return tr(msgs.SIMPLE_);case"dita_choice":return tr(msgs.CHOICE_);case"custom":return tr(msgs.CUSTOM_);default:return""}};ke.prototype.actionPerformed=function(t){var o=this.getDialog();if(o)o.show(),o.onSelect(goog.bind(function(n){if(n===goog.ui.Dialog.DefaultButtonKeys.OK){var r=this.getTitle_(),s=this.getSelectedTableType_();goog.isDefAndNotNull(s)?this.invokeOperation(s,r,t):this.invokeOperation(this.TABLE_CODES_[this.allowedTypes_[0]],r,t)}else t&&t()},this));else{var i=this.titleBehavior_===ke.TitleBehavior.SKIP?null:"";this.invokeOperation(this.TABLE_CODES_[this.allowedTypes_[0]],i,t)}};ke.prototype.getSelectedTableType_=function(){var t,o=document.getElementsByName("oxy-insert-table-param-table-type");if(o.length>0){for(var i=0,n=o.length;i<n;i++)if(o[i].checked){t=parseInt(o[i].value,10);break}}return t};ke.prototype.getTitle_=function(){var t,o=this.titleCheckbox_;return!o.disabled&&o.checked&&(t=this.titleInput_.value),t};ke.prototype.invokeOperation=function(t,o,i){var n=this.namespace_,r=this.allowedColumnWidths_;r=r&&r.length?r[0]:ke.ColumnWidthTypes.FIXED;var s={title:o,tableModel:goog.isDefAndNotNull(t)?t:ke.prototype.TABLE_CODES_.custom,rowsNumber:3,columnsNumber:2,generateHeader:!0,generateFooter:!1,columnsWidthsType:r};(t==0||t==1)&&(s.colsep="1",s.rowsep="1",s.frame="all"),this.op_.invoke({params:{table_info:s,defaultNamespace:n,namespace:n}}).finally(i||goog.nullFunction)};ke.prototype.createDialog_=function(){var t=null;return(this.allowedTypes_.length>1||this.allowedTypes_.length===1&&this.titleBehavior_===ke.TitleBehavior.ASK)&&(t=workspace.createDialog(),t.setTitle(tr(msgs.INSERT_TABLE_)),this.createDialogContent(t.getElement()),t.setPreferredSize(null,240)),t};ke.prototype.getDialog=function(){return this.dialog_||(this.dialog_=this.createDialog_()),this.dialog_};ke.prototype.createTableTypeOptions_=function(){for(var t=[],o=0;o<this.allowedTypes_.length;o++){var i=this.allowedTypes_[o],n=this.TABLE_CODES_[i],r=this.getTableName_(i),s=goog.dom.createDom("input",{id:"table-type-"+r,type:"radio",name:"oxy-insert-table-param-table-type",value:n});o===0&&s.setAttribute("checked",""),t.push(goog.dom.createDom("label",{className:"vertical-align-children",style:"margin-right:20px"},s,goog.dom.createDom("span","",r)))}return t};ke.prototype.createDialogContent=function(t){var o=goog.dom.createDom,i="vertical-align-children",n=[],r=this.titleLabel_,s=this.allowedTypes_.length;if(s>1)n=this.createTableTypeOptions_();else if(s===1){var a=this.getTableName_(this.allowedTypes_[0]);n.push(o("label","",o("b","",a)))}var l=o("input",{type:"text",name:"titleInput",placeholder:r}),c=o("input",{type:"checkbox",id:"titleCheckbox",name:"titleCheckbox"});c.setAttribute("checked",""),goog.dom.removeChildren(t),goog.dom.append(t,o("div",{style:"margin-bottom: 20px",className:i},n),o("form",{id:"tableTitleForm",className:i},o("label",{className:i,style:"margin-right:10px"},c,o("span","",r)),l)),this.titleInput_=l,this.titleCheckbox_=c,this.registerListeners(t)};ke.prototype.registerListeners=function(t){var o=goog.events,i=goog.events.EventType.CLICK,n=this.titleCheckbox_;n&&o.listen(n,i,this.enableDisableTitle_,!1,this);var r=t.querySelector("#table-type-SIMPLE");r&&o.listen(r,i,this.simpleTableSelected,!1,this);var s=t.querySelector("#table-type-CALS");s&&o.listen(s,i,this.calsTableSelected,!1,this)};ke.prototype.calsTableSelected=function(){var t=this.titleCheckbox_;t.disabled=!1,this.titleInput_.disabled=!t.checked};ke.prototype.simpleTableSelected=function(){this.titleCheckbox_.disabled=!0,this.titleInput_.disabled=!0};ke.prototype.enableDisableTitle_=function(){this.titleInput_.disabled=!this.titleCheckbox_.checked};ke.prototype.dispose=function(){this.dialog_&&this.dialog_.dispose()};ke.prototype.setTitleBehavior=function(t){this.titleBehavior_=t};sync.actions.InsertTable=ke;goog.require("goog.ui.Dialog");goog.require("goog.events");namespace("sync.actions");var Bs=function(t,o){ee.call(this,t),this.dialog_=null,this.actionsManager=o.getActionsManager(),this.callsCallback=!0};goog.inherits(Bs,ee);Bs.prototype.actionPerformed=function(t){var o=this.getCellToSplit_();if(o){var i=o.colSpan,n=o.rowSpan;if(n===2&&i===1||n===1&&i===2)this.actionPerformedWithValues(t,[i+","+n]);else{var r=this.getDialog();this.createDialogContent(r.getElement(),i,n),r.show(),r.onSelect(goog.bind(function(s){s===goog.ui.Dialog.DefaultButtonKeys.OK?this.actionPerformedWithValues(t,[this.columnsCountSelect_.value+","+this.rowsCountSelect_.value]):t&&t()},this))}}else workspace.getNotificationManager().showWarning(tr(msgs.SPLIT_CELL_WARNING_)),t&&t()};Bs.prototype.getDialog=function(){return this.dialog_||(this.dialog_=workspace.createDialog(),this.dialog_.setTitle(tr(msgs.SPLIT_CELL_)),this.dialog_.setContentPreferredSize(200,null)),this.dialog_};Bs.prototype.createDialogContent=function(t,o,i){var n=goog.dom.createDom,r="split-cell-form__option",s="split-cell-form__option__label",a="split-cell-form__option__select";goog.dom.removeChildren(t);for(var l=i>1?i:10,c=[],d=1;d<=l;d++){var g=d===1;c.push(n("option",{value:d,selected:g},d+""))}for(var m=o>1?o:10,v=[],C=1;C<=m;C++){var N=C===2;v.push(n("option",{value:C,selected:N},C+""))}var D=n("select",a,c),H=n("select",a,v);goog.dom.append(t,n("form","split-cell-form",n("div",r,n("label",s,tr(msgs.NUMBER_OF_COLUMNS_)+": "),H),n("div",r,n("label",s,tr(msgs.NUMBER_OF_ROWS_)+": "),D))),this.rowsCountSelect_=D,this.columnsCountSelect_=H};Bs.prototype.getCellToSplit_=function(){var t=sync.select.getSelection();if(t){var o=null;if(t.isEmpty()){var i=t.getNodeAtCaret();i&&(o=h.getInstance().getXmlNodeById(i.id))}else{var n=t.getFullySelectedNodeId();n&&(o=h.getInstance().getXmlNodeById(n))}}return o?sync.util.TableUtil.getSurroundingCellElement(o):null};Bs.prototype.dispose=function(){this.dialog_&&this.dialog_.dispose()};sync.actions.SplitTableCell=Bs;namespace("sync.actions");var Gn=function(t){ee.call(this,t),this.callsCallback=t instanceof _||t.callsCallback};goog.inherits(Gn,ee);Gn.isInsideTableElement=sync.util.createCachedFunction(function(t){var o=!1,i=t.getNodeAtSelection();if(i){var n=i.id,r=h.getInstance().getXmlNodeById(n),s=sync.util.TableUtil.getSurroundingTableElement(r);s&&(o=!0)}return o});Gn.prototype.isEnabled=function(){var t=Gn.superClass_.isEnabled.call(this);return t&&(t=sync.select.evalSelectionFunction(Gn.isInsideTableElement)),t};Gn.wrapTableAction=function(t,o){if(!!o){var i=t.getActionsManager(),n=i.getActionById(o);n&&i.registerAction(o,new Gn(n))}};var Sf=Gn;sync.actions.TableAction=Gn;namespace("sync.view");var Ec=function(t){this.container_=t,this.indicator_=null};Ec.prototype.setVisible=function(t){t?this.show_():this.hide_()};Ec.prototype.show_=function(){var t="document-spinner",o=this.container_.firstChild;if(!(o&&goog.dom.classlist.contains(o,t))){goog.dom.removeChildren(this.container_);var i=[t];goog.userAgent.IE?(i.push("ie-document-spinner"),goog.userAgent.isVersionOrHigher("9")&&!goog.userAgent.isVersionOrHigher("10")?i.push("ie9-document-spinner"):i.push("animation-document-spinner")):i.push("animation-document-spinner"),this.indicator_=goog.dom.createDom("div",i),this.container_.appendChild(this.indicator_)}};Ec.prototype.hide_=function(){goog.dom.removeNode(this.indicator_)};var gp=Ec;sync.view.LoadingIndicator=Ec;namespace("sync.preview");var Je=function(t){this.editor_=t,this.targetUrl_=null,this.updating_=!1,this.referencePreviewElem_=goog.dom.createDom("div","oxy-document-preview"),this.idAttributesDetected_=[],this.potentialTargetClass_="potential-target",this.highlightRowClass_="highlight-target-row",this.highlightPreviewItemClass_="highlight-preview",this.clickInPreviewListener_=null};Je.LOADING_CSS_CLASS="oxy-document-preview-loading";Je.prototype.getPreviewElement=function(){return this.referencePreviewElem_};Je.prototype.setPotentialTargets=function(t){this.potentialTargets_=t};Je.prototype.setReferenceTable=function(t){this.referenceTable_=t};Je.prototype.linkTableRowToTarget=function(t,o){this.potentialTargets_[o].tableRow=t};Je.prototype.linkPreviewElementToTarget_=function(t,o){this.potentialTargets_[o].previewElement=t};Je.prototype.updatePreview=function(t,o){if(this.targetUrl_===t)this.updating_||(this.setPreviewUpdatingStatus_(!1),this.enhancePotentialTargets_(),this.updatePreviewForTarget_(o));else{this.clear(),this.setPreviewUpdatingStatus_(!0),this.targetUrl_=t;var i=t;this.editor_.previewAuthorDocument(i,this.referencePreviewElem_).then(goog.bind(function(n){this.editingSupport_=n,this.targetUrl_===i&&(this.setPreviewUpdatingStatus_(!1),this.enhancePotentialTargets_(),this.updatePreviewForTarget_(o))},this)).thenCatch(function(n){console.error(n)})}};Je.prototype.clear=function(){this.targetUrl_=null,this.updating_=!1,goog.dom.removeChildren(this.referencePreviewElem_),this.editingSupport_&&(this.editingSupport_.dispose(),this.editingSupport_.getActionsManager().dispose()),goog.events.unlistenByKey(this.clickInPreviewListener_),this.clickInPreviewListener_=null,this.idAttributesDetected_=[]};Je.prototype.setPreviewUpdatingStatus_=function(t){this.updating_=t;var o=this.referencePreviewElem_;if(t){goog.dom.classlist.add(o,Je.LOADING_CSS_CLASS);var i=goog.dom.createDom("div","oxy-doc-preview-load");goog.dom.appendChild(o,i);var n=new gp(i);n.setVisible(!0)}else{var r=goog.dom.getElementByClass("oxy-doc-preview-load");r&&o.removeChild(r),goog.dom.classlist.remove(o,Je.LOADING_CSS_CLASS)}};Je.prototype.updatePreviewForTarget_=function(t){t.tableRow&&this.selectElementInTable_(t.tableRow),t.previewElement&&this.selectElementInPreview_(t.previewElement,!0),this.referencePreviewElem_.scrollLeft=0};Je.prototype.findPreviewElementForDescriptorInternal_=function(t,o,i){var n=i.length;if(n===0)return null;if(n===1)return i[0];for(var r,s=this.potentialTargets_,a=0,l=0;l<o;l++)t.id===s[l].id&&a++;return n>a&&(r=i[a]),r};Je.prototype.findPreviewElementForDescriptor_=function(t,o){var i,n,r=this.referencePreviewElem_;if(t.id&&t.idAttributeName){var s="[data-attr-"+t.idAttributeName.replace(/:/g,"\\3a")+'="'+t.id+'"]';i=r.querySelectorAll(s),n=this.findPreviewElementForDescriptorInternal_(t,o,i)}else if(t.id){var a='[data-attr-id="'+t.id+'"]';i=r.querySelectorAll(a),n=this.findPreviewElementForDescriptorInternal_(t,o,i)}else n=r.querySelector('[data-root="true"]');return n};Je.prototype.enhancePotentialTargets_=function(){var t=this.potentialTargets_,o;for(o=0;o<t.length;o++){var i,n=t[o];i=this.findPreviewElementForDescriptor_(n,o),this.linkPreviewElementToTarget_(i,o),goog.dom.classlist.add(i,this.potentialTargetClass_);var r=goog.dom.createDom("label","cross-ref-preview-choice",n.id||"-");goog.dom.dataset.set(r,"targetId",n.id),i.appendChild(r),this.idAttributesDetected_.indexOf(n.idAttributeName)===-1&&this.idAttributesDetected_.push(n.idAttributeName)}this.clickInPreviewListener_||(this.clickInPreviewListener_=goog.events.listen(this.referencePreviewElem_,goog.events.EventType.CLICK,goog.bind(this.clickInPreviewArea_,this)))};Je.prototype.clickInPreviewArea_=function(t){var o=goog.dom.getAncestorByClass(t.target,this.potentialTargetClass_);if(o){this.selectElementInPreview_(o);var i=goog.array.find(this.potentialTargets_,function(n){return n.previewElement===o});i&&i.tableRow&&this.selectElementInTable_(i.tableRow,{behavior:"smooth"})}};Je.prototype.changeInTable=function(t){var o=goog.dom.getAncestorByClass(t.target,"cross-ref-table-row");if(o){this.selectElementInTable_(o);var i=goog.array.find(this.potentialTargets_,function(n){return n.tableRow===o});i&&i.previewElement&&this.selectElementInPreview_(i.previewElement,!0)}};Je.prototype.clearOldHighlights_=function(t,o){for(var i=t.getElementsByClassName(o),n=i.length-1;n>=0;n--)i[n].classList.remove(o)};Je.prototype.selectElementInTable_=function(t,o){this.clearOldHighlights_(this.referenceTable_,this.highlightRowClass_),goog.dom.classlist.add(t,this.highlightRowClass_);var i=t.querySelector('input[name="cross-ref-table-radio"]');i.checked=!0,o&&t.scrollIntoView(goog.isObject(o)?o:null)};Je.prototype.selectElementInPreview_=function(t,o){if(this.clearOldHighlights_(this.referencePreviewElem_,this.highlightPreviewItemClass_),goog.dom.classlist.add(t,this.highlightPreviewItemClass_),o){t.scrollIntoView();var i=2;this.referencePreviewElem_&&(this.referencePreviewElem_.scrollTop=this.referencePreviewElem_.scrollTop-i)}};var Tf=Je;sync.preview.DocumentPreviewRenderer=Je;namespace("sync.actions");var ye=function(t,o,i){ee.call(this,t,o),this.editor_=o,this.elemDialog_=null,this.dialogTitle_=tr(msgs.CHOOSE_REFERENCE_),this.callback_=null,this.operation_=null,this.columns_=[tr(msgs.INSERT_REFERENCE_SEL_),tr(msgs.INSERT_REFERENCE_TARGET_ID_),tr(msgs.ELEMENT_),tr(msgs.INSERT_REFERENCE_ELEMENT_OR_ID_),tr(msgs.CONTENT_)],this.possibleTargets_=null,this.url=null,this.params_=i||{},this.referencetable_=null,this.refTableBody_=null,this.currentTargetUrl_=null,this.previewRenderer_=new Tf(this.editor_),this.startWithCurrentFile_=!1,this.callsCallback=!0};goog.inherits(ye,ee);ye.prototype.createTableRow=function(t,o){var i=goog.dom.createDom,n=this.possibleTargets_[t],r=n.id||"",s=sync.view.NodeRenderer.getRenderedText(n.nodeName),a=i("input",{name:"cross-ref-table-radio",type:"radio",id:"cross-ref-table-radio-"+t}),l="cross-ref-table-row";o&&(a.checked=!0,l+=" highlight-target-row",this.previewRenderer_.updatePreview(this.url,n)),a.addEventListener("change",goog.bind(this.previewRenderer_.changeInTable,this.previewRenderer_));var c=i("span",{className:"cross-ref-table-entry cross-ref-table-entry-id",title:r},r||"-");return n.idAttributeName&&goog.dom.dataset.set(c,"idAttributeName",n.idAttributeName),i("label",l,[i("span",["cross-ref-table-entry","cross-ref-table-entry-sel","nth-0"],a),c,i("span",{className:"cross-ref-table-entry cross-ref-table-entry-name",title:s},s),i("span",{className:"cross-ref-table-entry cross-ref-table-entry-el-id",title:s+"["+r+"]"},i("div",{className:"cross-ref-el-div",title:s},s),i("div",{className:"cross-ref-id-div",title:s},r)),i("span",{className:"cross-ref-table-entry cross-ref-table-entry-content",title:n.content},n.content)])};ye.prototype.findReferenceTargets=function(){var t=this.editor_.getEditingSupport().getSelectionManager().getSelection(),o=t.getNodeAtSelection(),i=o.baseURI||this.editor_.getUrl();return sync.rest.callAsync("RESTDitaSupport.getDitaReferenceTargets",{baseURL:i,targetUrl:this.url,id:this.editor_.docId})};ye.prototype.populateElementBrowser_=function(){return this.currentTargetUrl_.title=decodeURIComponent(workspace.makeRelative(this.editor_.getUrl(),this.url)),this.currentTargetUrl_.textContent=decodeURIComponent(new E(this.url).getFileName()),this.possibleTargets_=null,this.showLoadMsg_(tr(msgs.LOADING_)),this.previewRenderer_.clear(),goog.Promise.resolve().then(goog.bind(this.findReferenceTargets,this,this.url)).then(goog.bind(this.targetsReceived_,this)).thenCatch(goog.bind(function(t){var o=t.message||tr(msgs.COULD_NOT_DETERMINE_CONREF_TARGETS_);this.showLoadMsg_(o)},this))};ye.prototype.isEnabled=function(){var t=ye.superClass_.isEnabled.call(this);if(!t)return!1;var o=workspace.getUrlChooser();return o!=null&&o.supports(sync.api.UrlChooser.Type.EXTERNAL_REF)};ye.prototype.setStartWithCurrentFile=function(t){this.startWithCurrentFile_=t};ye.prototype.actionPerformed=function(t){if(this.callback_=t||goog.nullFunction,!this.isEnabled()){this.callback_();return}if(this.startWithCurrentFile_){this.topicChosen_(this.editor_.getUrl());return}this.elemDialog_!==null?(this.populateElementBrowser_().then(goog.bind(this.focusElemChooser_,this)),this.showElemDialog_()):this.browse_()};ye.prototype.createElemDialog=function(){if(!this.elemDialog_){var t=goog.dom.createDom,o=workspace.createDialog();this.elemDialog_=o,o.setTitle(this.dialogTitle_),o.setButtonConfiguration(sync.api.Dialog.ButtonConfiguration.OK_CANCEL),this.currentTargetUrl_=t("span","xref-current-file"),this.browseButton=t("button",{className:"xref-browse Open16_dark",title:tr(msgs.CHOOSE_ANOTHER_TARGET_FILE_)});for(var i=t("div","xref-file-chooser vertical-align-children",t("span","xref-file-chooser-wrapper",t("span","xref-file-chooser-label",tr(msgs.TARGET_FILE_)),this.currentTargetUrl_),this.browseButton),n=[],r=0;r<this.columns_.length;r++)n.push(t("span",["cross-ref-table-header-cell","nth-"+r],this.columns_[r]));this.refTableBody_=t("div","cross-ref-table-body"),this.referencetable_=t("div","cross-ref-table",t("div","cross-ref-table-header",n),this.refTableBody_),goog.dom.append(o.getElement(),t("div","cross-ref-content-wrapper",i,this.referencetable_,this.previewRenderer_.getPreviewElement())),goog.events.listen(this.browseButton,goog.events.EventType.CLICK,goog.bind(this.browseAgain_,this)),goog.events.listen(o.getEventTarget(),sync.api.Dialog.EventType.SIZE_CHANGED,goog.bind(this.updateScrollStatus_,this)),o.setPreferredSize(750,700),o.setResizable(!0)}return this.elemDialog_};ye.prototype.browseAgain_=function(){this.previewRenderer_.clear(),this.elemDialog_.hide(),this.browse_()};ye.prototype.browse_=function(){var t=workspace.getUrlChooser(),o=new sync.api.UrlChooser.Context(sync.api.UrlChooser.Type.EXTERNAL_REF);t.chooseUrl(o,goog.bind(this.topicChosen_,this),sync.api.UrlChooser.Purpose.CHOOSE)};ye.prototype.targetsReceived_=function(t){this.possibleTargets_=t;var o=this.refTableBody_;if(goog.dom.removeChildren(o),t&&t.length>0){this.previewRenderer_.setPotentialTargets(t),this.previewRenderer_.setReferenceTable(this.referencetable_);for(var i=0;i<t.length;i++){var n=i===0,r=this.createTableRow(i,n);goog.dom.appendChild(o,r),this.previewRenderer_.linkTableRowToTarget(r,i)}}else goog.dom.appendChild(o,goog.dom.createTextNode(tr(msgs.NO_TARGETS_)));this.updateScrollStatus_()};ye.prototype.topicChosen_=function(t){if(!t&&this.url&&this.populateElementBrowser_().then(goog.bind(this.focusBrowseButton_,this)),t){var o=new E(t);if(o.getFragment()){var i={className:"",nodeName:"",referenceUrl:t};this.editor_.getActionsManager().invokeOperation(this.operation_,this.getOperationParams(i),goog.bind(this.referenceInserted_,this));return}this.createElemDialog(),this.url=t,this.populateElementBrowser_().then(goog.bind(this.focusElemChooser_,this))}this.url?this.showElemDialog_():this.callback_()};ye.prototype.focusBrowseButton_=function(){this.browseButton.focus()};ye.prototype.getSelectedRadio=function(){return this.refTableBody_.querySelector('input[name="cross-ref-table-radio"]:checked')};ye.prototype.focusElemChooser_=function(){var t=this.getSelectedRadio();t&&t.focus()};ye.prototype.showElemDialog_=function(){this.elemDialog_.onSelect(goog.bind(function(t,o){this.previewRenderer_.clear(),t==="ok"?(o.preventDefault(),this.targetChosen_()):this.callback_()},this)),this.elemDialog_.show()};ye.prototype.showLoadMsg_=function(t){for(var o=this.referencetable_.querySelectorAll(".cross-ref-table-header-cell"),i=0,n=0;n<o.length;n++)goog.style.getComputedStyle(o[n],"display")!=="none"&&(i+=1);goog.dom.removeChildren(this.refTableBody_),goog.dom.appendChild(this.refTableBody_,goog.dom.createDom("div","cross-ref-table-row",goog.dom.createDom("td",{colspan:i},t))),this.updateScrollStatus_()};ye.prototype.targetChosen_=function(){var t=this.getSelectedTarget_();t&&this.editor_.getActionsManager().invokeOperation(this.operation_,this.getOperationParams(t),goog.bind(this.referenceInserted_,this))};ye.prototype.getSelectedTarget_=function(){var t,o=this.getSelectedRadio();if(o){var i=o.id.substring("cross-ref-table-radio-".length);t=this.possibleTargets_[parseInt(i,10)]}return t};ye.prototype.updateScrollStatus_=function(){var t=this.refTableBody_.scrollHeight>this.refTableBody_.clientHeight;goog.dom.classlist.enable(this.refTableBody_,"cross-ref-has-scroll",t)};ye.prototype.getOperationParams=function(t){return sync.util.extend(this.params_,{target_element_class:t.className,target_element_name:t.nodeName,reference_value:t.referenceUrl})};ye.prototype.referenceInserted_=function(){this.elemDialog_&&this.elemDialog_.hide(),this.callback_()};ye.prototype.setOperation=function(t){this.operation_=t};ye.prototype.setDialogTitle=function(t){this.dialogTitle_=t};ye.prototype.dispose=function(){this.elemDialog_&&this.elemDialog_.dispose()};var Ua=ye;sync.actions.InsertReference=ye;namespace("sync.actions");var bf=function(t,o,i){Ua.call(this,t,o,i),this.setOperation("ro.sync.ecss.extensions.dita.link.InsertXrefOperation"),this.setDialogTitle(tr(msgs.CHOOSE_CROSS_REFERENCE_))};goog.inherits(bf,Ua);sync.actions.InsertXref=bf;namespace("sync.actions");var Cc=function(t,o){ee.call(this,t),this.editor_=o,this.callsCallback=!0};goog.inherits(Cc,ee);Cc.prototype.isEnabled=function(){var t=this.editor_.getReadOnlyState();if(t.readOnly||sync.select.evalSelectionFunction(sync.util.isInReadOnlyContent))return!1;var o=workspace.getUrlChooser();return o!=null&&o.supports(sync.api.UrlChooser.Type.EXTERNAL_REF)};Cc.prototype.actionPerformed=function(t){if(t=t||goog.nullFunction,!this.isEnabled()){t();return}var o=workspace.getUrlChooser(),i=new sync.api.UrlChooser.Context(sync.api.UrlChooser.Type.EXTERNAL_REF);o.chooseUrl(i,goog.bind(this.topicRefChosen_,this,t),sync.api.UrlChooser.Purpose.CHOOSE)};Cc.prototype.topicRefChosen_=function(t,o){if(!o){t();return}this.editor_.getActionsManager().invokeOperation("ro.sync.ecss.extensions.dita.map.topicref.InsertTopicrefOperation",{topicUrl:o},t)};sync.actions.InsertTopicRef=Cc;namespace("sync.actions.dita");var Af=function(t,o){Ua.call(this,t,o),this.setOperation("ro.sync.ecss.extensions.dita.conref.InsertConrefOperation"),this.setDialogTitle(tr(msgs.REUSE_CONTENT_))};goog.inherits(Af,Ua);sync.actions.dita.ReuseContentAction=Af;namespace("sync.table");var Xt=function(t,o){ee.call(this,t),this.editor=o,this.dialog=null,this.callsCallback=!0};goog.inherits(Xt,ee);Xt.prototype.getTableInfo=function(t){return null};Xt.prototype.actionPerformed=function(t){var o=this.getTableInfo(this.getSelectedTableCells_());this.initialState=o.state,this.currentState=JSON.parse(JSON.stringify(o.state));var i=this.getDialog(o);i.show(),i.onSelect(goog.bind(function(n){var r=t||goog.nullFunction;n==="ok"?this.submitChanges(r):r()},this))};Xt.prototype.getSelectedTableCells_=function(){var t=[],o=new Set,i=sync.select.getSelection();if(i instanceof z){var n=i.getSelectedCells();n.forEach(function(m){o.add(m)})}else{var r=i.getNodeAtSelectionStart(),s=i.getNodeAtSelectionEnd(),a=h.getInstance().getXmlNodeById(r.id),l=h.getInstance().getXmlNodeById(s.id),c=new goog.dom.TagIterator(a,!1,!0);do{var d=c.next();(d.nodeName==="TD"||d.nodeName==="TH")&&o.add(d)}while(d!==l)}var g=this.editor.getEditingSupport().getDocument();return o.forEach(function(m){var v=g.createApiNodeOrNull(m);t.push(v)}),t};Xt.prototype.submitChanges=function(t){var o=this.computeChanges();Object.keys(o).length>0?this.editor.getActionsManager().invokeOperation(this.getOperationClass(),{tableInfo:o}).thenCatch(function(i){sync.util.error.reloadPage(i)}).thenAlways(t):t()};Xt.prototype.getOperationClass=function(){};Xt.prototype.computeChanges=function(){var t=Object.keys(this.initialState),o,i={};for(o=0;o<t.length;o++){var n=t[o],r=this.initialState[n],s=this.currentState[n],a=[],l;for(l=r.length-1;l>=0;l--)r[l].currentValue!==s[l].currentValue&&a.push(s[l]);a.length>0&&(i[n]=a)}return i};Xt.prototype.getDialog=function(t){var o=t.config,i=this.dialog;i||(i=workspace.createDialog(),i.setTitle(tr(msgs.TABLE_PROPERTIES_TITLE_)),i.setButtonConfiguration(sync.api.Dialog.ButtonConfiguration.OK_CANCEL),i.setPreferredSize(520,700),i.setResizable(!0),this.dialog=i);var n=i.getElement();goog.dom.removeChildren(n);var r=goog.dom.createDom("div","tabprop-tabs"),s=goog.dom.createDom("div","tabprop-content");goog.dom.append(n,goog.dom.createDom("div",{id:"table-properties-tabpane"},r,s));var a=new kd,l=goog.array.map(Object.keys(o),goog.bind(function(c){return{caption:tr(msgs[c]),targetId:c,content:this.renderTabPage(c,o[c])}},this));return a.addTabs(l),a.render(r,s),i};Xt.prototype.renderTabPage=function(t,o){var i=goog.dom.createDom,n=i("div",{id:"table-properties-tab-"+t.toLowerCase()}),r;for(r=0;r<o.length;r++){var s=o[r],a=i("div","parent-group-title",tr(msgs[s.groupName])),l=i("div",{id:"table-properties-table-"+s.groupName,className:"parent-group"},a),c=i("div","parent-group-preview-icon"),d=i("div","parent-group-preview",i("div","parent-group-preview-title",tr(msgs.Preview)),c),g=s.attributes,m;for(m=0;m<g.length;m++){var v=g[m],C=this.renderAttribute(v,t);goog.events.listen(C,goog.events.EventType.CHANGE,goog.bind(function(H,ne,ht,Yi){var ls=H.attributeName,cs=Yi.target.value;this.updateAttributeValue(t,ls,cs);var Eh=this.getPreviewUrl(t,ht);Eh&&goog.style.setStyle(ne,"backgroundImage",'url("'+Eh+'")')},this,v,c,s)),goog.dom.appendChild(l,C)}var N=this.getPreviewUrl(t,s);N&&goog.style.setStyle(c,"backgroundImage",'url("'+N+'")');var D=i("div","table-properties-section",l,d);goog.dom.appendChild(n,D)}return n};Xt.prototype.getPreviewUrl=function(t,o){var i="",n,r=o.attributes;for(n=0;n<r.length;n++){var s=this.getAttributeValue(t,r[n].attributeName);s==="<"+tr(msgs.TABLE_PROPS_PRESERVE_)+">"&&(s="<"+tr(msgs.TABLE_PROPS_NOT_SET_)+">"),i+=s}var a,l=o.icons[i];return l&&(a=sync.util.image.getImageUrl(l,sync.util.getHdpiFactor())),a};Xt.prototype.updateAttributeValue=function(t,o,i){var n=this.currentState[t],r;for(r=0;r<n.length;r++){var s=n[r];if(s.attributeName===o){s.currentValue=i;break}}};Xt.prototype.renderAttribute=function(t,o){var i=t.guiType,n;return i==="RADIO_BUTTONS"?n=this.renderRadioButtons(t,o):i==="COMBOBOX"&&(n=this.renderComboBox(t,o)),n};Xt.prototype.renderRadioButtons=function(t,o){for(var i=goog.dom.createDom,n=t.values,r=[],s=t.attributeName,a=this.getAttributeValue(o,s),l=0;l<n.length;l++){var c=tr(msgs[n[l]]);c==="undefined"&&(c=n[l]),r.push(i("label",{},i("input",{type:"radio",value:n[l],checked:a===n[l],name:o.toLowerCase()+s}),c,i("br")))}var d=i("div",["table-properties-section-radio","table-properties-attribute"],r);return goog.dom.dataset.set(d,"attributeName",s),d};Xt.prototype.renderComboBox=function(t,o){for(var i=goog.dom.createDom,n=t.values,r=[],s=t.attributeName,a=this.getAttributeValue(o,s),l=0;l<n.length;l++)r.push(i("option",{value:n[l],selected:n[l]===a},n[l]));var c=i("select",{name:s},r);return goog.dom.dataset.set(c,"attributeName",s),i("div","table-properties-attribute",i("span",{},tr(msgs[t.attributeRenderString])+":"),c)};Xt.prototype.getAttributeValue=function(t,o){var i=this.currentState[t],n=null,r;for(r=0;r<i.length;r++)o===i[r].attributeName&&(n=i[r].currentValue);return n};Xt.prototype.dispose=function(){this.dialog&&this.dialog.dispose()};sync.table.ShowTablePropertiesAction=Xt;namespace("sync.ext");sync.ext.Extension=function(){};sync.ext.Extension.prototype.getEnhancers=function(){return{}};sync.ext.Extension.prototype.editorCreated=function(t){};sync.ext.Extension.prototype.filterActions=function(t,o){};namespace("sync.spellcheck");var hp=function(t,o){_.call(this,{displayName:t}),this.spellchecker_=o};goog.inherits(hp,_);hp.prototype.actionPerformed=function(t){var o=this.spellchecker_.getIgnoreTarget();if(o){var i=o.getAttribute("data-lang"),n=o.getAttribute("data-spellcheck-word");this.spellchecker_.addIgnoredWord(i,n)}t&&t()};var If=hp;sync.spellcheck.SpellCheckIgnoreAllAction=hp;goog.require("goog.events");goog.require("goog.object");goog.require("goog.array");goog.require("goog.events.EventType");goog.require("goog.positioning.Corner");goog.require("goog.ui.Component.EventType");goog.require("goog.ui.PopupMenu");goog.require("goog.ui.MenuSeparator");namespace("sync.view");var ae=function(t,o,i){goog.ui.PopupMenu.call(this),this.actionsManager=t,this.actionsExecutor=o,this.selectionManager=null,this.options=i||{},this.itemDescriptors_=[],this.items_=[],this.context=null,this.render(),this.options.elementClass&&goog.dom.classlist.add(this.getElement(),this.options.elementClass),this.getHandler().listen(this,goog.ui.Component.EventType.BEFORE_SHOW,this.populateMenu),this.ignoreMouseUp_=!0,this.getHandler().listenWithScope(this.getElement(),goog.events.EventType.MOUSEDOWN,this.onMouseDown_,!0,this),this.getHandler().listenWithScope(this.getElement(),goog.events.EventType.MOUSEUP,this.onMouseUp_,!0,this)};goog.inherits(ae,goog.ui.PopupMenu);ae.prototype.setSelectionManager=function(t){this.selectionManager=t};ae.prototype.onMouseDown_=function(){this.ignoreMouseUp_=!1};ae.prototype.onMouseUp_=function(t){this.ignoreMouseUp_&&t.stopPropagation(),this.ignoreMouseUp_=!0};ae.prototype.hide=function(){this.ignoreMouseUp_=!0,ae.superClass_.hide.call(this)};ae.prototype.populateMenu=function(){this.clearMenu();var t=this.getMainMenuEntries_();t.forEach(goog.bind(function(o){this.addChild(o,!0)},this))};ae.prototype.getItems=function(){if(!this.items_){var t=this.itemDescriptors_;this.context==="table"&&(t=this.getDescriptorForTableContext_()),this.items_=this.generateSubmenuChildren_(t)}return this.items_};ae.prototype.getMainMenuEntries_=function(){var t=[],o=null;for(var i of this.getItems())(i.isEnabled()||i instanceof goog.ui.MenuSeparator&&o&&!(o instanceof goog.ui.MenuSeparator))&&(o=i,t.push(i));return t.length!==0&&t[t.length-1]instanceof goog.ui.MenuSeparator&&t.pop(),t};ae.prototype.addAction=function(t){this.itemDescriptors_.push({type:"action",id:t}),this.items_=null};ae.prototype.addSeparator=function(){this.itemDescriptors_.push({type:"sep"}),this.items_=null};ae.prototype.addSubmenu=function(t,o){this.itemDescriptors_.push({type:"list",name:t,children:o||[]}),this.items_=null};ae.prototype.clearMenu=function(){this.removeChildren(!0)};ae.prototype.attach=function(t){ae.superClass_.attach.call(this,t,void 0,void 0,!0),this.getHandler().listenWithScope(this.getElement(),goog.events.EventType.KEYDOWN,this.handleKeyDown,!0,this),this.getHandler().listenWithScope(this.getElement(),goog.events.EventType.CONTEXTMENU,function(o){o.preventDefault()},!0,this)};ae.prototype.detach=function(t){this.isAttachTarget(t)&&ae.superClass_.detach.call(this,t)};ae.prototype.handleKeyDown=function(t){t.keyCode===goog.events.KeyCodes.ESC&&(this.hide(),this.restoreFocus(),t.preventDefault(),t.stopPropagation())};ae.prototype.restoreFocus=function(){this.options.lastFocus?this.options.lastFocus.focus():this.selectionManager!=null&&this.selectionManager.restoreSelectionInBrowser()};ae.prototype.getEntries=function(){return goog.object.unsafeClone(this.itemDescriptors_)};ae.prototype.setEntries=function(t){this.items_=null,this.itemDescriptors_=t};ae.prototype.addEntries=function(t,o){this.items_=null;var i={};goog.array.forEach(this.itemDescriptors_,function(r){r.type==="list"&&(i[r.name]=r)});var n=o||this.itemDescriptors_.length;goog.array.forEach(t,function(r){if(r.type==="list"){var s=i[r.name];if(s){s.children=s.children.concat(r.children),s.icon=r.icon,r.hasOwnProperty("context")&&(s.context=r.context);return}}this.itemDescriptors_.splice(n,0,r),n+=1},this)};ae.prototype.isChildNotSeparator_=function(t){return t.type!=="sep"};ae.prototype.flattenMenuIfOneItem=function(t){var o=goog.array.findIndex(this.itemDescriptors_,function(r){return r.type==="list"&&r.name===t});if(o!==-1){var i=this.itemDescriptors_[o],n=i.children;goog.array.count(n,this.isChildNotSeparator_)===1&&this.itemDescriptors_.splice(o,1,goog.array.find(n,this.isChildNotSeparator_))}};ae.prototype.generateSubmenuChildren_=function(t){for(var o=[],i=0;i<t.length;i++){var n=t[i];if(n.type==="action")this.pushMenuItem_(n.id,o);else if(n.type==="sep")o.length===0||o[o.length-1]instanceof goog.ui.MenuSeparator||o.push(new goog.ui.MenuSeparator);else if(n.type==="list"){var r=this.generateSubmenuChildren_(n.children);if(r.length>0){var s=new sync.view.SubMenuItem(n.icon,n.name,r,this);o.push(s)}}}return o.length!==0&&o[o.length-1]instanceof goog.ui.MenuSeparator&&o.pop(),o};ae.prototype.pushMenuItem_=function(t,o){var i=this.actionsManager.getActionById(t);if(i&&!(goog.isFunction(i.isCompatible)&&!i.isCompatible())){var n=this.actionsManager.getActionShortcutForDisplay(t);o.push(this.createMenuItem(i,t,n))}};ae.prototype.createMenuItem=function(t,o,i){return this.options.createMenuItem?this.options.createMenuItem(t,o,i,null,this.actionsExecutor):new mt(t,o,i,null,this.actionsExecutor)};ae.prototype.getDescriptorForTableContext_=function(){var t=goog.array.clone(this.itemDescriptors_),o=[],i;for(i=0;i<t.length;i++){var n=t[i];n.type==="list"&&n.context==="table"&&(goog.array.forEach(n.children,function(r){o.push(r)}),t.splice(i,1),i--)}return o.length?(o.push({type:"list",name:tr(msgs.OTHER_ACTIONS_),children:t}),o.splice(0,0,{type:"action",id:"Author/CutSpecial"},{type:"action",id:"Author/CopySpecial"},{type:"action",id:"Author/PasteSpecial"},{type:"sep"}),o):this.itemDescriptors_};ae.prototype.setContext=function(t){t=t||null,this.context!==t&&(this.context=t,this.clearMenu(),this.items_=null)};var Ba=ae;sync.view.PopupMenu=ae;namespace("sync.view");var Ut=function(t,o,i,n,r){Ba.call(this,t,o),this.setSelectionManager(n),this.safeShortcuts_=i,this.scrollEventTarget_=r,this.spellcheckEnabled_=!1,this.otherActions_=null,this.suggestionsReady_=!1,this.initHideListeners_()};goog.inherits(Ut,Ba);Ut.prototype.install=function(t,o,i){i?this.attach(o):(goog.events.listen(t,ft.EventTypes.EDIT_MODE_CHANGED,goog.bind(function(n){n.editMode?this.attach(o):this.detach(o)},this)),t.isEditMode()&&this.attach(o))};Ut.prototype.handleKeyEvent=function(t){Ut.superClass_.handleKeyEvent.call(this,t),this.safeShortcuts_.shouldDelegateToBrowser(t)||t.preventDefault()};Ut.prototype.onTargetClick_=function(t){var o,i,n,r;t.button===goog.events.BrowserEvent.MouseButton.RIGHT&&goog.userAgent.EDGE_OR_IE&&(n=this.selectionManager.getSelection(),r=n.focus.getCaretRect(),t.clientX=r.left,t.clientY=r.top+r.height),goog.userAgent.GECKO?(n=this.selectionManager.getSelection(),t.button===goog.events.BrowserEvent.MouseButton.LEFT&&!n.isEmpty()?(r=n.focus.getCaretRect(),t.clientX=r.left,t.clientY=r.top+r.height):sync.util.shouldUseIframe()&&(o=goog.style.getSize(document.getElementById("header")).height,i=document.getElementById("breadcrumbs-area").clientHeight,t.clientY=t.clientY+o+i)):sync.util.shouldUseIframe()&&(o=goog.style.getSize(document.getElementById("header")).height,i=document.getElementById("breadcrumbs-area").clientHeight,t.clientY=t.clientY+o+i),Ut.superClass_.onTargetClick_.call(this,t)};Ut.prototype.addSuggestions=function(t,o){if(this.spellcheckEnabled_){this.suggestionsReady_=!0;var i=10;if(t.length>i){var n=t.slice(i);t=t.slice(0,i),t.push(new goog.ui.MenuSeparator),t.push(new sync.view.SubMenuItem("",tr(msgs.MORE_SUGGESTIONS_),n,this))}else t.push(new goog.ui.MenuSeparator);var r=o.getIgnoreTarget();if(r){var s=goog.dom.dataset.get(r,"spellcheckWord");t.push(new mt(new If(tr(msgs.IGNORE_)+' "'+s+'"',o),"",null,null,this.actionsExecutor));var a=o.getLearnWordAction();if(a){var l=goog.dom.dataset.get(r,"lang");t.push(new mt(new a(s,l),"",null,null,this.actionsExecutor))}}this.populateMenu();for(var c=t.length-1;c>=0;c--)this.addChildAt(t[c],0,!0);this.addChildAt(new goog.ui.MenuSeparator,t.length,!0),this.repositionContextMenuWithSuggestions_()}};Ut.prototype.repositionContextMenuWithSuggestions_=function(){var t=this.getElement();t&&requestAnimationFrame(function(){var o=goog.style.getSize(t),i=t.offsetTop,n=t.offsetLeft,r=sync.util.getDocDomHelper().getDocument().body,s=r.clientHeight-20,a=r.clientWidth-20,l=i+o.height;l>s&&(t.style.top=i-(l-s)-10+"px");var c=n+o.width;c>a&&(t.style.left=n-(c-a)-10+"px")})};Ut.prototype.populateMenu=function(){var t=this.getElement(),o=goog.dom.classlist;if(this.setContext(this.isInTableContext()?"table":null),this.spellcheckEnabled_){if(this.setContext(null),this.clearMenu(),this.suggestionsReady_===!1){o.add(t,"importantHide");return}var i=this.getMainMenuEntries_();this.otherActions_=new sync.view.SubMenuItem("",tr(msgs.OTHER_ACTIONS_),i,this),this.addChild(this.otherActions_,!0),this.suggestionsReady_=!1}else Ut.superClass_.populateMenu.call(this);o.remove(t,"importantHide"),o.add(t,"oxy-context-menu")};Ut.prototype.clearMenu=function(){Ut.superClass_.clearMenu.call(this),this.otherActions_&&this.otherActions_.getMenu().removeChildren(!0)};Ut.prototype.setSpellcheckEnabled=function(t){this.spellcheckEnabled_=t};Ut.prototype.isInTableContext=function(){var t=this.selectionManager.evalSelectionFunction(Sf.isInsideTableElement);if(t){var o=this.selectionManager.getSelection();!(o instanceof z)&&!o.isEmpty()&&(t=!1)}return t};Ut.prototype.onDocClick=function(t){this.isVisible()&&!this.containsElement(t.target)&&(this.hide(),goog.userAgent.EDGE_OR_IE&&setTimeout(goog.bind(function(){sync.model.XmlDom.isInsideDocument(t.target)&&(this.isVisible()||this.selectionManager.restoreSelection())},this,t),20))};Ut.prototype.initHideListeners_=function(){var t=new goog.events.EventHandler(this);this.registerDisposable(t),this.getHandler().listen(this,goog.ui.Component.EventType.SHOW,o=>{o.target===this&&t.listenOnce(this.scrollEventTarget_,goog.events.EventType.SCROLL,()=>{this.hide(),this.selectionManager.restoreSelection()})}),this.getHandler().listen(this,goog.ui.Component.EventType.HIDE,o=>{o.target===this&&t.removeAll()})};var wf=Ut;sync.view.ContextMenu=Ut;namespace("sync.view");var Hs=function(){goog.Disposable.call(this)};goog.inherits(Hs,goog.Disposable);Hs.prototype.install=function(t){t.listen(ft.EventTypes.EDIT_MODE_CHANGED,goog.bind(function(o){o.editMode?this.enableEditing():this.disableEditing()},this)),t.isEditMode()&&this.enableEditing()};Hs.prototype.enableEditing=function(){};Hs.prototype.disableEditing=function(){};Hs.prototype.enableKeyboardShortcuts=function(){};var Ha=Hs;sync.view.ViewportBase=Hs;goog.require("goog.dom");goog.require("goog.dom.Range");goog.require("goog.events.ImeHandler");goog.require("goog.events.EventTarget");namespace("sync.view");var Le=function(t,o,i,n){goog.events.EventTarget.call(this),this.docElement_=t,this.controller_=o,this.selectionManager_=i,this.domUpdateSilencer_=n,this.compositionEndTimestamp_=0,this.compositionStartSelection_=null,this.insertionSelection=null,this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_)};goog.inherits(Le,goog.events.EventTarget);Le.prototype.logger=goog.log.getLogger("ImeHelperForAndroid");Le.prototype.enableEditing=function(){var t=this.docElement_;this.imeHandler=new goog.events.ImeHandler(t),this.registerDisposable(this.imeHandler),!(goog.userAgent.MAC&&goog.userAgent.product.SAFARI)&&this.eventHandler_.listen(t,goog.events.EventType.COMPOSITIONSTART,this.handleCompositionStart,!0).listen(t,goog.events.EventType.COMPOSITIONUPDATE,this.handleCompositionUpdate,!0).listen(t,goog.events.EventType.COMPOSITIONEND,this.handleCompositionEnd,!1).listen(t,goog.events.EventType.TEXTINPUT,this.handleTextInput,!1).listen(t,goog.events.EventType.INPUT,this.handleInput,!0)};Le.prototype.disableEditing=function(){this.imeHandler&&(this.imeHandler.dispose(),this.imeHandler=null),this.eventHandler_.removeAll()};Le.prototype.handleCompositionEnd=function(){if(this.domUpdateSilencer_.setUpdatesSilenced(!1),this.compositionEndTimestamp_=goog.now(),!this.textInputFired_&&(this.resetDom(),this.data)){var t=new goog.events.Event(goog.events.EventType.TEXTINPUT);t.data=this.data,t.target=this.docElement_,this.dispatchEvent(new goog.events.BrowserEvent(t,this.docElement_))}};Le.prototype.handleTextInput=function(t){this.textInputFired_=!0;var o=t.getBrowserEvent().data;o.length===0&&this.dispatchImeCancelled()};Le.prototype.INPUT_IGNORE_DELAY=50;Le.prototype.handleInput=function(t){var o=!1;if(this.isInImeMode())o=!0;else{var i=t.getBrowserEvent().timeStamp-this.compositionEndTimestamp_;i<this.INPUT_IGNORE_DELAY?(o=!0,this.dispatchImeCancelled()):goog.log.warning(this.logger,"input arrived after delay: "+i)}o?t.stopPropagation():this.dispatchEvent(new goog.events.BrowserEvent({type:Le.EventType.INPUT}))};Le.prototype.dispatchImeCancelled=function(){this.dispatchEvent(new goog.events.BrowserEvent({type:Le.EventType.IME_CANCELLED}))};Le.prototype.dirtyClass_="-oxy-dirty";Le.prototype.resetDom=function(){if(this.affectedNodeId){var t=h.getInstance().getXmlNodeById(this.affectedNodeId);if(t&&goog.dom.classlist.contains(t,this.dirtyClass_)&&sync.util.getOuterHTML(t)!=this.affectedNodeHtml){goog.log.warning(this.logger,"Restoring dirty nodes. "),this.controller_.fireSelectionModelChanged(null);var o=new Ne;o.nodesIds=[this.affectedNodeId],o.fragments=[this.affectedNodeHtml],this.controller_.applyUpdate_(o);var i=this.compositionStartSelection_.restore();this.controller_.fireSelectionModelChanged(i)}}};Le.prototype.clearCompositionState=function(){this.resetDom(),this.compositionAck()};Le.prototype.compositionAck=function(){this.selectedText=null,this.affectedNodeId=null,this.compositionStartSelection_=null,this.insertionSelection=null,this.data=null,this.textInputFired_=!1};Le.prototype.resetDirtyState=function(){var t=this.docElement_.ownerDocument.getElementsByClassName(this.dirtyClass_);t&&t.length>0&&goog.dom.classlist.remove(t[0],this.dirtyClass_)};Le.prototype.handleCompositionStart=function(t){this.domUpdateSilencer_.setUpdatesSilenced(!0),this.textInputFired_=!1,goog.log.info(this.logger,t.type+": "+t.getBrowserEvent()&&t.getBrowserEvent().data+" "+this.selectionManager_.getSelection());var o=goog.dom.getWindow(this.docElement_.ownerDocument),i=goog.dom.Range.createFromWindow(o);this.selectedText=i.getText();var n=this.selectionManager_.getSelection();this.compositionStartSelection_=n.save(),this.insertionSelection=this.compositionStartSelection_;var r=this.getAffectedNode(n);r!=null&&(this.affectedNodeId=h.getIdOfXmlNode(r),this.affectedNodeHtml=sync.util.getOuterHTML(r));try{var s=new goog.events.BrowserEvent({type:Le.EventType.BEFORE_IME});this.dispatchEvent(s)}finally{goog.dom.classlist.add(h.getInstance().getXmlNodeById(this.affectedNodeId),this.dirtyClass_)}};Le.prototype.handleCompositionUpdate=function(t){this.data=t.getBrowserEvent().data};Le.EventType={BEFORE_IME:"before_ime",INPUT:"input",IME_CANCELLED:"ime_cancelled"};Le.prototype.getAffectedNode=function(t){var o=p.fromHTMLPosition(t.start),i=o.getContentInformation(),n=h.getInstance().getXmlNodeById(i.elementId);o=p.fromHTMLPosition(t.end),i=o.getContentInformation();var r=h.getInstance().getXmlNodeById(i.elementId),s=goog.dom.findCommonAncestor(n,r);return s=sync.model.XmlDom.getContainingXmlNode(s),s};Le.prototype.isInImeMode=function(){return this.imeHandler?this.imeHandler.isImeMode():!1};Le.prototype.moveSelectionOutOfSentinels=function(t){var o=!1;if(t&&t.isEmpty()){var i=p.fromHTMLPosition(t.focus),n=i.toHTMLPosition(),r=i.getContentInformation();if(r&&!r.isOnText()?o=!0:(r=i.getContentInformationBefore(),r&&!r.isOnText()&&(o=!0)),o&&n.container.nodeType===goog.dom.NodeType.TEXT){goog.log.info(this.logger,"selection near a sentinel, inserting dummy period in js."),sync.util.dom.insertNodeInTextNode(n,goog.dom.createDom("span",{id:"-tmp-android-sel"},"."));var s=this.docElement_.ownerDocument.getElementById("-tmp-android-sel"),a=new T(s,0),l=new T(s,1);t=new sync.select.Selection(a,l),this.selectionManager_.setSelection(t)}}return t};var up=Le;sync.view.ImeHelperForAndroid=Le;goog.require("goog.events");goog.require("goog.dom");goog.require("goog.log");namespace("sync.view");var qe=function(t,o,i,n,r,s,a){Ha.call(this),goog.log.info(this.logger_,"Viewport initialized"),this.controller_=o,this.scheduler=i,this.problemReporter_=n,this.docWrapper_=t,this.actionsManager_=r,this.selectionManager_=s,this.ignoreInputEvent_=!1,this.imeHelper=new up(this.docWrapper_,o,s,a);var l=new qe.DocumentFilter;this.controller_.registerDocumentFilter(l),l.filter_(this.docWrapper_)};goog.inherits(qe,Ha);qe.DocumentFilter=function(){};goog.inherits(qe.DocumentFilter,pe);qe.DocumentFilter.prototype.enhanceDom=function(t){for(var o=0;o<t.length;o++)this.filter_(t[o])};qe.DocumentFilter.prototype.filter_=function(t){for(var o=t.querySelectorAll(".tag"),i,n=0;n<o.length;n++)goog.dom.removeChildren(o[n]),p.getSentinelType(o[n])===f.BEFORE?i=".":i=",",o[n].textContent=i};qe.prototype.logger_=goog.log.getLogger("AndroidViewport");qe.prototype.handleKey=function(t){var o=t.keyCode,i=goog.events.KeyCodes;goog.log.info(this.logger_,"key pressed"+o),o===i.BACKSPACE?(goog.log.info(this.logger_,"backspace pressed"),this.controller_.deleteSelection(i.BACKSPACE,!1,this.selectionManager_.getSelection()),t.preventDefault()):o===i.SPACE&&(t.preventDefault(),this.controller_.insertText(" ",this.selectionManager_.getSelection()))};qe.prototype.enableEditing=function(){this.imeHelper.enableEditing(),this.inputHandlerKey_=goog.events.listen(this.imeHelper,up.EventType.INPUT,this.handleInputEventInternal,!0,this),this.beforeImeKey_=goog.events.listen(this.imeHelper,up.EventType.BEFORE_IME,this.prepareForIme_,!0,this),this.keyHandlerKey_=goog.events.listen(this.docWrapper_,goog.events.EventType.KEYDOWN,this.handleKey,!1,this),this.textInputKey_=goog.events.listen(this.docWrapper_,goog.events.EventType.TEXTINPUT,this.handleTextInputEventInternal,!0,this)};qe.prototype.disableEditing=function(){this.imeHelper.disableEditing(),this.inputHandlerKey_&&(goog.events.unlistenByKey(this.inputHandlerKey_),this.inputHandlerKey_=null),this.beforeImeKey_&&(goog.events.unlistenByKey(this.beforeImeKey_),this.beforeImeKey_=null),this.keyHandlerKey_&&(goog.events.unlistenByKey(this.keyHandlerKey_),this.keyHandlerKey_=null),this.textInputKey_&&(goog.events.unlistenByKey(this.textInputKey_),this.textInputKey_=null)};qe.prototype.executeEnter_=function(){var t=this.actionsManager_.getActionById("Author/Enter");t&&t.actionPerformed(function(){})};qe.prototype.log_=function(t){goog.log.info(this.logger_,t.type+", data: >"+t.getBrowserEvent().data+"<");var o=this.selectionManager_.getSelection();goog.log.info(this.logger_,o.toString())};qe.prototype.shouldPrepareForInsertionServerSide_=function(t){var o=!1;return!t.isEmpty()&&t.start.container==t.end.container&&t.start.container.nodeType===goog.dom.NodeType.TEXT?o=!1:o=!sync.util.isSafeToInsertTextClientSide(t,this.selectionManager_),o};qe.prototype.prepareForIme_=function(){this.problemReporter_.showErrorOnce(this.complexInputWarningKey_,this.getComplexInputWarning_());var t=this.selectionManager_.getSelection();if(this.shouldPrepareForInsertionServerSide_(t)){var o=this.controller_.previewInsertion(t);if(this.imeHelper.insertionSelection=o.oldSelection,o.success){t=this.selectionManager_.getSelection();var i=t.focus,n=p.fromHTMLPosition(i);n.prev(),t=new sync.select.Selection(i,n.toHTMLPosition()),this.selectionManager_.setSelection(t)}}else this.imeHelper.moveSelectionOutOfSentinels(t)};qe.prototype.handleTextInputEventInternal=function(t){var o=t.getBrowserEvent().data;if(goog.log.info(this.logger_,"selected text: "+this.imeHelper.selectedText),o.length!==0){var i=this.imeHelper.insertionSelection;if(this.imeHelper.selectedText!=o)o.charCodeAt(0)===10&&o.length===1?this.executeEnter_():(goog.log.info(this.logger_,"inserting text"),i?(o=this.adjustInsertedText(i,this.imeHelper.selectedText,o),goog.log.info(this.logger_,"saved selection: "+goog.debug.expose(i)),this.controller_.insertTextAtSavedSelection(o,i)):(goog.DEBUG&&goog.log.info(this.logger_,"selection: "+goog.debug.expose(this.selectionManager_.getSelection())),this.controller_.insertText(o,this.selectionManager_.getSelection())));else{goog.log.info(this.logger_,"nothing changed!!!!");var n=this.selectionManager_.getSelection();n=i?i.restore():n;var r=new sync.select.Selection(n.focus);this.controller_.fireSelectionModelChanged(r),this.imeHelper.resetDirtyState()}}this.imeHelper.clearCompositionState(),t.preventDefault()};qe.prototype.adjustInsertedText=function(t,o,i){var n=0;if(!t.isBackwards()&&o){for(var r=Math.max(o.length,i.length),s=0;s<r;s++)if(o[s]!=i[s]){n=s;break}var a=t.start.distance+n;t.start.distance=a,t.anchor.distance=a}return i.substr(n)};qe.prototype.handleInputEventInternal=function(t){if(t.stopPropagation(),this.imeHelper.clearCompositionState(),this.ignoreInputEvent_){this.ignoreInputEvent_=!1;return}this.ignoreInputEvent_=!0,t.target.ownerDocument.execCommand("undo");var o=this.selectionManager_.getSelection(),i=null;if(!o.isEmpty()){goog.log.info(this.logger_,"delete with selection");var n=p.fromHTMLPosition(o.start);n.next();var r=n.toRelativeContentPosition();r.equals(o.end.toRelativeContentPosition())?(goog.log.info(this.logger_,"delete with backwards selection of one char."),i=new sync.select.Selection(o.end,o.end),this.selectionManager_.setSelection(i)):goog.log.warning(this.logger_,"delete with larger selection: "+o)}this.controller_.deleteSelection(goog.events.KeyCodes.BACKSPACE,!1,this.selectionManager_.getSelection())};qe.prototype.getComplexInputWarning_=function(){return goog.dom.createDom("div",{style:"font-weight: normal;"},trDom(msgs.COMPLEX_INPUT_WARNING_,{$P_START:{end:"$P_END",node:goog.dom.createDom("p")},$B_START:{end:"$B_END",node:goog.dom.createDom("b")}}))};qe.prototype.complexInputWarningKey_="ime.complex.input.android";qe.prototype.disposeInternal=function(){this.disableEditing(),this.imeHelper.dispose(),qe.superClass_.disposeInternal.call(this)};var Df=qe;sync.view.AndroidViewport=qe;namespace("sync.api");sync.api.NotificationsManager=function(){};sync.api.NotificationsManager.prototype.showInfo=function(t){};sync.api.NotificationsManager.prototype.showWarning=function(t){};sync.api.NotificationsManager.prototype.showError=function(t){};namespace("sync.util.help");sync.util.help.getDocumentationUrl=function(t){var o=sync.util.help.getDocumentationHomepageUrl(!1);return t&&(o+="&pageId="+t),o};sync.util.help.getDocumentationHomepageUrl=function(t){var o=it.substring(1),i=t?"waCustom":"webauthor";return"https://www.oxygenxml.com/doc/help.php?product="+i+"&versions="+o};sync.util.help.getCustomizationDocumentationUrl=function(t){var o=sync.util.help.getDocumentationHomepageUrl(!0);return t&&(o+="&pageId="+t),o};sync.util.help.Id={RESTART_WEB_AUTHOR:"webauthor-restart",SPELLCHECK:"webauthor-spell-checker",TROUBLESHOOT:"webapp-troubleshooting",REVIEW_PANEL_FILTER:"perform_common_review_actions",ACCESSIBILITY_DOCS:"webauthor-accessibility",NO_VISUAL_DIFF:"no-visual-diff",CONCURRENT_EDITING_DOCS:"webauthor-concurrent-editing",TRUSTED_CODE_LOCATIONS:"webapp-admin-page",DITA_OT_PROJECTS:"wa-dita-ot-projects"};sync.util.help.customizationId={MIGRATE_FRAMEWORKS:"wa-migrate-frameworks"};var $W=sync.util.help;goog.require("goog.debug.HtmlFormatter");goog.require("goog.ui.Popup");goog.require("goog.structs.Set");goog.require("goog.crypt.base64");namespace("sync.view");var U=function(t){var o=goog.dom.createDom("div","warning-toast");goog.dom.appendChild(document.body,o),this.warningPopup=new goog.ui.Popup(o),this.warningPopup.setVisible(!1),this.warningPopup.setAutoHide(!1),this.eventHandler_=new goog.events.EventHandler(this),this.errorDialog_=null,this.a11y_=t,this.buttonClass_="loading-problem-button oxy-button oxy-button--primary"};goog.inherits(U,sync.api.NotificationsManager);U.MessageType={INFO:0,WARNING:1,ERROR:2};U.prototype.dispose=function(){this.warningPopup.dispose(),this.eventHandler_.dispose(),this.errorDialog_&&this.errorDialog_.dispose()};U.prototype.getErrorDialog_=function(t){return this.errorDialog_||(this.errorDialog_=this.createDialog_(tr(msgs.ERROR_),"error-dialog-content")),this.errorDialog_.setTitle(t||tr(msgs.ERROR_)),this.errorDialog_};U.prototype.createDialog_=function(t,o){var i=workspace.createDialog();i.setTitle(t);var n=i.getElement();goog.dom.classlist.add(n,o),i.setContentPreferredSize(500,null);var r=i.getBackgroundElement();return this.eventHandler_.listen(r,goog.events.EventType.CLICK,function(){i.hide()}),i};U.prototype.startListeningForMessages=function(t){goog.events.listen(t,M.EventType.UPDATE_MESSAGES_RECEIVED,goog.bind(this.handleMessages_,this))};U.prototype.handleMessages_=function(t){var o=t.docUpdate&&t.docUpdate.messages||[];this.showMessages(o)};U.prototype.showMessages=function(t){var o=U.MessageType,i=goog.array.filter(t,function(r){return r.type===o.ERROR||r.type===o.WARNING||r.type===o.INFO}),n=null;goog.array.forEach(i,function(r){r.userGenerated&&(!n||r.type>n.type)&&(n=r)}),n&&this.showMessage(n)};U.prototype.showMessage=function(t){var o=U.MessageType;if(t.userGenerated!==!1)if(t.type===o.ERROR){this.hideWarningPopup();var i=document.createDocumentFragment();t.title&&goog.dom.appendChild(i,goog.dom.createDom("div","problem-title",t.title));var n=t.message;(!n||n.length===0)&&(n=tr(msgs.UNKNOWN_ERROR_)),goog.dom.appendChild(i,goog.dom.createDom("div","problem-message",n)),this.showError(i,t.userGenerated)}else{this.clearWarningMessages();var r=this.warningPopup.getElement();goog.dom.classlist.add(r,t.type===o.WARNING?"warning":"info"),goog.dom.removeChildren(r),goog.dom.appendChild(r,this.createNotifDom_(t.message,t.title)),this.warningPopup.setVisible(!0),this.startHideTimerForWarningPopup(),this.speakMessage_(t)}console.log(this.getText_(t))};U.prototype.createNotifDom_=function(t,o){var i=[];return o&&i.push(goog.dom.createDom("div","problem-title",o)),t&&i.push(goog.dom.createDom("div","problem-message",t)),goog.dom.createDom("h3","",i)};U.prototype.showError=function(t,o){if(o!==!1){var i=this.buildDialog_(t);i.setButtonConfiguration([{key:"ok",cancel:!0,caption:tr(msgs.OK_)}]),i.show()}console.log("ERROR: ",t)};U.prototype.showErrorWithProblemReport=function(t){var o=this.buildDialog_(t);o.setButtonConfiguration([{key:"report",default:!0,caption:tr(msgs.REPORT_PROBLEM_FROM_DROPDOWN_)},{key:"ok",cancel:!0,caption:tr(msgs.OK_)}]),o.onSelect(function(i,n){if(i==="report"){var r=zo.getInstance();r.setErrorMessage(t),r.actionPerformed(goog.nullFunction)}o.hide()}),o.show()};U.prototype.buildDialog_=function(t,o,i){var n=this.getErrorDialog_(i),r=n.getElement();return goog.dom.removeChildren(r),typeof t!="string"?r.appendChild(t):r.textContent=t,n};U.prototype.shownErrors=new goog.structs.Set;U.prototype.showErrorOnce=function(t,o){this.shownErrors.contains(t)||(this.showError(o,!0),this.shownErrors.add(t))};U.prototype.showWarning=function(t,o){this.showMessage({type:U.MessageType.WARNING,message:t,userGenerated:o})};U.prototype.showInfo=function(t,o){this.showMessage({type:U.MessageType.INFO,message:t,userGenerated:o})};U.prototype.POPUP_HIDE_DELAY_MS_=4e3;U.prototype.startHideTimerForWarningPopup=function(){this.clearHideTimerForWarningPopup(),this.hideTimer=goog.Timer.callOnce(goog.bind(this.hideWarningPopup,this),this.POPUP_HIDE_DELAY_MS_)};U.prototype.clearHideTimerForWarningPopup=function(){this.hideTimer&&(goog.Timer.clear(this.hideTimer),this.hideTimer=null)};U.prototype.hideWarningPopup=function(){this.hideTimer=null,this.warningPopup.setVisible(!1),this.clearWarningMessages()};U.prototype.getText_=function(t){var o=U.MessageType,i="";return t.type===o.INFO?i=tr(msgs.INFO_):t.type===o.WARNING?i=tr(msgs.WARNING_):t.type===o.ERROR&&(i=tr(msgs.ERROR_)),t.title&&(i+=" "+t.title),t.message&&(i+=" "+t.message),i};U.prototype.speakMessage_=function(t){t.userGenerated!==!1&&this.a11y_&&this.a11y_.speak(this.getText_(t))};U.prototype.clearWarningMessages=function(){var t=this.warningPopup.getElement();goog.dom.removeChildren(t),goog.dom.classlist.removeAll(t,["warning","info"])};U.prototype.setUpLoadingErrorContainer_=function(t){var o=goog.dom.createDom("div",{style:"max-width: 850px; min-width: 100px;"}),i=goog.dom.createDom("div","loading-problem-container",o);return goog.dom.removeChildren(t),goog.dom.appendChild(t,i),o};U.prototype.createHeader_=function(t,o){return goog.dom.createDom("div",{style:"display: flex; align-items: center; margin-bottom: 50px;"},goog.dom.createDom("div",o?"warning-triangle-image":"error-triangle-image"),goog.dom.createDom("div","loading-problem-title",t))};U.prototype.reportFormatNotSupported=function(t,o){var i=this.setUpLoadingErrorContainer_(t);goog.dom.appendChild(i,this.createHeader_(tr(msgs.DOCUMENT_COULD_NOT_BE_LOADED_))),this.addLoadingProblemDetails_(i,tr(msgs.FILE_NOT_SUPPORTED_FORMAT_));var n=goog.dom.createDom("button",this.buttonClass_+" oxy-button--with-icon error-download-icon",tr(msgs.DOWNLOAD_FILE_));goog.dom.appendChild(i,n),goog.events.listen(n,goog.events.EventType.CLICK,function(){o.actionPerformed(goog.nullFunction)})};U.prototype.reportFileNotFound=function(t,o){var i=this.setUpLoadingErrorContainer_(t);goog.dom.appendChild(i,this.createHeader_(o,!0))};U.prototype.reportRoomNotFound=function(t,o){var i=this.setUpLoadingErrorContainer_(t);o+=" "+tr(msgs.Try_open_outside_room_),goog.dom.appendChild(i,this.createHeader_(o,!0)),this.addOpenOutsideRoomButton_(i)};U.prototype.addOpenOutsideRoomButton_=function(t){var o=new URL(window.location.href);o.searchParams.delete("roomId"),o.searchParams.delete("roomType");var i=goog.dom.createDom,n=i("button",{className:this.buttonClass_},tr(msgs.FILE_OPEN_));goog.events.listen(n,goog.events.EventType.CLICK,xs.openOutsideRoom),goog.dom.appendChild(t,i("div","loading-error-troubleshooting",n))};U.prototype.reportUnknownLoadingProblem=function(t,o,i){var n=this.setUpLoadingErrorContainer_(t),r=tr(msgs.DOCUMENT_COULD_NOT_BE_LOADED_);goog.dom.appendChild(n,this.createHeader_(r)),o&&(r+=" - "+o,this.addLoadingProblemDetails_(n,o)),i&&this.addTroubleShootingSection_(n,r,i)};U.prototype.reportLicensingProblem=function(t,o){var i=this.setUpLoadingErrorContainer_(t),n=tr(msgs.DOCUMENT_COULD_NOT_BE_LOADED_);goog.dom.appendChild(i,this.createHeader_(n)),o&&this.addLoadingProblemDetails_(i,o),goog.dom.appendChild(i,goog.dom.createDom("div","loading-error-troubleshooting vertical-align-children",this.buildTroubleshootButton_()))};U.prototype.addLoadingProblemDetails_=function(t,o){var i=goog.dom.createDom;goog.dom.appendChild(t,i("div",{style:"margin-bottom: 25px;"},i("div",null,i("b",null,tr(msgs.DETAILS_)+":")),i("div","loading-error-details",o)))};U.prototype.addTroubleShootingSection_=function(t,o,i){i&&console.log(i,goog.debug.HtmlFormatter.exposeException(i),i.stack),goog.dom.appendChild(t,goog.dom.createDom("div","loading-error-troubleshooting vertical-align-children",this.buildReportProblemButton_(o),this.buildTroubleshootButton_()))};U.prototype.buildReportProblemButton_=function(t){let o=goog.dom.createDom("button",this.buttonClass_,tr(msgs.REPORT_PROBLEM_UPPERCASE_));return o.addEventListener(goog.events.EventType.CLICK,function(){zo.getInstance().setErrorMessage(t+": "+sync.util.error.serializeException(e)).actionPerformed(goog.nullFunction)}),o};U.prototype.buildTroubleshootButton_=function(){return goog.dom.createDom("a",{className:this.buttonClass_,href:sync.util.help.getDocumentationUrl(sync.util.help.Id.TROUBLESHOOT),rel:"external",target:"blank"},tr(msgs.TROUBLESHOOTING_))};U.prototype.reportCookiesNotEnabled=function(t){var o=this.setUpLoadingErrorContainer_(t);goog.dom.appendChild(o,this.createHeader_(tr(msgs.DOCUMENT_COULD_NOT_BE_LOADED_))),this.addLoadingProblemDetails_(o,"Cookies are disabled. Please enable cookies!")};U.prototype.reportSameSiteNoneNeedsHttps=function(t){var o=this.setUpLoadingErrorContainer_(t);goog.dom.appendChild(o,this.createHeader_(tr(msgs.DOCUMENT_COULD_NOT_BE_LOADED_)));var i="https://www.oxygenxml.com/doc/help.php?product=waCustom&pageId=sameSiteNone",n=goog.dom.createDom("span","","When the force.cookies.samesite.none option is `true`, Oxygen XML Web Author needs to be served over HTTPS. Visit this page for more details: ",goog.dom.createDom("a",{href:i,target:"_blank"},i));this.addLoadingProblemDetails_(o,n)};U.prototype.reportSameSiteNoneNeeded=function(t){var o=this.setUpLoadingErrorContainer_(t);goog.dom.appendChild(o,this.createHeader_(tr(msgs.DOCUMENT_COULD_NOT_BE_LOADED_)));var i="https://www.oxygenxml.com/doc/help.php?product=waCustom&pageId=sameSiteNone",n=goog.dom.createDom("span","","Cookies cannot be set because Oxygen XML Web Author is served in a cross-domain iframe. Visit this page for more details: ",goog.dom.createDom("a",{href:i,target:"_blank"},i));this.addLoadingProblemDetails_(o,n)};U.prototype.dispose=function(){this.errorDialog_&&this.errorDialog_.dispose()};var Nf=U;sync.view.ProblemReporter=U;goog.require("goog.events.EventTarget");namespace("sync.view");var Br=function(t){goog.events.EventTarget.call(this),this.inputHandlerKey_=goog.events.listen(t,goog.events.EventType.INPUT,this.handleInputEvent_.bind(this),!0,this),this.keyDownHandlerKey_=goog.events.listen(t,goog.events.EventType.KEYDOWN,this.handleAltNumpadState_.bind(this),!1,this),this.keyUpHandlerKey_=goog.events.listen(t,goog.events.EventType.KEYUP,this.handleAltNumpadState_.bind(this),!1,this)};goog.inherits(Br,goog.events.EventTarget);Br.prototype.disposeInternal=function(){goog.events.unlistenByKey(this.inputHandlerKey_),goog.events.unlistenByKey(this.keyDownHandlerKey_),goog.events.unlistenByKey(this.keyUpHandlerKey_)};Br.prototype.handleInputEvent_=function(t){var o=It.getBrowserSelectionRange();if(this.selectionRangeIsEmpty_(o)&&this.altNumpadState_){var i=o.getFocusNode().textContent,n=o.getFocusOffset(),r=new goog.events.BrowserEvent(t);r.text=i.charAt(n-1),this.validateSyntheticInputKeyEvent_(this.textBeforeAltNumpad_,i,n,r.text)&&(t.stopPropagation(),o.getFocusNode().textContent=this.textBeforeAltNumpad_,this.dispatchEvent(r))}};Br.prototype.selectionRangeIsEmpty_=function(t){return t.getAnchorNode()===t.getFocusNode()&&t.getAnchorOffset()===t.getFocusOffset()};Br.prototype.validateSyntheticInputKeyEvent_=function(t,o,i,n){var r;if(t===o||t.length!==o.length-1)r=!1;else{var s=t.substring(0,i-1)+n+t.substring(i-1,t.length);r=s===o}return r};Br.prototype.handleAltNumpadState_=function(t){var o=It.getBrowserSelectionRange();if(o&&this.selectionRangeIsEmpty_(o)){var i=t.getBrowserEvent();i.altKey&&!i.shiftKey&&!i.ctrlKey?(this.textBeforeAltNumpad_=o.getFocusNode().textContent,this.altNumpadState_=!0):setTimeout(function(){this.altNumpadState_=!1,this.textBeforeAltNumpad_=null}.bind(this))}};var Mf=Br;sync.view.AltCodesHandler=Br;goog.require("goog.events.EventTarget");goog.require("goog.userAgent");namespace("sync.view");var gi=function(){goog.events.EventTarget.call(this)};goog.inherits(gi,goog.events.EventTarget);gi.EventType={KEY:"key"};gi.prototype.attach=function(t,o){this.keyDownHandlerKey_=goog.events.listen(t,goog.events.EventType.KEYDOWN,this.handleKeyDown_,o,this),this.keyPressHandlerKey_=goog.events.listen(t,goog.events.EventType.KEYPRESS,this.handleKeyPress_,o,this),goog.userAgent.EDGE&&(this.altCodesHandler_=new Mf(t),this.altCodesHandler_.listen(goog.events.EventType.INPUT,this.handleAltCode_,!0,this))};gi.prototype.disposeInternal=function(){goog.events.unlistenByKey(this.keyDownHandlerKey_),goog.events.unlistenByKey(this.keyPressHandlerKey_),this.altCodesHandler_&&this.altCodesHandler_.dispose()};gi.prototype.handleAltCode_=function(t){var o=new On(t.getBrowserEvent(),gi.EventType.KEY);o.key=t.text,this.dispatchEvent(o)};gi.prototype.handleKeyPress_=function(t){var o=t.getBrowserEvent(),i=new On(o,gi.EventType.KEY);i.isKeyIdentified()&&this.dispatchEvent(i)};gi.prototype.handleKeyDown_=function(t){var o=t.getBrowserEvent(),i=new On(o,gi.EventType.KEY),n=!1;goog.userAgent.EDGE_OR_IE&&t.ctrlKey&&t.altKey&&(n=!0),!i.isModifier()&&i.isKeyIdentified()&&!n&&this.dispatchEvent(i)};var mp=gi;sync.view.KeyHandler=gi;goog.require("goog.dom");goog.require("goog.log");namespace("sync.actions");var Ui=function(t,o,i,n,r){no.call(this,null,t,o,r),this.text=i,this.document=sync.util.getDocDomHelper().getDocument(),this.readOnlyStatus_=n,this.selectionManager_=r};goog.inherits(Ui,no);Ui.prototype.actionPerformed=function(t){var o={id:this.controller.docId,text:this.text};this.doesConcurrentSync()&&(o.sync=!0),this.getSavedSelection().extend(o),sync.rest.callAsync("RESTDocumentControllers.documentController.insertText",o).then(goog.bind(this.applyServerUpdate,this)).thenCatch(goog.bind(this.actionFailedServerSide,this)).then(t||goog.nullFunction)};Ui.prototype.createClientSideUpdates=function(){var t=this.savedSelection.focus,o=t.clone();o.distance+=this.text.length;var i=new sync.select.SavedSelection(o),n={selection:i.toJson(),nodesIds:[],patches:[{type:"insert",pos:t.toJson(),text:this.text}]},r={selection:this.savedSelection.toJson(),nodesIds:[],patches:[{type:"delete",pos:this.savedSelection.start.toJson(),length:this.text.length}]};return{direct:new Ne(n),rollback:new Ne(r)}};Ui.prototype.shouldExecuteClientSide=function(t){return this.readOnlyStatus_.isReadOnly()?!1:sync.util.isSafeToInsertTextClientSide(t,this.selectionManager_)};Ui.prototype.isClientSideExecutionCorrect=function(t){return t.affectedTextNodeStillPresentInDoc(this.controller.getDocument())?Ui.superClass_.isClientSideExecutionCorrect.call(this,t):!1};Ui.prototype.isEnabled=function(){return!0};Ui.prototype.mergeIn=function(t){var o=!1;return t instanceof Ui&&(t.text+=this.text,o=!0),o};var js=Ui;sync.actions.InsertText=Ui;namespace("sync.actions");var $o=function(t,o,i,n,r,s,a){no.call(this,null,t,o,s),this.wordLevel=i,this.keyCode=n,this.count=1,this.tagsModeOverride_=a,this.readOnlyStatus_=r};goog.inherits($o,no);$o.prototype.actionPerformed=function(t){var o=this.tagsModeOverride_||k.getInstance().getOption(S.SENTINELS_DISPLAY_MODE),i={id:this.controller.docId,backspace:this.keyCode===goog.events.KeyCodes.BACKSPACE,count:this.count,wordLevel:this.wordLevel,tagsDisplayMode:o};this.doesConcurrentSync()&&(i.sync=!0),this.getSavedSelection().extend(i),sync.rest.callAsync("RESTDocumentControllers.documentController.removeText",i).then(goog.bind(this.applyServerUpdate,this)).thenCatch(goog.bind(this.actionFailedServerSide,this)).then(t||goog.nullFunction)};$o.prototype.createClientSideUpdates=function(){var t=p.getTextNodeAtPositionIfExists(this.savedSelection.start),o=t.textContent,{start:i,end:n}=this.determineDeletedInterval_(o,this.savedSelection.start.distance,this.savedSelection.end.distance),r=n-i,s=this.savedSelection.start.clone();s.distance=i;var a=new sync.select.SavedSelection(s),l={selection:a.toJson(),nodesIds:[],patches:[{type:"delete",pos:s.toJson(),length:r}]},c={selection:this.savedSelection.toJson(),nodesIds:[],patches:[{type:"un-delete",pos:s.toJson(),html:sync.util.getInnerHTML(t),length:r}]};return{direct:new Ne(l),rollback:new Ne(c)}};$o.prototype.determineDeletedInterval_=function(t,o,i){var n=this.count;i!==o&&(n-=1);var r=o,s=i;return this.keyCode===goog.events.KeyCodes.BACKSPACE?r=this.moveLeft_(t,r,n):s=this.moveRight_(t,s,n),{start:r,end:s}};$o.prototype.isClientSideExecutionCorrect=function(t){return t.affectedTextNodeStillPresentInDoc(this.controller.getDocument())?$o.superClass_.isClientSideExecutionCorrect.call(this,t):!1};$o.prototype.shouldExecuteClientSide=function(t){if(this.readOnlyStatus_.isReadOnly()||this.wordLevel)return!1;var o=t.start.toRelativeContentPosition(),i=t.end.toRelativeContentPosition();if(o.nodeId!==i.nodeId||o.sentinelType!==i.sentinelType)return!1;var n=this.count;o.distance!==i.distance&&(n=this.count-1);var r=p.getTextNodeAtPositionIfExists(o);if(!r)return!1;if(this.keyCode===goog.events.KeyCodes.BACKSPACE){var s=r.textContent.substring(0,o.distance);if(ge.countCodePoints(s)<n)return!1}else{var a=r.textContent.substring(i.distance,r.textContent.length);if(ge.countCodePoints(a)<n)return!1}return!0};$o.prototype.mergeIn=function(t){var o=!1;if(t instanceof js){if(this.keyCode===goog.events.KeyCodes.BACKSPACE&&!this.wordLevel){var i=t.text;if(i.length>this.count){o=!0;var n=this.moveLeft_(i,i.length,this.count);t.text=i.substring(0,n)}}}else if(t instanceof $o){var r=t;this.wordLevel==r.wordLevel&&this.keyCode===r.keyCode&&(o=!0,r.count+=this.count)}return o};$o.prototype.moveLeft_=function(t,o,i){for(var n=0;n<i;n++)o=ge.prevIndex(t,o);return o};$o.prototype.moveRight_=function(t,o,i){for(var n=0;n<i;n++)o=ge.nextIndex(t,o);return o};var xf=$o;sync.actions.DeleteText=$o;namespace("sync.actions");var Hr=function(t,o,i){sync.actions.AbstractAction.call(this,null),this.dir_=t,this.select_=o,this.selectionManager_=i};goog.inherits(Hr,sync.actions.AbstractAction);Hr.prototype.getDirection=function(){return this.dir_};Hr.prototype.isSelect=function(){return this.select_};Hr.prototype.isEnabled=function(){var t=!0;if(this.select_&&goog.userAgent.EDGE_OR_IE){var o=this.selectionManager_.getSelection();o instanceof z?t=!0:t=Hr.differentCellsAreSelected_()}return t};Hr.differentCellsAreSelected_=function(){var t=!1,o=this.selectionManager_.getSelection();if(!o.isEmpty()){var i=o.getNodeAtSelectionStart(),n=i?h.getInstance().getXmlNodeById(i.id):null,r=n?sync.util.TableUtil.getSurroundingCellElement(n):null;if(r){var s=o.getNodeAtSelectionEnd(),a=s?h.getInstance().getXmlNodeById(s.id):null,l=a?sync.util.TableUtil.getSurroundingCellElement(a):null;t=l&&r!==l}}return t};var ja=Hr;sync.actions.MoveCaretWithKeys=Hr;goog.require("goog.events");namespace("sync.actions");var hi=function(t,o,i,n){ja.call(this,t,o,n),this.viewportScroller_=i};goog.inherits(hi,ja);hi.prototype.actionPerformed=function(t){var o=this.selectionManager_.getSelection();try{var i=this.moveSelection_(o);this.viewportScroller_.scrollSelectionIntoView(i)}finally{t&&t()}};hi.prototype.moveSelection_=function(t){for(var o=t,i=t,n=0;i.equals(o);){try{t=this.computeNewSelection(t),this.selectionManager_.setSelection(t),i=this.selectionManager_.getSelection()}catch{break}if(n++,n>1e3){console.warn("Avoided an infinite loop in horizontal caret movement");break}}return t};hi.prototype.computeNewSelection=function(t){var o=null,i=null;if(!this.select_&&!t.isEmpty())i=this.computeNewEmptySelFromFullSel_(t);else if(o=this.computeNewFocus_(t.focus),!this.select_)i=new sync.select.Selection(o);else if(i=this.computeNewTableSelection_(t),!i){var n=t.anchor,r=!1;t.isEmpty()?r=this.dir_===goog.events.KeyCodes.LEFT:r=t.isBackwards(),r?i=new sync.select.Selection(o,n,n,o):i=new sync.select.Selection(n,o,n,o)}return i};hi.prototype.computeNewTableSelection_=function(t){var o=null;if(t instanceof z){var i=t,n=i.getAnchorCellId(),r=sync.util.TableUtil.getParentTableElement(n);if(r){var s=new ps(r),a=this.computeNewTargetCell_(i.getTargetCellId(),s);a&&(o=new z(n,a))}}return o};hi.prototype.computeNewTargetCell_=function(t,o){var i=null,n=o.getStartIndex(t);if(n)if(this.dir_===goog.events.KeyCodes.RIGHT)i=o.getSiblingCell(t,!0),i||(i=o.getCell(n.row+1,0));else if(this.dir_===goog.events.KeyCodes.LEFT){if(i=o.getSiblingCell(t,!1),!i){var r=n.row-1,s=o.getRowCellsCount(r);i=o.getCell(r,s-1)}}else this.dir_===goog.events.KeyCodes.UP?i=o.getCell(n.row-1,n.column):this.dir_===goog.events.KeyCodes.DOWN&&(i=o.getCell(n.row+1,n.column));return i};hi.prototype.computeNewEmptySelFromFullSel_=function(t){var o;return this.dir_===goog.events.KeyCodes.LEFT?(o=new ce(t.start),o.prev(),o.next()):(o=new ce(t.end),o.next(),o.prev()),new sync.select.Selection(o.toHTMLPosition())};hi.prototype.computeNewFocus_=function(t){var o=new ce(t);return this.dir_===goog.events.KeyCodes.LEFT?o.prev():o.next(),o.toHTMLPosition()};hi.prototype.isEnabled=function(){var t=hi.superClass_.isEnabled.call(this);if(t&&(this.dir_===goog.events.KeyCodes.UP||this.dir_===goog.events.KeyCodes.DOWN)){var o=this.selectionManager_.getSelection();return o instanceof z}return t};var Rf=hi;sync.actions.MoveCaret=hi;goog.require("goog.events.KeyCodes");namespace("sync.actions");var qn=function(t,o,i,n){ja.call(this,t,o,n),this.viewportScroller_=i};goog.inherits(qn,ja);qn.prototype.isEnabled=function(){if(!qn.superClass_.isEnabled.call(this))return!1;var t=sync.select.getSelection(),o=new ce(t.focus);try{this.dir_===goog.events.KeyCodes.RIGHT?o.next():o.prev()}catch{return!0}if(o.getContentInformation().tagElementId)return!0;var i=ge.getCharType(o.node.textContent,o.offset);return i!==ge.CharType.CJK};qn.prototype.actionPerformed=function(t){try{var o=this.selectionManager_.getSelection(),i=this.computeNewSelection(o);this.selectionManager_.setSelection(i),this.viewportScroller_.scrollSelectionIntoView(i)}catch{}finally{t&&t()}};qn.prototype.computeNewSelection=function(t){var o,i;if(this.dir_===goog.events.KeyCodes.RIGHT?i=this.jumpRight(t.focus):i=this.jumpLeft(t.focus),this.select_){var n=p.comparePositions(t.anchor.container,t.anchor.offset,i.container,i.offset)>0;n?o=new sync.select.Selection(i,t.anchor,t.anchor,i):o=new sync.select.Selection(t.anchor,i,t.anchor,i)}else o=new sync.select.Selection(i);return o};qn.prototype.jumpLeft=function(t){var o=new ce(t);o.prev();for(var i=o.getCharType(),n,r;!r;)n=i,o.prev(),i=o.getCharType(),i!==n&&n!==ge.CharType.WHITESPACE&&(o.next(),r=o.toHTMLPosition());return r};qn.prototype.jumpRight=function(t){for(var o=new ce(t),i,n=o.getCharType(),r;!r;)i=n,o.next(),n=o.getCharType(),i!==n&&n!==ge.CharType.WHITESPACE&&(r=o.toHTMLPosition());return r};var Of=qn;sync.actions.JumpCaret=qn;goog.require("goog.events");goog.require("goog.events.EventTarget");goog.require("goog.events.ImeHandler");namespace("sync.view");var Bi=function(t){goog.events.EventTarget.call(this),this.inputListenerKey=goog.events.listen(t,goog.events.EventType.INPUT,this.handleInput_,!1,this),this.imeHandler_=new goog.events.ImeHandler(t),this.registerDisposable(this.imeHandler_),this.reportPending_=!1};goog.inherits(Bi,goog.events.EventTarget);Bi.EventType={DOCUMENT_CORRUPTED:"document_corrupted"};Bi.DocumentCorruptedEvent=function(t){this.type=Bi.EventType.DOCUMENT_CORRUPTED,this.msg=t};Bi.prototype.handleInput_=function(t){let o=t.getBrowserEvent();var i=this.imeHandler_.isImeMode()||o.isComposing||o.inputType==="insertCompositionText";i&&!goog.userAgent.product.CHROME?this.documentCorrupted_(tr(msgs.IME_NOT_SUPPORTED_)):t.target.tagName!==String(goog.dom.TagName.VIDEO)&&t.target.tagName!==String(goog.dom.TagName.AUDIO)&&this.documentCorrupted_()};Bi.prototype.documentCorrupted_=function(t){this.reportPending_||(this.reportPending_=!0,setTimeout(goog.bind(function(){this.dispatchEvent(new Bi.DocumentCorruptedEvent(t)),this.reportPending_=!1},this),0))};Bi.prototype.disposeInternal=function(){goog.events.unlistenByKey(this.inputListenerKey),Bi.superClass_.disposeInternal.call(this)};var Xg=Bi;sync.view.CorruptedDomDetector=Bi;namespace("sync.view");var Vs=class{constructor(o,i,n){this.snapshotSavedSelection_=o,this.snapshotNodeId_=i,this.snapshotNodeHtml_=n}static takeSnapshot(o){var i=o.getSelection(),n=Vs.getAffectedNode_(i);return new Vs(i.save(),sync.model.XmlModel.getIdOfXmlNode(n),sync.util.getOuterHTML(n))}static getAffectedNode_(o){var i=o.getNodeAtSelectionStart(!1),n=o.getNodeAtSelectionEnd(!1);return sync.model.XmlDom.getContainingXmlNode(goog.dom.findCommonAncestor(i.getHtmlNode(),n.getHtmlNode()))}restoreClientDom(o,i){var n=o.getXmlNodeById(this.snapshotNodeId_);if(n&&sync.util.getOuterHTML(n)!==this.snapshotNodeHtml_){var r=new Ne;r.nodesIds=[this.snapshotNodeId_],r.fragments=[this.snapshotNodeHtml_],r.selection=this.snapshotSavedSelection_.toJson(),i.applyUpdate_(r,!0)}}};namespace("sync.view");var fp=class extends goog.Disposable{constructor(o,i,n,r,s,a,l){super();this.docWrapper_=o,this.controller_=i,this.selectionManager_=n,this.readOnlyStatus_=r,this.domUpdateSilencer_=s,this.scheduler_=a,this.notificationsManager_=l,this.xmlModel_=i.getXmlModel()}enableEditing(){this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_),this.imeHandler_=new goog.events.ImeHandler(this.docWrapper_),this.registerDisposable(this.imeHandler_),this.eventHandler_.listen(this.docWrapper_,goog.events.EventType.COMPOSITIONSTART,()=>this.checkSelectionAndPrepareForIme_(),!0).listen(this.docWrapper_,goog.events.EventType.COMPOSITIONEND,()=>this.restoreDomAndUnblockDomUpdates(),!0).listen(this.docWrapper_,goog.events.EventType.INPUT,o=>this.isInImeMode()&&o.stopPropagation(),!0)}disableEditing(){this.imeHandler_&&(this.imeHandler_.dispose(),this.imeHandler_=null),this.eventHandler_&&(this.eventHandler_.dispose(),this.eventHandler_=null)}isInImeMode(){return this.imeHandler_&&this.imeHandler_.isImeMode()}restoreDomAndUnblockDomUpdates(){this.clientDomSnapshot_&&(this.clientDomSnapshot_.restoreClientDom(this.xmlModel_,this.controller_),this.clientDomSnapshot_=null,this.domUpdateSilencer_.setUpdatesSilenced(!1))}isKeyEventPriorImeStart(o){return o.keyCode===goog.events.KeyCodes.WIN_IME||o.getBrowserEvent().isComposing}checkSelectionAndPrepareForIme_(){var o=this.selectionManager_.getSelection();this.readOnlyStatus_.isReadOnly()?this.blockImeStart_(tr(msgs.CANNOT_WRITE_DOC_RO_)):this.isSelectionOverReadOnlyContent_(o)?this.blockImeStart_(tr(msgs.CANNOT_WRITE_RO_REGION_)):this.scheduler_.isOngoingActionRespectingDomUpdateSilencer()?this.isSelectionOverSameTextNode_(o)?(this.domUpdateSilencer_.setUpdatesSilenced(!0),this.clientDomSnapshot_=Vs.takeSnapshot(this.selectionManager_),o.isEmpty()&&this.insertTextAndSelectIt_(o.focus.toRelativeContentPosition())):this.blockImeStart_(tr(msgs.CANNOT_START_IME_INCOMPATIBLE_SELECTION_)):this.blockImeStart_(tr(msgs.CANNOT_START_IME_INCOMPATIBLE_OUTGOING_OPERATION_))}blockImeStart_(o){this.notificationsManager_.showWarning(o),document.activeElement.blur()}insertTextAndSelectIt_(o){this.controller_.insertTextAtPos_(o,"."),this.selectionManager_.setSelection(new sync.select.Selection(o.toHTMLPosition(),new _o(o.nodeId,o.sentinelType,o.distance+1).toHTMLPosition()))}isSelectionOverSameTextNode_(o){var i;if(o.isEmpty())i=!0;else{var n=o.getNodeAtSelectionStart(!0),r=o.getNodeAtSelectionEnd(!0);i=n.getType()===goog.dom.NodeType.TEXT&&r.getType()===goog.dom.NodeType.TEXT&&n.isSameNode(r)}return i}isSelectionOverReadOnlyContent_(o){var i;if(o.isEmpty()){var n=o.getNodeAtSelection(!1);i=sync.model.XmlDom.isReadOnlyElement(n.getHtmlNode())}else{var r=o.getNodeAtSelectionStart(!1),s=o.getNodeAtSelectionEnd(!1);i=sync.model.XmlDom.isReadOnlyElement(r.getHtmlNode())||sync.model.XmlDom.isReadOnlyElement(s.getHtmlNode())}return i}};namespace("sync.view");var yp=class extends goog.events.EventTarget{constructor(o){super();this.docWrapper_=o;var i=new goog.events.EventHandler(this);this.registerDisposable(i),i.listen(o,goog.events.EventType.COMPOSITIONSTART,n=>{this.textInputFired_=!1,this.updateData_(n)},!0).listen(o,goog.events.EventType.COMPOSITIONUPDATE,n=>{this.updateData_(n)},!0).listen(o,goog.events.EventType.COMPOSITIONEND,()=>{this.textInputFired_||this.fireTextInput_(this.data_)},!0).listen(o,goog.events.EventType.TEXTINPUT,()=>{this.textInputFired_=!0},!0)}updateData_(o){var i=o.getBrowserEvent().data;i&&(this.data_=i)}fireTextInput_(o){var i=new goog.events.Event(goog.events.EventType.TEXTINPUT);i.data=o,i.target=this.docWrapper_,this.dispatchEvent(new goog.events.BrowserEvent(i,this.docWrapper_))}};namespace("sync.actions");var _p=class extends js{constructor(o,i,n,r,s){super(o,i,n,r,s)}shouldExecuteClientSide(o){return!0}};goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.EventType");namespace("sync.view");var le=function(t){Ha.call(this),this.docWrapper_=t.docWrapper,this.docKh_=null,this.controller_=t.controller,this.concurrentEditingManager_=t.concurrentEditingManager,this.scheduler_=t.scheduler,this.actionsManager_=t.actionsManager,this.layoutManager_=t.layoutManager,this.safeShortcuts_=t.safeShortcuts,this.readOnlyStatus_=t.readOnlyStatus,this.viewportScroller_=t.viewportScroller,this.selectionManager_=t.selectionManager,this.tagsModeOverride_=t.tagsModeOverride,this.imeManager_=new fp(this.docWrapper_,this.controller_,this.selectionManager_,this.readOnlyStatus_,t.domUpdateSilencer,this.scheduler_,t.notificationsManager),this.registerDisposable(this.imeManager_),this.eventHandler_=new goog.events.EventHandler(this);var o=new Ds("modal-popup",tr(msgs.SYNCHRONIZING_WITH_SERVER_),t.workspaceState);this.registerDisposable(o),this.eventHandler_.listen(this.scheduler_,Qe.EventType.STARTED_DROPPING,()=>o.block(),!0),this.eventHandler_.listen(this.scheduler_,Qe.EventType.STOPPED_DROPPING,()=>o.unblock(),!0),this.eventHandler_.listen(this.docWrapper_,goog.events.EventType.DROP,this.preventDefaultInputMethod_,!1),this.exm31242Fix_(),this.eventHandler_.listen(document.body,goog.events.EventType.KEYDOWN,this.transferShortcutToEditor_,!1)};goog.inherits(le,Ha);le.prototype.preventDefaultInputMethod_=function(t){t.preventDefault(),t.stopPropagation()};le.outerActions=[goog.userAgent.MAC?"M1 Shift Z":"Ctrl Y","M1 Z","M1 S","M1 F","F1","F7"];le.prototype.handleKeyEvent_=function(t){var o=t.getBrowserEvent();if(sync.select.isSelectionChanging(o)&&!this.isHandledSelectionChangingKey_(o))this.scheduler_.hasNonUpdateActions()&&t.preventDefault();else{var i=this.getActionToExecute(t);if(!this.isPrecedingTextInputEvent(t,i))if(i){var n=this.scheduler_.schedule(i,this.getEventType(t));this.triggersSyncCaptureAction_(t,i)||t.preventDefault()}else this.shouldDelegateToBrowser_(t.getBrowserEvent())||t.preventDefault()}};le.prototype.isPrecedingTextInputEvent=function(t,o){var i;return this.useTextInput_&&this.imeManager_.isKeyEventPriorImeStart(t)||this.useTextInput_&&o instanceof js&&t.keyCode===goog.events.KeyCodes.SPACE?i=!0:i=!1,i};le.prototype.transferShortcutToEditor_=function(t){if(this.shouldTransferToEditor_(t)){var o=this.decodeKeystroke_(t);t.preventDefault();var i=new On(t.getBrowserEvent(),mp.EventType.KEY),n=this.getEventType(i);this.scheduler_.schedule(o,n)}};le.prototype.shouldTransferToEditor_=function(t){var o=document.activeElement,i=!1,n=this.decodeKeystroke_(t);return n&&le.outerActions.indexOf(n.getShortcut())!==-1&&!goog.dom.contains(this.docWrapper_,o)&&(n.getShortcut()==="M1 S"?i=!0:n.getShortcut()==="M1 F"?this.layoutManager_&&!goog.dom.contains(this.layoutManager_.getDialogContainer(),o)&&(i=!0):goog.dom.contains(o,this.docWrapper_)?i=!0:i=this.layoutManager_&&this.layoutManager_.getFocusableLayoutPanes().indexOf(o.id)!==-1),i};le.prototype.handleTextInput=function(t){var o=t.target.ownerDocument.querySelector(".oxy-document");if(goog.dom.contains(t.target,o)||goog.dom.contains(o,t.target)){var i=t.getBrowserEvent().data;if(i){this.imeManager_.isInImeMode()&&this.imeManager_.restoreDomAndUnblockDomUpdates();var n=new _p(this.controller_,this.concurrentEditingManager_,i,this.readOnlyStatus_,this.selectionManager_);let r=!0;this.scheduler_.schedule(n,Qe.ActionType.ASYNC,r)}t.preventDefault()}};le.prototype.useTextInput_=!goog.userAgent.GECKO&&!goog.userAgent.OPERA&&!goog.userAgent.EDGE_OR_IE;le.prototype.getActionToExecute=function(t){var o=null,i=t.getBrowserEvent();if(sync.select.isSelectionChanging(i))this.isHandledSelectionChangingKey_(i)&&(o=this.getSelectionChangingAction_(i));else{var n=t.getKeyCode(),r=goog.events.KeyCodes;if(n===r.DELETE||n===r.BACKSPACE?o=new xf(this.controller_,this.concurrentEditingManager_,t.ctrlKey,n,this.readOnlyStatus_,this.selectionManager_,this.tagsModeOverride_):n===r.ENTER||n===r.TAB?o=this.decodeKeystroke_(i):this.isActionShortcut_(t)&&(o=this.decodeKeystroke_(i)),!o&&t.isPrintable()){var s=t.key;o=new js(this.controller_,this.concurrentEditingManager_,s,this.readOnlyStatus_,this.selectionManager_)}}return o&&!o.isEnabled()&&(o=null),o&&_.willInvokeTheCallback(o)};le.prototype.isActionShortcut_=function(t){return t.ctrlKey||t.altKey||t.metaKey||t.getKeyCode()>=goog.events.KeyCodes.F1&&t.getKeyCode()<goog.events.KeyCodes.F11||t.getKeyCode()>=goog.events.KeyCodes.NUM_ZERO&&t.getKeyCode()<=goog.events.KeyCodes.NUM_NINE};le.prototype.isWordNavigation_=function(t){var o=!1;return goog.userAgent.MAC?o=t.altKey:o=t.ctrlKey,o=o&&(t.keyCode===goog.events.KeyCodes.LEFT||t.keyCode===goog.events.KeyCodes.RIGHT),o};le.prototype.getSelectionChangingAction_=function(t){var o=null;return this.isWordNavigation_(t)?o=new Of(t.keyCode,t.shiftKey,this.viewportScroller_,this.selectionManager_):(t.keyCode===goog.events.KeyCodes.LEFT||t.keyCode===goog.events.KeyCodes.RIGHT||t.keyCode===goog.events.KeyCodes.UP||t.keyCode===goog.events.KeyCodes.DOWN)&&(o=new Rf(t.keyCode,t.shiftKey,this.viewportScroller_,this.selectionManager_)),o};le.prototype.isHandledSelectionChangingKey_=function(t){var o=this.getSelectionChangingAction_(t),i=o&&o.isEnabled();return t.metaKey&&(i=!1),i};le.prototype.shouldDelegateToBrowser_=function(t){var o=!1;return sync.select.isSelectionChanging(t)?o=!this.isHandledSelectionChangingKey_(t):o=this.safeShortcuts_.shouldDelegateToBrowser(t),o};le.prototype.getEventType=function(t){var o=t.getBrowserEvent(),i=Qe.ActionType,n;return sync.select.isSelectionChanging(o)?this.isHandledSelectionChangingKey_(o)&&(n=i.ASYNC):this.triggersSyncCaptureAction_(t)||le.asyncKeyCodes.indexOf(t.getKeyCode())!==-1||t.isModifier()?n=i.ASYNC:t.ctrlKey||t.metaKey?n=i.HANDLES_BLOCKING:t.isPrintable()?n=i.ASYNC:n=i.HANDLES_BLOCKING,n};le.prototype.triggersSyncCaptureAction_=function(t){return(goog.userAgent.MAC&&t.metaKey||t.ctrlKey)&&le.syncCaptureKeys.indexOf(t.getKeyCode())!==-1};le.syncCaptureKeys=[goog.events.KeyCodes.V,goog.events.KeyCodes.C,goog.events.KeyCodes.X];le.asyncKeyCodes=[goog.events.KeyCodes.DELETE,goog.events.KeyCodes.BACKSPACE,goog.events.KeyCodes.TAB];le.prototype.decodeKeystroke_=function(t){var o=new J;return o.fromKeyEvent(t),this.actionsManager_.getActionByShortcut(o)};le.prototype.enableEditing=function(){if(this.editingEventHandler_=new goog.events.EventHandler,this.enableKeyboardShortcuts(),this.useTextInput_){var t=sync.util.shouldUseIframe()?sync.util.getDocDomHelper().getDocument():this.docWrapper_;this.editingEventHandler_.listen(t,goog.events.EventType.TEXTINPUT,this.handleTextInput.bind(this),!1);var o=new yp(this.docWrapper_);this.editingEventHandler_.registerDisposable(o),this.editingEventHandler_.listen(o,goog.events.EventType.TEXTINPUT,this.handleTextInput.bind(this),!1),this.imeManager_.enableEditing()}};le.prototype.enableKeyboardShortcuts=function(){this.docKh_||(this.docKh_=new mp,this.docKh_.attach(this.docWrapper_,!1)),this.docKh_.listen(mp.EventType.KEY,this.handleKeyEvent_.bind(this),!1)};le.prototype.disableEditing=function(){this.imeManager_.disableEditing(),this.docKh_&&(this.docKh_.dispose(),this.docKh_=null)};le.prototype.exm31242Fix_=function(){this.eventHandler_.listen(sync.util.getDocDomHelper().getDocument().body,goog.events.EventType.KEYDOWN,function(t){t.target==sync.util.getDocDomHelper().getDocument().body&&t.ctrlKey&&t.keyCode===goog.events.KeyCodes.Z&&t.preventDefault()})};le.prototype.disposeInternal=function(){this.disableEditing(),this.eventHandler_.dispose(),le.superClass_.disposeInternal.call(this)};var Pf=le;sync.view.Viewport=le;goog.require("goog.dom");goog.require("goog.events");namespace("sync.view");var Xn=function(){this.mayHaveSelection_=!1};Xn.SELECTED_CELL_CLASS="oxy-cell-selected";Xn.prototype.setSelection=function(t){this.setSelectionRafId_&&cancelAnimationFrame(this.setSelectionRafId_),this.setSelectionRafId_=requestAnimationFrame(goog.bind(function(){this.setSelection_(t),this.setSelectionRafId_=null},this))};Xn.prototype.setSelection_=function(t){if(this.clearSelection(),t instanceof z){var o=t.getSelectedCells();if(o)for(var i=0;i<o.length;i++){var n=h.getInstance().getXmlNodeById(o[i]);n&&(goog.dom.classlist.add(n,Xn.SELECTED_CELL_CLASS),this.mayHaveSelection_=!0)}}};Xn.prototype.clearSelection=function(){if(this.mayHaveSelection_){var t=sync.util.getDocDomHelper().getDocument().getElementsByClassName(Xn.SELECTED_CELL_CLASS);if(t.length)for(var o=Array.prototype.slice.call(t),i=0;i<o.length;i++){var n=o[i];goog.dom.classlist.remove(n,Xn.SELECTED_CELL_CLASS)}this.mayHaveSelection_=!1}};var kf=Xn;sync.view.TableSelectionView=Xn;goog.require("goog.async.Debouncer");goog.require("goog.dom");goog.require("goog.events");goog.require("goog.Disposable");goog.require("goog.userAgent");namespace("sync.view");var me=function(t,o,i,n,r,s,a,l){this.controller_=t,this.docWrapper=o,this.selectionManager_=n,this.editModeModel=r,this.layoutChangeTracker_=s,this.viewportScroller=i,this.foldingManager_=l,this.tableSelectionView_=new kf,this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_),this.fakeSelection_=a,this.isModelUpdating_=!1,this.lastFocusCaretRect_=null};goog.inherits(me,goog.Disposable);me.prototype.disposeInternal=function(){me.superClass_.disposeInternal.call(this),goog.events.unlistenByKey(this.fakeSelectionRemovalListenerKey_),goog.events.unlistenByKey(this.layoutChangedListenerKey_),goog.events.unlistenByKey(this.caretRectChangedListenerKey_)};me.prototype.useFakeSelection=goog.userAgent.IPAD||goog.userAgent.IPHONE;me.prototype.attach=function(t){this.caretRectChangedListenerKey_=goog.events.listen(t,It.EventType.CARET_RECT_CHANGED_INTERVAL,function(i){if(i.caretRect){let n=goog.style.getPageOffset(this.docWrapper);this.lastFocusCaretRect_=new goog.math.Rect(i.caretRect.left-n.x,i.caretRect.top-n.y,i.caretRect.width,i.caretRect.height)}else this.lastFocusCaretRect_=null}.bind(this)),(goog.userAgent.IPAD||goog.userAgent.IPHONE)&&this.eventHandler_.listen(this.docWrapper,goog.events.EventType.FOCUS,this.handleFocusIOS_,!0);var o=M.EventType;this.eventHandler_.listen(this.controller_,o.SERVER_SELECTION_CHANGED,this.revealServerSelection_,!1),this.eventHandler_.listen(this.controller_,o.BEFORE_MODEL_CHANGED,goog.bind(this.setIsModelUpdating_,this,!0)),this.eventHandler_.listen(this.controller_,o.MODEL_CHANGED,goog.bind(this.setIsModelUpdating_,this,!1)),this.eventHandler_.listen(this.docWrapper,goog.events.EventType.FOCUSIN,this.clearFakeSelection),this.eventHandler_.listen(this.docWrapper,goog.events.EventType.FOCUSOUT,this.renderFakeSelectionOnBlur),this.eventHandler_.listen(window,goog.events.EventType.BLUR,this.renderFakeSelectionOnWindowBlur_),this.eventHandler_.listen(t,It.EventType.SELECTION_CHANGED_INTERNAL,this.selectionChanged_,!1),this.eventHandler_.listen(this.selectionManager_,sync.api.SelectionManager.EventType.SELECTION_CHANGED,this.editorSelectionChanged_,!0)};me.prototype.setIsModelUpdating_=function(t){this.isModelUpdating_=t};me.prototype.revealServerSelection_=function(t){t.selection&&!t.defaultPrevented&&(t.isCausedByBackgroundSync||this.scrollCurrentSelectionIntoView_(),this.foldingManager_.expandFoldsAtSelection(t.selection))};me.prototype.scrollCurrentSelectionIntoView_=function(){this.viewportScroller&&this.viewportScroller.scrollSelectionIntoView(this.selectionManager_.getSelection())};me.prototype.renderFakeSelectionOnWindowBlur_=function(){this.fakeSelection_.isRendered()||this.renderFakeSelectionOnBlur()};me.prototype.renderFakeSelectionOnBlur=function(){if(!this.isModelUpdating_){var t=this.selectionManager_.getSelection();this.renderFakeSelection_(null,t,!1),this.layoutManager_&&(this.layoutChangedListenerKey_=goog.events.listen(this.layoutManager_,Ge.LAYOUT_CHANGED,function(){this.lastFocusCaretRect_=null}.bind(this)))}};me.prototype.handleFocusIOS_=function(){setTimeout(goog.bind(function(){this.viewportScroller&&this.viewportScroller.fixIosFocusScroll&&this.viewportScroller.fixIosFocusScroll()},this),0)};me.prototype.clearSelection=function(){var t=this.docWrapper.ownerDocument.querySelector(".tag.boundary");It.setBrowserSelectionRaw(t,0,t,0)};me.prototype.selectionChanged_=function(t){t.selection?(this.selectionModelChanged_(t),t.selection instanceof z&&this.editorSelectionChanged_()):this.selectionCleared_()};me.prototype.editorSelectionChanged_=function(){this.clearFakeSelection(),this.tableSelectionView_.setSelection(this.selectionManager_.getSelection())};me.prototype.selectionCleared_=function(){goog.userAgent.IPHONE||goog.userAgent.IPAD?this.clearSelection():goog.userAgent.IE&&goog.dom.Range.clearSelection()};me.prototype.renderFakeSelection_=function(t,o,i){t?(this.scrollNodesIntoView_(t),this.fakeSelection_.renderOnChunks(t)):(i&&this.scrollCurrentSelectionIntoView_(),this.clearFakeSelection(),this.fakeSelection_.render(o,this.lastFocusCaretRect_)),this.clearFakeSelectionOnClick()};me.prototype.selectionModelChanged_=function(t){if(t.fake)this.renderFakeSelection_(t.selectionChunks,t.selection,t.scrollIntoView);else if(this.editModeModel.isEditMode()){var o=t.selection&&goog.dom.getAncestor(t.selection.focus.container,function(i){return goog.dom.isElement(i)&&i.getAttribute("contenteditable")==="true"});o&&this.selectionChangedEditMode_(t.selection,o)}else this.selectionChangedReviewMode_(t.selection)};me.prototype.selectionChangedEditMode_=function(t,o){var i=t.focus.container;goog.dom.isElement(i)||(i=i.parentNode),goog.userAgent.EDGE?(this.edgeScroll_=this.viewportScroller.getScroll(),o.focus(),this.edgeScroll_&&this.edgeScroll_.y&&this.viewportScroller.scrollTo(this.edgeScroll_.x,this.edgeScroll_.y)):goog.userAgent.GECKO?o.focus():goog.userAgent.IE?i.focus():goog.userAgent.ANDROID?i.scrollIntoViewIfNeeded():goog.userAgent.product.CHROME&&o.focus()};me.prototype.selectionChangedReviewMode_=function(t){this.clearFakeSelection(),t.isEmpty()||this.useFakeSelection&&this.renderFakeSelection_(null,t,!0)};me.prototype.fakeSelectionRemovalListenerKey_=null;me.prototype.layoutChangedListenerKey_=null;me.prototype.caretRectChangedListenerKey_=null;me.prototype.clearFakeSelectionOnClick=function(){goog.events.unlistenByKey(this.fakeSelectionRemovalListenerKey_),this.fakeSelectionRemovalListenerKey_=goog.events.listenOnce(this.docWrapper,sync.actions.util.captureSelectionEvent,this.clearFakeSelection,!0,this)};me.prototype.scrollSelectionIntoView_=function(t){var o=t.focus.container;goog.dom.isElement(o)||(o=o.parentNode),this.scrollNodesIntoView_([o])};me.prototype.scrollNodesIntoView_=function(t){this.viewportScroller?this.viewportScroller.scrollIntoView(t):t[0]&&t[0].scrollIntoView()};me.prototype.clearFakeSelection=function(){goog.events.unlistenByKey(this.fakeSelectionRemovalListenerKey_),goog.events.unlistenByKey(this.layoutChangedListenerKey_),this.fakeSelection_.clear()};me.prototype.getSelectionManager=function(){return this.selectionManager_};var Lf=me;sync.view.SelectionView=me;goog.require("goog.events");goog.require("goog.ui.HoverCard");namespace("sync.view");var Ws=function(t,o,i){var n=document,r=sync.util.getDocDomHelper();i&&(n=i.contentDocument,r=new goog.dom.DomHelper(n)),goog.ui.HoverCard.call(this,t,!0,r,n),this.setHideOnEscape(!0);var s=goog.ui.HoverCard.EventType;goog.events.listen(this,s.SHOW,goog.bind(function(){this.scrollCloseKey_=goog.events.listenOnce(o,goog.events.EventType.SCROLL,this.hide_,!1,this)},this)),goog.events.listen(this,s.BEFORE_HIDE,goog.bind(function(){goog.events.unlistenByKey(this.scrollCloseKey_)},this)),this.scrollCloseKey_=null,this.mouseMoveKey_=null};goog.inherits(Ws,goog.ui.HoverCard);Ws.prototype.handleMouseMove=function(t){var o=t.clientX,i=t.clientY,n=this.getHotSpotPadding(),r=this.getElement().getBoundingClientRect(),s,a;if(r.height!==0&&r.width!==0&&(s=o<r.left-n.left||o>r.right+n.right,s||(a=i<r.top-n.top||i>r.bottom+n.bottom)),s||a){this.hide_();return}Ws.superClass_.handleMouseMove.call(this,t)};Ws.prototype.onDocumentKeyDown_=function(t){t.ctrlKey||t.metaKey||this.hide_(t.target)&&t.keyCode===goog.events.KeyCodes.ESC&&(t.preventDefault(),t.stopPropagation())};Ws.prototype.handleTriggerMouseOver_=function(t){this.mouseMoveKey_&&(goog.events.unlistenByKey(this.mouseMoveKey_),this.mouseMoveKey_=null),this.mouseDraggingKey_&&(goog.events.unlistenByKey(this.mouseDraggingKey_),this.mouseDraggingKey_=null);var o=t.target;if(!!o){var i=null;if(this.isAnchor_(o))i=o;else if(this.checkDescendants_){var n=goog.dom.getAncestor(o,goog.bind(this.isAnchor_,this),!1,this.maxSearchSteps_);n&&(i=n)}i&&(this.mouseMoveKey_=goog.events.listenOnce(i,goog.events.EventType.MOUSEMOVE,goog.bind(function(){this.setPosition(null),this.triggerForElement(i)},this)),this.mouseDraggingKey_=goog.events.listenOnce(i,goog.events.EventType.DRAGOVER,goog.bind(function(){this.cancelTrigger()},this)))}};var vp=Ws;sync.view.HoverCard=Ws;goog.require("goog.events");namespace("sync.view");var Ff=class extends sync.react.Component{constructor(t){super(t);this.state={currentThread:null}}makeThreadMarkerTooltipItem(t){let o=this.getRootMarker(t);return sync.react.h(Ul,{key:o.getId(),marker:o,goToDetailView:goog.bind(this.switchToThreadView,this,t),isThreadList:!0,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,currentUserName:this.props.currentUserName})}getRootMarker(t){for(let o=0;o<t.length;o++)if(!t[o].getLevel())return t[o]}render(){if(this.state.currentThread)return sync.react.h("div",null,sync.react.h("div",{title:tr(msgs.BACK_TO_THREADS_),className:"hc-backButton vertical-align-children",onClick:goog.bind(function(){this.setState({currentThread:null})},this)},sync.react.h("div",{className:"hc-icon back-icon"})),sync.react.h(hd,{discussion:this.state.currentThread,getEnabledActions:this.props.getEnabledActions,onHideRequested:this.props.onHideRequested,onActionExecuted:this.props.onActionExecuted,viewSwitched:this.props.viewSwitched,currentUserName:this.props.currentUserName}));{let t=this.props.discussionsList,o=[];for(let n=t.length-1;n>=0;n--){let r=t[n];o.push(this.makeThreadMarkerTooltipItem(r))}let i=o.length>1?sync.react.h("div",{className:"hc-separator"},sync.react.h("div",{style:{height:15}},tr(msgs.CHOOSE_THREAD_))):"";return sync.react.h("div",{id:"container-detail-view"},i,sync.react.h("div",{style:{maxHeight:315,overflowY:"auto",overflowX:"hidden"}},o))}}switchToThreadView(t){this.setState({currentThread:t})}componentDidMount(t,o){typeof this.props.viewSwitched=="function"&&this.props.viewSwitched()}componentDidUpdate(){goog.isFunction(this.props.viewSwitched)&&this.props.viewSwitched()}},Uf=Ff;sync.view.MarkerTooltipReact=Ff;namespace("sync.view.time.templates");sync.view.time.templates.renderTime=function(t){var o=null;return t&&(o=goog.dom.createDom("time",null,t.renderedDate),o.setAttribute("datetime",t.isoDate)),o};var oq=sync.view.time.templates;namespace("sync.view.time");sync.view.time.formatDateInternal=function(t,o){var i={year:"numeric",month:"short",day:"numeric"};o.getFullYear()==t.getFullYear()&&(o.getMonth()==t.getMonth()?o.getDate()==t.getDate()?i={hour:"numeric",minute:"2-digit",hour12:!1}:i={hour:"numeric",minute:"2-digit",month:"short",day:"numeric",hour12:!1}:i={month:"short",day:"numeric"});try{return sync.view.time.nativeFormatDate_(t,i)}catch(n){console.warn(n)}return goog.string.padNumber(t.getDate(),2)+"-"+goog.string.padNumber(t.getMonth()+1,2)+"-"+t.getYear()%100};sync.view.time.formatDate=function(t){var o=new Date(t),i=new Date;return sync.view.time.formatDateInternal(o,i)};sync.view.time.formatFullDate=function(t){try{return sync.view.time.nativeFormatDate_(t,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})}catch(o){console.warn(o)}return sync.view.time.pollyFillFormatFullDate_(t)};sync.view.time.nativeFormatDate_=function(t,o){if(window.Intl&&window.Intl.DateTimeFormat){var i=sync.Translation.getLanguage().replace(/_/g,"-");return new Intl.DateTimeFormat(i,o).format(t)}else throw new Error("No i18n API")};sync.view.time.pollyFillFormatFullDate_=function(t){var o=sync.Translation.getLanguage().replace(/_/g,"-"),i=t.getFullYear(),n=t.getMonth(),r=t.getDate(),s=t.getDay(),a=t.getHours(),l=t.getMinutes(),c=sync.view.time.dayName_(s,o),d=sync.view.time.monthName_(n,o);switch(o){case"de_DE":return c+", "+r+". "+d+" "+i+", "+a+":"+l;case"fr_FR":return c+" "+r+" "+d+" "+i+" \xE0 "+a+":"+l;case"nl_NL":return c+" "+r+" "+d+" "+i+" "+a+":"+l;case"en_US":default:var g=a<12?"AM":"PM";return a!==12&&(a%=12),c+", "+d+" "+r+", "+i+", "+a+":"+l+" "+g}};sync.view.time.dayName_=function(t,o){var i=t+o,n=sync.view.time.dayNames_[i];if(n)return n;var r;switch(t){case 0:r=tr(msgs.SUN_);break;case 1:r=tr(msgs.MON_);break;case 2:r=tr(msgs.TUE_);break;case 3:r=tr(msgs.WED_);break;case 4:r=tr(msgs.THU_);break;case 5:r=tr(msgs.FRI_);break;case 6:r=tr(msgs.SAT_);break}return sync.view.time.dayNames_[i]=r,r};sync.view.time.dayNames_={};sync.view.time.monthName_=function(t,o){var i=t+o,n=sync.view.time.monthNames_[i];if(n)return n;var r;switch(t){case 0:r=tr(msgs.JAN_);break;case 1:r=tr(msgs.FEB_);break;case 2:r=tr(msgs.MAR_);break;case 3:r=tr(msgs.APR_);break;case 4:r=tr(msgs.MAY_);break;case 5:r=tr(msgs.JUN_);break;case 6:r=tr(msgs.JUL_);break;case 7:r=tr(msgs.AUG_);break;case 8:r=tr(msgs.SEP_);break;case 9:r=tr(msgs.OCT_);break;case 10:r=tr(msgs.NOV_);break;case 11:r=tr(msgs.DEC_);break}return sync.view.time.monthNames_[i]=r,r};sync.view.time.monthNames_={};sync.view.time.getRenderedTime=function(t){if(!t||t<=0)return{};var o=new Date(t),i=new Date;return{isoDate:o.toISOString(),renderedDate:sync.view.time.formatDateInternal(o,i)}};var sq=sync.view.time;goog.require("goog.dom.dataset");goog.require("goog.Disposable");namespace("sync.ctrl");sync.ctrl.MarkersPreviewController=function(t,o){var i=goog.dom.createDom;this.footerDiv=t,this.commentDiv_=i("div","preview-comment"),this.dateSpan_=i("span","preview-date");var n=i("span","preview-author"),r=i("div",{class:"preview",id:"preview"},i("div",null,n,this.dateSpan_),this.commentDiv_);goog.dom.appendChild(t,r),this.markersModel=o,goog.events.listen(o.getSelectionModel(),R.SelectionEventType.MARKER_SELECTED,this.showInPreview_,!0,this),goog.events.listen(o.getSelectionModel(),R.SelectionEventType.MARKER_UNSELECTED,this.hidePreview_,!0,this)};goog.inherits(sync.ctrl.MarkersPreviewController,goog.Disposable);sync.ctrl.MarkersPreviewController.COMMENT_SELECTED_CLASS="ui-page-comment-selected";sync.ctrl.MarkersPreviewController.INSERT_SELECTED_CLASS="ui-page-insert-selected";sync.ctrl.MarkersPreviewController.DELETE_SELECTED_CLASS="ui-page-delete-selected";sync.ctrl.MarkersPreviewController.SPLIT_SELECTED_CLASS="ui-page-split-selected";sync.ctrl.MarkersPreviewController.SURROUND_SELECTED_CLASS="ui-page-surround-selected";sync.ctrl.MarkersPreviewController.NO_MARKER_SELECTED_CLASS="ui-page-nomarker-selected";sync.ctrl.MarkersPreviewController.previewClasses=[sync.ctrl.MarkersPreviewController.COMMENT_SELECTED_CLASS,sync.ctrl.MarkersPreviewController.INSERT_SELECTED_CLASS,sync.ctrl.MarkersPreviewController.DELETE_SELECTED_CLASS,sync.ctrl.MarkersPreviewController.SPLIT_SELECTED_CLASS,sync.ctrl.MarkersPreviewController.SURROUND_SELECTED_CLASS,sync.ctrl.MarkersPreviewController.NO_MARKER_SELECTED_CLASS];sync.ctrl.MarkersPreviewController.prototype.showInPreview_=function(t){var o=this.markersModel.getMarker(t.id);if(!!o){var i=o.getType();i===Se.Type.CUSTOM_HIGHLIGHT&&o.getAuthorComment()&&(i=Se.Type.COMMENT),sync.ctrl.MarkersPreviewController.setChangeType(this.footerDiv,o.getAuthor(),i,o.getChangeSubType()),o.getTimestamp()>0&&(goog.dom.removeChildren(this.dateSpan_),goog.dom.appendChild(this.dateSpan_,sync.view.time.templates.renderTime(sync.view.time.getRenderedTime(parseInt(o.getTimestamp(),10))))),this.commentDiv_.textContent=o.getAuthorComment()}};sync.ctrl.MarkersPreviewController.setChangeType=function(t,o,i,n){var r=goog.dom.classlist;r.removeAll(t,sync.ctrl.MarkersPreviewController.previewClasses);var s=document.getElementById("mode_switcher");s&&r.removeAll(s,sync.ctrl.MarkersPreviewController.previewClasses),o=o||tr(msgs.ANONYMOUS_);var a=t.querySelector(".preview-author");goog.dom.removeChildren(a);var l=null,c=null;i==="COMMENT"?(r.add(t,sync.ctrl.MarkersPreviewController.COMMENT_SELECTED_CLASS),c=sync.ctrl.MarkersPreviewController.COMMENT_SELECTED_CLASS,l=tr(msgs.COMMENTED_BY_AUTHOR_)):i==="CHANGE_INSERT"?(c=sync.ctrl.MarkersPreviewController.INSERT_SELECTED_CLASS,l=tr(msgs.INSERTED_BY_AUTHOR_),n==="surround"?(c=sync.ctrl.MarkersPreviewController.SURROUND_SELECTED_CLASS,l=tr(msgs.SURROUNDED_BY_AUTHOR_)):n==="split"&&(c=sync.ctrl.MarkersPreviewController.SPLIT_SELECTED_CLASS,l=tr(msgs.SPLIT_BY_AUTHOR_))):i==="CHANGE_DELETE"&&(c=sync.ctrl.MarkersPreviewController.DELETE_SELECTED_CLASS,l=tr(msgs.DELETED_BY_AUTHOR_)),l?(r.add(t,c),goog.dom.appendChild(a,trDom(l,{"0":goog.dom.createDom("b",{style:"font-style: normal"},o)}))):r.add(t,sync.ctrl.MarkersPreviewController.NO_MARKER_SELECTED_CLASS)};sync.ctrl.MarkersPreviewController.prototype.hidePreview_=function(){goog.dom.classlist.removeAll(this.footerDiv,sync.ctrl.MarkersPreviewController.previewClasses),goog.dom.classlist.add(this.footerDiv,sync.ctrl.MarkersPreviewController.NO_MARKER_SELECTED_CLASS);var t=document.getElementById("mode_switcher");t&&goog.dom.classlist.add(t,sync.ctrl.MarkersPreviewController.NO_MARKER_SELECTED_CLASS)};sync.ctrl.MarkersPreviewController.prototype.disposeInternal=function(){sync.ctrl.MarkersPreviewController.superClass_.disposeInternal.call(this),this.hidePreview_(),goog.dom.removeChildren(this.footerDiv)};var hq=sync.ctrl.MarkersController;goog.require("goog.ui.HoverCard");goog.require("goog.Disposable");namespace("sync.view");var zt=function(t,o,i,n){goog.Disposable.call(this),this.markersModel_=t,this.actionsManager_=o,this.actionsExecutor_=i,this.shoudShowFn_=goog.functions.TRUE;var r=new vp(goog.bind(this.shouldShowMarkerTooltip_,this),n);this.infoTooltipWrapper_=goog.dom.createDom("div",{id:"info_tooltip_wrapper"}),r.getElement().appendChild(this.infoTooltipWrapper_);var s=zt.HOT_SPOT_PADDING;r.setHotSpotPadding(new goog.math.Box(s,s,s,s)),r.setShowDelayMs(1e3);var a=goog.ui.HoverCard.EventType;this.hideHoverCard_=goog.bind(r.hide_,r),this.maskElement_=null,this.eventHandler_=new goog.events.EventHandler(this).listen(r,a.SHOW,goog.bind(this.scrollRepliesContainer_,this)).listen(r,a.BEFORE_SHOW,goog.bind(this.beforeShow_,this)).listen(r,a.BEFORE_HIDE,goog.bind(this.beforeHide_,this)).listen(this.markersModel_.getThrottledEventTarget(),[R.ModelEventType.MARKER_DELETED,R.ModelEventType.MARKER_ADDED],this.hideHoverCard_),this.registerDisposable(this.eventHandler_),r.className="tooltip-hovercard",this.hoverCard_=r,this.registerDisposable(r),this.heightBefore_=null};goog.inherits(zt,goog.Disposable);zt.HOT_SPOT_PADDING=40;zt.prototype.setEnabledCheck=function(t){this.shoudShowFn_=t};zt.prototype.shouldShowMarkerTooltip_=function(t){if(!this.shoudShowFn_.call()||!goog.dom.classlist.contains(t,"oxy-marker"))return!1;var o=goog.dom.dataset.get(t,"markerId");if(!this.markersModel_.getMarker(o))return!1;var i=goog.dom.dataset.get(t,"type");return i!==Se.Type.CUSTOM_HIGHLIGHT?!goog.dom.getAncestorByClass(t,"oxy-view-final")&&!goog.dom.getAncestorByClass(t,"oxy-view-original"):!0};zt.prototype.beforeHide_=function(){var t=zt.HOT_SPOT_PADDING;this.heightBefore_=null,this.topBefore_=null,this.maskElement_&&(goog.dom.removeNode(this.maskElement_),this.maskElement_=null),this.hoverCard_.setHotSpotPadding(new goog.math.Box(t,t,t,t))};zt.prototype.scrollRepliesContainer_=function(){var t=this.infoTooltipWrapper_.querySelector(".hc-replies-container");t&&(t.scrollTop=t.scrollHeight)};zt.prototype.getMarkerIdsStartingFromElement_=function(t){var o=[];if(t)for(var i="markerId",n=goog.dom.dataset.get(t,i);n;){var r=this.markersModel_.getMarker(n);r&&o.push(r),t=t.parentElement,n=t&&goog.dom.dataset.get(t,i)}return o};zt.prototype.resizeHitBoxHeight_=function(){var t=this.hoverCard_,o=zt.HOT_SPOT_PADDING,i=o,n=o,r=this.heightBefore_,s=goog.style.getSize(t.getElement()).height,a=r&&s&&r>s;a&&(n+=r-s),t.setHotSpotPadding(new goog.math.Box(i,o,n,o));var l=this.maskElement_;l?goog.style.setStyle(l,"height",o+n+s+"px"):(l=goog.dom.createDom("div",{id:"hovercard-mask",style:"top: -"+o+"px; left: 0; height: "+(s+o+n)+"px;"}),t.getElement().appendChild(l),this.maskElement_=l),this.heightBefore_=s,this.topBefore_=t.getElement().getBoundingClientRect().top,t.reposition(),setTimeout(goog.bind(this.adjustAfterReposition_,this,t,i,n,o),0)};zt.prototype.adjustAfterReposition_=function(t,o,i,n){var r=350;this.heightBefore_||(this.heightBefore_=goog.style.getSize(t.getElement()).height,goog.style.setStyle(this.maskElement_,"height",r));var s=this.maskElement_,a=t.getElement().getBoundingClientRect().top;this.topBefore_&&this.topBefore_<a?(o+=Math.abs(this.topBefore_-a),t.setHotSpotPadding(new goog.math.Box(o,n,i,n)),goog.style.setStyle(s,"top",-o+"px")):(goog.style.setStyle(s,"top",-n+"px"),goog.style.setStyle(s,"height",n+i+this.heightBefore_+"px")),this.topBefore_=a};zt.prototype.beforeShow_=function(){var t=this.hoverCard_,o=this.markersModel_,i=this.infoTooltipWrapper_;goog.dom.removeChildren(i);var n=this.getMarkerIdsStartingFromElement_(t.getAnchorElement());if(!(!n||n.length===0)){var r=n.filter(function(c){return c.getLevel()===null}),s=[];goog.array.forEach(r,function(c){s.push(o.getDiscussion(c.getId()))});var a={viewSwitched:goog.bind(this.resizeHitBoxHeight_,this),onHideRequested:this.hideHoverCard_,getEnabledActions:goog.bind(this.getEnabledActions_,this),onActionExecuted:goog.bind(this.scheduleAction_,this),currentUserName:this.markersModel_.getReviewerName()},l;s.length===1?(l=hd,a.discussion=s[0]):(l=Uf,a.discussionsList=s,a.onMouseEnter=function(c){var d=o.getAllChunksForMarker(c);goog.array.forEach(d,function(g){goog.dom.classlist.add(g,"mtltp-hover")})},a.onMouseLeave=function(c){var d=o.getAllChunksForMarker(c);goog.array.forEach(d,function(g){goog.dom.classlist.remove(g,"mtltp-hover")})}),sync.react.render(sync.react.createElement(l,a),i)}};zt.prototype.getEnabledActions_=function(t){var o=this.markersModel_.getMarker(t);if(o){var i=new I.Context({markerId:o.getId()});return["Author/Reply","Author/RemoveComment","Author/AcceptChange","Author/RejectChange"].map(n=>this.actionsManager_.getActionById(n)).filter(goog.isDefAndNotNull).filter(n=>n.isEnabledFor(i))}else return[]};zt.prototype.scheduleAction_=function(t,o){var i=new I.Context({markerId:o}),n=De.createActionWithBoundContext(t,i);this.actionsExecutor_.executeAction(n)};var Bf=zt;sync.view.MarkerTooltip=zt;namespace("sync.view");var Ep=function(){};goog.inherits(Ep,pe);Ep.prototype.enterDocument=function(t){if(t.length===1){var o;if(sync.model.XmlDom.isDocument(t[0]))o=t[0];else{var i=t[0].childNodes[1];sync.model.XmlDom.isDocument(i)&&(o=i)}if(o){var n=goog.dom.dataset.get(o,"backgroundColor");n&&(o.parentNode.style.backgroundColor=n)}}};var Hf=Ep;sync.view.BackgroundSetter=Ep;namespace("sync.a11y");var Cp=sync.a11y.Broadcaster=function(){goog.Disposable.call(this),this.element_=goog.dom.createDom("div",{id:"broadcaster",className:"screenreader-text",role:"marquee","aria-live":"assertive","aria-atomic":"true"}),goog.dom.appendChild(document.body,this.element_)};goog.inherits(Cp,goog.Disposable);Cp.prototype.speak=function(t){var o=goog.dom.createDom("p",null,t);goog.dom.removeChildren(this.element_),goog.dom.appendChild(this.element_,o)};Cp.prototype.disposeInternal=function(){goog.dom.removeNode(this.element_),goog.Disposable.prototype.disposeInternal.call(this)};var jf=Cp;goog.require("goog.dom");namespace("sync.view");var Bt=function(){goog.events.EventTarget.call(this),this.broadcaster_=new jf,this.registerDisposable(this.broadcaster_),this.enabled_=!1;var t=k.getInstance();this.a11y_on_=t.getOption(S.ACCESSIBILITY_MODE),t.listenOption(S.ACCESSIBILITY_MODE,goog.bind(this.a11yModeChanged_,this)),this.a11y_on_==="true"&&this.accessibilityEnabled_()};goog.inherits(Bt,goog.events.EventTarget);Bt.EventType={ENABLED_STATE_CHANGED:"en_st_ch"};Bt.A11yEvent=function(t,o){t&&(this.type=t,this.data=o)};Bt.prototype.skipToContent_=function(t){if(t.preventDefault(),workspace.currentEditor)workspace.currentEditor.getEditingSupport().focus();else{var o=document.querySelector('.dashboard-containers-tabs [role="tablist"]');o&&o.focus()}};Bt.prototype.accessibilityHelp_=function(t){if(t.preventDefault(),!this.dialog_){var o=workspace.createDialog();this.registerDisposable(o),o.setTitle(tr(msgs.ACCESSIBILITY_HELP_)),o.setPreferredSize(520,267),o.setResizable(!0);var i=goog.dom.createDom("a",{href:sync.util.help.getDocumentationUrl(sync.util.help.Id.ACCESSIBILITY_DOCS),target:"_blank"},tr(msgs.A11Y_DOCS_)),n=goog.dom.appendChild(o.getElement(),goog.dom.createDom("div","",trDom(msgs.A11Y_DOCS_LONG_,{$DOCUMENTATION_LINK:i})));this.dialog_=o,this.dialogElement_=n}this.dialog_.onSelect(goog.bind(this.onSelect_,this));var r,s;this.a11y_on_&&this.a11y_on_==="true"?(r="off",s=tr(msgs.A11Y_OFF_)):(r="on",s=tr(msgs.A11Y_ON_)),this.dialog_.setButtonConfiguration([{key:r,caption:s},{key:"cancel",caption:tr(msgs.CANCEL_)}]),this.dialog_.show()};Bt.prototype.onSelect_=function(t,o){t==="on"?k.getInstance().setOption(S.ACCESSIBILITY_MODE,"true",!0):t==="off"&&k.getInstance().setOption(S.ACCESSIBILITY_MODE,"false",!0)};Bt.prototype.addSkipLinks=function(){var t=document.querySelector("body"),o=goog.dom.createDom("a",{className:"screenreader-text",href:"#"},tr(msgs.SKIP_TO_CONTENT_)),i=goog.dom.createDom("a",{className:"screenreader-text",href:"#"},tr(msgs.ACCESSIBILITY_HELP_));goog.dom.insertSiblingBefore(i,t.firstChild),goog.dom.insertSiblingBefore(o,t.firstChild),goog.events.listen(o,goog.events.EventType.CLICK,this.skipToContent_),goog.events.listen(i,goog.events.EventType.CLICK,goog.bind(this.accessibilityHelp_,this))};Bt.prototype.a11yModeChanged_=function(t){this.a11y_on_=t.value||this.a11y_on_,this.a11y_on_==="true"?this.accessibilityEnabled_():this.accessibilityDisabled_(),this.dispatchEvent(new Bt.A11yEvent(Bt.EventType.ENABLED_STATE_CHANGED,this.enabled_))};Bt.prototype.accessibilityEnabled_=function(){this.enabled_=!0};Bt.prototype.accessibilityDisabled_=function(){this.enabled_=!1};Bt.prototype.isEnabled=function(){return this.enabled_};Bt.prototype.speak=function(t){this.broadcaster_.speak(t)};Bt.prototype.pauseScreenReader=function(t){this.enabled_&&t.setAttribute("aria-busy","true")};Bt.prototype.resumeScreenReader=function(t){t&&t.getAttribute("aria-busy")&&t.removeAttribute("aria-busy")};var Va=Bt;sync.view.A11y=Bt;namespace("sync.actions");var jr={NO_TAGS:"no-tags",PARTIAL_TAGS:"partial-tags",INLINE_TAGS:"inline-tags",BLOCK_TAGS:"block-tags",FULL_TAGS:"full-tags",FULL_TAGS_WITH_ATTRIBUTES:"full-tags-with-attributes"};jr.properties={"no-tags":{iconName:"NoTags"},"partial-tags":{iconName:"PartialTags"},"inline-tags":{iconName:"InlineTags"},"block-tags":{iconName:"BlockTags"},"full-tags":{iconName:"FullTags"},"full-tags-with-attributes":{iconName:"FullTagsWithAttrs"}};jr.getIconName=function(t){return jr.properties[t].iconName};jr.getActionDescription=function(t){var o;switch(t){case"no-tags":o=tr(msgs.NO_TAGS_);break;case"partial-tags":o=tr(msgs.PARTIAL_TAGS_);break;case"inline-tags":o=tr(msgs.INLINE_TAGS_);break;case"block-tags":o=tr(msgs.BLOCK_TAGS_);break;case"full-tags":o=tr(msgs.FULL_TAGS_);break;case"full-tags-with-attributes":o=tr(msgs.FULL_TAGS_WITH_ATTRIBUTES_);break;default:o="unknown-tags-mode"}return o};jr.getAllActionsDescriptions=function(){var t={};for(var o in jr.properties)t[o]=jr.getActionDescription(o);return t};var be=jr;namespace("sync.actions");var Vr=function(t){sync.actions.AbstractAction.call(this,null),this.options_=k.getInstance(),this.sentinelsMode_=t};goog.inherits(Vr,sync.actions.AbstractAction);Vr.prototype.actionPerformed=function(t){this.options_.setOption(S.SENTINELS_DISPLAY_MODE,this.sentinelsMode_,!0),t()};Vr.prototype.getDisplayName=function(){return be.getActionDescription(this.sentinelsMode_)};Vr.prototype.getDescription=function(){return be.getActionDescription(this.sentinelsMode_)};Vr.prototype.renderSmallIcon=function(){var t=Vr.getSentinelsModeIconUrl(this.sentinelsMode_,!0);return sync.util.renderSmallIcon(t)};Vr.getSentinelsModeIconUrl=function(t,o){var i=sync.util.getHdpiFactor(),n=o?"16":"24";return"images/no-sprite/"+be.getIconName(t)+n+(i===2?"@2x":"")+".png"};var zn=Vr;goog.require("goog.structs.Map");namespace("sync.view");var _e=function(t,o,i,n,r){if(this.docContainer_=t,this.mode=sync.options.ServerOptions.getServerOption(S.TAGS_MODE),this.xmlModel_=o,this.tagsModeOverride_=n,!goog.userAgent.ANDROID)if(n!=null)this.mode=n;else{var s=k.getInstance();this.mode=s.getOption(S.SENTINELS_DISPLAY_MODE)||this.mode,this.optionsListenerKey_=s.listenOption(S.SENTINELS_DISPLAY_MODE,goog.bind(this.sentinelsDisplayModeChanged_,this))}this.elementNameEnhancer=i,this.a11y_=r,this.a11yListenerKey_=this.a11y_&&this.a11y_.listen(Va.EventType.ENABLED_STATE_CHANGED,goog.bind(this.updateSentinels_,this))};goog.inherits(_e,pe);_e.SentinelDisplay={MINIMAL:"tag-min",TAG:"tag-full"};_e.prototype.unEnhanceSentinels_=function(){for(var t=this.docContainer_.querySelectorAll(".tag"),o=[],i=0;i<t.length;i++)o.push(goog.style.getComputedStyle(t[i],"direction"));for(var n=0;n<t.length;n++){var r=t[n];goog.dom.classlist.add(r,_e.SentinelDisplay.MINIMAL),goog.dom.classlist.remove(r,_e.SentinelDisplay.TAG),this.unenhanceA11yLabels_(r);var s=goog.dom.classlist.contains(r,"tag-inline"),a;if(s){var l=p.getSentinelType(r)===f.BEFORE;o[n]==="rtl"&&(l=!l),a=l?"\u25B7":"\u25C1"}else{var c=p.isBoundarySentinel_(r);a=c?"":"\u200B"}r.textContent=a}};_e.prototype.getSentinelsDisplayMode=function(){return this.mode};_e.prototype.setSentinelsDisplayMode=function(t){this.sentinelsDisplayModeChanged_({value:t})};_e.prototype.sentinelsDisplayModeChanged_=function(t){this.mode=t.value||this.mode,this.updateSentinels_()};_e.prototype.updateSentinels_=function(){this.unEnhanceSentinels_(),this.enhanceDom([this.docContainer_])};_e.prototype.getAttributesDisplayString_=function(t){var o={};sync.model.XmlDom.isXmlElement(t)&&(o=sync.model.XmlDom.getAttributes(t));var i=Object.keys(o).sort(),n="";for(var r of i)if(o.hasOwnProperty(r)){var s=o[r];if(!s.isDefaultValue&&!s.isHidden){var a=s.attributeValue||"";a=a.replace(/\s\s+/g," "),n+=" "+r+'="'+a+'"'}}return n};_e.prototype.enhanceSentinelFullTags_=function(t,o,i){goog.dom.classlist.remove(o,_e.SentinelDisplay.MINIMAL),goog.dom.classlist.add(o,_e.SentinelDisplay.TAG);var n=p.getSentinelType(o)===f.BEFORE,r=sync.view.NodeRenderer.getRenderedText(t,this.elementNameEnhancer);if(r){var s=this.getTrimmedTextAndTitle_(t,r,n,i),a=s.text,l=n?"tag-start":"tag-end",c=goog.dom.createDom("span","tag-core "+l," "+a+" ");c.contentEditable="false",s.title&&(c.title=s.title),this.a11y_&&this.a11y_.isEnabled()&&p.isBoundarySentinel_(o)?this.enhanceA11yLabels_(o,a):this.enhanceA11yLabels_(o),goog.dom.removeChildren(o),goog.dom.append(o,o.ownerDocument.createTextNode("\u200B"),c,o.ownerDocument.createTextNode("\u200B"))}};_e.prototype.getTrimmedTextAndTitle_=function(t,o,i,n){var r=o,s=null;if(i&&n){var a=this.getAttributesDisplayString_(t);a.length>75?(r=o+a.substring(0,75)+" ...",s=a):r+=a}return{text:r,title:s}};_e.prototype.enhanceA11yLabels_=function(t,o){if(this.a11y_&&this.a11y_.isEnabled()){var i="/";if(o){var n=p.getSentinelType(t)===f.BEFORE;n?i=tr(msgs.ST_TAG_EXPL_LBL_,{$TAG:o}):i=tr(msgs.EN_TAG_EXPL_LBL_,{$TAG:o})}t.setAttribute("aria-label",i),t.setAttribute("role","separator")}};_e.prototype.unenhanceA11yLabels_=function(t){t.removeAttribute("role"),t.removeAttribute("aria-label")};_e.prototype.getNode_=function(t,o){var i=t.get(o);return i==null&&(i=this.xmlModel_.getXmlNodeById(o)),i};_e.prototype.isNoTagsFromCss_=function(t,o,i){var n;if(i.has(t))n=!0;else if(o.containsKey(t))n=!1;else{var r=this.xmlModel_.getXmlNodeById(t);n=goog.dom.dataset.has(r,"noTags")}return n};_e.prototype.enhanceSentinel=function(t,o,i){var n=this.mode,r=p.getSentinelParentId(t);this.isNoTagsFromCss_(r,o,i)&&(n=be.NO_TAGS),this.a11y_&&this.a11y_.isEnabled()&&p.isBoundarySentinel_(t)&&(n=be.FULL_TAGS);var s;if(n===be.FULL_TAGS||n===be.FULL_TAGS_WITH_ATTRIBUTES){var a=n===be.FULL_TAGS_WITH_ATTRIBUTES;s=this.getNode_(o,r),this.enhanceSentinelFullTags_(s,t,a)}else n===be.NO_TAGS?t.textContent="\u200B":n===be.INLINE_TAGS&&this.isInlineSentinel(t)||n===be.BLOCK_TAGS&&!this.isInlineSentinel(t)?(s=this.getNode_(o,r),this.enhanceSentinelFullTags_(s,t)):this.enhanceA11yLabels_(t)};_e.prototype.isInlineSentinel=function(t){return goog.dom.classlist.contains(t,"tag-inline")};_e.prototype.getNodesByIdMap=function(t){for(var o=Mn.getXmlNodesWithin(t),i=new goog.structs.Map,n=0;n<o.length;n++)i.set(h.getIdOfXmlNode(o[n]),o[n]);return sync.model.XmlDom.isXmlNode(t)&&i.set(h.getIdOfXmlNode(t),t),i};_e.prototype.enhanceDom=function(t){for(var o=0;o<t.length;o++){for(var i=t[o],n=i.querySelectorAll(".tag"),r=new Set,s=i.querySelectorAll("[data-no-tags]"),a=0;a<s.length;++a)r.add(h.getIdOfXmlNode(s[a]));goog.dom.dataset.has(i,"noTags")&&r.add(h.getIdOfXmlNode(i));for(var l=this.getNodesByIdMap(i),c=0;c<n.length;c++)this.enhanceSentinel(n[c],l,r);this.enhanceEmptyMarkersFromElement_(i)}};_e.prototype.enhanceEmptyMarkersFromElement_=function(t){for(var o=t.querySelectorAll("span[data-role=text][data-empty]"),i=0;i<o.length;++i){var n=o[i],r=goog.dom.dataset.get(n,"empty"),s;r==="0"?s=sync.model.XmlDom.getUnwrappedSentinel(n.previousSibling):s=sync.model.XmlDom.getUnwrappedSentinel(n.nextSibling);var a=goog.dom.classlist.contains(s,_e.SentinelDisplay.MINIMAL),l=a&&!this.isInlineSentinel(s);l?goog.dom.classlist.add(n,"horizontal-empty-marker"):goog.dom.classlist.remove(n,"horizontal-empty-marker")}};_e.prototype.disposeInternal=function(){goog.events.unlistenByKey(this.optionsListenerKey_),goog.events.unlistenByKey(this.a11yListenerKey_),_e.superClass_.disposeInternal.call(this)};var Vf=_e;sync.view.SentinelsFilter=_e;namespace("sync.view");var Wa=function(t,o){this.url_=t,this.linkHandler_=o,this.linkTooltipClass_="oxy-has-link-tooltip"};goog.inherits(Wa,pe);Wa.prototype.getLinkActivationMessage_=function(t,o,i){var n="",r=`
`+o;if(i)n+=tr(msgs.CLICK_TO_OPEN_URL_,{"0":r});else{var s=goog.userAgent.MAC?"\u2318":"Ctrl";n=tr(msgs.MODIFIER_CLICK_TO_OPEN_URL_,{"0":s,"1":r}),t.setAttribute("data-ctrl-active",!0)}return n};Wa.prototype.enhanceDom=function(t){t.forEach(goog.bind(function(o){o.classList.contains(this.linkTooltipClass_)&&this.addLinkTooltip_(o);for(var i=o.getElementsByClassName(this.linkTooltipClass_),n=0;n<i.length;n++)this.addLinkTooltip_(i[n])},this))};Wa.prototype.addLinkTooltip_=function(t){var o=this.linkHandler_.getLinkPartAncestor(t);if(o&&o.getUrl()){var i="",n=o.getKeyref();n&&(i=tr(msgs.KEYREF_LINK_,{$keyref:n})+`
`);var r=workspace.makeRelative(this.url_,o.getUrl()),s=this.linkHandler_.shouldLinkActivateOnClick(null,o);i+=this.getLinkActivationMessage_(t,r,s),t.title=i}};var Wf=Wa;sync.view.LinkTooltip=Wa;goog.require("goog.events");goog.require("goog.events.EventTarget");namespace("sync.view");var Hi=function(t,o){goog.Disposable.call(this),this.messagesSource_=t,this.messagesDispatcher_=o,this.previewAreaId_="open-system-application-preview"};goog.inherits(Hi,goog.Disposable);Hi.prototype.startListeningForMessages=function(){goog.events.listen(this.messagesSource_,M.EventType.MODEL_CHANGED,goog.bind(this.handleMessages_,this))};Hi.prototype.handleMessages_=function(t){for(var o=t.docUpdate&&t.docUpdate.messages||[],i=0;i<o.length;i++)switch(o[i].type){case sync.api.WebappMessage.SYSTEM_APPLICATION_MESSAGE:var n=JSON.parse(o[i].message);this.handleSystemApplicationMessage_(n);break;case sync.api.WebappMessage.CUSTOM_MESSAGE:this.messagesDispatcher_.dispatchEvent(new sync.api.Editor.WebappMessageReceived(o[i],sync.api.Editor.WebappMessageReceived.Context.EDITING));break}};Hi.prototype.handleSystemApplicationMessage_=function(t){var o=t.mediaType,i=this.getUrlToOpen_(t);o==="html"?sync.util.open(i):(this.showPreviewDialog_(i),o==="video"||o==="audio"||o==="media"?this.showMediaPlayer_(i):o==="image"?(this.showInIframe_(i),this.adjustDialogSize_(i)):o==="pdf"&&this.showInIframe_(i))};Hi.prototype.getUrlToOpen_=function(t){var o=new E(t.url).getScheme(),i=window.location.protocol;i.indexOf(":")!==-1&&(i=i.substring(0,i.indexOf(":")));var n=t.url,r=t.mediaType;if(r!=="html"){var s=i==="https"&&o!=="https",a=o!=="https"&&o!=="http";(JSON.stringify(t.requiresAuth)==="true"||s||a)&&(n=sync.rest.getRestApiUrl("RESTAssetLoader.loadResource",{type:r,resourceURL:n}))}return n};Hi.prototype.showInIframe_=function(t){var o=this.dialog_.getElement();goog.dom.removeChildren(o),o.append(goog.dom.createDom("div",{id:"open-system-application-preview-wrapper"},goog.dom.createDom("iframe",{id:this.previewAreaId_,src:t})))};Hi.prototype.showMediaPlayer_=function(t){var o=this.dialog_.getElement();goog.dom.removeChildren(o);var i=goog.dom.createDom("video",{id:this.previewAreaId_,src:t},tr(msgs.UNSUPPORTED_MEDIA_FORMAT_));i.controls=!0,i.autoplay=!0,o.append(i)};Hi.prototype.showPreviewDialog_=function(t){var o=this.dialog_;o||(o=workspace.createDialog(),this.registerDisposable(o),o.setButtonConfiguration([{key:"open",caption:tr(msgs.OPEN_IN_NEW_TAB_)},{key:"close",caption:tr(msgs.CLOSE_)}]),o.setTitle(tr(msgs.PREVIEW_)),o.setResizable(!0),this.dialog_=o),o.setPreferredSize(800,700),o.show(),o.onSelect(goog.bind(function(i,n){n==="open"&&(this.dialog_.hide(),sync.util.open(i)),goog.dom.removeChildren(this.dialog_.getElement())},this,t))};Hi.prototype.adjustDialogSize_=function(t){var o=goog.dom.createDom("img",{style:"opacity: 0; top: 0px; left: 0px; position: absolute;",src:t});goog.dom.appendChild(document.body,o),goog.events.listen(o,goog.events.EventType.LOAD,goog.bind(function(i){var n=i.naturalWidth,r=i.naturalHeight;goog.dom.removeNode(i),n=n<250?250:n,r=r<180?180:r;var s=116,a=44,l=2;this.dialog_.setPreferredSize(a+l*2+n,s+l*2+r)},this,o))};var Kf=Hi;sync.view.WebappMessageHandler=Hi;goog.require("goog.events.EventHandler");namespace("sync.actions");var xt=function(t,o,i,n){this.pasteHelper={div:null},rc.call(this,t,o,this.pasteHelper,n),this.controller=o,this.readOnlyStatus_=i,this.eventHandler_=new goog.events.EventHandler(this),this.selectionManager=n,this.baseUrl_=t,this.pasteOptions_={SMART:"paste-smart",TEXT:"paste-text",XML:"paste-xml"},this.callsCallback=!0};goog.inherits(xt,rc);xt.prototype.actionPerformed=function(t){this.createDialog_(),this.actionPerformedFor(t,new I.Context({computeSelection:()=>this.selectionManager.getSelection()}))};xt.prototype.actionPerformedFor=function(t,o){this.createDialog_(),this.callback=t,this.dialog.getButtonSet().setButtonEnabled("paste",!1),goog.dom.removeChildren(this.htmlArea),this.textArea.value="",this.dialog.show(),this.switchToAppropriateArea();var i=o.computeSelection()||this.selectionManager.getSelection();this.dialog.onSelect(goog.bind(this.handleSelect,this,i.save()))};xt.prototype.createDialog_=function(){if(!this.dialog){var t=workspace.createDialog();t.setTitle(tr(msgs.PASTE_SPECIAL_)),t.setButtonConfiguration([{key:"paste",caption:tr(msgs.EDIT_PASTE_)},{key:"cancel",caption:tr(msgs.CANCEL_)}]),goog.dom.appendChild(t.getElement(),goog.dom.createDom("div",{id:"paste-dialog-container"},goog.dom.createDom("div",{id:"paste-dialog-header"},tr(msgs.PASTE_IN_FIELD_BELOW_)),this.renderPasteAreas_(),this.renderPasteOptions_())),this.dialog=t,this.attachListeners_()}};xt.prototype.renderPasteAreas_=function(){var t=goog.dom.createDom,o=t("div",{id:"paste-dialog-html-area"});o.setAttribute("contenteditable","true");var i=t("textarea"),n=t("div",{id:"paste-dialog-text-area"},i),r=t("div",{id:"paste-dialog-paste-area"},o,n);return this.htmlArea=o,this.pasteHelper.div=o,this.textAreaContainer=n,this.textArea=i,r};xt.prototype.renderPasteOptions_=function(){var t=goog.dom.createDom;return t("div",{id:"paste-dialog-choice"},t("form","",this.renderOption_(this.pasteOptions_.SMART," "+tr(msgs.SMART_PASTE_),!0),t("br"),this.renderOption_(this.pasteOptions_.TEXT," "+tr(msgs.PASTE_AS_TEXT_)),t("br"),this.renderOption_(this.pasteOptions_.XML," "+tr(msgs.PASTE_AS_XML_))))};xt.prototype.renderOption_=function(t,o,i){var n=goog.dom.createDom("input",{type:"radio",name:"pasteOption",value:t});return i&&n.setAttribute("checked",""),goog.dom.createDom("label","",n,o)};xt.prototype.handleSelect=function(t,o){if(o==="paste"){var i=this.dialog.getElement(),n=this.textArea.value.trim(),r=i.querySelector("#paste-dialog-choice input[type=radio]:checked"),s=r.value;if(s===this.pasteOptions_.TEXT)this.controller.insertPastedText(n,t).finally(this.callback);else if(s===this.pasteOptions_.XML)this.controller.insertXml(n,t,this.callback);else if(s===this.pasteOptions_.SMART){var a=new xa(this.controller,new xr(this.pasteHelper));a.canHandlePaste()?a.handlePaste(t).finally(this.callback):new gn(this.baseUrl_).uploadImages(this.htmlArea).then(l=>this.controller.insertHtml(l,t)).finally(this.callback)}}else this.callback()};xt.prototype.switchToAppropriateArea=function(){var t=this.dialog.getElement().querySelector("#paste-dialog-choice input[type=radio]:checked").value;t===this.pasteOptions_.SMART?(goog.style.setStyle(this.htmlArea,"z-index","1"),goog.style.setStyle(this.textAreaContainer,"z-index","0"),this.htmlArea.focus()):(t===this.pasteOptions_.TEXT||t===this.pasteOptions_.XML)&&(goog.style.setStyle(this.htmlArea,"z-index","0"),goog.style.setStyle(this.textAreaContainer,"z-index","1"),this.textArea.focus())};xt.prototype.attachListeners_=function(){for(var t=goog.events.EventType,o=this.dialog.getElement().querySelectorAll("#paste-dialog-choice input"),i=0;i<o.length;i++)this.eventHandler_.listen(o[i],t.CLICK,goog.bind(this.switchToAppropriateArea,this));var n=goog.userAgent.IE?t.PASTE:t.INPUT;this.eventHandler_.listen(this.htmlArea,n,goog.bind(function(){setTimeout(goog.bind(function(){this.textArea.value=this.htmlArea.textContent,this.dialog.getButtonSet().setButtonEnabled("paste",!0)},this),0)},this)),this.eventHandler_.listen(this.htmlArea,t.PASTE,r=>{var s=r.getBrowserEvent().clipboardData.getData("text/rtf");setTimeout(()=>{new Oa(this.htmlArea).fixupImageReferencesOnPaste(s)})}),this.eventHandler_.listen(this.textArea,n,goog.bind(function(){setTimeout(goog.bind(function(){this.htmlArea.textContent=this.textArea.value,this.dialog.getButtonSet().setButtonEnabled("paste",!0)},this),0)},this))};xt.prototype.getDisplayName=function(){return tr(msgs.PASTE_SPECIAL_)+"..."};xt.prototype.getDescription=function(){return tr(msgs.PASTE_SPECIAL_)};xt.prototype.getLargeIcon=function(t){return sync.util.image.getImageUrl("/images/Paste24.png",t)};xt.prototype.getSmallIcon=function(t){return sync.util.image.getImageUrl("/images/PasteSpecialDITA16.png",t)};xt.prototype.isEnabled=function(){return!this.selectionManager.evalSelectionFunction(sync.util.isInReadOnlyContent)&&!this.readOnlyStatus_.isReadOnly()};xt.prototype.isEnabledFor=function(t){return!sync.util.isInReadOnlyContent.apply(t.computeSelection())&&!this.readOnlyStatus_.isReadOnly()};xt.prototype.dispose=function(){this.eventHandler_.dispose(),this.dialog&&this.dialog.dispose()};var Gf=xt;sync.actions.PasteSpecial=xt;namespace("sync.actions");var Wr=function(t,o){Bn.call(this,o),this.controller=t,this.callsCallback=!0};goog.inherits(Wr,Bn);Wr.prototype.copyFallback=function(t){return this.dialog||this.createDialog_(),this.dialog.show(),this.prepareCopy(this.copyDialogArea_,t),sync.events.listenOnce(this.dialog.getEventTarget(),goog.ui.PopupBase.EventType.BEFORE_HIDE)};Wr.prototype.createDialog_=function(){var t=workspace.createDialog();t.setTitle(tr(msgs.EDIT_COPY_)),t.setButtonConfiguration(sync.api.Dialog.ButtonConfiguration.CANCEL);var o=goog.dom.createDom,i=o("div",{id:"copy-dialog-copy-area",contentEditable:"true"});goog.dom.appendChild(t.getElement(),o("div","copy-dialog-container",o("div","copy-dialog-header",tr(msgs.INVOKE_CONTEXTMENU_TO_COPY_)),i)),this.dialog=t,this.copyDialogArea_=i,this.attachListeners_()};Wr.prototype.attachListeners_=function(){goog.events.listen(this.copyDialogArea_,goog.events.EventType.COPY,goog.bind(function(){setTimeout(goog.bind(function(){this.dialog.hide()},this),500)},this))};Wr.prototype.getShortcutForDisplay=function(){return new J("M1 C")};Wr.prototype.dispose=function(){this.dialog&&this.dialog.dispose()};var qf=Wr;sync.actions.CopySpecial=Wr;namespace("sync.actions");var $e=function(t,o,i){Bn.call(this,i),this.controller=t,this.readOnlyStatus_=o,this.callsCallback=!0};goog.inherits($e,Bn);$e.prototype.actionPerformed=function(t){var o=new I.Context({computeSelection:()=>this.selectionManager.getSelection()});this.actionPerformedFor(t,o)};$e.prototype.copyFallback=function(t){return this.cutShowDialog_(t.save())};$e.prototype.getCommand=function(){return"cut"};$e.prototype.alterClipboard=function(){return document.execCommand(this.getCommand()),this.cutSelectionFromDocument_()};$e.prototype.getClipboardText=function(t){var o=sync.rest.getSyncMethod("RESTDocumentControllers.documentController.cut"),i=o(t);return this.docUpdate=i.docUpdate,i.text};$e.prototype.cutShowDialog_=function(t){return this.dialog||this.createDialog_(),this.dialog.show(),this.prepareCopy(this.copyArea_,t),sync.events.listenOnce(this.dialog.getEventTarget(),goog.ui.PopupBase.EventType.BEFORE_HIDE)};$e.prototype.createDialog_=function(){var t=goog.dom.createDom,o=workspace.createDialog();o.setTitle(tr(msgs.EDIT_CUT_)),o.setButtonConfiguration(sync.api.Dialog.ButtonConfiguration.CANCEL);var i=t("div",{id:"cut-dialog-copy-area"});i.setAttribute("contenteditable","true"),goog.dom.append(o.getElement(),t("div","copy-dialog-container",t("div","copy-dialog-header",tr(msgs.CUT_SELECTION_BELOW_)),i)),this.dialog=o,this.copyArea_=i,this.attachListeners_()};$e.prototype.attachListeners_=function(){var t=goog.bind(function(){setTimeout(goog.bind(function(){this.cutSelectionFromDocument_()},this),0),setTimeout(goog.bind(function(){this.dialog.hide()},this),500)},this);goog.events.listen(this.copyArea_,[goog.events.EventType.CUT,goog.events.EventType.COPY],t)};$e.prototype.cutSelectionFromDocument_=function(){var t;return this.docUpdate?(this.controller.applyUpdate_(this.docUpdate),this.docUpdate=null,t=goog.Promise.resolve()):console.error("There was no update available after cut was performed!"),t};$e.prototype.getDisplayName=function(){return tr(msgs.EDIT_CUT_)};$e.prototype.getLargeIcon=function(t){return sync.util.image.getImageUrl("/images/Cut24.png",t)};$e.prototype.getSmallIcon=function(t){return sync.util.image.getImageUrl("/images/Cut16.png",t)};$e.prototype.getDescription=function(){return tr(msgs.EDIT_CUT_)};$e.prototype.isEnabled=function(){return $e.superClass_.isEnabled.call(this)&&!this.selectionManager.evalSelectionFunction(sync.util.isInReadOnlyContent)&&!this.readOnlyStatus_.isReadOnly()};$e.prototype.isEnabledFor=function(t){return $e.superClass_.isEnabledFor.call(this,t)&&!sync.util.isInReadOnlyContent.apply(t.computeSelection())&&!this.readOnlyStatus_.isReadOnly()};$e.prototype.getShortcutForDisplay=function(){return new J("M1 X")};$e.prototype.dispose=function(){this.dialog&&this.dialog.dispose()};var Xf=$e;sync.actions.CutSpecial=$e;namespace("sync.ui");var zg="sync-radio";customElements.define(zg,class extends HTMLElement{static get observedAttributes(){return["label","value","group","checked","disabled"]}constructor(){super();let t=sync.ui.util.getGlobalId(),o=sync.ui.util.createElement;this.radio_=o("input",{id:t,type:"radio",class:"sync-radio__input"}),this.label_=o("label",{for:t,class:"sync-radio__label"}),this.root_=o("div",{class:"sync-radio"},[this.radio_,this.label_])}connectedCallback(){this.appendChild(this.root_)}attributeChangedCallback(t,o,i){let n=`set${goog.string.capitalize(t)}`;goog.isFunction(this[n])&&this[n](i,!1)}setLabel(t){this.label_.innerText=t}getLabel(){return this.label_.innerText}setValue(t){this.radio_.value=t}getValue(){return this.radio_.value}setGroup(t){this.radio_.name=t}getGroup(){return this.radio_.name}set checked(t){this.radio_.checked=sync.ui.util.attrBooleanValue(t)}setChecked(t){this.radio_.checked=sync.ui.util.attrBooleanValue(t)}isChecked(){return this.radio_.checked}setDisabled(t,o=!0){t=sync.ui.util.attrBooleanValue(t),this.root_.classList.toggle("sync-radio--disabled",t),this.radio_.disabled=t,o&&this.toggleAttribute("disabled",t)}isDisabled(){return this.radio_.disabled}});var zf=zg;sync.ui.Radio=zg;namespace("sync.ui");var Yf="sync-checkbox",Qf=class extends HTMLElement{static get observedAttributes(){return["label","value","checked","disabled"]}constructor(){super();let o=sync.ui.util.getGlobalId(),i=sync.ui.util.createElement;this.label_=i("label",{for:o,class:"sync-checkbox__label"}),this.checkbox_=i("input",{id:o,type:"checkbox",class:"sync-checkbox__input"}),this.root_=i("div",{class:"sync-checkbox"},[this.checkbox_,this.label_])}connectedCallback(){this.appendChild(this.root_)}attributeChangedCallback(o,i,n){let r=`set${goog.string.capitalize(o)}`;goog.isFunction(this[r])&&this[r](n,!1)}setLabel(o){this.label_.innerText=o}getLabel(){return this.label_.innerText}setValue(o){this.checkbox_.value=o}getValue(){return this.checkbox_.value}set checked(o){this.checkbox_.checked=sync.ui.util.attrBooleanValue(o)}setChecked(o){this.checkbox_.checked=sync.ui.util.attrBooleanValue(o)}isChecked(){return this.checkbox_.checked}setDisabled(o,i=!0){o=sync.ui.util.attrBooleanValue(o),this.root_.classList.toggle("sync-checkbox--disabled",o),this.checkbox_.disabled=o,i&&this.toggleAttribute("disabled",o)}isDisabled(){return this.checkbox_.disabled}};customElements.define(Yf,Qf);var Kr=Yf;goog.require("goog.array");namespace("sync.view");var Jf=class extends sync.react.Component{render(){var t=[],o=[];goog.array.forEach(this.props.groups,function(n){n.main?t.push(n):o.push(n)}),t.length||(t=o,o=[]);var i=this.props.selection||[];return i.length||(i=[t[0].key]),sync.react.h("div",null,this.renderMain(t,i),this.renderAlternates(o,i))}renderAlternates(t,o){return t.length?sync.react.h("div",{className:"styles-sect"},sync.react.h("span",{className:"styles-h1"},tr(msgs.ADDITIONAL_STYLES_)),goog.array.map(t,function(i){return this.renderOption(this.getTitle_(i),i.key,o,!1)},this)):null}renderMain(t,o){return t.length?sync.react.h("div",{className:"styles-sect"},sync.react.h("span",{className:"styles-h1"},tr(msgs.MAIN_STYLE_)),goog.array.map(t,function(i){return this.renderOption(this.getTitle_(i),i.key,o,!0)},this)):null}renderOption(t,o,i,n){var r=i.indexOf(o)!==-1;return n?sync.react.h("sync-radio",{key:t,label:t,value:o,checked:r,group:"main-styles-radio"}):sync.react.h("sync-checkbox",{key:t,label:t,value:o,checked:r})}getTitle_(t){return t.title||tr(msgs.DEFAULT_)}},$f=Jf;sync.view.StylesSelector=Jf;namespace("sync.actions");var Gr=function(t){_.call(this,{displayName:tr(msgs.CHOOSE_STYLE_)+"..."}),this.stylesManager_=t};goog.inherits(Gr,_);Gr.prototype.actionPerformed=function(t){var o=t||goog.nullFunction,i=this.getDialog(),n=i.getElement();i.show(),goog.dom.classlist.add(n,"oxy-spinner"),new Promise(r=>i.onSelect(r)).then(r=>{r==="ok"&&this.stylesManager_.applyGroups(this.getGroupsToApply_())}).finally(o),this.renderDialog_()};Gr.prototype.renderDialog_=function(){var t="oxy-spinner",o=this.getDialog().getElement(),i=this.stylesManager_.getCurrentSelection();this.stylesManager_.getGroups().then(function(n){goog.dom.classlist.remove(o,t),sync.react.render(sync.react.createElement($f,{groups:n,selection:i}),o)}).thenCatch(function(n){sync.util.error.logError(n),o.textContent=tr(msgs.ERROR_),goog.dom.classlist.remove(o,t)})};Gr.prototype.getGroupsToApply_=function(){var t=[],o=this.getDialog().getElement(),i=o.querySelectorAll("sync-radio,sync-checkbox");for(var n of i)n.isChecked()&&t.push(n.getValue());return t};Gr.prototype.getDialog=function(){if(!this.dialog){var t=workspace.createDialog();t.setTitle(tr(msgs.CHOOSE_STYLE_)),t.setPreferredSize(400,500),t.setResizable(!0),this.dialog=t}return this.dialog};Gr.prototype.dispose=function(){this.dialog&&this.dialog.dispose()};var Zf=Gr;sync.actions.ChangeCssAction=Gr;goog.require("goog.events.EventTarget");namespace("sync.view");sync.view.ViewRenderer=function(){goog.events.EventTarget.call(this)};goog.inherits(sync.view.ViewRenderer,goog.events.EventTarget);sync.view.ViewRenderer.prototype.getTitle=function(){return""};sync.view.ViewRenderer.prototype.getTitleTooltip=function(){return""};sync.view.ViewRenderer.prototype.getToolbarDescriptor=function(){};sync.view.ViewRenderer.prototype.getToolbarActionsMap=function(){};sync.view.ViewRenderer.prototype.install=function(t){};sync.view.ViewRenderer.prototype.editorChanged=function(t){};sync.view.ViewRenderer.prototype.supportsEditor=function(t){return!t.isDisposed()&&t.getEditorType()===sync.api.Editor.EditorTypes.AUTHOR};sync.view.ViewRenderer.prototype.opened=function(){};sync.view.ViewRenderer.prototype.closed=function(){};sync.view.ViewRenderer.prototype.focus=function(){};sync.view.ViewRenderer.prototype.renderIcon=function(){var t=this.getIcon(sync.util.getHdpiFactor());return t?sync.util.renderLargeIcon(t):null};sync.view.ViewRenderer.prototype.getIcon=function(t){return null};var Yn={STALE:"stale",IRRELEVANT:"irrelevant",RELEVANT:"relevant",NOT_RETRIEVED:"not-retrieved"},Ae=class extends goog.events.EventTarget{constructor(){super();this.results_=[],this.resultsRelevance_=Yn.IRRELEVANT,this.selectedResultId_=null}setSelectedResult(o){this.updateSelectedResult_(o)}setSelectedResultByIndex(o){this.updateSelectedResult_(this.results_[o].highlightId)}updateSelectedResult_(o){this.selectedResultId_!==o&&(this.selectedResultId_=o,this.dispatchEvent({type:Ae.SELECTION_CHANGED}))}clearSelectedHighlight(){this.updateSelectedResult_(null)}setResults(o){this.results_=o,this.resultsRelevance_=Yn.RELEVANT,this.clearSelectedHighlight(),this.dispatchEvent({type:Ae.RESULTS_CHANGED})}markResultsStale(){this.resultsRelevance_===Yn.RELEVANT&&(this.resultsRelevance_=Yn.STALE,this.dispatchEvent({type:Ae.RESULTS_CHANGED}))}markResultsNotRetrieved(){this.markMissingResults_(Yn.NOT_RETRIEVED)}clearResults(){this.markMissingResults_(Yn.IRRELEVANT)}markMissingResults_(o){this.resultsRelevance_=o,this.results_=[],this.clearSelectedHighlight(),this.dispatchEvent({type:Ae.RESULTS_CHANGED})}areResultsRelevant(){return this.resultsRelevance_===Yn.RELEVANT}areResultsStale(){return this.resultsRelevance_===Yn.STALE}areResultsNotRetrieved(){return this.resultsRelevance_===Yn.NOT_RETRIEVED}getResults(){return this.results_}getResultIdAtIndex(o){return this.results_[o].highlightId}getSelectionIndex(){return this.results_.findIndex(o=>o.highlightId===this.selectedResultId_)}getSelectionId(){return this.selectedResultId_}getSelectionEndpoints(){let o=this.getSelectionIndex();if(o===-1)return null;let i=this.results_[o];return{start:this.convertToPosition_(i.startPosition),end:this.convertToPosition_(i.endPosition)}}getResultsCount(){return this.results_.length}getResultAfterCaret(o){for(var i=0;i<this.results_.length;i++){let s=this.results_[i];var n=this.compareResultEndpointToPos_(s.endPosition,o);if(n>=0){var r=this.compareResultEndpointToPos_(s.startPosition,o)<=0;return{index:i,containsCaret:r}}}return{index:0,containsCaret:!1}}compareResultEndpointToPos_(o,i){var n=this.convertToPosition_(o);return p.compareCanonicalRelativePositions(n,i)}convertToPosition_(o){return new sync.position.RelativeContentPosition(o.nodeId,o.sentinelType,o.distance)}};Ae.SELECTION_CHANGED="selection-changed";Ae.RESULTS_CHANGED="results-changed";var qr=class extends goog.events.EventTarget{constructor(o){super();this.selectionManager_=o,this.isOccurenceSelecteInDoc_=!1,this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_)}selectOccurrenceChunks(o){this.eventHandler_.removeAll(),this.selectionManager_.setFakeSelectionOnChunks(o),this.eventHandler_.listen(this.selectionManager_,sync.api.SelectionManager.EventType.SELECTION_CHANGED,this.dispatchSelectionClearedEvent_)}dispatchSelectionClearedEvent_(){this.eventHandler_.removeAll(),this.dispatchEvent(qr.SELECTION_CLEARED)}};qr.SELECTION_CLEARED="selection-cleared";namespace("sync.ctrl");var Yg="FIND_HIGHLIGHT_KEY",ct=function(t,o){goog.events.EventTarget.call(this),this.selectionManager_=t,this.findSelectionManager_=new qr(t),this.registerDisposable(this.findSelectionManager_),this.findSelectionManager_.listen(qr.SELECTION_CLEARED,this.dispatchSelectionClearedEvent_,!1,this),this.controller_=o,this.highlighter_=o.getHighlighter(),this.highlightChunkSize_=300,this.chunkDelayMs_=300,this.highlightingTimeouts_=[],this.currentlyRenderedHighlightIds_=[]};goog.inherits(ct,goog.events.EventTarget);ct.prototype.listenForSelection=function(t){t.listen(Ae.SELECTION_CHANGED,()=>this.selectHighlight_(t.getSelectionId()))};ct.prototype.stopOngoingHighlighting=function(){this.highlightingTimeouts_.forEach(clearTimeout),this.highlightingTimeouts_=[]};ct.prototype.disposeInternal=function(){ct.superClass_.disposeInternal.call(this),this.stopOngoingHighlighting()};ct.prototype.highlightOccurrences=function(t){this.removeAllHighlights();for(var o=[],i=this.highlightChunkSize_,n=0;n<t.length;n+=i){var r=t.slice(n,n+i);o.push(r)}return new Promise(s=>{o.forEach((a,l)=>{var c=setTimeout(()=>{this.highlightSliceOfOccurrences_(a);var d=l===o.length-1;d&&s()},l*this.chunkDelayMs_);this.highlightingTimeouts_.push(c)})})};ct.prototype.removeAllHighlights=function(){this.stopOngoingHighlighting();var t=this.saveDocumentSelection_();try{let o=this.controller_.getDocument().id;this.highlighter_.removeTextHighlightByClass(o,Yg),this.currentlyRenderedHighlightIds_=[]}finally{this.restoreDocumentSelection_(t)}};ct.prototype.highlightSliceOfOccurrences_=function(t){var o=[];t.forEach(n=>{var r=this.relativePositionFromJson_(n.startPosition),s=p.toCanonicalRelativePosition(this.relativePositionFromJson_(n.endPosition));o.push({start:r,end:s,attrs:{className:Yg,"data-find-id":n.highlightId}}),this.currentlyRenderedHighlightIds_.push(n.highlightId)});var i=this.saveDocumentSelection_();try{this.highlighter_.renderTextHighlights(o)}finally{this.restoreDocumentSelection_(i)}};ct.prototype.relativePositionFromJson_=function(t){return new sync.position.RelativeContentPosition(t.nodeId,t.sentinelType,t.distance)};ct.prototype.saveDocumentSelection_=function(){var t=null;if(this.selectionManager_.isDocFocused()){var o=this.selectionManager_.getSelection();t=o.save()}return t};ct.prototype.restoreDocumentSelection_=function(t){t&&this.selectionManager_.setSelection(t.restore())};ct.prototype.getHtmlElements=function(t){var o=this.controller_.getDocument().getHtmlNode();return goog.array.toArray(o.querySelectorAll('[data-find-id="'+t+'"]'))};ct.prototype.getResultId=function(t){var o=goog.dom.getAncestorByClass(t,Yg);return o&&o.getAttribute("data-find-id")};ct.prototype.selectHighlight_=function(t){if(t){var o=this.getHtmlElements(t);this.findSelectionManager_.selectOccurrenceChunks(o),this.dispatchEvent(new ey(o))}};ct.prototype.dispatchSelectionClearedEvent_=function(){this.dispatchEvent(ct.HIGHLIGHT_SELECTION_CLEARED)};var ey=class extends goog.events.Event{constructor(o){super(ct.HIGHLIGHT_SELECTED);this.chunks=o}};ct.HIGHLIGHT_SELECTED="HIGHLIGHT_SELECTED";ct.HIGHLIGHT_SELECTION_CLEARED="HIGHLIGHT_SELECTION_CLEARED";var Ka=ct;sync.ctrl.FindHighlighter=ct;namespace("sync.ctrl");var Sc=function(t,o){this.controller_=o,this.selectionManager_=t};Sc.prototype.applyUpdateWithoutMovingFocus_=function(t){var o=t.clearSelection();this.controller_.applyUpdate_(t),this.selectionManager_.setSelection(o.restore(),{focus:!1})};Sc.prototype.replaceSelection=function(t){var o={docId:this.controller_.docId,textToReplace:t},i=this.selectionManager_.getSelection();return i.extend(o),sync.rest.callAsyncNative("RESTFindReplaceSupport.replaceInDocument",o).then(n=>Ne.of(n)).then(n=>this.applyUpdateWithoutMovingFocus_(n))};Sc.prototype.replaceAll=function(t,o){return sync.rest.callAsyncNative("RESTFindReplaceSupport.replaceAllInDocument",{docId:this.controller_.docId,textToFind:t.findText,textToReplace:o,matchCase:t.findOptions.matchCase,wholeWords:t.findOptions.wholeWords}).then(i=>Ne.of(i)).then(i=>this.applyUpdateWithoutMovingFocus_(i))};var ty=Sc;sync.ctrl.OccurrenceReplacer=Sc;goog.require("goog.string");namespace("sync.ctrl");var Tc=function(t){this.findOptions_=t,this.contentModel_=new To};Tc.prototype.matches=function(t,o){var i=this.contentModel_.getTextBetween(t.start,t.end),n;return this.findOptions_.matchCase?n=i===o:n=goog.string.caseInsensitiveEquals(i,o),this.findOptions_.wholeWords&&(n=n&&this.isWholeWordSelected_(t)),n};Tc.prototype.isWholeWordSelected_=function(t){var o=this.contentModel_.getCharAt(t.end),i=this.contentModel_.getCharBefore(t.start);return this.isWordSeparator_(i)&&this.isWordSeparator_(o)};Tc.prototype.isWordSeparator_=function(t){if(t!==null){var o=ge.getCharType(t,0);return o!==ge.CharType.LETTER_OR_DIGIT}else return!0};var oy=Tc;sync.ctrl.TextMatcher=Tc;var Sp=class extends goog.Disposable{constructor(o,i){super();this.throttledSyncs_=!1,this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_),this.searchResultsModel_=i,o&&(this.syncThrottle_=o.getSyncThrottle(),this.eventHandler_.listen(i,Ae.RESULTS_CHANGED,this.toggleSyncThrottleBasedOnModel_,!0))}toggleSyncThrottleBasedOnModel_(){var o=this.searchResultsModel_.getResults(),i=o.length;i>0?this.startSyncThrottling():this.stopSyncThrottling()}stopSyncThrottling(){this.syncThrottle_&&this.throttledSyncs_&&(this.throttledSyncs_=!1,this.syncThrottle_.leaveLowFrequencyMode())}startSyncThrottling(){this.syncThrottle_&&!this.throttledSyncs_&&(this.throttledSyncs_=!0,this.syncThrottle_.enterLowFrequencyMode())}};var Xr=class{constructor(o,i){this.matchCase=o,this.wholeWords=i}equals(o){return this.matchCase===o.matchCase&&this.wholeWords===o.wholeWords}};Xr.default=new Xr(!1,!1);var _n=class{constructor(o,i){this.findText=o,this.findOptions=i}equals(o){return this.findText===o.findText&&this.findOptions.equals(o.findOptions)}};_n.default=new _n("",Xr.default);goog.require("goog.dom.dataset");goog.require("goog.events");namespace("sync.ctrl");var de=function(t,o,i){goog.events.EventTarget.call(this),this.docUpdateSinceLastFind_=null,this.editingSupport_=i,this.controller_=i.getController(),this.readOnlyStatus_=i.getReadOnlyStatus(),this.findReplaceForm_=t,this.selectionManager_=i.getSelectionManager(),this.highlighter_=new Ka(this.selectionManager_,this.controller_),this.highlighter_.listenForSelection(o),this.registerDisposable(this.highlighter_),this.replacer_=new ty(this.selectionManager_,this.controller_),this.actionsExecutor_=i.getActionsExecutor(),this.updateReadOnlyMode_();var n=sync.view.FindReplaceEvent.EventType,r=new goog.events.EventHandler(this);this.registerDisposable(r),r.listen(t,n.FIND_NEXT,goog.bind(this.handleFindNextEvent_,this)).listen(t,n.FIND_ON_DIALOG_OPEN,goog.bind(function(){this.docUpdateSinceLastFind_=!0},this)).listen(t,n.REPLACE,goog.bind(this.replace,this),!0).listen(t,n.REPLACE_ALL,goog.bind(this.replaceAll,this),!0).listen(t,sync.view.FindReplaceEvent.EventType.HIDDEN,goog.bind(this.viewWasHidden_,this)).listen(t,sync.view.FindReplaceEvent.EventType.OPENED,goog.bind(this.viewWasOpened_,this)).listen(t,n.SEARCH_CHANGE,goog.bind(this.updateSearchParams_,this)).listen(this.readOnlyStatus_,ue.EventTypes.READ_ONLY_STATUS_CHANGED,goog.bind(this.updateReadOnlyMode_,this),!0).listen(this.controller_,M.EventType.BEFORE_MODEL_CHANGED,this.resetStateBeforeModelChanged_,!0).listen(document,goog.events.EventType.CLICK,goog.bind(this.handleClickInDoc_,this)).listen(this.controller_,M.EventType.MODEL_CHANGED,goog.bind(this.scheduleSearchAfterModelChange_,this)).listen(this.highlighter_,Ka.HIGHLIGHT_SELECTION_CLEARED,this.clearResultsSelection_,!1,this).listen(this.highlighter_,Ka.HIGHLIGHT_SELECTED,this.updateReadOnlyMode_);var s=i.getConcurrentEditingManager();this.syncThrottler_=new Sp(s,o),this.registerDisposable(this.syncThrottler_),this.findInProgressFor_=_n.default,this.latestSearchParams_=_n.default,this.lastSearchFailed_=!1,this.searchResultsModel_=o,this.ignoreNextModelUpdateEvent_=!1};goog.inherits(de,goog.events.EventTarget);de.prototype.updateSearchParams_=function(){var t=this.findReplaceForm_.getSearchParams();this.latestSearchParams_.equals(t)||(this.latestSearchParams_=t,this.reset(),this.searchResultsModel_.markResultsStale())};de.prototype.handleClickInDoc_=function(t){var o=this.highlighter_.getResultId(t.target),i=this.searchResultsModel_.getSelectionId()===o;o&&!i&&(this.selectHighlight_(o),this.editingSupport_.focus())};de.prototype.resetStateBeforeModelChanged_=function(t){t.docUpdate.hasChanges()&&(this.docUpdateSinceLastFind_=!0,this.isClosed_?this.clear():this.findReplaceForm_.isVisible()?this.highlighter_.stopOngoingHighlighting():this.syncThrottler_.stopSyncThrottling())};de.prototype.setClosed=function(){this.isClosed_=!0,this.reset(),this.searchResultsModel_.clearSelectedHighlight(),this.findReplaceForm_.setHidden()};de.prototype.scheduleSearchAfterModelChange_=function(t){if(this.ignoreNextModelUpdateEvent_){this.ignoreNextModelUpdateEvent_=!1;return}this.postponeUpdates_?this.updatesWerePostponed_=!0:this.findReplaceForm_.scheduleSearchAfterModelChange(t)};de.prototype.viewWasHidden_=function(){this.syncThrottler_.stopSyncThrottling(),this.postponeUpdates_=!0};de.prototype.viewWasOpened_=function(){this.isClosed_=!1,this.postponeUpdates_=!1,this.updatesWerePostponed_&&(this.updatesWerePostponed_=!1,this.findReplaceForm_.scheduleSearch())};de.prototype.handleFindNextEvent_=function(t){if(this.findReplaceForm_.getFindText().length===0){this.emptySearch_();return}var o=!1,i=!1,n=!1;if(t&&t.opts){var r=t.opts;o=r.backwards,i=r.skipSelectNext,n=r.inclusive}this.findNext(o,i,n)};de.prototype.getDocumentSelection=function(){var t=null,o=this.selectionManager_.getSelection();return o&&(t=o.save()),t};de.prototype.updateReadOnlyMode_=function(){this.findReplaceForm_.toggleReplace(this.selectionManager_.evalSelectionFunction(sync.util.isInReadOnlyContent)||this.readOnlyStatus_.isReadOnly())};de.prototype.sameSearchParameters_=function(){return this.findInProgressFor_.equals(this.latestSearchParams_)};de.prototype.findNext=function(t,o,i){if(!this.sameSearchParameters_()||this.docUpdateSinceLastFind_||this.lastSearchFailed_){this.findInProgressFor_=this.latestSearchParams_;var n=this.latestSearchParams_;return this.fetchSearchResults_(n).then(r=>this.updateWithNewResults_(n,r)).then(r=>r&&this.selectRelevantOccurrence_(t,o,i)).catch(r=>this.markResultsAsNotRetrieved_(r))}else return this.selectRelevantOccurrence_(t,o,i),Promise.resolve()};de.prototype.markResultsAsNotRetrieved_=function(t){this.reset(),this.searchResultsModel_.markResultsNotRetrieved(),sync.util.error.logError(t),this.findReplaceForm_.showWarning(tr(msgs.COULD_NOT_CONNECT_TO_SERVER_)),this.lastSearchFailed_=!1};de.prototype.fetchSearchResults_=function(t){var o=t.findOptions;return sync.rest.callAsyncNative("RESTFindReplaceSupport.findAllInDocument",{docId:this.controller_.docId,text:t.findText,matchCase:o.matchCase,wholeWords:o.wholeWords})};de.prototype.updateWithNewResults_=function(t,o){if(this.reset(),!this.isDisposed()&&t===this.latestSearchParams_){if(this.searchResultsModel_.setResults(o),this.docUpdateSinceLastFind_=!1,o.length)return this.highlighter_.highlightOccurrences(o).then(()=>!0);this.findReplaceForm_.showWarning()}return Promise.resolve(!1)};de.prototype.selectRelevantOccurrence_=function(t,o,i){let n=this.searchResultsModel_.getResultsCount();if(!this.isDisposed()&&!o&&n>0){var r=this.findNextIndexToSelect_(t,i),s=this.searchResultsModel_.getResultIdAtIndex(r);this.selectHighlight_(s)}};de.prototype.findNextIndexToSelect_=function(t,o){var i=0,n=this.searchResultsModel_.getSelectionIndex();n!==-1?t?i=n-1:o?i=n:i=n+1:i=this.findNextIndexToSelectFromCaret_(t,o);let r=this.searchResultsModel_.getResultsCount();return i=(i+r)%r,i};de.prototype.findNextIndexToSelectFromCaret_=function(t,o){var i=0,n=this.selectionManager_.getSelection(),r=n.start.toRelativeContentPosition(),{index:s,containsCaret:a}=this.searchResultsModel_.getResultAfterCaret(r);return t?i=s-1:a&&!o?i=s+1:i=s,i};de.prototype.reset=function(){this.highlighter_.removeAllHighlights(),this.findReplaceForm_.hideWarning(),this.lastSearchFailed_=!1};de.prototype.replace=function(){var t=this.findReplaceForm_.getReplaceText();this.actionsExecutor_.executeDocumentTransaction(()=>this.sameSearchParameters_()&&this.isOccurrenceSelected_()?(this.ignoreNextModelUpdateEvent_=!0,this.replacer_.replaceSelection(t).then(()=>this.findNext(!1,!1,!0))):this.findNext(!1,!1,!1))};de.prototype.isOccurrenceSelected_=function(){if(this.searchResultsModel_.getSelectionId()!==null)return!0;var t=new oy(this.findInProgressFor_.findOptions),o=this.getDocumentSelection();return t.matches(o,this.findInProgressFor_.findText)};de.prototype.replaceAll=function(){var t=this.findReplaceForm_;let o=t.getSearchParams(),i=t.getReplaceText();this.actionsExecutor_.executeDocumentTransaction(()=>this.replacer_.replaceAll(o,i).then(()=>this.findNext(!1,!1,!1)))};de.prototype.selectHighlight_=function(t){this.searchResultsModel_.setSelectedResult(t)};de.prototype.clearResultsSelection_=function(){this.searchResultsModel_.clearSelectedHighlight()};de.prototype.clear=function(){this.findReplaceForm_.reset(),this.reset(),this.searchResultsModel_.clearResults()};de.prototype.emptySearch_=function(){this.reset(),this.searchResultsModel_.clearResults(),this.findInProgressFor_=new _n("",this.findInProgressFor_.findOptions)};de.prototype.getHighlighter=function(){return this.highlighter_};var Tp=de;sync.ctrl.FindReplaceController=de;var bp="find-status-indicator--shown",Ap=class extends goog.Disposable{constructor(o,i){super();this.a11y_=o,this.resultsModel_=i;var n=new goog.events.EventHandler(this);this.registerDisposable(n),n.listen(this.resultsModel_,[Ae.RESULTS_CHANGED,Ae.SELECTION_CHANGED],goog.bind(this.updateProgress_,this));var r=goog.dom.createDom;this.searchProgressEl_=r("div",{id:"searchProgress",role:"application",class:"find-status-indicator find-status-indicator--shown"},"\xA0"),this.findReplaceWarning_=r("div",{id:"findReplaceWarning",class:"find-status-indicator"},tr(msgs.NO_OCCURRENCE_FOUND_))}getElements(){return[this.searchProgressEl_,this.findReplaceWarning_]}showWarning(o){this.findReplaceWarning_&&(o||(o=tr(msgs.NO_OCCURRENCE_FOUND_)),this.findReplaceWarning_.textContent=o,this.searchProgressEl_.classList.toggle(bp,!1),this.findReplaceWarning_.classList.toggle(bp,!0),this.a11y_&&this.a11y_.speak(o))}hideWarning(){this.findReplaceWarning_&&(this.searchProgressEl_.classList.toggle(bp,!0),this.findReplaceWarning_.classList.toggle(bp,!1))}showNumberOfResults_(){var o=this.resultsModel_.getResultsCount();this.searchProgressEl_.textContent=`${tr(msgs.Results)}: ${o}`}clearProgress_(){this.searchProgressEl_.textContent="\xA0"}updateProgressText_(){var o=this.resultsModel_.getResultsCount(),i=this.resultsModel_.getSelectionIndex()+1;this.searchProgressEl_.textContent=tr(msgs.FIND_CURRENT_OF_TOTAL_,{$CURRENT:i,$TOTAL:o})}updateProgress_(){this.resultsModel_.getSelectionId()===null?this.resultsModel_.areResultsRelevant()?this.showNumberOfResults_():this.clearProgress_():this.updateProgressText_()}};namespace("sync.actions.findreplace");var bc=sync.ui.util.createElement;sync.view.FindReplaceEvent=function(t,o){this.type=t,this.opts=o};sync.view.FindReplaceEvent.EventType={OPENED:"opened",HIDDEN:"hidden",FIND_INPUT_CLEARED:"find_input_cleared",FIND_NEXT:"find_next",REPLACE:"replace_occurrence",REPLACE_ALL:"replace_all_occurrences",SEARCH_CHANGE:"search_change",FIND_ON_DIALOG_OPEN:"find_on_dialog_open"};var A=function(t,o,i){goog.events.EventTarget.call(this),this.a11y_=t,this.contentModel_=new To,this.disabledReadOnlyClass_="disabled-ro",this.alwaysReadOnly_=i,this.resultsModel_=o,this.likelyIntentionalTextLength_=3,this.refreshDelay_=600,this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_);var n=sync.view.FindReplaceEvent.EventType;this.buttonEvents_={arrowup:new sync.view.FindReplaceEvent(n.FIND_NEXT,{backwards:!0}),arrowdown:new sync.view.FindReplaceEvent(n.FIND_NEXT),replace:n.REPLACE,replaceall:n.REPLACE_ALL},this.status_=null,this.upDownButtonsEnabled_=!1,this.useNarrowLayout_=!1};goog.inherits(A,goog.events.EventTarget);A.prototype.enableDisplayStatus=function(){this.status_=new Ap(this.a11y_,this.resultsModel_),this.registerDisposable(this.status_)};A.prototype.enableUpDownButtons=function(){this.upDownButtonsEnabled_=!0};A.prototype.enableNarrowLayout=function(){this.useNarrowLayout_=!0};A.prototype.install=function(t){this.visible_=!0,this.closed_=!1,this.container_=t,this.renderContent(t),this.attachListeners_()};A.prototype.renderContent=function(t){var o=goog.dom.createDom;t.classList.add("find-replace-form"),this.useNarrowLayout_&&t.classList.add("find-replace-form--narrow");var i=this.status_?this.status_.getElements():[];goog.dom.appendChild(t,o("div","",o("label",{className:"screenreader-text",for:"findTextField"},tr(msgs.SEARCH_FOR_)),this.renderFindInput_(),o("label",{className:"screenreader-text",for:"replaceTextField"},tr(msgs.REPLACE_WITH_)),o("div",{"data-role":"none"},this.alwaysReadOnly_?"":this.renderReplaceInput_(),this.renderFindOptions_(),...i))),this.renderButtons_(t)};A.prototype.renderFindInput_=function(){return this.findTextField_=bc(Mo,{id:"findTextField",autocomplete:"off",placeholder:tr(msgs.SEARCH_FOR_),suffixIcon:"Search20",suffixLabel:tr(msgs.FIND_NEXT_),role:"application",showClear:""}),goog.dom.dataset.set(this.findTextField_,"clearBtn","true"),this.findTextField_};A.prototype.renderReplaceInput_=function(){return this.replaceTextField_=bc(Mo,{id:"replaceTextField",placeholder:tr(msgs.REPLACE_WITH_),autocomplete:"off"}),this.replaceTextField_};A.prototype.renderFindOptions_=function(){return this.matchCase_=bc(Kr,{id:"mcBox",type:"checkbox",class:"find-replace-form__option",label:tr(msgs.MATCH_CASE_)}),this.wholeWords_=bc(Kr,{id:"wwBox",type:"checkbox",class:"find-replace-form__option",label:tr(msgs.WHOLE_WORDS_)}),this.findOptionsContainer_=bc("div","find-replace-form__options",this.matchCase_,this.wholeWords_),this.findOptionsContainer_};A.prototype.renderButtons_=function(t){var o=this.getButtonsConfiguration_(),i=goog.dom.createDom,n=goog.dom.appendChild,r=i("div","find-replace-buttons-group");this.buttonListContainer_=r,this.dialogButtons_=[];for(let a of o){var s=this.createButton_(a);n(r,s),this.dialogButtons_.push(s)}n(t,r),this.disableButtons_()};A.prototype.createButton_=function(t){var o=goog.dom.createDom("button",{className:"oxy-button oxy-button--small",name:t.name});if(t.caption)o.textContent=t.caption;else{goog.dom.classlist.add(o,"oxy-button--icon-only"),o.title=t.title;var i=goog.dom.createDom("div",["oxy-button__icon","ui-action-small-icon",t.iconClass]);goog.dom.appendChild(o,i)}return o};A.prototype.getButtonsConfiguration_=function(){var t=[];return this.upDownButtonsEnabled_&&t.push({name:"arrowup",iconClass:"prev-16-icon",title:tr(msgs.FIND_PREVIOUS_)},{name:"arrowdown",iconClass:"next-16-icon",title:tr(msgs.FIND_NEXT_)}),this.alwaysReadOnly_||t.push({name:"replace",caption:tr(msgs.REPLACE_)},{name:"replaceall",caption:tr(msgs.REPLACE_ALL_)}),t};A.prototype.showWarning=function(t){t||this.disableButtons_(),this.status_&&this.status_.showWarning(t)};A.prototype.hideWarning=function(){this.status_&&this.status_.hideWarning()};A.prototype.disableButtons_=function(){var t=this.dialogButtons_;t.forEach(o=>o.setAttribute("disabled","disabled"))};A.prototype.enableButtons_=function(){var t=this.dialogButtons_;t.forEach(o=>{goog.dom.classlist.contains(o,this.disabledReadOnlyClass_)||o.removeAttribute("disabled")})};A.prototype.toggleReplace=function(t){if(!this.alwaysReadOnly_){var o=this.container_;if(o){var i=[this.replaceTextField_,o.querySelector('button[name="replace"]'),o.querySelector('button[name="replaceall"]')];t?(this.replaceTextField_.hasFocus()&&this.findTextField_.focus(),goog.array.forEach(i,goog.bind(function(n){n.setAttribute("disabled","disabled"),goog.dom.classlist.add(n,this.disabledReadOnlyClass_)},this))):(this.getFindText()&&goog.array.forEach(i,goog.bind(function(n){n.removeAttribute("disabled"),goog.dom.classlist.remove(n,this.disabledReadOnlyClass_)},this)),this.replaceTextField_.removeAttribute("disabled"))}}};A.prototype.focus=function(){this.findTextField_.focus()};A.prototype.attachListeners_=function(){var t=this.container_.querySelector(".find-replace-buttons-group"),o=t.querySelectorAll("button");for(let n of o)this.eventHandler_.listen(n,goog.events.EventType.CLICK,this.handleButtonClick_);var i=goog.events.EventType;this.eventHandler_.listen(this.findOptionsContainer_,i.CHANGE,goog.bind(this.optionsChanged_,this)).listen(this.container_,i.KEYDOWN,this.occurrenceNavigation_,!0).listen(this.findTextField_,i.INPUT,goog.bind(this.handleTextFieldInput_,this),!0).listen(this.findTextField_,i.KEYUP,goog.bind(this.keyupInFindInput_,this),!0).listen(this.findTextField_,dp.EventType.CLICK_SUFFIX,function(){this.dispatchFindNextEvent_()}).listen(this.container_,goog.events.EventType.KEYDOWN,goog.bind(this.handleFindShortCuts_,this)).listen(this.resultsModel_,Ae.SELECTION_CHANGED,goog.bind(this.speakProgressIfFocused_,this)).listen(this.resultsModel_,Ae.RESULTS_CHANGED,goog.bind(this.updateButtons_,this)),this.alwaysReadOnly_||this.eventHandler_.listen(this.replaceTextField_,i.KEYUP,goog.bind(this.keyupInReplaceInput_,this),!0)};A.prototype.handleFindShortCuts_=function(t){var o=t.keyCode,i=goog.events.KeyCodes,n=(t.ctrlKey||t.metaKey)&&(o===i.F||o===i.G);n&&(t.preventDefault(),this.dispatchFindNextInclusiveEvent_(),this.findTextField_.focus())};A.prototype.handleButtonClick_=function(t){var o=goog.dom.getAncestorByTagNameAndClass(t.target,"button");this.dispatchButtonEvent_(o)};A.prototype.dispatchButtonEvent_=function(t){var o=t.name,i=this.buttonEvents_[o];this.dispatchEvent(i)};A.prototype.keyupInFindInput_=function(t){t.keyCode===goog.events.KeyCodes.ENTER?(t.shiftKey?this.dispatchFindPreviousEvent_():this.dispatchFindNextEvent_(),this.stopTimeoutForSearch_()):this.getFindText().length===0&&this.dispatchInputClearedEvent_()};A.prototype.optionsChanged_=function(t){var o=t.target;o&&o.type==="checkbox"&&(this.dispatchSearchChangeEvent_(),this.dispatchFindNextInclusiveEvent_())};A.prototype.handleTextFieldInput_=function(){this.dispatchSearchChangeEvent_(),this.getFindText().length!==0?this.scheduleSearchAfterUserInput_():(this.stopTimeoutForSearch_(),this.disableButtons_(),this.dispatchFindNextEvent_())};A.prototype.scheduleSearchAfterUserInput_=function(){var t=(1+this.getShortTextPenalty_())*this.refreshDelay_;this.stopTimeoutForSearch_(),this.timeoutfunction_=new goog.async.Delay(this.dispatchFindNextInclusiveEvent_,t,this),this.timeoutfunction_.start()};A.prototype.scheduleSearchAfterModelChange=function(t){var o=this.computeDelay_(t);this.scheduleSearchWithDelay_(o)};A.prototype.scheduleSearch=function(){this.scheduleSearchWithDelay_(0)};A.prototype.scheduleSearchWithDelay_=function(t){this.stopTimeoutForSearch_(),this.timeoutfunction_=new goog.async.Delay(this.dispatchSearchRefreshEvent_,t,this),this.timeoutfunction_.start()};A.prototype.computeDelay_=function(t){var o=this.getShortTextPenalty_(),i=(1+o)*this.refreshDelay_;return t.isBackgroundSync&&o===0&&(i=0),i};A.prototype.setHidden=function(){this.stopTimeoutForSearch_(),this.visible_=!1,this.dispatchViewHiddenEvent_()};A.prototype.setVisible=function(){this.visible_=!0,this.dispatchViewOpenedEvent_(),this.dispatchSearchOnDialogOpenEvent_()};A.prototype.getShortTextPenalty_=function(){var t=this.getFindText();return Math.max(0,this.likelyIntentionalTextLength_-t.length)};A.prototype.stopTimeoutForSearch_=function(){this.timeoutfunction_&&this.timeoutfunction_.stop()};A.prototype.keyupInReplaceInput_=function(t){t.keyCode===goog.events.KeyCodes.ENTER&&this.getFindText().length!==0&&this.dispatchEvent(new sync.view.FindReplaceEvent(sync.view.FindReplaceEvent.EventType.REPLACE))};A.prototype.getFindText=function(){return this.findTextField_.getValue()};A.prototype.getSearchParams=function(){return new _n(this.getFindText(),this.getFindOptions())};A.prototype.dispatchFindNextEvent_=function(){this.dispatchEvent(new sync.view.FindReplaceEvent(sync.view.FindReplaceEvent.EventType.FIND_NEXT))};A.prototype.dispatchViewHiddenEvent_=function(){this.dispatchEvent(new sync.view.FindReplaceEvent(sync.view.FindReplaceEvent.EventType.HIDDEN))};A.prototype.dispatchViewOpenedEvent_=function(){this.dispatchEvent(new sync.view.FindReplaceEvent(sync.view.FindReplaceEvent.EventType.OPENED))};A.prototype.dispatchInputClearedEvent_=function(){this.dispatchEvent(new sync.view.FindReplaceEvent(sync.view.FindReplaceEvent.EventType.FIND_INPUT_CLEARED))};A.prototype.dispatchSearchOnDialogOpenEvent_=function(){this.dispatchEvent(new sync.view.FindReplaceEvent(sync.view.FindReplaceEvent.EventType.FIND_ON_DIALOG_OPEN))};A.prototype.dispatchFindNextInclusiveEvent_=function(){this.dispatchEvent(new sync.view.FindReplaceEvent(sync.view.FindReplaceEvent.EventType.FIND_NEXT,{inclusive:!0}))};A.prototype.dispatchFindPreviousEvent_=function(){this.dispatchEvent(new sync.view.FindReplaceEvent(sync.view.FindReplaceEvent.EventType.FIND_NEXT,{backwards:!0}))};A.prototype.dispatchSearchRefreshEvent_=function(){this.dispatchEvent(new sync.view.FindReplaceEvent(sync.view.FindReplaceEvent.EventType.FIND_NEXT,{skipSelectNext:!0}))};A.prototype.dispatchSearchChangeEvent_=function(){this.dispatchEvent(new sync.view.FindReplaceEvent(sync.view.FindReplaceEvent.EventType.SEARCH_CHANGE))};A.prototype.occurrenceNavigation_=function(t){var o=this.resultsModel_.areResultsRelevant()&&this.resultsModel_.getResultsCount()>0;t.keyCode===goog.events.KeyCodes.UP?(t.preventDefault(),o&&this.dispatchFindPreviousEvent_()):t.keyCode===goog.events.KeyCodes.DOWN&&(t.preventDefault(),o&&this.dispatchFindNextEvent_())};A.prototype.setQuery=function(t){this.updateFindOptions_(t),t.find.length===0?this.dispatchSearchRefreshEvent_():this.dispatchFindNextInclusiveEvent_(),this.findTextField_.select()};A.prototype.reset=function(){this.findTextField_.setValue(""),this.replaceTextField_&&this.replaceTextField_.setValue("")};A.prototype.isFocused_=function(){return goog.dom.contains(this.container_,document.activeElement)};A.prototype.speakProgressIfFocused_=function(){if(this.a11y_&&this.isFocused_()){var t=this.resultsModel_.getSelectionEndpoints();if(t!==null){var o=this.resultsModel_.getResultsCount(),i=this.resultsModel_.getSelectionIndex()+1,n=tr(msgs.FIND_CURRENT_OF_TOTAL_,{$CURRENT:i,$TOTAL:o})+" ",r=50;n+=this.contentModel_.getTextBefore(t.start,r),n+=this.contentModel_.getTextBetween(t.start,t.end),n+=this.contentModel_.getTextAfter(t.end,r),this.a11y_.speak(n)}}};A.prototype.updateButtons_=function(){this.resultsModel_.getResultsCount()?this.enableButtons_():this.disableButtons_()};A.prototype.getReplaceText=function(){return this.replaceTextField_.getValue()};A.prototype.isVisible=function(){return this.visible_};A.prototype.isClosed=function(){return this.closed_};A.prototype.getFindOptions=function(){var t=!!(this.matchCase_&&this.matchCase_.isChecked()),o=!!(this.wholeWords_&&this.wholeWords_.isChecked());return new Xr(t,o)};A.prototype.updateFindOptions_=function(t){t.find.length>0&&this.findTextField_.setValue(t.find),t.replace!=null&&this.replaceTextField_.setValue(t.replace),t.matchCase!=null&&this.matchCase_.setChecked(t.matchCase),t.wholeWords!=null&&this.wholeWords_.setChecked(t.wholeWords),this.dispatchSearchChangeEvent_()};A.prototype.disposeInternal=function(){A.superClass_.disposeInternal.call(this),goog.dom.removeChildren(this.container_)};var Ip=A;sync.actions.findreplace.FindReplaceForm=A;goog.require("goog.style");goog.require("goog.dom");goog.require("goog.array");namespace("sync.view");sync.view.UIUtil={};sync.view.UIUtil.getFirstAfterCaret=function(t,o){var i=null;t=t.toRelativeContentPosition();var n=goog.array.binarySearch(o,t,function(r,s){return p.compareCanonicalRelativePositions(r,new T(s,0).toRelativeContentPosition())});return n>=0?i=o[n]:(n=-n-1,n<o.length&&(i=o[n])),i==null&&o.length>0&&(i=o[0]),i};var Fz=sync.view.UIUtil;goog.require("goog.events");namespace("sync.view");var dt=function(t){goog.events.EventTarget.call(this),this.a11y_=t,this.lastDialogPosition_=null,this.dialogWidth_=440,this.dialogHeight_=286,this.transparenceClass_="fr-transparence",this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_),this.dialogOpenHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.dialogOpenHandler_),this.timeoutfunction_=null,this.shadowFlashTimeout_=null,this.editorViewport_=null};goog.inherits(dt,goog.events.EventTarget);dt.prototype.getDialogContainer_=function(){return goog.dom.getAncestorByClass(this.frDialog_.getElement(),"modal-dialog")};dt.prototype.initDialog_=function(t,o){var i=workspace.createDialog("frDialog",!0);this.registerDisposable(i);var n=t?tr(msgs.FIND_):tr(msgs.FIND_REPLACE_);i.setTitle(n),i.setButtonConfiguration(null),i.setResizable(!0),this.frDialog_=i,this.container_=i.getElement(),this.findReplaceForm_=new Ip(this.a11y_,o,t),this.findReplaceForm_.enableDisplayStatus(),this.findReplaceForm_.enableUpDownButtons(),this.findReplaceForm_.install(this.container_);var r=i.getEventTarget();this.eventHandler_.listen(r,goog.ui.PopupBase.EventType.BEFORE_HIDE,goog.bind(this.beforeHide_,this)).listen(r,goog.ui.PopupBase.EventType.BEFORE_SHOW,goog.bind(this.beforeShow_,this)).listen(this.findReplaceForm_,sync.view.FindReplaceEvent.EventType.FIND_INPUT_CLEARED,goog.bind(this.removeTransparency_,this))};dt.prototype.beforeShow_=function(){var t=goog.events.EventType,o=this.dialogOpenHandler_;o.listen(document,t.KEYDOWN,goog.bind(this.escapeDialogOpen_,this)).listen(this.getDialogContainer_(),t.CLICK,goog.bind(this.removeTransparency_,this),!0)};dt.prototype.beforeHide_=function(){var t=this.container_;this.lastDialogPosition_=goog.style.getPageOffset(t),this.dialogWidth_=t.clientWidth,this.dialogHeight_=t.clientHeight,this.findReplaceController_.setClosed(),this.dialogOpenHandler_.removeAll()};dt.prototype.escapeDialogOpen_=function(t){var o=t.keyCode,i=goog.events.KeyCodes;o===i.ESC&&this.frDialog_.hide()};dt.prototype.handleFindShortCuts_=function(t){var o=t.keyCode,i=goog.events.KeyCodes,n=(t.ctrlKey||t.metaKey)&&(o===i.F||o===i.G);this.frDialog_&&n&&this.flashDialogShadow_()};dt.prototype.setDialogPosition_=function(){if(this.lastDialogPosition_)this.frDialog_.setPosition(this.lastDialogPosition_.x,this.lastDialogPosition_.y);else{var t=document.querySelector('.goog-toolbar-button[name="Author/FindReplace"]'),o;t?(o=goog.style.getPageOffset(t),this.frDialog_.setPosition(o.x,o.y+t.clientHeight)):(o=goog.style.getPageOffset(this.editorViewport_),this.frDialog_.setPosition(o.x,o.y))}};dt.prototype.showFindReplace=function(t){var o=this.frDialog_;o&&o.isVisible()||(o.show(),this.dialogOpenHandler_.listen(o.getElement(),goog.events.EventType.KEYDOWN,goog.bind(this.handleFindShortCuts_,this)),this.setDialogPosition_(),this.findReplaceForm_.focus()),this.findOnDialogOpen(t)};dt.prototype.editorChanged=function(t){var o=t.getEditingSupport();this.init(o)};dt.prototype.init=function(t){this.resultsModel_=new Ae,this.registerDisposable(this.resultsModel_);var o=t.supportsEditing()===!1;this.initDialog_(o,this.resultsModel_),this.frDialog_.setFocusTargetProvider(goog.functions.constant(t)),this.editorViewport_=t.editorViewport,this.selectionManager_=t.getSelectionManager(),this.findReplaceController_=new Tp(this.findReplaceForm_,this.resultsModel_,t),this.registerDisposable(this.findReplaceController_);var i=this.findReplaceController_.getHighlighter();i.listen(Ka.HIGHLIGHT_SELECTED,this.makeTransparentIfOverSelected,!0,this),this.resultsModel_.listen(Ae.RESULTS_CHANGED,this.removeTransparencyWhenNoResults_,!0,this)};dt.prototype.removeTransparencyWhenNoResults_=function(){this.resultsModel_.getResultsCount()===0&&this.removeTransparency_()};dt.prototype.logger=goog.log.getLogger("FindReplaceView");dt.prototype.makeTransparentIfOverSelected=function(t){let o=t.chunks;if(o&&o.length>0){var i=!1,n=this.getDialogContainer_(),r=n.getBoundingClientRect();goog.array.find(o,function(s){var a=s.getBoundingClientRect();return i=!(a.right<r.left||a.left>r.right||a.bottom<r.top||a.top>r.bottom),i}),i?goog.dom.classlist.add(n,this.transparenceClass_):this.removeTransparency_()}};dt.prototype.show=function(){this.findTextField_.focus()};dt.prototype.findOnDialogOpen=function(t){if(!t){var o=this.selectionManager_.getSelection();t=sync.util.find.createFindReplaceQueryFromSelection(o)}this.findReplaceForm_.setVisible(),this.findReplaceForm_.setQuery(t)};dt.prototype.getFindReplaceDialog=function(){return this.frDialog_};dt.prototype.flashDialogShadow_=function(){var t=this.getDialogContainer_();if(t)if(goog.dom.classlist.add(t,"flash"),this.shadowFlashTimeout_)this.shadowFlashTimeout_.start();else{var o=300;this.shadowFlashTimeout_=new goog.async.Delay(function(){goog.dom.classlist.remove(t,"flash")},o)}};dt.prototype.removeTransparency_=function(){goog.dom.classlist.remove(this.getDialogContainer_(),this.transparenceClass_)};var iy=dt;sync.view.FindReplaceView=dt;var zr=function(){_.call(this,{keyStrokeStr:"M1 F",displayName:tr(msgs.FIND_),description:tr(msgs.SEARCH_),largeIconClass:"Find24_light"})};goog.inherits(zr,_);zr.prototype.withQuery=function(t){return new _({actionPerformed:o=>{sync.util.promise.delay(0).then(()=>this.performFind(t)).finally(o)}})};zr.prototype.getFindQuery=function(t){return t["search.find"]?new id(t["search.find"],t["search.replace"],t["search.matchCase"],t["search.wholeWords"]):null};zr.prototype.scheduleFindQuery=function(t,o){o.executeAction(this.withQuery(t))};zr.prototype.actionPerformed=function(t){t=t||goog.nullFunction;try{this.performFind()}finally{t()}};zr.prototype.performFind=function(t){};var Ga=zr;sync.actions.FindReplaceActionBase=zr;namespace("sync.actions");var qa=function(t){Ga.call(this),this.editingSupport_=t,this.findReplaceView_=null};goog.inherits(qa,Ga);qa.prototype.performFind=function(t){var o=this.findReplaceView_;o||(o=new iy(workspace.a11y),o.init(this.editingSupport_),this.findReplaceView_=o),o.showFindReplace(t)};qa.prototype.dispose=function(){qa.superClass_.dispose(),this.findReplaceView_&&this.findReplaceView_.dispose()};var ny=qa;sync.actions.FindReplaceDialogAction=qa;goog.require("goog.Disposable");namespace("sync.select");var ji=function(t,o,i){this.lastSelectionOnUpDown_=null,this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_),this.docWrapper_=t,this.selectionHandler_=o,this.xmlModel_=i};goog.inherits(ji,goog.Disposable);ji.prototype.attach=function(){if(goog.userAgent.WEBKIT||goog.userAgent.GECKO){this.eventHandler_.listen(this.docWrapper_,goog.events.EventType.KEYDOWN,goog.bind(this.detectCursorBlockAndUnblock_,this),!0);var t=sync.util.getDocDomHelper().getDocument();"onselectionchange"in t&&this.eventHandler_.listen(t,"selectionchange",this.onBrowserSelectionChanged_,!0)}};ji.prototype.detectCursorBlockAndUnblock_=function(t){var o=t.getBrowserEvent(),i=o.keyCode;if(!o.altKey&&(i===goog.events.KeyCodes.UP||i===goog.events.KeyCodes.DOWN)){var n=this.selectionHandler_.getBrowserSelection(),r=i===goog.events.KeyCodes.UP;this.shouldUnblockCursor(o,r,this.lastSelectionOnUpDown_,n)&&this.unblockCursor(r,n),this.lastSelectionOnUpDown_=this.selectionHandler_.getBrowserSelection()}};ji.prototype.onBrowserSelectionChanged_=function(){if(!!goog.dom.contains(this.docWrapper_,sync.util.getDocDomHelper().getDocument().activeElement)&&this.lastSelectionOnUpDown_){var t=this.selectionHandler_.getBrowserSelection();t&&!t.equals(this.lastSelectionOnUpDown_)&&(this.lastSelectionOnUpDown_=null)}};ji.prototype.shouldUnblockCursor=function(t,o,i,n){var r;if(n==null||!n.equals(i))r=!1;else if(t.target.tagName==="INPUT"||t.target.tagName==="TEXTAREA")r=!1;else if(sync.formctrls.dom.isInsideFormControl(t.target))r=!1;else if(n instanceof z)r=!1;else{var s=n.save().focus;r=this.canMovePositionTowards_(s,o)}return r};ji.prototype.canMovePositionTowards_=function(t,o){return o?!this.isPositionBeforeRoot_(t):!this.isPositionAfterRoot_(t)};ji.prototype.isPositionBeforeRoot_=function(t){var o=h.getInstance().getXmlNodeById(t.nodeId);return t.sentinelType===0&&t.distance===0&&sync.model.XmlDom.isDocument(o)};ji.prototype.isPositionAfterRoot_=function(t){var o=h.getInstance().getXmlNodeById(t.nodeId);return t.sentinelType===1&&sync.model.XmlDom.isRootElement(o)};ji.prototype.unblockCursor=function(t,o){var i=this.selectionHandler_.getBrowserSelection().focus,n=p.fromHTMLPosition(i),r,s,a=20;if(t){r=a;try{n.prev()}catch{}}else{var l=this.docWrapper_.ownerDocument.getElementById("editor-frame"),c=goog.style.getComputedStyle(l,"width");r=parseInt(c,10)-a;try{n.next()}catch{}}s=n.toHTMLPosition().getCaretRect().top;try{var d=It.positionFromPointNormalized(r,s);if(d){var g=null;if(o.isEmpty())g=new sync.select.Selection(d);else{var m=d.toRelativeContentPosition();g=o.extendedToRelativePos(m)}this.selectionHandler_.setCurrentSelection(g)}}catch(v){console.log("Could not unblock cursor",v)}};var ry=ji;sync.select.UnblockCursorHandler=ji;namespace("sync.api");sync.api.HighlightsManager=function(){};goog.inherits(sync.api.HighlightsManager,goog.events.EventTarget);sync.api.HighlightsManager.prototype.addHighlight=function(t,o,i){};sync.api.HighlightsManager.prototype.updateHighlight=function(t,o,i,n){};sync.api.HighlightsManager.prototype.getHighlightAttributes=function(t){};sync.api.HighlightsManager.prototype.removeHighlights=function(t,o){};sync.api.HighlightsManager.prototype.selectHighlight=function(t){};sync.api.HighlightsManager.prototype.scrollToHighlight=function(t){};sync.api.HighlightsManager.prototype.getHighlightsAtCaret=function(t){return null};sync.api.HighlightsManager.prototype.getHighlightSelection=function(t){return null};sync.api.HighlightUpdateEvent=function(t,o){this.type=o,this.id=t};sync.api.HighlightUpdateEvent.EventType={HIGHLIGHT_ADDED:"highlight_added",HIGHLIGHT_REMOVED:"highlight_deleted"};namespace("sync.support");var Oe=function(t,o,i,n){goog.events.EventTarget.call(this),this.actionsManager_=t,this.viewportScroller_=i,this.selectionManager_=n,this.highlightsModel_=[],this.xmlModel_=o.getXmlModel(),this.eventHandler_=new goog.events.EventHandler(this).listen(o,M.EventType.MODEL_CHANGED,goog.bind(this.handleHighlightsUpdates_,this),!0)};goog.inherits(Oe,sync.api.HighlightsManager);Oe.prototype.handleHighlightsUpdates_=function(t){for(var o=t.docUpdate.highlightsUpdates||[],i=o.length,n=0;n<i;n++){var r=new sync.api.HighlightUpdateEvent(o[n].id,o[n].type);this.updateModel(r),this.dispatchEvent(r)}};Oe.prototype.updateModel=function(t){var o=t.type,i=t.id;o===sync.api.HighlightUpdateEvent.EventType.HIGHLIGHT_ADDED?this.highlightsModel_.push(i):o===sync.api.HighlightUpdateEvent.EventType.HIGHLIGHT_REMOVED&&goog.array.remove(this.highlightsModel_,i)};Oe.prototype.addHighlight=function(t,o,i){var n={};return o&&o.forEach(function(r,s){n[s]=r}),this.actionsManager_.invokeOperation("ro.sync.servlet.operation.AddHighlightOperation",{class:t,attributes:n},i)};Oe.prototype.updateHighlight=function(t,o,i,n){var r={};i&&i.forEach(function(c,d){r[d]=c});var s=this.getAllChunksForHighlight_(t);if(s)for(var a=0;a<s.length;a++){var l=s[a];o&&l.setAttribute("class",o),Object.keys(r).forEach(function(c){l.setAttribute("data-"+c,r[c])})}return this.actionsManager_.invokeOperation("ro.sync.servlet.operation.UpdateHighlightOperation",{id:t,class:o,attributes:r},n,this.selectionManager_.getSelection(),!0)};Oe.prototype.getHighlightAttributes=function(t){var o=new Map,i=this.getAllChunksForHighlight_(t);if(i&&i.length>0)for(var n=i[0],r=n.attributes,s=0;s<r.length;s++){var a=r.item(s);if(goog.string.startsWith(a.nodeName,"data-")){var l=a.nodeName.substring("data-".length,a.nodeName.length);o.set(l,a.value)}}return o};Oe.prototype.removeHighlights=function(t,o){this.actionsManager_.invokeOperation("ro.sync.servlet.operation.RemoveHighlightsOperation",{ids:t},o)};Oe.prototype.selectHighlight=function(t){this.scrollToHighlightAndSelect_(t,!0)};Oe.prototype.getHighlightSelection=function(t){var o=this.getAllChunksForHighlight_(t);return this.getSelection_(o)};Oe.prototype.scrollToHighlightAndSelect_=function(t,o){var i=this.getAllChunksForHighlight_(t),n=this.getStartEndPoints_(i);sync.select.SelectionUtil.scrollToPositionAndSelect(n.start,n.end,this.viewportScroller_,this.selectionManager_,o)};Oe.prototype.getSelection_=function(t){var o=this.getStartEndPoints_(t);return o?new sync.select.Selection(o.start,o.end):null};Oe.prototype.getStartEndPoints_=function(t){var o=null;if(t&&t.length>0){var i=t[0],n=sync.util.dom.indexInParent(i),r=new T(i.parentNode,n),s=t[t.length-1],a=sync.util.dom.indexInParent(s)+1,l=new T(s.parentNode,a);o={start:r,end:l}}return o};Oe.prototype.scrollToHighlight=function(t){this.scrollToHighlightAndSelect_(t,!1)};Oe.prototype.getHighlightsAtCaret=function(t){var o=this.selectionManager_.getSelection(),i=o.focus.toRelativeContentPosition();return this.getLocator().setIncludeStarting(t).setIncludeEnding(t).getMarkersAtPosition(i)};Oe.prototype.getLocator=function(){return new $d(this.xmlModel_).useElementName(Oe.HIGHLIGHT_ELEMENT_NAME).setIdAttr(Oe.HIGHLIGHT_ID_ATTR_NAME)};Oe.HIGHLIGHT_ID_ATTR_NAME="data-highlight-id";Oe.HIGHLIGHT_ELEMENT_NAME="span";Oe.prototype.getFirstChunkForHighlight=function(t){return document.querySelector("*["+Oe.HIGHLIGHT_ID_ATTR_NAME+'="'+t+'"]')};Oe.prototype.documentContainsHighlights=function(){return this.highlightsModel_.length>0};Oe.prototype.getAllChunksForHighlight_=function(t){return document.querySelectorAll("*["+Oe.HIGHLIGHT_ID_ATTR_NAME+'="'+t+'"]')};var sy=Oe;sync.support.HighlightsManager=Oe;namespace("sync.api");sync.api.PersistentHighlightsManager=function(){goog.events.EventTarget.call(this)};goog.inherits(sync.api.PersistentHighlightsManager,goog.events.EventTarget);sync.api.PersistentHighlightsManager.prototype.addHighlight=function(t,o){};sync.api.PersistentHighlightsManager.prototype.updateHighlight=function(t,o,i){};sync.api.PersistentHighlightsManager.prototype.getHighlightAttributes=function(t){};sync.api.PersistentHighlightsManager.prototype.removeHighlights=function(t,o){};sync.api.PersistentHighlightsManager.prototype.selectHighlight=function(t){};sync.api.PersistentHighlightsManager.prototype.scrollToHighlight=function(t){};sync.api.PersistentHighlightsManager.prototype.getHighlightsAtCaret=function(t){return[]};sync.api.PersistentHighlightsManager.prototype.getAllHighlights=function(){return[]};sync.api.PersistentHighlightsManager.prototype.getHighlightSelection=function(t){return null};sync.api.PersistentHighlightUpdateEvent=function(t,o){this.type=o,this.id=t};sync.api.PersistentHighlightUpdateEvent.EventType={HIGHLIGHT_ADDED:"highlight_added",HIGHLIGHT_REMOVED:"highlight_deleted",HIGHLIGHT_CHANGED:"highlight_changed"};namespace("sync.support");var lo=function(t,o,i,n){sync.api.PersistentHighlightsManager.call(this),this.actionsManager_=t,this.viewportScroller_=i,this.selectionManager_=n,this.markersModel_=o,o&&(goog.events.listen(o,R.ModelEventType.MARKER_ADDED,goog.bind(function(r){this.isCustomMarker_(r.markerProperties)&&this.dispatchEvent(new sync.api.PersistentHighlightUpdateEvent(r.id,sync.api.PersistentHighlightUpdateEvent.EventType.HIGHLIGHT_ADDED))},this)),goog.events.listen(o,R.ModelEventType.MARKER_DELETED,goog.bind(function(r){this.isCustomMarker_(r.markerProperties)&&this.dispatchEvent(new sync.api.PersistentHighlightUpdateEvent(r.id,sync.api.PersistentHighlightUpdateEvent.EventType.HIGHLIGHT_REMOVED))},this)),goog.events.listen(o,R.ModelEventType.MARKER_CHANGED,goog.bind(function(r){this.isCustomMarker_(r.markerProperties)&&this.dispatchEvent(new sync.api.PersistentHighlightUpdateEvent(r.id,sync.api.PersistentHighlightUpdateEvent.EventType.HIGHLIGHT_CHANGED))},this)))};goog.inherits(lo,sync.api.PersistentHighlightsManager);lo.prototype.isCustomMarker_=function(t){return t&&t["marker-type"]===Se.Type.CUSTOM_HIGHLIGHT};lo.prototype.addHighlight=function(t,o){var i={};return t&&t.forEach(function(n,r){i[r]=n}),this.actionsManager_.invokeOperation("ro.sync.servlet.operation.highlights.persistent.AddCustomHighlightOperation",{attributes:i},o)};lo.prototype.updateHighlight=function(t,o,i){var n={};return o&&o.forEach(function(r,s){n[s]=r}),this.actionsManager_.invokeOperation("ro.sync.servlet.operation.highlights.persistent.UpdateCustomHighlightOperation",{id:t,attributes:n},i,this.selectionManager_.getSelection(),!0)};lo.prototype.getHighlightAttributes=function(t){var o=this.markersModel_.getMarker(t);return o.getCustomProperties()};lo.prototype.removeHighlights=function(t,o){this.actionsManager_.invokeOperation("ro.sync.servlet.operation.highlights.persistent.RemoveCustomHighlightOperation",{ids:t},o)};lo.prototype.selectHighlight=function(t){t&&this.scrollToHighlightAndSelect_(t,!0)};lo.prototype.scrollToHighlight=function(t){this.scrollToHighlightAndSelect_(t,!1)};lo.prototype.scrollToHighlightAndSelect_=function(t,o){var i=this.markersModel_.getMarkerEndPoints(t);sync.select.SelectionUtil.scrollToPositionAndSelect(i.start.toHTMLPosition(),i.end.toHTMLPosition(),this.viewportScroller_,this.selectionManager_,o)};lo.prototype.getHighlightsAtCaret=function(t){var o=this.selectionManager_.getSelection(),i=o.focus.toRelativeContentPosition();return this.markersModel_.getAllMarkersAtPosition(i,!t)};lo.prototype.getAllHighlights=function(){return this.markersModel_.getMarkersOfTypeInOrder(Se.Type.CUSTOM_HIGHLIGHT)};lo.prototype.getHighlightSelection=function(t){var o=this.markersModel_.getMarkerEndPoints(t);return o?new sync.select.Selection(o.start.toHTMLPosition(),o.end.toHTMLPosition()):null};lo.HIGHLIGHT_ID_ATTR_NAME="data-marker-id";lo.HIGHLIGHTS_QUERY_SELECTOR='mark[data-type="'+Se.Type.CUSTOM_HIGHLIGHT+'"]';var ay=lo;sync.support.PersistentHighlightsManager=lo;namespace("sync.view");var vn=function(t,o){this.a11y_=t,this.documentNode_=o};goog.inherits(vn,pe);vn.prototype.enterDocument=function(t){!this.a11y_.isEnabled()||this.updateElements_(t,this.a11y_.isEnabled())};vn.prototype.updateElements_=function(t,o){if(goog.userAgent.product.CHROME)for(var i=vn.prototype.getPlaceholdersWithRole_(t),n=0;n<i.length;n++){var r=i[n],s=p.getPlaceholder(r);o?s.setAttribute("role","text"):s.setAttribute("role","textbox")}};vn.prototype.attachA11yStateListener=function(){this.a11yListenerKey_=this.a11y_.listen(Va.EventType.ENABLED_STATE_CHANGED,goog.bind(function(){this.updateElements_([this.documentNode_],this.a11y_.isEnabled())},this))};vn.prototype.disposeInternal=function(){goog.events.unlistenByKey(this.a11yListenerKey_),vn.superClass_.disposeInternal.call(this)};vn.prototype.getPlaceholdersWithRole_=function(t){for(var o=[],i=0;i<t.length;i++){var n=t[i],r=p.getPlaceholder(n);r&&r.hasAttributes("role")&&o.push(n);var s=goog.dom.findElements(n,function(a){var l=p.getPlaceholder(a);return l&&l.hasAttribute("role")});o=o.concat(s)}return o};var ly=vn;sync.view.AuthorA11yUpdateFilter=vn;goog.require("goog.Disposable");namespace("sync.view");var Vi=function(t){goog.Disposable.call(this),this.documentContainer=t};goog.inherits(Vi,goog.Disposable);Vi.classPrefix_="font-size-";Vi.prototype.init=function(){var t=k.getInstance();this.mode=t.getOption(S.DISPLAY_DENSITY)||"medium",goog.dom.classlist.add(this.documentContainer,Vi.classPrefix_+this.mode),this.optionsListenerKey_=t.listenOption(S.DISPLAY_DENSITY,goog.bind(this.displayModeChanged_,this))};Vi.prototype.displayModeChanged_=function(t){goog.dom.classlist.addRemove(this.documentContainer,Vi.classPrefix_+this.mode,Vi.classPrefix_+t.value),this.mode=t.value};Vi.prototype.disposeInternal=function(){goog.dom.classlist.remove(this.documentContainer,Vi.classPrefix_+this.mode),goog.events.unlistenByKey(this.optionsListenerKey_)};var cy=Vi;sync.view.FontSizeHandler=Vi;namespace("sync.ops");var Ks=function(t,o){this.opsQueue_=Promise.resolve(),this.controller_=t,this.selectionManager_=o,this.operationsEnabled_=!1};goog.inherits(Ks,goog.Disposable);Ks.prototype.invoke=function(t,o){if(!this.operationsEnabled_)return Promise.reject({message:"Operation invocation not supported"});var i=new Fi(t,this.controller_,this.selectionManager_);return o.options=o.options||{},this.opsQueue_=this.opsQueue_.catch(goog.nullFunction).then(()=>i.invoke(o)),this.opsQueue_};Ks.prototype.enableOperations=function(){this.operationsEnabled_=!0};Ks.prototype.disposeInternal=function(){Ks.superClass_.disposeInternal.call(this),this.operationsEnabled_=!1};var wp=Ks;sync.ops.OperationsInvoker=Ks;namespace("sync.ext");sync.ext.WrapperExtension=function(t){this.delegate_=t};goog.inherits(sync.ext.WrapperExtension,sync.ext.Extension);sync.ext.WrapperExtension.prototype.editorCreated=function(t){this.delegate_.editorCreated(t)};sync.ext.WrapperExtension.prototype.filterActions=function(t,o){this.delegate_.filterActions(t,o)};sync.ext.WrapperExtension.prototype.getEnhancers=function(){return this.delegate_.getEnhancers()};namespace("sync.view");var ui=function(t,o,i){Ba.call(this,t,o),this.setSelectionManager(i),this.clickedCrumbId_=null,this.contextObject_=new I.Context({computeSelection:()=>this.clickedCrumbId_?p.createSelectionAroundXmlNode(this.clickedCrumbId_):null})};goog.inherits(ui,Ba);ui.prototype.hide=function(){ui.superClass_.hide.call(this)};ui.prototype.attach=function(t){ui.superClass_.attach.call(this,t),goog.dom.classlist.add(this.getElement(),"breadcrumbs-menu"),this.getHandler().listen(t,goog.events.EventType.MOUSEDOWN,goog.bind(function(o){if(o.button===goog.events.BrowserEvent.MouseButton.RIGHT){var i=o.target;this.clickedCrumbId_=i.getAttribute("data-crumb-id")}},this))};ui.prototype.populateMenu=function(t){this.clickedCrumbId_?ui.superClass_.populateMenu.call(this,t):t.preventDefault()};ui.prototype.detach=function(t){ui.superClass_.detach.call(this,t),this.getHandler().removeAll(),this.clickedCrumbId_=null};ui.prototype.createMenuItem=function(t,o,i){return new mt(t,o,null,this.contextObject_,this.actionsExecutor_)};var dy=ui;sync.view.BreadcrumbContextMenu=ui;goog.require("goog.events");goog.require("goog.dom.ViewportSizeMonitor");goog.require("goog.dom.BufferedViewportSizeMonitor");goog.require("goog.async.Delay");namespace("sync.view");var Rt=function(t,o,i,n,r,s){goog.Disposable.call(this),this.root_=t,this.actionsManager_=n,this.actionsExecutor_=r,this.selectionManager_=o,this.viewportScroller_=i,this.elementNameEnhancer_=s,this.ignoreNextSelectionChange_=!1,this.contextMenu_=this.createContextMenu_(),this.registerDisposable(this.contextMenu_),this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_)};goog.inherits(Rt,goog.Disposable);Rt.prototype.onModelChanged_=function(t){!t.isBackgroundSync&&t.docUpdate.nodesIds&&t.docUpdate.nodesIds.length&&this.renderBreadcrumbsDelay_.start(100)};Rt.prototype.attach=function(t,o){this.container_=this.createContainer_(),this.contextMenu_.attach(this.container_),this.eventHandler_.listen(t,M.EventType.MODEL_CHANGED,goog.bind(this.onModelChanged_,this));var i=k.getInstance();this.editorAreaToolbarParent_=goog.dom.createDom("div",["editingAreaToolbar","vertical-align-children"]),goog.dom.append(this.container_,this.editorAreaToolbarParent_);var n=i.getOption(S.BREADCRUMB_POSITION)!=="top";o.render(o.getToolbarsConfig(n),this.editorAreaToolbarParent_),this.renderMoveButton_(o),this.updateStyle_(i.getOption(S.BREADCRUMB_POSITION)),this.eventHandler_.listen(this.selectionManager_,sync.api.SelectionManager.EventType.SELECTION_CHANGED,function(){if(this.ignoreNextSelectionChange_){this.ignoreNextSelectionChange_=!1;return}this.contextMenu_.hide(),this.renderBreadcrumbsDelay_.start()},this),this.renderBreadcrumbsDelay_=new goog.async.Delay(this.renderBreadcrumbs_,250,this),this.registerDisposable(this.renderBreadcrumbsDelay_);var r=new goog.dom.BufferedViewportSizeMonitor(goog.dom.ViewportSizeMonitor.getInstanceForWindow(),500);this.registerDisposable(r),this.eventHandler_.listen(r,goog.events.EventType.RESIZE,function(){this.scrollToCrumb_(this.container_.querySelector(".activated"))},this)};Rt.prototype.createContainer_=function(){var t=k.getInstance(),o=t.getOption(S.BREADCRUMB_POSITION),i=workspace.createEditorStripe(sync.util.isMobile()?31:25,!0,o!=="top");return i.id="breadcrumbs-area",this.optionListenerKey_=t.listenOption(S.BREADCRUMB_POSITION,function(n){workspace.removeEditorStripe(i,n.oldValue!=="top"),workspace.addEditorStripe(i,sync.util.isMobile()?31:25,!0,n.value!=="top")}),goog.dom.classlist.add(i,"inEditor"),sync.util.isMobile()&&goog.dom.classlist.add(i,"mobile"),this.eventHandler_.listen(i,goog.events.EventType.CLICK,goog.bind(this.handleClick_,this)),i};Rt.prototype.renderMoveButton_=function(t){var o=k.getInstance();goog.userAgent.ANDROID||(this.moveButton_=goog.dom.createDom("div"),this.moveButtonParent_=goog.dom.createDom("div",["breadcrumb-move","vertical-align-children"],this.moveButton_),goog.dom.append(this.container_,this.moveButtonParent_),this.eventHandler_.listen(this.moveButton_,goog.events.EventType.CLICK,goog.bind(function(){var i=o.getOption(S.BREADCRUMB_POSITION),n=i==="top",r=n?"bottom":"top";o.setOption(S.BREADCRUMB_POSITION,r,!0),goog.dom.removeChildren(this.editorAreaToolbarParent_),t.render(t.getToolbarsConfig(n),this.editorAreaToolbarParent_),this.updateStyle_(r)},this)))};Rt.prototype.handleClick_=function(t){var o=t.target,i=o.getAttribute("data-crumb-id");if(i){this.ignoreNextSelectionChange_=!0,this.setBrowserSelection_(i),this.renderBreadCrumbSelection_(i);var n=h.getInstance().getXmlNodeById(i);this.viewportScroller_.scrollIntoView([n])}};Rt.prototype.setBrowserSelection_=function(t){var o=h.getInstance().getXmlNodeById(t),i=(goog.userAgent.IPAD||goog.userAgent.IPHONE)&&goog.array.indexOf(sync.position.XmlModelIndexerFilter.TAGS_WITH_COMMENT_SENTINELS,o.tagName)!==-1,n;i?n=p.createSelectionOfXmlNodeContent(t):n=p.createSelectionAroundXmlNode(t),this.selectionManager_.setSelection(n)};Rt.prototype.updateStyle_=function(t){var o=t==="top";this.moveButton_&&(this.moveButton_.className=o?"breadcrumb-move-to-bottom":"breadcrumb-move-to-top",this.moveButton_.title=o?tr(msgs.MOVE_BREADCRUMB_TO_BOTTOM_):tr(msgs.MOVE_BREADCRUMB_TO_TOP_)),goog.dom.classlist.remove(this.container_,o?"bottom":"top"),goog.dom.classlist.add(this.container_,o?"top":"bottom")};Rt.prototype.createContextMenu_=function(){var t=new dy(this.actionsManager_,this.actionsExecutor_);return t.addAction("App/FocusAttributesPanel"),t.addSeparator(),t.addAction("Author/CutSpecial"),t.addAction("Author/CopySpecial"),t.addAction("Author/PasteSpecial"),t.addSeparator(),t.addAction("Author/DeleteElement"),t.addAction("Author/RenameElement"),t};Rt.prototype.renderBreadCrumbSelection_=function(t){var o=this.container_.childNodes,i=!1;for(var n of o){goog.dom.classlist.removeAll(n,["activated","selected"]);var r=n.getAttribute("data-crumb-id");r===t?(goog.dom.classlist.add(n,"activated"),i=!0):i&&goog.dom.classlist.add(n,"selected")}};Rt.prototype.scrollToCrumb_=function(t){if(t){var o=t.offsetLeft,i=t.parentNode.scrollLeft,n=t.parentNode.offsetWidth;(o<i+70||o>n-70)&&(t.parentNode.scrollLeft=o-n/2)}};Rt.prototype.detach=function(){this.eventHandler_.removeAll(),workspace.removeEditorStripe(this.container_)};Rt.prototype.getPath_=function(t){var o=h.getInstance().getXmlNodeById(t.id);if(this.path_&&this.path_.indexOf(o)!==-1)return this.path_;for(var i=[];o&&o!==this.root_&&!sync.model.XmlDom.isDocument(o);)i.push(o),o=sync.model.XmlDom.getParentNode(o);return o===this.root_&&i.push(o),i.reverse()};Rt.prototype.renderBreadcrumbs_=function(){var t=[],o=null,i=this.selectionManager_.getSelection();if(i!=null){var n=i.getNodeAtSelection();try{i.getFullySelectedNode()&&(o=n.id),this.path_=this.getPath_(n)}catch{this.path_=[]}t=this.getBreadcrumbNodes_(this.path_,this.elementNameEnhancer_,n)}var r=this.container_;goog.dom.removeChildren(r),goog.dom.append(r,this.editorAreaToolbarParent_,t,this.moveButtonParent_),o&&this.renderBreadCrumbSelection_(o),this.scrollToCrumb_(r.querySelector(".activated"))};Rt.prototype.getBreadcrumbNodes_=function(t,o,i){for(var n=[],r=0;r<t.length;r++){var s=t[r],a=sync.view.NodeRenderer.getRenderedText(s,o);if(a!=null){var l=h.getIdOfXmlNode(s),c=l===i.id,d=goog.dom.createDom("span",{className:"breadcrumb-elem-name","data-crumb-id":l},a),g=goog.dom.createDom("span",{className:"breadcrumb-elem","data-crumb-id":l,"data-node-name":sync.model.XmlDom.getTagDisplayName(s)},d);if(c&&goog.dom.classlist.add(g,"activated"),r===0&&goog.dom.classlist.add(g,"first"),n.push(g),c)break}}return n};Rt.prototype.disposeInternal=function(){Rt.superClass_.disposeInternal.call(this),goog.events.unlistenByKey(this.optionListenerKey_);var t=k.getInstance().getOption(S.BREADCRUMB_POSITION);workspace.removeEditorStripe(this.container_,t!=="top")};var py=Rt;sync.view.Breadcrumbs=Rt;namespace("sync.view");var gy=function(t,o){this.ditaKey=t,this.type=o},Ac=gy;sync.view.ReusableDitaKeyEvent=gy;goog.require("goog.functions");namespace("sync.view");var Zo=function(t){goog.events.EventTarget.call(this),this.inputElement_=t,this.filterValue_=this.inputElement_.value,this.keys_={},this.keysState_={};var o=400;this.inputElementKeyDownKey=goog.events.listen(this.inputElement_,[goog.events.EventType.INPUT,goog.events.EventType.MOUSEUP],goog.functions.debounce(goog.bind(function(){this.filterValue_!==this.inputElement_.value&&(this.checkKeys_(),this.dispatchEvent({type:Zo.Events.FILTER_DONE}))},this),o))};goog.inherits(Zo,goog.events.EventTarget);Zo.Events={KEY_ADDED:"KEY_ADDED",KEY_REMOVED:"KEY_REMOVED",FILTER_DONE:"FILTER_DONE"};Zo.prototype.setKeys=function(t){this.keys_=t,this.checkKeys_()};Zo.prototype.dispose=function(){goog.events.unlistenByKey(this.inputElementKeyDownKey),this.removeAllListeners(),goog.events.EventTarget.prototype.dispose.call(this),this.keys_={},delete this.keysState_};Zo.prototype.checkKeys_=function(){this.filterValue_=this.inputElement_.value,Object.keys(this.keys_).forEach(goog.bind(function(t){var o=this.keys_[t],i=this.accepts_(o),n=this.keysState_[t]!==void 0;if(this.keysState_[t]!==i){if(this.keysState_[t]=i,!n)return;i?this.dispatchEvent(new Ac(o,Zo.Events.KEY_ADDED)):this.dispatchEvent(new Ac(o,Zo.Events.KEY_REMOVED))}},this))};Zo.prototype.accepts_=function(t){var o=this.filterValue_;if(!o)return!0;o=o.toLowerCase().trim();var i=o.split(/\s+/);return t=this.sanitizeKey_(t),!goog.array.find(i,n=>!this.keyContainsWord_(t,n))};Zo.prototype.sanitizeKey_=function(t){return{key:t.key?t.key.toLowerCase():"",keyContent:t.keyContent?t.keyContent.toLowerCase():"",hrefValue:t.hrefValue?t.hrefValue.toLowerCase():"",defLocation:t.defLocation}};Zo.prototype.keyContainsWord_=function(t,o){return goog.string.contains(t.key,o)||goog.string.contains(t.keyContent,o)||goog.string.contains(t.hrefValue,o)};var Ic=Zo;sync.view.ReusableDitaKeysViewFilter=Zo;goog.require("goog.events.EventTarget");goog.require("goog.array");goog.require("goog.style");namespace("sync.view");var Ze=function(t,o,i){goog.events.EventTarget.call(this),this.reusableKeys_=t,this.container_=o,this.isUsingDitaContext_=i,this.selectedKey_=null};goog.inherits(Ze,goog.events.EventTarget);Ze.prototype.hasReusableKeys=function(){return Object.keys(this.reusableKeys_).length!==0};Ze.Events={KEY_SUBMITTED:"KEY_SUBMITTED",KEY_SELECTED:"KEY_SELECTED"};Ze.prototype.render=function(){var t=goog.dom.createDom("div","dita-reuse-keys-wrp"),o=this.renderReusableKeysFilterInput_(),i=o.querySelector("input"),n=this.renderReusableKeys_();if(Object.keys(this.reusableKeys_).length!==0)t.appendChild(o);else{let r=this.isUsingDitaContext_?tr(msgs.NO_REUSABLE_KEYS_CONTEXT_):tr(msgs.NO_REUSABLE_KEYS_);n.appendChild(goog.dom.createDom("div","flexbox-centered full-width-height",r))}t.appendChild(n),this.filter_=new Ic(i),this.listenForFilterChanges_(this.filter_),this.container_.appendChild(t),this.filter_.setKeys(this.reusableKeys_)};Ze.prototype.renderReusableKeysFilterInput_=function(){return goog.dom.createDom("div","dita-reuse-keys-filter-wrapper",goog.dom.createDom("div","search-icon-container",goog.dom.createDom("div","Search20")),goog.dom.createDom("input",{className:"dita-reuse-keys-filter",type:"search",autofocus:"autofocus",placeholder:tr(msgs.FILTER_HINT_)}))};Ze.prototype.getSortedReusableKeys_=function(){return Object.keys(this.reusableKeys_).sort(goog.bind(function(t,o){var i=this.reusableKeys_[t],n=this.reusableKeys_[o];return i.keyContent&&!i.hrefValue&&n.hrefValue||i.keyContent&&i.hrefValue&&n.hrefValue&&!n.keyContent?-1:0},this))};Ze.prototype.listenForEventsWhichWillModifyTheSelectedKey_=function(t){goog.events.listen(t,goog.events.EventType.CLICK,function(o){this.decideWhatKeyToSelectOrSubmit_(o,Ze.Events.KEY_SELECTED)},!1,this),goog.events.listen(t,goog.events.EventType.KEYDOWN,function(o){o.keyCode===goog.events.KeyCodes.SPACE?this.decideWhatKeyToSelectOrSubmit_(o,Ze.Events.KEY_SELECTED):o.keyCode===goog.events.KeyCodes.ENTER&&(o.stopPropagation(),this.decideWhatKeyToSelectOrSubmit_(o,Ze.Events.KEY_SELECTED))},!1,this),goog.events.listen(t,goog.events.EventType.DBLCLICK,function(o){this.decideWhatKeyToSelectOrSubmit_(o,Ze.Events.KEY_SUBMITTED)},!1,this)};Ze.prototype.renderReusableKeys_=function(){var t=goog.dom.createDom,o=t("div","dita-reuse-keys");return this.getSortedReusableKeys_().forEach(function(i){var n=this.reusableKeys_[i];o.appendChild(t("div",{class:"dita-reuse-key","data-reusekey":i,tabIndex:"0","aria-role":"button"},[t("div","key",i),n.keyContent?t("div","keyContent",n.keyContent):null,n.hrefValue?t("div","hrefValue",n.hrefValue):null]))},this),this.listenForEventsWhichWillModifyTheSelectedKey_(o),o};Ze.prototype.listenForFilterChanges_=function(t){goog.events.listen(t,Ic.Events.KEY_ADDED,function(o){var i=this.container_.querySelector('[data-reusekey="'+o.ditaKey.key+'"]');goog.style.setStyle(i,"display","block")},!1,this),goog.events.listen(t,Ic.Events.KEY_REMOVED,function(o){var i=this.container_.querySelector('[data-reusekey="'+o.ditaKey.key+'"]');goog.style.setStyle(i,"display","none")},!1,this),goog.events.listen(t,Ic.Events.FILTER_DONE,function(){var o=this.findFirstVisibleKey_();this.selectKey_(o,Ze.Events.KEY_SELECTED),o&&this.container_.querySelector('[data-reusekey="'+o+'"]').scrollIntoView(!0)},!1,this)};Ze.prototype.scrollSelectedKeyIntoView=function(){var t=!1;if(this.selectedKey_){var o=this.container_.querySelector('[data-reusekey="'+this.selectedKey_+'"]');o.scrollIntoView(!0),t=!0}return t};Ze.prototype.decideWhatKeyToSelectOrSubmit_=function(t,o){t.preventDefault();var i=goog.dom.getAncestorByClass(t.target,"dita-reuse-key");if(i){var n=goog.dom.dataset.get(i,"reusekey");t.keyCode===goog.events.KeyCodes.ENTER&&n===this.selectedKey_&&(o=Ze.Events.KEY_SUBMITTED),this.selectKey_(n,o)}};Ze.prototype.findFirstVisibleKey_=function(){for(var t=this.container_.querySelector(".dita-reuse-keys"),o=null,i=0;i<t.childNodes.length;++i)if(t.childNodes[i].offsetParent){o=goog.dom.dataset.get(t.childNodes[i],"reusekey");break}return o};Ze.prototype.selectKey_=function(t,o){if(this.selectedKey_){var i=this.container_.querySelector('[data-reusekey="'+this.selectedKey_+'"]');goog.dom.classlist.remove(i,"selected")}t&&goog.dom.classlist.add(this.container_.querySelector('[data-reusekey="'+t+'"]'),"selected"),this.selectedKey_=t,this.dispatchEvent(new Ac(this.reusableKeys_[t],o))};Ze.prototype.dispose=function(){this.removeAllListeners(),goog.events.EventTarget.prototype.dispose.call(this),this.filter_&&this.filter_.dispose(),goog.dom.removeChildren(this.container_),delete this.container_,delete this.reusableKeys_};var wc=Ze;sync.view.ReusableDitaKeysView=Ze;namespace("sync.events");sync.events.listenOnce=function(t,o,i,n){return new goog.Promise(function(r){n?n.listenOnce(t,o,r,i):goog.events.listenOnce(t,o,r,i)})};sync.events.listenOnceNative=function(t,o,i,n){return sync.util.promise.nativePromise(sync.events.listenOnce(t,o,i,n))};var ZY=sync.events;namespace("sync.actions");var Dc=function(t,o,i){_.call(this,{}),this.editor_=t,this.controller_=o,this.notificationsManager_=i,this.chosenDitamap_=null};goog.inherits(Dc,_);Dc.prototype.setChosenDitamap=function(t){this.chosenDitamap_=t};Dc.prototype.execute=function(){var t=this.chosenDitamap_;return t?(this.chosenDitamap_=null,sync.util.promise.nativePromise(this.setDitamap_(t))):Promise.resolve()};Dc.prototype.setDitamap_=function(t){var o=this,i=this.editor_.isDirty(),n=document.querySelector('[name="DITA/SetDitaMap"]'),r=null;return n&&(r=new rt(n,1),r.show()),t=sync.util.fixupFileUrl(t),this.editor_.getActionsManager().invokeOperation("ro.sync.servlet.operation.SetDitaMapOperation",{ditamap:t}).then(function(s){if(s==="SUCCESS"){o.notificationsManager_.showInfo(tr(msgs.SET_DITA_MAP_SUCCESS_),!0);var a=workspace.getEditingContextManager(),l=a.getDitaContext(),c=sync.util.DitaContextUtil.clone(l);delete c.guessed,c.ditamapUrl=t,a.updateDitaContext(c)}else o.notificationsManager_.showWarning(tr(msgs.SET_DITA_MAP_FAIL_),!0)}).thenCatch(sync.util.error.reloadPage).thenAlways(function(){o.editor_.setDirty(i),r&&r.hide()})};sync.actions.SetDitaMapAction=Dc;var Gs=class extends goog.Disposable{constructor(o){super();let i=goog.dom.createDom;this.icon_=i("div",{className:o}),this.buttonElement_=i("button",{className:"dita-map-view__file-picker-button",title:tr(msgs.CHOOSE_FILE_)},this.icon_),this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_),this.onFileSelect_=null,goog.events.listen(this.buttonElement_,goog.events.EventType.CLICK,()=>{let n=workspace.getUrlChooser();if(n){let r=new sync.api.UrlChooser.Context(sync.api.UrlChooser.Type.GENERIC);r.setInitialUrl(this.initialUrl_),n.chooseUrl(r,this.onFileSelect_,sync.api.UrlChooser.Purpose.CHOOSE)}else this.createInputDialog_(this.initialUrl_).then(this.onFileSelect_)})}createInputDialog_(o){o||(o="");let i=goog.dom.createDom("input",{type:"text",defaultValue:o,style:"width: 100%",autofocus:"on",autocorrect:"off",autocapitalize:"none"});var n=workspace.createDialog();return n.setTitle(tr(msgs.CHOOSE_FILE_)),n.setContentPreferredSize(500,30),n.getElement().appendChild(i),n.show(),new Promise(r=>{n.onSelect(function(s){s===goog.ui.Dialog.DefaultButtonKeys.OK?r(i.value):r(null),n.dispose()})})}getButtonElement(){return this.buttonElement_}setIconImageURL(o){o&&(this.icon_.style.backgroundImage="url("+sync.util.image.getImageUrl(sync.util.computeHdpiIcon(o))+")",this.icon_.style.backgroundSize="cover")}setButtonTitle(o){this.buttonElement_.title=o}addButtonElementClass(o){goog.dom.classlist.add(this.buttonElement_,o)}setFileSelectionListener(o){this.onFileSelect_=o}setInitialUrl(o){this.initialUrl_=o}};var Xa=class extends goog.Disposable{constructor(o){super();this.spinner_=new rt(o,1),this.registerDisposable(this.spinner_);let i=document.body;this.contextInputCombo_=new sync.view.EditableCombo([],new sync.view.ScrollEventTarget(i),tr(msgs.NO_CONTEXT_SELECTED_),!0),this.contextInputElement_=goog.dom.createDom("div",{className:"context-input"}),this.contextInputCombo_.setDetachedMenu(i),this.contextInputCombo_.render(this.contextInputElement_),this.registerDisposable(this.contextInputCombo_)}getInputElement(){return this.contextInputElement_}getEditableCombo(){return this.contextInputCombo_}update(o,i){this.contextId_=i,this.spinner_.show(),sync.rest.callAsync("RESTDitaSupport.getContexts",{url:encodeURIComponent(o)}).then(goog.bind(function(n){this.updateContextComboContexts_(n)},this)).thenCatch(n=>{this.updateContextComboContexts_([])}).thenAlways(()=>this.spinner_.hide())}updateContextComboContexts_(o){if(this.contexts=o,!this.contextInputCombo_)return;let i=this.generateMenuItems_();this.contextInputCombo_.setItems(i),this.contextInputCombo_.setValue(this.selectedItemLabel_)}generateMenuItems_(){let o=[new goog.ui.ComboBoxItem(tr(msgs.NO_CONTEXT_),null)];return this.contextId_||(this.selectedItemLabel_=tr(msgs.NO_CONTEXT_)),this.contexts.map(i=>{let n=this.createUniqueLabel_(i),r=new goog.ui.ComboBoxItem(n,i.id);this.contextId_===i.id&&(this.selectedItemLabel_=n),o.push(r)}),o}setEnabled(o){this.contextInputCombo_.setEnabled(o)}createUniqueLabel_(o){return this.contexts.some(n=>n!==o&&n.name===o.name)?`${o.name} (${o.id})`:o.name}};var rE="sync-checkbox",Dp=class{constructor(o){this.projectInput_=null,this.mapInput_=null,this.filterInput_=null,this.contextId_=null,this.applyChangesCallback_=o,this.isContextUpdateEnabled_=!0}showContextConfigDialog(o){this.createContextConfigDialog_();let i=workspace.getEditingContextManager().getDitaContext();this.ditamap_=i.ditamapUrl,this.filter_=i.filterUrl,this.project_=i.ditaProjectUrl,this.contextId_=i.ditaProjectContextId,this.isProjectActive_=i.isProjectActive,this.updateDisabledSection_(),this.updateContextConfigFormData_(),this.contextConfigDialog_.onSelect(goog.bind(function(n){try{if(n==="apply"){this.mapInput_.getValue()===""&&(this.ditamap_=null),this.filterInput_.getValue()===""&&(this.filter_=null),this.projectInput_.getValue()===""&&(this.project_=null);let r=new sync.api.DitaContext(this.ditamap_,this.filter_,!1,this.project_,this.contextId_,this.isProjectActive_),s=goog.dom.getElementByClass("sync-checkbox__input",this.showExcludedContentCheckbox_).checked;this.applyChangesCallback_(r,s)}}finally{this.contextConfigDialog_.dispose(),this.contextCombo_.dispose(),o()}},this)),this.contextConfigDialog_.show()}updateContextConfigFormData_(){this.isProjectActive_?(this.projectOption_.checked=!0,this.mapOption_.checked=!1):(this.projectOption_.checked=!1,this.mapOption_.checked=!0),this.updateInputFileName_(this.mapInput_,this.ditamap_),this.updateInputFileName_(this.filterInput_,this.filter_),this.updateInputFileName_(this.projectInput_,this.project_),this.project_&&this.contextCombo_.update(this.project_,this.contextId_)}createContextConfigDialog_(){this.contextConfigDialog_=workspace.createDialog(),this.contextConfigDialog_.getElement().id="context-config-dialog",this.contextConfigDialog_.setPreferredSize(450,null),this.contextConfigDialog_.setButtonConfiguration([{key:"apply",caption:tr(msgs.APPLY_)},{key:"cancel",caption:tr(msgs.CANCEL_)}]),this.contextConfigDialog_.setTitle(tr(msgs.CONFIGURE_DITA_CONTEXT_));let o=this.contextConfigDialog_.getElement();o.classList.add("context-config-dialog"),o.appendChild(this.createContextConfigForm_());let i=!0,n=workspace.getWorkspaceOptions().getOption("show.excluded.content");n&&(i=n!=="false"),this.showExcludedContentCheckbox_=sync.ui.util.createElement(rE,{id:"hide-filtered-content",checked:i,label:tr(msgs.SHOW_EXCLUDED_CONTENT_)}),goog.dom.appendChild(o,this.showExcludedContentCheckbox_)}createContextConfigForm_(){let o=goog.dom.createDom("div",{className:"configure-context-form"});return this.createProjectSection_(o),this.createMapSection_(o),o}createProjectSection_(o){let i=workspace.getEditingContextManager().getDitaContext(),n=goog.dom.createDom("input",{type:"radio",id:"projectOption",name:"option",value:"project"}),r=goog.dom.createDom("label",{for:"projectOption"},tr(msgs.DITA_PROJECT_)),s=this.createDitaProjectInfoButton_(),a=goog.dom.createDom("div",{className:"project-header"},n,r,s);goog.dom.appendChild(o,a);let l=this.createTextField_("project-input",tr(msgs.NO_PROJECT_SELECTED_));l.setIsClearable(!1);let c=goog.dom.createDom("label",{className:"project-label",for:l.getInputId()},tr(msgs.PROJECT_)+":"),d=this.createFilePickerButton_("project-button",this.chooseProject_.bind(this),i?.ditaProjectUrl);this.contextCombo_=new Xa(this.contextConfigDialog_.getElement());let g=this.contextCombo_.getInputElement();goog.dom.getElementsByTagName("input",g)[0].id="context-input";let m=goog.dom.createDom("label",{className:"context-label",for:"context-input"},tr(msgs.CONTEXT_)+":");goog.events.listen(this.contextCombo_.getEditableCombo(),goog.ui.Component.EventType.ACTION,v=>{this.contextId_=v.item.getModel()}),goog.dom.appendChild(o,c),goog.dom.appendChild(o,l),goog.dom.appendChild(o,d),goog.dom.appendChild(o,m),goog.dom.appendChild(o,g),this.projectOption_=n,this.projectOption_.addEventListener("change",this.changeIsProjectActive_.bind(this)),this.projectInput_=l,this.chooseProjectButton_=d}chooseProject_(o){o!=null&&(this.project_=o,this.updateInputFileName_(this.projectInput_,this.project_),this.contextCombo_.update(this.project_,this.contextId_),this.isProjectActive_&&this.isApplyButtonDisabled_&&this.setApplyButtonDisabled_(!1))}createDitaProjectInfoButton_(o){let i=sync.ext.Registry.extensionURL+sync.util.computeHdpiIcon("img/Info16.png"),n=sync.util.renderSmallIcon(i),r=goog.dom.createDom("button",{className:"dita-project-info","aria-label":"Learn more about DITA Projects"},n);return r.onclick=function(){let s=sync.util.help.getDocumentationUrl(sync.util.help.Id.DITA_OT_PROJECTS);sync.util.open(s,"_blank")?.focus()},r}createMapSection_(o){let i=workspace.getEditingContextManager().getDitaContext(),n=goog.dom.createDom("div",{className:"map-header"}),r=goog.dom.createDom("input",{type:"radio",id:"mapOption",name:"option",value:"map"}),s=goog.dom.createDom("label",{for:"mapOption"},tr(msgs.DITA_MAP_));goog.dom.appendChild(n,r),goog.dom.appendChild(n,s),goog.dom.appendChild(o,n);let a=this.createTextField_("map-input",tr(msgs.NO_MAP_SELECTED_));a.setIsClearable(!1);let l=goog.dom.createDom("label",{className:"map-label",for:a.getInputId()},tr(msgs.MAP_LABEL_)),c=this.createTextField_("filter-input",tr(msgs.NO_FILTER_SELECTED_));c.setShowClear(!0);let d=goog.dom.createDom("label",{className:"filter-label",for:c.getInputId()},tr(msgs.FILTER_LABEL_)),g=this.createFilePickerButton_("map-button",this.chooseMap_.bind(this),i?.ditamapUrl),m=this.createFilePickerButton_("filter-button",this.chooseFilter_.bind(this),i?.filterUrl);goog.dom.appendChild(o,l),goog.dom.appendChild(o,a),goog.dom.appendChild(o,g),goog.dom.appendChild(o,d),goog.dom.appendChild(o,c),goog.dom.appendChild(o,m),this.mapOption_=r,this.mapOption_.addEventListener("change",this.changeIsProjectActive_.bind(this)),this.mapInput_=a,this.filterInput_=c,this.chooseMapButton_=g,this.chooseFilterButton_=m}createTextField_(o,i){return sync.ui.util.createElement("sync-text-field",{id:o,class:o,placeholder:i,autocorrect:"off",autocapitalize:"none",readonly:"true"})}createFilePickerButton_(o,i,n){let r=new Gs("Open16_dark");return r.setFileSelectionListener(i),r.addButtonElementClass(o),r.setInitialUrl(n),r.getButtonElement()}chooseMap_(o){o!=null&&(this.ditamap_=o,this.updateInputFileName_(this.mapInput_,this.ditamap_),!this.isProjectActive_&&this.isApplyButtonDisabled_&&this.setApplyButtonDisabled_(!1))}chooseFilter_(o){o!=null&&(this.filter_=o,this.updateInputFileName_(this.filterInput_,this.filter_))}updateInputFileName_(o,i){let n=new sync.util.Url(i).getFileName();o.setValue(n)}changeIsProjectActive_(o){o.target.value==="project"?(this.isProjectActive_=!0,this.project_==null?this.setApplyButtonDisabled_(!0):this.setApplyButtonDisabled_(!1)):(this.isProjectActive_=!1,this.ditamap_==null?this.setApplyButtonDisabled_(!0):this.setApplyButtonDisabled_(!1)),this.updateDisabledSection_()}updateDisabledSection_(){this.setProjectSectionDisabled_(!this.isProjectActive_||!this.isContextUpdateEnabled_),this.setMapSectionDisabled_(this.isProjectActive_||!this.isContextUpdateEnabled_),this.projectOption_.disabled=!this.isContextUpdateEnabled_,this.mapOption_.disabled=!this.isContextUpdateEnabled_}setProjectSectionDisabled_(o){this.projectInput_.setAttribute("disabled",o),this.chooseProjectButton_.disabled=o;var i=this.contextCombo_.getEditableCombo();i.setEnabled(!o)}setMapSectionDisabled_(o){this.mapInput_.setAttribute("disabled",o),this.filterInput_.setAttribute("disabled",o),this.chooseMapButton_.disabled=o,this.chooseFilterButton_.disabled=o}setApplyButtonDisabled_(o){let i=this.contextConfigDialog_.getButtonSet().getButton("apply");i.disabled=o,this.isApplyButtonDisabled_=o}setContextUpdateEnabled(o){this.isContextUpdateEnabled_=o}};var qs=class extends sync.actions.Action{constructor(o){super({});this.callsCallback=!0,this.contextConfigDialog_=new Dp(o)}actionPerformed(o){let i=o||goog.nullFunction;this.contextConfigDialog_.showContextConfigDialog(i)}getDisplayName(){return tr(msgs.CONFIGURE_DITA_CONTEXT_)}getSmallIcon(){return sync.util.image.getImageUrl(sync.util.computeHdpiIcon("/images/SettingsToolbar16.png"))}getDescription(){return tr(msgs.CONFIGURE_DITA_CONTEXT_)}isEnabled(){return!0}setContextUpdateEnabled(o){this.contextConfigDialog_.setContextUpdateEnabled(o)}};sync.actions.dita.OpenContextConfigDialogAction=qs;namespace("sync.actions");var et=function(t,o,i){sync.actions.AbstractAction.call(this,t),this.editor_=o,this.actionsManager_=i;let n=this.editor_.getEditingContextManager();this.ditamapChangedEventKey=goog.events.listen(n,sync.api.EditingContextManager.EventTypes.CONTEXT_CHANGED,goog.bind(function(){i.refreshActionsStatus("DITA"),this.cleanup_()},this)),this.selectedReusableKey_=null,this.reusableKeysView_=null};goog.inherits(et,sync.actions.AbstractAction);et.prototype.ONLY_CANCEL_CFG_=sync.api.Dialog.ButtonConfiguration.CANCEL;et.prototype.actionPerformed=function(t){this.dialog_||(this.dialog_=this.createDialog_()),this.dialog_.show(),this.ensureMapChosen_().then(()=>{var o=goog.bind(function(){this.insertReusableKeyInDocument_(this.selectedReusableKey_,t)},this),i=this.loadReusableKeysView_().then(goog.bind(function(n){this.configureDialogButtons_(n),this.attachKeyListeners_(n,o)},this)).thenCatch(goog.bind(this.presentError_,this));this.dialog_.onSelect(goog.bind(function(n,r){n==="ok"?this.selectedReusableKey_?o():r.preventDefault():(i.cancel(),t())},this))})};et.prototype.ensureMapChosen_=function(){let t=this.editor_.getEditingContextManager().getDitaContext();return t.ditamapUrl?goog.Promise.resolve():t.ditaProjectUrl?t.ditaProjectContextId?goog.Promise.resolve():this.loadChooseDitaMapView_():this.loadChooseDitaMapView_()};et.prototype.configureDialogButtons_=function(t){var o=t.scrollSelectedKeyIntoView(),i=[{key:"ok",caption:tr(msgs.INSERT_)},{key:"cancel",caption:tr(msgs.CANCEL_)}];t.hasReusableKeys()&&o?this.dialog_.setButtonConfiguration(i):this.dialog_.setButtonConfiguration(sync.api.Dialog.ButtonConfiguration.CANCEL),t.listenOnce(wc.Events.KEY_SELECTED,goog.bind(function(){this.dialog_.setButtonConfiguration(i)},this))};et.prototype.attachKeyListeners_=function(t,o){t.listen(wc.Events.KEY_SELECTED,goog.bind(function(i){this.selectedReusableKey_=i.ditaKey},this)),t.listen(wc.Events.KEY_SUBMITTED,goog.bind(function(){this.dialog_.hide(),o()},this))};et.prototype.presentError_=function(t){t instanceof goog.Promise.CancellationError||(console.error(t),this.cleanup_(),this.dialog_.getElement().appendChild(goog.dom.createDom("div","",tr(msgs.INTERNAL_SERVER_ERROR_))))};et.prototype.isEnabled=function(){return!this.editor_.getReadOnlyState().readOnly&&!sync.select.evalSelectionFunction(sync.util.isInReadOnlyContent)&&!sync.select.evalSelectionFunction(this.isInsideImageMap)};et.prototype.isInsideImageMap=sync.util.createCachedFunction(function(t){return!!sync.api.dom.getAncestorElement(t.getNodeAtSelection(),function(o){return o.getTagName()==="imagemap"})});et.prototype.cleanup_=function(){this.reusableKeysView_&&(this.reusableKeysView_.dispose(),this.reusableKeysView_=null),this.selectedReusableKey_=null,this.dialog_&&(this.dialog_.setButtonConfiguration(this.ONLY_CANCEL_CFG_),goog.dom.removeChildren(this.dialog_.getElement()))};et.prototype.createDialog_=function(){var t=workspace.createDialog();return t.setButtonConfiguration(this.ONLY_CANCEL_CFG_),t.setPreferredSize(740,830),t.setResizable(!0),t.setTitle(tr(msgs.DITA_KEYS_)),t};et.prototype.loadChooseDitaMapView_=function(){return this.cleanup_(),this.addSetDitamapOrContextMessage_().then(()=>goog.dom.removeChildren(this.dialog_.getElement())).then(()=>this.askForDitaContext_()).then(t=>{if(t.ditamapUrl||t.ditaProjectUrl&&t.ditaProjectContextId){workspace.getEditingContextManager().updateDitaContext(t);let i,n;return t.isProjectActive?(i={ditaProjectUrl:t.ditaProjectUrl,ditaProjectContextId:t.ditaProjectContextId,render:!0},n="ro.sync.servlet.operation.SetDitaProjectContextOperation"):(i={ditamap:t.ditamapUrl,ditaval:t.filterUrl,render:!0},n="ro.sync.servlet.operation.SetDitaMapOperation"),this.editor_.getActionsManager().invokeOperation(n,i)}else return this.loadChooseDitaMapView_()})};et.prototype.askForDitaContext_=function(){let t=goog.Promise.withResolver();return new qs(i=>{t.resolve(i)}).actionPerformed(()=>{t.resolve({})}),t.promise};et.prototype.addSetDitamapOrContextMessage_=function(){var t=goog.dom.createDom,o=this.dialog_.getElement();goog.dom.removeChildren(o),o.appendChild(t("div",{class:"flexbox-centered full-width-height",style:"text-align:center"},t("div","",[t("div","",tr(msgs.DITA_CONTEXT_NOT_AVAILABLE_FOR_KEYS_)),t("div","",trDom(msgs.CLICK_HERE_TO_SET_DITAMAP_,{$SET_DITAMAP_BUTTON:t("div",{class:"dita-maps-manager-button",style:"display: inline-block;vertical-align: sub;cursor: pointer;"})}))])));let i=o.querySelector(".dita-maps-manager-button");return sync.events.listenOnce(i,goog.events.EventType.CLICK)};et.prototype.loadReusableKeysView_=function(){return goog.Promise.resolve().then(goog.bind(function(){if(this.reusableKeysView_)return this.reusableKeysView_.removeAllListeners(),this.reusableKeysView_;var t=new rt(this.dialog_.getElement());return t.show(),this.actionsManager_.invokeOperation("ro.sync.servlet.operation.reusablekeys.RetrieveReusableComponents",{},null,null,!0).thenAlways(function(){t.hide()}).then(goog.bind(function(o){let n=this.editor_.getEditingContextManager().getDitaContext(),r=n.isProjectActive&&!!n.ditaProjectUrl;return this.reusableKeysView_=new wc(JSON.parse(o),this.dialog_.getElement(),r),this.reusableKeysView_.render(),this.reusableKeysView_},this))},this))};et.prototype.insertReusableKeyInDocument_=function(t,o){var i="ph";t.hrefValue&&(i="xref"),this.actionsManager_.invokeOperation("ro.sync.ecss.extensions.commons.operations.InsertFragmentOperation",{fragment:"<"+i+' keyref="'+t.key+'"/>'},o)};et.prototype.getSmallIcon=function(t){return sync.util.image.getImageUrl("/images/DockableFrameReusableComponents16.png",t)};et.prototype.getLargeIcon=function(t){return sync.util.image.getImageUrl("/images/DITAReusableComponents24.png",t)};et.prototype.getDisplayName=function(){return tr(msgs.DITA_KEYS_)};et.prototype.getDescription=function(){return tr(msgs.DITA_KEYS_DESCRIPTION_)};et.prototype.dispose=function(){this.dialog_&&this.dialog_.dispose(),goog.events.unlistenByKey(this.ditamapChangedEventKey)};sync.actions.ReuseDitaKeysAction=et;namespace("sync.canvas");sync.canvas.fixScale=function(t,o){if(!t.isType(sync.canvas.customPolygonType)){var i=t.scaleX,n=t.scaleY,r=t.left,s=t.top;if(!(i===1&&n===1)){var a=t.width*i,l=t.height*n,c=t.radius*i;if(o){var d=o(r,s,a,l);r=d.x,s=d.y}t.set({left:r,top:s,height:l,width:a,scaleX:1,scaleY:1,radius:c})}}};sync.canvas.renderShapeFromObj_=function(t,o,i){var n,r=i.get("type");if(r===sync.canvas.customCircleType)n=goog.dom.createDom("circle","shape"),sync.util.dom.setAttributes(n,{cx:Math.round(t+i.radius),cy:Math.round(o+i.radius),r:Math.round(i.radius)});else if(r===sync.canvas.customRectangleType)n=goog.dom.createDom("rect","shape"),sync.util.dom.setAttributes(n,{x:Math.round(i.left),y:Math.round(i.top),width:Math.round(i.width),height:Math.round(i.height)});else if(r===sync.canvas.customPolygonType){n=goog.dom.createDom("polygon","shape");var s=i.points,a="";for(var l of s)a=a+Math.round(l.x)+" "+Math.round(l.y)+" ";a=a.slice(0,-1),n.setAttribute("points",a)}return n};sync.canvas.appendNewChild_=function(t,o,i){for(var n in i)i.hasOwnProperty(n)&&goog.dom.dataset.set(o,n,i[n]);goog.dom.appendChild(t,o)};sync.canvas.toSVG=function(t){for(var o=goog.dom.createDom,i=o("svg"),n=0;n<t.length;n++){var r=t[n],s=null,a=null,l=r.get("type"),c=r.left,d=r.top;if(l==="group"&&(a=r,r=r.item(0),l=r.get("type"),c=a.left,d=a.top),s=sync.canvas.renderShapeFromObj_(c,d,r),s){var g=r.modelProps;g||(g={}),g.layer=n,sync.canvas.appendNewChild_(i,s,g)}}return sync.util.getOuterHTML(i)};sync.canvas.fabricPromise_=null;sync.canvas.loadFabric=function(){if(!sync.canvas.fabricPromise_){var t="node_modules/fabric/dist/fabric.js";sync.util.isDevMode()||(t=it+"-"+t),sync.canvas.fabricPromise_=sync.util.dom.loadJsFile(t).then(()=>window.fabric)}return sync.canvas.fabricPromise_};sync.canvas.containsSufficientZoomParameters_=function(t){var o=!!(t.zoomIncrement&&t.imageHeight&&t.imageWidth);return o||console.warn("Insufficient parameters for zooming the canvas"),o};sync.canvas.zoom=function(t,o){var i=o.minZoom||.1,n=o.maxZoom||2;if(sync.canvas.containsSufficientZoomParameters_(o)){var r=o.zoomIncrement,s=parseFloat(t.getZoom().toFixed(2)),a=!1,l=!1;r<0?a=s>i:l=s<n,(l||a)&&(s+=r,t.setZoom(s),t.setHeight(s*o.imageHeight),t.setWidth(s*o.imageWidth))}};sync.canvas.LabeledCircle=null;sync.canvas.LabeledRect=null;sync.canvas.LabeledPolygon=null;sync.canvas.customCircleType="labeledCircle";sync.canvas.customRectangleType="labeledRect";sync.canvas.customPolygonType="labeledPolygon";sync.canvas.polygonEditingMode={ADD:"add",EDIT:"edit",NORMAL:"normal"};sync.canvas.renderLabels=!0;sync.canvas.makeExtensionClass_=function(t,o){var i=function(n){n=n||{},this.callSuper("initialize",n)};return o==="Polygon"&&(i=function(n,r){r=r||{},this.callSuper("initialize",n,r)}),t.util.createClass(t[o],{type:"labeled"+o,initialize:i,_getCacheCanvasDimensions:function(){var n=this.callSuper("_getCacheCanvasDimensions");return n.width+=15,n.height+=15,n},_render:function(n){if(this.callSuper("_render",n),!!sync.canvas.renderLabels){var r=sync.util.getHdpiFactor()||1,s=10*r;this.zoomX&&this.zoomY&&(this.zoomX!==1||this.zoomY!==1)&&(s=s/this.zoomX);var a=0,l=0;o!=="Circle"&&(a=0-this.width/2+10/2,l=0-this.height/2+10/2),n.beginPath(),n.arc(a,l,s,0,2*Math.PI,!1),n.fillStyle="blue",n.fill(),n.stroke();var c=r*10/this.zoomX;n.font=c+"px Helvetica",n.fontWeight="bold",n.fillStyle="white",n.textAlign="center",n.textBaseline="middle",n.fillText(this.label||this.canvas.getObjects().indexOf(this)+1,a,l)}}})};sync.canvas.circleFromElement=function(t,o){o=o||{};var i=window.fabric.parseAttributes(t,window.fabric.Circle.ATTRIBUTE_NAMES);if(!("radius"in i)&&i.radius>=0)throw new Error("value of `r` attribute is required and can not be negative");i.left=i.left||0,i.top=i.top||0;var n=new sync.canvas.LabeledCircle(sync.util.extend(i,o));return n.left-=n.radius,n.top-=n.radius,n};sync.canvas.rectFromElement=function(t,o){if(!t)return null;o=o||{};var i=window.fabric.parseAttributes(t,window.fabric.Rect.ATTRIBUTE_NAMES);i.left=i.left||0,i.top=i.top||0;var n=new sync.canvas.LabeledRect(sync.util.extend(window.fabric.util.object.clone(o),i));return n.visible=n.visible&&n.width>0&&n.height>0,n};sync.canvas.polygonFromElement=function(t,o){if(!t)return null;o=o||{};var i=window.fabric.parsePointsAttribute(t.getAttribute("points")),n=window.fabric.parseAttributes(t,window.fabric.Polygon.ATTRIBUTE_NAMES),r=sync.util.extend(n,o);return new sync.canvas.LabeledPolygon(i,r)};sync.canvas.addPolygonHandles=function(t,o){t.preserveObjectStacking=!0;for(var i=o.syncPointsCenterOffsets||o.points,n=o.getCenterPoint(),r=0;r<o.points.length;r++)o.points[r].x=n.x+o.syncPointsCenterOffsets[r].x,o.points[r].y=n.y+o.syncPointsCenterOffsets[r].y;for(var s=sync.util.getHdpiFactor()||1,a=0;a<i.length;a++){var l=i[a],c=new window.fabric.Rect({width:12*s,height:12*s,fill:"rgba(255, 255, 255, 0.1)",strokeWidth:2,stroke:"blue",left:l.x+n.x,top:l.y+n.y,originX:"center",originY:"center",hasBorders:!1,hasControls:!1,name:a,polygonParent:t.getObjects().indexOf(o),polygonHandle:!0});t.add(c)}};sync.canvas.removePolygonHandles=function(t){t.preserveObjectStacking=!1;var o=t.getObjects(),i=o.filter(r=>r.polygonHandle);for(var n of i)t.remove(n)};sync.canvas.recreatePolygon=function(t,o,i){var n=o.points,r=o.modelProps.layer,s=t.getActiveObject(),a=null;s&&s.modelProps&&(a=s.modelProps.layer),t.remove(t.item(r));var l=sync.util.extend({modelProps:{layer:r}},i),c=new sync.canvas.LabeledPolygon(n,l);t.insertAt(c,c.modelProps.layer),a===r&&t.setActiveObject(c)};sync.canvas.commonOptions={strokeWidth:2,stroke:"blue",border:"blue",fill:"rgba(255, 255, 255, 0.1)",borderColor:"blue",cornerColor:"rgba(0, 0, 255, 0.5)",transparentCorners:!1,borderScaleFactor:2,borderDashArray:[3,3],lockScalingFlip:!0,lockRotation:!0};sync.canvas.getCircleOptions=function(){return sync.util.extend({lockUniScaling:!0,noScaleCache:!1,controls:{...window.fabric.Circle.prototype.controls,mtr:new window.fabric.Control({visible:!1})}},sync.canvas.commonOptions)};sync.canvas.getRectOptions=function(){return sync.util.extend({noScaleCache:!1,controls:{...window.fabric.Circle.prototype.controls,mtr:new window.fabric.Control({visible:!1})}},sync.canvas.commonOptions)};sync.canvas.polygonOptions=sync.util.extend({hasControls:!1,hasBorders:!1},sync.canvas.commonOptions);sync.canvas.tempPolygonOptions=sync.util.extend({selectable:!1,fill:"transparent"},sync.canvas.polygonOptions);sync.canvas.cloneState=function(t){var o;return t.modelProps&&(o=JSON.parse(JSON.stringify(t)),o.modelProps={layer:t.modelProps.layer}),o};sync.canvas.eventTarget=new goog.events.EventTarget;sync.canvas.ImgEditorEvent=function(t,o){this.type=t,this.obj=o};sync.canvas.ImgEditorEvent.EventType={STATE_CHANGED:"state_changed",NEW_UNDO:"new_undo",UNDO:"undo",REDO:"redo"};sync.canvas.updateLayerNumbers=function(t){for(var o=t.getObjects(),i=0;i<o.length;i++){var n=o[i];n.modelProps||(n.modelProps={}),n.modelProps.layer=i,n.dirty=!0}t.renderAll()};sync.canvas.recreateShapeToState=function(t,o,i){var n=null;return o.type===sync.canvas.customPolygonType?n=sync.canvas.recreatePolygonToState(t,o,i):o.polygonHandle||(n=sync.canvas.recreateSimpleShapeToState(t,o,i)),n};sync.canvas.recreatePolygonToState=function(t,o,i){sync.canvas.removePolygonHandles(t);var n=i.points,r=sync.util.extend({modelProps:{layer:i.modelProps.layer}},sync.canvas.polygonOptions);t.remove(o);let s=r.modelProps.layer;return t.insertAt(new sync.canvas.LabeledPolygon(n,r),s),sync.canvas.updateLayerNumbers(t),t.item(s)};sync.canvas.recreateSimpleShapeToState=function(t,o,i){t.remove(o);var n=i.type;n=n.charAt(0).toUpperCase()+n.slice(1);var r=sync.canvas.cloneState(i),s=n.indexOf("Circle")!==-1?sync.canvas.getCircleOptions():sync.canvas.getRectOptions();sync.util.extend(r,s);var a=i.modelProps.layer;return t.insertAt(new sync.canvas[n](r),a),sync.canvas.updateLayerNumbers(t),t.item(a)};var P2=sync.canvas;namespace("sync.image");var Np=function(t,o,i){this.canvas_=t,this.undoState_=sync.canvas.cloneState(o),this.redoState_=sync.canvas.cloneState(i)};Np.prototype.undo=function(){var t=sync.canvas.recreateShapeToState(this.canvas_,this.canvas_.item(this.redoState_.modelProps.layer),this.undoState_);t&&this.canvas_.setActiveObject(t)};Np.prototype.redo=function(){var t=sync.canvas.recreateShapeToState(this.canvas_,this.canvas_.item(this.undoState_.modelProps.layer),this.redoState_);t&&this.canvas_.setActiveObject(t)};var hy=Np;sync.image.LayerMoveAction=Np;namespace("sync.image");var Xs=function(t,o,i){this.canvas_=t,this.undoState_=sync.canvas.cloneState(o),this.redoState_=sync.canvas.cloneState(i)};Xs.prototype.undo=function(){this.moveOrRecreateShape_(this.canvas_.item(this.redoState_.modelProps.layer),this.undoState_)};Xs.prototype.redo=function(){this.moveOrRecreateShape_(this.canvas_.item(this.undoState_.modelProps.layer),this.redoState_)};Xs.prototype.moveOrRecreateShape_=function(t,o){t.isType(sync.canvas.customPolygonType)?(sync.canvas.recreatePolygon(this.canvas_,o,sync.canvas.polygonOptions),this.dispatchStateChanged_(this.canvas_.item(o.modelProps.layer))):t.polygonHandle||this.moveSimpleShape_(t,o)};Xs.prototype.moveSimpleShape_=function(t,o){t.set("left",o.left),t.set("top",o.top),t.radius?t.set("radius",o.radius):(t.set("height",o.height),t.set("width",o.width)),t.dirty=!0,this.canvas_.renderAll(),t.setCoords(),this.dispatchStateChanged_(t)};Xs.prototype.dispatchStateChanged_=function(t){goog.events.dispatchEvent(sync.canvas.eventTarget,new sync.canvas.ImgEditorEvent(sync.canvas.ImgEditorEvent.EventType.STATE_CHANGED,t))};var Mp=Xs;sync.image.MoveShapeAction=Xs;namespace("sync.image");var xp=function(t,o){this.canvas_=t,this.undoState_=sync.canvas.cloneState(o)};xp.prototype.undo=function(){sync.canvas.recreateShapeToState(this.canvas_,this.undoState_,this.undoState_)};xp.prototype.redo=function(){var t=this.canvas_,o=t.item(this.undoState_.modelProps.layer),i=o.isType(sync.canvas.customPolygonType);i&&sync.canvas.removePolygonHandles(t),t.remove(o),sync.canvas.updateLayerNumbers(t)};var uy=xp;sync.image.RemoveShapeAction=xp;namespace("sync.image");var Rp=function(t,o){this.canvas_=t,this.redoState_=sync.canvas.cloneState(o)};Rp.prototype.undo=function(){var t=this.canvas_,o=t.item(this.redoState_.modelProps.layer),i=o.isType(sync.canvas.customPolygonType);i&&sync.canvas.removePolygonHandles(t),t.remove(o)};Rp.prototype.redo=function(){var t=sync.canvas.recreateShapeToState(this.canvas_,this.redoState_,this.redoState_);t&&this.canvas_.setActiveObject(t)};var Nc=Rp;sync.image.AddShapeAction=Rp;namespace("sync.image");var Qn=function(t,o){this.undoStack_=[],this.redoStack_=[],this.toolbar_=t,this.maxUndoStackSize_=o;var i=sync.canvas.eventTarget,n=sync.canvas.ImgEditorEvent.EventType;this.eventHandler_=new goog.events.EventHandler(this).listen(i,n.NEW_UNDO,goog.bind(this.addUndoAction_,this)).listen(i,n.UNDO,goog.bind(this.undoAction_,this)).listen(i,n.REDO,goog.bind(this.redoAction_,this))};Qn.prototype.addUndoAction_=function(t){this.undoStack_.push(t.obj),this.redoStack_=[],this.toolbar_.refreshActionsStatus()};Qn.prototype.undoAction_=function(){var t=this.undoStack_[this.undoStack_.length-1];t.undo(),this.pushToStack_("undo"),this.toolbar_.refreshActionsStatus()};Qn.prototype.redoAction_=function(){var t=this.redoStack_[this.redoStack_.length-1];t.redo(),this.pushToStack_("redo"),this.toolbar_.refreshActionsStatus()};Qn.prototype.stackNotEmpty=function(t){var o=t==="undo"?this.undoStack_:this.redoStack_;return!!(o&&o.length>0)};Qn.prototype.pushToStack_=function(t){var o=t==="undo"?"redo":"undo";o==="redo"?this.pushToStackAndTrim_(this.redoStack_,this.undoStack_.pop()):this.pushToStackAndTrim_(this.undoStack_,this.redoStack_.pop())};Qn.prototype.pushToStackAndTrim_=function(t,o){t.push(o),t.length>this.maxUndoStackSize_&&t.shift()};Qn.prototype.dispose=function(){this.eventHandler_.dispose()};var my=Qn;sync.image.ImageMapUndoManager=Qn;namespace("sync.image");var b=function(){this.zoomOutActionId_="ImageMap/ZoomOut",this.zoomInActionId_="ImageMap/ZoomIn",this.insertPolygonActionId_="ImageMap/Polygon",this.toggleLabelActionId_="ImageMap/ToggleLabel",this.fabric_=null,this.actionsManager_=new en,this.createActions_(),this.initToolbar_();var t=100;this.undoManager_=new my(this.toolbar_,t),this.eventHandler_=new goog.events.EventHandler(this),this.imgUrl_=null,this.imgWidth_="0",this.imgHeight_="0",this.editorDirty_=!1,this.minZoom_=.1,this.maxZoom_=2,this.mouseDownCoords_=null,this.originalScroll_=null,this.mode_=sync.canvas.polygonEditingMode.NORMAL,this.currentShape_=null,this.objectSnapshot_=null,this.finishedDraggingHandle_=!0,this.initCanvasConfig_()};b.prototype.initToolbar_=function(){this.toolbar_=new Be(this.actionsManager_),this.toolbar_.config=new Co({toolbars:[{type:"list",name:"ImageMap",children:[{type:"action",id:"ImageMap/Circle"},{type:"action",id:"ImageMap/Rect"},{type:"action",id:this.insertPolygonActionId_},{type:"sep"},{type:"action",id:"ImageMap/Duplicate"},{type:"action",id:"ImageMap/Delete"},{type:"sep"},{type:"action",id:"ImageMap/Undo"},{type:"action",id:"ImageMap/Redo"},{type:"sep"},{type:"action",id:this.toggleLabelActionId_},{type:"action",id:"ImageMap/BringToFront"},{type:"action",id:"ImageMap/BringForward"},{type:"action",id:"ImageMap/SendBackward"},{type:"action",id:"ImageMap/SendToBack"},{type:"sep"},{type:"action",id:this.zoomInActionId_},{type:"action",id:this.zoomOutActionId_}]}]})};b.prototype.dispose=function(){this.eventHandler_.dispose(),this.undoManager_.dispose(),this.actionsManager_.dispose(),this.toolbar_.dispose(),this.canvas_&&this.canvas_.dispose()};b.prototype.createActions_=function(){var t={"ImageMap/Circle":{actionPerformed:goog.bind(this.insertCircle_,this),largeIconPath:"/images/NewCircle24.png",description:tr(msgs.NEW_CIRCLE_)},"ImageMap/Rect":{actionPerformed:goog.bind(this.insertRect_,this),largeIconPath:"/images/NewRectangle24.png",description:tr(msgs.NEW_RECTANGLE_)},"ImageMap/ToggleLabel":{actionPerformed:goog.bind(function(){sync.canvas.renderLabels=!sync.canvas.renderLabels,this.toggleButton_(this.toggleLabelActionId_,sync.canvas.renderLabels),this.updateLayerNumbers_()},this),largeIconPath:"/images/ShowLayers24.png",description:tr(msgs.SHOW_LAYERS_)},"ImageMap/Polygon":{actionPerformed:goog.bind(this.insertPolygon_,this),largeIconPath:"/images/FreeShape24.png",description:tr(msgs.NEW_POLYGON_)},"ImageMap/Duplicate":{actionPerformed:goog.bind(this.duplicateShape_,this),largeIconPath:"/images/CopyArea24.png",description:tr(msgs.DUPLICATE_),isEnabled:goog.bind(function(){return this.canvas_&&this.canvas_.getActiveObject()},this)},"ImageMap/Delete":{actionPerformed:goog.bind(this.deleteShape_,this),largeIconPath:"/images/DeleteArea24.png",description:tr(msgs.DELETE_),keyStrokeStr:J.KeyNames[goog.events.KeyCodes.DELETE],isEnabled:goog.bind(function(){return this.canvas_&&this.canvas_.getActiveObject()},this)},"ImageMap/Undo":{actionPerformed:goog.bind(this.dispatchUndoEvent_,this,sync.canvas.ImgEditorEvent.EventType.UNDO),largeIconPath:"/images/Undo24.png",description:tr(msgs.EDIT_UNDO_),keyStrokeStr:"M1 Z",isEnabled:goog.bind(this.stackNotEmpty_,this,"undo")},"ImageMap/Redo":{actionPerformed:goog.bind(this.dispatchUndoEvent_,this,sync.canvas.ImgEditorEvent.EventType.REDO),largeIconPath:"/images/Redo24.png",description:tr(msgs.EDIT_REDO_),keyStrokeStr:"M1 Y",isEnabled:goog.bind(this.stackNotEmpty_,this,"redo")},"ImageMap/ZoomIn":{actionPerformed:goog.bind(this.zoom_,this,"zoomIn"),largeIconClass:"largeZoomInIcon ui-action-large-icon",keyStrokeStr:J.KeyNames[goog.events.KeyCodes.NUM_PLUS],isEnabled:goog.bind(this.canZoom_,this,"zoomIn"),description:tr(msgs.ZOOM_IN_)},"ImageMap/ZoomOut":{actionPerformed:goog.bind(this.zoom_,this,"zoomOut"),largeIconClass:"largeZoomOutIcon ui-action-large-icon",keyStrokeStr:J.KeyNames[goog.events.KeyCodes.NUM_MINUS],isEnabled:goog.bind(this.canZoom_,this,"zoomOut"),description:tr(msgs.ZOOM_OUT_)},"ImageMap/ZoomReset":{actionPerformed:goog.bind(this.zoom_,this,"zoomReset"),keyStrokeStr:"M1 numpad0"},"ImageMap/BringToFront":{actionPerformed:goog.bind(this.moveLayer_,this,"sendToBack"),largeIconPath:"/images/BringShapeToFront24.png",isEnabled:goog.bind(this.canMoveLayer_,this,"forward"),description:tr(msgs.BRING_SHAPE_TO_FRONT_)},"ImageMap/BringForward":{actionPerformed:goog.bind(this.moveLayer_,this,"sendBackwards"),largeIconPath:"/images/BringShapeForward24.png",isEnabled:goog.bind(this.canMoveLayer_,this,"forward"),description:tr(msgs.BRING_SHAPE_FORWARD_)},"ImageMap/SendBackward":{actionPerformed:goog.bind(this.moveLayer_,this,"bringForward"),largeIconPath:"/images/SendShapeBackward24.png",isEnabled:goog.bind(this.canMoveLayer_,this,"backward"),description:tr(msgs.SEND_SHAPE_BACKWARD_)},"ImageMap/SendToBack":{actionPerformed:goog.bind(this.moveLayer_,this,"bringToFront"),largeIconPath:"/images/SendShapeToBack24.png",isEnabled:goog.bind(this.canMoveLayer_,this,"backward"),description:tr(msgs.SEND_SHAPE_TO_BACK_)}};this.addMoveActions_(t);for(var o in t)t.hasOwnProperty(o)&&this.actionsManager_.registerAction(o,new De(t[o]))};b.prototype.addMoveActions_=function(t){var o=5,i=1,n=20,r=document.querySelector(".imgmap-viewport"),s={MoveLeftNormal:["Left",-o,"left"],MoveLeftSmall:["Left",-i,"M3 left"],MoveLeftBig:["Left",-n,"M2 left"],MoveRightNormal:["Left",o,"right"],MoveRightSmall:["Left",i,"M3 right"],MoveRightBig:["Left",n,"M2 right"],MoveUpNormal:["Top",-o,"up"],MoveUpSmall:["Top",-i,"M3 up"],MoveUpBig:["Top",-n,"M2 up"],MoveDownNormal:["Top",o,"down"],MoveDownSmall:["Top",i,"M3 down"],MoveDownBig:["Top",n,"M2 down"]};for(var a in s)if(s.hasOwnProperty(a)){var l=s[a][1],c=s[a][0],d=s[a][2];t[a]={actionPerformed:goog.bind(this.move_,this,c,l,r),keyStrokeStr:d}}};b.prototype.getToolbar=function(){return this.toolbar_};b.prototype.insertCircle_=function(){var t=this.canvas_;this.cancelInsertPolygon_(),t.discardActiveObject(),sync.canvas.removePolygonHandles(t),this.changeInsertPosition_();var o=new sync.canvas.LabeledCircle(sync.util.extend({radius:30,top:this.insertTop_,left:this.insertLeft_,modelProps:{layer:t.getObjects().length},controls:{...window.fabric.Circle.prototype.controls,mtr:new window.fabric.Control({visible:!1})}},sync.canvas.getCircleOptions()));t.add(o),t.setActiveObject(o),this.addUndoAction_(new Nc(t,o))};b.prototype.insertRect_=function(){var t=this.canvas_;this.cancelInsertPolygon_(),t.discardActiveObject(),sync.canvas.removePolygonHandles(t),this.changeInsertPosition_();var o=sync.util.extend({width:50,height:50,top:this.insertTop_,left:this.insertLeft_,modelProps:{layer:t.getObjects().length}},sync.canvas.getRectOptions()),i=new sync.canvas.LabeledRect(o);t.add(i),t.setActiveObject(i),this.addUndoAction_(new Nc(t,i))};b.prototype.insertPolygon_=function(){var t=sync.canvas.polygonEditingMode;this.mode_===t.NORMAL?(this.clearSelection_(),this.setShapesSelectable_(!1),this.toggleButton_(this.insertPolygonActionId_,!0),this.setCrosshairCursor_(!0),sync.canvas.removePolygonHandles(this.canvas_),this.mode_=t.ADD):this.finishInsertPolygon_()};b.prototype.toggleButton_=function(t,o){var i=document.querySelector('[name="'+t+'"]');goog.dom.classlist.enable(i,"goog-toolbar-button-checked",o)};b.prototype.setShapesSelectable_=function(t){var o=this.canvas_.getObjects();for(var i of o)i.set("selectable",t)};b.prototype.zoom_=function(t){var o=this.canvas_,i=[this.zoomInActionId_,this.zoomOutActionId_];if(t==="zoomReset"){o.setZoom(1),o.setHeight(this.imgHeight_),o.setWidth(this.imgWidth_),this.toolbar_.refreshActionsStatus(i);return}var n={zoomIncrement:this.zoomIncr_,imageWidth:this.imgWidth_,imageHeight:this.imgHeight_,minZoom:this.minZoom_,maxZoom:this.maxZoom_};t==="zoomOut"&&(n.zoomIncrement=-this.zoomIncr_),sync.canvas.zoom(o,n),this.toolbar_.refreshActionsStatus(i)};b.prototype.canZoom_=function(t){if(this.canvas_){var o=this.getZoomFactor_();return t==="zoomIn"?o<this.maxZoom_:o>this.minZoom_}return!1};b.prototype.deleteShape_=function(){var t=this.canvas_,o=t.getActiveObject();o&&(o.polygonHandle&&(o=t.item(o.polygonParent)),this.addUndoAction_(new uy(t,o)),this.canvas_.discardActiveObject(),t.remove(o),sync.canvas.removePolygonHandles(t),this.editorDirty_=!0,this.updateLayerNumbers_())};b.prototype.changeInsertPosition_=function(){var t=3,o=this.defaultInsertPosition_,i=this.getZoomFactor_(),n=this.viewportEl_;this.insertTop_=o+Math.floor(n.scrollTop/i),this.insertLeft_=o+Math.floor(n.scrollLeft/i);var r=this.insertCounter_,s=10;r<s?(this.insertTop_+=r*t,this.insertLeft_+=r*t,this.insertCounter_++):this.insertCounter_=0};b.prototype.dumpModel=function(){return sync.canvas.toSVG(this.canvas_.getObjects())};b.prototype.render=function(t,o){this.imgUrl_=goog.dom.dataset.get(goog.dom.getAncestorByClass(o,"imagemap-wrapper"),"rawUrl"),goog.Promise.all([sync.util.image.getImageSizeSlow(this.imgUrl_),sync.canvas.loadFabric()]).then(goog.bind(function(i){this.fabric_=i[1];var n=i[0];this.imgWidth_=n.width,this.imgHeight_=n.height;var r="imgmap-"+sync.util.genUid();goog.dom.append(t,goog.dom.createDom("canvas",{id:r,width:this.imgWidth_,height:this.imgHeight_})),this.makeFabricSubclasses_(),this.initFabricCanvas_(r,o),this.toggleButton_(this.toggleLabelActionId_,sync.canvas.renderLabels)},this))};b.prototype.loadModel_=function(t,o){var i=Array.prototype.slice.call(t.querySelectorAll(".shape"));for(var n of i){var r=n.tagName.toLowerCase(),s;switch(r){case"circle":s=sync.canvas.circleFromElement(n,sync.canvas.getCircleOptions());break;case"rect":s=sync.canvas.rectFromElement(n,sync.canvas.getRectOptions());break;case"polygon":s=sync.canvas.polygonFromElement(n,sync.canvas.polygonOptions);break;default:return}s.modelProps=goog.dom.dataset.getAll(n),o.add(s)}};b.prototype.addCanvasListeners_=function(t){t.on("object:added",goog.bind(this.shapeAdded_,this)),t.on("object:moving",goog.bind(this.dragPolyHandle_,this)),t.on("selection:created",goog.bind(this.selectionUpdated_,this)),t.on("selection:updated",goog.bind(this.selectionUpdated_,this)),t.on("selection:cleared",goog.bind(this.selectionUpdated_,this)),t.on("object:modified",goog.bind(this.objectModified_,this)),sync.util.isMobile()||t.on("object:scaling",goog.bind(this.fixScaleAdvanced_,this)),t.on("mouse:over",goog.bind(this.highlightPolyHandle_,this,sync.canvas.commonOptions.stroke)),t.on("mouse:out",goog.bind(this.highlightPolyHandle_,this,sync.canvas.commonOptions.fill)),t.on("mouse:up",goog.bind(this.finishDraggingHandle_,this)),t.on("mouse:move",goog.bind(this.insertPolyPreviewPoint_,this)),t.on("mouse:down",goog.bind(this.insertPolyAddPoint_,this))};b.prototype.initFabricCanvas_=function(t,o){this.fabric_.Group.prototype.hasControls=!1;var i=new this.fabric_.Canvas(t);sync.util.isTouchscreen()&&(i.allowTouchScrolling=!0),i.selection=!1,i.perPixelTargetFind=!0,i.setBackgroundImage(this.imgUrl_,i.renderAll.bind(i),{originX:"left",originY:"top"}),this.loadModel_(o,i),this.addCanvasListeners_(i);var n=goog.events.EventType;this.eventHandler_.listen(document,n.KEYDOWN,goog.bind(this.insertPolyKeyDown_,this),!0).listen(sync.canvas.eventTarget,sync.canvas.ImgEditorEvent.EventType.STATE_CHANGED,goog.bind(function(s){this.updateObjectSnapshot_(s.obj)},this)).listen(document,n.KEYDOWN,goog.bind(this.handleCanvasShortcuts_,this));var r=document.querySelector(".imgmap-viewport");r&&sync.util.isMobile()&&this.eventHandler_.listen(r,n.TOUCHSTART,goog.bind(this.handleTouchStart_,this),!0).listen(r,n.TOUCHMOVE,goog.bind(this.handleTouchMove_,this),!0).listen(r,n.TOUCHEND,goog.bind(this.handleTouchEnd_,this),!0),this.viewportEl_=r,this.canvas_=i,this.toolbar_.refreshActionsStatus(["ImageMap/ZoomIn","ImageMap/ZoomOut"])};b.prototype.finishDraggingHandle_=function(t){if(this.mouseDownClosedPolygon_){this.mouseDownClosedPolygon_=!1;return}var o=t.target;if(o&&o.polygonHandle){var i=this.canvas_.item(o.polygonParent),n=this.objectSnapshot_;if(!n)this.updateObjectSnapshot_(i);else{var r=n.type===i.type&&n.points.length===i.points.length,s=n.modelProps.layer===i.modelProps.layer;(!r||!s)&&this.updateObjectSnapshot_(i)}var a=this.getObjectSnapshot_();this.updateObjectSnapshot_(i),this.polygonSnapshot_&&this.addUndoAction_(new Mp(this.canvas_,a,this.polygonSnapshot_))}else this.scalingDragCorner_=null,this.scalingDragCornerFunction_=null};b.prototype.shapeAdded_=function(t){var o=t.target;if(o.isType(sync.canvas.customCircleType)||o.isType(sync.canvas.customRectangleType)||o.isType(sync.canvas.customPolygonType)){var i=document.querySelector(".imgmap-viewport"),n=document.querySelector(".canvas-container");if(n){n.hasAttribute("tabindex")||n.setAttribute("tabindex",-1);var r=i.scrollTop,s=i.scrollLeft;n.focus(),i.scrollTop=r,i.scrollLeft=s}this.editorDirty_=!0}};b.prototype.addPolygonCloseCircle_=function(t,o){this.polygonCloseCircle=new this.fabric_.Circle({radius:o,fill:"rgba(255,255,0,0.8)",left:t.x-o,top:t.y-o,selectable:!1}),this.canvas_.add(this.polygonCloseCircle)};b.prototype.getZoomFactor_=function(){var t=2;return parseFloat(this.canvas_.getZoom().toFixed(t))};b.prototype.getPolygonCloseCircleRadius_=function(){var t=16;return t/this.getZoomFactor_()};b.prototype.addFirstPolygonPoint_=function(t){this.currentShape_=new this.fabric_.Polygon([{x:Math.round(t.x),y:Math.round(t.y)},{x:Math.round(t.x)+1,y:Math.round(t.y)+1}],sync.canvas.tempPolygonOptions),this.canvas_.add(this.currentShape_),this.addPolygonCloseCircle_(t,this.getPolygonCloseCircleRadius_())};b.prototype.insertPolyAddPoint_=function(t){var o=this.canvas_.getPointer(t.e),i=sync.canvas.polygonEditingMode;if(this.mode_===i.ADD)this.addFirstPolygonPoint_(o),this.mode_=i.EDIT;else if(this.mode_===i.EDIT&&this.currentShape_&&this.currentShape_.isType("polygon")){var n=new this.fabric_.Point(o.x,o.y),r=n.distanceFrom(this.polygonCloseCircle.getCenterPoint()),s=!0;r<this.getPolygonCloseCircleRadius_()&&(s=!1);var a=this.currentShape_.get("points");s&&a.push({x:Math.round(o.x),y:Math.round(o.y)}),this.canvas_.remove(this.currentShape_),this.currentShape_=new this.fabric_.Polygon(a,sync.canvas.tempPolygonOptions),this.canvas_.add(this.currentShape_),s||(this.mouseDownClosedPolygon_=!0,this.finishInsertPolygon_())}};b.prototype.insertPolyPreviewPoint_=function(t){var o=this.canvas_.getPointer(t.e);if(this.mode_===sync.canvas.polygonEditingMode.EDIT&&this.currentShape_){var i=this.currentShape_.get("points");i[i.length-1].x=Math.round(o.x),i[i.length-1].y=Math.round(o.y),this.canvas_.remove(this.currentShape_),this.currentShape_=new this.fabric_.Polygon(i,sync.canvas.tempPolygonOptions),this.canvas_.add(this.currentShape_)}};b.prototype.finishInsertPolygon_=function(){var t=this.canvas_;if(t.remove(this.polygonCloseCircle),this.setCrosshairCursor_(!1),this.toggleButton_(this.insertPolygonActionId_,!1),this.mode_=sync.canvas.polygonEditingMode.NORMAL,this.currentShape_){var o=this.currentShape_.get("points");t.remove(this.currentShape_);var i={modelProps:{layer:t.getObjects().length}};sync.util.extend(i,sync.canvas.polygonOptions),o=o.slice(0,-1);var n=3;o.length>=n&&(this.currentShape_=new sync.canvas.LabeledPolygon(o,i),t.add(this.currentShape_),t.setActiveObject(this.currentShape_),this.editorDirty_=!0,this.addUndoAction_(new Nc(this.canvas_,this.currentShape_))),this.currentShape_=null}this.setShapesSelectable_(!0)};b.prototype.insertPolyKeyDown_=function(t){t.keyCode===goog.events.KeyCodes.ENTER?this.isInsertingPolygonMode_()&&(t.preventDefault(),t.stopPropagation(),this.finishInsertPolygon_()):t.keyCode===goog.events.KeyCodes.ESC&&(this.isInsertingPolygonMode_()?(this.toggleButton_(this.insertPolygonActionId_,!1),t.preventDefault(),t.stopPropagation(),this.cancelInsertPolygon_()):this.objectOrGroupSelected_()&&(t.preventDefault(),t.stopPropagation(),sync.canvas.removePolygonHandles(this.canvas_),this.clearSelection_()),this.currentShape_=null)};b.prototype.isInsertingPolygonMode_=function(){var t=sync.canvas.polygonEditingMode;return this.mode_===t.EDIT||this.mode_===t.ADD};b.prototype.cancelInsertPolygon_=function(){this.isInsertingPolygonMode_()&&(this.mode_=sync.canvas.polygonEditingMode.NORMAL,this.canvas_.remove(this.currentShape_),this.canvas_.remove(this.polygonCloseCircle),this.setCrosshairCursor_(!1),sync.canvas.removePolygonHandles(this.canvas_),this.setShapesSelectable_(!0),this.toggleButton_(this.insertPolygonActionId_,!1))};b.prototype.objectModifiedInternal_=function(t){var o=t.target;o.isType(sync.canvas.customPolygonType)?this.polygonModified_(t):(o.isType(sync.canvas.customCircleType)||o.isType(sync.canvas.customRectangleType))&&this.simpleObjectModified_(t)};b.prototype.objectModified_=function(t){this.objectModifiedInternal_(t),this.editorDirty_=!0};b.prototype.fixScaleAdvanced_=function(t){var o=t.target,i=o.aCoords;if(!this.scalingDragCorner_){this.scalingDragCorner_=o.__corner;var n=i.br.x-i.tl.x-o.width,r=i.br.y-i.tl.y-o.height;switch(this.scalingDragCorner_){case"tl":case"ml":case"mt":var s={x:i.br.x,y:i.br.y};this.scalingDragCornerFunction_=function(c,d,g,m){return{x:s.x-g-n,y:s.y-m-r}};break;case"tr":var a={x:i.bl.x,y:i.bl.y};this.scalingDragCornerFunction_=function(c,d,g,m){return{x:a.x,y:a.y-m-r}};break;case"bl":var l={x:i.tr.x,y:i.tr.y};this.scalingDragCornerFunction_=function(c,d,g){return{x:l.x-g-n,y:l.y}};break}}sync.canvas.fixScale(t.target,this.scalingDragCornerFunction_)};b.prototype.simpleObjectModified_=function(t){var o=this.getObjectSnapshot_();this.fixScaleAdvanced_(t),this.updateObjectSnapshot_(t.target);var i=t.target;this.editorDirty_=!0;var n=this.canvas_.item(i.modelProps.layer);this.addUndoAction_(new Mp(this.canvas_,o,n))};b.prototype.polygonModified_=function(t){var o=t.target,i=this.objectSnapshot_;if(!i)this.updateObjectSnapshot_(o);else{var n=i.type===o.type&&i.points.length===o.points.length,r=i.modelProps.layer===o.modelProps.layer;(!n||!r)&&this.updateObjectSnapshot_(o)}var s=this.canvas_,a=this.getObjectSnapshot_();sync.canvas.removePolygonHandles(s),sync.canvas.addPolygonHandles(s,o),sync.canvas.recreatePolygon(s,sync.canvas.cloneState(o),sync.canvas.polygonOptions);var l=s.item(o.modelProps.layer);this.updateObjectSnapshot_(o),this.addUndoAction_(new Mp(s,a,l))};b.prototype.dragPolyHandle_=function(t){var o=t.target;if(goog.isDefAndNotNull(o.polygonParent)){var i=this.canvas_.getObjects()[o.polygonParent];if(i){this.objectSnapshot_||this.updateObjectSnapshot_(i);var n=o.getCenterPoint();(i.points[o.name].x!==n.x||i.points[o.name].y!==n.y)&&(i.points[o.name].x=n.x,i.points[o.name].y=n.y,sync.canvas.recreatePolygon(this.canvas_,i,sync.canvas.polygonOptions),this.polygonSnapshot_=sync.canvas.cloneState(i))}}else o.isType(sync.canvas.customPolygonType)?sync.canvas.removePolygonHandles(this.canvas_):t.target.set({left:Math.round(t.target.left),top:Math.round(t.target.top)})};b.prototype.handleCanvasShortcuts_=function(t){var o=new J;o.fromKeyEvent(t);var i=this.actionsManager_.getActionByShortcut(o);i&&i.isEnabled()&&(t.preventDefault(),i.actionPerformed())};b.prototype.makeFabricSubclasses_=function(){sync.canvas.LabeledCircle=sync.canvas.makeExtensionClass_(this.fabric_,"Circle"),sync.canvas.LabeledRect=sync.canvas.makeExtensionClass_(this.fabric_,"Rect"),sync.canvas.LabeledPolygon=sync.canvas.makeExtensionClass_(this.fabric_,"Polygon")};b.prototype.initCanvasConfig_=function(){this.defaultInsertPosition_=50,this.insertTop_=this.insertLeft_=50,this.insertCounter_=1,this.zoomIncr_=.1};b.prototype.selectionUpdated_=function(t){if(t.deselected){for(var o of t.deselected){let i=t.selected&&t.selected[0];(!i||o.isType(sync.canvas.customPolygonType)&&!i.polygonHandle)&&sync.canvas.removePolygonHandles(this.canvas_)}this.toolbar_.refreshActionsStatus()}t.selected&&t.selected.forEach(this.objectSelected_,this)};b.prototype.objectSelected_=function(t){if(t.polygonHandle||sync.canvas.removePolygonHandles(this.canvas_),this.toolbar_.refreshActionsStatus(),t.isType(sync.canvas.customPolygonType)){t.syncPointsCenterOffsets||this.syncPolygonPointsToCenter_(t),sync.canvas.addPolygonHandles(this.canvas_,t),this.objectSnapshot_||this.updateObjectSnapshot_(t);var o=this.isSamePolygon_(this.objectSnapshot_,t),i=this.isOnSameLayer_(this.objectSnapshot_,t);(!this.finishedDraggingHandle_||!o||!i)&&this.updateObjectSnapshot_(t)}else t.polygonHandle||this.updateObjectSnapshot_(t)};b.prototype.syncPolygonPointsToCenter_=function(t){var o=t.getCenterPoint();t.syncCenterPoint=o,!!t.get("points")&&(t.syncPointsCenterOffsets=t.get("points").map(function(i){return{x:i.x-o.x,y:i.y-o.y}}))};b.prototype.isSamePolygon_=function(t,o){return t.type===o.type&&t.points.length===o.points.length};b.prototype.isOnSameLayer_=function(t,o){var i=!0;return goog.isDef(o.modelProps)&&(i=t.modelProps.layer===o.modelProps.layer),i};b.prototype.isDirty=function(){return this.editorDirty_};b.prototype.updateLayerNumbers_=function(){for(var t=this.canvas_.getObjects(),o=0;o<t.length;o++){var i=t[o];i.modelProps||(i.modelProps={}),i.modelProps.layer=o,i.dirty=!0}this.canvas_.renderAll()};b.prototype.moveLayer_=function(t){var o=this.canvas_,i=o.getActiveObject();if(sync.canvas.removePolygonHandles(o),i){var n=this.getObjectSnapshot_();o[t](i),this.updateLayerNumbers_(),this.toolbar_.refreshActionsStatus(),this.updateObjectSnapshot_(i),this.addUndoAction_(new hy(o,n,i)),i.isType(sync.canvas.customPolygonType)&&sync.canvas.addPolygonHandles(this.canvas_,i)}};b.prototype.move_=function(t,o,i){var n=this.canvas_.getActiveObject(),r=20,s=o<0?-r:r;n?(n.polygonHandle&&(n=this.canvas_.item(n.polygonParent),this.canvas_.setActiveObject(n)),n.set(t.toLowerCase(),n.get(t.toLowerCase())+o),n.setCoords(),n.isType(sync.canvas.customPolygonType)?sync.canvas.recreatePolygon(this.canvas_,n,sync.canvas.polygonOptions):this.canvas_.renderAll(),this.objectModified_({target:n})):i["scroll"+t]+=s};b.prototype.getShapesFilteringPolyHandles_=function(){var t=[],o=this.canvas_.getObjects();for(var i of o)i.polygonHandle||t.push(i);return t};b.prototype.canMoveLayer_=function(t){var o=!1,i=this.canvas_;if(i){var n=i.getActiveObject();if(n){var r=this.getShapesFilteringPolyHandles_(),s=r.indexOf(n);t==="forward"?o=s>0:o=s!==r.length-1}}return o};b.prototype.clearSelection_=function(){this.canvas_&&this.canvas_.discardActiveObject().renderAll()};b.prototype.highlightPolyHandle_=function(t,o){var i=o.target;i&&goog.isDefAndNotNull(i.polygonParent)&&(i.set("fill",t),this.canvas_.renderAll())};b.prototype.duplicateShapeInternal_=function(t){sync.canvas.removePolygonHandles(this.canvas_);var o=null,i=sync.canvas.commonOptions,n=i.strokeWidth+1;if(t.isType(sync.canvas.customPolygonType)){var r=[],s,a,l=t.points;for(var c of l)s=c.x+n,a=c.y+n,r.push({x:s,y:a});o=new sync.canvas.LabeledPolygon(r,sync.canvas.polygonOptions),this.canvas_.add(o),this.updateLayerNumbers_()}else{var d=t.get("type");d=d.charAt(0).toUpperCase()+d.slice(1);var g=t.toJSON();g.top+=n,g.left+=n,g.modelProps={layer:this.canvas_.getObjects().length};var m=d.indexOf("Circle")!==-1?sync.canvas.getCircleOptions():sync.canvas.getRectOptions();sync.util.extend(g,m),o=new sync.canvas[d](g),this.canvas_.add(o)}return this.canvas_.setActiveObject(o),o};b.prototype.duplicateShape_=function(){sync.canvas.removePolygonHandles(this.canvas_);var t=this.canvas_,o=t.getActiveObject();o&&this.addUndoAction_(new Nc(t,this.duplicateShapeInternal_(o)))};b.prototype.handleTouchStart_=function(t){(goog.userAgent.IPAD||goog.userAgent.IPHONE)&&t.preventDefault();var o=this.viewportEl_,i=200;setTimeout(goog.bind(function(n){this.canvas_.getActiveObject()||(this.mouseDownCoords_={x:n.clientX,y:n.clientY},this.originalScroll_={x:o.scrollLeft,y:o.scrollTop})},this,t),i)};b.prototype.handleTouchMove_=function(t){(goog.userAgent.IPAD||goog.userAgent.IPHONE)&&t.preventDefault();var o=this.viewportEl_,i=this.mouseDownCoords_;i&&!this.objectOrGroupSelected_()&&(o.scrollLeft=this.originalScroll_.x+(i.x-t.clientX),o.scrollTop=this.originalScroll_.y+(i.y-t.clientY))};b.prototype.handleTouchEnd_=function(){this.mouseDownCoords_&&(this.mouseDownCoords_=null,this.originalScroll_=null)};b.prototype.updateObjectSnapshot_=function(t){t&&t.type!=="group"&&(this.objectSnapshot_=sync.canvas.cloneState(t))};b.prototype.getObjectSnapshot_=function(){return sync.canvas.cloneState(this.objectSnapshot_)};b.prototype.objectOrGroupSelected_=function(){return this.canvas_.getActiveObject()};b.prototype.dispatchUndoEvent_=function(t,o){if(this.isInsertingPolygonMode_()){this.cancelInsertPolygon_();return}goog.events.dispatchEvent(sync.canvas.eventTarget,new sync.canvas.ImgEditorEvent(t,o))};b.prototype.addUndoAction_=function(t){goog.events.dispatchEvent(sync.canvas.eventTarget,new sync.canvas.ImgEditorEvent(sync.canvas.ImgEditorEvent.EventType.NEW_UNDO,t))};b.prototype.stackNotEmpty_=function(t){return this.undoManager_&&this.undoManager_.stackNotEmpty(t)};b.prototype.setCrosshairCursor_=function(t){var o=this.canvas_;t?(o.defaultCursor="crosshair",o.hoverCursor="crosshair"):(o.defaultCursor="default",o.hoverCursor="move")};var fy=b;sync.image.ImageMapEditor=b;namespace("sync.actions");var co=function(t,o,i,n){ee.call(this,t),this.actionsManager_=o,this.opName_=n,this.readOnly_=i,this.dialog_=null,this.svgWrapper_=null,this.svgOrImg_=null,this.imgMapEditor_=null,this.callsCallback=!0};goog.inherits(co,ee);co.prototype.isEnabled=function(){var t=sync.select.getSelection();return this.getFormControl_(t)!==null&&!sync.select.evalSelectionFunction(sync.util.isInReadOnlyContent)&&!this.readOnly_.isReadOnly()};co.prototype.createDialog_=function(){var t=workspace.createDialog();t.setTitle(tr(msgs.IMAGE_MAP_EDITOR_)),t.setResizable(!0),this.dialog_=t};co.prototype.setEditorDialogSize_=function(){var t=getComputedStyle(this.svgWrapper_),o=640,i=480;this.dialog_.setContentPreferredSize(this.getEditorSizeWithPadding_(t,o),this.getEditorSizeWithPadding_(t,i))};co.prototype.getEditorSizeWithPadding_=function(t,o){var i=50,n=parseInt(t.getPropertyValue("width"),10)+i;return n<o?o:n};co.prototype.renderImageMapEditor_=function(){var t=goog.dom.createDom,o=t("div","imgmap-toolbar layout-header"),i=t("div","layout-body center-container imgmap-viewport"),n=t("div","imgmap-editor-container",o,t("div","layout-body-container",i)),r=this.dialog_.getElement();goog.dom.appendChild(r,n),goog.style.setStyle(r,"position","relative");var s=new fy,a=s.getToolbar();a.render(a.config.toolbars,o),this.setEditorDialogSize_(),s.render(i,this.svgOrImg_),this.imgMapEditor_=s};co.prototype.showEditorDialog_=function(t){this.renderImageMapEditor_(),this.dialog_.onSelect(goog.bind(this.imgMapEditorDialogSubmit_,this,t)),this.dialog_.show()};co.prototype.isImageContext_=function(){var t=sync.select.getSelection(),o=this.getFormControl_(t);return this.svgWrapper_=o.childNodes[0],this.svgOrImg_=this.svgWrapper_.childNodes[0],goog.dom.isNodeLike(this.svgOrImg_)&&this.svgOrImg_.nodeType===goog.dom.NodeType.ELEMENT};co.prototype.actionPerformed=function(t){t=t||goog.nullFunction,this.createDialog_();var o=goog.bind(function(){this.imgMapEditor_&&this.imgMapEditor_.dispose(),this.imgMapEditor_=null,this.dialog_.dispose(),t()},this);if(this.isImageContext_())try{this.showEditorDialog_(o)}catch{this.showErrorDialog_(o,msgs.ERROR_)}else this.showErrorDialog_(o,tr(msgs.CANNOT_EDIT_IMAGE_MAP_))};co.prototype.showErrorDialog_=function(t,o){var i=this.dialog_;goog.dom.appendChild(i.getElement(),goog.dom.createDom("div","",o)),i.setButtonConfiguration(sync.api.Dialog.ButtonConfiguration.OK),i.show(),i.onSelect(t)};co.prototype.showImgMapSpinner_=function(){var t=document.querySelector(".imgmap-viewport"),o=new rt(t,1,"imgmap-spinner");return o.show(),o};co.prototype.imgMapEditorDialogSubmit_=function(t,o,i){var n=this.imgMapEditor_;if(o==="ok"){n.clearSelection_();var r=this.showImgMapSpinner_(),s=n.dumpModel();i.preventDefault(),this.actionsManager_.invokeOperation(this.opName_,{shapes:s}).thenAlways(function(){r.hide(),t()})}else n.isDirty()?(i.preventDefault(),workspace.confirm(tr(msgs.CANCEL_),tr(msgs.ARE_YOU_SURE_CONTINUE_)).then(function(a){a&&t()})):t()};co.prototype.getFormControl_=function(t){var o=t.getNodeAtSelection(),i=h.getInstance().getXmlNodeById(o.id);return this.getImageMapFormControlChild_(i)};co.prototype.getImageMapFormControlChild_=function(t){for(var o=null,i=0;i<t.childNodes.length;i++){var n=t.childNodes[i];if(sync.model.XmlDom.isXmlNode(n))break;if(goog.dom.isElement(n)&&goog.dom.dataset.get(n,"role")==="CONTENT"){var r=n.childNodes[0];goog.dom.dataset.get(r,"type")==="ro.sync.ecss.webapp.formcontrols.WebappImageMapRenderer"&&(o=r);break}}return o};var yy=co;sync.actions.InsertImageMap=co;namespace("sync.xmlutil");sync.xmlutil.escapeAttributeValue=function(t){return(""+t).replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};sync.xmlutil.escapeElementTextContent=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;")};var cQ=sync.xmlutil;namespace("sync.actions");var Mc=function(t,o){this.actionsManager_=t,this.editor_=o,_.call(this,{displayName:tr(msgs.INSERT_VARIABLE_DEFINITION_),description:tr(msgs.DEFINE_VARIABLE_TOOLTIP_),largeIconPath:"/images/KeyWithKeyword24.png",smallIconPath:"/images/KeyWithKeyword16.png"})};goog.inherits(Mc,_);Mc.prototype.actionPerformed=function(t){t=t||goog.nullFunction;var o=goog.dom.createDom,i=workspace.createDialog();i.setPreferredSize(530,250),i.setResizable(!0),i.setButtonConfiguration([{key:"ok",caption:tr(msgs.OK_)},{key:"cancel",caption:tr(msgs.CANCEL_)}]),i.setTitle(tr(msgs.DEFINE_VARIABLE_));var n=function(a,l){return o("div","",o("label",{className:"key-input-label",for:l.id},a+": "),l)},r=o("input",{className:"key-input",id:"key_input_id",style:"display: block; width: 100%;"}),s=o("input",{className:"key-input",id:"keyword_input_id",style:"display: block; width: 100%;"});goog.dom.append(i.getElement(),n(tr(msgs.NAME_),r),n(tr(msgs.VALUE_),s)),i.show(),i.onSelect(goog.bind(function(a){if(a==="ok"){var l=sync.xmlutil.escapeAttributeValue(r.value),c=sync.xmlutil.escapeElementTextContent(s.value);this.actionsManager_.invokeOperation("ro.sync.ecss.extensions.commons.operations.InsertFragmentOperation",{fragment:this.getKeyWithKeywordFragment_(l,c)},t)}else t&&t()},this))};Mc.prototype.getKeyWithKeywordFragment_=function(t,o){return"<keydef keys='"+t+`'>
  <topicmeta>
    <keywords>
      <keyword>`+o+`</keyword>
    </keywords>
  </topicmeta>
</keydef> `};Mc.prototype.isEnabled=function(){var t=!0,o=this.editor_.getReadOnlyState();return(o.readOnly||sync.select.evalSelectionFunction(sync.util.isInReadOnlyContent))&&(t=!1),t};sync.actions.InsertVariable=Mc;goog.require("goog.dom");namespace("sync.actions.review");var za=function(t){jo.call(this,null),this.editor_=t};goog.inherits(za,jo);za.prototype.actionPerformed=function(t){if(!this.pending_){this.pending_=!0;var o=this.editor_.isDirty(),i=this.editor_.getActionsManager(),n=document.querySelector('div[data-root="true"]'),r=new rt(n,1,"dmbm-spn");r.show(),i.invokeOperation(this.getOperationClassName(),{},t).thenAlways(function(){this.pending_=!1,r.hide(),this.editor_.setDirty(o)}.bind(this))}};za.prototype.isEnabled=function(){return!this.editor_.getEditingSupport().getConcurrentEditingManager().isInRoom()};za.prototype.getOperationClassName=function(){};var Jn=za;sync.actions.review.ViewModeActionBase=za;namespace("sync.actions.review");var Ya=function(t){Jn.call(this,t)};goog.inherits(Ya,Jn);Ya.prototype.getOperationClassName=function(){return"ro.sync.ecss.extensions.dita.map.topicref.TopicReferencesViewModeOperation"};Ya.prototype.isSelected=function(){var t=sync.model.XmlDom.getRootElement(this.editor_.getEditingSupport().editorViewport),o=sync.model.XmlDom.hasPseudoClassClientSide(t,"-oxy-topic-content-mode"),i=sync.model.XmlDom.hasPseudoClassClientSide(t,"-oxy-show-topic-titles");return!o&&!i};Ya.prototype.getDisplayName=function(){return tr(msgs.BASIC_MODE_NAME_)};Ya.prototype.getDescription=function(){return tr(msgs.BASIC_MODE_DESCR_)};sync.actions.review.DitaMapBasicModeAction=Ya;namespace("sync.actions.review");var Qa=function(t){Jn.call(this,t)};goog.inherits(Qa,Jn);Qa.prototype.getOperationClassName=function(){return"ro.sync.ecss.extensions.dita.map.topicref.TopicTitlesViewModeOperation"};Qa.prototype.isSelected=function(){var t=sync.model.XmlDom.getRootElement(this.editor_.getEditingSupport().editorViewport);return sync.model.XmlDom.hasPseudoClassClientSide(t,"-oxy-show-topic-titles")};Qa.prototype.getDisplayName=function(){return tr(msgs.TOPIC_TITLES_MODE_NAME_)};Qa.prototype.getDescription=function(){return tr(msgs.TOPIC_TITLES_MODE_DESCR_)};sync.actions.review.DitaMapTopicTitlesModeAction=Qa;namespace("sync.actions.review");var Ja=function(t){Jn.call(this,t)};goog.inherits(Ja,Jn);Ja.prototype.getOperationClassName=function(){return"ro.sync.ecss.extensions.dita.map.topicref.TopicContentViewModeOperation"};Ja.prototype.isSelected=function(){var t=sync.model.XmlDom.getRootElement(this.editor_.getEditingSupport().editorViewport);return sync.model.XmlDom.hasPseudoClassClientSide(t,"-oxy-topic-content-mode")};Ja.prototype.getDisplayName=function(){return tr(msgs.TOPIC_CONTENT_MODE_NAME_)};Ja.prototype.getDescription=function(){return tr(msgs.TOPIC_CONTENT_MODE_DESCR_)};sync.actions.review.DitaMapTopicContentModeAction=Ja;var _y=/comment\(([^)]+)\)/,vy=/(....)(..)(..T..)(..)(.....)(..)/,Op=class{constructor(o){this.markersModel_=o}handleAnchor(o){var i=!1;if(this.isReviewAnchor(o)){var n=this.getMarkerFromAnchor_(o);this.selectMarker_(n),i=!0}return i}selectMarker_(o){this.markersModel_.getSelectionModel().selectMarker(o,!0,!0)}isReviewAnchor(o){return o.match(_y)!=null}getMarkerFromAnchor_(o){var i=this.getMarkerPropertiesFromAnchor_(o);return this.markersModel_.getFirstMarker(i)}getMarkerPropertiesFromAnchor_(o){var i=_y.exec(o),n={};return i&&i.length===2&&i[1].split(",").forEach(r=>{var s=r.split("="),a=s[0].trim(),l=s[1].trim();a==="timestamp"&&(l=this.getMarkerTimestamp_(l)),n[a]=l}),n}getMarkerTimestamp_(o){var i=o;if(o.match(vy)!=null){var n=o.replace(vy,"$1-$2-$3:$4:$5:$6");i=Date.parse(n).toString()}return i}};namespace("sync.actions");var $a=class extends sync.actions.AbstractAction{constructor(o,i){super();this.actionsManager_=o,this.selectTarget_=i}getDisplayName(){var o;switch(this.selectTarget_){case"element":o=tr(msgs.ELEMENT_);break;case"content":o=tr(msgs.CONTENT_);break;case"parent":o=tr(msgs.PARENT_);break}return o}actionPerformed(o){this.actionsManager_.invokeOperation("ro.sync.servlet.operation.SelectOperation",{target:this.selectTarget_}).thenAlways(o)}};namespace("sync.select");var $n=function(t){goog.events.EventTarget.call(this),this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_),this.docViewport_=t};goog.inherits($n,goog.events.EventTarget);$n.EventType={START_PROGRESS:"start_p",END_PROGRESS:"END_p"};$n.prototype.install=function(){this.eventHandler_.listen(this.docViewport_,goog.events.EventType.MOUSEDOWN,goog.bind(this.onMousePressed,this),!1)};$n.prototype.onMousePressed=function(){this.dispatchEvent(new goog.events.Event($n.EventType.START_PROGRESS)),Promise.race([sync.events.listenOnce(document,goog.events.EventType.MOUSEUP,!1,this.eventHandler_),sync.events.listenOnce(document,goog.events.EventType.DRAGEND,!1,this.eventHandler_),sync.events.listenOnce(document,goog.events.EventType.BLUR,!1,this.eventHandler_)]).then(()=>this.onMouseReleased())};$n.prototype.onMouseReleased=function(){this.dispatchEvent(new goog.events.Event($n.EventType.END_PROGRESS))};var Pp=$n;sync.select.SelectionInProgressDetector=$n;namespace("sync.support");var O=function(t,o,i,n,r,s,a,l){sync.api.AuthorEditingSupport.call(this,n),this.a11y=r,this.workspaceState_=s,this.serverResourcesDisposable_=new goog.Disposable,this.registerDisposable(this.serverResourcesDisposable_),this.domUpdateSilencer=new em;var c=new Pp(i);c.install(),this.registerDisposable(c),c.listen(Pp.EventType.START_PROGRESS,()=>this.domUpdateSilencer.setUpdatesSilenced(!0)),c.listen(Pp.EventType.END_PROGRESS,()=>this.domUpdateSilencer.setUpdatesSilenced(!1)),this.scheduler=new Qe(this.workspaceState_,this.domUpdateSilencer),this.registerDisposable(this.scheduler),this.actionsExecutor=new ip(this.scheduler);var d=new cy(i);d.init(),this.registerDisposable(d),this.elementNameEnhancer=n&&n.elementNameEnhancer,this.layoutManager=t,this.actionsManager=o,this.viewportScroller=null,this.enhancers=new nf(this),this.registerDisposable(this.enhancers),this.enhancers.registerBuiltinEnhancers(),this.userName=n.userName,this.disposeId=a,this.widgets=l,this.documentTypeId="",this.restrictedAttributes_={},this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_),this.selectionManager=null,this.selectionHandler=null,this.foldingManager=null,this.opsInvoker_=null,this.sentinelsFilter_=null,this.contextMenu=null,this.markersModel=null,this.persistentHighlightsManager_=null,this.problemReporter=null,this.floatingToolbarManager_=null,this.editModeModel=new ft("review"),this.registerDisposable(this.editModeModel),this.fakeSelectionRenderer=null,this.markerAnchorHandler_=null};goog.inherits(O,sync.api.AuthorEditingSupport);O.prototype.getActionsManager=function(){return this.actionsManager};O.MAX_CONCURRENT_IMAGES=3;O.prototype.load=function(t,o,i){this.editorViewport=o,this.problemReporter=i,this.documentTypeId=t.documentTypeId,this.docId=this.getDocumentId_(t),this.xmlModel=h.getInstance(),this.layoutChangeTracker=new nm,this.registerDisposable(this.layoutChangeTracker),this.viewportScroller=new dm(o),this.registerDisposable(this.viewportScroller),this.controller=new M(o,this.docId,this.xmlModel,this.layoutChangeTracker,this.a11y,t.isTrackChangesEnabled),this.registerDisposable(this.controller);var n=this.controller;return this.stylesManager_=new br(this.controller,this.documentTypeId,t.activeCssGroups),this.registerDisposable(this.stylesManager_),goog.Promise.all([this.loadFrameworkExtension(t.documentTypeId),this.loadCSS(),sync.view.NodeRenderer.loadFromFramework(t.documentTypeId,this)]).then(goog.bind(function(r){if(this.isDisposed())return goog.Promise.resolve();var s=r[0];this.registerFrameworkEnhancers_(s),this.registerDocumentFilters(n,o),this.problemReporter.startListeningForMessages(n),this.webappMessagesHandler=new Kf(this.controller,this),this.registerDisposable(this.webappMessagesHandler),this.webappMessagesHandler.startListeningForMessages();var a=n.parseHTML([t.document])[0];goog.dom.removeChildren(o),goog.dom.appendChild(o,a),n.enterDocument([a]),this.layoutChangeTracker.attach(this.layoutManager,this.stylesManager_,k.getInstance(),this.editorViewport);var l=o.querySelector(".oxy-document"),c=this.getReadOnlyStatus();this.fakeSelectionRenderer=new xd(l,this.xmlModel,this.layoutChangeTracker),this.selectionHandler=new It(l,this.viewportScroller,this.xmlModel,this.fakeSelectionRenderer),this.selectionManager=new Wm(this.selectionHandler,this.foldingManager),this.foldingManager.setSelectionManager(this.selectionManager),this.xmlController=new rf(this.controller,this.selectionManager),this.floatingToolbarManager_=new df({xmlController:this.xmlController,documentContainer:o,actionsManager:this.actionsManager,scheduler:this.scheduler,selectionManager:this.selectionManager,layoutChangeTracker:this.layoutChangeTracker,scrollEventTarget:this.viewportScroller}),this.registerDisposable(this.floatingToolbarManager_),this.registerDisposable(this.xmlController),this.registerDisposable(this.selectionManager),this.registerDisposable(this.selectionHandler),this.registerDisposable(this.domUpdateSilencer),this.safeShortcuts=new lp,this.contextMenu=new wf(this.actionsManager,this.actionsExecutor,this.safeShortcuts,this.selectionManager,this.viewportScroller),this.registerDisposable(this.contextMenu),this.selectionHandler.attach(n),this.opsInvoker_=new wp(this.controller,this.getSelectionManager()),this.registerDisposable(this.opsInvoker_),this.actionsManager.setOperationsInvoker(this.opsInvoker_),this.initBeforeCreatingActions(t,l),this.initializeViewport_(l,this.controller,c),this.attachA11yFilter_(),n.setHighlightsManager(this.getHighlightsManager());var d=new ry(l,this.selectionHandler,this.xmlModel);return d.attach(),this.registerDisposable(d),this.markersModel=new Bm(this.userName,l,n),n.setMarkersModel(this.markersModel),this.markerAnchorHandler_=new Op(this.markersModel),this.createActions(n,this.scheduler,l),this.linkHandler_.startListeningForClicks(l,this),this.markersModel.init(this.userName,t.authorNumber,t.highlights),this.registerDisposable(new ff(this,n,this.problemReporter)),this.restrictedAttributes_=r[2],this.initAfterLoad(s,t,l),this.extension=s,this},this))};O.prototype.initializeViewport_=function(t,o,i){var n,r=goog.userAgent.ANDROID&&!goog.userAgent.GECKO;if(r)n=new Df(t,o,this.scheduler,this.problemReporter,this.actionsManager,this.selectionManager,this.domUpdateSilencer);else{var s=this.options["tags-mode"];n=new Pf({docWrapper:t,controller:o,scheduler:this.scheduler,actionsManager:this.actionsManager,layoutManager:this.layoutManager,safeShortcuts:this.safeShortcuts,readOnlyStatus:i,viewportScroller:this.viewportScroller,selectionManager:this.getSelectionManager(),selectionHandler:this.selectionHandler,tagsModeOverride:s,concurrentEditingManager:this.concurrentEditingManager,domUpdateSilencer:this.domUpdateSilencer,notificationsManager:workspace.getNotificationManager(),workspaceState:this.workspaceState_})}this.registerDisposable(n),this.viewport=n};O.prototype.enableKeyboardShortcuts=function(){this.viewport.enableKeyboardShortcuts();var t=sync.model.XmlDom.getDocumentNode(this.editorViewport);t.tabIndex=-1,goog.dom.classlist.add(t,"no-focus-visible")};O.prototype.registerDocumentFilters=function(t,o){this.foldingManager=new sf(o,this.stylesManager_,this.elementNameEnhancer,this.xmlModel,this.options),this.registerDisposable(this.foldingManager);var i=this.options["tags-mode"];this.sentinelsFilter_=new Vf(o,this.xmlModel,this.elementNameEnhancer,i,this.a11y),this.linkHandler_=new rp(this.editorViewport),this.registerDisposable(this.linkHandler_),this.registerDisposable(this.sentinelsFilter_);var n=this.xmlModel.createFilter();this.registerDisposable(n),t.registerDocumentFilter(n),t.registerDocumentFilter(this.sentinelsFilter_),t.registerDocumentFilter(this.enhancers),t.registerDocumentFilter(new Wf(this.getUrl(),this.linkHandler_)),t.registerDocumentFilter(new Hf),t.registerDocumentFilter(this.foldingManager),t.registerDocumentFilter(t.getChangeTrackingViewModesHandler()),this.createAndRegisterImageLoaderUpdateFilter(t)};O.prototype.initBeforeCreatingActions=function(t,o){this.installCopyPasteManager_(o,this.scheduler),this.installSelectionAdjuster_(o)};O.prototype.installSelectionAdjuster_=function(t){this.selectionAdjuster=new Lf(this.controller,t,this.viewportScroller,this.selectionManager,this.editModeModel,this.layoutChangeTracker,this.fakeSelectionRenderer,this.foldingManager),this.registerDisposable(this.selectionAdjuster),this.selectionAdjuster.attach(this.selectionHandler)};O.prototype.installCopyPasteManager_=function(t,o){var i=new ka(this.getUrl(),this.getController(),o,this.getReadOnlyStatus(),this.getSelectionManager());this.serverResourcesDisposable_.registerDisposable(i),i.install(t),i.blockCutAndPaste(!0)};O.prototype.getScrollEventTarget=function(){return this.viewportScroller};O.prototype.registerFrameworkEnhancers_=function(t){var o=t.getEnhancers();for(var i in o)o.hasOwnProperty(i)&&this.enhancers.registerEnhancer(i,o[i])};O.prototype.getDocumentId_=function(t){if(t.contentType==="text/broken-xml"||t.contentType&&!goog.string.startsWith(t.contentType,"text/xml"))throw new sync.RESTException(500,'{"type": "error"}',null);if(!t.id)throw t.document&&(t.document="<not-sent>"),new Error("No doc ID: "+JSON.stringify(t));return t.id};O.prototype.createAndRegisterImageLoaderUpdateFilter=function(t){t.registerDocumentFilter(new hf(this.layoutChangeTracker))};O.prototype.initAfterLoad=function(t,o,i){this.scrollToAnchor(this.getUrl()),this.getReadOnlyStatus().setReadOnlyState({readOnly:!0}),this.enableMarkerTooltip()};O.prototype.scrollToAnchor=function(t){var o=new E(t),i=o.getFragment();if(i&&!this.serverResourcesDisposable_.isDisposed()){var n=this.markerAnchorHandler_.handleAnchor(i);return n||this.scrollToNodeFromAnchor_(i),!0}return!1};O.prototype.scrollToNodeFromAnchor_=function(t){sync.rest.callAsync("RESTDocumentControllers.documentController.getNodeIdByAnchor",{anchor:encodeURIComponent(t),id:this.docId}).then(goog.bind(function(o){o.documentUpdate&&this.controller.applyUpdate_(o.documentUpdate);var i=o.nodeId;if(!!i){var n=this.xmlModel.getXmlNodeById(i),r=new sync.position.RelativeContentPosition(i,f.BEFORE,0),s=new sync.select.Selection(r.toHTMLPosition());o.documentUpdate||this.getSelectionManager().setSelection(s),this.viewportScroller.scrollIntoView([n])}},this)).thenCatch(sync.util.error.logError)};O.prototype.createActions=function(t,o,i){var n=this.actionsManager;this.opsInvoker_.enableOperations();var r=this.getReadOnlyStatus(),s=this.getSelectionManager(),a=this.controller.getChangeTrackingViewModesHandler(),l={"Author/ViewOriginal":new fr(a,Pe.ORIGINAL),"Author/ViewFinal":new fr(a,Pe.FINAL),"Author/ViewAll":new fr(a,Pe.ALL_CHANGES),"Author/FullTags":new zn(be.FULL_TAGS),"Author/BlockTags":new zn(be.BLOCK_TAGS),"Author/FullWithAttrsTags":new zn(be.FULL_TAGS_WITH_ATTRIBUTES),"Author/NoTags":new zn(be.NO_TAGS),"Author/InlineTags":new zn(be.INLINE_TAGS),"Author/PartialTags":new zn(be.PARTIAL_TAGS),"Author/CutSpecial":new Xf(t,r,s),"Author/CopySpecial":new qf(t,s),"Author/PasteSpecial":new Gf(this.getUrl(),t,r,s)};this.documentTypeId&&(l["Author/Styles"]=new Zf(this.stylesManager_)),this.registerActions(l);var c=new ny(this);this.getActionsManager().registerAction("Author/FindReplace",c),this.foldingManager.registerActions(n),this.getActionsManager().registerAction("Select/Element",new $a(n,"element")),this.getActionsManager().registerAction("Select/Content",new $a(n,"content")),this.getActionsManager().registerAction("Select/Parent",new $a(n,"parent"))};O.prototype.registerActions=function(t){for(var o in t)t.hasOwnProperty(o)&&this.actionsManager.registerAction(o,t[o])};O.prototype.enableContextMenu=function(t){this.contextMenu.addEntries(this.getContextMenuBuiltinEntries()),this.contextMenu.install(this.editModeModel,this.editorViewport,t)};O.prototype.getContextMenuBuiltinEntries=function(){return[{type:"action",id:"Author/CopySpecial"},{type:"sep"},{type:"action",id:"Author/FindReplace"},{type:"sep"},{type:"list",name:tr(msgs.FOLDING_),children:[{type:"action",id:"Author/ToggleFold"},{type:"sep"},{type:"action",id:"Author/FoldOthers"},{type:"action",id:"Author/FoldChildren"},{type:"action",id:"Author/FoldAll"},{type:"sep"},{type:"action",id:"Author/ExpandChildren"},{type:"action",id:"Author/ExpandAll"}]}]};O.prototype.loadFrameworkExtension=function(t){if(sync.ext.Registry.extension=new sync.ext.Extension,t){var o=sync.util.dotEncodeURIComponent(t);return sync.ext.Registry.extensionURL="../rest/"+it+"/load/framework/"+o+"/",sync.rest.callAsync("RESTAssetLoader.loadFrameworkJs",{frameworkId:o}).then(goog.bind(function(i){if(this.isDisposed())return goog.Promise.resolve();var n=goog.dom.createDom("script");return n.textContent=i,goog.dom.appendChild(goog.dom.getElementsByTagNameAndClass("head")[0],n),goog.dom.removeNode(n),sync.ext.Registry.extension},this)).thenCatch(goog.bind(function(i){if(!this.isDisposed())return console.warn("The framework JS file could not be found.",i),sync.ext.Registry.extension},this))}else return goog.Promise.resolve(sync.ext.Registry.extension)};O.prototype.loadCSS=function(){return this.stylesManager_.loadCSS().thenCatch(goog.bind(this.reportLoadingError_,this))};O.prototype.reportLoadingError_=function(t){this.isDisposed()||this.problemReporter.reportUnknownLoadingProblem(this.editorViewport,t.message,t)};O.prototype.getDocument=function(){return this.controller.getXmlDocumentProvider().getXmlDocument()};O.prototype.registerEnhancer=function(t,o){this.enhancers.registerEnhancer(t,o)};O.prototype.getController=function(){return this.controller};O.prototype.getXmlModel=function(){return this.xmlModel};O.prototype.getLayoutChangeTracker=function(){return this.layoutChangeTracker};O.prototype.getReadOnlyStatus=function(){return this.readOnlyStatus_||(this.readOnlyStatus_=new ue),this.readOnlyStatus_};O.prototype.getSelectionManager=function(){return this.selectionManager};O.prototype.getHighlightsManager=function(){return this.highlightsManager_||(this.highlightsManager_=new sy(this.actionsManager,this.controller,this.viewportScroller,this.getSelectionManager())),this.highlightsManager_};O.prototype.getPersistentHighlightsManager=function(){return this.persistentHighlightsManager_||(this.persistentHighlightsManager_=new ay(this.actionsManager,this.markersModel,this.viewportScroller,this.getSelectionManager())),this.persistentHighlightsManager_};O.prototype.focus=function(){this.selectionHandler.restoreSelectionInBrowser()};O.prototype.createMarkerPreview=function(t){var o=new sync.ctrl.MarkersPreviewController(t,this.markersModel);this.registerDisposable(o)};O.prototype.enableMarkerTooltip=function(){if(!goog.userAgent.ANDROID&&!goog.userAgent.MOBILE){var t=new Bf(this.markersModel,this.actionsManager,this.actionsExecutor,this.viewportScroller);t.setEnabledCheck(()=>!this.contextMenu.isVisible()),this.registerDisposable(t)}};O.prototype.getType=function(){return sync.api.Editor.EditorTypes.AUTHOR};O.prototype.supportsEditing=function(){return!1};O.prototype.getChangeTrackingManager=function(){return this.controller&&this.controller.getChangeTrackingManager()};O.prototype.getContent=function(t){this.controller.getContent().then(function(o){t(null,o)}).thenCatch(t)};O.prototype.getRestrictedAttributes=function(){return this.restrictedAttributes_};O.prototype.disposeServerResources=function(t){this.serverResourcesDisposable_.dispose();var o=sync.rest.getSyncMethod("RESTDocumentManager.disposeDocument");o({docDisposeId:this.disposeId,save:t})};O.prototype.attachA11yFilter_=function(){var t=new ly(this.a11y,this.controller.getDocumentHtmlNode());t.attachA11yStateListener(),this.controller.registerDocumentFilter(t),this.registerDisposable(t)};O.prototype.getTagsDisplayMode=function(){return this.sentinelsFilter_&&this.sentinelsFilter_.getSentinelsDisplayMode()};O.prototype.setTagsDisplayMode=function(t){this.sentinelsFilter_&&this.sentinelsFilter_.setSentinelsDisplayMode(t)};O.prototype.getOperationsInvoker=function(){return this.opsInvoker_};O.prototype.scheduleDocumentTransaction=function(t){return this.actionsExecutor.executeDocumentTransaction(t)};O.prototype.getActionsExecutor=function(){return this.actionsExecutor};var Za=O;sync.support.PreviewAuthorSupport=O;namespace("sync.actions");var kp=function(t,o,i){_.call(this,i),this.selectionManager_=t,this.readOnlyStatus_=o};goog.inherits(kp,_);kp.prototype.isEnabled=function(){var t=!0;return(!(sync.select.SelectionUtil.getOxyElementIdFromCaret(this.selectionManager_.getSelection())!=null)||this.readOnlyStatus_.isReadOnly()||this.selectionManager_.evalSelectionFunction(sync.util.isInReadOnlyContent))&&(t=!1),t};var el=kp;sync.actions.BaseAttributeManageAction=kp;namespace("sync.actions");var Lp=function(t,o,i){el.call(this,t,o,{displayName:tr(msgs.EDIT_ATTRIBUTE_)+"..."}),this.xmlController_=i};goog.inherits(Lp,el);Lp.prototype.actionPerformed=function(t){t=t||goog.nullFunction;var o=workspace.createDialog();o.setPreferredSize(330,null),o.setResizable(!0),o.setButtonConfiguration(sync.api.Dialog.ButtonConfiguration.OK_CANCEL),o.setTitle(tr(msgs.EDIT_ATTRIBUTE_));let i=sync.ui.util.createElement,n=i(Mo,{label:tr(msgs.NAME_)}),r=i(Mo,{label:tr(msgs.VALUE_)});goog.dom.append(o.getElement(),n,r),o.show(),n.focus(),o.onSelect(s=>{if(s==="ok"){var a=sync.xmlutil.escapeAttributeValue(n.getValue());if(a){var l=sync.select.SelectionUtil.getOxyElementIdFromCaret(this.selectionManager_.getSelection()),c=sync.xmlutil.escapeElementTextContent(r.getValue());this.xmlController_.setAttribute(l,a,c)}}t()})};var Ey=Lp;sync.actions.EditAttributeAction=Lp;namespace("sync.actions");var Fp=function(t,o,i){el.call(this,t,o,{displayName:tr(msgs.REMOVE_ATTRIBUTE_)+"..."}),this.xmlController_=i};goog.inherits(Fp,el);Fp.prototype.actionPerformed=function(t){t=t||goog.nullFunction;var o=workspace.createDialog();o.setPreferredSize(330,null),o.setResizable(!0),o.setButtonConfiguration(sync.api.Dialog.ButtonConfiguration.OK_CANCEL),o.setTitle(tr(msgs.REMOVE_ATTRIBUTE_));let i=sync.ui.util.createElement(Mo,{label:tr(msgs.ENTER_THE_ATTRIBUTE_NAME_)});goog.dom.append(o.getElement(),i),o.show(),i.focus(),o.onSelect(n=>{if(n==="ok"){var r=sync.xmlutil.escapeAttributeValue(i.getValue());if(r){var s=sync.select.SelectionUtil.getOxyElementIdFromCaret(this.selectionManager_.getSelection());this.xmlController_.removeAttribute(s,r)}}t()})};var Cy=Fp;sync.actions.RemoveAttributeAction=Fp;namespace("sync.actions");var Yt=function(t,o){sync.actions.AbstractAction.call(this,o),this.editor_=t,this.spinner_=null,this.isSaving_=!1};goog.inherits(Yt,sync.actions.AbstractAction);Yt.prototype.save=function(){};Yt.prototype.triggerSave=function(){this.isSaving_=!0;var t=this.save().then(goog.bind(function(){this.editor_.setDirty(!1)},this));return t.thenAlways(goog.bind(function(){this.isSaving_=!1},this)),t};Yt.prototype.actionPerformed=function(t){if(this.isSaving_){t();return}var o=this.getSaveButton();this.spinner_=new rt(o,500,"oxy-spinner-dark-background"),this.spinner_.show(),this.isSaving_=!0;try{this.save().then(goog.bind(this.documentSaved_,this)).thenCatch(goog.bind(this.reportError_,this)).thenAlways(goog.bind(function(){this.isSaving_=!1,t&&t()},this))}catch(i){this.reportError_(i)}};Yt.prototype.getSaveButton=function(){return document.querySelector('.goog-toolbar-button[name="Author/Save"]')};Yt.prototype.documentSaved_=function(){this.spinner_.hide(),workspace.getNotificationManager().showInfo(tr(msgs.DOCUMENT_SAVED_),!0),this.editor_.setDirty(!1)};Yt.prototype.reportError_=function(t){if(this.spinner_.hide(),console.log(t),t instanceof sync.RESTException&&t.isUserActionRequired())this.editor_.dispatchEvent(new sync.api.Editor.WebappMessageReceived(t.getUserActionRequiredMessage(),sync.api.Editor.WebappMessageReceived.Context.SAVE));else{var o=this.getSavingProblemMessage();if(t instanceof sync.RESTException)try{var i=JSON.parse(t.message);o+=": "+tr(msgs[i.id],i.params)}catch{o=this.getSavingErrorMessage()+" "+t.message}workspace.getNotificationManager().showError(o,!0)}};Yt.prototype.getSavingProblemMessage=function(){return tr(msgs.DOCUMENT_COULD_NOT_BE_SAVED_)};Yt.prototype.getSavingErrorMessage=function(){return tr(msgs.ERROR_SAVING_DOCUMENT_)};Yt.prototype.getDisplayName=function(){return tr(msgs.SAVE_)};Yt.prototype.renderLargeIcon=function(){return goog.dom.createDom("div","Save24")};Yt.prototype.getSmallIcon=function(){return sync.util.image.getImageUrl("/images/Save16.png",sync.util.getHdpiFactor())};Yt.prototype.getDescription=function(){return tr(msgs.SAVE_)};Yt.prototype.isEnabled=function(){return this.isSaving_||this.editor_.getReadOnlyStatus().isReadOnly()?!1:this.editor_.isDirty()};Yt.prototype.isSaving=function(){return this.isSaving_};var Yr=Yt;sync.actions.AbstractSaveAction=Yt;namespace("sync.actions");var tl=function(t,o){Yr.call(this,o,"M1 S"),this.docId_=t};goog.inherits(tl,Yr);tl.prototype.save=function(){var t={id:this.docId_};return sync.rest.callAsync("RESTDocumentManager.save",t)};tl.prototype.triggerSave=function(){return this.editor_.getEditingSupport().syncToAuthorMode(!0).then(goog.bind(tl.superClass_.triggerSave,this))};var Up=tl;sync.actions.SaveAction=tl;namespace("sync.support");sync.support.EditableWidgetCommitChangesException=function(t){Error.call(this),this.type=t};goog.inherits(sync.support.EditableWidgetCommitChangesException,Error);var Qr=function(){goog.events.EventTarget.call(this)};goog.inherits(Qr,goog.events.EventTarget);Qr.EventTypes={CONTENT_CHANGED:"con-ch"};Qr.prototype.commitChanges=function(t){};Qr.prototype.focus=function(){};Qr.prototype.dispatchChangeEvent=function(){this.dispatchEvent(new goog.events.Event(Qr.EventTypes.CONTENT_CHANGED))};var zs=Qr;sync.support.EditableWidget=Qr;namespace("sync.actions");var Qg=function(t,o,i){Hn.call(this,sync.rest.getRestApiUrl("RESTDocumentManager.downloadModifiedReference",{docId:o.docId,fileUrl:encodeURIComponent(t)}),i)};goog.inherits(Qg,Hn);var Sy=Qg;sync.actions.DownloadModifiedReferenceAction=Qg;var Bp=function(t,o){this.type=Bp.EDITABLE_WIDGET_ACTIVE_STATE_CHANGED,this.widget=t,this.isActive=o};goog.inherits(Bp,goog.events.Event);Bp.EDITABLE_WIDGET_ACTIVE_STATE_CHANGED="ed-wi";var Hp=Bp;namespace("sync.actions");var ve=function(t,o,i,n){_.call(this,{keyStrokeStr:"M1 S",displayName:i.getDisplayName(),description:i.getDescription(),isEnabled:goog.bind(i.isEnabled,this)}),this.statusMarker_=t.widgets.getModifiedIndicator(),this.editor_=t,this.interval_=n,this.saveAction_=i,this.scheduledAutosave_=null,this.autosaveEnabled_=!0,this.eventHandler_=new goog.events.EventHandler(this),this.eventHandler_.listen(this.statusMarker_.getElement(),goog.events.EventType.CLICK,this.statusMarkerClicked_),this.eventHandler_.listen(this.editor_,sync.api.Editor.EventTypes.DIRTY_STATUS_CHANGED,goog.bind(this.handleDirtyStatusChanged_,this)),this.eventHandler_.listen(o,M.EventType.MODEL_CHANGED,goog.bind(this.scheduleAutosaveIfModifiedAfterError_,this)),this.eventHandler_.listen(t.getEditingSupport(),Hp.EDITABLE_WIDGET_ACTIVE_STATE_CHANGED,goog.bind(this.handleEditableWidgetActivationChanged_,this))};goog.inherits(ve,_);sync.actions.AutoSaveStatus={CLEAN:"clean",DIRTY:"dirty",SAVING:"saving",ERROR:"error"};ve.prototype.enableAutoSave=function(){this.autosaveEnabled_=!0,this.editor_.isDirty()&&this.setDirtyAndScheduleAutoSave_()};ve.prototype.disableAutoSave=function(){this.autosaveEnabled_=!1};ve.prototype.handleDirtyStatusChanged_=function(t){t.isDirty&&this.autosaveEnabled_&&this.setDirtyAndScheduleAutoSave_()};ve.prototype.scheduleAutosaveIfModifiedAfterError_=function(t){this.autosaveEnabled_&&this.lastStatus_===sync.actions.AutoSaveStatus.ERROR&&t.docUpdate.isEditorModified&&this.scheduleAutoSave_()};ve.prototype.handleEditableWidgetActivationChanged_=function(t){t.isActive?this.contentChangedInWidgetListenerKey_=t.widget.listen(zs.EventTypes.CONTENT_CHANGED,goog.bind(this.handleModelChangedInWidget_,this)):t.widget.unlistenByKey(this.contentChangedInWidgetListenerKey_)};ve.prototype.handleModelChangedInWidget_=function(){this.autosaveEnabled_&&this.scheduleAutoSave_()};ve.prototype.setDirtyAndScheduleAutoSave_=function(){this.setStatus_(sync.actions.AutoSaveStatus.DIRTY),this.scheduleAutoSave_()};ve.prototype.scheduleAutoSave_=function(){this.scheduledAutosave_||(this.scheduledAutosave_=setTimeout(goog.bind(this.syncAndAutosave_,this),this.interval_*1e3))};ve.prototype.syncAndAutosave_=function(){this.scheduledAutosave_=null,!(this.saveAction_.isSaving()||this.editor_.getReadOnlyStatus().isReadOnly())&&(this.setStatus_(sync.actions.AutoSaveStatus.SAVING),this.editor_.getEditingSupport().syncToAuthorMode(!0).then(goog.bind(this.autosave,this)).thenCatch(goog.bind(this.handleFailure_,this)))};ve.prototype.cancelScheduledAutosave_=function(){clearTimeout(this.scheduledAutosave_),this.scheduledAutosave_=null};ve.prototype.triggerSave=function(){return this.cancelScheduledAutosave_(),this.setStatus_(sync.actions.AutoSaveStatus.SAVING),this.editor_.getEditingSupport().syncToAuthorMode(!0).then(goog.bind(this.doAutosave_,this)).thenCatch(goog.bind(function(t){throw this.setStatus_(sync.actions.AutoSaveStatus.ERROR),t},this))};ve.prototype.handleFailure_=function(t){var o=!1;t instanceof sync.RESTException?t.isSessionExpired()?(sync.util.error.reloadPage(t),o=!0):t.isUserActionRequired()&&(this.editor_.dispatchEvent(new sync.api.Editor.WebappMessageReceived(t.getUserActionRequiredMessage(),sync.api.Editor.WebappMessageReceived.Context.SAVE)),o=!0):t instanceof sync.support.EditableWidgetCommitChangesException&&(this.setStatus_(sync.actions.AutoSaveStatus.DIRTY),o=!0),o||(console.error(t),this.setStatus_(sync.actions.AutoSaveStatus.ERROR)&&this.showRetryDialogForException_(t))};ve.prototype.getSaveReferencesExceptionsMap_=function(t){var o;if(t instanceof sync.RESTException&&t.isCausedByReferencesIOErrors()){var i=t.message?JSON.parse(t.message):null;if(i)try{o=new Map(Object.entries(i))}catch(n){console.error(n)}}return o};ve.prototype.autosave=function(){return this.saveAction_.isSaving()?goog.Promise.resolve():this.autosaveEnabled_?this.doAutosave_():(this.setStatus_(sync.actions.AutoSaveStatus.DIRTY),goog.Promise.resolve())};ve.prototype.doAutosave_=function(){return sync.rest.callAsync("RESTDocumentManager.autosave",{id:this.editor_.docId}).then(goog.bind(function(t){return this.scheduledAutosave_?this.setStatus_(sync.actions.AutoSaveStatus.DIRTY):(this.editor_.setDirty(!1),this.setStatus_(sync.actions.AutoSaveStatus.CLEAN)),t},this))};ve.prototype.actionPerformed=function(t){this.cancelScheduledAutosave_(),this.saveAction_.actionPerformed(t)};ve.prototype.renderLargeIcon=function(){return this.saveAction_.renderLargeIcon()};ve.prototype.setStatus_=function(t){if(this.lastRefsSaveExceptions_=null,this.interval_<=300)return this.lastStatus_===t?!1:(this.lastStatus_=t,this.statusMarker_.setStatus(t),!0);this.updateSpinner_(t)};ve.prototype.showRetryDialogForException_=function(t){this.lastRefsSaveExceptions_=this.getSaveReferencesExceptionsMap_(t),this.showRetryDialog_()};ve.prototype.updateSpinner_=function(t){if(this.spinner_)t===sync.actions.AutoSaveStatus.SAVING?this.spinner_.show():this.spinner_.hide();else{var o=document.querySelector('*[name="Author/Save"]');o&&(this.spinner_=new rt(o,0,"oxy-spinner-dark-background"))}};ve.prototype.statusMarkerClicked_=function(){this.lastStatus_===sync.actions.AutoSaveStatus.ERROR&&this.showRetryDialog_()};ve.prototype.showRetryDialog_=function(){if(!this.failedDialog_){var t=goog.dom.createDom;this.failedDialog_=workspace.createDialog(),this.eventHandler_.registerDisposable(this.failedDialog_),this.failedDialog_.setButtonConfiguration([{key:"retry",caption:tr(msgs.RETRY_)},{key:"cancel",caption:tr(msgs.CANCEL_)}]),this.failedDialog_.setTitle(tr(msgs.SAVE_FAILED_LONG_DESC_));var o=t("a",{href:"#",className:"autosave-failed-save-as"},tr(msgs.FILE_SAVE_AS_)),i=t("a",{href:"#",className:"autosave-failed-download"},tr(msgs.DOWNLOAD_)),n=t("span",{className:"autosave-failed-alternatives"},[tr(msgs.AUTOSAVE_FAILED_RETRY_MSG_),t("br"),tr(msgs.AUTOSAVE_FAILED_ALTERNATIVES_),o,goog.dom.createTextNode(", "),i,goog.dom.createTextNode(".")]);this.failedDialogReferencesList_=t("span",{className:"autosave-failed-refs-list",id:"autosave-failed-refs-list"}),goog.dom.appendChild(this.failedDialog_.getElement(),t("span",null,[tr(msgs.AUTOSAVE_FAILED_MSG_),t("br"),n,this.failedDialogReferencesList_]));var r=goog.nullFunction;this.eventHandler_.listen(o,goog.events.EventType.CLICK,goog.bind(function(s){s.preventDefault();var a=this.editor_.getActionsManager().getActionById("Author/SaveAs");this.failedDialog_.hide(),a.actionPerformed(r)},this)),this.eventHandler_.listen(i,goog.events.EventType.CLICK,goog.bind(function(s){s.preventDefault();var a=this.editor_.getActionsManager().getActionById("Author/Download");this.failedDialog_.hide(),a.actionPerformed(r)},this))}this.updateRetryDialogStyles_(),this.updateRetryDialogContent_(),this.failedDialog_.onSelect(goog.bind(function(s){s==="retry"&&this.saveAction_.actionPerformed(goog.bind(function(){this.editor_.isDirty()||this.setStatus_(sync.actions.AutoSaveStatus.CLEAN)},this))},this)),this.failedDialog_.show()};ve.prototype.updateRetryDialogStyles_=function(){var t=this.failedDialog_.getElement();goog.dom.classlist.remove(t,"autosave-failed-references"),goog.dom.classlist.remove(t,"autosave-failed-main"),this.lastRefsSaveExceptions_?goog.dom.classlist.add(t,"autosave-failed-references"):goog.dom.classlist.add(t,"autosave-failed-main")};ve.prototype.updateRetryDialogContent_=function(){if(goog.dom.removeChildren(this.failedDialogReferencesList_),this.lastRefsSaveExceptions_){var t=goog.dom.createDom;goog.dom.appendChild(this.failedDialogReferencesList_,t("span",null,[tr(msgs.AUTOSAVE_REFERENCES_FAILED_MSG_),t("br")])),this.lastRefsSaveExceptions_.forEach(goog.bind(function(o,i){var n=workspace.makeRelative(this.editor_.getUrl(),i);if(!n||n.length===0){var r=new E(i);r.setUserInfo(""),n=r.getUrl()}var s=t("a",{href:"#",className:"autosave-failed-download",id:"autosave-failed-ref-download"},tr(msgs.DOWNLOAD_)),a=t("a",{href:"#",className:"autosave-failed-show-details"},tr(msgs.SHOW_DETAILS_));goog.dom.appendChild(this.failedDialogReferencesList_,t("span",null,[t("span",{className:"autosave-failed-ref-url"},n),s,a,t("br")])),this.eventHandler_.listen(s,goog.events.EventType.CLICK,goog.bind(function(l){l.preventDefault();var c=new Sy(i,this.editor_);c.actionPerformed(goog.nullFunction)},this)),this.eventHandler_.listen(a,goog.events.EventType.CLICK,goog.bind(function(l){l.preventDefault(),this.showDetailsDialog_||(this.eventHandler_.registerDisposable(this.showDetailsDialog_),this.showDetailsDialog_=workspace.createDialog(),this.showDetailsDialog_.setButtonConfiguration(sync.api.Dialog.ButtonConfiguration.OK),this.showDetailsDialog_.setResizable(!0),this.showDetailsDialog_.setTitle(tr(msgs.SHOW_DETAILS_)));var c=this.showDetailsDialog_.getElement();goog.dom.removeChildren(c),c.appendChild(t("span",null,[tr(msgs.ERROR_SAVING_DOCUMENT_),n,t("br"),o])),this.showDetailsDialog_.show()},this))},this))}};ve.prototype.dispose=function(){this.eventHandler_.dispose(),clearTimeout(this.scheduledAutosave_)};var ol=ve;sync.actions.AutoSaveAction=ve;namespace("sync.support");var Ie=function(t,o,i,n,r,s,a,l){Za.call(this,t,o,i,n,r,s,a,l)};goog.inherits(Ie,Za);Ie.prototype.buildEditModeModel=function(t){var o=new ft(t.modes);return o.isEditMode()&&o.toggleEditMode(),o};Ie.prototype.load=function(t,o,i){return Ie.superClass_.load.call(this,t,o,i).then(()=>(this.viewport.install(this.editModeModel),this.controller.listen(M.EventType.MODEL_CHANGED,n=>{this.shouldSetDirty(n)&&this.dispatchEvent(new sync.api.EditingSupport.DirtyStatusChangedEvent(!0))}),this.registerCssActionOnTheFly_(),this))};Ie.prototype.registerCssActionOnTheFly_=function(){this.controller.listen(M.EventType.BEFORE_MODEL_CHANGED,t=>{t.docUpdate.cssActions.forEach(o=>{let i=this.buildServerAction_(o);this.actionsManager.registerAction(o.id,i)})})};Ie.prototype.registerDocumentFilters=function(t,o){Ie.superClass_.registerDocumentFilters.call(this,t,o),this.editModeModel=this.buildEditModeModel(this.options),this.registerDisposable(this.editModeModel),this.createContentEditableSetter(o,t,this.editModeModel)};Ie.prototype.getContextMenuBuiltinEntries=function(){return[{type:"action",id:"Author/EditAttribute"},{type:"action",id:"Author/RemoveAttribute"},{type:"sep"},{type:"action",id:"Author/CutSpecial"},{type:"action",id:"Author/CopySpecial"},{type:"action",id:"Author/PasteSpecial"},{type:"sep"},{type:"action",id:"Author/Undo"},{type:"action",id:"Author/Redo"},{type:"sep"},{type:"action",id:"Author/FindReplace"},{type:"sep"},{type:"list",name:tr(msgs.FOLDING_),children:[{type:"action",id:"Author/ToggleFold"},{type:"sep"},{type:"action",id:"Author/FoldOthers"},{type:"action",id:"Author/FoldChildren"},{type:"action",id:"Author/FoldAll"},{type:"sep"},{type:"action",id:"Author/ExpandChildren"},{type:"action",id:"Author/ExpandAll"}]}]};Ie.prototype.createActions=function(t,o,i){Ie.superClass_.createActions.call(this,t,o,i),this.registerActions(this.createCCActions_(t,this.getReadOnlyStatus(),this.widgets)),this.registerActions({"Author/Undo":new Pu(this.undoManager,this.selectionManager),"Author/Redo":new ku(this.undoManager,this.selectionManager)}),this.registerActions({"Author/EditAttribute":new Ey(this.selectionManager,this.readOnlyStatus_,this.xmlController),"Author/RemoveAttribute":new Cy(this.selectionManager,this.readOnlyStatus_,this.xmlController)})};Ie.prototype.createCCActions_=function(t,o,i){var n={serverDeploymentId:this.serverDeploymentId_,frameworkId:sync.util.dotEncodeURIComponent(this.documentTypeId)},r=goog.functions.cacheReturnValue(function(){return sync.rest.callAsync("RESTContentCompletionConfiguration.getElementInfo",n)});this.ccCustomizer_=new Lu(this.actionsManager);var s=this.getActionsManager(),a=this.getSelectionManager(),l=new Vu(s,a,t,i,o,r,this.ccCustomizer_),c=new Wu(s,a,t,i,o,r,this.ccCustomizer_),d=new Di(s,a,t,i,o,r,this.ccCustomizer_),g=new Ku(s,a,t,i,o,r),m=new Gu(s,a,t,i,o,r,this.ccCustomizer_),v=new qu(s,a,t,i,o,r,this.ccCustomizer_),C=new Xu(s,a,t,i,o,r,this.ccCustomizer_),N=this.options.ccOnEnter,D=N===void 0?sync.options.ServerOptions.getServerOption("show.cc.on.enter")===!1:!sync.util.isOptionTrue(N),H=new zu("",o,t),ne="enter",ht="ctrl enter",Yi=ht;D&&(ne=ht,Yi="enter",d.setShortcutForDisplay(ht),l.setShortcutForDisplay(ht));var ls=new kg(Yi,H,l),cs=new kg(ne,c,l);return{"Author/AppendChild":m,"Author/InsertAfter":v,"Author/InsertBefore":C,"Author/InsertElement":d,"Author/RenameElement":g,"Author/SurroundWithElement":l,"Author/Enter":cs,"Author/SplitOnEnter":ls}};Ie.prototype.initBeforeCreatingActions=function(t,o){var i=this.getReadOnlyStatus();this.installCopyPasteManager_(o,this.scheduler),this.undoManager=new Cd(this.controller,i,this,t.undoEnabled,t.redoEnabled),this.installSelectionAdjuster_(o)};Ie.prototype.installCopyPasteManager_=function(t,o){var i=new ka(this.getUrl(),this.getController(),o,this.getReadOnlyStatus(),this.getSelectionManager());this.registerDisposable(i),this.editModeModel.isEditMode()&&i.install(t),this.editModeModel.listen(ft.EventTypes.EDIT_MODE_CHANGED,n=>{n.editMode?i.blockCutAndPaste(!1):i.blockCutAndPaste(!0)}),i.getActions().forEach((n,r)=>this.actionsManager.registerAction(r,n))};Ie.prototype.shouldSetDirty=function(t){return t.docUpdate.isEditorModified&&!t.isClientSide};Ie.prototype.createContentEditableSetter=function(t,o,i){var n=new km(t,this.editModeModel.isEditMode());this.registerDisposable(n),o.registerDocumentFilter(n),i.listen(ft.EventTypes.EDIT_MODE_CHANGED,r=>n.setEditable(r.editMode)),n.setEditable(i.isEditMode())};Ie.prototype.isTooltipEnabled=function(){var t=this.options["show.caret.position.info"],o=sync.options.ServerOptions.getServerOption("show.caret.position.info");return t!==void 0?sync.util.isOptionTrue(t):!!o};Ie.prototype.createTooltip=function(){var t=this.editorViewport.querySelector(".oxy-document");this.tooltip=new Hm(t,this.elementNameEnhancer,this.a11y),this.registerDisposable(this.tooltip),this.a11yTooltip=new jm(this.tooltip,this.elementNameEnhancer,this.a11y),this.actionsManager.registerAction("Author/A11yTooltip",new De({actionPerformed:goog.bind(function(o){this.a11yTooltip.show(this.selectionHandler.getCurrentSelection().focus),o()},this),keyStrokeStr:"M1 F2"})),this.tooltip.install(this.editModeModel,this.getSelectionManager(),this.markersModel)};Ie.prototype.createUIComponents=function(t,o){this.editModeModel.isEditMode()&&this.getSelectionManager().fireInitialSelectionSet(),this.isTooltipEnabled()&&this.createTooltip(),this.createMarkerPreview(o),this.createModeSwitcher_()};Ie.prototype.createModeSwitcher_=function(){this.modeSwitcher=new Vm(this.editModeModel,this.getReadOnlyStatus()),this.registerDisposable(this.modeSwitcher),this.modeSwitcher.init()};Ie.prototype.installExtensionActions=function(){return new goog.Promise((t,o)=>{sync.rest.callAsync("RESTActionsManager.getExtensionActionsConfiguration",{docId:this.docId}).then(i=>{var n=new Co(i);this.registerFrameworkActions_(n),t(n)}).thenCatch(function(i){sync.util.error.logError(i),o(i)})})};Ie.prototype.registerFrameworkActions_=function(t){var o=new Map;t.actions.forEach(i=>this.addFrameworkActionInMap_(i,o),this),this.extension.filterActions(o,this),o.forEach((i,n)=>this.actionsManager.registerAction(n,i),this)};Ie.prototype.addFrameworkActionInMap_=function(t,o){if(!this.actionsManager.getActionById(t.id)){var i=this.buildServerAction_(t);o.set(t.id,i)}};Ie.prototype.buildServerAction_=function(t){var o=this.getReadOnlyStatus();return new ur(t,this.controller,o,this.getScrollEventTarget(),this.selectionManager)};Ie.prototype.supportsEditing=function(){return!0};Ie.prototype.installSaveActions=function(t){var o=new Up(t.docId,t);this.actionsManager.registerAction("Author/Save",o),t.options.autoSaveInterval&&this.actionsManager.registerAction("Author/Save",new ol(t,this.getController(),o,t.options.autoSaveInterval))};var xc=Ie;sync.support.BasicAuthorSupport=Ie;goog.require("goog.Disposable");goog.require("goog.Timer");namespace("sync.support");var Wi=function(t,o,i,n,r){this.docId_=t,this.problemReporter_=o,this.workspaceState_=i,this.workspaceErrorHandler_=n,this.interval_=r||150,this.keepAliveTimer_=new goog.Timer,this.keepAliveTimer_.setInterval(this.interval_*1e3),this.registerDisposable(this.keepAliveTimer_),this.keepAliveTimer_.listen(goog.Timer.TICK,goog.bind(this.keepAlive_,this)),this.keepAliveTimer_.dispatchTick(),this.keepAliveMissedCounter_=0,this.lastKeepAliveTimestamp_=-1};goog.inherits(Wi,goog.Disposable);Wi.prototype.start=function(){this.lastKeepAliveTimestamp_=Date.now(),this.keepAliveTimer_.start(),this.onFocusListener_||(this.onFocusListener_=()=>{let t=Date.now()-this.lastKeepAliveTimestamp_;t>2*this.interval_*1e3?(this.stopTimerAndListeners_(),this.showSessionLostBrokenConnectionFatalDialogNow_()):t>this.interval_*1e3&&(this.keepAlive_(),this.keepAliveTimer_.stop(),this.keepAliveTimer_.start())},window.addEventListener("focus",this.onFocusListener_))};Wi.prototype.keepAlive_=function(){this.lastKeepAliveTimestamp_=Date.now(),sync.rest.callAsync("RESTDocumentManager.keepAlive",{docId:this.docId_,timeout:this.interval_}).then(()=>{this.keepAliveMissedCounter_=0}).thenCatch(t=>{console.warn(t),this.keepAliveMissedCounter_++,t instanceof sync.RESTException&&t.isSessionExpired()?this.showSessionLostFatalDialog_(t):this.keepAliveMissedCounter_>1&&this.showSessionLostBrokenConnectionFatalDialog_()})};Wi.prototype.showSessionLostFatalDialog_=function(t){this.keepAliveTimer_.stop(),this.workspaceState_.isEditorBackupAvailable()?this.workspaceErrorHandler_.handleFatalException(t):sync.util.dom.waitForHtmlDocToBeVisible().then(()=>{this.isDisposed()||(this.workspaceState_.setAfterReloadMessage(tr(msgs.DOCUMENT_RELOADED_BECAUSE_SESSION_EXPIRED_)),this.workspaceState_.hardReload())})};Wi.prototype.showSessionLostBrokenConnectionFatalDialog_=function(){this.stopTimerAndListeners_(),sync.util.dom.waitForHtmlDocToBeVisible().then(()=>{this.showSessionLostBrokenConnectionFatalDialogNow_()})};Wi.prototype.stopTimerAndListeners_=function(){this.keepAliveTimer_.stop(),this.onFocusListener_&&window.removeEventListener("focus",this.onFocusListener_)};Wi.prototype.showSessionLostBrokenConnectionFatalDialogNow_=function(){this.isDisposed()||(this.workspaceState_.isEditorBackupAvailable()||!navigator.onLine?this.workspaceErrorHandler_.showRecoverDialogForSessionLost():(this.workspaceState_.setAfterReloadMessage(tr(msgs.DOCUMENT_RELOADED_BECAUSE_SESSION_EXPIRED_)),this.workspaceState_.hardReload()))};Wi.prototype.disposeInternal=function(){Wi.superClass_.disposeInternal.call(this),this.onFocusListener_&&window.removeEventListener("focus",this.onFocusListener_)};var Ty=Wi;sync.support.KeepAlive=Wi;goog.require("goog.Disposable");namespace("sync.support");var il=function(t,o){var i=sync.model.XmlDom.getDocumentNode(o).parentElement,n=i.cloneNode(!0);this.disableInteractives_(n),this.removeSpellchecking_(n),goog.dom.appendChild(t,n)};goog.inherits(il,goog.Disposable);il.prototype.getActionsManager=function(){return new en};il.prototype.disableInteractives_=function(t){var o,i=t.querySelectorAll('[contenteditable="true"]');for(o=0;o<i.length;o++)i[o].setAttribute("contenteditable","false");var n=t.querySelectorAll("input, textarea, button, select");for(o=0;o<n.length;o++)n[o].setAttribute("disabled","true")};il.prototype.removeSpellchecking_=function(t){for(var o="spellcheckingError",i=t.getElementsByClassName(o),n=i.length-1;n>=0;n--)goog.dom.classlist.remove(i[n],o)};var by=il;sync.support.ClonedEditingSupport=il;namespace("sync.options");var En=function(t,o){goog.object.extend(this,t),this.editingContextManager_=o;var i="stylesheet-titles",n=this[i];this[i]=n?this.decodeCssGroups_(n):br.getAllSelectedGroups()};En.prototype.projectUrl=null;En.prototype.getServerOptions=function(t){var o=goog.object.clone(t);return delete o.url,delete o.title,delete o.content,delete o.modes,delete o.elementNameEnhancer,delete o.editingContextManager_,o};En.prototype.getServerLoadingOptions=function(){var t=this.getServerOptions(this);return this.addDitaMapParams(t,this.editingContextManager_),this.addCssOptions(t),t};En.prototype.addCssOptions=function(t){var o=CSS.supports("contain: inline-size");o||(t["css.container.queries"]="false")};En.prototype.addDitaMapParams=function(t,o){var i=this.ditamap;if(this.shouldGuessDitaContext_()){var n=o.guessDitaContext(this.url,this.projectUrl);n&&(i=n.ditamapUrl,i?this.guessedDitamap=i:(this.guessedDitaProject=n.ditaProjectUrl,this.guessedContextId=n.ditaProjectContextId,t["dita.project.url"]=this.guessedDitaProject,t["dita.project.contextid"]=this.guessedContextId),t["dita.context.guessed"]=!0)}i&&(delete t.ditamap,t["dita.root.map.url"]=i)};En.prototype.shouldGuessDitaContext_=function(){return!goog.isDefAndNotNull(this.ditamap)&&!goog.isDefAndNotNull(this["dita.project.url"])};En.prototype.decodeCssGroups_=function(t){return goog.isString(t)?t.split(","):goog.isArray(t)?t:null};En.prototype.getPreviewLoadingOptions=function(t,o){var i=this.editingContextManager_.getDitaContext(),n={url:o.url,content:o.content,sourceDocId:o.sourceDocId,userName:t,"tags-mode":this["tags-mode"],compactTagsMode:this.compactTagsMode,"dita.val.url":o["dita.val.url"]||i.filterUrl,"dita.root.map.url":o.ditamap||i.ditamapUrl,previewMode:"true"};n.KeyscopeStack=o.KeyscopeStack,n.elementNameEnhancer=o.elementNameEnhancer||this.elementNameEnhancer,n.expandTopicRefs=o.expandTopicRefs||this.expandTopicRefs;var r="stylesheet-titles",s=o[r];return n[r]=s?this.decodeCssGroups_(s):this[r],n};var Rc=En;sync.options.EditorOptions=En;goog.require("goog.events");goog.require("goog.events.EventTarget");namespace("sync.view");var xo=function(t){goog.events.EventTarget.call(this),this.workspaceState_=t,this.isDirty_=!1,this.enabled_=!0,this.markAsCleanAutomatically_=!1,this.beforeUnloadListenereKey=goog.events.listen(window,goog.events.EventType.BEFOREUNLOAD,goog.bind(this.handleBeforeUnload,this),!0)};goog.inherits(xo,goog.events.EventTarget);xo.EventTypes={DIRTY_STATUS_CHANGED:"dirty_status_changed"};xo.prototype.setEnabled=function(t){this.enabled_=t};xo.prototype.markAsCleanAutomatically=function(){this.setDirty(!1),this.setEnabled(!1),this.markAsCleanAutomatically_=!0};xo.prototype.isEnabled=function(){return this.enabled_};xo.prototype.handleBeforeUnload=function(t){if(this.isDirty_&&!this.workspaceState_.isAboutToReload()&&this.enabled_){var o=tr(msgs.USER_LEAVE_WARNING_);return t.getBrowserEvent().returnValue=o,o}};xo.prototype.setDirty=function(t){this.isDirty_=t,this.dispatchEvent({type:xo.EventTypes.DIRTY_STATUS_CHANGED,isDirty:this.isDirty_}),this.markAsCleanAutomatically_&&t&&(this.isDirty_=!1,this.dispatchEvent({type:xo.EventTypes.DIRTY_STATUS_CHANGED,isDirty:this.isDirty_}))};xo.prototype.isDirty=function(){return this.isDirty_};xo.prototype.disposeInternal=function(){xo.superClass_.disposeInternal.call(this),goog.events.unlistenByKey(this.beforeUnloadListenereKey)};var Jr=xo;sync.view.PreventLeave=xo;goog.require("goog.events");namespace("sync.view");var Ys=function(t,o){this.layoutManager_=t,this.readOnlyStripeRenderer_=Ys.renderReadOnlyStripe_,this.roLock_=null,this.roStripe_=null,goog.events.listen(o,ue.EventTypes.READ_ONLY_STATUS_CHANGED,goog.bind(this.updateReadOnlyLock_,this))};Ys.renderReadOnlyStripe_=function(t,o){t.readOnly&&(o.textContent=t.message||tr(msgs.DOCUMENT_OPENED_AS_READ_ONLY_))};Ys.prototype.setStripeRenderer=function(t){this.readOnlyStripeRenderer_=t};Ys.prototype.updateReadOnlyLock_=function(t){if(this.roLock_||(this.roLock_=goog.dom.createDom("div",{className:"read-only-lock",title:tr(msgs.READ_ONLY_)})),t.isReadOnly){var o=this.layoutManager_.getTitleDecorator();goog.dom.insertChildAt(o,this.roLock_,0)}else goog.dom.removeNode(this.roLock_);var i=t.state;i.readOnly?(this.roStripe_||(this.roStripe_=this.layoutManager_.createEditorStripe(23),goog.dom.classlist.add(this.roStripe_,"flash-message-warn")),this.readOnlyStripeRenderer_.call(null,i,this.roStripe_)):this.roStripe_&&(this.readOnlyStripeRenderer_.call(null,i,this.roStripe_),this.layoutManager_.removeEditorStripe(this.roStripe_),this.roStripe_=null)};Ys.prototype.dispose=function(){this.roStripe_&&this.layoutManager_.removeEditorStripe(this.roStripe_),goog.dom.removeNode(this.roLock_)};var Ay=Ys;sync.view.ReadOnlyStateRenderer=Ys;namespace("sync.actions");var Jg=function(t,o){Hn.call(this,sync.rest.getRestApiUrl("RESTDocumentManager.downloadFile",{fileUrl:encodeURIComponent(t)}),o)};goog.inherits(Jg,Hn);var Oc=Jg;sync.actions.DownloadAction=Jg;namespace("sync.fileserver");var Qs=function(t,o){_.call(this,{displayName:tr(msgs.DISCONNECT_)}),this.editor=t,this.disconnectFromFileServer_=o};goog.inherits(Qs,_);Qs.prototype.getDialog=function(){var t=this.dialog_,o=goog.dom.createDom;t||(t=workspace.createDialog(),t.setTitle(tr(msgs.DISCONNECT_)),t.setButtonConfiguration([{key:"yes",caption:tr(msgs.DISCONNECT_)},{key:"no",caption:tr(msgs.CANCEL_)}]),this.dialog_=t),goog.dom.removeChildren(t.getElement());var i=this.editor&&this.editor.isDirty()?[o("br"),o("b","",tr(msgs.UNSAVED_CHANGES_WILL_BE_LOST_))]:null;return goog.dom.appendChild(t.getElement(),o("div","",o("div","",tr(msgs.DISCONNECT_CONFIRMATION_)+" ",i))),t};Qs.prototype.afterFileServerDisconnect_=function(t){t(),this.dialog_.hide(),this.editor&&(this.editor.setDirty(!1),sync.util.goToDashboard())};Qs.prototype.actionPerformed=function(t){var o=t||goog.nullFunction;this.dialog_=this.getDialog(),this.dialog_.onSelect(goog.bind(function(i,n){i==="yes"?(n.preventDefault(),this.disconnectFromFileServer_(goog.bind(this.afterFileServerDisconnect_,this,o))):o()},this)),this.dialog_.setPreferredSize(320,185),this.dialog_.show()};Qs.prototype.dispose=function(){this.dialog_&&this.dialog_.dispose()};var jp=Qs;sync.fileserver.DisconnectAction=Qs;namespace("sync.view");var nl=function(t,o){this.fileServerConnector_=t;var i=o.getUrl(),n=null,r=t.getRootURL();r&&i.indexOf(r)!==-1?n=r:(n=new E(i).getFolderUrl(),o.waitToLoad().then(goog.bind(function(){t.getFileServer().getUrlInfo(i,goog.bind(function(a,l){this.setRootUrl(a)},this),goog.bind(function(a){this.showErrorMessage(a)},this))},this))),sync.api.FileBrowsingDialog.call(this,{initialUrl:i,root:n,listFolder:t.getFileServer().listFiles});var s=this.getEventTarget();goog.events.listen(s,sync.api.FileBrowsingDialog.EventTypes.USER_ACTION_REQUIRED,goog.bind(this.onUserActionRequired_,this))};goog.inherits(nl,sync.api.FileBrowsingDialog);nl.prototype.renderRepoPreview=function(t){var o=this.fileServerConnector_.getFileServer().createRootUrlComponent(this.getRootUrl(),goog.bind(this.urlChangedCallback_,this));goog.dom.removeChildren(t),goog.dom.appendChild(t,o)};nl.prototype.urlChangedCallback_=function(t,o){this.setRootUrl(t),this.setUpTheDialog(o),this.refresh(),this.switchToRepoConfig(),this.switchToFileBrowsing()};nl.prototype.onUserActionRequired_=function(t){var o=t.message,i=o?o.message:null,n=o?o.url:null;this.fileServerConnector_.getFileServer().login(i,goog.bind(this.refresh,this),n)};var Iy=nl;sync.view.FileServerChooserDialog=nl;namespace("sync.actions");var mi=function(){_.call(this,{keyStrokeStr:"F1",displayName:tr(msgs.HELP_),description:tr(msgs.OPEN_USER_MANUAL_),smallIconClass:"Help16"})};goog.inherits(mi,_);mi.prototype.actionPerformed=function(t){sync.util.open(mi.getDocumentationIndexUrl()),t&&t()};mi.helpIndexUrl_=null;mi.setDocumentationIndexUrl=function(t){mi.helpIndexUrl_=t};mi.getDocumentationIndexUrl=function(){return mi.helpIndexUrl_||(mi.helpIndexUrl_=sync.util.help.getDocumentationUrl()),mi.helpIndexUrl_};var $r=mi;sync.actions.ShowHelp=mi;namespace("sync.editors");var rl=function(t,o){sync.api.EditingSupport.call(this,o),this.editor=t};goog.inherits(rl,sync.api.EditingSupport);rl.prototype.load=function(t,o,i){var n=this.editor.getUrl(),r="../rest/"+it+"/load/image-raw/?url="+encodeURIComponent(encodeURIComponent(n));return sync.react.render(sync.react.h("div",{className:"center-container image-editor"},sync.react.h("img",{src:r})),o),goog.Promise.resolve()};rl.prototype.getActionsManager=function(){return this.editor.getActionsManager()};rl.prototype.getApplicationToolbar=function(){var t=this.getActionsManager();t.registerAction("Author/Download",new Oc(this.editor.getUrl(),"")),t.registerAction("Author/ReportProblem",zo.getInstance()),t.registerAction("Author/Help",new $r);var o=new Be(t);return this.registerDisposable(o),o.config=new Co({toolbars:[{type:"list",name:"Builtin",displayName:tr(msgs.GENERAL_),children:[{type:"action",id:"Author/Download"},{type:"list",name:"More...",displayName:tr(msgs.MORE_ACTIONS_),iconDom:function(){var i=document.createElement("div");return goog.dom.classlist.add(i,"more"),i}(),children:[{type:"action",id:"Author/Help"},{type:"action",id:"Author/ReportProblem"}]}]}]}),o};var wy=rl;sync.editors.ImageEditingSupport=rl;namespace("sync.actions");var Vp=function(t){Yr.call(this,t,"M1 S"),this.editor=t};goog.inherits(Vp,Yr);Vp.prototype.save=function(){var t=sync.util.promise.promisify(this.editor.getContent,this.editor);return t().then(goog.bind(function(o){var i={url:encodeURIComponent(this.editor.getUrl()),content:o};return sync.rest.callAsync("RESTDocumentManager.saveContent",i)},this))};var Dy=Vp;sync.actions.SaveContentAction=Vp;namespace("sync.editors");var Ki=function(t,o){sync.api.EditingSupport.call(this,o),this.editor_=t,this.editor_.listen(sync.api.Editor.EventTypes.DIRTY_STATUS_CHANGED,goog.bind(function(i){this.isDirty=i.isDirty,this.isDirty||(this.latestSavedContent_=this.textArea_.value),this.editor_.getActionsManager().refreshActionsStatus()},this)),this.editor_.getReadOnlyStatus().listen(ue.EventTypes.READ_ONLY_STATUS_CHANGED,goog.bind(function(i){this.updateReadonlyStatus(i.isReadOnly)},this)),goog.events.listen(document.body,goog.events.EventType.KEYDOWN,this.handleKeyEvent_,!1,this),this.latestSavedContent_=null,this.textArea_=null};goog.inherits(Ki,sync.api.EditingSupport);Ki.prototype.registerActions_=function(t){var o=t.getActionsManager();o.registerAction("ReportProblem",zo.getInstance()),o.registerAction("Help",new $r),o.registerAction("Author/Save",new Dy(t))};Ki.prototype.focus=function(){this.textArea_.focus()};Ki.prototype.load=function(t,o,i){var n=goog.dom.createDom;if(goog.string.startsWith(t.contentType,"text/broken-xml")){var r=workspace.createEditorStripe(23);goog.dom.classlist.add(r,"flash-message-warn"),r.textContent=tr(msgs.INVALID_XML_OPENED_AS_PLAIN_TEXT_)}goog.dom.removeChildren(o);var s=t.document,a=new E(this.options.url).getScheme(),l=goog.string.startsWith(a,"file")||goog.string.contains(a,"git"),c=n("textarea",{className:"text-editing-support-text-area",value:s});this.textArea_=c,l||this.updateReadonlyStatus(!0),this.latestSavedContent_=c.value;var d=n("div","text-editing-support-container",c);return goog.dom.appendChild(o,n("div","text-editing-support-wrapper",d)),c.setSelectionRange(0,0),c.focus(),goog.events.listen(c,goog.events.EventType.INPUT,this.handleInputEvent_,!1,this),this.registerActions_(this.editor_),goog.Promise.resolve()};Ki.prototype.updateReadonlyStatus=function(t){this.textArea_.readOnly=t,goog.dom.classlist.enable(this.textArea_,"text-editing-support-text-area-readonly",t)};Ki.prototype.handleInputEvent_=function(t){setTimeout(goog.bind(function(){var o=this.latestSavedContent_!==this.textArea_.value;this.editor_.setDirty(o)},this),0)};Ki.prototype.getContent=function(t){var o=this.textArea_.value;t(null,o)};Ki.prototype.getApplicationToolbar=function(){var t=new Be(this.editor_.getActionsManager());return this.registerDisposable(t),t.config=new Co({toolbars:[{type:"list",name:"Builtin",displayName:tr(msgs.GENERAL_),children:[{type:"action",id:"Author/Save"},{type:"list",name:"More...",displayName:tr(msgs.MORE_ACTIONS_),iconDom:function(){return goog.dom.createDom("div","more")}(),children:[{type:"action",id:"Help"},{type:"action",id:"ReportProblem"}]}]}]}),t};Ki.prototype.handleKeyEvent_=function(t){var o="";(t.ctrlKey||t.metaKey)&&(o+="M1 "),o+=String.fromCharCode(t.keyCode);var i=this.editor_.getActionsManager().getActionByShortcut(o);i&&(t.preventDefault(),i.isEnabled()&&i.actionPerformed(function(){}))};var Ny=Ki;sync.editors.TextEditingSupport=Ki;namespace("sync.ui");var $g="sync-select";customElements.define($g,class extends HTMLElement{static get observedAttributes(){return["label","value","disabled"]}constructor(){super();let t=sync.ui.util.getGlobalId(),o=sync.ui.util.createElement;for(this.label_=o("label",{for:t,class:"sync-input__label"}),this.select_=o("select",{id:t,class:"sync-input__input"}),this.root_=o("div",{class:"sync-input"},[this.label_,this.select_]);this.childNodes.length;)this.firstChild instanceof HTMLOptionElement?this.select_.appendChild(this.firstChild):this.removeChild(this.firstChild)}connectedCallback(){super.appendChild(this.root_),goog.isDefAndNotNull(this.getAttribute("value"))&&this.setValue(this.getAttribute("value"))}attributeChangedCallback(t,o,i){let n=`set${goog.string.capitalize(t)}`;goog.isFunction(this[n])&&this[n](i,!1)}appendChild(t){t instanceof HTMLOptionElement&&this.select_.appendChild(t)}setLabel(t){this.label_.innerText=t}getLabel(){return this.label_.innerText}setValue(t){this.select_.value=t}getValue(){return this.select_.value}setDisabled(t,o=!0){t=sync.ui.util.attrBooleanValue(t),this.select_.disabled=t,o&&this.toggleAttribute("disabled",t)}isDisabled(){return this.select_.disabled}});var Pc=$g;sync.ui.Select=$g;namespace("sync.view");var Ht=function(t){_.call(this,{displayName:tr(msgs.PREFERENCES_FROM_DROPDOWN_),smallIconClass:"Preferences16"}),this.dialog_=null,this.options_=k.getInstance(),this.tagsModeSelect_=null,this.languageSelect_=null,this.spellCheckbox_=null,this.a11yCheckbox_=null,this.langWarning_=null,this.changeTrackingColorsSelect_=null,this.overrideOptions_=t};goog.inherits(Ht,_);Ht.NBSP=String.fromCharCode(160);Ht.prototype.getDialog_=function(){if(this.dialog_===null){var t=workspace.createDialog("settings-dialog");t.setTitle(tr(msgs.PREFERENCES_));var o=[{key:"apply",caption:tr(msgs.APPLY_)},{key:"cancel",caption:tr(msgs.CANCEL_)}];t.setButtonConfiguration(o);var i=t.getElement();this.addTagsModeControl_(i),this.addDisplayDensityControl_(i),this.addChangeTrackingColorModeControl_(i),this.addLanguageControl_(i),this.addSpellcheckerModeControl_(i),this.addA11yMode_(i),t.setPreferredSize(660,null),t.setResizable(!0),this.dialog_=t}else this.refreshPreferences_();return this.dialog_};Ht.prototype.addA11yMode_=function(t){var o=this.options_.getOption(S.ACCESSIBILITY_MODE);this.a11yCheckbox_=sync.ui.util.createElement(Kr,{id:"a11y-mode",checked:o==="true",label:tr(msgs.A11Y_SETTING_)}),goog.dom.append(t,this.a11yCheckbox_)};Ht.prototype.addTagsModeControl_=function(t){if(!this.overrideOptions_["tags-mode"]){var o=sync.ui.util.createElement,i=[],n=be.getAllActionsDescriptions();for(var r in n)i.push(o("option",{value:r},n[r]));this.tagsModeSelect_=o(Pc,{id:"settings-tags-display-mode",label:tr(msgs.TAGS_DISPLAY_MODE_),value:this.options_.getOption(S.SENTINELS_DISPLAY_MODE)||sync.options.ServerOptions.getServerOption(S.TAGS_MODE)},i),goog.dom.appendChild(t,this.tagsModeSelect_)}};Ht.prototype.addSpellcheckerModeControl_=function(t){var o=this.options_.getOption(S.SPELLCHECK_ENABLED);this.spellCheckbox_=sync.ui.util.createElement(Kr,{id:"settings-spellchecker-mode",checked:!o||o!=="false",label:tr(msgs.ENABLE_SPELLCHECKING_)}),goog.dom.append(t,this.spellCheckbox_)};Ht.prototype.addLanguageControl_=function(t){var o=sync.Translation.supportedLanguages;if(!sync.util.getURLParameter("lang")&&o&&o.length!==0){var i=sync.ui.util.createElement;this.languageSelect_=i(Pc,{id:"settings-language",label:tr(msgs.LANGUAGE_),value:window.lang},goog.array.map(o,n=>i("option",{value:n.code},n.description))),goog.dom.appendChild(t,this.languageSelect_),this.langWarning_=i("div",{class:"langWarning"},Ht.NBSP),goog.dom.appendChild(t,this.langWarning_),goog.events.listen(this.languageSelect_,goog.events.EventType.CHANGE,goog.bind(function(){var n=Ht.NBSP;this.languageSelect_.value!==this.options_.getOption(S.SELECTED_LANGUAGE)&&(n="("+tr(msgs.PAGE_RELOAD_REQUIRED_)+")"),this.langWarning_.textContent=n},this))}};Ht.prototype.addChangeTrackingColorModeControl_=function(t){var o=sync.ui.util.createElement,i="color.per.author";this.changeTrackingColorsSelect_=o(Pc,{label:tr(msgs.CHANGE_TRACKING_COLORS_),value:this.options_.getOption(S.CHANGE_TRACKING_COLORS,i)},[o("option",{value:i},tr(msgs.CHANGE_TRACKING_COLORS_ONE_PER_AUTHOR_)),o("option",{value:"color.per.changeType"},tr(msgs.CHANGE_TRACKING_COLORS_ONE_PER_CHANGE_TYPE_))]),goog.dom.appendChild(t,this.changeTrackingColorsSelect_)};Ht.prototype.addDisplayDensityControl_=function(t){var o=sync.ui.util.createElement;this.fontSizeSelect_=o(Pc,{label:tr(msgs.FONT_SIZE_),value:this.options_.getOption(S.DISPLAY_DENSITY,"medium")},[o("option",{value:"small"},tr(msgs.SMALL_)),o("option",{value:"medium"},tr(msgs.MEDIUM_)),o("option",{value:"large"},tr(msgs.LARGE_))]),goog.dom.appendChild(t,this.fontSizeSelect_)};Ht.prototype.onSelect_=function(t,o){o==="apply"&&(this.options_.setOption(S.SENTINELS_DISPLAY_MODE,this.tagsModeSelect_.getValue(),!0),this.options_.setOption(S.SPELLCHECK_ENABLED,this.spellCheckbox_.isChecked().toString(),!0),this.options_.setOption(S.ACCESSIBILITY_MODE,this.a11yCheckbox_.isChecked().toString(),!0),this.options_.setOption(S.CHANGE_TRACKING_COLORS,this.changeTrackingColorsSelect_.getValue(),!0),this.languageSelect_&&this.options_.setOption(S.SELECTED_LANGUAGE,this.languageSelect_.getValue(),!0),this.options_.setOption(S.DISPLAY_DENSITY,this.fontSizeSelect_.getValue(),!0)),t&&t()};Ht.prototype.actionPerformed=function(t){var o=this.getDialog_();o.show(),o.onSelect(goog.bind(this.onSelect_,this,t))};Ht.prototype.refreshPreferences_=function(){if(this.tagsModeSelect_&&this.tagsModeSelect_.setValue(this.options_.getOption(S.SENTINELS_DISPLAY_MODE)||be.PARTIAL_TAGS),this.languageSelect_&&(this.languageSelect_.setValue(window.lang),this.langWarning_.textContent=Ht.NBSP),this.spellCheckbox_){var t=this.options_.getOption(S.SPELLCHECK_ENABLED);this.spellCheckbox_.setChecked(t===null||t==="true")}this.a11yCheckbox_&&this.a11yCheckbox_.setChecked(this.options_.getOption(S.ACCESSIBILITY_MODE)==="true")};Ht.prototype.dispose=function(){this.dialog_&&this.dialog_.dispose()};var My=Ht;sync.view.Settings=Ht;goog.require("goog.Disposable");namespace("sync.support");var Js=function(t,o,i,n,r){this.workspaceState_=r,this.editorContentPromise_=goog.Promise.resolve(),this.backupDelay_=new goog.async.Delay(()=>{(t?t.isDirty():!0)&&this.createBackup_(n+".zip",o)},i,this),this.registerDisposable(this.backupDelay_),this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_),this.initListeners_(t,o)};goog.inherits(Js,goog.Disposable);Js.prototype.initListeners_=function(t,o){this.eventHandler_.listen(o,M.EventType.MODEL_CHANGED,function(){this.backupDelay_.startIfNotActive()}),t&&this.eventHandler_.listen(t,Jr.EventTypes.DIRTY_STATUS_CHANGED,function(i){i.isDirty||(this.backupDelay_.stop(),this.editorContentPromise_.cancel(),this.workspaceState_.setEditorBackup(null,null))})};Js.prototype.createBackup_=function(t,o){this.editorContentPromise_.cancel(),this.editorContentPromise_=o.getEditedDocumentsB64ContentZip().then(function(i){this.workspaceState_.setEditorBackup(t,i)}.bind(this)).thenCatch(function(i){i instanceof goog.Promise.CancellationError||console.error("Failed to get document content for backup.",i)}.bind(this))};Js.prototype.disposeInternal=function(){Js.superClass_.disposeInternal.call(this),this.editorContentPromise_.cancel(),this.workspaceState_.setEditorBackup(null,null)};var xy=Js;sync.support.EditingBackupSupport=Js;goog.require("goog.array");goog.require("goog.dom");goog.require("goog.dom.classlist");goog.require("goog.fx.DragDrop");goog.require("goog.fx.DragDropGroup");namespace("sync.table");sync.table.TableDragHandleItem=function(t,o){goog.fx.DragDropItem.call(this,t,o)};goog.inherits(sync.table.TableDragHandleItem,goog.fx.DragDropItem);sync.table.TableDragHandleItem.prototype.getDraggableElement=function(t){var o=sync.table.TableDragHandleItem.superClass_.getDraggableElement.call(this,t);return o&&goog.dom.classlist.contains(o,"handle-icn")&&(o=goog.dom.getParentElement(o)),o};sync.table.DragDropGroupCtrlAware=function(...t){goog.fx.DragDropGroup.apply(this,t)};goog.inherits(sync.table.DragDropGroupCtrlAware,goog.fx.DragDropGroup);sync.table.DragDropGroupCtrlAware.prototype.endDrag=function(t){return this.ctrlKey=t.browserEvent.ctrlKey,sync.table.DragDropGroupCtrlAware.superClass_.endDrag.call(this,t)};var tt=function(t,o,i,n){goog.Disposable.call(this),this.actionsManager_=t,this.container_=goog.dom.createDom("div",{className:"tds",unselectable:"on"}),this.selectionManager_=i,this.eventHandler_=new goog.events.EventHandler(this),this.docContainer=sync.util.getDocContainerAncestor(o),this.scrollEventTarget_=n,goog.dom.getParentElement(o).appendChild(this.container_)};goog.inherits(tt,goog.Disposable);tt.prototype.handleWidth=16;tt.prototype.targetTableClass="dhtt";tt.prototype.showHandle=function(t,o){if(!this.isDragInProgress()){this.hideHandles();var i=new sync.table.TableHandleContextData(o,t,this.docContainer);this.showVerticalHandle(i),this.showHorizontalHandle(i),this.table_&&this.table_!==o&&goog.dom.classlist.remove(this.table_,this.targetTableClass),this.table_=o,this.eventHandler_.listen(this.scrollEventTarget_,goog.events.EventType.SCROLL,goog.bind(this.hideHandles,this)),goog.dom.classlist.contains(o,this.targetTableClass)||goog.dom.classlist.add(o,this.targetTableClass)}};sync.table.TableHandleContextData=function(t,o,i){this.selection=o,o instanceof z?this.layout=o.getTableLayout():this.layout=new ps(t),this.table=t,this.tableRect=goog.style.getBounds(t),this.tableXmlElement=sync.model.XmlDom.getParentNode(t),this.tableXmlElementRect=goog.style.getBounds(this.tableXmlElement),this.docContainer=i,this.docContainerRect=goog.style.getBounds(i);var n=i.querySelector(".oxy-document");this.documentRect=goog.style.getBounds(n)};tt.prototype.handleMouseupCallback_=function(t,o,i,n){var r,s,a=o.layout.cellsMatrix;t?(r=a[i][0],s=a[n][a[n].length-1]):(r=a[0][i],s=a[a.length-1][n]);var l=new z(r,s);sync.select.setSelection(l)};tt.prototype.attachMouseEvents_=function(t,o,i,n,r){this.eventHandler_.listen(t,goog.events.EventType.MOUSEDOWN,function(s){s.preventDefault()},!0),this.eventHandler_.listen(t,goog.events.EventType.MOUSEUP,goog.bind(this.handleMouseupCallback_,this,o,i,n,r))};tt.prototype.showVerticalHandle=function(t){for(var o=ps.findRows(t.table),i=this.getSelectionStartEndElement_(t.selection),n=[],r,s,a=0;a<o.length;a++)n.push(goog.style.getBounds(o[a])),r!==void 0?goog.dom.contains(o[a],i.end)&&(s=a):goog.dom.contains(o[a],i.start)&&(r=a,s=a);this.showVerticalHandle_(t,o,n,r,s)};tt.prototype.showVerticalHandle_=function(t,o,i,n,r){if(!(n===0&&r===o.length-1)){var s=goog.dom.createDom,a=s("div",{className:"v",unselectable:"on"});this.verticalDragGroup_=new sync.table.DragDropGroupCtrlAware,this.verticalDropGroup_=new goog.fx.DragDropGroup,this.tableVerticalDropGroup_=new goog.fx.DragDropGroup;for(var l=n-100<0?0:n-100,c=r+100>o.length?o.length:r+100,d=l;d<c;d++){var g=o[d],m=i[d],v=d===n?i[r]:m,C=d===n,N=this.buildVerticalHandleItem_(t,m,v,C),D;d>=n&&d<=r?D=new sync.table.VerticalDragItemData(n,r,i[n],i[r]):(D=new sync.table.VerticalDragItemData(d,null,m,null),this.verticalDropGroup_.addItem(N,D),a.appendChild(N)),C&&(this.verticalDragGroup_.addDragDropItem(new sync.table.TableDragHandleItem(N,D)),a.appendChild(N),this.attachMouseEvents_(N,!0,t,n,r)),this.tableVerticalDropGroup_.addItem(g,D)}this.verticalDragGroup_.setSourceClass("draggable-item"),this.verticalDragGroup_.setDragClass("dragged-item"),this.verticalDragGroup_.addTarget(this.verticalDragGroup_),this.verticalDragGroup_.addTarget(this.verticalDropGroup_),this.verticalDragGroup_.addTarget(this.tableVerticalDropGroup_),this.verticalDragGroup_.setScrollTarget(t.docContainer),this.verticalDropGroup_.setScrollTarget(t.docContainer),this.tableVerticalDropGroup_.setScrollTarget(t.docContainer),this.verticalDragGroup_.init(),this.verticalDropGroup_.init(),this.tableVerticalDropGroup_.init(),this.verticalDragListener_=new sync.table.VerticalDragListener(this.actionsManager_,o,n,r,goog.bind(this.hideHandles,this)),this.verticalDragListener_.attach(this.verticalDragGroup_),this.appendVhRafId_&&cancelAnimationFrame(this.appendVhRafId_),this.setSelectionRafId_=requestAnimationFrame(goog.bind(function(){this.container_.appendChild(a),this.appendVhRafId_=null},this))}};tt.prototype.buildVerticalHandleItem_=function(t,o,i,n){var r=goog.dom.createDom,s=r("div",{unselectable:"on"}),a=this.getHeightToCover_(o,i),l=Math.max(o.left,t.tableXmlElementRect.left),c=l+t.docContainer.scrollLeft-this.handleWidth-t.docContainerRect.left,d=this.handleWidth;if(n||(c=c-2*this.handleWidth,d=d+2*this.handleWidth),goog.style.setStyle(s,{height:a+"px",position:"absolute",top:o.top-t.documentRect.top-.5+"px",left:c+"px",width:d+"px",maxWidth:d+"px"}),n){var g=r("div",{draggable:!1,className:"handle-icn v",unselectable:"on"});s.appendChild(g)}return s};tt.prototype.getSelectionStartEndElement_=function(t){var o,i;if(t.isEmpty()){var n=p.fromHTMLPosition(t.start).getContentInformation(),r=h.getInstance().getXmlNodeById(n.elementId);o=i=r}else if(t instanceof z){if(o=h.getInstance().getXmlNodeById(t.getAnchorCellId()),i=h.getInstance().getXmlNodeById(t.getTargetCellId()),t.isBackwards()){var s=o;o=i,i=s}}else{var a=p.fromHTMLPosition(t.start).getContentInformation(),l=p.fromHTMLPosition(t.end).getContentInformation();o=h.getInstance().getXmlNodeById(a.elementId),i=h.getInstance().getXmlNodeById(l.elementId)}return{start:o,end:i}};tt.prototype.getHeightToCover_=function(t,o){return o.top+o.height-t.top-1};tt.prototype.isDragInProgress=function(){return!!this.verticalDragListener_&&this.verticalDragListener_.isDragInProgress||this.horizontalDragListener_&&this.horizontalDragListener_.isDragInProgress};tt.prototype.hideHandles=function(){goog.dom.removeChildren(this.container_),this.eventHandler_.removeAll(),this.verticalDragListener_=null,this.verticalDragGroup_&&this.verticalDragGroup_.dispose(),this.verticalDropGroup_&&this.verticalDropGroup_.dispose(),this.tableVerticalDropGroup_&&this.tableVerticalDropGroup_.dispose(),this.horizontalDragListener_=null,this.horizontalDragGroup_&&this.horizontalDragGroup_.dispose(),this.horizontalDropGroup_&&this.horizontalDropGroup_.dispose(),this.tableHorizontalDropGroup_&&this.tableHorizontalDropGroup_.dispose()};tt.prototype.showHorizontalHandle=function(t){var o=t.selection,i,n;if(o instanceof z)i=o.getAnchorCellId(),n=o.getTargetCellId();else{var r=o.start.toRelativeContentPosition(),s=h.getInstance().getXmlNodeById(r.nodeId),a=sync.util.TableUtil.getSurroundingCellElement(s);if(a){var l=o.end.toRelativeContentPosition(),c=h.getInstance().getXmlNodeById(l.nodeId),d=sync.util.TableUtil.getSurroundingCellElement(c);(o.isEmpty()||a===d)&&(i=n=h.getIdOfXmlNode(a))}}if(!!i){var g=t.layout.getStartIndex(i),m=t.layout.getStartIndex(n),v=g.column;if(v===m.column){var C,N;g.row>m.row?(N=g.row,C=m.row):(C=g.row,N=m.row),this.showHorizontalHandle_(t,v,C,N)}}};tt.prototype.showHorizontalHandle_=function(t,o,i,n){var r=t.layout.cellsMatrix,s=r.length,a=r[0].length,l=this.inspectLayout_(t.layout);if(!(a===1||!l.isValidLayout)){this.eventHandler_.listenWithScope(this.scrollEventTarget_,goog.events.EventType.SCROLL,this.hideHandles,!1,this);var c=goog.dom.createDom("div",{className:"h",unselectable:"on"});this.horizontalDragGroup_=new sync.table.DragDropGroupCtrlAware,this.horizontalDropGroup_=new goog.fx.DragDropGroup,this.tableHorizontalDropGroup_=new goog.fx.DragDropGroup;for(var d=[],g=0;g<a;g++){var m=h.getInstance().getXmlNodeById(r[l.rowWithoutSpan][g]);d.push(goog.style.getBounds(m))}var v=i-100<0?0:i-100,C=n+100>s?s:n+100;for(g=0;g<a;g++){var N=g===o,D=this.buildHorizontalHandleItem_(d[g],t,N),H=new sync.table.HorizontalDragItemData(t.layout,g,d[g]);N&&(this.horizontalDragGroup_.addDragDropItem(new sync.table.TableDragHandleItem(D,H)),this.attachMouseEvents_(D,!1,t,o,o));for(var ne=v;ne<C;ne++)g!==o&&this.horizontalDropGroup_.addItem(D,H),m=h.getInstance().getXmlNodeById(r[ne][g]),!!m&&this.tableHorizontalDropGroup_.addItem(m,H);c.appendChild(D)}this.horizontalDragGroup_.setSourceClass("draggable-item"),this.horizontalDragGroup_.setDragClass("dragged-item"),this.horizontalDragGroup_.addTarget(this.horizontalDragGroup_),this.horizontalDragGroup_.addTarget(this.horizontalDropGroup_),this.horizontalDragGroup_.addTarget(this.tableHorizontalDropGroup_),this.horizontalDragGroup_.setScrollTarget(t.docContainer),this.horizontalDropGroup_.setScrollTarget(t.docContainer),this.tableHorizontalDropGroup_.setScrollTarget(t.docContainer),this.horizontalDragGroup_.init(),this.horizontalDropGroup_.init(),this.tableHorizontalDropGroup_.init(),this.horizontalDragListener_=new sync.table.HorizontalDragListener(this.actionsManager_,t.layout,o,goog.bind(this.hideHandles,this)),this.horizontalDragListener_.attach(this.horizontalDragGroup_),this.appendHhRafId_&&cancelAnimationFrame(this.appendHhRafId_),this.appendHhRafId_=requestAnimationFrame(goog.bind(function(){this.container_.appendChild(c),this.appendHhRafId_=null},this))}};tt.prototype.buildHorizontalHandleItem_=function(t,o,i){var n=goog.dom.createDom,r=o.tableRect.top-o.documentRect.top-this.handleWidth+"px",s=n("div",{unselectable:"on"}),a=this.computeLeftAndWidth_(t,o);if(goog.style.setStyle(s,{height:this.handleWidth+"px",position:"absolute",top:r,left:a.left+"px",width:a.width+"px",maxWidth:a.width+"px"}),i){var l=n("div",{draggable:!1,className:"handle-icn h",unselectable:"on"});s.appendChild(l)}return s};tt.prototype.inspectLayout_=function(t){for(var o={isValidLayout:!0,rowWithoutSpan:0},i=t.cellsMatrix,n=i[0].length,r=i.length,s=0;s<r;s++){if(n!==i[s].length){o.isValidLayout=!1;break}for(var a=!0,l=0;l<n;l++)if(l!==0&&i[s][l-1]===i[s][l]){a=!1;break}a&&(o.rowWithoutSpan=s)}return o};tt.prototype.computeLeftAndWidth_=function(t,o){var i=t.left;i<o.tableXmlElementRect.left&&(i=o.tableXmlElementRect.left);var n=t.left+t.width,r=n-i-1;return i+r>o.tableXmlElementRect.left+o.tableXmlElementRect.width&&(r=o.tableXmlElementRect.left+o.tableXmlElementRect.width-i),i+=o.docContainer.scrollLeft,i-=o.docContainerRect.left,{left:i,width:r}};tt.prototype.disposeInternal=function(){tt.superClass_.disposeInternal.call(this),goog.dom.removeChildren(this.container_)};sync.table.HorizontalDragItemData=function(t,o,i){this.layout=t,this.columnIndex=o,this.middle=i.left+i.width/2};sync.table.HorizontalDragListener=function(t,o,i,n){this.actionsManager_=t,this.layout_=o,this.draggedColumnIndex_=i,this.dropCallback_=n};sync.table.HorizontalDragListener.prototype.attach=function(t){goog.events.listen(t,"dragstart",goog.bind(this.dragStart_,this)),goog.events.listen(t,"dragout",goog.bind(this.dragOut_,this)),goog.events.listen(t,"drag",goog.bind(this.drag_,this)),goog.events.listen(t,"dragend",goog.bind(this.dragEnd_,this))};sync.table.HorizontalDragListener.prototype.performMoveOrCopy_=function(t,o,i){this.actionsManager_.invokeOperation("ro.sync.ecss.webapp.actions.TableMoveOrCopyColumnOperation",{sourceCells:this.sourceCellsIds.toString(),targetElement:o,targetPosition:t?"after":"before",move:i},this.dropCallback_)};sync.table.HorizontalDragListener.prototype.dragStart_=function(){this.isDragInProgress=!0,this.sourceCellsIds=[];for(var t=0;t<this.layout_.cellsMatrix.length;t++){var o=this.layout_.cellsMatrix[t][this.draggedColumnIndex_];goog.array.contains(this.sourceCellsIds,o)||this.sourceCellsIds.push(o)}this.markDraggedColumns_(!0)};sync.table.HorizontalDragListener.prototype.drag_=function(t){if(this.dragOccurred_=!0,!!t.dropTargetItem){var o=t.dropTargetItem.data;this.after_=t.clientX>o.middle,this.markDrop_(o.columnIndex,this.after_)}};sync.table.HorizontalDragListener.prototype.dragOut_=function(){this.dragOccurred_=!1,setTimeout(setTimeout(function(){this.dragOccurred_||this.markDrop_(null,null)}.bind(this)))};sync.table.HorizontalDragListener.prototype.dragEnd_=function(t){if(this.isDragInProgress=!1,this.markDrop_(null,null),this.markDraggedColumns_(!1),this.dropCallback_(),!!t.dropTargetItem){var o=t.dropTargetItem.data,i=this.layout_.cellsMatrix[0][o.columnIndex];this.performMoveOrCopy_(this.after_,i,!t.dragSource.ctrlKey),this.sourceCellsIds=null}};sync.table.HorizontalDragListener.prototype.markDraggedColumns_=function(t){for(var o=0;o<this.sourceCellsIds.length;o++){var i=this.sourceCellsIds[o],n=h.getInstance().getXmlNodeById(i);!n||(t?goog.dom.classlist.add(n,"dragged"):goog.dom.classlist.remove(n,"dragged"))}};sync.table.HorizontalDragListener.prototype.markDrop_=function(t,o){for(var i=0;i<this.layout_.cellsMatrix.length;i++)for(var n=0;n<this.layout_.cellsMatrix[0].length;n++){var r=this.layout_.cellsMatrix[i][n],s=h.getInstance().getXmlNodeById(r);if(!!s&&(goog.dom.classlist.remove(s,"drop-end"),goog.dom.classlist.remove(s,"drop-start"),n===t)){var a;o?a="drop-end":a="drop-start",goog.dom.classlist.add(s,a)}}};sync.table.VerticalDragItemData=function(t,o,i,n){this.rowIndex_=t,this.lastRowIndex_=o,this.middle=i.top+i.height/2,n&&(this.middle=this.middle+(n.top-i.top)/2)};sync.table.VerticalDragListener=function(t,o,i,n,r){this.actionsManager_=t,this.rows_=o,this.firstDraggedRowIndex_=i,this.lastDraggedRowIndex_=n,this.dropCallback_=r};sync.table.VerticalDragListener.prototype.attach=function(t){goog.events.listen(t,"dragstart",goog.bind(this.dragStart_,this)),goog.events.listen(t,"dragout",goog.bind(this.dragOut_,this)),goog.events.listen(t,"drag",goog.bind(this.drag_,this)),goog.events.listen(t,"dragend",goog.bind(this.dragEnd_,this))};sync.table.VerticalDragListener.prototype.performMoveOrCopy_=function(t,o,i,n,r){this.actionsManager_.invokeOperation("ro.sync.ecss.webapp.actions.TableMoveOrCopyRowsOperation",{startElement:h.getIdOfXmlNode(t),endElement:h.getIdOfXmlNode(o),targetElement:h.getIdOfXmlNode(n),targetPosition:i?"after":"before",move:r},this.dropCallback_)};sync.table.VerticalDragListener.prototype.dragStart_=function(t){this.isDragInProgress=!0;var o=t.dragSourceItem.data;this.sourceStart=this.rows_[o.rowIndex_],this.sourceEnd=this.rows_[o.lastRowIndex_?o.lastRowIndex_:o.rowIndex_],this.markDraggedRows_(!0)};sync.table.VerticalDragListener.prototype.drag_=function(t){if(this.dragOccurred_=!0,!!t.dropTargetItem){var o=t.dropTargetItem.data;if(t.clientY>o.middle){var i=o.lastRowIndex_?o.lastRowIndex_:o.rowIndex_;this.after=!0,this.markDrop_(i,!0)}else this.after=!1,this.markDrop_(o.rowIndex_,!1)}};sync.table.VerticalDragListener.prototype.dragOut_=function(){this.dragOccurred_=!1,setTimeout(setTimeout(function(){this.dragOccurred_||this.markDrop_(null,null)}.bind(this)))};sync.table.VerticalDragListener.prototype.dragEnd_=function(t){if(this.isDragInProgress=!1,this.markDrop_(null,null),this.markDraggedRows_(!1),this.dropCallback_(),!!t.dropTargetItem){var o=t.dropTargetItem.data,i=this.rows_[this.after&&o.lastRowIndex_?o.lastRowIndex_:o.rowIndex_],n=!t.dragSource||!t.dragSource.ctrlKey;this.performMoveOrCopy_(this.sourceStart,this.sourceEnd,this.after,i,n),this.rows_=null}};sync.table.VerticalDragListener.prototype.markDraggedRows_=function(t){for(var o=this.firstDraggedRowIndex_;o<=this.lastDraggedRowIndex_;o++)t?goog.dom.classlist.add(this.rows_[o],"dragged"):goog.dom.classlist.remove(this.rows_[o],"dragged")};sync.table.VerticalDragListener.prototype.markDrop_=function(t,o){var i,n="drop-bottom";t!==null&&(o?i=t:t===0?(i=0,n="drop-top"):i=t-1);for(var r=0;r<this.rows_.length;r++)goog.dom.classlist.remove(this.rows_[r],"drop-bottom"),goog.dom.classlist.remove(this.rows_[r],"drop-top"),r===i&&goog.dom.classlist.add(this.rows_[r],n)};var Ry=tt;sync.table.TableDragHandle=tt;goog.require("goog.dom.classlist");goog.require("goog.dom.BufferedViewportSizeMonitor");goog.require("goog.dom.ViewportSizeMonitor");namespace("sync.table");var Ro=function(t,o,i,n,r,s){goog.Disposable.call(this),this.selectionManager_=t,this.dragSupport_=new Ry(o,i.getDocumentHtmlNode(),t,s),this.registerDisposable(this.dragSupport_),this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_),this.controller_=i,this.layoutManager_=n,r.isReadOnly()||this.attach(),this.roListenterKey=goog.events.listen(r,ue.EventTypes.READ_ONLY_STATUS_CHANGED,goog.bind(this.readOnlyStatusChangedCallback_,this))};goog.inherits(Ro,goog.Disposable);Ro.prototype.readOnlyStatusChangedCallback_=function(t){t.isReadOnly?this.datach():this.attach()};Ro.prototype.attach=function(){var t=goog.dom.ViewportSizeMonitor.getInstanceForWindow();this.bufferedViewportMonitor=new goog.dom.BufferedViewportSizeMonitor(t,100),this.registerDisposable(this.bufferedViewportMonitor);var o=goog.bind(this.uninstallDragDropSupport_,this),i=new goog.async.Throttle(goog.bind(this.selectionChanged_,this),150),n=goog.bind(i.fire,i);this.defuseSelectionChangedThrottle_=goog.bind(i.stop,i);var r=this.controller_.getDocumentHtmlNode(),s=goog.events.EventType,a=this;this.eventHandler_.listen(r,goog.events.EventType.FOCUS,n).listen(this.controller_,M.EventType.MODEL_CHANGED,goog.bind(this.modelChanged_,this)).listen(r,goog.events.EventType.CLICK,n).listen(this.bufferedViewportMonitor,s.RESIZE,o).listen(r,goog.events.EventType.BLUR,function(){!a.mouseDownTick_&&o()},!0).listen(this.dragSupport_.container_,goog.events.EventType.MOUSEDOWN,function(){a.mouseDownTick_=!0,setTimeout(function(){a.mouseDownTick_=!1})},!0).listen(this.layoutManager_,Ge.LAYOUT_CHANGED,o),goog.userAgent.product.SAFARI&&this.eventHandler_.listen(document.body,s.SELECTSTART,function(l){var c=a.dragSupport_.isDragInProgress();(c||goog.dom.isElement(l.target)&&l.target.getAttribute("unselectable")==="on")&&(l.preventDefault(),l.stopPropagation())},!0),goog.userAgent.product.EDGE?this.eventHandler_.listen(this.selectionManager_,sync.api.SelectionManager.EventType.SELECTION_CHANGED,function(){setTimeout(function(){n()},100)}):this.eventHandler_.listen(this.selectionManager_,sync.api.SelectionManager.EventType.SELECTION_CHANGED,n)};Ro.prototype.datach=function(){this.uninstallDragDropSupport_(),this.eventHandler_.removeAll()};Ro.prototype.selectionChanged_=function(){this.isDisposed()||this.isSelectionChangeIgnored_||this.maybeShowHandles_(this.selectionManager_.getSelection())};Ro.prototype.maybeShowHandles_=function(t){if(sync.util.isInReadOnlyContent.apply(t)){this.uninstallDragDropSupport_();return}var o=p.fromHTMLPosition(t.focus).getContentInformation(),i=h.getInstance().getXmlNodeById(o.elementId),n=sync.util.TableUtil.getSurroundingTableElement(i);n?this.installDragDropSupport_(t,n):this.uninstallDragDropSupport_()};Ro.prototype.modelChanged_=function(t){if(this.defuseSelectionChangedThrottle_(),this.ignoreNextTickSelectionChange(),Ne.of(t.docUpdate).hasContentChanges())if(t.isBackgroundSync){let i=va(t.docUpdate.selection);this.maybeShowHandles_(i.restore())}else this.uninstallDragDropSupport_()};Ro.prototype.ignoreNextTickSelectionChange=function(){this.isSelectionChangeIgnored_=!0,setTimeout(function(){this.isSelectionChangeIgnored_=!1}.bind(this),0)};Ro.prototype.installDragDropSupport_=function(t,o){this.isVisible_=!0,this.dragSupport_.showHandle(t,o)};Ro.prototype.uninstallDragDropSupport_=function(){this.isVisible_&&(this.isVisible_=!1,this.dragSupport_.hideHandles())};Ro.prototype.disposeInternal=function(){Ro.superClass_.disposeInternal.call(this),goog.events.unlistenByKey(this.roListenterKey)};var Oy=Ro;sync.table.TableDragHandleInstaller=Ro;goog.require("goog.events");goog.require("goog.events.EventTarget");namespace("sync.view");var Zn=function(t){goog.events.EventTarget.call(this);var o=goog.events.EventType;this.eventHandler_=new goog.events.EventHandler(this).listen(t,o.TOUCHSTART,this.handleTouchStart_,!0).listen(t,[o.TOUCHMOVE,o.TOUCHEND],this.longtouchCancel_,!0)};goog.inherits(Zn,goog.events.EventTarget);Zn.EventType={LONGTOUCH:"longtouch"};sync.view.LongTouchEvent=function(){};sync.view.LongTouchEvent.prototype.type=Zn.EventType.LONGTOUCH;Zn.prototype.delay=700;Zn.prototype.disposeInternal=function(){this.eventHandler_.removeAll()};Zn.prototype.handleTouchStart_=function(t){var o=this;this.timer=goog.Timer.callOnce(function(){var i=new sync.view.LongTouchEvent;o.dispatchEvent(i)},this.delay)};Zn.prototype.longtouchCancel_=function(t){this.timer&&(goog.Timer.clear(this.timer),this.timer=null)};var Zg=Zn;sync.view.LongTouchHandler=Zn;goog.require("goog.dom.classlist");goog.require("goog.events");namespace("sync.ctrl");var fe=function(t,o,i,n){this.markersModel=t,this.viewportScroller=o,this.selectionView=i,this.selectionManager_=n,this.eventHandler=new goog.events.EventHandler(this),this.shouldListenForSelectionChanges_=!0};fe.prototype.setGuidingArrowRenderer=function(t){this.elementsConnectorRenderer_=t};fe.prototype.install=function(t,o){t.listen(ft.EventTypes.EDIT_MODE_CHANGED,i=>this.attach(o,i.editMode)),this.attach(o,t.isEditMode())};fe.prototype.modelToView_=function(t){var o=[],i=this.markersModel.getAllChunksForMarker(t);return i.forEach(n=>o.push(n)),o};fe.prototype.viewToModel=function(t){return goog.dom.dataset.get(t,"markerId")};fe.prototype.getMarkerContent_=function(t){for(;this.isMarkerSpan_(t);)t=t.childNodes[0];return t};fe.prototype.isMarkerSpan_=function(t){return goog.dom.isElement(t)&&goog.dom.classlist.contains(t,"oxy-marker")&&t.childNodes.length===1};fe.prototype.attach=function(t,o){this.attached_&&this.detach(),this.isEditMode_=o,this.selectInitialMarker_();var i=R.SelectionEventType;this.eventHandler.listenWithScope(this.markersModel.getSelectionModel(),i.MARKER_SELECTED,this.highlightSelectedMarker_,!0,this);var n=R.ModelEventType;o?(this.eventHandler.listenWithScope(this.selectionManager_,sync.api.SelectionManager.EventType.SELECTION_CHANGED,this.handleSelectionChanged_,!0,this),this.eventHandler.listenWithScope(this.markersModel,n.MARKER_ADDED,this.recheckSelectionAsync_,!0,this)):(this.eventHandler.listenWithScope(this.markersModel.getSelectionModel(),i.MARKER_UNSELECTED,this.markerUnselected_,!0,this),this.longTouchHandler_=new Zg(t),this.eventHandler.listen(this.longTouchHandler_,Zg.EventType.LONGTOUCH,goog.bind(this.markersModel.getSelectionModel().selectMarker,this.markersModel.getSelectionModel(),null)),this.eventHandler.listenWithScope(this.markersModel,n.MARKER_ADDED,this.selectAddedComment_,!0,this),this.eventHandler.listenWithScope(t,goog.events.EventType.CLICK,this.handleReviewModeClick_,!0,this)),this.attached_=!0};fe.prototype.selectInitialMarker_=function(){var t=this.markersModel.getSelectionModel().getSelectedMarker();t!=null&&(this.highlightSelectedMarker_(new R(t,R.SelectionEventType.MARKER_SELECTED,void 0,void 0,void 0,!0,!1)),this.elementsConnectorRenderer_.ignoreFirstSelectionEvent())};fe.prototype.highlightSelectedMarker_=function(t){this.caretTriggeredMakerSelection_||(this.selectMarker_(t.id,t.useNativeSelection),t.focus&&this.renderSelectedReviewItemConnector_(t.id))};fe.prototype.selectMarker_=function(t,o){this.isEditMode_?this.selectMarkerInEditMode_(t,o):this.selectMarkerInReviewMode_(t)};fe.prototype.detach=function(){this.markersModel.getSelectionModel().selectMarker(null),this.longTouchHandler_&&(this.longTouchHandler_.dispose(),this.longTouchHandler_=null),this.eventHandler.removeAll()};fe.prototype.selectAddedComment_=function(t){if(!t.refreshing){var o=this.markersModel.getMarker(t.id);o.getType()===Se.Type.COMMENT&&setTimeout(goog.bind(function(){this.markersModel.getSelectionModel().selectMarker(t.id)},this),0)}};fe.prototype.getSelectedMarkers_=function(t){var o=null,i=[];if(t){var n=t.focus.toRelativeContentPosition();i=this.markersModel.getAllMarkersAtPosition(n),i.length&&(o=i[0])}return{mainMarker:o,allMarkers:i}};fe.prototype.getMarkerAncestor=function(t){var o=goog.dom.getAncestorByClass(t,"oxy-marker");return o};fe.prototype.handleSelectionChanged_=function(){if(!!this.shouldListenForSelectionChanges_){var t=this.selectionManager_.getSelection(),o=this.getSelectedMarkers_(t);this.selectMarkersByCaret_(o)}};fe.prototype.recheckSelectionAsync_=function(){setTimeout(goog.bind(function(){if(this.markersModel.getSelectionModel().getSelectedMarker()===null){var t=this.selectionManager_.getSelection(),o=this.getSelectedMarkers_(t);this.selectMarkersByCaret_(o)}},this),0)};fe.prototype.selectMarkersByCaret_=function(t){this.caretTriggeredMakerSelection_=!0,this.markersModel.getSelectionModel().selectMarker(t.mainMarker),this.markersModel.getSelectionModel().saveAllSelectedMarkers(t.allMarkers),this.caretTriggeredMakerSelection_=!1};fe.prototype.handleReviewModeClick_=function(t){var o=this.getMarkerAncestor(t.target),i=!1;if(o){var n=this.selectionManager_.getSelection();if(!n||n.isEmpty()){var r=goog.dom.dataset.get(o,"markerId");this.markersModel.getSelectionModel().selectMarker(r);var s=this.markersModel.getAllMarkersIntersectingEndpoints(r);this.markersModel.getSelectionModel().saveAllSelectedMarkers(s),i=!0}}i||this.markersModel.getSelectionModel().selectMarker(null)};fe.prototype.selectMarkerInReviewMode_=function(t){var o=this.markersModel.getMarker(t);if(!(!o||o.isAttributeChange())){var i=this.modelToView_(t);i.filter(n=>this.isMarkerSpan_(n)).forEach(n=>this.selectMarkerSpan_(n)),this.viewportScroller.scrollIntoView(i),this.selectionView.clearSelection()}};fe.prototype.selectMarkerSpan_=function(t){var o=this.getMarkerContent_(t),i=o.parentNode;goog.dom.removeChildren(i);var n=goog.dom.createDom("span",{class:"oxy-marker-selected"},o);goog.dom.appendChild(i,n)};fe.prototype.markerUnselected_=function(t){var o=this.markersModel.getMarker(t.id);if(!(!o||o.isAttributeChange())){var i=this.modelToView_(t.id);i.filter(n=>this.isMarkerSpan_(n)).forEach(n=>this.unselectMarkerSpan_(n))}};fe.prototype.unselectMarkerSpan_=function(t){var o=this.getMarkerContent_(t);if(goog.dom.isElement(o)&&goog.dom.classlist.contains(o,"oxy-marker-selected")){var i=this.selectionManager_.getSelection(),n=i&&i.save();goog.dom.flattenElement(o);var r=n&&n.restore();r&&sync.select.setSelection(r)}};fe.prototype.getNextMarker_=function(t){var o=this.markersModel.getSelectionModel().getSelectedMarker(),i=this.markersModel.getNextMarker(t,o);if(i===-1){var n=this.selectionManager_.getSelection(),r=this.getFirstChunksList(),s;n?s=sync.view.UIUtil.getFirstAfterCaret(n.end,r):s=this.viewportScroller.getFirst(r),i=this.viewToModel(s),t&&(i=this.markersModel.getNextMarker(!0,i))}return i};fe.prototype.getFirstChunksList=function(){var t=[],o=this.markersModel.getMarkersInOrder();return o.forEach(i=>{var n=this.modelToView_(i);n.length>0&&t.push(n[0])}),t};fe.prototype.renderSelectedReviewItemConnector_=function(t){if(this.elementsConnectorRenderer_){var o=goog.bind(function(){var i=this.modelToView_(t);i.length>0&&this.elementsConnectorRenderer_.paintConnector(goog.dom.getElementByClass("review-panel-item-selected"),i[0])},this);setTimeout(o,150),setTimeout(o,350)}};fe.prototype.selectMarkerInEditMode_=function(t,o){var i=this.modelToView_(t);if(i.length>0){if(this.shouldListenForSelectionChanges_=!1,o){var n=this.getMarkerSelection_(i);this.selectionManager_.setSelection(n)}else this.selectionManager_.setFakeSelectionOnChunks(i);setTimeout(goog.bind(function(){this.shouldListenForSelectionChanges_=!0},this),0),this.viewportScroller.scrollIntoView(i)}};fe.prototype.getMarkerSelection_=function(t){var o=this.getMarkerContent_(t[0]),i=o.parentNode,n=sync.util.indexInParent(o),r=this.getMarkerContent_(t[t.length-1]),s=r.parentNode,a=sync.util.indexInParent(r)+1,l=goog.dom.Range.createFromNodes(i,n,s,a);return new sync.select.Selection(new T(l.getStartNode(),l.getStartOffset()),new T(l.getEndNode(),l.getEndOffset()),new T(l.getAnchorNode(),l.getAnchorOffset()),new T(l.getFocusNode(),l.getFocusOffset()))};var Py=fe;sync.ctrl.MarkerSelection=fe;goog.require("goog.dom");goog.require("goog.dom.classlist");goog.require("goog.dom.dataset");goog.require("goog.events.EventTarget");goog.require("goog.structs.Map");namespace("sync.model");var Gi=function(){goog.events.EventTarget.call(this),this.clearErrorList_(),this.severityOrder_=["info","warning","error"]};goog.inherits(Gi,goog.events.EventTarget);Gi.EventType={MODEL_CHANGED:"model_changed"};sync.model.ValidationErrorEvent=function(t,o,i){this.errors=t,this.complete=o,this.type=i};Gi.prototype.setErrors=function(t,o){this.clearErrorList_();for(var i=0;i<t.length;i++)for(var n=t[i].nodeIds||["-1"],r=0;r<n.length;r++){var s=n[r]+"",a=this.errorsByNodeId_.get(s);a=a||[],a.push(t[i]),this.errorsByNodeId_.set(s,a)}this.dispatchEvent(new sync.model.ValidationErrorEvent(t,o,Gi.EventType.MODEL_CHANGED))};Gi.prototype.clearErrorList_=function(){this.errorsByNodeId_=new goog.structs.Map;var t=[];this.dispatchEvent(new sync.model.ValidationErrorEvent(t,Gi.EventType.MODEL_CHANGED))};Gi.prototype.getErrorsByNodeId_=function(t){return this.errorsByNodeId_.get(t)};Gi.prototype.getNodesInError=function(){return this.errorsByNodeId_.getKeys()};Gi.prototype.getMostImportantError=function(t){var o=this.getErrorsByNodeId_(t),i=null;if(o&&o.length){i=o[0];for(var n=1;n<o.length;n++)this.severityOrder_.indexOf(i.severity)<this.severityOrder_.indexOf(o[n].severity)&&(i=o[n])}return i};var sl=Gi;sync.model.ValidationErrorsModel=Gi;goog.require("goog.async.Delay");goog.require("goog.events");namespace("sync.ctrl");var Qt=function(t,o){this.controller_=t,this.errorsModel_=o,this.documentNode_=sync.util.getDocDomHelper().getDocument(),this.validationDelay_=new goog.async.Delay(this.startAutomaticValidation_,Qt.VALIDATION_DELAY,this),this.resultsCheckDelay_=new goog.Delay(this.checkValidationResults_,Qt.RESULTS_POLLING_DELAY,this),goog.events.listen(this.controller_,M.EventType.MODEL_CHANGED,this.scheduleAutomaticValidation,!0,this)};goog.inherits(Qt,goog.Disposable);Qt.VALIDATION_DELAY=1e3;Qt.RESULTS_POLLING_DELAY=1e3;Qt.prototype.scheduleAutomaticValidation=function(t){t&&(!t.docUpdate.isSerializedContentModified||t.isClientSide)||this.validationDelay_.start()};Qt.prototype.startAutomaticValidation_=function(){sync.rest.callAsync("AuthorDocumentAsyncValidator.schedule",{id:this.controller_.docId}).then(goog.bind(this.scheduleCheckValidationResults_,this)).thenCatch(sync.util.error.logError)};Qt.prototype.scheduleCheckValidationResults_=function(){this.resultsCheckDelay_.start()};Qt.prototype.checkValidationResults_=function(){sync.rest.callAsync("AuthorDocumentAsyncValidator.getValidationResults",{id:this.controller_.docId}).then(goog.bind(this.validationResultsCallback_,this)).thenCatch(sync.util.error.logError)};Qt.prototype.validationResultsCallback_=function(t){goog.isObject(t)?this.markValidationProblems_(t.errors,t.complete):this.scheduleCheckValidationResults_()};Qt.prototype.markValidationProblems_=function(t,o){this.clearValidationMarkers_(),this.errorsModel_.setErrors(t,o);for(var i=this.errorsModel_.getNodesInError(),n=0;n<i.length;n++){var r=i[n],s=this.errorsModel_.getMostImportantError(r);if(s&&r!=="-1"){var a=h.getInstance().getXmlNodeById(r);a&&this.markValidationProblem(a,s)}}};Qt.prototype.markValidationProblem=function(t,o){var i=goog.dom.classlist,n=o.severity;n.indexOf("error")!==-1?i.add(t,"validation-error"):n==="warning"?i.add(t,"validation-warning"):n==="info"&&i.add(t,"validation-info"),goog.dom.dataset.set(t,"startPos",o.startPosition),goog.dom.dataset.set(t,"endPos",o.endPosition)};Qt.prototype.clearValidationMarkers_=function(){for(var t=this.documentNode_.querySelectorAll(".validation-error, .validation-warning, .validation-info"),o=["validation-error","validation-warning","validation-info"],i=0;i<t.length;i++)goog.dom.classlist.removeAll(t[i],o),goog.dom.dataset.remove(t[i],"startPos"),goog.dom.dataset.remove(t[i],"endPos")};Qt.prototype.disposeInternal=function(){this.resultsCheckDelay_.dispose(),this.validationDelay_.dispose(),Qt.superClass_.disposeInternal.call(this)};var ky=Qt;sync.ctrl.ValidationController=Qt;goog.require("goog.dom.dataset");goog.require("goog.structs.Map");namespace("sync.ctrl");var Wp=function(t,o){pe.call(this),this.validationErrorsModel_=o,this.validator_=t};goog.inherits(Wp,pe);Wp.prototype.enhanceDom=function(t){var o,i;for(o=0;o<t.length;o++){var n=t[o],r=Array.prototype.slice.call(n.querySelectorAll("[data-oxy]"));for(r.push(n),i=0;i<r.length;i++){let a=h.getIdOfXmlNode(r[i]);var s=this.validationErrorsModel_.getMostImportantError(a);s&&this.validator_.markValidationProblem(r[i],s)}}};var Ly=Wp;sync.ctrl.ValidationDocumentUpdateFilter=Wp;namespace("sync.ctrl");var Kp=function(t){this.editor_=t};Kp.prototype.getReferenceAtNode=function(t){var o=goog.dom.getAncestor(t,function(i){return sync.model.XmlDom.isXmlElement(i)&&goog.dom.dataset.has(i,"url")},!0);return o&&goog.dom.dataset.get(o,"url")};Kp.prototype.open=function(t,o){var i=workspace.getWorkspaceOptions().getOptions(),n=new E(window.location.href);n.setQuery(goog.Uri.QueryData.createFromMap(i));var r=n.getQuery(),s=new sync.select.SavedSelection(o).toJson(),a=sync.rest.getRestApiUrl("RESTDocumentControllers.documentController.openReferenceAtSelection",{id:this.editor_.docId,redirectQueryParams:encodeURIComponent(r),selection:encodeURIComponent(JSON.stringify(s))}),l=new sync.api.Editor.LinkOpenedEvent(t,!0);l.$setActualUrl(a),this.editor_.openLink(l)};var Fy=Kp;sync.ctrl.ReferenceOpener=Kp;namespace("sync.select");sync.select.SelectionUtil={};sync.select.SelectionUtil.isInsideReferencedContent=sync.util.createCachedFunction(function(t){var o=!1,i=t.getNodeAtSelection();if(i){var n=h.getInstance().getXmlNodeById(i.id);if(n){var r=goog.dom.getAncestor(n,sync.model.XmlDom.isReference,!0);o=!!r}}return o});sync.select.SelectionUtil.scrollToPositionAndSelect=function(t,o,i,n,r){if(t&&o){var s=new sync.select.Selection(t,o);r&&n.setSelection(s),i.scrollSelectionIntoView(s)}else console.info("Could not determine the start and end points for chunks.")};sync.select.SelectionUtil.getOxyElementFromCaret=function(t){var o=t.getNodeAtSelection(),i=null;return o&&o.getType()===goog.dom.NodeType.ELEMENT&&(i=o),i};sync.select.SelectionUtil.getOxyElementIdFromCaret=function(t){let o=sync.select.SelectionUtil.getOxyElementFromCaret(t);return o?o.id:null};var t8=sync.select.SelectionUtil;goog.require("goog.functions");namespace("sync.actions");var kc=function(t,o){_.call(this,{displayName:tr(msgs.EDIT_REFERENCE_)}),this.opener_=t,this.selectionManager_=o};goog.inherits(kc,_);kc.prototype.actionPerformed=function(t){var o=this.selectionManager_.getSelection(),i=o.getNodeAtSelection(),n=h.getInstance().getXmlNodeById(i.id),r=this.opener_.getReferenceAtNode(n);r&&this.opener_.open(r,o.focus.toRelativeContentPosition()),t&&t()};kc.prototype.isEnabled=function(){return sync.select.evalSelectionFunction(sync.select.SelectionUtil.isInsideReferencedContent)};var Uy=kc;sync.actions.EditReferenceAction=kc;namespace("sync.actions");var $s=function(t,o){I.call(this,null),this.opener_=t,this.markersModel_=o,this.callsCallback=!0};goog.inherits($s,I);$s.prototype.actionPerformedFor=function(t,o){if(this.isEnabledFor(o)){var i=this.markersModel_.getMarkerEndPoints(o.markerId).start,n=this.getReferenceUrl_(i);n&&this.opener_.open(n,i)}t&&t()};$s.prototype.getReferenceUrl_=function(t){var o=p.fromRelativeContentPosition(t),i=o.getContentInformation(),n=null;if(i){var r=h.getInstance().getXmlNodeById(i.elementId);n=this.opener_.getReferenceAtNode(r)}return n};$s.prototype.isEnabledFor=function(t){var o=this.markersModel_.getMarker(t.markerId);return o?o.isInRef():!1};$s.prototype.getShortName=function(){return tr(msgs.EDIT_REFERENCE_)};var By=$s;sync.actions.EditMarkerReferenceAction=$s;goog.require("goog.dom");namespace("sync.view");var Lc=class extends goog.Disposable{constructor(o,i){super();this.container_=o,this.viewNotificationArea_=null,this.modelChangeListenerKey_=goog.events.listen(i,sl.EventType.MODEL_CHANGED,goog.bind(this.updateErrors_,this))}disposeInternal(){super.disposeInternal(),this.modelChangeListenerKey_&&goog.events.unlistenByKey(this.modelChangeListenerKey_),goog.dom.removeNode(this.viewNotificationArea_)}updateErrors_(o){this.renderNotification_();var i=o.errors.length;if(i>0){goog.dom.classlist.remove(this.viewNotificationArea_,"validation-notification-view-valid");var n=i;o.complete||(n+="+"),this.viewNotificationArea_.textContent=n,goog.dom.dataset.set(this.viewNotificationArea_,"severity",this.getSeverity_(o))}else this.clearErrors_()}renderNotification_(){this.viewNotificationArea_||(this.viewNotificationArea_=goog.dom.createDom("div",["navigation-rail__notification","validation-notification"]),this.container_.appendChild(this.viewNotificationArea_))}getSeverity_(o){for(var i="",n=o.errors.length,r=0;r<n;r++){var s=o.errors[r].severity;if(s&&s.indexOf("error")!==-1){i=s;break}else s==="warning"&&i!=="warning"?i="warning":s==="info"&&i===""&&(i="info")}return i}clearErrors_(){this.viewNotificationArea_.textContent="",goog.dom.dataset.remove(this.viewNotificationArea_,"severity"),goog.dom.classlist.add(this.viewNotificationArea_,"validation-notification-view-valid")}};sync.view.ValidationNotificationArea=Lc;goog.require("goog.dom.classlist");namespace("sync.view");sync.view.ValidationUtil={};sync.view.ValidationUtil.containsValidationClass=function(t){return goog.dom.classlist.contains(t,"validation-warning")||goog.dom.classlist.contains(t,"validation-error")||goog.dom.classlist.contains(t,"validation-info")};sync.view.ValidationUtil.getIconClass=function(t){switch(t){case"ADD_QF":return"quickFixAddIcon";case"REPLACE_QF":return"quickFixReplaceIcon";case"REPLACE_TEXT_QF":return"quickFixReplaceTextIcon";case"DELETE_QF":return"quickFixDeleteIcon";default:return"quickFixMixIcon"}};sync.view.ValidationUtil.createQuickFixAction=function(t){var o=sync.view.ValidationUtil.getIconClass(t.type);return goog.dom.createDom("button","quickFixAction",goog.dom.createDom("div",["quickFixIcon",o]),t.name)};sync.view.ValidationUtil.createAdditionalInfoLink=function(t){return goog.dom.createDom("a",{className:"validation-additional-info",href:t,target:"_blank"},tr(msgs.MORE_DETAILS_))};var S8=sync.view.ValidationUtil;goog.require("goog.functions");goog.require("goog.events");goog.require("goog.dom");namespace("sync.view");var Ct=function(t,o){this.currentSelectedErrrorID_=-1,this.itemSelectedClass_="validation-item-selected",this.container_=t,this.scrollAncestor_=o,this.quickFixFilter_=goog.functions.TRUE,this.errors_=[],this.onQuickFixInvoked_=goog.nullFunction,this.onItemSelected_=goog.nullFunction,this.quickFixHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.quickFixHandler_),this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_),this.eventHandler_.listen(this.container_,goog.events.EventType.CLICK,this.handleValidationContainerClick_).listen(this.container_,goog.events.EventType.KEYDOWN,this.handleKeyboardActivation_)};goog.inherits(Ct,goog.Disposable);Ct.prototype.setQuickFixFilter=function(t){this.quickFixFilter_=t,this.setErrors(this.errors_)};Ct.prototype.onQuickFixInvoked=function(t){this.onQuickFixInvoked_=t};Ct.prototype.onItemSelected=function(t){this.onItemSelected_=t};Ct.prototype.setErrors=function(t){if(this.errors_=t,this.clearProblems(),this.errors_.length)for(var o=0;o<this.errors_.length;o++)this.addError_(this.errors_[o],o);else this.addEmptyPlaceholder_()};Ct.prototype.addEmptyPlaceholder_=function(){var t=goog.dom.createDom;goog.dom.appendChild(this.container_,t("div","validation-placeholder",t("div","validation-placeholder-image"),t("div",{className:"validation-placeholder-text kdb-focus-outline",tabIndex:"0"},tr(msgs.THE_DOCUMENT_IS_VALID_))))};Ct.prototype.clearProblems=function(){goog.dom.removeChildren(this.container_),goog.dom.classlist.remove(this.container_,"disabled"),this.quickFixHandler_.removeAll()};Ct.prototype.addError_=function(t,o){var i=goog.dom.createDom,n=t.errorMessage,r=t.severity,s=i("div",{class:"validation-item kbd-focus-outline","data-start-pos":t.startPosition,"data-end-pos":t.endPosition,"data-severity":r,"data-vid":o,tabIndex:0}),a=sync.util.trimMessage(n,140),l=i("span","validation-message",a),c=i("div","validation-problem-message",l);if(goog.dom.appendChild(s,c),a.length<n.length){var d="hide-content",g=i("span",d,n);goog.dom.appendChild(c,g);var m=i("button","see-more-less",tr(msgs.SEE_MORE_));goog.dom.append(s,m);var v=!1;this.quickFixHandler_.listen(m,goog.events.EventType.CLICK,function(){var C=goog.dom.classlist;C.toggle(l,d),C.toggle(g,d);var N=C.contains(g,d);m.textContent=N?tr(msgs.SEE_MORE_):tr(msgs.SEE_LESS_),!N&&!v&&(this.addAdditionalInfoLink_(g,t.additionalInfo),v=!0)})}else this.addAdditionalInfoLink_(c,t.additionalInfo);this.renderQuickFixes_(t.quickFixes,s),goog.dom.appendChild(this.container_,s)};Ct.prototype.addAdditionalInfoLink_=function(t,o){o&&goog.dom.append(t,sync.view.ValidationUtil.createAdditionalInfoLink(o))};Ct.prototype.renderQuickFixes_=function(t,o){if(!!t&&(t=t.filter(this.quickFixFilter_),t.length>0)){var i=goog.dom.createDom("div","validation-problem-quickfixes");t.filter(goog.isDefAndNotNull).forEach(n=>{var r=sync.view.ValidationUtil.createQuickFixAction(n);this.quickFixHandler_.listen(r,goog.events.EventType.CLICK,s=>this.onQuickFixInvoked_(n,s)),goog.dom.append(i,r)}),goog.dom.appendChild(o,i)}};Ct.prototype.unselectItemInPanel_=function(){var t=this.container_.querySelector("."+this.itemSelectedClass_);t&&goog.dom.classlist.remove(t,this.itemSelectedClass_),this.currentSelectedErrrorID_=-1};Ct.prototype.disable=function(){var t=this.container_.getElementsByClassName("quickFixAction"),o=goog.dom.classlist,i,n="disabled";for(i=0;i<t.length;i++)o.add(t[i],n);var r=this.container_.getElementsByClassName("quickFixIcon");for(i=0;i<r.length;i++)o.add(r[i],n);o.add(this.container_,n)};Ct.prototype.enable=function(){var t="disabled";goog.dom.classlist.remove(this.container_,t)};Ct.prototype.selectItemBetweenPositions=function(t,o){var i=null;if(t&&o){var n=goog.dom.dataset;i=goog.dom.findNode(this.container_,function(r){return goog.dom.isElement(r)&&goog.dom.classlist.contains(r,"validation-item")&&n.get(r,"startPos")===t&&n.get(r,"endPos")===o})}i?this.selectNewItemInPanel_(i,!0):this.unselectItemInPanel_()};Ct.prototype.selectNewItemInPanel_=function(t,o){var i=goog.dom.dataset.get(t,"vid"),n=this.currentSelectedErrrorID_!==i;if(n){this.currentSelectedErrrorID_=i;var r=this.itemSelectedClass_,s=t.parentNode&&t.parentNode.querySelector("."+r);s&&goog.dom.classlist.remove(s,r),goog.dom.classlist.add(t,r),o&&goog.style.scrollIntoContainerView(t,this.scrollAncestor_)}return n};Ct.prototype.handleValidationContainerClick_=function(t){if(!goog.dom.getAncestorByClass(t.target,"see-more-less")){var o=goog.dom.getAncestorByClass(t.target,"validation-item");o&&setTimeout(goog.bind(this.selectValidationItem_,this,o),100)}};Ct.prototype.selectValidationItem_=function(t){var o=this.selectNewItemInPanel_(t);if(o){var i=goog.dom.dataset,n=i.get(t,"startPos"),r=i.get(t,"endPos");this.onItemSelected_({startPosition:n,endPosition:r})}};Ct.prototype.handleKeyboardActivation_=function(t){(t.keyCode===goog.events.KeyCodes.ENTER||t.keyCode===goog.events.KeyCodes.SPACE)&&goog.dom.classlist.contains(t.target,"validation-item")&&setTimeout(goog.bind(this.selectValidationItem_,this,t.target),100)};var Hy=Ct;sync.view.ValidationProblemsRenderer=Ct;namespace("sync.validation");var Zs=function(t,o,i,n){this.quickFixPending_=!1,this.actionsExecutor_=new Pn,this.controller_=t,this.selectionManager_=o,this.widgets_=i,this.problemsRenderer_=n};Zs.prototype.setActionsExecutor=function(t){this.actionsExecutor_=t};Zs.prototype.applyQuickFix=function(t){if(!this.quickFixPending_){var o=t.parameters.map(r=>r.title),i=[];if(o.length>0){var n=goog.bind(function(r){this.widgets_.askUser(tr(msgs.QUICK_FIX_),r,goog.bind(function(s){if(s){i.push(s);var a=o.shift();a?n(a):this.scheduleQuickFixExecution_(t,i)}},this))},this);n(o.shift())}else this.scheduleQuickFixExecution_(t,i)}};Zs.prototype.scheduleQuickFixExecution_=function(t,o){return this.actionsExecutor_.executeDocumentTransaction(()=>this.applyFixWithUserEntry_(t,o))};Zs.prototype.applyFixWithUserEntry_=function(t,o){this.quickFixPending_=!0,this.problemsRenderer_.disable();var i=o.length>0,n=i?"RESTQuickFix.applyQuickFixWithUserEntry":"RESTQuickFix.applyQuickFix",r=i?{quickFix:t,userInputs:o}:t,s=this.controller_;return sync.rest.callAsyncNative(n,{docId:s.docId,$entity:r}).then(a=>new Ne(a)).then(a=>{s.applyUpdate_(a),a.isSerializedContentModified||this.problemsRenderer_.enable(),this.scrollToSelection_(a)}).catch(()=>{this.problemsRenderer_.enable()}).finally(()=>{this.quickFixPending_=!1})};Zs.prototype.scrollToSelection_=function(t){if(t.selection){var o=t.getUpdateSelection();this.selectionManager_.scrollSelectionIntoView(o.restore())}};var jy=Zs;sync.validation.QuickFixExecutor=Zs;goog.require("goog.dom");goog.require("goog.dom.classlist");goog.require("goog.Uri");namespace("sync.view");var ot=function(){this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_),this.notificationArea_=null,this.problemsRenderer_=null,this.quickFixExecutor_=null,this.iconElement_=null};goog.inherits(ot,sync.view.ViewRenderer);ot.prototype.getTitle=function(){return tr(msgs.VALIDATION_)};ot.prototype.install=function(t){this.validationPanel_=t,this.validationErrorsContainer_=goog.dom.createDom("div","validation-results__content"),this.headerContentElement_=goog.dom.createDom("div","validation-results__header-content"),this.validationHeader_=goog.dom.createDom("div","validation-results__header",this.headerContentElement_),t.appendChild(goog.dom.createDom("div","validation-results",this.validationHeader_,this.validationErrorsContainer_)),this.problemsRenderer_=new Hy(this.validationErrorsContainer_,this.validationPanel_),this.problemsRenderer_.onQuickFixInvoked(this.applyFix.bind(this)),this.problemsRenderer_.onItemSelected(o=>this.selectValidationItemInEditor(this.editingSupport_,o.startPosition,o.endPosition)),this.registerDisposable(this.problemsRenderer_)};ot.prototype.createQuickFixExecutor_=function(t){var o=null;if(t.getEditorType()===sync.api.Editor.EditorTypes.AUTHOR){var i=t.getEditingSupport();o=new jy(i.getController(),i.getSelectionManager(),t.widgets,this.problemsRenderer_),o.setActionsExecutor(i.actionsExecutor)}return o};ot.prototype.editorChanged=function(t){this.resetState_(),this.eventHandler_.listen(t,sync.api.Editor.EventTypes.DISPOSE,this.resetState_),this.editingSupport_=t.getEditingSupport(),this.quickFixExecutor_=this.createQuickFixExecutor_(t);var o=this.editingSupport_.getErrorsModel();this.eventHandler_.listen(o,sl.EventType.MODEL_CHANGED,this.handleModelChanged_,!0).listen(this.editingSupport_.getSelectionManager(),sync.api.SelectionManager.EventType.SELECTION_CHANGED,goog.functions.debounce(goog.bind(this.handleCaretMoveInDoc_,this,t),400),!0).listen(t,sync.api.Editor.EventTypes.ACTIONS_LOADED,goog.bind(this.addDitamapNotifications_,this,t)),this.notificationArea_=new Lc(this.iconElement_,o),this.disableQuickFixesFromSchemaWhenInRoom_(this.editingSupport_.getConcurrentEditingManager())};ot.prototype.getRailEntryId=function(){return"validation-panel-table"};ot.prototype.disableQuickFixesFromSchemaWhenInRoom_=function(t){!t||t.isKeepingIncompatibleActions()||(t.isInRoom()?this.setQuickFixFilter(o=>o.commands.length===0):t.listen(sync.api.ConcurrentEditingManager.EventType.ROOM_CREATED,()=>this.setQuickFixFilter(o=>o.commands.length===0)))};ot.prototype.setQuickFixFilter=function(t){this.problemsRenderer_.setQuickFixFilter(t)};ot.prototype.resetState_=function(){this.setQuickFixFilter(goog.functions.TRUE),this.eventHandler_.removeAll(),this.problemsRenderer_.clearProblems(),this.hideHeader_(),this.notificationArea_&&this.notificationArea_.dispose()};ot.prototype.hideHeader_=function(){goog.dom.classlist.add(this.validationHeader_,"validation-results__header--hidden")};ot.prototype.showHeader_=function(t){goog.dom.classlist.remove(this.validationHeader_,"validation-results__header--hidden"),goog.dom.removeChildren(this.headerContentElement_),goog.dom.appendChild(this.headerContentElement_,t)};ot.prototype.deserializePosition_=function(t){if(t){var o=t.split(","),i=o[0],n=o[1]==="true"?f.BEFORE:f.AFTER,r=Number(o[2]);return new sync.position.RelativeContentPosition(i,n,r).toHTMLPosition()}return null};ot.prototype.selectValidationItemInEditor=function(t,o,i){var n=this.deserializePosition_(o),r=this.deserializePosition_(i);if(n&&r){var s=new sync.select.Selection(n,r),a=this.editingSupport_.getSelectionManager();a.setSelection(s),a.scrollSelectionIntoView(s)}};ot.prototype.handleCaretMoveInDoc_=function(t){if(!t.isDisposed()){var o=this.getSelectedItem(this.editingSupport_);this.problemsRenderer_.selectItemBetweenPositions(o.startPos,o.endPos)}};ot.prototype.getSelectedItem=function(t){var o={},i=t.getSelectionManager().getSelection(),n=i&&i.getNodeAtSelection();if(n&&n.id){var r=this.editingSupport_.getXmlModel().getXmlNodeById(n.id);if(r){var s=goog.dom.getAncestor(r,function(l){return goog.dom.isElement(l)&&sync.view.ValidationUtil.containsValidationClass(l)},!0);if(s){var a=goog.dom.dataset;o.startPos=a.get(s,"startPos"),o.endPos=a.get(s,"endPos")}}}return o};ot.prototype.addDitamapNotifications_=function(t){var o=t.documentTypeId,i=o&&o.toLowerCase().indexOf("dita")!==-1;if(i){var n=t.editingContextManager_;this.ditaMapChangeListener_||(this.ditaMapChangeListener_=this.eventHandler_.listen(n,sync.api.EditingContextManager.EventTypes.CONTEXT_CHANGED,goog.bind(function(){this.showDitaContext_(n.getDitaContext())},this))),this.showDitaContext_(n.getDitaContext())}else this.hideHeader_()};ot.prototype.showDitaContext_=function(t){let o=t.ditamapUrl;if(o&&!t.isProjectActive){var i=goog.dom.createDom,n=new E(o).getFileName(),r="oxygen.html?url="+encodeURIComponent(o),s=i("a",{className:"validation-results__ditamap-link",href:r,target:"_blank"},n);this.eventHandler_.listen(s,goog.events.EventType.CLICK,goog.bind(function(a){a.preventDefault(),this.openUrl(o,!0)},this)),this.showHeader_(trDom(msgs.USING_DITA_MAP_,{$DITAMAP_FILENAME:s}))}else t.ditaProjectUrl?t.ditaProjectContextId?this.showHeader_(trDom(msgs.USING_DITA_CONTEXT_,{$CONTEXT:t.ditaProjectContextId})):this.showHeader_(goog.dom.createTextNode(tr(msgs.NO_DITA_CONTEXT_))):this.showHeader_(goog.dom.createTextNode(tr(msgs.NO_DITA_MAP_)))};ot.prototype.handleModelChanged_=function(t){this.problemsRenderer_.setErrors(t.errors)};ot.prototype.applyFix=function(t,o){o.preventDefault(),o.stopPropagation(),this.quickFixExecutor_.applyQuickFix(t)};ot.prototype.renderIcon=function(){return this.iconElement_=goog.dom.createDom("div",["Validate24"]),this.iconElement_};var Vy=ot;sync.view.ErrorsView=ot;goog.require("goog.positioning.AnchoredPosition");goog.require("goog.positioning.Corner");goog.require("goog.ui.Component.EventType");goog.require("goog.ui.HoverCard");goog.require("goog.events.EventType");goog.require("goog.ui.AdvancedTooltip");goog.require("goog.dom.classlist");goog.require("goog.Disposable");namespace("sync.view");var al=function(t,o,i,n,r){this.controller=o,this.widgets=i,(!n||typeof n!="function")&&(n=function(){return!0}),this.hoverCard_=new vp(function(s){return n()?sync.view.ValidationUtil.containsValidationClass(s):!1},r),this.registerDisposable(this.hoverCard_),this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_),this.hoverCard_.setHotSpotPadding(new goog.math.Box(20,20,20,20)),goog.events.listen(this.hoverCard_,goog.ui.HoverCard.EventType.BEFORE_HIDE,goog.bind(this.eventHandler_.removeAll,this.eventHandler_)),goog.events.listen(this.hoverCard_,goog.ui.HoverCard.EventType.BEFORE_SHOW,goog.bind(this.beforeShow_,this,t)),this.hoverCard_.className="tooltip-hovercard validation-hovercard"};goog.inherits(al,goog.Disposable);al.prototype.beforeShow_=function(t){goog.dom.removeChildren(this.hoverCard_.getElement());var o=this.hoverCard_.getAnchorElement(),i=h.getIdOfXmlNode(o),n=t.getMostImportantError(i);if(n){var r=goog.dom.createDom,s=r("div","preview-comment-tooltip"),a=r("div",{id:"validation_marker_preview_tooltip",className:"preview"},r("div","",r("span","preview-author",tr(msgs.VALIDATION_))),s),l=n.severity;l&&a.setAttribute("data-severity",l),goog.dom.appendChild(s,r("div","validation-problem-message",r("span","validation-message",n.errorMessage),n.additionalInfo?sync.view.ValidationUtil.createAdditionalInfoLink(n.additionalInfo):""));var c=this.getQuickFixesFragment_(n.quickFixes);c&&goog.dom.appendChild(s,c),goog.dom.append(this.hoverCard_.getElement(),a)}return!!n};al.prototype.getQuickFixesFragment_=function(t){var o=goog.dom.createDom("div","validation-problem-quickfixes");if(t!=null&&t.length>0)for(var i=0;i<t.length;i++){var n=t[i];if(n!=null){var r=sync.view.ValidationUtil.createQuickFixAction(n);goog.dom.append(o,r),this.eventHandler_.listen(r,goog.events.EventType.CLICK,this.applyFix.bind(this,n))}}return o};al.prototype.applyFix=function(t,o){o.preventDefault(),o.stopPropagation(),this.hoverCard_.setVisible(!1);var i=t.parameters.map(s=>s.title),n=[];if(i.length>0){var r=goog.bind(function(s){this.widgets.askUser(tr(msgs.QUICK_FIX_),s,goog.bind(function(a){if(a){n.push(a);var l=i.shift();l?r(l):sync.rest.callAsync("RESTQuickFix.applyQuickFixWithUserEntry",{docId:this.controller.docId,$entity:{quickFix:t,userInputs:n}}).then(goog.bind(function(c){this.controller.applyUpdate_(c)},this))}},this))},this);r(i.shift())}else sync.rest.callAsync("RESTQuickFix.applyQuickFix",{docId:this.controller.docId,$entity:t}).then(goog.bind(function(s){this.controller.applyUpdate_(s)},this))};var Wy=al;sync.view.ValidationMarkerTooltip=al;namespace("sync.actions");sync.actions.DropAction=function(t,o,i){_.call(this,{}),this.sourceSelection_=t,this.destPosition_=o,this.controller_=i};goog.inherits(sync.actions.DropAction,_);sync.actions.DropAction.prototype.execute=function(){let t={id:this.controller_.docId,$entity:{sourceSelection:this.sourceSelection_.toJson(),targetPosition:this.destPosition_.toJson()}};return sync.rest.callAsyncNative("RESTDocumentControllers.documentController.dnd",t).then(goog.bind(function(o){this.controller_.applyUpdate_(o)},this)).catch(function(o){sync.util.error.reloadPage(o)})};goog.require("goog.object");goog.require("goog.events.BrowserEvent");goog.require("goog.Disposable");namespace("sync.view");sync.view.ResourceDragHandler=function(t,o,i,n,r,s,a,l){goog.Disposable.call(this),this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_),this.baseUrl_=t,this.actionsManager_=o,this.controller_=i,this.selectionManager_=r,this.concurrentEditingManager_=a,this.newFileHelper_=new ii,this.scheduler_=l,this.currentEditorUrl_=new E(window.location),this.fakeSelectionRenderer_=new xd(n,this.controller_.getXmlModel(),s),this.dragFromEditorInProgress_=!1,this.types={CUSTOM_URL:"application/oxy-reference",FROM_EDITOR:"application/oxy-from-editor"},this.typesToHandlers_={},this.typesToHandlers_[this.types.CUSTOM_URL]=goog.bind(this.handleUrlDnd_,this),this.typesToHandlers_[this.types.FROM_EDITOR]=goog.bind(this.handleContentFromEditorDnd_,this),this.docWrapper_=n,this.eventHandler_.listen(n,goog.events.EventType.DRAGSTART,goog.bind(this.dragStarted_,this),!0).listen(n,[goog.events.EventType.DROP,goog.events.EventType.DRAGEND],goog.bind(this.dragEnds_,this)).listen(n,goog.events.EventType.DROP,goog.bind(this.drop_,this)).listen(n,goog.events.EventType.DRAGOVER,goog.bind(this.dragover_,this))};goog.inherits(sync.view.ResourceDragHandler,goog.Disposable);sync.view.ResourceDragHandler.prototype.dragover_=function(t){t.preventDefault();var o=this.getDataTransfer_(t);o.dropEffect=this.dragFromEditorInProgress_?"move":"copy";var i=new sync.select.Selection(It.positionFromPointNormalized(t.clientX,t.clientY));this.fakeSelectionRenderer_.render(i)};sync.view.ResourceDragHandler.prototype.getEditorDragElement=function(){return this.docWrapper_};sync.view.ResourceDragHandler.prototype.handleContentFromEditorDnd_=function(t,o){var i=!1,n=this.getEventPosition_(o),r=t.selection;if(r&&n){i=!0;let s=this.restoreJsonSelection_(r),a=s.restore();if(this.isOutsideOfDraggedSelection_(a,n)){let l=this.concurrentEditingManager_.getDivergedSelectionRestorer();if(l){let c=new sync.select.SavedSelection(n.toRelativeContentPosition());l.updateSelection([s,c]).then(goog.bind(function(d){this.scheduleDrop_(d[0],d[1].focus)},this))}else this.scheduleDrop_(s,n.toRelativeContentPosition())}}return i};sync.view.ResourceDragHandler.prototype.getEventPosition_=function(t){return It.positionFromPointNormalized(t.clientX,t.clientY)||this.selectionManager_.getSelection().start};sync.view.ResourceDragHandler.prototype.scheduleDrop_=function(t,o){let i=new sync.actions.DropAction(t,o,this.controller_);this.scheduler_.schedule(i,Qe.ActionType.HANDLES_BLOCKING)};sync.view.ResourceDragHandler.prototype.restoreJsonSelection_=function(t){var o=new sync.position.RelativeContentPosition(t.startReferenceNodeId,t.startSentinelType,t.startDistance),i=new sync.position.RelativeContentPosition(t.endReferenceNodeId,t.endSentinelType,t.endDistance);return new sync.select.SavedSelection(o,i)};sync.view.ResourceDragHandler.prototype.isOutsideOfDraggedSelection_=function(t,o){var i=o.toRelativeContentPosition(),n=p.compareCanonicalRelativePositions(i,t.start.toRelativeContentPosition()),r=p.compareCanonicalRelativePositions(i,t.end.toRelativeContentPosition());return n<0||r>0};sync.view.ResourceDragHandler.prototype.handleUrlDnd_=function(t){if(this.isValidURL_(t.url)){var o=this.isUrlFromWebAuthor_(t.url);if(o){var i=new E(t.url).getUrlParam("url");i&&(t.url=i)}this.actionsManager_.invokeOperation("ro.sync.servlet.operation.InsertExternalObjectOperation",t)}else workspace.getNotificationManager().showWarning(goog.dom.createDom("div","",goog.dom.createDom("div",{style:"text-align: center;"},tr(msgs.INVALID_URL)),goog.dom.createDom("span","",t.url)))};sync.view.ResourceDragHandler.prototype.insertDraggedHtml_=function(t,o){var i=!1;if(!goog.userAgent.IE){var n=t.getData("text/html");if(n){var r=goog.string.startsWith(n,"<img");(o&&r||!o)&&(i=!0,this.insertHtml_(n))}}return i};sync.view.ResourceDragHandler.prototype.insertHtml_=function(t){this.controller_.insertHtml(t,this.selectionManager_.getSelection().save())};sync.view.ResourceDragHandler.prototype.dragEnds_=function(){this.fakeSelectionRenderer_.clear(),this.dragFromEditorInProgress_=!1};sync.view.ResourceDragHandler.prototype.isValidImage_=function(t){var o="image";return t.type.substring(0,o.length)===o};sync.view.ResourceDragHandler.prototype.onLoad_=function(t,o,i){this.newFileHelper_.uploadImage(t,i.target.result,this.baseUrl_,goog.bind(function(n){n&&this.controller_.insertHtml("<img src='"+n+"'>",o)},this))};sync.view.ResourceDragHandler.prototype.drop_=function(t){t.preventDefault();var o=this.getDataTransfer_(t);if(!!o){if(!goog.userAgent.IE){var i=new sync.select.Selection(It.positionFromPointNormalized(t.clientX,t.clientY));this.selectionManager_.setSelection(i)}var n;if(n=this.handleCustomData_(o,t),n||(n=this.handleDraggedFiles_(t)),n||(n=this.insertDraggedHtml_(o,!0)),!n){var r=this.getUrl(o);r&&(this.handleUrlDnd_(r),n=!0)}if(n||(n=this.insertDraggedHtml_(o)),!n){var s=o.getData("text");goog.userAgent.IE||(s=o.getData("text/plain")),s&&this.controller_.insertText(s,this.selectionManager_.getSelection())}}};sync.view.ResourceDragHandler.prototype.handleDraggedFiles_=function(t){var o=!1,i=this.getDataTransfer_(t).files;if(i&&i.length){var n=i[0];if(o=n&&this.isValidImage_(n),o){var r=this.selectionManager_.getSelection().save(),s=new FileReader;s.onload=goog.bind(this.onLoad_,this,n.name,r),s.readAsDataURL(n)}}return o};sync.view.ResourceDragHandler.prototype.isValidURL_=function(t){var o=new E(t);return o.getScheme()&&o.getDomain()};sync.view.ResourceDragHandler.prototype.isUrlFromWebAuthor_=function(t){var o=this.currentEditorUrl_,i=new E(t);return o.getDomain()===i.getDomain()&&o.getPort()===i.getPort()&&o.getPathName()===i.getPathName()};sync.view.ResourceDragHandler.prototype.getTypeForIe_=function(t){var o,i,n=t.getData("text").trim();try{o=JSON.parse(n)}catch{}return i=o&&o.type||this.types.CUSTOM_URL,i};sync.view.ResourceDragHandler.prototype.handleCustomData_=function(t,o){var i,n=null,r=this.typesToHandlers_;goog.userAgent.IE?i=this.getTypeForIe_():(i=goog.object.findKey(r,(a,l)=>t.getData(l)),i&&(n=JSON.parse(t.getData(i))));var s=!1;return n&&i&&i in r&&goog.isFunction(r[i])&&(s=!0,r[i](n,o)),s};sync.view.ResourceDragHandler.prototype.getUrl=function(t){var o=null;if(goog.userAgent.IE)o={url:t.getData("url")};else{var i=t.getData("text/uri-list");i||(i=t.getData("text/plain"),i=i&&i.trim()),i&&goog.isString(i)&&this.isValidURL_(i)&&(o={url:i})}return o};sync.view.ResourceDragHandler.prototype.getDataTransfer_=function(t){return t.dataTransfer||t.getBrowserEvent().dataTransfer};sync.view.ResourceDragHandler.prototype.addCustomData=function(t,o){var i=goog.userAgent.IE?"text":this.types.CUSTOM_URL;t.setData(i,JSON.stringify(o))};sync.view.ResourceDragHandler.prototype.addCustomDataOfType=function(t,o,i){if(!goog.isObject(i)){console.error("Custom data is not an object");return}goog.userAgent.IE?(i.type=i.type||t,o.setData("text",JSON.stringify(i))):o.setData(t,JSON.stringify(i))};sync.view.ResourceDragHandler.prototype.dragStarted_=function(t){var o=this.selectionManager_.getSelection();if(!o.isEmpty()){var i=this.getDataTransfer_(t),n=o.save().toJson(),r={type:this.types.FROM_EDITOR,selection:n};this.addCustomDataOfType(this.types.FROM_EDITOR,i,r),this.dragFromEditorInProgress_=!0}};goog.require("goog.array");goog.require("goog.async.Delay");goog.require("goog.dom");goog.require("goog.structs");namespace("sync.attributes");var Jt=function(){this.controller=null,this.selectionManager_=null,this.editModeModel=null,this.attributesActionProvider=null,this.allReadonly=!1,this.restrictedAttributes={},this.lastOxyNodeId=null,this.attributeToEdit=null,this.delay=new goog.async.Delay(this.nodeChanged_,150,this),this.eventHandler_=new goog.events.EventHandler(this)};goog.inherits(Jt,sync.view.ViewRenderer);Jt.prototype.expandAttributeView=function(t){var o=goog.dom.createDom,i=goog.dom.getAncestorByClass(t.target,"attributes-panel-table-row"),n=i.firstChild.textContent,r=i.lastChild.textContent;goog.dom.classlist.add(i,"attributes-panel-expanded"),goog.dom.removeChildren(i),goog.dom.append(i,o("div","",n,o("div","attr-panel-del")),o("textarea","attributes-panel-edit-value",r),o("div","attributes-panel-edit-buttons",o("button","generic-button",tr(msgs.OK_)),o("button","generic-button",tr(msgs.CANCEL_))))};Jt.prototype.disposeInternal=function(){Jt.superClass_.disposeInternal.call(this),this.eventHandler_&&this.eventHandler_.dispose(),this.attrSelListenerKey_&&(goog.events.unlistenByKey(this.attrSelListenerKey_),this.attrSelListenerKey_=null),this.clickListenerKey_&&(goog.events.unlistenByKey(this.clickListenerKey_),this.clickListenerKey_=null)};Jt.prototype.nodeChanged_=function(){try{var t=this.selectionManager_.getSelection(),o=sync.select.SelectionUtil.getOxyElementFromCaret(t);o&&(this.lastOxyNodeId=o.id,this.render(o.getAttributes(),o,this.selectionManager_.evalSelectionFunction(sync.util.isInReadOnlyContent)))}catch(i){console.log("Error updating attributes view.",i)}};Jt.prototype.render=function(t,o,i){};Jt.prototype.unrender=function(){};Jt.prototype.setAttribute_=function(t,o){this.xmlController.setAttribute(this.lastOxyNodeId,t,o)};Jt.prototype.removeAttribute=function(){this.xmlController.removeAttribute(this.lastOxyNodeId,this.attributeToEdit.attributeQName)};Jt.prototype.getCCDropDown=function(t){};Jt.prototype.getTitle=function(){return tr(msgs.ATTRIBUTES_)};Jt.prototype.install=function(t){this.panelElement=t,this.render(null,null)};Jt.prototype.editorChanged=function(t){this.resetState_(),this.eventHandler_.listen(t,sync.api.Editor.EventTypes.DISPOSE,this.resetState_),this.delay.start(),this.editorUrl=t.options.url,this.xmlController=t.getEditingSupport().xmlController;var o=t.getEditingSupport();this.editingSupport=t.getEditingSupport(),this.controller=t.getController(),this.selectionManager_=t.getSelectionManager(),this.editModeModel=o.editModeModel,this.attributesActionProvider=o.getAttributeActionProvider(),this.restrictedAttributes=o.getRestrictedAttributes(),this.eventHandler_.listen(t.getEditingSupport().getSelectionManager(),sync.api.SelectionManager.EventType.SELECTION_CHANGED,goog.bind(function(){this.delay.start()},this)),this.eventHandler_.listen(this.controller,M.EventType.MODEL_CHANGED,goog.bind(function(){this.delay.start()},this));var i=t.getReadOnlyStatus();this.allReadonly=i.getReadOnlyState().readOnly,this.eventHandler_.listen(i,ue.EventTypes.READ_ONLY_STATUS_CHANGED,goog.bind(function(n){this.allReadonly=n.isReadOnly,this.delay.start()},this))};Jt.prototype.resetState_=function(){this.eventHandler_.removeAll(),this.delay.stop(),this.unrender()};Jt.prototype.renderIcon=function(){return goog.dom.createDom("div",["Attributes24"])};var eh=Jt;sync.attributes.AttributesPanel=Jt;goog.require("goog.events");goog.require("goog.dom");namespace("sync.attributes");var Ky=class extends sync.react.Component{constructor(t){super(t);this.receivedPossibleAttributeValues=this.receivedPossibleAttributeValues.bind(this),this.updateValueInputRef_=o=>this.attributeValueInputRef_=o,this.onKeyDown=this.onKeyDown.bind(this),this.onAttributeValueChanged=this.onAttributeValueChanged.bind(this),this.submitChanges=this.submitChanges.bind(this),this.cancelEditor=this.cancelEditor.bind(this),this.startEditing=this.startEditing.bind(this),this.state={possibleAttributeValues:[],gotPossibleAttributeValues:!1,editAction:null}}startEditing(){this.props.openAttributeEditor(this.props.name,this.props.attributeValue),this.requestPossibleAttributeValues()}requestPossibleAttributeValues(){this.state.gotPossibleAttributeValues||sync.rest.callAsync("RESTAttributesManager.getAllAttributeValues",{docId:this.props.ctrl.controller.docId,nodeId:this.props.oxyNode.id,attrName:this.props.name}).then(this.receivedPossibleAttributeValues).thenCatch(sync.util.error.logError)}receivedPossibleAttributeValues(t){var o=null;if(this.props.oxyNode.getType()===goog.dom.NodeType.ELEMENT){var i=this.props.oxyNode,n=this.props.name;o=this.props.ctrl.attributesActionProvider.getAction(i,n)}var r=t.values;r.editableState=t.editableState,this.setState({possibleAttributeValues:r,gotPossibleAttributeValues:!0,editAction:o})}shouldRestrict(t){var o=this.props.ctrl.restrictedAttributes[t];if(o)if(this.props.ctrl.elementName&&o.elName){if(o.elName===this.props.ctrl.elementName)return o.editableState==="FALSE"}else return o.editableState==="FALSE";return!1}render(){var t=this.props.name,o=this.props.attributeValue;return this.shouldRestrict(t)||this.props.readOnly?this.renderReadOnly(t,o):this.props.isActive?this.renderActive(t,o):this.renderInactive(t,o)}renderReadOnly(t,o){var i="attr-textfield-"+t;return sync.react.h("div",{className:sync.react.genClasses(["attribute-entry","attribute-entry--read-only",this.props.isDefaultValue?"attribute-entry--not-set":"attribute-entry--set"]),tabIndex:0},sync.react.h("label",{className:"attribute-entry__name",htmlFor:i},t),sync.react.h("input",{className:"attribute-entry__value",disabled:!0,id:i,value:o,placeholder:"["+tr(msgs.EMPTY_)+"]"}))}renderActive(t,o){var i="attr-textfield-"+t,n="attr-label-"+t;return sync.react.h("div",{onKeyDown:this.onKeyDown,className:sync.react.genClasses(["attribute-entry","attribute-entry--active",this.props.isDefaultValue?"attribute-entry--not-set":"attribute-entry--set"])},this.renderDeleteButton(),sync.react.h("label",{id:n,className:"attribute-entry__name",htmlFor:i},t),sync.react.h(dr,{id:i,labelId:n,className:"attribute-entry__value",ref:this.updateValueInputRef_,initialValue:o,options:this.state.possibleAttributeValues,onOptionSelected:this.onAttributeValueChanged,startFocused:!1,editAction:this.state.editAction,onCancel:this.props.onCancel,ctrl:this.props.ctrl}),sync.react.h("div",{className:"attribute-entry__buttons"},sync.react.h("button",{onClick:this.submitChanges,title:tr(msgs.ACCEPT_),className:"oxy-button oxy-button--small oxy-button--primary attribute-entry__button"},tr(msgs.ACCEPT_)),sync.react.h("button",{onClick:this.cancelEditor,title:tr(msgs.CANCEL_),className:"oxy-button oxy-button--small attribute-entry__button attribute-entry__button--cancel"},tr(msgs.CANCEL_))))}cancelEditor(){this.props.cancelEditor(),this.attributeValueInputRef_.resetValue()}renderDeleteButton(){return this.props.isDefaultValue?null:sync.react.h("button",{title:tr(msgs.DELETE_),onClick:t=>this.deleteAttribute(t),className:"attribute-entry__delete-btn brighten-on-hover"},sync.react.h("div",{className:"attribute-entry__delete-btn-image"}))}deleteAttribute(t){this.props.deleteAttribute(this.props.name),t.stopPropagation()}renderInactive(t,o){var i="attr-textfield-"+t,n="attr-label-"+t;return sync.react.h("div",{className:sync.react.genClasses(["attribute-entry","attribute-entry--inactive",this.props.isDefaultValue?"attribute-entry--not-set":"attribute-entry--set"]),onClick:this.startEditing},this.renderDeleteButton(),sync.react.h("label",{id:n,className:"attribute-entry__name",htmlFor:i},t),sync.react.h(dr,{id:i,labelId:n,className:"attribute-entry__value",initialValue:o,placeholderText:"["+tr(msgs.EMPTY_)+"]",onFocus:this.startEditing,ctrl:this.props.ctrl,startFocused:!1}))}onKeyDown(t){var o=t.which||t.keyCode;o===goog.events.KeyCodes.ESC?(t.preventDefault(),this.props.onUnSelectedWithKeyboard(t)):o===goog.events.KeyCodes.DELETE?t.target.type!=="text"&&(t.preventDefault(),this.deleteAttribute()):t.stopPropagation()}onAttributeValueChanged(t,o){!o||o.keyCode===goog.events.KeyCodes.ENTER&&this.submitChanges()}submitChanges(){this.props.updateAttribute(this.props.name,this.attributeValueInputRef_.getSelectedValue())}},Gy=Ky;sync.attributes.RAttributeRow=Ky;goog.require("goog.events");goog.require("goog.dom");namespace("sync.attributes");var qy=class extends sync.react.Component{constructor(t){super(t);this.updateNameInputRef_=o=>this.attributeInputRef_=o,this.updateValueInputRef_=o=>this.attributeValueInputRef_=o,this.updateSubmitButtonRef_=o=>this.submitChangesButtonRef_=o,this.receivedAttributeValues=this.receivedAttributeValues.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onAttributeSelected=this.onAttributeSelected.bind(this),this.onAttributeValueSelected=this.onAttributeValueSelected.bind(this),this.createAttribute=this.createAttribute.bind(this),this.state={possibleAttributes:[],possibleAttributeValues:[],attrValue:"",editAction:null}}focus(){this.attributeInputRef_&&this.attributeInputRef_.focus()}componentWillMount(){this.props.ctrl.attrQName="",this.props.ctrl.attrValue="",sync.rest.callAsync("RESTAttributesManager.getAllAttributes",{docId:this.props.ctrl.controller.docId,nodeId:this.props.oxyNode.id}).then(this.receivedAttributeValues).thenCatch(sync.util.error.logError)}receivedAttributeValues(t){this.setState({possibleAttributes:t})}render(){return sync.react.h("div",{onKeyDown:this.props.onUnSelectedWithKeyboard,className:"new-attribute-form"},sync.react.h("div",{className:"new-attribute-form__title"},tr(msgs.ADD_ATTRIBUTE_BUTTON_)),sync.react.h(dr,{ref:this.updateNameInputRef_,placeholderText:tr(msgs.ATTRIBUTE_),options:this.state.possibleAttributes,onOptionSelected:this.onAttributeSelected,startFocused:!sync.util.isMobile(),ctrl:this.props.ctrl,id:"editable-combo-attribute"}),sync.react.h(dr,{ref:this.updateValueInputRef_,initialValue:this.state.attrValue,placeholderText:tr(msgs.VALUE_),options:this.state.possibleAttributeValues,onOptionSelected:this.onAttributeValueSelected,editAction:this.state.editAction,onCancel:this.props.onCancel,ctrl:this.props.ctrl,id:"editable-combo-attribute-value"}),sync.react.h("div",{className:"new-attribute-form__buttons"},sync.react.h("button",{ref:this.updateSubmitButtonRef_,onKeyDown:this.onKeyDown,onClick:this.createAttribute,className:"oxy-button oxy-button--small oxy-button--primary new-attribute-form__button"},tr(msgs.ADD_)),sync.react.h("button",{onClick:this.props.onCancel,className:"oxy-button oxy-button--small new-attribute-form__button new-attribute-form__button--cancel"},tr(msgs.CANCEL_))))}onKeyDown(t){var o=t.which||t.keyCode;o===goog.events.KeyCodes.ENTER&&setTimeout(goog.bind(function(){t.preventDefault(),this.createAttribute()},this),0)}createAttribute(){this.props.ctrl.attrQName=this.attributeInputRef_.getSelectedValue(),this.props.ctrl.attrValue=this.attributeValueInputRef_.getSelectedValue(),this.props.createAttribute()}onAttributeSelected(t){if(this.props.ctrl.attrQName=t,!t){this.setState({possibleAttributeValues:[]});return}var o=this.props.attributes,i="";o[t]&&(i=o[t].attributeValue),sync.rest.callAsync("RESTAttributesManager.getAllAttributeValues",{docId:this.props.ctrl.controller.docId,nodeId:this.props.oxyNode.id,attrName:this.props.ctrl.attrQName}).then(goog.bind(function(n){var r=null;if(this.props.oxyNode.getType()===goog.dom.NodeType.ELEMENT){var s=this.props.oxyNode;r=this.props.ctrl.attributesActionProvider.getAction(s,t)}var a=n.values;a.editableState=n.editableState,this.setState({possibleAttributeValues:a,editAction:r,attrValue:i})},this)).thenCatch(sync.util.error.logError)}onAttributeValueSelected(t,o){this.props.ctrl.attrValue=t,!!o&&o.keyCode===goog.events.KeyCodes.ENTER&&this.createAttribute()}},Xy=qy;sync.attributes.RNewAttributeForm=qy;goog.require("goog.events");goog.require("goog.string");namespace("sync.attributes");var zy=class extends sync.react.Component{constructor(t){super(t);this.NEW_ATTRIBUTE_ID="_NEW_ATTRIBUTE_",this.setActiveAttribute=this.setActiveAttribute.bind(this),this.clearActiveAttribute=this.clearActiveAttribute.bind(this),this.saveAttributeChanges=this.saveAttributeChanges.bind(this),this.deleteAttribute=this.deleteAttribute.bind(this),this.onUnSelectedWithKeyboard=this.onUnSelectedWithKeyboard.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.openNewAttributeForm=this.openNewAttributeForm.bind(this),this.createAttribute=this.createAttribute.bind(this),this.nodeToEditExists=this.nodeToEditExists.bind(this),this.state={currentOxyNode:this.props.oxyNode,activeAttribute:null,attributes:this.props.attributes}}focus(){this.attributeArea_&&this.attributeArea_.focus()}componentWillReceiveProps(t){var o;this.state.currentOxyNode&&t.oxyNode.id===this.state.currentOxyNode.id?o=t.addNew?this.NEW_ATTRIBUTE_ID:this.state.activeAttribute:o=t.addNew?this.NEW_ATTRIBUTE_ID:null,this.setState({currentOxyNode:t.oxyNode,activeAttribute:o,attributes:t.attributes})}setActiveAttribute(t,o){this.props.ctrl.attrQName=t,this.props.ctrl.attrValue=o,this.setState({activeAttribute:t})}clearActiveAttribute(){this.setState({activeAttribute:null});var t=sync.select.getSelection();this.props.ctrl.controller.fireSelectionModelChanged(t)}saveAttributeChanges(t,o){this.props.ctrl.editingSupport.scheduleDocumentTransaction(()=>(this.props.ctrl.attributeToEdit={attributeQName:t,attributeValue:o},this.nodeToEditExists()&&(this.fakeUpdateAttribute(t,o),this.props.ctrl.setAttribute_(t,o)),Promise.resolve()))}onUnSelectedWithKeyboard(t){var o=t.which||t.keyCode;o===goog.events.KeyCodes.ESC&&this.clearActiveAttribute()}deleteAttribute(t){this.props.ctrl.editingSupport.scheduleDocumentTransaction(()=>(this.props.ctrl.attributeToEdit={attributeQName:t,attributeValue:this.props.ctrl.attrValue},this.nodeToEditExists()&&(this.fakeDeleteAttribute(t),this.props.ctrl.removeAttribute()),Promise.resolve()))}createAttribute(){this.props.ctrl.editingSupport.scheduleDocumentTransaction(()=>{var t=this.props.ctrl.attrValue;if(this.props.ctrl.attributeToEdit={attributeQName:this.props.ctrl.attrQName,attributeValue:t},this.nodeToEditExists()){var o=this.props.ctrl.attrQName;this.fakeCreateAttribute(o,t),this.props.ctrl.setAttribute_(o,t)}return Promise.resolve()})}nodeToEditExists(){var t=this.props.ctrl.lastOxyNodeId,o=this.props.ctrl.editingSupport.getXmlModel().getXmlNodeById(t);return o!=null}render(){this.props.ctrl.attrQName="",this.props.ctrl.attrValue="";var t=Object.entries(this.state.attributes||{}).filter(([o,i])=>!i.isHidden).sort(([o,i],[n,r])=>goog.string.caseInsensitiveCompare(o,n));return t.forEach(([o,i])=>{this.state.activeAttribute===o&&(this.props.ctrl.attrQName=o,this.props.ctrl.attrValue=i.attributeValue)}),sync.react.h("div",{className:"attributes-view",onKeyDown:this.onKeyDown},t.map(this.renderAttribute_,this),this.renderNewAttributeArea_())}renderAttribute_([t,o]){var i=this.state.activeAttribute===t;return sync.react.h(Gy,{oxyNode:this.props.oxyNode,ctrl:this.props.ctrl,readOnly:this.props.readOnly,key:t+`[fromNodeId='${this.props.oxyNode.id}']`,name:t,isDefaultValue:o.isDefaultValue,attributeValue:o.attributeValue,onCancel:this.clearActiveAttribute,openAttributeEditor:this.setActiveAttribute,cancelEditor:this.clearActiveAttribute,deleteAttribute:this.deleteAttribute,updateAttribute:this.saveAttributeChanges,onUnSelectedWithKeyboard:this.onUnSelectedWithKeyboard,isActive:i})}renderNewAttributeArea_(){var t=null;return this.props.readOnly||(this.state.activeAttribute===this.NEW_ATTRIBUTE_ID?t=sync.react.h(Xy,{ctrl:this.props.ctrl,oxyNode:this.props.oxyNode,onCancel:this.clearActiveAttribute,createAttribute:this.createAttribute,attributes:this.props.attributes,onUnSelectedWithKeyboard:this.onUnSelectedWithKeyboard,ref:o=>this.attributeArea_=o}):this.props.oxyNode&&(t=sync.react.h("div",{className:"attributes-view__new-btn-container"},sync.react.h("button",{className:"oxy-button",title:tr(msgs.ADD_ATTRIBUTE_BUTTON_),tabIndex:"0",onKeyDown:this.openNewAttributeForm,onClick:this.openNewAttributeForm,id:"showNewAttributeBtn"},tr(msgs.ADD_ATTRIBUTE_BUTTON_))))),t}openNewAttributeForm(t){(!t||!t.keyCode||t.keyCode===goog.events.KeyCodes.ENTER)&&this.setState({activeAttribute:this.NEW_ATTRIBUTE_ID})}fakeCreateAttribute(t,o){if(t){var i=this.state.attributes;i[t]={attributeValue:o,isDefaultValue:!1},this.setState({attributes:i,activeAttribute:null})}}fakeUpdateAttribute(t,o){var i=this.state.attributes;i[t].attributeValue=o,i[t].isDefaultValue=!1,this.setState({attributes:i,activeAttribute:null})}fakeDeleteAttribute(t){var o=this.state.attributes;delete o[t],this.setState({attributes:o,activeAttribute:null})}onKeyDown(t){t.keyCode===goog.events.KeyCodes.ESC?this.onUnSelectedWithKeyboard(t):t.keyCode===goog.events.KeyCodes.A&&this.state.activeAttribute!==this.NEW_ATTRIBUTE_ID&&(t.preventDefault(),this.openNewAttributeForm())}},th=zy;sync.attributes.RAttributesPanel=zy;goog.require("goog.dom");namespace("sync.attributes");var ll=function(){eh.call(this),this.root=null};goog.inherits(ll,eh);ll.prototype.render=function(t,o,i){this.dataAttrs=t,this.oxyNode=o,this.elementName=o&&o.getTagName();var n=this.allReadonly||i;this.nrAttrs=t?Object.keys(t).length:0;var r=this;sync.react.render(sync.react.h(th,{ref:s=>this.attributesPanelRef=s,readOnly:n,ctrl:r,attributes:t,oxyNode:o}),r.panelElement)};ll.prototype.unrender=function(){sync.react.unmountComponentAtNode(this.panelElement)};ll.prototype.focus=function(){if(this.delay.fireIfActive(),this.dataAttrs&&this.oxyNode){var t=sync.select.evalSelectionFunction(sync.util.isInReadOnlyContent),o=this,i;sync.react.render(sync.react.h(th,{readOnly:t,addNew:!0,ctrl:o,attributes:o.dataAttrs,oxyNode:o.oxyNode,ref:n=>i=n}),o.panelElement),i&&i.focus()}};var Yy=ll;sync.attributes.ReactAttributesPanel=ll;namespace("sync.view");var Qy=class extends sync.react.Component{constructor(t){super(t);this.handleClickOnOverflowActions_=this.handleClickOnOverflowActions_.bind(this)}createOverflowMenuItemContent_(t){var o=document.createDocumentFragment(),i=goog.dom.createDom("div",{class:"ui-action-small-icon",style:"background-image: url("+t.imageSrc+")"});return i&&(goog.dom.classlist.add(i,"goog-menuitem-icon"),goog.dom.appendChild(o,i)),goog.dom.appendChild(o,document.createTextNode(t.actionName)),o}handleClickOnOverflowActions_(t){t.stopPropagation();var o=this.props.actions,i=t.target;if(o.length){var n=new goog.ui.PopupMenu;n.render(document.body);var r=new goog.events.EventHandler;r.listen(n,goog.ui.Component.EventType.HIDE,function(){goog.dom.classlist.remove(i,"overflow-menu-open"),n.removeChildren(!0),n.dispose(),r.dispose()});for(var s=0;s<o.length;s++){var a=o[s],l=this.createOverflowMenuItemContent_(a),c=new goog.ui.MenuItem(l);n.addChild(c,!0),c.getElement().setAttribute("title",a.description),r.listen(c,goog.ui.Component.EventType.ACTION,goog.bind(this.handleOverflowAction_,this,n,a.actionId))}goog.dom.classlist.add(i,"overflow-menu-open"),n.showAtElement(i,goog.positioning.Corner.BOTTOM_START),goog.dom.classlist.add(n.getElement(),"overflow-menu--dropdown")}}handleOverflowAction_(t,o,i){t.hide(),this.props.onActionClick(o,i)}render(){return sync.react.h("button",{title:tr(msgs.MORE_ACTIONS_),className:"action overflow-menu",onClick:this.handleClickOnOverflowActions_})}},Jy=Qy;sync.view.OverflowMenu=Qy;namespace("sync.view");var $y=class extends sync.react.Component{render(){if(this.props.timestamp){var t=new Date(Number(this.props.timestamp)),o=t.toISOString(),i=sync.view.time.formatDateInternal(t,new Date),n=sync.view.time.formatFullDate(t);return sync.react.h("time",{"aria-label":i,title:n,dateTime:o},i)}return null}},Zy=$y;sync.view.Time=$y;namespace("sync.view");var e_=class extends sync.react.Component{constructor(t){super(t);this.onActionClick_=this.onActionClick_.bind(this)}renderActions_(t){var o=t.actions.map(goog.bind(function(i){var n=i.actionId==="Author/MarkAsDone",r=sync.react.genClasses(["action","kbd-focus-outline",n?"wideImage":""]),s=this.props.marker.isSelected;return sync.react.h("button",{onClick:goog.bind(this.onActionClick_,this,i.actionId),key:i.actionId,name:i.actionId,className:r,tabIndex:s?0:-1,title:i.description,style:{backgroundImage:"url("+i.imageSrc+")"}})},this));return t.overflowActions.length>0&&o.push(sync.react.h(Jy,{key:"overflow",actions:t.overflowActions,onActionClick:this.onActionClick_})),o}onActionClick_(t,o){o.stopPropagation(),this.props.onActionClick(this.props.marker.id,t)}shouldComponentUpdate(t){return t.marker!==this.props.marker}renderContent_(t){var o=null;return t.type!=="comment"&&(o=t.content,o||(o=this.getMarkerTypeDescriptionToRender_(t))),o!==null&&(o=sync.react.h("div",{className:sync.react.genClasses(["review-panel-content",t.isDone&&"done"]),style:{backgroundColor:t.type==="custom_highlight"&&t.color},"data-before":t.dataBefore},o)),o}getMarkerTypeDescriptionToRender_(t){var o,i;return t.onlyMarkup&&!t.subtype?i=tr(msgs.MARKUP_):t.onlyMarkup&&t.subtype?i=t.subtype:t.isWhitespace&&(i=tr(msgs.WHITESPACES_)),i&&(o=sync.react.h("span",{style:{fontStyle:"italic"}},"<"+i+">")),o}getChangeDescription(){var t=this.props.marker,o=t.author,i=t.type,n=t.subtype;let r=null;return i==="change_insert"?(r=msgs.INSERTED_BY_AUTHOR_,n==="surround"?r=msgs.SURROUNDED_BY_AUTHOR_:n==="split"&&(r=msgs.SPLIT_BY_AUTHOR_)):i==="change_delete"?r=msgs.DELETED_BY_AUTHOR_:i==="comment"&&(r=msgs.COMMENTED_BY_AUTHOR_),r&&tr(r,{"0":o})}render(){var t=this.props.marker,o=t.author,i=t.level,n=t.type;return o||(n!=="custom_highlight"||t.subtype!=="oxy_content_highlight")&&(o=tr(msgs.ANONYMOUS_)),sync.react.h("div",{id:this.props.id,style:{paddingLeft:i?i*15+8:8},"aria-selected":this.props.selected&&"true",role:"option",className:sync.react.genClasses(["review-panel-item",i?"reply":n,t.authorNumber,t.subtype&&"change_"+t.subtype,!i&&"review-root",t.isSelected&&"review-panel-item-selected",t.inSelection&&"review-panel-item-inSelection"]),onClick:this.props.onClick.bind(null,t.id)},sync.react.h("div",{className:sync.react.genClasses(["review-panel-header",t.isDone&&"done"])},sync.react.h("span",{className:"review-panel-author","aria-label":this.getChangeDescription()},o),sync.react.h(Zy,{timestamp:t.timestamp})),sync.react.h(Fl,{comment:t.comment,commentTokens:t.commentTokens,isDone:t.isDone,currentUserName:this.props.currentUserName}),this.renderContent_(t),sync.react.h("div",{className:"review-panel-actions"},this.renderActions_(t)))}},t_=e_;sync.view.ReviewPanelItem=e_;namespace("sync.view");var o_=class extends sync.react.Component{componentDidMount(){this.instructionsTooltip_=new goog.ui.AdvancedTooltip,sync.react.render(sync.react.h("div",null,this.props.children),this.instructionsTooltip_.getElement()),this.instructionsTooltip_.setHotSpotPadding(new goog.math.Box(20,20,20,20)),this.instructionsTooltip_.attach(this.button_)}componentWillUnmount(){this.instructionsTooltip_.dispose()}render(){return sync.react.h("span",{ref:t=>this.button_=t,className:"info-button sync-icon"})}},i_=o_;sync.view.InfoButton=o_;namespace("sync.view");var n_=class extends sync.react.Component{constructor(t){super(t);this.recycleBuster_=sync.ui.util.getGlobalId(),this.handleKeyDown_=this.handleKeyDown_.bind(this),this.handleInput_=this.handleInput_.bind(this),this.setMyOpenMentionsFilter_=this.setMyOpenMentionsFilter_.bind(this),this.filter_=null}componentDidMount(){this.filter_.addEventListener("clicksuffix",this.setMyOpenMentionsFilter_.bind(this))}handleKeyDown_(t){var o=this.filter_;if(t.keyCode===goog.events.KeyCodes.BACKSPACE&&t.ctrlKey&&o.getSelectionStart()){var i=o.getValue(),n=i.slice(0,o.getSelectionStart()),r=i.slice(o.getSelectionStart()),s=n.lastIndexOf(":"),a=n.lastIndexOf(" ");s>a&&s!=o.getSelectionStart()-1&&(o.setValue(n.slice(0,s+1)+r),t.preventDefault(),this.props.onFilterChanged(o.getValue()))}}handleInput_(){var t=this;clearTimeout(t.inputTimeout_),this.inputTimeout_=setTimeout(()=>this.props.onFilterChanged(this.filter_.getValue()),180)}setMyOpenMentionsFilter_(){var t='@"'+this.props.userName+'" status:open';this.filter_.setValue(t),this.props.onFilterChanged(t)}renderInfo_(){var t=sync.react.tr(msgs.USE_EXPLICIT_FILTERS_,{$EXPLICIT_FILTERS:sync.react.h("a",{key:"1",target:"_blank",href:sync.util.help.getDocumentationUrl(sync.util.help.Id.REVIEW_PANEL_FILTER)+"#gkq_bfd_d2b__filter_comments_and_changes"},tr(msgs.EXPLICIT_FILTERS_))});return sync.react.h("div",{className:"filter-query-instructions"},sync.react.h("p",null,tr(msgs.TYPE_WORD_TO_FILTER_),sync.react.h("br",null),t),sync.react.h("p",null,tr(msgs.EXAMPLE_USAGE_)),sync.react.h("ul",{className:"highlight-filters"},sync.react.h("li",null,"author:Jim type:change before:2016/09/24"),sync.react.h("li",null,"author:Jim type:highlight ..."),sync.react.h("li",null,"@Jane type:comment ...")))}render(){var t="mention-me-button ui-action-small-icon";return this.props.isFilterMyOpenMentionsButtonHighlighted&&(t+=" mention-me-button--emphasis"),sync.react.h("div",{className:"review-items-filter"},sync.react.h(Mo,{key:this.recycleBuster_,className:"review-items-filter-input",placeholder:tr(msgs.FILTER_),autoCorrect:"off",autoCapitalize:"off","aria-label":tr(msgs.TYPE_WORD_TO_FILTER_),onKeyDown:this.handleKeyDown_,onInput:this.handleInput_,"suffix-icon":t,"suffix-tooltip":tr(msgs.SHOW_MY_OPEN_MENTIONS_),"suffix-label":tr(msgs.SHOW_MY_OPEN_MENTIONS_),"show-clear":"true",ref:o=>this.filter_=o}),sync.react.h(i_,null,this.renderInfo_()))}},r_=n_;sync.view.ReviewPanelFilter=n_;var s_=class{parse(o){var i={words:[],mentions:[],before:null,after:null,type:null,author:null,status:null};for(var n of this.parseLexicalItems_(o))switch(n.type){case"before":case"after":i[n.type]=this.parseDate_(n.value);break;case"type":case"author":i[n.type]=n.value;break;case"words":case"mentions":i[n.type].push(n.value);break;case"status":i[n.type]=n.value;break;default:break}return i}parseLexicalItems_(o){for(var i=o.length>0?o.split(/\s+/g):[],n=[],r=0;r<i.length;){var s=i[r];if(s){let{termType:c,termValue:d}=this.extractType_(s);var{fullValue:a,indexOfNextTerm:l}=this.getFullTermValue_(d,r,i);n.push({type:c,value:a.toLowerCase()}),r=l}else r++}return n}extractType_(o){var i=["before","after","type","author","status"],n="words",r=o.indexOf(":");if(r!==-1){let a=o.substring(0,r);i.includes(a)&&(n=a,r+=1)}goog.string.startsWith(o,"@")&&o.length>1&&(r=1,n="mentions");var s=o.substring(r,o.length);return{termType:n,termValue:s}}getFullTermValue_(o,i,n){let r=goog.string.startsWith(o,'"')&&!goog.string.endsWith(o,'"'),s=o,a=i+1;if(r){for(var l=o,c=a;c<n.length&&(l+=" "+n[c],!goog.string.endsWith(n[c],'"'));c++);s=l,a=c+1}return s=goog.string.stripQuotes(s,'"'),{fullValue:s,indexOfNextTerm:a}}parseDate_(o){var i=o.split("/"),n=new Date(parseInt(i[0],10),parseInt(i[1],10)-1,parseInt(i[2],10));return n.getTime()}},a_=s_;namespace("sync.model");var Zr=function(t){this.markersModel=t,this.queryParser_=new a_};Zr.prototype.getFilter=function(t){var o=this.queryParser_.parse(t);return goog.bind(this.applyFilter_,this,o)};Zr.prototype.applyFilter_=function(t,o){var i=this.markersModel.getMarker(o);return this.applyFilterOnProps_(t,i)};Zr.CHANGE_TYPE_MATCH={CHANGE_INSERT:["change","insert"],CHANGE_DELETE:["change","delete"],COMMENT:["comment"],CUSTOM_HIGHLIGHT:["highlight"],CHANGE_ATTRIBUTE_INSERTED:["change","insert"],CHANGE_ATTRIBUTE_DELETED:["change","delete"],CHANGE_ATTRIBUTE_MODIFIED:["change"]};Zr.prototype.applyFilterOnProps_=function(t,o){var i=typeof o.getAuthor()=="string"?o.getAuthor().toLowerCase():"";if(t.author!==null&&!goog.string.startsWith(i,t.author))return!1;var n=Zr.CHANGE_TYPE_MATCH[o.getType()];if(t.type!==null&&n.indexOf(t.type)===-1||t.before!==null&&o.getTimestamp()>t.before||t.after!==null&&o.getTimestamp()<t.after||t.mentions.length>0&&!this.markerContainsMentions_(o,t.mentions))return!1;if(t.words.length>0){var r=o.getAuthorComment()||"",s=o.getContentProps().content||"",a=r+" "+s;a=a.toLowerCase();var l=goog.array.find(t.words,function(c){return goog.string.contains(a,c)||goog.string.contains(i,c)});if(!l)return!1}return!(t.status!==null&&(t.status==="done"&&!o.isDone()||t.status==="open"&&o.isDone()))};Zr.prototype.markerContainsMentions_=function(t,o){let i=/@"([^"]+)"|@([^\s]+)/g,n=t.getAuthorComment()||"";n=n.toLowerCase();let r;for(;(r=i.exec(n))!==null;){let s=r[1]||r[2];if(s&&o.find(l=>s.startsWith(l)))return!0}return!1};var l_=Zr;sync.model.MarkersQueryFilter=Zr;namespace("sync.model");var Cn=function(){this.directMatchingStatus_=new goog.structs.Map,this.discussionMatchingStatus_=new goog.structs.Map,this.discussionsByRoot_=new goog.structs.Map,this.markersRoot_=new goog.structs.Map,this.filter=this.nullFilter=function(){return!0}};Cn.prototype.allMarkersAreAccepted=function(){return this.filter===this.nullFilter};Cn.prototype.setFilter=function(t){this.filter=t||this.nullFilter;for(var o=this.discussionsByRoot_.getKeys(),i=0;i<o.length;i++){for(var n=this.discussionsByRoot_.get(o[i]),r=!1,s=0;s<n.length;s++){var a=this.filter(n[s]);this.directMatchingStatus_.set(n[s],a),r=r||a}this.discussionMatchingStatus_.set(o[i],r)}};Cn.prototype.discussionMatches=function(t){var o=this.markersRoot_.get(t),i=this.discussionMatchingStatus_.get(o);return goog.isDef(i)?i:this.directMatchingStatus_.get(t)};Cn.prototype.matches=function(t){return!!this.directMatchingStatus_.get(t)};Cn.prototype.markerAdded=function(t,o){var i=this.filter(t);this.directMatchingStatus_.set(t,i);var n=this.discussionsByRoot_.get(o);n===void 0&&(n=[],this.discussionsByRoot_.set(o,n)),n.push(t),this.markersRoot_.set(t,o);var r=this.discussionMatchingStatus_.get(o);this.discussionMatchingStatus_.set(o,r||i)};Cn.prototype.markerChanged=function(t){var o=this.directMatchingStatus_.get(t),i=this.filter(t);if(o!==i){this.directMatchingStatus_.set(t,i);var n=this.markersRoot_.get(t),r=this.discussionMatchingStatus_.get(n),s=this.discussionsByRoot_.get(n);if(r===!1&&i===!0)this.discussionMatchingStatus_.set(n,!0);else if(r===!0&&i===!1){var a=this.getDiscussionStatus_(s);a===!1&&this.discussionMatchingStatus_.set(n,!1)}}};Cn.prototype.getDiscussionStatus_=function(t){for(var o=0;o<t.length;o++)if(this.directMatchingStatus_.get(t[o]))return!0;return!1};Cn.prototype.markerDeleted=function(t){var o=this.markersRoot_.get(t),i=this.discussionsByRoot_.get(o)||[];if(goog.array.remove(i,t),this.directMatchingStatus_.remove(t),t===o)this.discussionMatchingStatus_.remove(o),this.discussionsByRoot_.remove(o);else{var n=this.getDiscussionStatus_(i);this.discussionMatchingStatus_.set(o,n)}this.markersRoot_.remove(t)};var c_=Cn;sync.model.FilteredMarkersModel=Cn;namespace("sync.view");var d_=class extends sync.react.Component{constructor(t){super(t);this.handleKeyDown_=goog.bind(this.handleKeyDown_,this)}nextItemIndex(t,o){var i=this.props.children.length,n;return o?n=(t+1)%i:n=(t+i-1)%i,n}getIndexToSkipTo_(t,o){var i=-1,n=this.props.children.length,r=goog.events.KeyCodes;return o===r.UP||o===r.DOWN?t===-1?o===r.UP?i=this.nextItemIndex(n,!1):i=this.nextItemIndex(-1,!0):i=this.nextItemIndex(t,o===r.DOWN):o===r.HOME?i=this.nextItemIndex(-1,!0):o===r.END&&(i=this.nextItemIndex(n,!1)),i}handleKeyDown_(t){var o=goog.events.KeyCodes;if(t.keyCode===o.ENTER||t.keyCode===o.SPACE){if(t.target===this.container_){var i=this.props.selectedKey;i!==null&&(this.props.onEnter(i),t.preventDefault(),t.stopPropagation())}}else{var n=this.keyToIndex_(this.props.selectedKey),r=this.getIndexToSkipTo_(n,t.keyCode);r!==-1&&(t.target!==this.container_&&this.container_.focus(),this.props.onChange(this.indexToKey_(r)),t.preventDefault(),t.stopPropagation())}}componentDidUpdate(){if(this.props.shouldScroll&&this.props.selectedKey){var t=this.keyToIndex_(this.props.selectedKey),o=this.container_.children[t];goog.style.scrollIntoContainerView(o,this.container_)}}indexToKey_(t){return t===-1?null:this.props.children[t].key}keyToIndex_(t){var o;return t===null?o=-1:o=goog.array.findIndex(this.props.children,function(i){return i.key===t}),o}focus(){this.container_&&this.container_.focus()}render(){var t=this.props.children,o=this.props.idPrefix,i=t.map(r=>{var s=r.key;return sync.react.cloneElement(r,{id:o+s,selected:s===this.props.selectedKey})}),n=null;return this.props.selectedKey!==null&&(n=o+this.props.selectedKey),sync.react.h("div",{className:this.props.className,role:"listbox","aria-activedescendant":n,tabIndex:0,onKeyDown:this.handleKeyDown_,ref:r=>this.container_=r},i)}},Gp=d_;sync.view.ListBox=d_;goog.require("goog.array");goog.require("goog.style");namespace("sync.view");var Fc=class extends sync.react.Component{constructor(t){super(t);this.handleAction_=this.handleAction_.bind(this),this.handleFilterChanged_=this.handleFilterChanged_.bind(this),this.highlightAddComment_=this.highlightAddComment_.bind(this),this.updateContainerRef_=this.updateContainerRef_.bind(this),this.selectMarkerAndFocus_=this.selectMarker_.bind(this,!0),this.changeMarkerSelection_=this.selectMarker_.bind(this,!1),this.focusActionWithArrows_=this.focusActionWithArrows_.bind(this);var o=this.props.editor,i=o.getEditingSupport();this.markersModel_=i.markersModel,this.actionsManager_=i.getActionsManager(),this.markersQuery_=new l_(this.markersModel_),this.foldingManager_=i.foldingManager,this.elementNameEnhancer_=i.elementNameEnhancer,this.actionsExecutor_=i.actionsExecutor;var n=this.markersModel_.getThrottledEventTarget(),r=R.ModelEventType,s=R.SelectionEventType;this.eventHandler_=new goog.events.EventHandler(this).listen(n,r.MARKER_DELETED,this.handleMarkerDeleted_,!0).listen(n,r.MARKER_ADDED,this.handleMarkerAdded_,!0).listen(n,r.REFRESH_MARKERS,this.handleRefreshMarkers_,!0).listen(n,[s.MARKER_SELECTED,r.MARKER_CHANGED,s.MARKER_UNSELECTED,s.MARKER_IN_SELECTION,s.MARKER_OUT_FROM_SELECTION],this.handleMarkerChanged_,!0).listen(i.getReadOnlyStatus(),ue.EventTypes.READ_ONLY_STATUS_CHANGED,this.handleRefreshMarkers_).listen(this.props.openState,"open",this.scrollToSelectedItem),this.filteredMarkersModel_=this.createFilteredMarkersModel_();var a=this.markersModel_.getMarkersInOrder(),l=a.map(this.getReviewItemData_,this);this.state={markers:l,filter:null};var c=this.actionsManager_.getEventSource();c&&this.eventHandler_.listen(c,pr.EventType.ACTIONS_STATUS_CHANGED,goog.bind(this.handleRefreshMarkers_,this))}componentWillUnmount(){this.eventHandler_.dispose()}createFilteredMarkersModel_(){for(var t=new c_,o=this.markersModel_.getDiscussions(),i=o.getKeys(),n=0;n<i.length;n++)for(var r=o.get(i[n]),s=0;s<r.length;s++)t.markerAdded(r[s],i[n]);return t.setFilter(this.state.filter),t}findIndexById_(t){for(var o=0;o<this.state.markers.length;o++)if(this.state.markers[o].id===t)return o;return-1}findInsertionPoint_(t){for(var o=t;goog.isDefAndNotNull(o);){o=this.markersModel_.getMarkersList().prev(o);var i=this.findIndexById_(o);if(i!==-1)return i}return-1}handleMarkerDeleted_(t){var o=this.findIndexById_(t.id);o!==-1&&(this.state.markers.splice(o,1),this.filteredMarkersModel_.markerDeleted(t.id),this.setState(this.state))}handleMarkerAdded_(t){var o=this.getReviewItemData_(t.id);if(o){var i=this.findIndexById_(t.id);i!==-1?this.state.markers[i]=o:(i=this.findInsertionPoint_(t.id),this.state.markers.splice(i+1,0,o)),this.filteredMarkersModel_.markerAdded(t.id,this.markersModel_.getDiscussionRoot(t.id)),this.setState(this.state)}}handleMarkerChanged_(t){var o=this.findIndexById_(t.id);if(o!==-1){var i=this.getReviewItemData_(t.id);i&&(this.state.markers[o]=i,this.filteredMarkersModel_.markerChanged(t.id),this.setState(this.state))}}handleRefreshMarkers_(){var t=this.markersModel_.getMarkersInOrder(),o=t.map(this.getReviewItemData_,this);this.filteredMarkersModel_=this.createFilteredMarkersModel_(),this.setState({markers:o})}handleAction_(t,o){if(!!this.markersModel_.getMarker(t)){var i=this.actionsManager_.getActionById(o),n=new I.Context({markerId:t}),r=this.markersModel_;r.getSelectionModel().selectMarker(t,!1,!0),r.getThrottledEventTarget().flush();var s=null,a=goog.events.listen(r,R.ModelEventType.MARKER_ADDED,function(c){s=c.id}),l=this.findIndexById_(t);i=De.createActionWithBoundContext(i,n),i=De.createActionWithExtraCallbacks(i,[()=>{goog.events.unlistenByKey(a),this.selectMarkerAfterAction_(l,s)}]),this.actionsExecutor_.executeAction(i)}}focusActionWithArrows_(t){var o=t.target;if(goog.dom.classlist.contains(o,"action")){var i=null;t.keyCode===goog.events.KeyCodes.LEFT?i=o.previousSibling:t.keyCode===goog.events.KeyCodes.RIGHT&&(i=o.nextSibling),i&&i.focus()}}selectMarkerAfterAction_(t,o){var i=o;if(!i){var n=Math.min(t,this.state.markers.length-1);n!==-1&&(i=this.state.markers[n].id)}let r=this.markersModel_;i!==null&&(r.getSelectionModel().selectMarker(i,!1,!0),r.getThrottledEventTarget().flush(),this.container_.focus())}selectMarker_(t,o){if(!this.markersModel_.getMarker(o))return;let i=this.markersModel_;i.getSelectionModel().selectMarker(o,!0,!t),i.getThrottledEventTarget().flush()}handleFilterChanged_(t){var o=null;t&&t.length>0&&(o=this.markersQuery_.getFilter(t)),this.filteredMarkersModel_.setFilter(o),this.setState({filter:o})}getCandidateActions_(t){let o=t.getType(),i=this.actionsManager_,n=["Author/EditMarkerReference"],r="Author/AcceptChange",s="Author/RejectChange";return t.isCustomHighlight()?n.push("Author/EditComment","Author/RemoveComment"):o===Se.Type.COMMENT?n.push("Author/Reply","Author/EditComment","Author/RemoveComment","Author/MarkAsDone"):t.isAttributeChange()?(i.getActionById(r)&&n.push(r),i.getActionById(s)&&n.push(s)):(n.push("Author/Reply"),i.getActionById(r)&&n.push(r),i.getActionById(s)&&n.push(s),n.push("Author/MarkAsDone")),n}getReviewItemData_(t){var o=null;let i=this.markersModel_.getMarker(t);if(i){let n=i.getType(),r=[],s=this.getCandidateActions_(i),a=this.markersModel_.getSelectionModel().getAllSelectedMarkers();o={id:i.getId(),author:i.getAuthor(),authorNumber:"author"+i.getAuthorNumber(),type:n.toLowerCase(),subtype:i.getChangeSubType(),timestamp:i.getTimestamp(),comment:i.getAuthorComment(),commentTokens:i.getCommentTokens(),level:i.getLevel(),isDone:i.isDone(),actions:this.buildActionDescriptors_(s,i),overflowActions:this.buildActionDescriptors_(r,i),isSelected:this.markersModel_.getSelectionModel().getSelectedMarker()===i.getId(),inSelection:a&&a.indexOf(i.getId())!==-1};let l=i.getContentProps();i.isAttributeChange()?(n==="CHANGE_ATTRIBUTE_INSERTED"?l.content=i.getAttrName()+'="'+l.newAttrValue+'"':n==="CHANGE_ATTRIBUTE_DELETED"?l.content=i.getAttrName()+'="'+i.getOldValue()+'"':n==="CHANGE_ATTRIBUTE_MODIFIED"&&(l.content=tr(msgs.NEW_VALUE_WAS_OLD_VALUE_,{$ATTRIBUTE_NAME:i.getAttrName(),$NEW_VALUE:l.newAttrValue,$OLD_VALUE:i.getOldValue()})),l.dataBefore=tr(msgs.ATTRIBUTE_)):i.getChangeSubType()==="surround"&&(l.content=sync.view.NodeRenderer.getRenderedTextForElement(l.getElementName(),l.getElementAttributes,this.elementNameEnhancer_),l.dataBefore=tr(msgs.SURROUNDED_WITH_)),goog.object.extend(o,l)}return o}buildActionDescriptors_(t,o){var i=[],n=new I.Context({markerId:o.getId()});for(var r of t){var s=this.actionsManager_.getActionById(r);if(s){var a=s.isEnabledFor(n);a&&i.push({description:this.getActionDescription_(r,s,o),actionId:r,imageSrc:this.getActionIcon_(r,o)})}}return i}getActionIcon_(t,o){var i=Fc.ACTIONS_TO_ICON_MAP[t];if(i==null){var n=this.actionsManager_.getActionById(t);i=n.getSmallIcon(sync.util.getHdpiFactor())}else t==="Author/MarkAsDone"&&(o.flag==="done"?i+="_on":i+="_off"),i+=(sync.util.getHdpiFactor()===2?"@2x":"")+".png";return i}getActionDescription_(t,o,i){var n;return t==="Author/MarkAsDone"?i.flag==="done"?n=tr(msgs.MARK_AS_OPEN_):n=tr(msgs.MARK_AS_DONE_):n=o.getShortName(),n}highlightAddComment_(){var t="Author/AddComment";workspace.toolbarController.highlightToolbarAction(t).then(()=>{var o=this.actionsManager_.getActionById(t);o&&o.isEnabled()&&this.actionsExecutor_.executeAction(o)})}updateContainerRef_(t){this.container_=t}componentDidUpdate(t,o){this.scrollToSelectedItem()}componentDidMount(){this.scrollToSelectedItem()}scrollToSelectedItem(){var t=this.selectedItem||this.inSelectionItem;if(t){var o=sync.react.findDomNode(t);if(o){var i=sync.react.findDomNode(this.container_);goog.style.scrollIntoContainerView(o,i)}}}renderToolbar(t,o){var i=null;if(this.props.editor.options.trackChanges!==sync.api.change_tracking.ChangeTrackingInitialState.FORCED&&this.props.editor.options.trackChanges!==sync.api.change_tracking.ChangeTrackingInitialState.FORCED_OFF){var n=this.actionsManager_.getActionById("Author/AcceptAllChanges"),r=this.actionsManager_.getActionById("Author/RejectAllChanges");if(n&&r){var s=this.getContextForAcceptReject(t,o),a=s===null?n.isEnabled():n.isEnabledFor(s),l=s===null?r.isEnabled():r.isEnabledFor(s);i=sync.react.h("div",{className:"review-panel__toolbar"},sync.react.h("button",{key:"accept-all",id:"Author/AcceptAllChanges",className:"oxy-button oxy-button--small",onClick:a?this.invokeAcceptRejectChanges_.bind(this,n,s):null,disabled:!a},tr(msgs.ACCEPT_ALL_)),sync.react.h("button",{key:"reject-all",id:"Author/RejectAllChanges",className:"oxy-button oxy-button--small",onClick:l?this.invokeAcceptRejectChanges_.bind(this,r,s):null,disabled:!l},tr(msgs.REJECT_ALL_)))}}return i}invokeAcceptRejectChanges_(t,o){o&&(t=De.createActionWithBoundContext(t,o)),this.actionsExecutor_.executeAction(t)}getContextForAcceptReject(t,o){var i=null;if(o){var n=[],r=this.markersModel_;goog.array.forEach(t,function(s){s=r.getMarker(s.id),s.isChange()&&n.push(s.id)}),i=new I.Context({markers:n})}return i}allMarkersAreVisible(){return this.filteredMarkersModel_.allMarkersAreAccepted()}getCurrentMarkers(){var t=this.state.markers;return this.allMarkersAreVisible()?t:goog.array.filter(t,function(o){return this.filteredMarkersModel_.discussionMatches(o.id)},this)}haveOpenMentionsToCurrentUser_(){var t=!1;for(var o of this.state.markers)if(!o.isDone&&o.commentTokens){var i=o.commentTokens.findIndex(n=>n.mention===this.markersModel_.getReviewerName())!==-1;if(i){t=!0;break}}return t}render(){var t=this.getCurrentMarkers();if(this.selectedItem=null,this.inSelectionItem=null,this.state.markers.length){var o=goog.array.map(t,function(a){return sync.react.h(t_,{key:a.id,marker:a,currentUserName:this.props.editor.userName,onActionClick:this.handleAction_,onClick:this.changeMarkerSelection_,ref:l=>{a.isSelected&&(this.selectedItem=l),a.inSelection&&(this.inSelectionItem=l)}})},this),i=this.markersModel_.getSelectionModel().getSelectedMarker(),n=sync.react.genClasses(["review-panel__content","kbd-focus-outline"]),r=this.renderToolbar(t,!this.allMarkersAreVisible());return sync.react.h("div",{className:"review-panel"},sync.react.h(r_,{onFilterChanged:this.handleFilterChanged_,userName:this.markersModel_.getReviewerName(),isFilterMyOpenMentionsButtonHighlighted:this.haveOpenMentionsToCurrentUser_()}),sync.react.h("div",{className:sync.react.genClasses(["rev-pane-cont-wrpp"]),onKeyDown:this.focusActionWithArrows_},sync.react.h(Gp,{ref:this.updateContainerRef_,className:n,shouldScroll:!1,selectedKey:i,idPrefix:"review-item",onEnter:this.selectMarkerAndFocus_,onChange:this.changeMarkerSelection_},o)),r)}else{var s=sync.react.tr(msgs.REVIEW_PANEL_PLACEHOLDER_,{$ADD_COMMENT_BUTTON:sync.react.h("div",{key:"add-comment",className:"review-placeholder-button",onClick:this.highlightAddComment_},sync.react.h("div",{className:"AddComment24"}))});return sync.react.h("div",{className:"review-panel"},sync.react.h("div",{className:"review-panel-placeholder"},s))}}};Fc.OPEN="open";Fc.ACTIONS_TO_ICON_MAP={"Author/RemoveComment":"images/no-sprite/Reject16_review","Author/EditComment":"images/no-sprite/Edit16_review","Author/AcceptChange":"images/no-sprite/Accept16_review","Author/RejectChange":"images/no-sprite/Reject16_review","Author/Reply":"images/no-sprite/Reply16_review","Author/MarkAsDone":"images/no-sprite/MarkAsDone_16_review","Author/EditMarkerReference":"images/no-sprite/EditReference16_review"};var oh=Fc;sync.view.ReviewPanel=Fc;var qp=class extends goog.Disposable{constructor(o,i){super();this.container_=o,this.markersModel_=i,this.notification_=null;var n=this.markersModel_.getThrottledEventTarget();this.eventHandler_=new goog.events.EventHandler(this),this.eventHandler_.listen(n,[R.ModelEventType.REFRESH_MARKERS,R.ModelEventType.MARKER_ADDED,R.ModelEventType.MARKER_DELETED,R.ModelEventType.MARKER_CHANGED],this.handleMarkerChanged_),this.handleMarkerChanged_()}disposeInternal(){this.eventHandler_.dispose(),this.clearNotification_()}handleMarkerChanged_(){this.clearNotification_(),this.isThereStillAMention_()&&this.renderNotification_()}isThereStillAMention_(){var o,i=this.markersModel_.getMarkersList().toArray();return o=!!goog.array.find(i,goog.bind(this.markerMentionsCurrentUser_,this)),o}markerMentionsCurrentUser_(o){var i=!1;if(!o.isDone()&&goog.isString(o.authorComment)){var n=this.markersModel_.getReviewerName(),r=new fa().tokenize(o.authorComment);for(var s of r)if(s.mention&&s.mention.toLowerCase()===n.toLowerCase()){i=!0;break}}return i}renderNotification_(){this.notification_=goog.dom.createDom("div",["navigation-rail__notification","review-notification"]),this.container_.appendChild(this.notification_)}clearNotification_(){goog.dom.removeNode(this.notification_)}};namespace("sync.review");var Oo=function(){this.openStateEventTarget_=new goog.events.EventTarget,this.eventHandler_=new goog.events.EventHandler(this),this.progress_=null,this.renderDelayTimer_=0,this.iconElement_=null};goog.inherits(Oo,sync.view.ViewRenderer);Oo.prototype.logger_=goog.log.getLogger("ReviewPanelView");Oo.prototype.getTitle=function(){return tr(msgs.REVIEW_)};Oo.prototype.install=function(t){this.panelElement=t};Oo.prototype.editorChanged=function(t){this.resetState_(),this.eventHandler_.listen(t,sync.api.Editor.EventTypes.DISPOSE,this.resetState_),this.progress_=goog.dom.createDom("div","review-panel-progress",tr(msgs.LOADING_)+"..."),goog.dom.appendChild(this.panelElement,this.progress_),this.renderDelayTimer_=setTimeout(goog.bind(function(){goog.dom.removeNode(this.progress_),sync.react.render(sync.react.createElement(oh,{editor:t,openState:this.openStateEventTarget_}),this.panelElement)},this),0),this.reviewNotification_=new qp(this.iconElement_,t.getEditingSupport().markersModel)};Oo.prototype.resetState_=function(){this.eventHandler_.removeAll(),sync.react.unmountComponentAtNode(this.panelElement),goog.dom.removeNode(this.progress_),this.reviewNotification_&&this.reviewNotification_.dispose(),clearTimeout(this.renderDelayTimer_)};Oo.prototype.opened=function(){this.openStateEventTarget_.dispatchEvent(oh.OPEN)};Oo.prototype.renderIcon=function(){return this.iconElement_=goog.dom.createDom("div",["ManageReviews24"]),this.iconElement_};Oo.prototype.cloneReviewPanelItemsForPrint=function(){for(var t=this.panelElement.cloneNode(!0),o=t.querySelectorAll(".review-panel-item"),i=0;i<o.length;i++){var n=o[i],r=i+1;this.decorateReviewItemWithIndex_(n,r)}return o};Oo.prototype.decorateReviewItemWithIndex_=function(t,o){goog.dom.classlist.add(t,"for-printing");var i=t.querySelector(".review-panel-header");goog.dom.insertChildAt(i,goog.dom.createTextNode("["+o+"] "),0)};Oo.prototype.disposeInternal=function(){this.resetState_(),this.openStateEventTarget_.dispose(),this.eventHandler_.dispose(),Oo.superClass_.disposeInternal.call(this)};var p_=Oo;sync.review.ReviewPanelView=Oo;goog.require("goog.ui.Toolbar");namespace("sync.view");var er=function(t,o,i,n){Be.call(this,o,n),this.editor=t,this.undoManager=i,this.config=new Co(er.getDefaultConfig_())};goog.inherits(er,Be);er.getDefaultConfig_=function(){return{toolbars:[{type:"list",name:"Builtin",displayName:tr(msgs.GENERAL_),children:[{type:"action",id:"Author/Save"},{type:"sep"},{type:"action",id:"Author/Undo"},{type:"action",id:"Author/Redo"},{type:"action",id:"Author/FindReplace"},{id:"Author/ShareSession",type:"action"},{type:"list",name:"More...",displayName:tr(msgs.MORE_ACTIONS_),iconDom:goog.dom.createDom("div","more"),children:[{type:"action",id:"Author/SaveAs"},{type:"action",id:"Author/Download"},{type:"action",id:"Author/Print"},{type:"action",id:"Author/ShowXML"},{type:"action",id:"General/Settings"},{type:"action",id:"Author/Styles"},{type:"action",id:"Author/Help"},{type:"action",id:"Author/ReportProblem"}]}]}]}};er.prototype.render=function(t,o){var i=er.superClass_.render.call(this,t,o);this.updateUndoButtons_();var n=goog.bind(this.updateUndoButtons_,this);return goog.events.listen(this.undoManager,Cd.EventType.UNDO_STATE_CHANGED,n),this.updateSaveButton_(),goog.events.listen(this.editor,sync.api.Editor.EventTypes.DIRTY_STATUS_CHANGED,goog.bind(this.updateSaveButton_,this)),i};er.prototype.updateUndoButtons_=function(){this.refreshActionsStatus(["Author/Undo","Author/Redo"])};er.prototype.updateSaveButton_=function(){this.refreshActionsStatus(["Author/Save"])};var g_=er;sync.view.BuiltinToolbar=er;goog.require("goog.async.Delay");namespace("sync.view");var es=function(t,o,i,n,r){if(Be.call(this,o,r,i),n){var s=goog.functions.debounce(this.refreshActionsStatus,5,this),a=goog.functions.debounce(this.refreshAcceptRejectActionsStatus_,5,this);n.getThrottledEventTarget().listen(R.SelectionEventType.MARKER_UNSELECTED,s),n.getThrottledEventTarget().listen(R.SelectionEventType.MARKER_SELECTED,s),n.getThrottledEventTarget().listen(R.ModelEventType.MARKER_DELETED,s),n.getThrottledEventTarget().listen(R.ModelEventType.MARKER_ADDED,a)}this.viewModesHandler_=t,this.config=new Co(es.DefaultConfig)};goog.inherits(es,Be);es.DefaultConfig={toolbars:[{type:"list",name:"Review",displayName:tr(msgs.REVIEW_),children:[{type:"action",id:"Author/TrackChanges"},{type:"action",id:"Author/AcceptChange"},{type:"action",id:"Author/RejectChange"},{type:"sep"},{type:"action",id:"Author/AddComment"},{type:"action",id:"Author/EditComment"},{type:"action",id:"Author/RemoveComment"},{type:"sep"},{type:"action",id:"Author/PrevMarker"},{type:"action",id:"Author/NextMarker"},{type:"sep"},{type:"list",name:"track_changes_view_mode",displayName:tr(msgs.CHANGE_TRACKING_VIEW_MODES_),iconDom:goog.dom.createDom("div",{className:"ui-action-large-icon",id:"track-changes-view-mode"}),children:[{type:"action",id:"Author/ViewAll"},{type:"action",id:"Author/ViewFinal"},{type:"action",id:"Author/ViewOriginal"}]}]}]};es.prototype.render=function(t,o){var i=es.superClass_.render.call(this,t,o);return this.viewModesHandler_.updateViewModesToolbarButton(),i};es.prototype.refreshAcceptRejectActionsStatus_=function(){this.refreshActionsStatus(["Author/AcceptChange","Author/RejectChange"])};var h_=es;sync.view.ReviewToolbar=es;namespace("sync.api");sync.api.SpellChecker=function(){};sync.api.SpellChecker.prototype.performFullSpellCheck=function(){};sync.api.SpellChecker.prototype.getIgnoredWords=function(){};sync.api.SpellChecker.prototype.getLearnWordAction=function(){};sync.api.SpellChecker.prototype.setLearnWordAction=function(t){};namespace("sync.spellcheck");var Xp=function(t,o,i,n,r){this.newWord_=n,_.call(this,{displayName:this.newWord_}),this.controller_=t,this.docId_=t.docId,this.startPosition_=o,this.oldWord_=i,this.position_=r};goog.inherits(Xp,_);Xp.prototype.actionPerformed=function(t){var o={$entity:{docId:this.docId_,newWord:this.newWord_,oldWord:this.oldWord_,startPosition:this.startPosition_,caretPosition:this.position_}};sync.rest.callAsync("RESTSpellChecker.suggestionReplace",o).then(goog.bind(function(i){this.controller_.applyUpdate_(i)},this)).thenAlways(function(){t&&t()})};var ih=Xp;sync.spellcheck.SpellCheckReplaceAction=Xp;namespace("sync.spellcheck");var cl=function(t){this.invalidatedNodes_=new Set,this.doc_=t.getDocument(),this.docUpdateIndex_=0,this.listenerKey_=t.listen(M.EventType.MODEL_CHANGED,o=>{o.docUpdate.containsModelChanges()&&(o.docUpdate.getAffectedNodeIds().forEach(i=>this.invalidatedNodes_.add(i)),o.isBackgroundSync||(this.docUpdateIndex_+=1))})};cl.prototype.filterSpellingErrors=function(t){return this.docUpdateIndex_>0?{}:goog.object.filter(t,(o,i)=>this.areErrorsValid_(o,i))};cl.prototype.areErrorsValid_=function(t,o){if(t.length!==0){for(var i of this.invalidatedNodes_)if(this.invalidates_(i,o))return!1}return!0};cl.prototype.invalidates_=function(t,o){var i;if(t===o)i=!0;else try{var n=this.doc_.createApiNodeOrNonStandard(t),r=this.doc_.createApiNodeOrNonStandard(o),s=r.compareDocumentPosition(n);i=(s&Node.DOCUMENT_POSITION_CONTAINED_BY)!=0||(s&Node.DOCUMENT_POSITION_CONTAINS)!=0}catch(l){var a=l instanceof ti;a||console.warn(l),i=!1}return i};cl.prototype.dispose=function(){goog.events.unlistenByKey(this.listenerKey_)};var nh=cl;sync.spellcheck.DocumentInvalidationTracker=cl;namespace("sync.spellcheck");var sE=500,po=function(t,o,i,n,r){this.controller_=t,this.docId_=t.docId,this.domUpdateSilencer_=r,this.doc_=sync.util.getDocDomHelper().getDocument(),this.highlighter_=new Ed(this.doc_,n),this.markerClass_=o,this.errorsFilter_=i,this.docUpdateListener_=null,this.delayedCheck_=new goog.async.Delay(goog.bind(this.partialSpellCheck_,this),sE),this.spellcheckNodesQueue_=[],this.ignoredWords_={},this.running_=null};po.prototype.clearWord=function(t,o){var i=o.replace(/"/g,'\\"'),n=t.replace(/"/g,'\\"'),r=this.doc_.querySelectorAll('.spellcheckingError[data-spellcheck-word="'+i+'"][data-lang="'+n+'"]');for(var s of r)this.highlighter_.removeMarkerInternal(s);sync.select.restoreSelection()};po.prototype.start=function(){this.running_=!0,this.fullSpellCheck_(),this.docUpdateListener_=goog.events.listen(this.controller_,M.EventType.MODEL_CHANGED,goog.bind(this.enqueueAffectedNodes_,this))};po.prototype.stop=function(){this.running_=!1,goog.events.unlistenByKey(this.docUpdateListener_),this.delayedCheck_.stop(),this.clearHighlights_()};po.prototype.clearHighlights_=function(){try{var t=sync.model.XmlDom.getDocumentNode(this.doc_);if(t){var o=h.getIdOfXmlNode(t);this.highlighter_.removeTextHighlightByClass(o,this.markerClass_)}}catch(i){sync.util.error.reloadPage(i)}};po.prototype.fullSpellCheck_=function(){var t=new nh(this.controller_);sync.rest.callAsync("RESTSpellChecker.fullSpellCheck",{docId:this.docId_}).then(o=>t.filterSpellingErrors(o)).then(o=>{var i=sync.model.XmlDom.getDocumentNode(this.doc_);return i?o:{}}).then(goog.bind(this.domUpdateSilencer_.delayIfUpdatesAreSilenced,this.domUpdateSilencer_)).then(goog.bind(this.highlightSpellingErrorsByNodeId_,this)).thenCatch(goog.bind(this.handleError_,this)).thenAlways(()=>t.dispose())};po.prototype.handleError_=function(t){this.running_&&sync.util.error.reloadPage(t)};po.prototype.partialSpellCheck_=function(){var t=this.spellcheckNodesQueue_;if(t.length!==0){var o=JSON.stringify(t),i=new nh(this.controller_);return sync.rest.callAsync("RESTSpellChecker.partialSpellCheck",{$entity:o,docId:this.docId_}).then(n=>i.filterSpellingErrors(n)).then(goog.bind(this.domUpdateSilencer_.delayIfUpdatesAreSilenced,this.domUpdateSilencer_)).then(goog.bind(this.highlightSpellingErrorsByNodeId_,this)).thenCatch(goog.bind(this.handleError_,this)).thenAlways(()=>i.dispose())}else return Promise.resolve()};po.prototype.saveDocumentSelection_=function(){var t=null;if(sync.model.XmlDom.isXmlNode(this.doc_.activeElement)){var o=sync.select.getSelection();t=o.save()}return t};po.prototype.restoreDocumentSelection_=function(t){t&&sync.select.setSelection(t.restore())};po.prototype.highlightSpellingErrorsByNodeId_=function(t){if(!goog.object.isEmpty(t)){var o=this.saveDocumentSelection_();try{goog.object.forEach(t,(i,n)=>{this.highlighter_.removeTextHighlightByClass(n,this.markerClass_);try{this.highlightSpellingErrors_(i),this.markNodeAsChecked_(n)}catch(r){console.warn(r),this.highlighter_.removeTextHighlightByClass(n,this.markerClass_)}})}finally{this.restoreDocumentSelection_(o)}}};po.prototype.highlightSpellingErrors_=function(t){t=this.errorsFilter_(t);var o=[];for(var i of t){var n=i.languageIsoName,r=i.startPosition,s=i.endPosition,a=p.toCanonicalRelativePosition(new sync.position.RelativeContentPosition(r.nodeId,r.sentinelType,r.distance)),l=p.toCanonicalRelativePosition(new sync.position.RelativeContentPosition(s.nodeId,s.sentinelType,s.distance+1)),c={className:this.markerClass_,"data-lang":n,"data-spellcheck-word":i.word,"aria-invalid":"spelling",role:"textbox"};i.suggestions&&(c["data-start-offset"]=i.startOffset,c["data-end-offset"]=i.endOffset,this.addSuggestions_(c,i.suggestions)),o.push({start:a,end:l,attrs:c})}this.highlighter_.renderTextHighlights(o)};po.prototype.addSuggestions_=function(t,o){for(var i=0;i<o.length;i++)t["data-suggestion"+i]=o[i]};po.prototype.enqueueAffectedNodes_=function(t){var o=t.docUpdate,i=o.getAffectedNodeIds();this.spellcheckNodesQueue_=this.spellcheckNodesQueue_.concat(i),goog.array.removeDuplicates(this.spellcheckNodesQueue_),t.isBackgroundSync?this.delayedCheck_.startIfNotActive():this.delayedCheck_.start()};po.prototype.markNodeAsChecked_=function(t){goog.array.remove(this.spellcheckNodesQueue_,t)};var u_=po;sync.spellcheck.SpellcheckPerformer=po;goog.require("goog.async.Delay");namespace("sync.spellcheck");var Ee=function(t,o,i,n){this.contextMenu_=t,this.controller_=o,this.docId_=o.docId,this.markerClass_="spellcheckingError",this.spellCheckPerformer_=new u_(o,this.markerClass_,goog.bind(this.filterErrors_,this),i,n),this.doc_=sync.util.getDocDomHelper().getDocument(),this.ignoredWords_={},this.potentialIgnore_=null,this.maxErrorsWarnShown_=!1,this.delayBeforePlaceholder_=100,this.delayAfterPlaceholder_=250,this.eventHandler_=new goog.events.EventHandler(this);var r=k.getInstance();this.mode_=r.getOption(S.SPELLCHECK_ENABLED)||"true",this.optionListenerKey=r.listenOption(S.SPELLCHECK_ENABLED,goog.bind(this.spellcheckModeChanged_,this)),this.mode_==="true"&&this.startSpellChecking_(),this.learnWordAction_=null};goog.inherits(Ee,sync.api.SpellChecker);Ee.MAX_SPELLING_ERRORS=500;Ee.prototype.spellcheckModeChanged_=function(t){this.mode_=t.value||this.mode_,this.mode_==="true"?this.startSpellChecking_():this.stopSpellChecking_()};Ee.prototype.startSpellChecking_=function(){var t=this.doc_.querySelector(".oxy-document");this.spellCheckPerformer_.start(),this.startRClickListener_(t)};Ee.prototype.stopSpellChecking_=function(){this.spellCheckPerformer_.stop(),this.eventHandler_.removeAll(),this.hideWarningStripe_(),this.contextMenu_.setSpellcheckEnabled(!1)};Ee.prototype.getSuggestions_=function(t){return sync.rest.callAsync("RESTSpellChecker.getSuggestions",{docId:this.docId_,nodeId:t.nodeId,sentinelType:t.sentinelType,distance:t.distance})};Ee.prototype.suggestionsReceived_=function(t,o){var i=!1,n=sync.select.getSelection(),r=n.start.toRelativeContentPosition();if(r.equals(t))i=!0;else{var s=n.end.toRelativeContentPosition();s.equals(t)&&(i=!0)}if(o&&i){for(var a=[],l=0;l<o.suggestions.length;l++)a.push(new mt(new ih(this.controller_,o.startPosition,o.word,o.suggestions[l],t)));a.length>0?this.contextMenu_.addSuggestions(a,this):this.addNoSuggestionsFoundItemInContextMenu()}};Ee.prototype.startRClickListener_=function(t){this.eventHandler_.listen(t,goog.events.EventType.CONTEXTMENU,this.handleSpellcheckingRClick_,!0)};Ee.prototype.getCaretPositionInSpellcheckingError_=function(t){var o=sync.select.getSelection();if(sync.select.evalSelectionFunction(sync.util.isInReadOnlyContent))return null;var i=null,n=goog.dom.getAncestorByClass(o.start.container,this.markerClass_);if(n===t)i=o.start.toRelativeContentPosition();else{var r=goog.dom.getAncestorByClass(o.end.container,this.markerClass_);r===t&&(i=o.end.toRelativeContentPosition())}return i};Ee.prototype.getTargetedError_=function(t){var o=sync.select.getSelection(),i=this.markerClass_,n=goog.dom.getAncestorByClass(t.target,i);if(!n&&(n=goog.dom.getAncestorByClass(o.start.container,i),!o.isEmpty()&&(n||(n=goog.dom.getAncestorByClass(o.end.container,i)),n))){var r=p.toCanonicalRelativePosition(o.start.toRelativeContentPosition());r.distance+=2*n.textContent.length;var s=p.toCanonicalRelativePosition(o.end.toRelativeContentPosition()),a=p.compareCanonicalRelativePositions(r,s);a<0&&(n=null)}return n};Ee.prototype.setIgnoreTarget_=function(t){this.potentialIgnore_=t};Ee.prototype.getIgnoreTarget=function(){return this.potentialIgnore_};Ee.prototype.addIgnoredWord=function(t,o){var i=this.ignoredWords_;t in i?i[t].push(o):i[t]=[o],this.spellCheckPerformer_.clearWord(t,o)};Ee.prototype.filterErrors_=function(t){for(var o=0,i=[],n=0;n<t.length&&o<Ee.MAX_SPELLING_ERRORS+1;n++){var r=t[n],s=this.ignoredWords_[r.languageIsoName]||[];s.indexOf(r.word)===-1&&(i.push(r),o++)}return o===Ee.MAX_SPELLING_ERRORS+1&&(i.pop(),this.maxErrorsWarnShown_||(this.maxErrorsWarnShown_=!0,this.showWarningStripe_())),i};Ee.prototype.showWarningStripe_=function(){var t=workspace.createEditorStripe(27);goog.dom.classlist.addAll(t,["flash-message-warn","vertical-align-children","spellchecker-warn"]);var o=goog.dom.createDom("button","corner-close-button"),i=goog.dom.createDom("a",{class:"more-details",title:tr(msgs.MORE_DETAILS_),href:sync.util.help.getDocumentationUrl(sync.util.help.Id.SPELLCHECK),target:"_blank"});goog.dom.append(t,goog.dom.createDom("span",null,tr(msgs.SPELL_MAX_WARN_)),i,o),this.eventHandler_.listen(o,goog.events.EventType.CLICK,this.hideWarningStripe_),this.warnStripe_=t};Ee.prototype.hideWarningStripe_=function(){this.warnStripe_&&(workspace.removeEditorStripe(this.warnStripe_),this.warnStripe_=null)};Ee.prototype.handleSpellcheckingRClickCustom_=function(t,o){var i=!1,n=goog.dom.dataset.get(t,"startOffset"),r=goog.dom.dataset.get(t,"endOffset");if(n&&r){var s=[],a=0,l=goog.dom.dataset.get(t,"suggestion"+a);for(i=!0;l;){var c=goog.dom.dataset.get(t,"spellcheckWord");s.push(new mt(new ih(this.controller_,null,c,l,o))),a++,l=goog.dom.dataset.get(t,"suggestion"+a)}if(!s.length>0){var d=new goog.ui.MenuItem(tr(msgs.NO_SUGGESTIONS_FOUND_));d.setEnabled(!1),s=[d]}setTimeout(goog.bind(function(){this.contextMenu_.addSuggestions(s,this)},this),0)}return i};Ee.prototype.handleSpellcheckingRClick_=function(t){this.contextMenu_.setSpellcheckEnabled(!1);var o=this.getTargetedError_(t);if(!!o){if(goog.userAgent.EDGE_OR_IE&&!this.waitedForSelection_){this.contextMenu_.setSpellcheckEnabled(!0),this.waitedForSelection_=!0,new goog.async.Delay(goog.bind(function(){this.handleSpellcheckingRClick_(t),this.waitedForSelection_=!1},this),0).start();return}var i=this.getCaretPositionInSpellcheckingError_(o);if(!!i&&(this.contextMenu_.setSpellcheckEnabled(!0),this.setIgnoreTarget_(o),!this.handleSpellcheckingRClickCustom_(o,i))){var n=this.getSuggestions_(i),r=new goog.Promise.race([n,sync.util.promise.delayPromise(this.delayBeforePlaceholder_)]);r.then(goog.bind(function(s){if(s==="timeout"){var a=new goog.ui.MenuItem(tr(msgs.LOADING_SUGGESTIONS_));a.setEnabled(!1),this.contextMenu_.addSuggestions([a],this)}},this)),r.then(goog.bind(function(s){return s==="timeout"?goog.Promise.all([sync.util.promise.delayPromise(this.delayAfterPlaceholder_),n]).then(function(a){return a[1]}):s},this)).then(goog.bind(this.suggestionsReceived_,this,i)).thenCatch(goog.bind(function(){this.addNoSuggestionsFoundItemInContextMenu()},this))}}};Ee.prototype.addNoSuggestionsFoundItemInContextMenu=function(){var t=new goog.ui.MenuItem(tr(msgs.NO_SUGGESTIONS_FOUND_));t.setEnabled(!1),this.contextMenu_.addSuggestions([t],this)};Ee.prototype.dispose=function(){this.stopSpellChecking_(),goog.events.unlistenByKey(this.optionListenerKey)};Ee.prototype.setLearnWordAction=function(t){this.learnWordAction_=t};Ee.prototype.getIgnoredWords=function(){return this.ignoredWords_};Ee.prototype.getLearnWordAction=function(){return this.learnWordAction_};Ee.prototype.performFullSpellCheck=function(){this.spellCheckPerformer_.fullSpellCheck_()};var m_=Ee;sync.spellcheck.SpellChecker=Ee;namespace("sync.util");var dl=function(){this.array_=[],this.availableIndex_=[]};dl.prototype.push=function(t){var o=this.array_.indexOf(t);return o!==-1||(o=this.getNextIndex_(),this.array_[o]=t),o};dl.prototype.get=function(t){return this.array_[t]};dl.prototype.remove=function(t){if(typeof t!="number")throw new Error("Invalid arguments, index must be a number");var o=this.array_[t];return this.array_[t]=void 0,this.availableIndex_.indexOf(t)===-1&&this.availableIndex_.push(t),o};dl.prototype.getNextIndex_=function(){return this.availableIndex_.shift()||this.array_.length};var f_=dl;sync.util.UniqueArray=dl;var zp=class{constructor(o){this.map=new Map,o&&o.forEach(this.add,this)}add(o){var i=this.map.get(o)||0;this.map.set(o,i+1)}remove(o){var i=this.map.get(o);i===1?this.map.delete(o):this.map.set(o,i-1)}contains(o){return this.map.has(o)}};var Yp=class{constructor(o){this.array=o||[],this.set=new zp(o)}removeFirst(){var o=this.array.shift();return this.set.remove(o),o}addFirst(o){this.array.unshift(o),this.set.add(o)}addLast(o){this.array.push(o),this.set.add(o)}contains(o){return this.set.contains(o)}size(){return this.array.length}};var Sn=class{constructor(o){this.documentContainer_=o}isImageVisible(o){return this.getVisibilityStatus_(o)!==Sn.VisibilityStatus.INVISIBLE}isStale(o){return!this.documentContainer_.contains(o)}setSrcToHtmlImages(o,i){for(var n of i)n.setAttribute("src",o),sync.util.image.restoreAltFromDataset(n)}getScrollTarget(){var o=this.documentContainer_;return sync.util.shouldUseIframe()&&(o=o.ownerDocument),o}getVisibilityStatus_(o){var i=this.documentContainer_,n=i.scrollTop,r=i.offsetHeight,s=Sn.VisibilityStatus.UNKNOWN,a=sync.positioning.getOffset(o,i);if(a){var l=a.y,c=350;l>n-c&&l<n+r+c?s=Sn.VisibilityStatus.VISIBLE:s=Sn.VisibilityStatus.INVISIBLE}return s}};Sn.VisibilityStatus={VISIBLE:1,INVISIBLE:2,UNKNOWN:3};var Qp=class extends goog.Disposable{constructor(){super();this.cacheSize_=1e7,this.cacheMemoryUsed_=0,this.cachedBlobUrls_=new Set}setInMemoryCacheSize(o){this.cacheSize_=o}fitsInCache(o){return o.size+this.cacheMemoryUsed_<this.cacheSize_}cacheBlob(o){var i=URL.createObjectURL(o);return this.cachedBlobUrls_.add(i),this.cacheMemoryUsed_+=o.size,i}disposeInternal(){super.disposeInternal(),this.cachedBlobUrls_.forEach(o=>URL.revokeObjectURL(o))}};var Jp=class extends goog.Disposable{constructor(o){super();this.lazyLoaderDomOperations_=o,this.blobCache_=new Qp,this.processedSrcs_=new Map,this.inProgressIds_=new Set,this.registerDisposable(this.blobCache_)}setInMemoryCacheSize(o){this.blobCache_.setInMemoryCacheSize(o)}async loadImages(o,i,n){this.inProgressIds_.add(o);try{var r,s;try{r=await fetch(i,{credentials:"include"}),s=await r.blob()}catch(c){throw this.processedSrcs_.set(i,{status:"error"}),c}if(this.isCacheableByBrowser_(r))this.processedSrcs_.set(i,{status:"loaded",loadUrl:i}),await this.loadImagesFromUrl_(i,n);else if(this.blobCache_.fitsInCache(s)){var a=this.blobCache_.cacheBlob(s);this.processedSrcs_.set(i,{status:"loaded",loadUrl:a}),await this.loadImagesFromUrl_(a,n)}else{var l=URL.createObjectURL(s);await this.loadImagesFromUrl_(l,n),URL.revokeObjectURL(l)}}finally{this.inProgressIds_.delete(o)}}isCacheableByBrowser_(o){var i=[...o.headers],n=i.find(r=>r[0]==="cache-control");return n&&n[1].indexOf("max-age=1000")!==-1}getSourceDescriptor(o){return this.processedSrcs_.get(o)}isLoadingInProgress(o){return this.inProgressIds_.has(o)}getLoadingImageCount(){return this.inProgressIds_.size}async loadImagesFromUrl_(o,i){this.lazyLoaderDomOperations_.setSrcToHtmlImages(o,i),await Promise.all(i.map(n=>new Promise((r,s)=>{n.onload=r,n.onerror=s})))}};goog.require("goog.structs.LinkedMap");goog.require("goog.events");goog.require("goog.array");namespace("sync.util");var pt=function(t,o){goog.Disposable.call(this),this.lazyLoaderDomOperations_=new Sn(t),this.layoutChangeTracker_=o,this.srcs_=new f_,this.images_=new goog.structs.LinkedMap,this.imageIdsToLoad_=new Yp,this.concurrentNr_=1,this.loadImagesInViewport_=goog.bind(this.loadImagesInViewport,this),this.setupImageLoader_()};goog.inherits(pt,goog.Disposable);pt.prototype.setupImageLoader_=function(){this.imageLoader_=new Jp(this.lazyLoaderDomOperations_),this.registerDisposable(this.imageLoader_)};pt.prototype.setInMemoryCacheSize=function(t){this.imageLoader_.setInMemoryCacheSize(t)};pt.prototype.finishedLoadingImage_=function(t){this.layoutChangeTracker_.dispatchLayoutChanged(),this.images_.remove(t),this.srcs_.remove(t)&&this.startLoadingNextImageIfSlotsAreAvailable_()};pt.prototype.lazyLoadAll=function(t){for(var o of t)this.lazyLoad(o)};pt.prototype.lazyLoad=function(t){var o=t.getAttribute("data-src");if(!!o){if(o=sync.util.image.addHidpiToSrc(o,t),goog.string.startsWith(o,"data:")){t.setAttribute("src",o);return}var i=this.imageLoader_.getSourceDescriptor(o);if(i){i.status==="loaded"&&t.setAttribute("src",i.loadUrl),i.status==="error"&&sync.util.image.displayImagePlaceholder(t);return}var n=this.srcs_.push(o),r=this.images_.get(n,[]);r.push(t),this.images_.set(n,r),sync.util.image.moveAltToDataset(t)}};pt.prototype.startLoadingNextImageIfSlotsAreAvailable_=async function(){var t=this.imageIdsToLoad_.removeFirst();if(goog.isDef(t)&&!this.imageLoader_.isLoadingInProgress(t)){var o=this.srcs_.get(t),i=this.images_.get(t);if(o&&i&&this.imageLoader_.getLoadingImageCount()<this.concurrentNr_)try{await this.imageLoader_.loadImages(t,o,i)}catch{sync.util.getDocDomHelper().getWindow().imgerr(i)}finally{this.finishedLoadingImage_(t)}else this.enqueueImageIdToLoad_(t)}};pt.prototype.isAlreadyEnqueued_=function(t){return this.imageIdsToLoad_.contains(t)||this.imageLoader_.isLoadingInProgress(t)};pt.prototype.enqueueImageIdToLoad_=function(t){this.isAlreadyEnqueued_(t)||this.imageIdsToLoad_.addLast(t)};pt.prototype.enqueueImageIdToLoadWithPriority_=function(t){this.isAlreadyEnqueued_(t)||this.imageIdsToLoad_.addFirst(t)};pt.prototype.startVisible=function(t){this.concurrentNr_=t>=1?t:1;var o=goog.bind(this.scheduleVisibleImagesLoad_,this),i=this.lazyLoaderDomOperations_.getScrollTarget();i.addEventListener(goog.events.EventType.SCROLL,o),this.enqueueLocalImages_(),o()};pt.prototype.scheduleVisibleImagesLoad_=function(){clearTimeout(this.loadTimeout),this.loadTimeout=setTimeout(this.loadImagesInViewport_,100)};pt.prototype.loadImagesInViewport=function(){requestAnimationFrame(()=>{this.removeStaleImages_(),this.enqueueVisibleImages_(),this.loadFirstEnqueuedImages_()})};pt.prototype.enqueueVisibleImages_=function(){this.images_.getKeys().filter(t=>!this.isAlreadyEnqueued_(t)).filter(t=>{var o=this.images_.get(t)||[];return o.some(i=>this.lazyLoaderDomOperations_.isImageVisible(i))}).forEach(t=>this.enqueueImageIdToLoad_(t))};pt.prototype.enqueueLocalImages_=function(){this.images_.getKeys().forEach(t=>{var o=this.images_.get(t)||[];o.length>0&&sync.util.image.isFromLocalDrive(o[0])&&this.enqueueImageIdToLoadWithPriority_(t)})};pt.prototype.getEnqueuedImagesCount=function(){return this.imageIdsToLoad_.size()};pt.prototype.loadFirstEnqueuedImages_=function(){for(var t=0;t<this.concurrentNr_;t++)this.startLoadingNextImageIfSlotsAreAvailable_()};pt.prototype.removeStaleImages_=function(){this.images_.getValues().forEach(t=>goog.array.removeIf(t,this.isStale_,this))};pt.prototype.isStale_=function(t){return this.lazyLoaderDomOperations_.isStale(t)};var y_=pt;sync.util.LazyLoader=pt;namespace("sync.ctrl");var $p=function(t){this.lazyLoader_=t};goog.inherits($p,pe);$p.prototype.enhanceDom=function(t){var o=this;goog.array.forEach(t,function(i){var n=i.getElementsByTagName("img");o.lazyLoader_.lazyLoadAll(n)})};var __=$p;sync.ctrl.LazyLoaderUpdateFilter=$p;namespace("sync.actions");var or=function(t,o,i){_.call(this,{description:tr(msgs.FILE_SAVE_AS_),displayName:tr(msgs.FILE_SAVE_AS_)+"..."}),this.docId_=t,this.editor_=o,this.problemReporter_=i,this.urlChooser_=workspace.getUrlChooser()};goog.inherits(or,_);or.prototype.isEnabled=function(){return this.urlChooser_&&this.urlChooser_.supportsOperation(sync.api.UrlChooser.Purpose.CHOOSE_SAVE_LOCATION)};or.prototype.actionPerformed=function(t){var o=new sync.api.UrlChooser.Context(sync.api.UrlChooser.Type.GENERIC,this.editor_.getTitle());this.urlChooser_.chooseUrl(o,goog.bind(this.saveLocationChosen_,this,t),sync.api.UrlChooser.Purpose.CHOOSE_SAVE_LOCATION)};or.prototype.saveLocationChosen_=function(t,o){o?sync.rest.callAsync("RESTDocumentManager.saveAs",{id:this.docId_,location:encodeURIComponent(o)}).then(goog.bind(this.documentSaved,this,o)).thenCatch(goog.bind(this.documentNotSaved_,this)).thenAlways(t||goog.nullFunction):t&&t()};or.prototype.documentNotSaved_=function(t){this.reportError_(t)};or.prototype.documentSaved=function(t){t&&(this.editor_.setDirty(!1),this.editor_.openLink(new sync.api.Editor.LinkOpenedEvent(t,!1,{},sync.api.Editor.LinkOpenedEvent.Target.SELF)))};or.prototype.reportError_=function(t){if(console.log(t),t instanceof sync.RESTException&&t.isUserActionRequired())this.editor_.dispatchEvent(new sync.api.Editor.WebappMessageReceived(t.getUserActionRequiredMessage(),sync.api.Editor.WebappMessageReceived.Context.SAVE_AS));else{var o=tr(msgs.DOCUMENT_COULD_NOT_BE_SAVED_);t instanceof sync.RESTException&&t.message&&(o=tr(msgs.ERROR_SAVING_DOCUMENT_)+" "+t.message),this.problemReporter_.showError(o,!0)}};var v_=or;sync.actions.SaveAsAction=or;goog.require("goog.dom");namespace("sync.util");sync.util.About={};sync.util.About.renderAboutInfo=function(t,o){var i,n=goog.dom.createDom("table","about-table"),r=t.table;return r&&r.length&&(r=goog.array.map(r,sync.util.About.createAboutTableRow_),goog.dom.append(n,r)),o?i=goog.dom.createDom("div","about-container",n,goog.dom.createDom("div",["about-logo","WebApp70"])):i=n,i};sync.util.About.createAboutTableRow_=function(t){var o=goog.dom.createDom("tr");if(t.errorClass&&goog.dom.classlist.addAll(o,t.errorClass.split(" ")),t.label&&o.append(goog.dom.createDom("td",{style:"vertical-align: top;"},t.label)),t.content){var i=sync.util.About.getMessage_(t.content),n=goog.dom.createDom("td",{style:"vertical-align: top;"+t.style},i);t.label||n.setAttribute("colspan","2"),o.append(n)}return o};sync.util.About.getMessage_=function(t){var o;try{o=JSON.parse(t)}catch{}return goog.isArray(o)?goog.dom.createDom("table","",goog.array.map(o,function(i){return sync.util.About.createAboutTableRow_(i)})):t};var FZ=sync.util.About;namespace("sync.actions");var qi=function(){De.call(this,{displayName:tr(msgs.ABOUT_),description:tr(msgs.ABOUT_)}),this.aboutInfo_=null};goog.inherits(qi,De);qi.prototype.actionPerformed=function(t){this.dialog_||this.createDialog_();let o=this.dialogElement_;goog.dom.removeChildren(o);var i=sync.util.About.renderAboutInfo({table:[{content:tr(msgs.LOADING_)}]},!0);o.appendChild(i),qi.retrieveAboutInfo().then(n=>{if(n){goog.dom.removeChildren(o);var r=sync.util.About.renderAboutInfo(n,!0);o.appendChild(r),goog.dom.removeNode(o.querySelector(".about-page-backup-error-message"))}else goog.dom.removeChildren(o),o.appendChild(goog.dom.createDom("div","",tr(msgs.COULD_NOT_LOAD_LICENSE_DETAILS_)))}),this.dialog_.show()};qi.prototype.createDialog_=function(){var t=workspace.createDialog();t.setTitle(tr(msgs.ABOUT_)),t.setButtonConfiguration([{key:"ok",caption:tr(msgs.OK_)}]),t.setResizable(!0);var o=t.getElement();o.id="about-page",o.textContent=tr(msgs.LOADING_),o.style.minWidth="540px",o.style.minHeight="165px",this.dialog_=t,this.dialogElement_=o};qi.prototype.setAboutInfo=function(t){this.aboutInfo_=t};qi.getUrl=function(){var t=window.location;return t.protocol+"//"+t.host+"/"+t.pathname.split("/")[1]+"/rest/"+it+"/about"};qi.prototype.dispose=function(){this.dialog_&&this.dialog_.dispose()};qi.retrieveAboutInfo=function(){return new Promise(t=>{var o=qi.getUrl();goog.net.XhrIo.send(o,i=>{let n=i.target;if(n.getStatus()===200)try{t(JSON.parse(n.getResponseText()))}catch(r){console.error("Could not parse about info.",r),t()}},"GET")})};var pl=qi;sync.actions.AboutAction=qi;namespace("sync.view");sync.view.ViewManager=function(){};sync.view.ViewManager.prototype.addView=function(t){};sync.view.ViewManager.prototype.removeView=function(t){};sync.view.ViewManager.prototype.getViewIds=function(){};sync.view.ViewManager.prototype.enableView=function(t){};sync.view.ViewManager.prototype.disableView=function(t){};sync.view.ViewManager.prototype.isViewEnabled=function(t){};sync.view.ViewManager.prototype.focusView=function(t){};sync.view.ViewManager.prototype.isViewOpen=function(t){};sync.view.ViewManager.prototype.installView=function(t,o,i){};sync.view.ViewManager.prototype.uninstallView=function(t){};sync.view.ViewManager.prototype.hideAppBar=function(){};sync.view.ViewManager.prototype.setSize=function(t,o){};sync.view.ViewManager.prototype.getActionsManager=function(t){};namespace("sync.ui");var gl=function(){goog.ui.TabBarRenderer.call(this)};goog.inherits(gl,goog.ui.TabBarRenderer);gl.CSS_CLASS="navigation-rail__tab-bar";gl.prototype.getCssClass=function(){return gl.CSS_CLASS};var E_=gl;sync.ui.NavigationRailRenderer=gl;namespace("sync.ui");var ts=function(){goog.ui.TabBarRenderer.call(this)};goog.inherits(ts,goog.ui.TabRenderer);ts.CSS_CLASS="navigation-rail__tab";ts.prototype.getCssClass=function(){return ts.CSS_CLASS};ts.prototype.getClassForState=function(t){var o=ts.superClass_.getClassForState.call(this,t),i=o.lastIndexOf("-");return o.substring(0,i)+"-"+o.substring(i)};var C_=ts;sync.ui.NavigationRailTabRenderer=ts;namespace("sync.ui");var ea=function(t){this.tabBar_=t,this.actionMayCollapse_=!1,this.actionListenerKey_=null;var o=30;this.delay_=new goog.async.Delay(this.enableCollapseAfterDelay_,o,this),goog.events.listen(this.tabBar_,goog.ui.Component.EventType.SELECT,this.handleTabSelect_,null,this)};ea.prototype.handleTabSelect_=function(){this.disableCollapseOnNextAction_(),this.actionListenerKey_=goog.events.listenOnce(this.tabBar_,goog.ui.Component.EventType.ACTION,goog.bind(this.enableCollapseOnNextAction_,this)),this.delay_.start()};ea.prototype.enableCollapseAfterDelay_=function(){this.actionListenerKey_&&goog.events.unlistenByKey(this.actionListenerKey_),this.enableCollapseOnNextAction_()};ea.prototype.isCollapsingAllowed=function(){return this.actionMayCollapse_};ea.prototype.enableCollapseOnNextAction_=function(){this.actionMayCollapse_=!0};ea.prototype.disableCollapseOnNextAction_=function(){this.actionMayCollapse_=!1};var S_=ea;sync.ui.SelectedViewCollapser=ea;goog.require("goog.dom");goog.require("goog.events.EventHandler");namespace("sync.ui");var T_=class extends goog.positioning.AbstractPosition{constructor(o,i){super();this.element=o,this.corner=i===Tn.Side.LEFT?goog.positioning.Corner.TOP_LEFT:goog.positioning.Corner.TOP_RIGHT}reposition(o,i,n){let r=goog.style.getBounds(this.element),s=new goog.math.Coordinate(0,r.height/2);goog.positioning.positionAtAnchor(this.element,this.corner,o,i,s,n)}},b_=class extends goog.ui.Tooltip{constructor(o,i){super(o);this.side=i}getPositioningStrategy(o){return new T_(this.activeEl_,this.side)}},Tn=function(t,o,i){goog.Disposable.call(this),this.target=t,this.side=i||Tn.Side.LEFT,this.textContent=o,this.eventHandler=new goog.events.EventHandler,this.registerDisposable(this.eventHandler),this.attach_()};goog.inherits(Tn,goog.Disposable);Tn.Side={LEFT:"left",RIGHT:"right"};Tn.prototype.attach_=function(){let t=this.renderEntryTooltip_(this.textContent),o=new b_(this.target,this.side);this.registerDisposable(o),o.getElement().appendChild(t)};Tn.prototype.renderEntryTooltip_=function(t){var o=goog.dom.createDom("div"),i=goog.dom.createDom("div","arrow-tooltip",t,o);t.length>12&&goog.dom.classlist.add(i,"arrow-tooltip--wrap-words");var n=this.side===Tn.Side.RIGHT?"arrow-tooltip--right":"arrow-tooltip--left";goog.dom.classlist.add(i,n);var r=this.side===Tn.Side.LEFT?"arrow-tooltip__arrow--right":"arrow-tooltip__arrow--left";return goog.dom.classlist.add(o,r),i};var Zp=Tn;sync.ui.ArrowTooltip=Tn;goog.require("goog.dom");namespace("sync.ui");var oe=function(){goog.events.EventTarget.call(this),this.tabContentMap=new Map,this.isExpanded=!0,this.tabRenderer=new C_,this.selectedViewCollapser_=null,this.toggleButtonInvisibleText_=null,this.toolbar_=null,this.actionsManagers_=new Map};goog.inherits(oe,goog.events.EventTarget);oe.EventType={SELECT:"select",UNSELECT:"unselect",COLLAPSED:"collapsed",EXPANDED:"expanded"};oe.SelectionChangedEvent=function(t,o){this.type=t,this.tab=o,this.isExpandColllapseButtonReversed=!1};oe.ExpandCollapseEvent=function(t){this.type=t};oe.prototype.render=function(t){this.tabBar=new goog.ui.TabBar(goog.ui.TabBar.Location.START,new E_),this.element=goog.dom.createDom("div","navigation-rail"),t.appendChild(this.element);var o=goog.dom.createDom("div","navigation-rail__rail");this.element.appendChild(o),this.tabBar.render(o);var i=goog.dom.createDom("div","navigation-rail__toggle-button-icon");this.toggleButtonInvisibleText_=goog.dom.createDom("span","screenreader-text"),this.expandCollapseButton=goog.dom.createDom("button","navigation-rail__toggle-button",i,this.toggleButtonInvisibleText_),goog.dom.insertChildAt(o,this.expandCollapseButton,0),this.isExpandColllapseButtonReversed&&this.markExpandCollapseButtonAsReversed_(),this.updateToggleButtonCaption_(),goog.events.listen(this.expandCollapseButton,goog.events.EventType.CLICK,goog.bind(this.toggleOnButtonClick_,this)),this.navigationRailView=goog.dom.createDom("div","navigation-rail__view"),this.element.appendChild(this.navigationRailView),this.handleVisibilityToggle_()};oe.prototype.updateToggleButtonCaption_=function(){var t=this.isExpanded?tr(msgs.HIDE_):tr(msgs.SHOW_);this.expandCollapseButton.title=t,this.toggleButtonInvisibleText_.textContent=t};oe.prototype.toggleOnButtonClick_=function(){this.toggleExpandCollapse_(!this.isExpanded)};oe.prototype.toggleExpandCollapse_=function(t){this.updateRailState(t),this.dispatchExpandCollapseEvent_()};oe.prototype.updateRailState=function(t){this.isExpanded=t,goog.dom.classlist.enable(this.element,"navigation-rail--collapsed",!this.isExpanded),this.updateToggleButtonCaption_()};oe.prototype.dispatchExpandCollapseEvent_=function(){var t=this.isExpanded?oe.EventType.EXPANDED:oe.EventType.COLLAPSED;this.dispatchEvent(new oe.ExpandCollapseEvent(t))};oe.prototype.reverseExpandCollapseButton=function(){this.isExpandColllapseButtonReversed=!0,this.expandCollapseButton&&this.markExpandCollapseButtonAsReversed_()};oe.prototype.markExpandCollapseButtonAsReversed_=function(){goog.dom.classlist.add(this.expandCollapseButton,"navigation-rail__toggle-button--reversed")};oe.prototype.handleVisibilityToggle_=function(){goog.events.listen(this.tabBar,goog.ui.Component.EventType.ACTION,this.handleTabAction_,null,this),goog.events.listen(this.tabBar,goog.ui.Component.EventType.SELECT,this.handleTabSelect_,null,this),goog.events.listen(this.tabBar,goog.ui.Component.EventType.UNSELECT,this.handleTabUnselect_,null,this),this.selectedViewCollapser_=new S_(this.tabBar)};oe.prototype.handleTabAction_=function(){this.isExpanded?this.selectedViewCollapser_.isCollapsingAllowed()&&this.toggleExpandCollapse_(!1):this.toggleExpandCollapse_(!0)};oe.prototype.handleTabSelect_=function(t){var o=t.target;this.dispatchEvent(new oe.SelectionChangedEvent(oe.EventType.SELECT,o));var i=o.getId(),n=this.tabContentMap.get(i);goog.dom.classlist.add(n,"navigation-rail__view-entry--visible")};oe.prototype.handleTabUnselect_=function(t){var o=t.target;this.dispatchEvent(new oe.SelectionChangedEvent(oe.EventType.UNSELECT,o));var i=o.getId(),n=this.tabContentMap.get(i);goog.dom.classlist.remove(n,"navigation-rail__view-entry--visible")};oe.prototype.addTabForView=function(t,o,i){var n=o.renderIcon(),r=o.getTitle();n||(n=this.renderIconFromTitle_(o.getTitle()));var s=goog.dom.createDom("div","navigation-rail__button",n),a=this.isExpandColllapseButtonReversed?Zp.Side.RIGHT:Zp.Side.LEFT,l=new Zp(s,r,a);this.registerDisposable(l);var c=new goog.ui.Tab(s,this.tabRenderer);c.setId(t),c.setAriaLabel(r);var d=goog.dom.createDom("div","navigation-rail__header"),g=goog.dom.createDom("div","navigation-rail__header-title",r);d.appendChild(g);let m=o.getToolbarDescriptor(),v=o.getToolbarActionsMap();if(m&&v){let D=this.getToolbarActionsManager_(v);this.actionsManagers_.set(t,D);let H=new Be(D);this.registerDisposable(H);let ne=goog.dom.createDom("div","navigation-rail__header-toolbar");H.render([m],ne),d.appendChild(ne)}var C=goog.dom.createDom("div",{className:"navigation-rail__view-entry-body",id:t+"-content"}),N=goog.dom.createDom("div","navigation-rail__view-entry",[d,C]);return this.navigationRailView.appendChild(N),this.tabContentMap.set(t,N),goog.isNumber(i)?this.tabBar.addChildAt(c,i,!0):this.tabBar.addChild(c,!0),C};oe.prototype.getToolbarActionsManager_=function(t){let o=new pr;return Object.keys(t).forEach(i=>{o.registerAction(i,t[i],"")}),o};oe.prototype.getActionsManager=function(t){return this.actionsManagers_.get(t)};oe.prototype.renderIconFromTitle_=function(t){var o=t.trim().split(" "),i="";o.forEach(function(r){i+=r.substring(0,1).toUpperCase()});var n=goog.dom.createDom("div","navigation-rail__icon",i);return goog.dom.createDom("div","navigation-rail__icon-container",n)};oe.prototype.setViewTabEnabled=function(t,o){var i=this.tabBar.getChild(t);i.setVisible(o)};oe.prototype.removeTab=function(t){var o=this.tabBar.getChild(t);this.tabBar.removeChild(o,!0),this.navigationRailView.removeChild(this.tabContentMap.get(t)),this.actionsManagers_.delete(t)};oe.prototype.setActiveTab=function(t){var o=this.tabBar.getChild(t),i=this.tabBar.getSelectedTab();i&&i.getId()===t||this.tabBar.setSelectedTab(o)};oe.prototype.getActiveTabId=function(){var t=null,o=this.tabBar.getSelectedTab();return o&&(t=o.getId()),t};var hl=oe;sync.ui.NavigationRail=oe;goog.require("goog.dom");goog.require("goog.dom.dataset");goog.require("goog.events");goog.require("goog.structs.Map");namespace("sync.view");var W=function(t,o,i){this.side=i||W.Side.RIGHT,this.intendedState_=W.IntendedState.DEFAULT,this.container=t,this.sideViewController=o,this.views=[],this.opened_=!1,this.navigationRail=new hl,this.side===W.Side.LEFT&&this.navigationRail.reverseExpandCollapseButton(),this.navigationRail.render(this.container),this.attachListeners_(this.navigationRail)};goog.inherits(W,goog.Disposable);W.prototype.attachListeners_=function(t){goog.events.listen(t,hl.EventType.SELECT,this.handleViewSelect_,null,this),goog.events.listen(t,hl.EventType.UNSELECT,this.handleViewUnselect_,null,this),goog.events.listen(t,hl.EventType.EXPANDED,this.sideViewController.expand,null,this.sideViewController),goog.events.listen(t,hl.EventType.COLLAPSED,this.sideViewController.collapse,null,this.sideViewController)};W.prototype.handleViewSelect_=function(t){var o=t.tab,i=o.getId(),n=this.getViewDescriptorById_(i);n&&this.opened_&&n.view.opened(),n&&(n.openedByTheUser=!0),this.activeViewDescriptor_=n};W.prototype.handleViewUnselect_=function(t){var o=t.tab.getId(),i=this.getViewDescriptorById_(o);i&&i.view.closed()};W.prototype.getSideViewIds=function(){return this.views.map(t=>t.id)};W.prototype.relayout=function(){};W.prototype.unregisterView=function(t){var o=this.getViewDescriptorById_(t);o&&(goog.array.remove(this.views,o),this.activeViewDescriptor_===o?(this.deactivateCurrentView_(),this.disposeView_(o),this.activateFirstEnabledView_(!1)):this.disposeView_(o),this.relayout())};W.prototype.registerView=function(t,o,i){var n={id:t,view:o,enabled:!1};this.views.splice(i,0,n);var r=this.navigationRail.addTabForView(t,o,i);try{o.install(r),this.navigationRail.setViewTabEnabled(t,n.enabled)}catch(s){console.error(s)}};W.prototype.setViewInitiallyClosed=function(t,o){var i=this.getViewDescriptorById_(t);i.initiallyClosed=o};W.prototype.isViewEnabled=function(t){var o=this.getViewDescriptorById_(t);return o&&o.enabled};W.prototype.hasEnabledViews=function(){return goog.array.findIndex(this.getSideViewIds(),this.isViewEnabled,this)!==-1};W.prototype.hasOnlyInitiallyClosedViews_=function(){return this.getSideViewIds().findIndex(t=>this.isViewInitiallyOpened(t))===-1};W.prototype.isViewInitiallyOpened=function(t){var o=this.getViewDescriptorById_(t);return o&&o.enabled&&(o.openedByTheUser||o.initiallyClosed!==!0)};W.prototype.getViewDescriptorById_=function(t){return goog.array.find(this.views,o=>o.id===t)};W.prototype.setViewEnabled=function(t,o){var i=this.getViewDescriptorById_(t);i&&i.enabled!==o&&(i.enabled=o,i===this.activeViewDescriptor_&&!o&&this.deactivateCurrentView_(),this.activeViewDescriptor_||this.activateFirstEnabledView_(!1),this.navigationRail.setViewTabEnabled(t,o),this.relayout())};W.prototype.deactivateCurrentView_=function(){this.activeViewDescriptor_&&(this.navigationRail.setActiveTab(null),this.activeViewDescriptor_=null)};W.prototype.activateFirstEnabledView_=function(t){this.deactivateCurrentView_();var o=this.getFirstViewToActivate_(t);o&&this.activateView(o.id)};W.prototype.getFirstViewToActivate_=function(t){return this.views.find((o,i)=>o.enabled&&(o.openedByTheUser||t||o.initiallyClosed!==!0))};W.prototype.activateView=function(t){this.navigationRail.setActiveTab(t)};W.prototype.getActiveView=function(){return this.navigationRail.getActiveTabId()};W.prototype.setOpen=function(t,o){this.setEffectiveOpenState(t,o),t?this.intendedState_=W.IntendedState.OPEN:this.intendedState_=W.IntendedState.CLOSED};W.prototype.setEffectiveOpenState=function(t,o){this.opened_=t,!this.activeViewDescriptor_&&t&&!o?this.activateFirstEnabledView_(!0):this.activeViewDescriptor_&&(t?(this.relayout(),this.activeViewDescriptor_.view.opened()):this.activeViewDescriptor_.view.closed())};W.prototype.updateNavigationRail=function(t){this.navigationRail.updateRailState(t)};W.prototype.isOpen=function(){return this.opened_};W.prototype.computeEffectiveState=function(){var t=this.intendedState_;return t===W.IntendedState.OPEN?this.hasEnabledViews():t===W.IntendedState.CLOSED?!1:this.hasEnabledViews()&&!this.hasOnlyInitiallyClosedViews_()};W.prototype.disposeView_=function(t){t.view.dispose(),this.navigationRail.removeTab(t.id)};W.prototype.disposeInternal=function(){for(var t=0;t<this.views.length;t++)this.disposeView_(this.views[t]);W.superClass_.disposeInternal.call(this)};W.prototype.getActionsManager=function(t){return this.navigationRail.getActionsManager(t)};W.Side={LEFT:"left",RIGHT:"right"};W.IntendedState={OPEN:"open",CLOSED:"closed",DEFAULT:"default"};var Uc=W;sync.view.SideViewManager=W;namespace("sync.ui.layout");var ta=function(t,o){this.layoutManager=t,this.side=o};ta.Side={LEFT:"left",RIGHT:"right"};ta.prototype.expand=function(){this.side===ta.Side.RIGHT?this.layoutManager.openEastPane():this.layoutManager.openWestPane()};ta.prototype.collapse=function(){this.side===ta.Side.RIGHT?this.layoutManager.closeEastPane():this.layoutManager.closeWestPane()};var Bc=ta;sync.ui.layout.SideViewController=ta;goog.require("goog.structs.Map");namespace("sync.view");var K=function(t){this.layoutManager=t;var o=this.layoutManager.getEastPane();if(o){var i=new Bc(t,Bc.Side.RIGHT);this.rightSideViewManager_=new Uc(o,i,Uc.Side.RIGHT)}var n=this.layoutManager.getWestPane();if(n){var r=new Bc(t,Bc.Side.LEFT);this.leftSideViewManager_=new Uc(n,r,Uc.Side.LEFT)}this.views=new goog.structs.Map,this.editor=null,goog.events.listen(t,Ge.LAYOUT_CHANGED,goog.bind(this.layoutChanged_,this)),goog.events.listen(t,Ge.PANEL_TOGGLED,goog.bind(this.panelToggled_,this)),goog.events.listen(t,Ge.PANEL_INITIALIZED,goog.bind(this.panelInitialized_,this))};goog.inherits(K,sync.view.ViewManager);K.REVIEW_PANEL_ID="review-panel-list";K.prototype.defaultLayout=[{id:K.REVIEW_PANEL_ID},{id:"attributes-panel-table"},{id:"validation-panel-table"},{id:"find-replace-view"}];(function(){for(var t=1;t<10;t++)K.prototype.defaultLayout.push({id:"framework-view-"+t})})();K.prototype.addView=function(t){this.defaultLayout.unshift({id:t})};K.prototype.removeView=function(t){goog.array.removeIf(this.defaultLayout,o=>o.id===t),this.uninstallView(t)};K.prototype.disableView=function(t){var o=this.getSideViewManager_(t);o&&(o.setViewEnabled(t,!1),this.hidePaneIfEmpty_(o))};K.prototype.isViewEnabled=function(t){var o=this.getSideViewManager_(t);return o&&o.isViewEnabled(t)};K.prototype.enableView=function(t){var o=this.getSideViewManager_(t);o&&(o.setViewEnabled(t,!0),this.showPaneIfPopulated_(o))};K.prototype.showPaneIfPopulated_=function(t){t.hasEnabledViews()&&this.showPane_(t),this.updatingEffectivePanelState_=!0;try{var o=t.computeEffectiveState();o?this.openPane_(t):this.closePane_(t)}finally{this.updatingEffectivePanelState_=!1}};K.prototype.showPane_=function(t){this.rightSideViewManager_===t?this.layoutManager.showEastPane():this.layoutManager.showWestPane()};K.prototype.openPane_=function(t){t===this.rightSideViewManager_?this.layoutManager.openEastPane():this.layoutManager.openWestPane()};K.prototype.closePane_=function(t){t===this.rightSideViewManager_?this.layoutManager.closeEastPane():this.layoutManager.closeWestPane()};K.prototype.hidePaneIfEmpty_=function(t){t.hasEnabledViews()||(t===this.rightSideViewManager_?this.layoutManager.hideEastPane():this.layoutManager.hideWestPane())};K.prototype.getViewIds=function(){return this.defaultLayout.map(t=>t.id)};K.prototype.setEditor=function(t){this.views.forEach(goog.bind(this.changeViewEditor_,this,t)),this.editor=t};K.prototype.changeViewEditor_=function(t,o,i){if(o.supportsEditor(t)){this.enableView(i);try{o.editorChanged(t)}catch(n){console.log(n)}}else this.disableView(i)};K.prototype.uninstallView=function(t){this.views.remove(t);var o=this.getSideViewManager_(t);o&&(o.unregisterView(t),this.hidePaneIfEmpty_(o))};K.prototype.getViewProperties_=function(t){var o;if(t!=null&&typeof t=="object")o=t;else{var i=typeof t=="string"?t:"right";o={side:i,initiallyClosed:!1}}return o};K.prototype.getInstallDestinationSide_=function(t){var o=t.side;return o!=="right"&&this.allViewsShouldBePlacedOnRightSide_()&&(o="right"),o};K.prototype.allViewsShouldBePlacedOnRightSide_=function(){var t=604;return sync.util.isMobile()&&sync.util.getScreenWidth()<=t};K.prototype.installView=function(t,o,i){for(var n=this.getViewProperties_(i),r=this.getInstallDestinationSide_(n)==="left"?this.leftSideViewManager_:this.rightSideViewManager_,s=new goog.structs.Set(r.getSideViewIds()),a=goog.array.findIndex(this.defaultLayout,g=>g.id===t),l=a!==-1,c=0,d=0;d<a;d++)s.contains(this.defaultLayout[d].id)&&c++;l&&!s.contains(t)&&(this.views.set(t,o),r.registerView(t,o,c),r.setViewInitiallyClosed(t,n.initiallyClosed),this.showPaneIfPopulated_(r),this.editor!=null&&this.changeViewEditor_(this.editor,o,t))};K.prototype.getSideViewManager_=function(t){return goog.array.find([this.rightSideViewManager_,this.leftSideViewManager_],function(o){return o&&goog.array.contains(o.getSideViewIds(),t)})};K.prototype.focusView=function(t){var o=this.getSideViewManager_(t);if(o&&o.isViewEnabled(t)){o===this.rightSideViewManager_?this.layoutManager.openEastPane():this.layoutManager.openWestPane(),o.activateView(t);var i=this.views.get(t);i.focus()}};K.prototype.isViewOpen=function(t){var o=this.getSideViewManager_(t),i=o&&o.isOpen()&&o.getActiveView()===t;return!!i};K.prototype.hideAppBar=function(){this.layoutManager.removeAppBar()};K.prototype.removeMainToolbar=function(){this.layoutManager.removeMainToolbar()};K.prototype.addMainToolbar=function(){this.layoutManager.addMainToolbar()};K.prototype.expandView_=function(t){this.rightSideViewManager_.activateView(t),this.leftSideViewManager_.activateView(t)};K.prototype.dispose=function(){goog.dispose(this.rightSideViewManager_),goog.dispose(this.leftSideViewManager_)};K.prototype.layoutChanged_=function(){this.rightSideViewManager_.relayout(),this.leftSideViewManager_.relayout()};K.prototype.panelToggled_=function(t){var o=t.side==="left"?this.leftSideViewManager_:this.rightSideViewManager_;this.updatingEffectivePanelState_?o.setEffectiveOpenState(t.open,!1):o.setOpen(t.open,!1),o.updateNavigationRail(t.open)};K.prototype.panelInitialized_=function(t){var o=t.side==="left"?this.leftSideViewManager_:this.rightSideViewManager_;t.isIntendedStateConfigured?o.setOpen(t.open,!0):o.setEffectiveOpenState(t.open,!0),o.updateNavigationRail(t.open)};K.prototype.setSize=function(t,o){this.layoutManager.setSize(t,o)};K.prototype.getView=function(t){return this.views.get(t)};K.prototype.getActionsManager=function(t){var o;return this.leftSideViewManager_&&(o=this.leftSideViewManager_.getActionsManager(t),o)||this.rightSideViewManager_&&(o=this.rightSideViewManager_.getActionsManager(t)),o};var eg=K;sync.view.WorkspaceViewManager=K;namespace("sync.actions");var oa=function(t,o,i){_.call(this,{keyStrokeStr:"M1 P",displayName:tr(msgs.PRINT_),description:tr(msgs.PRINT_CURRENT_DOCUMENT_),smallIconClass:"Print16"}),this.xmlDocumentProvider_=t,this.workspaceViewManager_=o,this.layoutManager_=i};goog.inherits(oa,_);oa.prototype.getMarker=function(t,o){var i=t.id.substring("review-item".length);return o.querySelectorAll('[data-marker-id="'+i+'"]')[0]};oa.prototype.addReviewItems=function(t){for(var o=this.workspaceViewManager_.getView(eg.REVIEW_PANEL_ID),i=o?o.cloneReviewPanelItemsForPrint():[],n=0;n<i.length;n++){var r=i[n],s=n+1,a=this.getMarker(r,t);a&&(this.wrapContent_(a,s),goog.dom.insertChildAt(a,r,0))}};oa.prototype.wrapContent_=function(t,o){goog.dom.insertChildAt(t,goog.dom.createTextNode("["+o+"] "),0),goog.dom.appendChild(t,goog.dom.createTextNode("[/"+o+"] "))};oa.prototype.actionPerformed=function(t){var o=goog.dom.createDom("div","print-div");o.style.display="none",document.body.appendChild(o);var i=this.xmlDocumentProvider_.getXmlDocument().getHtmlNode().parentElement,n=i.cloneNode(!0);o.appendChild(n),goog.dom.classlist.add(n,"for-printing"),this.addReviewItems(n);var r=this.layoutManager_.getLayoutContainer();goog.dom.classlist.add(r,"noprint"),window.print(),goog.dom.classlist.remove(r,"noprint"),goog.dom.removeNode(o),t&&t()};var A_=oa;sync.actions.PrintAction=oa;goog.require("goog.ui.Toolbar");goog.require("goog.ui.ToolbarButton");namespace("sync.view");var fi=function(t,o,i,n){this.editor_=i,this.initialDirty_=this.editor_.isDirty(),this.iframe_=o,this.element_=null,this.eventHandler_=new goog.events.EventHandler(this),this.createSave_=n,this.eventHandler_.listen(t,zs.EventTypes.CONTENT_CHANGED,()=>this.updateButtonsState_()),this.eventHandler_.listen(i.getReadOnlyStatus(),ue.EventTypes.READ_ONLY_STATUS_CHANGED,this.updateButtonsState_)};fi.prototype.getCoreMirror_=function(){return this.iframe_.contentWindow.editor};fi.prototype.markClean=function(){this.initialDirty_=!1,this.getCoreMirror_().markClean(),this.getCoreMirror_().textWasInitialized&&this.updateButtonsState_()};fi.prototype.undo=function(){this.getCoreMirror_().undo(),this.updateButtonsState_()};fi.prototype.redo=function(){this.getCoreMirror_().redo(),this.updateButtonsState_()};fi.prototype.updateButtonsState_=function(){var t=this.getCoreMirror_().historySize(),o=this.editor_.getReadOnlyState().readOnly;this.undoButton_.setEnabled(t.undo!=0&&!o),this.redoButton_.setEnabled(t.redo!=0&&!o);var i=!this.getCoreMirror_().isClean(),n=i||this.initialDirty_;this.editor_.setDirty(n),this.saveButton_&&this.saveButton_.setEnabled(n&&!o)};fi.prototype.getSwitchButton=function(){return this.switchButton_};fi.prototype.getSaveButton=function(){return this.saveButton_};fi.prototype.render=function(){var t=goog.dom.createDom;this.element_=t("div",["common-actions","vertical-align-children"]);var o=new goog.ui.Toolbar;return this.undoButton_=this.addToolbarButton_(o,{className:"Undo24_light",buttonName:"Text/Undo"}),this.eventHandler_.listen(this.undoButton_,goog.ui.Component.EventType.ACTION,goog.bind(this.undo,this)),this.redoButton_=this.addToolbarButton_(o,{className:"Redo24_light",buttonName:"Text/Redo"}),this.eventHandler_.listen(this.redoButton_,goog.ui.Component.EventType.ACTION,goog.bind(this.redo,this)),this.createSave_&&(this.saveButton_=this.addToolbarButton_(o,{className:"Save24",buttonName:"Text/Save",enabled:this.initialDirty_})),this.switchButton_=new goog.ui.ToolbarButton(tr(msgs.SWITCH_TO_AUTHOR_MODE_)),o.addChild(this.switchButton_,!0),this.switchButton_.getElement().setAttribute("name","Text/Switch"),o.render(this.element_),this.element_};fi.prototype.addToolbarButton_=function(t,o){var i=null;return o&&(i=new goog.ui.ToolbarButton(goog.dom.createDom("div",o.className)),t.addChild(i,!0),i.setEnabled(!!o.enabled),o.buttonName&&i.getElement().setAttribute("name",o.buttonName)),i};fi.prototype.dispose=function(){this.eventHandler_.dispose(),this.element_&&(goog.dom.removeNode(this.element_),this.element_=null)};var I_=fi;sync.view.TextModeToolbar=fi;namespace("sync.editors");var We=function(t,o,i,n,r){zs.call(this),this.iframe_=null,this.problemReporter_=i,this.editor_=t,this.concurrentEditingManager_=t.getEditingSupport().getConcurrentEditingManager(),this.controller_=o,this.toolbar_=null,this.initialDirtyStatus_=!1,this.active_=!1,this.switchingToAuthor_=!1,this.lastSyncPromise_=goog.Promise.resolve(!0),this.eventHandler_=new goog.events.EventHandler(this),this.safeShortcuts_=n,this.preventLeave_=r,this.preventLeaveEnabled_=r.isEnabled(),this.spinnerClass_="smallSpin",this.getSchemaInfo_=null};goog.inherits(We,zs);We.NOT_WELL_FORMED_ERROR_TYPE="not_well_formed";We.prototype.focus=function(){return this.iframe_&&goog.dom.isInDocument(this.iframe_)?(this.iframe_.focus(),!0):!1};We.prototype.addWarningMessage=function(t){var o=document.createElement("div");o.classList.add("no-print","editor-stripe","flash-message-warn"),o.textContent=t;var i=this.iframe_.contentWindow.document.getElementById("text-editor-stripes");i.appendChild(o)};We.prototype.xmlContentReceived_=function(t,o){if(this.active_){var i=this.iframe_.contentWindow;i.textState=o,i.initEditor&&i.initEditor(),this.getSchemaInfo_||(this.getSchemaInfo_=this.editor_.getActionsManager().invokeOperation("ro.sync.servlet.operation.GetSchemaInformation",{},null,null,!0)),sync.events.listenOnce(this.iframe_,goog.events.EventType.LOAD).then(goog.functions.constant(this.getSchemaInfo_)).then(JSON.parse).then(goog.bind(function(n){i.editor.setOption("hintOptions",{schemaInfo:n})},this))}};We.prototype.show=function(t){this.editor_.getEditingSupport().markEditableWidgetAsActive(this,!0),this.initialDirtyStatus_=this.editor_.isDirty();var o={id:this.editor_.docId},i=sync.select.getSelection();i.extend(o),sync.rest.callAsync("RESTDocumentManager.getTextState",o).then(goog.bind(this.xmlContentReceived_,this,t)).thenCatch(goog.bind(function(m){m&&(this.problemReporter_.showError(m.message||tr(msgs.ERROR_RETRIEVING_XML_CONTENT_),!0),t&&t())},this));var n=document.getElementById("header-bar");this.iframe_=this.createTextPageIframe_(n);var r=document.body.querySelector(".iframeSpinner");r?(window.iframeSpinner.style.display="block",window.iframeSpinner.show()):(r=new goog.dom.createDom("div","iframeSpinner"),goog.dom.appendChild(document.body,r),window.iframeSpinner=new rt(r,1,"iframeSpinner"),window.iframeSpinner.show()),this.active_=!0,this.switchingToAuthor_=!1;var s=this.editor_.getActionsManager(),a=s.getActionById("Author/Save"),l=s.getActionByShortcut(new J("M1 S")),c=a&&a===l,d=c;this.editor_.options.autoSaveInterval&&this.editor_.options.autoSaveInterval<=5&&(d=!1),this.toolbar_=new I_(this,this.iframe_,this.editor_,d);var g=this.toolbar_.render();goog.dom.insertSiblingAfter(g,goog.dom.getElement("header-logo")),this.eventHandler_.listen(this.toolbar_.getSwitchButton(),goog.ui.Component.EventType.ACTION,goog.bind(this.switchToAuthorMode_,this)),this.iframe_.addEventListener("load",goog.bind(function(){this.iframe_.contentWindow.editor.on("change",()=>{this.iframe_.contentWindow.editor.textWasInitialized&&this.dispatchChangeEvent()}),this.concurrentEditingManager_.isInRoom()&&this.addWarningMessage(tr(msgs.CONCURRENT_TEXT_PAGE_READ_ONLY_)),this.editor_.options.trackChanges===sync.api.change_tracking.ChangeTrackingInitialState.FORCED&&this.addWarningMessage(tr(msgs.TRACK_CHANGES_FORCED_TEXT_PAGE_READ_ONLY_))},this)),c&&(d&&this.eventHandler_.listen(this.toolbar_.getSaveButton(),goog.ui.Component.EventType.ACTION,goog.bind(this.commitChangesAndSave_,this)),this.iframe_.contentWindow.save=goog.bind(this.commitChangesAndSave_,this,!0)),this.eventHandler_.listen(this.editor_.getReadOnlyStatus(),ue.EventTypes.READ_ONLY_STATUS_CHANGED,this.updateTextEditorRoState_),this.updateTextEditorRoState_(),this.eventHandler_.listen(this.editor_,sync.api.Editor.EventTypes.DIRTY_STATUS_CHANGED,goog.bind(this.dirtyStatusChanged_,this)),this.eventHandler_.listen(document,goog.events.EventType.KEYDOWN,goog.bind(this.handleOuterPageKeyEvents_,this),!0),this.preventLeaveEnabled_=this.preventLeave_.isEnabled(),this.preventLeave_.setEnabled(!0),t&&t()};We.prototype.createTextPageIframe_=function(t){let o=document.createElement("iframe");o.src="textpage.html",o.id="text-mode-iframe",goog.dom.classlist.add(t,"text-mode");let i=goog.style.getSize(t).height;return o.style.height="calc(100% - "+i+"px)",o.style.top=i+"px",goog.dom.appendChild(document.body,o),o};We.prototype.updateTextEditorRoState_=function(){var t=this.iframe_.contentWindow,o=this.concurrentEditingManager_.isInRoom()||sync.util.isOptionTrue(this.editor_.options.textModeReadOnly)||this.editor_.options.trackChanges===sync.api.change_tracking.ChangeTrackingInitialState.FORCED||this.editor_.getReadOnlyStatus().isReadOnly();t.editor?t.editor.setOption("readOnly",o):t.readOnlyState=o};We.prototype.handleOuterPageKeyEvents_=function(t){var o=new J;o.fromKeyEvent(t);function i(n){return goog.dom.isElement(n)&&n.getAttribute("role")==="dialog"}this.safeShortcuts_.shouldDelegateToBrowser(t)||goog.dom.getAncestor(t.target,i,!0)||(new J("M1 Z").equals(o)?this.toolbar_.undo():new J("M1 Y").equals(o)?this.toolbar_.redo():new J("M1 S").equals(o)&&this.commitChangesAndSave_(!0),t.preventDefault(),t.stopPropagation())};We.prototype.dirtyStatusChanged_=function(t){t.isDirty||this.toolbar_.markClean()};We.prototype.textCommitted_=function(t,o){if(o.success){var i=this.editor_.isDirty(),n=o.docUpdate;if(n.textModeSynchronization=!0,this.active_&&!this.switchingToAuthor_){var r=this.iframe_.contentWindow.editor,s=r.getCursor("head"),a=r.getCursor("anchor"),l=r.listSelections(),c=goog.array.findIndex(l,function(g){return g.anchor.line===a.line&&g.anchor.ch===a.ch&&g.head.line===s.line&&g.head.ch===s.ch}),d=r.hasFocus();this.controller_.applyUpdate_(n),r.setSelections(l,c),d&&setTimeout(function(){r.focus()},0)}else this.controller_.applyUpdate_(n);o.docUpdate.readOnly?this.editor_.setDirty(this.initialDirtyStatus_):this.editor_.setDirty(i)}else t||this.problemReporter_.showMessages(o.docUpdate.messages);return o.success};We.prototype.hideEditor_=function(){var t=document.querySelector(".coveriframe");if(!t){t=goog.dom.createDom("div","coveriframe");var o=this.iframe_,i=o.contentDocument||o.contentWindow.document;goog.dom.appendChild(i.body,t),t.style.height=o.clientHeight+"px";var n=goog.dom.createDom("div",this.spinnerClass_);goog.dom.appendChild(o.parentNode,n);var r=new rt(n,1);r.show()}};We.prototype.switchUI_=function(){var t=document.getElementById("header-bar");goog.dom.classlist.remove(t,"text-mode"),this.eventHandler_.removeAll(),this.eventHandler_.dispose(),this.toolbar_.dispose(),this.toolbar_=null,this.active_=!1,this.preventLeave_.setEnabled(this.preventLeaveEnabled_),this.lastSyncPromise_=goog.Promise.resolve(!0),this.removeTextModeIframe_(),this.switchingToAuthor_=!1};We.prototype.removeTextModeIframe_=function(){var t=100,o=document.querySelector("."+this.spinnerClass_),i=this.iframe_;this.iframe_=null,o&&goog.dom.classlist.contains(o,"oxy-spinner")&&(t=0),setTimeout(goog.bind(function(){goog.dom.removeNode(i),this.editor_.getEditingSupport().markEditableWidgetAsActive(this,!1),goog.dom.removeNode(o)},this),t)};We.prototype.removeTextModeCover_=function(){var t=this.iframe_,o=t.contentDocument||t.contentWindow.document;goog.dom.removeNode(o.querySelector(".coveriframe")),goog.dom.removeNode(document.querySelector("."+this.spinnerClass_))};We.prototype.commitChangesAndSave_=function(t){this.editor_.getReadOnlyState().readOnly||this.commitChanges().then(()=>{this.invokeSaveAction_(t)})};We.prototype.invokeSaveAction_=function(t){var o=this.editor_.getActionsManager(),i=t?o.getActionByShortcut(new J("M1 S")):o.getActionById("Author/Save");i&&i.actionPerformed(goog.bind(this.saveFinished_,this))};We.prototype.saveFinished_=function(){this.editor_.isDirty()||this.toolbar_&&this.toolbar_.markClean()};We.prototype.commitChanges=function(t){return this.active_&&!this.switchingToAuthor_&&this.forceCommitChanges_(t),this.lastSyncPromise_};We.prototype.forceCommitChanges_=function(t){var o=sync.rest.callAsync("RESTDocumentManager.setTextState",{id:this.editor_.docId,$entity:JSON.stringify(this.iframe_.contentWindow.getState())}).then(goog.bind(this.textCommitted_,this,t)).then(n=>{if(!n)throw new sync.support.EditableWidgetCommitChangesException(We.NOT_WELL_FORMED_ERROR_TYPE);return!0}),i=goog.functions.constant(o);return this.lastSyncPromise_=this.lastSyncPromise_.then(i,i),this.lastSyncPromise_};We.prototype.switchToAuthorMode_=function(){this.active_&&!this.switchingToAuthor_&&(this.switchingToAuthor_=!0,this.iframe_.contentWindow.editor&&(this.hideEditor_(),this.iframe_.contentWindow.editor.isClean()?goog.Promise.resolve().then(goog.bind(this.switchUI_,this)):this.forceCommitChanges_(!1).then(goog.bind(this.switchUI_,this)).thenCatch(()=>{this.switchingToAuthor_=!1,this.removeTextModeCover_()})))};var w_=We;sync.editors.TextPage=We;namespace("sync.actions");var ia=function(t,o,i,n,r){sync.actions.AbstractAction.call(this),this.textPage_=new w_(t,o,i,n,r)};goog.inherits(ia,sync.actions.AbstractAction);ia.prototype.actionPerformed=function(t){this.textPage_.show(t)};ia.prototype.getDisplayName=function(){return tr(msgs.EDIT_AS_XML_)};ia.prototype.getDescription=function(){return tr(msgs.EDIT_AS_XML_DESCRIPTION_)};ia.prototype.renderSmallIcon=function(){return goog.dom.createDom("div","EditXML16")};var D_=ia;sync.actions.ShowTextPageAction=ia;namespace("sync.actions.review");var yi=function(t,o,i){I.call(this,null),this.controller=t,this.markersModel=o,this.readOnlyStatus=i,this.markerSpecified=null,this.callsCallback=!0};goog.inherits(yi,I);yi.prototype.prepare=function(t){if(this.markerSpecified=t!=null,this.markerSpecified)this.markerId_=t;else{this.markerId_=this.markersModel.getSelectionModel().getSelectedMarker();var o=this.markersModel.getMarker(this.markerId_);if(this.markerId_&&o&&o.isChange()){var i=this.markersModel.getAllMarkersIntersectingEndpoints(this.markerId_);if(i&&i.length&&i.indexOf(this.markerId_)!==-1){var n=this;this.markerId_=goog.array.find(i,function(r){var s=n.markersModel.getMarker(r);return s.isChange()})}}}};yi.prototype.getChangeMarkerId=function(){return this.markerId_};yi.prototype.isEnabled=function(){this.prepare();var t=sync.select.getSelection();return this.readOnlyStatus.isReadOnly()||sync.select.evalSelectionFunction(sync.util.isInReadOnlyContent)?!1:this.isSelectionIgnored()||t.isEmpty()?this.isEnabledInternal():sync.select.evalSelectionFunction(this.markersModel.selectionContainsChanges)};yi.prototype.isSelectionIgnored=function(){return!1};yi.prototype.isEnabledFor=function(t){return this.prepare(t.markerId),this.isEnabledInternal()};yi.prototype.isEnabledInternal=function(){var t=!1;if(!this.readOnlyStatus.isReadOnly()&&this.markerId_){var o=this.markersModel.getMarker(this.markerId_);t=Boolean(o&&o.isChange()&&!o.isReadOnly())}return t};yi.prototype.actionPerformedFor=function(t,o){this.isEnabledFor(o)?this.actionPerformedInternal(t):t()};yi.prototype.actionPerformed=function(t){this.isEnabled()?this.actionPerformedInternal(t):t()};yi.prototype.actionPerformedInternal=function(t){};var ul=yi;sync.actions.review.ChangeAction=yi;goog.require("goog.asserts");namespace("sync.actions.review");var _i=function(t,o,i,n,r){ul.call(this,o,i,n),this.selectionManager_=t,this.isTrackChangesForced_=r};goog.inherits(_i,ul);_i.prototype.actionPerformedInternal=function(t){var o=this.selectionManager_.getSelection(),i=null,n=null;if(o.isEmpty()||this.markerSpecified){var r=this.getChangeMarkerId();goog.asserts.assert(r!=null);var s=this.markersModel.getMarkerEndPoints(r),a=s.end;n={docId:this.controller.docId,markerId:r,distance:a.distance,referenceNodeId:a.nodeId,sentinelType:a.sentinelType},i="RESTReviewController.acceptChange"}else n={docId:this.controller.docId},o.extend(n),i="RESTReviewController.acceptChangesFromSelection";var l=this.markersModel.getThrottledEventTarget();sync.rest.callAsync(i,n).then(goog.bind(this.controller.applyUpdate_,this.controller)).then(goog.bind(l.flush,l)).thenCatch(sync.util.error.logError).thenAlways(t)};_i.prototype.isEnabledInternal=function(){return!this.isTrackChangesForced_&&_i.superClass_.isEnabledInternal.call(this)};_i.prototype.getDisplayName=function(){return tr(msgs.ACCEPT_CHANGE_)};_i.prototype.renderLargeIcon=function(){return goog.dom.createDom("div","AcceptChange24")};_i.prototype.getSmallIcon=function(t){return sync.util.image.getImageUrl("/images/AcceptChange16.png",t)};_i.prototype.getDescription=function(){return tr(msgs.ACCEPT_CHANGE_)};_i.prototype.getShortName=function(){return tr(msgs.ACCEPT_)};_i.prototype.isSelectionIgnored=function(){return this.isTrackChangesForced_};var N_=_i;sync.actions.review.AcceptChangeAction=_i;goog.require("goog.asserts");namespace("sync.actions.review");var vi=function(t,o,i,n,r,s){ul.call(this,n,r,s),this.editorUserName_=t,this.isTrackChangesForced_=o,this.selectionManager_=i};goog.inherits(vi,ul);vi.prototype.actionPerformedInternal=function(t){var o=this.isTrackChangesForced_,i=this.selectionManager_.getSelection(),n=null,r=null;if(o||i.isEmpty()||this.markerSpecified){var s=this.getChangeMarkerId();goog.asserts.assert(s!=null);var a=this.markersModel.getMarkerEndPoints(s),l=a.end;n="RESTReviewController.rejectChange",r={docId:this.controller.docId,markerId:s,distance:l.distance,referenceNodeId:l.nodeId,sentinelType:l.sentinelType}}else n="RESTReviewController.rejectChangesFromSelection",r={docId:this.controller.docId},i.extend(r);var c=this.markersModel.getThrottledEventTarget();sync.rest.callAsync(n,r).then(goog.bind(this.controller.applyUpdate_,this.controller)).then(goog.bind(c.flush,c)).thenCatch(sync.util.error.logError).thenAlways(t)};vi.prototype.isEnabledInternal=function(){var t=vi.superClass_.isEnabledInternal.call(this),o=this.markersModel.getMarker(this.markerId_);return(!o||this.isTrackChangesForced_&&o.author!==this.editorUserName_)&&(t=!1),t};vi.prototype.renderLargeIcon=function(){return goog.dom.createDom("div","RejectChange24")};vi.prototype.getDisplayName=function(){return this.isSelectionIgnored()?tr(msgs.REVIEW_REJECT_CHANGE_):tr(msgs.REJECT_CHANGE_)};vi.prototype.getSmallIcon=function(t){return sync.util.image.getImageUrl("/images/RejectChange16.png",t)};vi.prototype.getDescription=function(){return this.isSelectionIgnored()?tr(msgs.REVIEW_REJECT_CHANGE_):tr(msgs.REJECT_CHANGE_)};vi.prototype.getShortName=function(){return tr(msgs.REJECT_)};vi.prototype.isSelectionIgnored=function(){return this.isTrackChangesForced_};var M_=vi;sync.actions.review.RejectChangeAction=vi;namespace("sync.actions.review");var os=function(t,o,i,n){I.call(this,null),this.editor_=t,this.controller_=o,this.markersModel_=i,this.readOnlyStatus_=n,this.callsCallback=!0};goog.inherits(os,I);os.prototype.isEnabled=function(){if(this.isTrackingChangesForced_()||this.isDocumentReadOnly_())return!1;var t=!1;return this.markersModel_&&(t=this.markersModel_.getChangeMarkersCount()>0),t};os.prototype.isEnabledFor=function(t){if(this.isTrackingChangesForced_()||this.isDocumentReadOnly_())return!1;var o=t.markers;return o&&o.length>0};os.prototype.callServerOperation=function(t,o,i){var n=this.markersModel_.getThrottledEventTarget();sync.rest.callAsync(t,o).then(goog.bind(function(r){this.controller_.applyUpdate_(r)},this)).then(goog.bind(n.flush,n)).thenCatch(sync.util.error.logError).thenAlways(i||goog.nullFunction)};os.prototype.isTrackingChangesForced_=function(){return this.editor_.options.trackChanges===sync.api.change_tracking.ChangeTrackingInitialState.FORCED||this.editor_.options.trackChanges===sync.api.change_tracking.ChangeTrackingInitialState.FORCED_OFF};os.prototype.isDocumentReadOnly_=function(){return this.readOnlyStatus_.isReadOnly()};var ml=os;sync.actions.review.AcceptRejectAllChangesBaseAction=os;namespace("sync.actions.review");var ir=function(t,o,i,n){ml.call(this,t,o,i,n)};goog.inherits(ir,ml);ir.prototype.actionPerformed=function(t){this.callServerOperation("RESTReviewController.acceptAllChanges",{docId:this.controller_.docId},t)};ir.prototype.actionPerformedFor=function(t,o){this.callServerOperation("RESTReviewController.acceptChanges",{docId:this.controller_.docId,markersIds:o.markers},t)};ir.prototype.getDisplayName=function(){return tr(msgs.ACCEPT_ALL_CHANGES_)};ir.prototype.renderLargeIcon=function(){return goog.dom.createDom("div","AcceptAllChanges24")};ir.prototype.getDescription=function(){return tr(msgs.ACCEPT_ALL_CHANGES_)};ir.prototype.getShortName=function(){return tr(msgs.ACCEPT_ALL_)};var x_=ir;sync.actions.review.AcceptAllChangesAction=ir;namespace("sync.actions.review");var nr=function(t,o,i,n){ml.call(this,t,o,i,n)};goog.inherits(nr,ml);nr.prototype.actionPerformed=function(t){this.callServerOperation("RESTReviewController.rejectAllChanges",{docId:this.controller_.docId},t)};nr.prototype.actionPerformedFor=function(t,o){this.callServerOperation("RESTReviewController.rejectChanges",{docId:this.controller_.docId,markersIds:o.markers},t)};nr.prototype.getDisplayName=function(){return tr(msgs.REJECT_ALL_CHANGES_)};nr.prototype.renderLargeIcon=function(){return goog.dom.createDom("div","RejectAllChanges24")};nr.prototype.getDescription=function(){return tr(msgs.REJECT_ALL_CHANGES_)};nr.prototype.getShortName=function(){return tr(msgs.REJECT_ALL_)};var R_=nr;sync.actions.review.RejectAllChangesAction=nr;namespace("sync.actions.review");var bn=function(t,o,i){I.call(this,null),this.controller=t,this.markersModel=o,this.readOnlyStatus=i,this.callsCallback=!0};goog.inherits(bn,I);bn.prototype.marker_=null;bn.prototype.getCommentMarkerId=function(){var t=null;return this.marker_!=null&&(t=this.marker_.getId()),t};bn.prototype.getComment=function(){var t="";return this.marker_!=null&&(t=this.marker_.getAuthorComment()),t};bn.prototype.prepare=function(t){var o;t!=null?o=t:o=this.markersModel.getSelectionModel().getSelectedMarker(),o!=null?this.marker_=this.markersModel.getMarker(o):this.marker_=null};bn.prototype.actionPerformedFor=function(t,o){if(this.isEnabledFor(o)){var i=o.markerId;this.prepare(i),this.actionPerformedInternal(t)}else t()};bn.prototype.actionPerformed=function(t){this.isEnabled()?this.actionPerformedInternal(t):t()};bn.prototype.actionPerformedInternal=function(t){};var fl=bn;sync.actions.review.CommentAction=bn;goog.require("goog.asserts");namespace("sync.actions.review");var Xi=function(t,o,i,n){fl.call(this,o,i,n),this.selectionManager_=t};goog.inherits(Xi,fl);Xi.prototype.actionPerformedInternal=function(t){try{var o=this.getCommentMarkerId();if(!this.markersModel.getMarker(o)){t();return}var i={docId:this.controller.docId,markerId:o,$entity:{caretPosition:null}},n=this.selectionManager_.getSelection();n&&(i.$entity.caretPosition=n.focus.toRelativeContentPosition());var r=sync.rest.getSyncMethod("RESTReviewController.removeComment"),s=r(i);this.controller.applyUpdate_(s),this.markersModel.getThrottledEventTarget().flush()}finally{t&&t()}};Xi.prototype.isEnabled=function(){this.prepare();var t;return this.selectionManager_.evalSelectionFunction(sync.util.isInReadOnlyContent)?t=!1:t=this.marker_&&this.isEnabledFor(new I.Context({markerId:this.marker_.getId()})),Boolean(t)};Xi.prototype.isEnabledFor=function(t){var o=this.markersModel.getMarker(t.markerId);return!o||this.readOnlyStatus.isReadOnly()||o.isReadOnly()?!1:o.getType()===Se.Type.COMMENT||o.getType()===Se.Type.CUSTOM_HIGHLIGHT};Xi.prototype.getDisplayName=function(){return tr(msgs.REVIEW_REMOVE_COMMENT_)};Xi.prototype.renderLargeIcon=function(){return goog.dom.createDom("div","RemoveComment24")};Xi.prototype.getSmallIcon=function(t){return sync.util.image.getImageUrl("/images/RejectChange16.png",t)};Xi.prototype.getDescription=function(){return tr(msgs.REVIEW_REMOVE_COMMENT_)};Xi.prototype.getShortName=function(){return tr(msgs.REMOVE_)};var O_=Xi;sync.actions.review.RemoveCommentAction=Xi;var is=class extends goog.events.EventTarget{constructor(o){super(null);this.eventHandler_=new goog.events.EventHandler,this.registerDisposable(this.eventHandler_),this.textArea_=goog.dom.createDom("textarea","sync-prompt-input"),this.attachMentionQuoteAutocompleteListener_(),this.eventHandler_.listen(this.textArea_,goog.events.EventType.KEYUP,function(i){i.ctrlKey&&i.keyCode===goog.events.KeyCodes.ENTER&&(i.stopPropagation(),this.dispatchEvent(new goog.events.Event(is.EventType.SUBMIT)))}.bind(this)),o.appendChild(this.textArea_)}setComment(o){this.textArea_.value=o}attachMentionQuoteAutocompleteListener_(){this.eventHandler_.listen(this.textArea_,goog.events.EventType.INPUT,this.maybeAutocompleteMentionWithQuotes_.bind(this),!1),this.eventHandler_.listen(this.textArea_,goog.events.EventType.KEYDOWN,this.maybeRemoveQuotes_.bind(this),!1)}maybeAutocompleteMentionWithQuotes_(o){var i=o.getBrowserEvent();this.shouldAutocompleteMentionWithQuotes_(i)&&this.autocompleteMentionWithQuotes_()}maybeRemoveQuotes_(o){var i=o.getBrowserEvent();if(i.keyCode===goog.events.KeyCodes.BACKSPACE){var n=this.textArea_.value,r=this.textArea_.selectionStart,s=this.textArea_.selectionEnd;this.isInsideEmptyMentionQuotes(n,r,s)?(this.textArea_.selectionStart=r+1,this.textArea_.selectionEnd=s+1,document.execCommand("delete",!1,null),document.execCommand("delete",!1,null),o.stopPropagation(),o.preventDefault()):this.isAfterEmptyMentionQuotes(n,r,s)&&(document.execCommand("delete",!1,null),document.execCommand("delete",!1,null),o.stopPropagation(),o.preventDefault())}}isInsideEmptyMentionQuotes(o,i,n){var r;if(/@\"\"/.test(o.substring(i-2,n+1))){var s=i>2?o.substring(i-3,i-2):null;r=this.isCharacterAllowedAroundMention(s)}else r=!1;return r}isAfterEmptyMentionQuotes(o,i,n){var r;if(/@\"\"/.test(o.substring(i-3,n))){var s=i>3?o.substring(i-4,i-3):null;r=this.isCharacterAllowedAroundMention(s)}else r=!1;return r}shouldAutocompleteMentionWithQuotes_(o){var i;if(o.data==="@"){var n=this.textArea_.value,r=this.textArea_.selectionStart,s=this.textArea_.selectionEnd,a=this.textArea_.textLength,l=r>1?n.substring(r-2,r-1):null,c=s<a?n.substring(s,s+1):null;i=this.isCharacterAllowedAroundMention(l)&&this.isCharacterAllowedAroundMention(c)}else i=!1;return i}isCharacterAllowedAroundMention(o){return o===null||/[\s;,]/.test(o)}autocompleteMentionWithQuotes_(){var o=this.textArea_.selectionStart,i=this.textArea_.selectionEnd;this.markUndoCheckpoint_(),document.execCommand("insertText",!1,'""'),this.textArea_.selectionStart=o+1,this.textArea_.selectionEnd=i+1}markUndoCheckpoint_(){var o=this.textArea_.selectionStart;this.textArea_.selectionStart=o}getValue(){return this.textArea_.value}focus(){this.textArea_.select()}disposeInternal(){super.disposeInternal()}};is.EventType={SUBMIT:"submit"};var ns=class{showDialog(o,i,n){return new Promise((r,s)=>{try{var a=this.createCommentDialog_(o),l=this.createCommentEditor_(n,i,a);this.listenForEscPressed_(a),a.onSelect(c=>{var d={comment:l.getValue(),okChosen:c===goog.ui.Dialog.DefaultButtonKeys.OK,escPressed:this.escPressed_};a.dispose(),l.dispose(),r(d)}),a.show(),l.focus()}catch(c){s(c)}})}createCommentDialog_(o){var i=workspace.createDialog();return i.setTitle(o),i.setResizable(!0),i.setPreferredSize(415,300),i.setButtonConfiguration(sync.api.Dialog.ButtonConfiguration.OK_CANCEL),i}createCommentEditor_(o,i,n){var r=goog.dom.createDom("label","sync-prompt",[goog.dom.createDom("div","sync-prompt-label",i)]);n.getElement().appendChild(r);var s=new is(r);return o&&s.setComment(o),s.listen(is.EventType.SUBMIT,()=>{n.dispatchEvent(new goog.ui.Dialog.Event(goog.ui.Dialog.DefaultButtonKeys.OK,goog.ui.Dialog.DefaultButtonKeys.OK))}),s}listenForEscPressed_(o){this.escPressed_=!1;var i=n=>{this.escPressed_=n.keyCode===goog.events.KeyCodes.ESC};goog.events.listen(o.getElement(),goog.events.EventType.KEYDOWN,i),goog.events.listen(window,goog.events.EventType.KEYDOWN,i)}};goog.require("goog.asserts");namespace("sync.actions.review");var $t=function(t,o,i,n){I.call(this,null),this.controller_=t,this.markersModel_=o,this.concurrentEditingManager_=i,this.readOnlyStatus_=n,this.callsCallback=!0,this.lastCanceledComment_=null,this.lastRepliedMarker_=null};goog.inherits($t,I);$t.prototype.markerId_=null;$t.prototype.actionPerformed=function(t){this.isEnabled()?this.actionPerformedInternal_(null).finally(t):t()};$t.prototype.actionPerformedFor=function(t,o){if(this.isEnabledFor(o)){var i=o.markerId;this.actionPerformedInternal_(i).finally(t)}else t()};$t.prototype.retrieveCommentFromUser=function(){var t=tr(msgs.ADD_REPLY_TITLE_),o=tr(msgs.ADD_REPLY_HERE_);return new ns().showDialog(t,o,this.getLastCanceledReplyOnSameMarker())};$t.prototype.getLastCanceledReplyOnSameMarker=function(){return this.markerId_===this.lastRepliedMarker_?this.lastCanceledComment_:null};$t.prototype.actionPerformedInternal_=function(t){return this.prepare(t),this.retrieveCommentFromUser().then(goog.bind(function(o){if(o.okChosen){var i={docId:this.controller_.docId,replyComment:o.comment,parentId:this.markerId_},n=sync.select.getSelection();n.extend(i);var r=n.save(),s=sync.rest.getSyncMethod("RESTReviewController.reply"),a=s(i);this.controller_.applyUpdate_(a),this.controller_.fireSelectionModelChanged(r.restore()),this.markersModel_.getThrottledEventTarget().flush()}var l=!o.okChosen&&o.escPressed;this.lastCanceledComment_=l?o.comment:null,this.lastRepliedMarker_=l?this.markerId_:null},this))};$t.prototype.prepare=function(t){t!=null?this.markerId_=t:this.markerId_=this.markersModel_.getSelectionModel().getSelectedMarker()};$t.prototype.getDisplayName=function(){return tr(msgs.REPLY_TO_COMMENT_)+"..."};$t.prototype.isEnabledFor=function(t){var o=this.markersModel_.getMarker(t.markerId);return!o||this.readOnlyStatus_.isReadOnly()||o.isReadOnly()||!!o.getFlag()?!1:this.isEnabledForMarkerType_(o)};$t.prototype.isEnabledForMarkerType_=function(t){var o=t.getType();return this.concurrentEditingManager_.isInRoom()&&!this.concurrentEditingManager_.isKeepingIncompatibleActions()?o==="COMMENT":o==="COMMENT"||o==="CHANGE_INSERT"||o==="CHANGE_DELETE"};$t.prototype.getDescription=function(){return tr(msgs.ADD_REPLY_TITLE_)};$t.prototype.getSmallIcon=function(t){return"images/no-sprite/Reply16"+(t==2?"@2x":"")+".png"};$t.prototype.getShortName=function(){return tr(msgs.REPLY_TO_COMMENT_)};$t.prototype.isEnabled=function(){var t=!1,o=this.markersModel_.getSelectionModel().getSelectedMarker();return o&&(t=this.isEnabledFor(new I.Context({markerId:o}))),t&&!sync.select.evalSelectionFunction(sync.util.isInReadOnlyContent)};var P_=$t;sync.actions.review.ReplyAction=$t;goog.require("goog.asserts");namespace("sync.actions.review");var An=function(t,o,i,n,r){I.call(this,null),this.controller_=t,this.markersModel_=o,this.concurrentEditingManager_=i,this.selectionManager_=n,this.readOnlyStatus_=r,this.callsCallback=!0};goog.inherits(An,I);An.prototype.markerId=null;An.prototype.actionPerformedFor=function(t,o){if(!this.isEnabledFor(o)){t();return}try{var i={docId:this.controller_.docId,markerId:o.markerId},n=this.selectionManager_.getSelection();n.extend(i);var r=n.save(),s=sync.rest.getSyncMethod("RESTReviewController.toggleMarkAsDone"),a=s(i);this.controller_.applyUpdate_(a),this.controller_.fireSelectionModelChanged(r.restore()),this.markersModel_.getThrottledEventTarget().flush()}finally{t&&t()}};An.prototype.prepare=function(t){var o;return t!=null?o=t:o=this.markersModel_.getSelectionModel().getSelectedMarker(),this.markersModel_.getMarker(o)};An.prototype.getDisplayName=function(){return tr(msgs.DONE_)};An.prototype.isEnabledFor=function(t){var o=this.prepare(t.markerId);if(!o||this.readOnlyStatus_.isReadOnly()||o.isReadOnly())return!1;var i=o.getType();return this.concurrentEditingManager_.isInRoom()&&!this.concurrentEditingManager_.isKeepingIncompatibleActions()?i==="COMMENT":i==="COMMENT"||i==="CHANGE_INSERT"||i==="CHANGE_DELETE"};An.prototype.getDescription=function(){return tr(msgs.MARK_AS_DONE_)};An.prototype.getShortName=function(){return tr(msgs.DONE_)};var k_=An;sync.actions.review.MarkAsDoneAction=An;goog.require("goog.structs.Map");namespace("sync.actions.review");var rr=function(t,o,i,n,r){jo.call(this,null),this.docId=t,this.editor=o,this.readOnlyStatus=i,this.changeTrackingManager=n,this.isTrackChangesForced_=r};goog.inherits(rr,jo);rr.prototype.actionPerformed=function(t){sync.select.restoreSelection(),sync.rest.callAsync("RESTReviewController.toggleChangeTracking",{docId:this.docId}).then(goog.bind(function(o){this.changeTrackingManager.setTrackingChangesState(o),this.editor.setDirty(!0)},this)).thenCatch(sync.util.error.logError).thenAlways(t)};rr.prototype.getDisplayName=function(){return tr(msgs.TRACK_CHANGES_TOOLTIP_)};rr.prototype.isSelected=function(){return this.changeTrackingManager.isTrackingChanges()};rr.prototype.isEnabled=function(){return this.isTrackChangesForced_||this.readOnlyStatus.isReadOnly()?!1:this.isTrackingChanges_!==null};rr.prototype.renderLargeIcon=function(){return goog.dom.createDom("div","TrackChanges24")};rr.prototype.getDescription=function(){return tr(msgs.TOGGLE_CHANGE_TRACKING_)};var L_=rr;sync.actions.review.ToggleChangeTrackingAction=rr;namespace("sync.actions.review");var Hc=function(t,o){_.call(this,{largeIconPath:"/images/GoBack24.png",smallIconPath:"/images/PreviousPage16.png",description:tr(msgs.PREVIOUS_MARKER_)}),this.markerSelection_=t,this.markersModel_=o};goog.inherits(Hc,_);Hc.prototype.actionPerformed=function(t){try{var o=this.markerSelection_.getNextMarker_(!0);this.markersModel_.getSelectionModel().selectMarker(o,!0),this.markersModel_.getThrottledEventTarget().flush()}finally{t()}};Hc.prototype.isEnabled=function(){return this.markersModel_.getSelectionModel().getSelectedMarker()!=null};var F_=Hc;sync.actions.review.SelectPrevMarkerAction=Hc;namespace("sync.actions.review");var jc=function(t,o){_.call(this,{largeIconPath:"/images/GoForward24.png",smallIconPath:"/images/NextPage16.png",description:tr(msgs.NEXT_MARKER_)}),this.markerSelection_=t,this.markersModel_=o};goog.inherits(jc,_);jc.prototype.actionPerformed=function(t){try{var o=this.markerSelection_.getNextMarker_(!1);this.markersModel_.getSelectionModel().selectMarker(o,!0),this.markersModel_.getThrottledEventTarget().flush()}finally{t()}};jc.prototype.isEnabled=function(){return this.markersModel_.getSelectionModel().getSelectedMarker()!==null};var U_=jc;sync.actions.review.SelectNextMarkerAction=jc;namespace("sync.actions.review");var In=function(t,o,i,n){no.call(this,null,t,o,n),this.markersModel_=i,this.commentText_=null};goog.inherits(In,no);In.prototype.setCommentText=function(t){this.commentText_=t};In.prototype.shouldExecuteClientSide=function(t){return!!this.commentText_};In.prototype.actionPerformed=function(t){this.isEnabled()?this.addComment_(t,this.commentText_):(this.commentText_=null,t())};In.prototype.createClientSideUpdates=function(){var t=this.markersModel_.createCommentClientSide(this.commentText_),o=this.getSavedSelection(),i=o.restore();return{direct:new Ne({patches:[{type:"add_marker",marker:t,start:i.start,end:i.end}],selection:o.toJson()}),rollback:new Ne({patches:[{type:"remove_marker",markerId:t.id,start:i.start,end:i.end}],selection:o.toJson()})}};In.prototype.addComment_=function(t,o){if(o){var i={docId:this.controller.docId,comment:o};this.doesConcurrentSync()&&(i.sync=!0);var n=this.getSavedSelection().restore();n.extend(i),n=n.save();var r=this.markersModel_.getThrottledEventTarget();return sync.rest.callAsync("RESTReviewController.addComment",i).then(goog.bind(this.applyServerUpdate,this)).thenCatch(goog.bind(this.actionFailedServerSide,this)).thenAlways(goog.bind(function(){this.commentText_=null},this)).thenAlways(t).then(goog.bind(r.flush,r))}else t();this.commentText_=null};In.prototype.isEnabled=function(){return this.commentText_};In.prototype.getComment=function(){return this.commentText_};var B_=In;sync.actions.review.AddCommentFollowUp=In;goog.require("goog.asserts");namespace("sync.actions.review");var Ei=function(t,o,i,n,r){_.call(this,{keyStrokeStr:"M1 M3 M"}),this.editingSupport_=t,this.readOnlyStatus_=r,this.selectionView_=n,this.lastCanceledComment_=null;var s=t.getConcurrentEditingManager();this.followUp_=new B_(o,s,i,this.editingSupport_.getSelectionManager())};goog.inherits(Ei,_);Ei.prototype.actionPerformed=function(t){if(this.isEnabled()){this.selectionView_.renderFakeSelectionOnBlur();var o=this.editingSupport_.getSelectionManager().getSelection();this.editingSupport_.getSelectionManager().scrollSelectionIntoView(o),this.retrieveCommentFromUser().then(goog.bind(function(i){this.selectionView_.clearFakeSelection(),i.okChosen&&this.followUp_.setCommentText(i.comment);var n=!i.okChosen&&i.escPressed;this.lastCanceledComment_=n?i.comment:null},this)).finally(t)}else t()};Ei.prototype.retrieveCommentFromUser=function(){let t=tr(msgs.ADD_COMMENT_),o=tr(msgs.COMMENT_)+":";return new ns().showDialog(t,o,this.getInitialComment())};Ei.prototype.getInitialComment=function(){return this.lastCanceledComment_};Ei.prototype.getFollowUp=function(){return{action:this.followUp_,type:Qe.ActionType.ASYNC}};Ei.prototype.isEnabled=function(){return!this.readOnlyStatus_.isReadOnly()&&!sync.select.evalSelectionFunction(sync.util.isInReadOnlyContent)};Ei.prototype.getDisplayName=function(){return tr(msgs.ADD_COMMENT_)+"..."};Ei.prototype.renderLargeIcon=function(){return goog.dom.createDom("div","AddComment24")};Ei.prototype.getSmallIcon=function(t){return sync.util.image.getImageUrl("/images/AddComment16.png",t)};Ei.prototype.getDescription=function(){return tr(msgs.ADD_COMMENT_)};var H_=Ei;sync.actions.review.AddCommentAction=Ei;goog.require("goog.asserts");goog.require("goog.ui.Prompt");namespace("sync.actions.review");var Po=function(t,o,i,n){fl.call(this,o,i,n),this.editor_=t};goog.inherits(Po,fl);Po.prototype.actionPerformedInternal=function(t){var o=this.getCommentMarkerId(),i=this.editor_.getSelectionManager().getSelection();this.editor_.getSelectionManager().scrollSelectionIntoView(i),this.retrieveCommentFromUser().then(goog.bind(function(n){n.okChosen&&this.requestEditComment_(o,n.comment)},this)).finally(t)};Po.prototype.retrieveCommentFromUser=function(){var t=tr(msgs.EDIT_COMMENT_),o=tr(msgs.COMMENT_)+":";return new ns().showDialog(t,o,this.getComment())};Po.prototype.requestEditComment_=function(t,o){if(o!=null){var i={docId:this.controller.docId,markerId:t,$entity:{caretPosition:null,comment:o}},n=this.editor_.getSelectionManager().getSelection();i.$entity.caretPosition=n.focus.toRelativeContentPosition();var r=sync.rest.getSyncMethod("RESTReviewController.editComment"),s=r(i);this.controller.applyUpdate_(s),this.markersModel.getThrottledEventTarget().flush()}};Po.prototype.getDisplayName=function(){return tr(msgs.EDIT_COMMENT_)+"..."};Po.prototype.isEnabled=function(){return this.prepare(),this.isEnabled_()&&!sync.select.evalSelectionFunction(sync.util.isInReadOnlyContent)};Po.prototype.isEnabledFor=function(t){var o=this.markersModel.getMarker(t.markerId);if(!o||this.readOnlyStatus.isReadOnly()||o.isReadOnly())return!1;var i=!1;if(o.isCommentLike()&&!o.getFlag()){var n=this.markersModel.getReviewerName(),r=o.getAuthor();i=r===n}return i};Po.prototype.isEnabled_=function(){var t=this.getCommentMarkerId();return t==null?!1:this.isEnabledFor(new I.Context({markerId:t}))};Po.prototype.renderLargeIcon=function(){return goog.dom.createDom("div","EditComment24")};Po.prototype.getSmallIcon=function(t){return sync.util.image.getImageUrl("/images/EditComment16.png",t)};Po.prototype.getDescription=function(){return tr(msgs.EDIT_COMMENT_)};Po.prototype.getShortName=function(){return tr(msgs.EDIT_)};var j_=Po;sync.actions.review.EditCommentAction=Po;namespace("sync.actions");var Ci=function(t,o){I.call(this,"M3 enter"),this.selectionManager=t,this.readOnlyStatus=o,this.callsCallback=!0};goog.inherits(Ci,I);Ci.prototype.isEnabledFor=function(t){return this.isEnabledInternal_(t.computeSelection())};Ci.prototype.isEnabled=function(){return this.isEnabledInternal_(this.selectionManager.getSelection())};Ci.prototype.isEnabledInternal_=function(t){var o=!1,i=this.readOnlyStatus.isReadOnly()||this.selectionManager.evalSelectionFunction(sync.util.isInReadOnlyContent);return i||(o=workspace.getViewManager().isViewEnabled("attributes-panel-table")),o&&(o=this.isEnabledForSelection(t)),o};Ci.prototype.isEnabledForSelection=function(t){return!!t.getFullySelectedNode()||t.isEmpty()};Ci.prototype.actionPerformed=function(t){try{workspace.getViewManager().focusView("attributes-panel-table")}finally{t&&t()}};Ci.prototype.actionPerformedFor=function(t,o){this.selectionManager.setSelection(o.computeSelection()),this.actionPerformed(t)};Ci.prototype.getDisplayName=function(){return tr(msgs.EDIT_ATTRIBUTES_)+"..."};Ci.prototype.getDescription=function(){return tr(msgs.EDIT_ATTRIBUTES_)};Ci.prototype.renderSmallIcon=function(){return goog.dom.createDom("div","EditAttributes16")};var Vc=Ci;sync.actions.FocusAttributesPanelAction=Ci;namespace("sync.actions");var tg=function(t,o){Vc.call(this,t,o)};goog.inherits(tg,Vc);tg.prototype.isEnabledForSelection=function(t){return!0};var V_=tg;sync.actions.FocusAttributesPanelFromKeyboardAction=tg;namespace("sync.actions");var na=function(){sync.actions.AbstractAction.call(this,"")};goog.inherits(na,sync.actions.AbstractAction);na.prototype.actionPerformed=function(t){try{workspace.getViewManager().focusView("validation-panel-table")}finally{t&&t()}};na.prototype.getDisplayName=function(){return tr(msgs.VALIDATION_PROBLEMS_)};na.prototype.getDescription=function(){return tr(msgs.VALIDATION_PROBLEMS_DESCRIPTION_)};na.prototype.renderLargeIcon=function(){return goog.dom.createDom("div","Validate24_light")};var W_=na;sync.actions.ShowValidationResults=na;goog.require("goog.array");goog.require("goog.dom");namespace("sync.formctrls");var rs=function(t){this.xmlModel_=t};rs.prototype.getFirst=function(t,o,i){var n=this.getFocusableFormControls_(t,o),r=i?0:n.length-1;return n[r]};rs.prototype.getNext=function(t,o){var i=sync.formctrls.dom.getContainingFormControl(t);if(i){var n=i.parentNode,r=goog.dom.dataset.get(n,"role"),s=goog.string.startsWith(r,"AFTER"),a=n.parentNode,l;if(p.isTextHidden(a)){for(;p.isTextHidden(a.parentNode);)a=a.parentNode;l=this.getAllInside(a)}else{var c=h.getIdOfXmlNode(a);l=this.getFocusableFormControls_(c,!s)}var d=l.indexOf(t);if(d!==-1){var g=o?d+1:d-1;return l[g]}}return null};rs.prototype.getFocusableFormControls_=function(t,o){for(var i=this.xmlModel_.getXmlNodeById(t),n=p.getStaticContent(i),r=goog.array.flatten(n.map(sync.formctrls.dom.getFormControls)),s=[],a=0;a<r.length;a++){var l=p.isStaticContentBefore(r[a].parentNode);o===l&&goog.array.extend(s,this.getFocusableDescendants_(r[a]))}return s};rs.prototype.getAllInside=function(t){for(var o=sync.formctrls.dom.getFormControls(t),i=[],n=0;n<o.length;n++)goog.array.extend(i,this.getFocusableDescendants_(o[n]));return i};rs.prototype.getFocusableDescendants_=function(t){return goog.dom.findNodes(t,o=>goog.dom.isElement(o)&&goog.dom.isFocusable(o))};rs.prototype.getFirstOrLastInside=function(t,o){var i=sync.formctrls.dom.getFormControls(t);o||i.reverse();for(var n=0;n<i.length;n++){var r=this.getFocusableDescendants_(i[n]);if(r.length)return o?r[0]:r[r.length-1]}return null};var og=rs;sync.formctrls.FocusableFormControls=rs;namespace("sync.caret");var ra=function(t,o,i){this.xmlModel_=t,this.constructorInProgress_=!0,ce.call(this,o,i),this.constructorInProgress_=!1};goog.inherits(ra,ce);ra.prototype.skipInvalidPositions=function(){if(!this.constructorInProgress_&&!this.isNonElement()&&this.isSentinel_()){var t=p.getSentinelType(this.node),o=t===f.BEFORE;if(this.reversed!==o){var i=p.getSentinelParentId(this.node),n=this.xmlModel_.getXmlNodeById(i);if(goog.dom.classlist.contains(n,"oxy-collapse-text")){var r=new og(this.xmlModel_).getFirstOrLastInside(n,!this.reversed);if(r)throw r}}}ra.superClass_.skipInvalidPositions.call(this)};ra.prototype.isValidCaretPosition=function(){var t=ra.superClass_.isValidCaretPosition.call(this);if(!t){var o=this.getNodeIdAtPosition_();if(o){var i=h.getInstance().getXmlNodeById(o);i&&p.isTextHidden(i)&&(t=!0)}}return t};var K_=ra;sync.caret.FormControlAwareVisualContentIterator=ra;goog.require("goog.dom");namespace("sync.view");var ko=function(t,o){this.xmlModel_=t,this.focusableFormControls_=new og(this.xmlModel_),this.forward=o,this.focusedControl=null,this.iter=null,this.contentInfo=null};ko.prototype.setOnBrowserFocus=function(){var t=document.activeElement,o=this.setOnFormControl(t);if(!o){var i=sync.select.getSelection();this.setOnSelection(i)}};ko.prototype.setOnFormControl=function(t){var o=sync.formctrls.dom.isInsideFormControl(t);return o&&(this.focusedControl=t),o};ko.prototype.setOnSelection=function(t){var o=t.focus;this.iter=new K_(this.xmlModel_,o,!0),this.contentInfo=this.computeNextPositionInfo_(this.iter),this.focusedControl=null};ko.prototype.computeNextPositionInfo_=function(t){return this.forward?t.getContentInformation():t.getContentInformationBefore()};ko.prototype.advance_=function(){this.forward?this.iter.next():this.iter.prev(),this.contentInfo=this.computeNextPositionInfo_(this.iter)};ko.prototype.skipContent_=function(){if(!this.focusedControl)for(;this.contentInfo&&this.contentInfo.isOnText();)this.advance_()};ko.prototype.skipEndSentinels_=function(){if(!this.focusedControl)for(;this.contentInfo&&this.contentInfo.isOnEndTag();){var t=this.focusableFormControls_.getFirst(this.contentInfo.tagElementId,!1,this.forward);if(t){this.focusedControl=t;return}this.advance_()}};ko.prototype.skipStartSentinels_=function(){if(!this.focusedControl)for(;this.contentInfo&&this.contentInfo.isOnStartTag();){var t=this.focusableFormControls_.getFirst(this.contentInfo.tagElementId,!0,this.forward);if(t){this.focusedControl=t;return}this.advance_()}};ko.prototype.nextAfterFormControl_=function(){var t=this.focusableFormControls_.getNext(this.focusedControl,this.forward);if(t){this.focusedControl=t;return}var o=p.getStaticContentAncestor(this.focusedControl),i=p.isStaticContentBefore(o),n=i?f.BEFORE:f.AFTER,r=h.getIdOfXmlNode(o.parentNode),s=new sync.position.RelativeContentPosition(r,n,0).toHTMLPosition(),a=new ce(s,!0);this.forward||a.prev(),this.setOnSelection(new sync.select.Selection(a.toHTMLPosition()))};ko.prototype.next=function(){try{this.focusedControl!==null?this.nextAfterFormControl_():this.forward&&this.skipContent_(),this.forward?(this.skipEndSentinels_(),this.skipStartSentinels_()):(this.skipStartSentinels_(),this.skipEndSentinels_(),this.skipContent_())}catch(t){if(t===goog.iter.StopIteration)throw t;t instanceof HTMLElement&&(this.focusedControl=t)}};ko.prototype.getPosition=function(){return this.focusedControl?this.focusedControl:this.iter.toHTMLPosition()};ko.prototype.isAtDisplayedPosition=function(){var t=this.focusedControl||this.iter.toHTMLPosition().container;return sync.util.dom.isNodeDisplayed(t)};var G_=ko;sync.view.FocusIterator=ko;namespace("sync.actions");var Si=function(t,o,i){sync.actions.AbstractAction.call(this,i?"Shift Tab":"Tab"),this.actionsManager_=t,this.xmlModel_=o,this.promote_=i,this.lastTabFocus_=null,this.lastTabFocusTimestamp_=null,this.lastTabFocusRemovalTimer_=0};goog.inherits(Si,sync.actions.AbstractAction);Si.prototype.actionPerformed=function(t){var o=t||goog.nullFunction,i=sync.select.getSelection(),n=i.save(),r=goog.Promise.resolve();this.shouldCallServer_(i)&&(r=this.actionsManager_.invokeOperation("PromoteDemoteItemOperation",{promote:""+this.promote_})),r.thenAlways(function(){var s;return n.equals(sync.select.getSelection().save())&&(this.shouldMoveFocus(sync.select.getSelection())?this.goToNextFocusablePosition_():this.promote_||(s=this.actionsManager_.invokeOperation("InsertOrReplaceTextOperation",{text:"  ",schemaAware:!1}))),s}.bind(this)).thenAlways(o)};Si.prototype.goToNextFocusablePosition_=function(){try{var t=new G_(this.xmlModel_,!this.promote_);t.setOnBrowserFocus();do t.next();while(!t.isAtDisplayedPosition());var o=t.getPosition();this.setTabFocus_(o),this.lastTabFocusTimestamp_=goog.now()}catch(i){if(i!==goog.iter.StopIteration)throw i}};Si.prototype.clearTabFocus_=function(){this.lastTabFocus_=null};Si.prototype.setTabFocus_=function(t){t instanceof T?(sync.select.setSelection(new sync.select.Selection(t)),this.lastTabFocus_=t.toRelativeContentPosition()):(t.focus(),this.lastTabFocus_=t),this.lastTabFocusRemovalTimer_&&clearTimeout(this.lastTabFocusRemovalTimer_),this.lastTabFocusRemovalTimer_=setTimeout(goog.bind(this.clearTabFocus_,this),5e3)};Si.prototype.shouldMoveFocus=function(t){var o=!0;return sync.style.isInsideSpacePreserve(t,this.xmlModel_)&&(o=!1,this.lastTabFocus_&&(this.lastTabFocus_ instanceof HTMLElement||t.focus.toRelativeContentPosition().equals(this.lastTabFocus_))&&this.didMoveFocusWithTabRecently_()&&(o=!0)),o};Si.prototype.didMoveFocusWithTabRecently_=function(){return goog.now()-this.lastTabFocusTimestamp_<1e3};Si.prototype.shouldCallServer_=function(t){return!t.isEmpty()||this.isInsideListItem_(t)||this.isOutdentAction_(t)};Si.prototype.isOutdentAction_=function(t){return this.promote_&&sync.style.isInsideSpacePreserve(t,this.xmlModel_)&&!this.didMoveFocusWithTabRecently_()};Si.prototype.isInsideListItem_=function(t){for(var o=t.focus,i=p.fromHTMLPosition(o),n=0;n<5;n++){try{i.prev()}catch(l){if(l!==goog.iter.StopIteration)throw l}var r=i.getContentInformation();if(r.isOnStartTag()){var s=this.xmlModel_.getXmlNodeById(r.tagElementId),a=goog.style.getComputedStyle(s,"display");if(a==="list-item")return!0}else break}return!1};var rh=Si;sync.actions.TabAction=Si;goog.require("goog.structs.Map");namespace("sync.actions");var zi=function(t,o){this.widgets=t,this.profilingAttributesHandler=o,this.providers=[]};goog.inherits(zi,sync.actions.AttributeEditingActionsProvider);zi.IMAGE_ATTRS=new goog.structs.Map({image:"href",img:"src",imagedata:"fileref",graphic:"url"});zi.PROFILING_ATTRIBUTES=["audience","platform","product","props","otherprops","deliveryTarget","arch","condition","conformance","os","revision","revisionflag","security","status","userlevel","vendor","wordsize","lang"];zi.prototype.registerAttributeActionsProvider=function(t){this.providers.push(t)};zi.prototype.getAction=function(t,o){for(var i=null,n=0;n<this.providers.length&&(i=this.providers[n].getAction(t,o),i==null);n++);if(i==null){var r=this.widgets.getUrlChooser();r&&r.supports(sync.api.UrlChooser.Type.IMAGE)&&zi.IMAGE_ATTRS.get(t.getTagName())==o&&(i=new sync.actions.AttributeEditingAction(goog.bind(this.editAttributeActionPerformed_,this),"Open24")),i==null&&zi.PROFILING_ATTRIBUTES.includes(o)&&this.profilingAttributesHandler.canEditProfilingAttributes()&&(i=new sync.actions.AttributeEditingAction(goog.bind(this.editProfilingAttributesActionPerformed_,this),"attrs-edit-profiling-input__icon",tr(msgs.EDIT_PROFILING_ATTRIBUTES_)),i.editsDirectly=!0)}return i};zi.prototype.editAttributeActionPerformed_=function(t,o){var i=sync.api.UrlChooser.Type.IMAGE,n=new sync.api.UrlChooser.Context(i),r=this.widgets.getUrlChooser(),s=function(a){a===null?o(t):o(a,!0)};r.chooseUrl(n,s,sync.api.UrlChooser.Purpose.CHOOSE)};zi.prototype.editProfilingAttributesActionPerformed_=function(t,o){o(t),setTimeout(goog.bind(this.profilingAttributesHandler.editProfilingAttributes,this.profilingAttributesHandler),0)};var q_=zi;sync.actions.DefaultAttributeActionsProvider=zi;namespace("sync.actions");var yl=function(t){_.call(this,{displayName:tr(msgs.OPEN_IMAGE_)}),this.editor_=t};goog.inherits(yl,_);yl.prototype.actionPerformed=function(t){var o=this.getImage_(),i=o.dataset.src,n=i.match(/url=([^&]*)/)[1],r=decodeURIComponent(decodeURIComponent(n));this.editor_.openLink(new sync.api.Editor.LinkOpenedEvent(r,!1)),t&&t()};yl.prototype.getImage_=function(){var t=this.editor_.getSelectionManager().getSelection(),o=t.getNodeAtSelection(),i=h.getInstance().getXmlNodeById(o.id);return p.getImageStaticContent(i)};yl.prototype.isEnabled=function(){return this.getImage_()!==null};var X_=yl;sync.actions.OpenImage=yl;namespace("sync.actions");var ss=function(t,o){I.call(this),this.controller_=t,this.readOnlyStatus_=o};goog.inherits(ss,I);ss.prototype.actionPerformedFor=function(t,o){var i=o.computeSelection(),n=k.getInstance().getOption(S.SENTINELS_DISPLAY_MODE),r={id:this.controller_.docId,backspace:!1,count:1,wordLevel:!1,tagsDisplayMode:n};i.extend(r),sync.rest.callAsync("RESTDocumentControllers.documentController.removeText",r).then(s=>s.update).then(goog.bind(this.controller_.applyUpdate_,this.controller_)).thenCatch(sync.util.error.reloadPage).thenAlways(t||goog.nullFunction)};ss.prototype.getDisplayName=function(){return tr(msgs.DELETE_ELEMENT_)};ss.prototype.getSmallIcon=function(t){return sync.util.image.getImageUrl("/images/DeleteArea16.png",t)};ss.prototype.isEnabled=function(){this.isEnabledFor(new I.Context({computeSelection:()=>sync.select.getSelection()}))};ss.prototype.isEnabledFor=function(t){var o=!0;return(this.readOnlyStatus_.isReadOnly()||sync.util.isInReadOnlyContent.apply(t.computeSelection()))&&(o=!1),o};var z_=ss;sync.actions.DeleteElement=ss;namespace("sync.actions");var Wc=function(t,o){_.call(this,{displayName:tr(msgs.DELETE_TAGS_),description:tr(msgs.DELETE_TAGS_TOOLTIP_),smallIconPath:"/images/DeleteElementTags16.png",keyStrokeStr:"M3 M2 X"}),this.actionsManager_=t,this.readOnlyStatus_=o};goog.inherits(Wc,_);Wc.prototype.actionPerformed=function(t){this.actionsManager_.invokeOperation("UnwrapTagsOperation",{},t).thenCatch(sync.util.error.reloadPage)};Wc.prototype.isEnabled=function(){var t=sync.select.getSelection();return!this.readOnlyStatus_.isReadOnly()&&!sync.util.isInReadOnlyContent.apply(t)};var Y_=Wc;sync.actions.UnwrapElement=Wc;namespace("sync.api");sync.api.GuidingArrowRenderer=function(){goog.Disposable.call(this)};goog.inherits(sync.api.GuidingArrowRenderer,goog.Disposable);sync.api.GuidingArrowRenderer.prototype.showArrowToNode=function(t,o){};sync.api.GuidingArrowRenderer.prototype.hideArrow=function(){};goog.require("goog.ui.Bubble");goog.require("goog.math.Box");namespace("sync.view");var Zt=function(t){this.viewportScroller_=t,this.svgContainer=goog.dom.createDom(goog.dom.TagName.DIV,{className:"elements-connector"});var o=new goog.ui.Bubble(this.svgContainer);this.registerDisposable(o),o.setAutoHide(!0),o.render(),o.getElement().id="elements-connector-parent",this.bubble=o,this.createSVG_(),this.eventHandler_=new goog.events.EventHandler(this),this.eventHandler_.listen(window,goog.events.EventType.RESIZE,this.hideArrow),this.registerDisposable(this.eventHandler_)};goog.inherits(Zt,sync.api.GuidingArrowRenderer);Zt.prototype.attach=function(t){t&&this.eventHandler_.listen(t.getThrottledEventTarget(),sync.api.SelectionManager.EventType.SELECTION_CHANGED,this.hideArrowOnSelectionChanged_)};Zt.prototype.ignoreFirstSelectionEvent=function(){this.ignoreNextSelectEvent_=!0};Zt.prototype.hideArrowOnSelectionChanged_=function(){this.ignoreNextSelectEvent_?this.ignoreNextSelectEvent_=!1:this.hideArrow()};Zt.prototype.paintConnector=function(t,o){this.editorScrollListenerAdded||(this.eventHandler_.listen(this.viewportScroller_,goog.events.EventType.SCROLL,this.hideArrow),this.editorScrollListenerAdded=!0),this.hideArrow(),this.createSVG_();var i=o&&sync.positioning.getCoordinate(o);if(i){var n=this.getArrowBoundingBox(),r=i.x-goog.math.Box.relativePositionX(n,i),s=i.y-goog.math.Box.relativePositionY(n,i);!t||t.offsetParent===null?this.paintOnlyTheArrow_(r,s):this.paintConnectorWithArrow_(t,o,s,r)}};Zt.prototype.getArrowBoundingBox=function(){var t=this.viewportScroller_.getBoundingRect().toBox();return t.expand(-2,-2,-2,-2),t};Zt.prototype.paintConnectorWithArrow_=function(t,o,i,n){var r=sync.positioning.getCoordinate(t),s=r.x,a=r.y+Math.min(150,t.offsetHeight/2),l=a>i,c=80,d=50,g=0,m=goog.positioning.Corner.BOTTOM_LEFT;l&&(i+=sync.positioning.get1stClientRectHeight(o),a<i&&(g=i-a,i=a),i=Math.min(i,a),m=goog.positioning.Corner.TOP_LEFT),this.bubble.setPinnedCorner(m),this.bubble.setPosition(new goog.positioning.AbsolutePosition(n-d,i));var v=Math.max(0,Math.abs(s-n)),C=Math.abs(a-i)+c;if(this.canRenderArrowTail_(v,C,s,n)){this.svgContainer.style.width=v+d+"px",this.svgContainer.style.height=C+"px";var N=v+d,D=l?C-c:c,H=d,ne=l?g:C,ht=N/5,Yi=D+(l?c:-c),ls=H,cs=D+(l?c:-c);this.linePath.setAttribute("d","M "+N+" "+D+" C "+ht+" "+Yi+" "+ls+" "+cs+" "+H+" "+ne),this.bubble.setVisible(!0)}else this.paintOnlyTheArrow_(n,i)};Zt.prototype.canRenderArrowTail_=function(t,o,i,n){return t>0&&o>0&&i>n};Zt.prototype.paintOnlyTheArrow_=function(t,o){this.bubble.setPinnedCorner(goog.positioning.Corner.BOTTOM_LEFT),this.bubble.setPosition(new goog.positioning.AbsolutePosition(t-50,o)),this.svgContainer.style.width="100px",this.svgContainer.style.height="10px",this.linePath.setAttribute("d","M 50 0 50 10"),this.bubble.setVisible(!0)};Zt.prototype.createSVG_=function(){var t=sync.util.dom.setAttributes,o="http://www.w3.org/2000/svg",i=document.createElementNS(o,"svg");i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),i.setAttribute("class","elements-connector-svg"),this.svgContainer.appendChild(i);var n=document.createElementNS(o,"defs");i.appendChild(n),this.svg=i;var r=document.createElementNS(o,"marker");t(r,{id:"arrowhead",refX:"10",refY:"5",viewBox:"0 0 10 10",markerWidth:"5",markerHeight:"5",orient:"auto"});var s=document.createElementNS(o,"path");t(s,{class:"elements-connector-line-arrow",d:"M 0 0 L 10 5 L 0 10 z","stroke-width":3}),n.appendChild(r),r.appendChild(s);var a=document.createElementNS(o,"path");t(a,{class:"elements-connector-line","marker-end":"url(#arrowhead)"}),this.svg.appendChild(a),this.linePath=a};Zt.prototype.hideArrow=function(t){this.bubble.setVisible(!1),this.svg&&(this.svgContainer.removeChild(this.svg),this.svg=null)};Zt.prototype.disposeInternal=function(){Zt.superClass_.disposeInternal.call(this),goog.dom.removeNode(this.svgContainer)};Zt.prototype.getEventHandler=function(){return this.eventHandler_};Zt.prototype.showArrowToNode=function(t,o){this.paintConnector(o,t.getHtmlNode())};var Kc=Zt;sync.view.GuidingArrowRenderer=Zt;namespace("sync.view");var Gc=function(t){Kc.call(this,t)};goog.inherits(Gc,Kc);Gc.prototype.paintConnector=function(t,o){if(!this.reviewPanelScrollListenerAdded_){var i=goog.dom.getElementByClass("review-panel__content");i&&(this.getEventHandler().listen(i,goog.events.EventType.SCROLL,this.hideArrow),this.reviewPanelScrollListenerAdded_=!0)}Gc.superClass_.paintConnector.call(this,t,o)};var Q_=Gc;sync.view.ReviewGuidingArrowRenderer=Gc;namespace("sync.support");var qc=function(t,o){sync.api.AuthorWidgetsFactory.call(this),this.authorEditingSupport_=t,this.editorFrame_=o};goog.inherits(qc,sync.api.AuthorWidgetsFactory);qc.prototype.getGuidingArrowRenderer=function(){return this.authorNodePointerRenederer_||(this.authorNodePointerRenederer_=new Kc(this.authorEditingSupport_.getScrollEventTarget()),this.authorEditingSupport_.registerDisposable(this.authorNodePointerRenederer_),this.authorNodePointerRenederer_.attach(this.authorEditingSupport_.getSelectionManager())),this.authorNodePointerRenederer_};qc.prototype.getHighlightsManager=function(){return this.authorEditingSupport_.getHighlightsManager()};var J_=qc;sync.support.AuthorWidgetsFactory=qc;namespace("sync.support");var Xc=function(){this.contextMenuBuiltinEntries_=[{type:"action",id:"Author/AcceptChange"},{type:"action",id:"Author/RejectChange"},{type:"sep"},{type:"action",id:"Author/Reply"},{type:"action",id:"Author/EditComment"},{type:"action",id:"Author/RemoveComment"},{type:"sep"},{type:"action",id:"Author/AddComment"},{type:"sep"},{type:"action",id:"App/FocusAttributesPanel"},{type:"action",id:"Author/EditProfilingAttributes"},{type:"sep"},{type:"action",id:"Author/OpenImage"},{type:"action",id:"apply.image.map"},{type:"action",id:"Author/ImageMapEditor"},{type:"sep"},{type:"action",id:"Author/EditReference"},{type:"sep"},{type:"list",name:tr(msgs.TABLE_),children:[]},{type:"sep"},{type:"list",name:tr(msgs.INSERT_),children:[]},{type:"action",id:"Author/SurroundWithElement"},{type:"sep"}],this.frameworkActionsContextMenuIndex_=this.contextMenuBuiltinEntries_.length,this.contextMenuBuiltinEntries_=this.contextMenuBuiltinEntries_.concat([{type:"list",name:tr(msgs.SELECT_),children:[{type:"action",id:"Select/Element"},{type:"action",id:"Select/Content"},{type:"action",id:"Select/Parent"}]},{type:"sep"},{type:"action",id:"Author/CutSpecial"},{type:"action",id:"Author/CopySpecial"},{type:"action",id:"Author/PasteSpecial"},{type:"sep"},{type:"list",name:tr(msgs.FOLDING_),children:[{type:"action",id:"Author/ToggleFold"},{type:"sep"},{type:"action",id:"Author/FoldOthers"},{type:"action",id:"Author/FoldChildren"},{type:"action",id:"Author/FoldAll"},{type:"sep"},{type:"action",id:"Author/ExpandChildren"},{type:"action",id:"Author/ExpandAll"}]},{type:"sep"},{type:"action",id:"Author/RenameElement"},{type:"action",id:"Author/UnwrapElement"},{type:"sep"},{type:"list",id:"about.element",name:tr(msgs.ABOUT_ELEMENT_),children:[]}])};Xc.prototype.getContextMenuBuiltinEntries=function(){return this.contextMenuBuiltinEntries_};Xc.prototype.getFrameworkActionsContextMenuIndex=function(){return this.frameworkActionsContextMenuIndex_};Xc.prototype.getInsertElementEntry=function(){return{name:tr(msgs.INSERT_),type:"list",children:[{type:"sep"},{id:"Author/InsertElement",type:"action"}]}};var $_=Xc;sync.support.AuthorEditingSupportContextMenuConfig=Xc;namespace("sync.view");sync.view.ProfilingAttributesModel=function(t,o){this.selectedVals=new Map,this.profilingAttributes=t,this.nodeProfilingAttriburesAtomicAttributes=new Map,this.handleProfilingAttributes_(o)};sync.view.ProfilingAttributesModel.prototype.handleProfilingAttributes_=function(t){this.profilingAttributes.length>0&&this.profilingAttributes.forEach(o=>{var i=this.extractProfilingAtomicAttributes_(o.attributeName,t,o.valuesSeparator,this.profilingAttributes.map(n=>n.attributeName),o.allowsMultipleValues);this.nodeProfilingAttriburesAtomicAttributes.set(o.attributeName,i),i.forEach((n,r)=>{o.attributeName===r?n.forEach(s=>this.selectedVals[this.getProfilingAttrValueKey(r,s)]=!0):(n.length>0&&(this.selectedVals[this.getProfilingGroupAttrKey(o.attributeName,r)]=!0),n.forEach(s=>this.selectedVals[this.getProfilingGroupValueKey(o.attributeName,r,s)]=!0))})})};sync.view.ProfilingAttributesModel.prototype.isSelect=function(t){return!!this.selectedVals[t]};sync.view.ProfilingAttributesModel.prototype.uncheckAllValues=function(t){let o={...this.selectedVals};for(let i in o)i.startsWith(t+"::")&&delete o[i];return this.selectedVals=o,this.createNodeProfilingAttributeValueMap_(o)};sync.view.ProfilingAttributesModel.prototype.hasCheckedValues=function(t){return Object.keys(this.selectedVals).some(o=>o.startsWith(t+"::"))};sync.view.ProfilingAttributesModel.prototype.setChecked=function(t,o,i,n){let r={...this.selectedVals};delete r[o];var s=o.split("::"),a=s[1],l=s[2];if(l!=null&&(l.length===0?r=this.setSelectionStateOnGroupAttribute_(r,t,a,i):r=this.setSelectionStateOnGroupValue_(r,t,a,i)),n)for(let c in r)c.startsWith(t+"::")&&delete r[c];return i&&(r[o]=!0),this.selectedVals=r,this.createNodeProfilingAttributeValueMap_(r)};sync.view.ProfilingAttributesModel.prototype.setSelectionStateOnGroupAttribute_=function(t,o,i,n){if(n){var r=this.profilingAttributes.find(a=>a.attributeName===o);if(r){r.allowedValues.forEach(a=>{a.groupAttribute===i&&(t[this.getProfilingGroupValueKey(o,i,a.value)]=!0)});var s=this.getCurrentAtomicAttributes(r.attributeName);s&&s.get(i)&&s.get(i).forEach(a=>t[this.getProfilingGroupValueKey(o,i,a)]=!0)}}else for(let a in t)a.startsWith(o+"::"+i+"::")&&delete t[a];return t};sync.view.ProfilingAttributesModel.prototype.setSelectionStateOnGroupValue_=function(t,o,i,n){var r=o+"::"+i+"::";if(n)t[r]=!0;else{var s=!1;for(let a in t)if(a.startsWith(r)&&!a.endsWith("::")){s=!0;break}s||delete t[r]}return t};sync.view.ProfilingAttributesModel.prototype.createNodeProfilingAttributeValueMap_=function(t){var o={};return this.profilingAttributes.forEach(i=>{o[i.attributeName]="";var n=new Map;for(let c in t)if(t[c]&&c.startsWith(i.attributeName+"::")){var r=c.split("::"),s=r[1],a=r[2];a!=null?a.length!==0&&this.addAttributesInMap_(n,s,a):this.addAttributesInMap_(n,i.attributeName,s)}if(n.size!==0){var l=[];n.forEach((c,d)=>{d===i.attributeName?l.push(...c):l.push(d+"("+c.join(i.valuesSeparator)+")")}),o[i.attributeName]=l.join(i.valuesSeparator)}}),o};sync.view.ProfilingAttributesModel.prototype.addAttributesInMap_=function(t,o,i){t.has(o)?t.get(o).push(i):t.set(o,[i])};sync.view.ProfilingAttributesModel.prototype.getProfilingAttrValueKey=function(t,o){return t+"::"+o};sync.view.ProfilingAttributesModel.prototype.getProfilingGroupAttrKey=function(t,o){return t+"::"+o+"::"};sync.view.ProfilingAttributesModel.prototype.getProfilingGroupValueKey=function(t,o,i){return this.getProfilingGroupAttrKey(t,o)+i};sync.view.ProfilingAttributesModel.prototype.getCurrentAtomicAttributes=function(t){return this.nodeProfilingAttriburesAtomicAttributes.get(t)};sync.view.ProfilingAttributesModel.prototype.hasAttributesWithUnknownValue=function(){var t=this.profilingAttributes.find(o=>this.getUnknownProfilingAtomicAttributes(o).size>0);return t!=null};sync.view.ProfilingAttributesModel.prototype.getUnknownProfilingAtomicAttributes=function(t){var o=new Map,i=this.getCurrentAtomicAttributes(t.attributeName);return i.forEach((n,r)=>{var s;t.attributeName===r?s=t.allowedValues.filter(l=>!l.groupAttribute).map(l=>l.value):s=t.allowedValues.filter(l=>l.groupAttribute===r).map(l=>l.value);var a=[];n.forEach(l=>{s.includes(l)||a.push(l)}),a.length>0&&o.set(r,a)}),o};sync.view.ProfilingAttributesModel.prototype.extractProfilingAtomicAttributes_=function(t,o,i,n,r){let s=new Map;if(o&&o[t]&&(!n||n.includes(t))){let a;if(r?a=this.extractSimpleAttributeValues_(o[t].attributeValue,i):a=[o[t].attributeValue],a){for(let l=a.length-1;l>=0;l--){let c=a[l],d=this.extractConditionGroupValues_(c,i,r);if(d){a.splice(l,1);let g=d.attribute,m=d.values;m&&(s.has(g)?s.get(g).push(...m):s.set(g,[...m]))}}a.length>0&&(s.has(t)?s.get(t).push(...a):s.set(t,[...a]))}}return s};sync.view.ProfilingAttributesModel.prototype.extractSimpleAttributeValues_=function(t,o){let i=[],n=")",r="(",s=t.length;if(t.includes(o)){let a="",l=0;for(let d=0;d<s;d++){let g=t.charAt(d);g===" "?l>0?a+=g:a.trim().length>0&&(i.push(a.trim()),a=""):(a+=g,g===r?l++:g===n&&l--)}let c=a.trim();c.length>0&&i.push(c)}else s>0&&i.push(t);return i};sync.view.ProfilingAttributesModel.prototype.extractConditionGroupValues_=function(t,o,i){let n=null,r=t.indexOf("(");if(r!==-1){let s=t.indexOf(")");if(s>r){n={},n.attribute=t.substring(0,r);let a=t.substring(r+1,s).trim();i?n.values=a.split(o):n.values=[a]}}return n};var sh=sync.view.ProfilingAttributesModel;goog.require("goog.array");namespace("sync.view");var ah=class extends sync.react.Component{constructor(t){super(t);this.state={},this.state.newProfilingAttrsMap=new Map,this.state.filter="",this.state.profilingModel=new sh(this.props.profilingAttributes,this.props.attributes)}componentWillUpdate(t){ah.propsAreEqual(this.props,t)||(this.state.profilingModel=new sh(t.profilingAttributes,t.attributes)),this.state.filter=""}static propsAreEqual(t,o){let i=!1;if(t&&o)for(let s in t){if(o.hasOwnProperty(s)){var n=o[s],r=t[s];r||n?i=n===r:i=!0}else i=!1;if(!i)break}else i=!t&&!o;return i}render(){let t=this.props.profilingAttributes;if(!t.length)return null;var o=this.state.filter||"";let i=this.state.profilingModel.hasAttributesWithUnknownValue();return sync.react.h("div",{className:"edit-profiling"},sync.react.h("div",{className:"edit-profiling__filter"},sync.react.h(Mo,{className:"edit-profiling__filter-input",placeholder:tr(msgs.FILTER_),autoCorrect:"off",autoCapitalize:"off","aria-label":tr(msgs.TYPE_WORD_TO_FILTER_),onInput:n=>this.setState({filter:n.target.value}),"show-clear":"true",value:o})),sync.react.h("div",{className:"edit-profiling__attributes-container"},t.map(n=>this.renderProfilingAttribute(n))),sync.react.h("div",{className:"edit-profiling__status"},i?sync.react.h("div",null,tr(msgs.VALUES_FOUND_IN_DOCUMENT_CONFLICT_,{"0":"*"})):""))}isFilteredOut_(t,o){return this.state.filter&&!t.attributeName.includes(this.state.filter)&&!t.attributeRenderName.includes(this.state.filter)&&!t.allowedValues.some(i=>i.renderName&&i.renderName.includes(this.state.filter)||i.groupAttribute&&i.groupAttribute.includes(this.state.filter)||i.value&&i.value.includes(this.state.filter))&&!this.checkStringInMap_(o,this.state.filter)}renderProfilingAttribute(t){var o=this.state.profilingModel.getUnknownProfilingAtomicAttributes(t);if(!this.isFilteredOut_(t,o)){var i=this.state.profilingModel.hasCheckedValues(t.attributeName),n=t.attributeRenderName||t.attributeName;return sync.react.h("div",{className:"edit-profiling__profiling-attribute",key:t.attributeName+"_key"},sync.react.h("div",{className:"edit-profiling__attribute-name"},sync.react.h("b",null,n),"\xA0\xA0\xA0",i&&sync.react.h("a",{href:"javascript:void(0)",title:tr(msgs.UNCKECK_ALL_),className:"edit-profiling__uncheck-action",onClick:()=>this.uncheckAllValues_(t.attributeName)},tr(msgs.UNCKECK_ALL_))),this.renderProfilingAttributeValues(t,o),this.renderProfilingAttributeUnknownValues(t,o))}}checkStringInMap_(t,o){var i=!1;for(let[n,r]of t.entries())if(n.includes(o)||r.some(s=>s.includes(o))){i=!0;break}return i}uncheckAllValues_(t){this.setState({newProfilingAttrsMap:this.state.profilingModel.uncheckAllValues(t)}),this.props.callback(this.state.newProfilingAttrsMap)}handleChangeInput_(t,o,i,n){var r=this.state.profilingModel.setChecked(t,o,i.target.checked,n);this.setState({newProfilingAttrsMap:r}),this.props.callback(r)}renderProfilingAttributeValues(t,o){var i=new Set;return goog.array.map(t.allowedValues,function(n){if(n.groupAttribute){if(!i.has(n.groupAttribute))return i.add(n.groupAttribute),this.renderProfilingGroupAttribute(t,n,o)}else return this.renderProfilingAttributeValueInternal(t,n.level,this.state.profilingModel.getProfilingAttrValueKey(t.attributeName,n.value),n.renderName||n.value,"",!1)},this)}renderProfilingGroupAttribute(t,o,i){var n=o.groupAttribute,r=t.allowedValues.filter(a=>a.groupAttribute!=null&&a.groupAttribute===n);r||(r=[]);var s=i.get(n);if(s||(s=[]),!this.isGroupFilteredOut_(t.attributeName,n,s,r))return sync.react.h("div",{className:"profiling-group",key:n+"_key"},this.renderProfilingAttributeValueInternal(t,o.level,this.state.profilingModel.getProfilingGroupAttrKey(t.attributeName,n),n,"edit-profiling__group-attribute",!0),goog.array.map(r,function(a){return this.renderProfilingAttributeValueInternal(t,a.level+1,this.state.profilingModel.getProfilingGroupValueKey(t.attributeName,n,a.value),a.renderName||a.value,"edit-profiling__group-value",!1)},this),goog.array.map(s,function(a){return this.renderProfilingAttributeValueInternal(t,o.level+1,this.state.profilingModel.getProfilingGroupValueKey(t.attributeName,n,a),a+"*","edit-profiling__group-value edit-profiling__attribute-value--unknown",!1)},this))}isGroupFilteredOut_(t,o,i,n){return this.state.filter&&!t.includes(this.state.filter)&&!o.includes(this.state.filter)&&!i.some(r=>r.includes(this.state.filter))&&!n.some(r=>r.renderName&&r.renderName.includes(this.state.filter)||r.value&&r.value.includes(this.state.filter))}renderProfilingAttributeValueInternal(t,o,i,n,r,s){if(Boolean(s)||!this.isValueFilteredOut_(i,n)){var a="edit-profiling__attribute-value";r&&(a+=" "+r);var l=this.state.profilingModel.isSelect(i);let c={paddingLeft:1+o+"em"};return t.allowsMultipleValues?sync.react.h("div",{style:c,key:i+"-div"},sync.react.h("div",{className:a},sync.react.h(Kr,{value:i,checked:l,key:i,onChange:d=>this.handleChangeInput_(t.attributeName,i,d,!1),label:n}))):sync.react.h("div",{style:c,key:i+"-div"},sync.react.h("div",{className:a},sync.react.h(zf,{value:i,checked:l,onChange:d=>this.handleChangeInput_(t.attributeName,i,d,!0),name:t.attributeName,label:n})))}}isValueFilteredOut_(t,o){return this.state.filter&&t.indexOf(this.state.filter)===-1&&!o.includes(this.state.filter)}renderProfilingAttributeUnknownValues(t,o){var i=t.allowedValues.filter(r=>r.groupAttribute).map(r=>r.groupAttribute),n=[];return o.forEach((r,s)=>{t.attributeName===s?n.push(r.map(function(a){return this.renderProfilingAttributeValueInternal(t,0,this.state.profilingModel.getProfilingAttrValueKey(t.attributeName,a),a+"*","edit-profiling__attribute-value--unknown",!1)},this)):!i.includes(s)&&!this.isGroupFilteredOut_(t.attributeName,s,r,[])&&(n.push(this.renderProfilingAttributeValueInternal(t,0,this.state.profilingModel.getProfilingGroupAttrKey(t.attributeName,s),s+"*","edit-profiling__group-attribute edit-profiling__attribute-value--unknown",!0)),n.push(r.map(function(a){return this.renderProfilingAttributeValueInternal(t,1,this.state.profilingModel.getProfilingGroupValueKey(t.attributeName,s,a),a+"*","edit-profiling__attribute-value--unknown",!1)},this)))}),n}},Z_=ah;sync.view.ProfilingAttributesSelector=ah;namespace("sync.actions");var go=function(t,o,i){I.call(this),this.selectionManager=o,this.xmlController=t,this.readOnlyStatus=i,this.callsCallback=!0,this.newAttributeNameToValueMap=null};goog.inherits(go,I);go.prototype.isEnabledFor=function(t){return this.isEnabledInternal_(t.computeSelection())};go.prototype.isEnabled=function(){return this.isEnabledInternal_(this.selectionManager.getSelection())};go.prototype.isEnabledInternal_=function(t){var o=!(this.readOnlyStatus.isReadOnly()||this.selectionManager.evalSelectionFunction(sync.util.isInReadOnlyContent));return o&&(o=this.isEnabledForSelection(t)),o};go.prototype.isEnabledForSelection=function(t){var o=!!t.getFullySelectedNode()||t.isEmpty();return o&&(o=sync.select.SelectionUtil.getOxyElementFromCaret(t)!==null),o};go.prototype.actionPerformed=function(t){var o=this.getDialog(),i=o.getElement();o.show(),goog.dom.classlist.add(i,"oxy-spinner"),this.callback=t||goog.nullFunction;var n=this.selectionManager.getSelection(),r=sync.select.SelectionUtil.getOxyElementFromCaret(n);sync.rest.callAsync("RESTAttributesManager.getAllProfilingAttributeConditions",{docId:this.xmlController.docId,nodeId:r.id}).then(goog.bind(this.editProfilingConditions,this))};go.prototype.renderDialog_=function(t,o){var i="oxy-spinner",n=this.getDialog().getElement();goog.dom.classlist.remove(n,i);var r={profilingAttributes:t,attributes:o.getAttributes(),callback:this.onAttributesChanged.bind(this)};sync.react.render(sync.react.createElement(Z_,r),n)};go.prototype.getDialog=function(){if(!this.dialog){var t=workspace.createDialog();t.setTitle(tr(msgs.EDIT_PROFILING_ATTRIBUTES_)),t.setPreferredSize(400,500),t.setResizable(!0),this.dialog=t}return this.dialog};go.prototype.editProfilingConditions=function(t){var o=this.selectionManager.getSelection(),i=sync.select.SelectionUtil.getOxyElementFromCaret(o),n=this.getDialog();new Promise(r=>n.onSelect(r)).then(r=>r==="ok"&&this.newAttributeNameToValueMap?this.xmlController.setAttributes(Array.of(i.id),this.newAttributeNameToValueMap):Promise.resolve()).finally(this.callback),this.renderDialog_(t,i)};go.prototype.onAttributesChanged=function(t){this.newAttributeNameToValueMap=t};go.prototype.actionPerformedFor=function(t,o){this.selectionManager.setSelection(o.computeSelection()),this.actionPerformed(t)};go.prototype.dispose=function(){this.dialog&&this.dialog.dispose()};go.prototype.getDisplayName=function(){return tr(msgs.EDIT_PROFILING_ATTRIBUTES_)+"..."};go.prototype.getDescription=function(){return tr(msgs.EDIT_PROFILING_ATTRIBUTES_)};var ev=go;sync.actions.EditProfilingAttributesAction=go;goog.require("goog.events");goog.require("goog.userAgent");namespace("sync.actions.util");sync.actions.util.captureSelectionEvent=goog.userAgent.MOBILE?goog.events.EventType.TOUCHSTART:goog.events.EventType.MOUSEDOWN;sync.actions.util.listenOnceFor=function(t,o,i,n,r){var s=0,a=null;function l(){clearInterval(s),a&&goog.events.unlistenByKey(a)}s=setTimeout(function(){l(),r()},t),a=goog.events.listenOnce(o,i,function(c){l(),n(c)})};var Tte=sync.actions.util;namespace("sync.view");var ig=class extends sync.react.Component{constructor(t){super(t);this.state={selectedTemplate:null},this.onTemplateSelected=goog.bind(this.onTemplateSelected,this),this.onTemplateSubmitted=goog.bind(this.onTemplateSubmitted,this),this.chooseSaveAsLocation=goog.bind(this.chooseSaveAsLocation,this)}notifyFileSelected(t){this.props.onFileLocationSelected&&this.props.onFileLocationSelected(t)}notifyTemplateSelected(t){this.props.onTemplateSelected&&this.props.onTemplateSelected(this.state.selectedTemplate,t)}notifySubmitted(){this.props.onFileLocationSubmitted&&this.props.onFileLocationSubmitted(this.state.selectedTemplate,this.props.fileLocation)}onTemplateSelected(t){this.setState({selectedTemplate:t});var o=this.props.fileLocation;t&&(o=ig.determineFileLocation(this.props.fileLocation,t,this.props.userPickedFileLocation,this.props.fileExists)),this.notifyTemplateSelected(o)}onTemplateSubmitted(t){this.setState({selectedTemplate:t}),this.notifySubmitted()}chooseSaveAsLocation(){var t=new sync.api.UrlChooser.Context(sync.api.UrlChooser.Type.EXTERNAL_REF,new E(this.props.fileLocation).getFileName()),o=this.state.selectedTemplate;o&&t.setDefaultSaveExtension(o.getExtension()),workspace.getUrlChooser().chooseUrl(t,goog.bind(function(i){i&&this.notifyFileSelected(i)},this),sync.api.UrlChooser.Purpose.CHOOSE_SAVE_LOCATION)}renderFileChooser(){var t=new E(this.props.fileLocation),o=workspace.makeRelative(this.props.currentDir,t.getFolderUrl()),i=o.split("/").map(decodeURIComponent).join("/");return sync.react.h("div",null,sync.react.h("div",{className:"new-file-templates-filename-label"},tr(msgs.FILE_SAVE_AS_)),sync.react.h("div",{onClick:this.chooseSaveAsLocation,className:"new-file-location-browse"},sync.react.h("div",{className:"new-file-templates-location oxy-input"},sync.react.h("span",null,i+decodeURIComponent(t.getFileName())," ")),sync.react.h("button",{title:tr(msgs.FILE_SAVE_AS_),className:"Open24"})))}render(){var t=this.renderFileChooser();return sync.react.h("div",{className:"new-file-new-container"},sync.react.h("div",{className:"new-file-templates-label"},tr(msgs.Select_template_)),sync.react.h("div",{className:"new-file-templates-container"},sync.react.h(sd,{templatesFilter:this.props.templatesFilter,categoryComparator:this.props.categoryComparator,onTemplateSelected:this.onTemplateSelected,onTemplateSubmitted:this.onTemplateSubmitted})),t)}};ig.determineFileLocation=function(t,o,i,n){var r=new E(t),s;return i?s=o.updateFileExtension(r.getFileName()):(s=o.computeAlternateName(n),s=o.updateFileExtension(s),r.setFileName(s)),r.setFileName(s),r.getUrl()};var lh=ig;sync.view.NewFileChooser=ig;namespace("sync.actions");var gt=function(t,o){ee.call(this,t),this.editor_=o,this.fileLocation_=null,this.fileTemplate_=null,this.spinner_=null,this.dialog_=null,this.userPickedFileLocation_=!1,this.newFileHelper_=new ii,this.callsCallback=!0};goog.inherits(gt,ee);gt.DEFAULT_FILE_NAME="untitled.dita";gt.prototype.startSpinner_=function(){var t=document.querySelector('#builtin-toolbar [name="insert.new.topic"]');t&&(this.spinner_=new rt(t,1),this.spinner_.show())};gt.prototype.stopSpinner_=function(){this.spinner_&&this.spinner_.hide()};gt.prototype.doInsertNewTopicRef=function(t,o){if(!this.fileLocation_||!this.fileTemplate_){t();return}this.startSpinner_(),this.newFileHelper_.create(this.fileTemplate_.getDownloadUrl(),goog.bind(this.fileCreateCallback_,this,t),this.fileLocation_,o)};gt.prototype.fileCreateCallback_=function(t,o,i,n){switch(i){case sync.api.UrlChooser.SaveResult.SAVED_AVAILABLE_URL:var r=this.getOperation(),s=this.getOperationParams();this.editor_.getActionsManager().invokeOperation(r,s,goog.bind(function(){this.stopSpinner_(),t()},this));return;case sync.api.UrlChooser.SaveResult.SAVED_UNAVAILABLE_URL:workspace.getNotificationManager().showError(tr(msgs.TOPIC_CREATED_BUT_NO_INSERT_),!0),t();break;case sync.api.UrlChooser.SaveResult.FAILED:n==="File exists"?this.askForOverwriteConfirmation_(t):(workspace.getNotificationManager().showError(tr(msgs.TOPIC_CREATION_FAILED_),!0),t());break;case sync.api.UrlChooser.SaveResult.CANCELED:t();break}this.stopSpinner_()};gt.prototype.getOperation=function(){return"ro.sync.ecss.extensions.dita.map.topicref.InsertTopicrefOperation"};gt.prototype.getOperationParams=function(){return{topicUrl:this.fileLocation_}};gt.prototype.askForOverwriteConfirmation_=function(t){workspace.confirm(tr(msgs.CONFIRM_OVERWRITE_),trDom(msgs.CONFIRM_OVERWRITE_MESSAGE_,{$FILE_NAME:decodeURIComponent(this.fileLocation_.substring(this.fileLocation_.lastIndexOf("/")+1)),$LINE_BREAK:goog.dom.createDom("br")})).then(goog.bind(function(o){o?this.doInsertNewTopicRef(t,!0):t()},this))};gt.prototype.actionPerformed=function(t){this.fileLocation_=new E(this.editor_.getUrl()).getFolderUrl()+gt.DEFAULT_FILE_NAME,this.fileTemplate_&&(this.fileLocation_=lh.determineFileLocation(this.fileLocation_,this.fileTemplate_,!0)),this.createAskForNewTopicDialog_(goog.bind(function(){this.userPickedFileLocation_=!1,t()},this)).show()};gt.prototype.isEnabled=function(){var t=this.editor_.getReadOnlyState();if(t.readOnly||sync.select.evalSelectionFunction(sync.util.isInReadOnlyContent))return!1;var o=workspace.getUrlChooser();return o!=null&&o.supports(sync.api.UrlChooser.Type.EXTERNAL_REF)};gt.prototype.createAskForNewTopicDialog_=function(t){if(!this.dialog_){var o=workspace.createDialog();o.setTitle(tr(msgs.NEW_)),o.setPreferredSize(980,650),o.setResizable(!0),o.setButtonConfiguration([{key:"ok",caption:tr(msgs.CREATE_)},{key:"no",caption:tr(msgs.CANCEL_)}]);var i=goog.dom.createDom;this.errorsDiv_=i("div","new-file-templates-errors-div");var n=i("div","new-file-new-container"),r=o.getElement();r.appendChild(this.errorsDiv_),r.appendChild(n),this.dialog_=o}return this.renderNewFileChooser_(t),this.registerOnSelectListener_(t),this.dialog_};gt.prototype.renderNewFileChooser_=function(t){this.hideErrorMessages_(),sync.react.render(sync.react.createElement(lh,{templatesFilter:new Ji(/./,/^(dita|null)$/,!0,!0),categoryComparator:function(o,i){return o.name==="DITA"?-1:0},currentDir:new E(this.editor_.getUrl()).getFolderUrl(),fileLocation:this.fileLocation_,userPickedFileLocation:this.userPickedFileLocation_,onFileLocationSelected:goog.bind(function(o){this.fileLocation_=o,this.userPickedFileLocation_=!0,this.renderNewFileChooser_(t)},this),onTemplateSelected:goog.bind(function(o,i){this.fileTemplate_=o,this.fileLocation_=i,this.renderNewFileChooser_(t)},this),onFileLocationSubmitted:goog.bind(function(o,i){this.fileTemplate_=o,this.fileLocation_=i,this.createNewTopicRef_(t)},this)}),this.dialog_.getElement().querySelector(".new-file-new-container"))};gt.prototype.registerOnSelectListener_=function(t){this.dialog_.onSelect(goog.bind(function(o,i){o==="ok"?this.fileTemplate_&&this.fileLocation_?this.createNewTopicRef_(t):(this.fileTemplate_?this.fileLocation_||this.showErrorMessage_(tr(msgs.Choose_file_name_error_)):this.showErrorMessage_(tr(msgs.Select_template_error_)),i.preventDefault()):t()},this))};gt.prototype.showErrorMessage_=function(t){this.errorReporter_||(this.errorReporter_=new Rn(this.errorsDiv_)),t?this.errorReporter_.show(t,Rn.types.ERROR):this.hideErrorMessages_()};gt.prototype.hideErrorMessages_=function(){this.errorReporter_&&this.errorReporter_.hide()};gt.prototype.createNewTopicRef_=function(t){this.hideErrorMessages_(),this.dialog_.hide(),this.doInsertNewTopicRef(t)};gt.prototype.dispose=function(){this.dialog_&&this.dialog_.dispose()};var ch=gt;sync.actions.InsertNewTopicRef=gt;namespace("sync.actions");var ng=function(t,o){ch.call(this,t,o)};goog.inherits(ng,ch);ng.prototype.getOperation=function(){return"ro.sync.ecss.extensions.commons.operations.ChangeAttributeOperation"};ng.prototype.getOperationParams=function(){var t=workspace.makeRelative(this.editor_.getUrl(),this.fileLocation_);return{elementLocation:"./ancestor-or-self::*[contains(concat(' ', @class, ' '), 'map/topicref')][1]",name:"href",value:t,editAttribute:!1,removeIfEmpty:!0}};sync.actions.CreateAndReferenceResourceAction=ng;namespace("sync.actions.dita");var sa=function(t){sync.actions.AbstractAction.call(this),this.editor_=t};goog.inherits(sa,sync.actions.AbstractAction);sa.prototype.actionPerformed=function(t){t=t||goog.nullFunction,this.editor_.isDirty()?this.showSaveBeforeDialog(t):this.editWithExpandedTopics()};sa.prototype.showSaveBeforeDialog=function(t){this.saveBeforeDialog_||(this.saveBeforeDialog_=workspace.createDialog(),this.saveBeforeDialog_.setButtonConfiguration(sync.api.Dialog.ButtonConfiguration.OK),this.saveBeforeDialog_.setTitle(tr(msgs.SAVE_CHANGES_)),this.saveBeforeDialog_.getElement().textContent=tr(msgs.SAVE_CHANGES_BEFORE_EDITING_TOPIC_CONTENT),this.saveBeforeDialog_.setPreferredSize(400)),this.saveBeforeDialog_.onSelect(t),this.saveBeforeDialog_.show()};sa.prototype.editWithExpandedTopics=function(){var t=hs.getEditorSpecificURLParameters();t.editReferencesInPlace=!0;var o=t.url;delete t.url,this.editor_.openLink(new sync.api.Editor.LinkOpenedEvent(o,!1,t,sync.api.Editor.LinkOpenedEvent.Target.SELF))};sa.prototype.getDisplayName=function(){return tr(msgs.EDIT_TOPIC_CONTENT_)+" (BETA)"};sa.prototype.getDescription=function(){return tr(msgs.EDIT_REFERENCED_TOPIC_CONTENT)};sync.actions.dita.EditMapWithExpandedTopics=sa;namespace("sync.api");sync.api.EditImageMapAction=class extends yy{constructor(t,o){super(new De({displayName:tr(msgs.IMAGE_MAP_EDITOR_)+"...",actionPerformed:goog.nullFunction}),t.getActionsManager(),t.getReadOnlyStatus(),o)}};namespace("sync.actions");var tv=class extends sync.actions.AbstractAction{actionPerformed(o){console.log("Action was removed in v25.1"),o&&o()}};sync.actions.AskForDitamap=tv;goog.require("goog.async.Delay");namespace("sync.view");var wn=function(t,o,i,n){Be.call(this,t,i,o),this.includeSentinelsModeToolbar_=!goog.userAgent.ANDROID&&!n};goog.inherits(wn,Be);wn.prototype.getSentinelsModeListConfig=function(t){return{type:"list",name:"Tags Display Mode",displayName:tr(msgs.TAGS_DISPLAY_MODE_),small:!0,toBottom:t,children:[{type:"list",name:"sentinels_mode",displayName:tr(msgs.TAGS_DISPLAY_MODE_),iconDom:goog.dom.createDom("div",{className:"ui-action-small-icon",id:"sentinels_mode"}),children:[{type:"action",id:"Author/NoTags"},{type:"action",id:"Author/PartialTags"},{type:"action",id:"Author/InlineTags"},{type:"action",id:"Author/BlockTags"},{type:"action",id:"Author/FullTags"},{type:"action",id:"Author/FullWithAttrsTags"}]}]}};wn.prototype.getToolbarsConfig=function(t){var o=[];return this.includeSentinelsModeToolbar_&&o.push(this.getSentinelsModeListConfig(t)),o};wn.prototype.render=function(t,o){var i=wn.superClass_.render.call(this,t,o);return i&&this.includeSentinelsModeToolbar_&&(this.parentElement_=o,this.initSentinelsDisplayModeListener_(),this.updateSentinelsDisplayModeToolbarButton_()),i};wn.prototype.initSentinelsDisplayModeListener_=function(){this.optionListenerDisplayMode_||(this.sentinelsMode_=k.getInstance().getOption(S.SENTINELS_DISPLAY_MODE)||sync.options.ServerOptions.getServerOption(S.TAGS_MODE),this.optionListenerDisplayMode_=k.getInstance().listenOption(S.SENTINELS_DISPLAY_MODE,goog.bind(t=>{this.sentinelsMode_=t.value||this.sentinelsMode_,this.updateSentinelsDisplayModeToolbarButton_()},this)))};wn.prototype.updateSentinelsDisplayModeToolbarButton_=function(){var t=this.parentElement_.querySelector("#sentinels_mode");t.title=be.getActionDescription(this.sentinelsMode_);var o=zn.getSentinelsModeIconUrl(this.sentinelsMode_,!0);t.style.backgroundImage=o&&"url("+o+")"};wn.prototype.disposeInternal=function(){wn.superClass_.disposeInternal.call(this),goog.events.unlistenByKey(this.optionListenerDisplayMode_)};var ov=wn;var aE=function({results:t,onResultSelected:o,onResultChosen:i,selectedResultId:n}){return sync.react.h(Gp,{className:"search-results__list",onChange:o,onEnter:i,idPrefix:"search-result",selectedKey:n||null,shouldScroll:!0},t.map(r=>sync.react.h(lE,{key:r.id,result:r,onClick:()=>o(r.id)})))},lE=function(t){var{before:o,after:i,match:n}=t.result;return sync.react.h("div",{onClick:t.onClick,className:sync.react.genClasses(["search-results__item",t.selected&&"search-results__item--selected"]),id:t.id},o,sync.react.h("b",null,n),i)},iv=aE;var rg=class{constructor(){this.contentModel_=new To}extractPreview(o){var i=50,n=this.relativePositionFromJson_(o.startPosition),r=this.relativePositionFromJson_(o.endPosition);return{before:this.contentModel_.getTextBefore(n,i),after:this.contentModel_.getTextAfter(r,i),match:this.contentModel_.getTextBetween(n,r)}}relativePositionFromJson_(o){return new sync.position.RelativeContentPosition(o.nodeId,o.sentinelType,o.distance)}};var nv="oxy-button oxy-button--small oxy-button--icon-only search-results-tracker__button",rv=function(t){return sync.react.h("div",{className:`oxy-button__icon ui-action-small-icon ${t}`})},cE=function({currentResult:t,totalResults:o,onUpNavigation:i,onDownNavigation:n}){var r;return t>=0?r=tr(msgs.FIND_CURRENT_OF_TOTAL_,{$CURRENT:t+1,$TOTAL:o}):r=`${tr(msgs.Results)}: ${o}`,sync.react.h("div",{className:"search-results-tracker"},sync.react.h("div",{className:"search-results-tracker__progress"},sync.react.h("div",{className:"search-results-tracker__word-breaker"},r)),sync.react.h("span",{className:"search-results-tracker__buttons"},sync.react.h("button",{className:nv,name:"arrowup",title:tr(msgs.FIND_PREVIOUS_),onClick:i},rv("prev-16-icon")),sync.react.h("button",{className:nv,name:"arrowdown",title:tr(msgs.FIND_NEXT_),onClick:n},rv("next-16-icon"))))},dh=cE;var ph=200,sg=class extends sync.react.Component{constructor(o){super(o);this.searchResultPreviewExtractor_=o.previewExtractor||new rg,this.resultsWithPreview_=this.computeResultsWithPreview_(o)}computeResultsWithPreview_({results:o}){return o.length<=ph?o.map(i=>{var n=this.searchResultPreviewExtractor_.extractPreview(i);return{before:n.before,after:n.after,match:n.match,id:i.highlightId}}):[]}componentWillReceiveProps(o){o.results!==this.props.results&&(this.resultsWithPreview_=this.computeResultsWithPreview_(o))}render(){var o=this.props.results;return this.props.resultsNotRetrieved?this.renderResultsNotRetrieved():o.length>ph?this.renderTooManyResults():o.length===0?this.renderNoResults():this.renderResults()}renderResults(){return sync.react.h("div",{className:"search-results-view"},sync.react.h(dh,{currentResult:this.props.selectedResultIndex,totalResults:this.props.results.length,onDownNavigation:this.props.onDownNavigation,onUpNavigation:this.props.onUpNavigation}),sync.react.h(iv,{onResultSelected:this.props.onResultSelected,onResultChosen:this.props.onResultChosen,selectedResultId:this.props.selectedResultId,results:this.resultsWithPreview_}))}selectedResultChanged(o){this.props.onResultSelected(o)}resultChosen(o){this.props.onResultChosen(o)}renderNoResults(){return sync.react.h("div",{className:"search-results__msg"},tr(msgs.NO_OCCURRENCE_FOUND_))}renderTooManyResults(){return sync.react.h("div",null,sync.react.h(dh,{currentResult:this.props.selectedResultIndex,totalResults:this.props.results.length,onDownNavigation:this.props.onDownNavigation,onUpNavigation:this.props.onUpNavigation}),sync.react.h("div",{className:"search-results__msg"},tr(msgs.TOO_MANY_RESULTS_,{$maxResults:ph})))}renderResultsNotRetrieved(){return sync.react.h("div",{className:"search-results__msg search-results__msg--error"},tr(msgs.COULD_NOT_CONNECT_TO_SERVER_))}};var ag=class extends goog.Disposable{constructor(o,i){super();this.model_=o,this.container_=i,this.editingSupport_=null,this.onResultSelected_=this.onResultSelected_.bind(this),this.onResultChosen_=this.onResultChosen_.bind(this),this.onUpNavigation_=this.onUpNavigation_.bind(this),this.onDownNavigation_=this.onDownNavigation_.bind(this);var n=new goog.events.EventHandler(this);this.registerDisposable(n),n.listen(this.model_,Ae.RESULTS_CHANGED,this.render),n.listen(this.model_,Ae.SELECTION_CHANGED,this.render)}setEditingSupport(o){this.editingSupport_=o}render(){this.model_.areResultsRelevant()||this.model_.areResultsStale()||this.model_.areResultsNotRetrieved()?sync.react.render(sync.react.h(sg,{results:this.model_.getResults(),resultsNotRetrieved:this.model_.areResultsNotRetrieved(),onResultSelected:this.onResultSelected_,onResultChosen:this.onResultChosen_,onUpNavigation:this.onUpNavigation_,onDownNavigation:this.onDownNavigation_,selectedResultId:this.model_.getSelectionId(),selectedResultIndex:this.model_.getSelectionIndex()}),this.container_):sync.react.unmountComponentAtNode(this.container_)}onUpNavigation_(){this.navigateBy_(-1)}onDownNavigation_(){this.navigateBy_(1)}navigateBy_(o){let i=this.model_.getResultsCount();var n=this.model_.getSelectionIndex();if(n!==-1){var r=(n+i+o)%i;this.model_.setSelectedResultByIndex(r)}else this.navigateFromCaretBy_(o)}navigateFromCaretBy_(o){var i=this.getCaretPosition();if(i){var{index:n}=this.model_.getResultAfterCaret(i),r=o>0?n+o-1:n+o;this.model_.setSelectedResultByIndex(r)}}getCaretPosition(){if(this.editingSupport_){var o=this.editingSupport_.getSelectionManager(),i=o.getSelection();if(i)return i.start.toRelativeContentPosition()}return null}onResultSelected_(o){this.model_.setSelectedResult(o)}onResultChosen_(o){this.model_.setSelectedResult(o),this.editingSupport_&&this.editingSupport_.focus()}disposeInternal(){super.disposeInternal(),sync.react.unmountComponentAtNode(this.container_)}};namespace("sync.actions");var _l=function(t,o,i){Ga.call(this),this.viewManager_=o,this.selectionManager_=t,this.viewRenderer_=i};goog.inherits(_l,Ga);_l.VIEW_ID="find-replace-view";_l.prototype.performFind=function(t){if(!t){let o=this.selectionManager_.getSelection();t=sync.util.find.createFindReplaceQueryFromSelection(o)}this.viewManager_.focusView(_l.VIEW_ID),this.viewRenderer_.performQuery(t)};var sv=_l;sync.actions.FindReplaceSideViewAction=_l;var lg=class extends sync.view.ViewRenderer{constructor(o){super();this.viewManager_=o}getTitle(){return tr(msgs.FIND_REPLACE_)}getTitleTooltip(){return tr(msgs.SEARCH_)}install(o){this.container_=o}editorChanged(o){var i=this.createPerEditorStateDisposer_(o);this.editingSupport_=o.getEditingSupport();var n=this.editingSupport_.supportsEditing()===!1,r=new Ae;i.registerDisposable(r),this.findReplaceForm_=new Ip(workspace.a11y,r,n),this.findReplaceForm_.enableNarrowLayout(),i.registerDisposable(this.findReplaceForm_);var{formContainer:s,resultsContainer:a}=this.createLayout_();this.findReplaceForm_.install(s);var l=new Tp(this.findReplaceForm_,r,this.editingSupport_);i.registerDisposable(l);var c=this.clearOnEsc_(l);i.registerDisposable(c);var d=new ag(r,a);i.registerDisposable(d),d.render(),d.setEditingSupport(this.editingSupport_);var g=new sv(this.editingSupport_.getSelectionManager(),this.viewManager_,this);this.editingSupport_.getActionsManager().registerAction("Author/FindReplace",g);var m=g.getFindQuery(this.editingSupport_.options);m&&this.scheduleFindQuery(m,g,o)}scheduleFindQuery(o,i,n){i.scheduleFindQuery(o,n.getEditingSupport().getActionsExecutor())}createLayout_(){var o=goog.dom.createDom("div","find-replace-view__form"),i=goog.dom.createDom("div","find-replace-view__results");return this.container_.appendChild(goog.dom.createDom("div","find-replace-view__container",o,i)),{formContainer:o,resultsContainer:i}}createPerEditorStateDisposer_(o){var i=new goog.Disposable;return i.addOnDisposeCallback(this.disposePreviousState_,this),o.listenOnce(sync.api.Editor.EventTypes.DISPOSE,()=>i.dispose()),i}disposePreviousState_(){this.findReplaceForm_=null,this.editingSupport_=null,goog.dom.removeChildren(this.container_)}opened(){this.findReplaceForm_&&this.findReplaceForm_.setVisible()}closed(){this.findReplaceForm_&&this.findReplaceForm_.setHidden()}focus(){this.findReplaceForm_.focus()}performQuery(o){this.findReplaceForm_.setQuery(o)}renderIcon(){return goog.dom.createDom("div",["FindReplace24"])}clearOnEsc_(o){var i=new goog.events.EventHandler(this);return i.listen(this.container_,goog.events.EventType.KEYDOWN,n=>{n.keyCode===goog.events.KeyCodes.ESC&&(this.editingSupport_.focus(),o.clear())}),i}};namespace("sync.actions");var zc=function(t,o,i){sync.actions.AbstractAction.call(this,t?"Alt Up":"Alt Down"),this.up_=t,this.actionsManager_=o,this.readOnlyStatus_=i};goog.inherits(zc,sync.actions.AbstractAction);zc.prototype.actionPerformed=function(t){this.actionsManager_.invokeOperation("ro.sync.ecss.extensions.commons.operations.MoveBlockAuthorOperation",{direction:this.up_?"up":"down"},t)};zc.prototype.getDisplayName=function(){return this.up_?tr(msgs.MOVE_UP_TOOLTIP_):tr(msgs.MOVE_DOWN_TOOLTIP_)};zc.prototype.isEnabled=function(){return!this.readOnlyStatus_.isReadOnly()};var gh=zc;var vl=class{constructor(o,i){this.controller=o,this.actionsManager_=i}initReadOnlyHandling(o,i,n){this.readOnlyStatus_=o,this.runningServerUpdates_=0,this.serverRoUpdate_=!0;try{var r={readOnly:!i};goog.object.extend(r,n||{}),o.setReadOnlyState(r)}finally{this.serverRoUpdate_=!1}goog.events.listen(this.controller,rn.EventType.READ_ONLY_STATUS_RECEIVED,goog.bind(this.updateClientRoStatus_,this)),goog.events.listen(o,ue.EventTypes.READ_ONLY_STATUS_CHANGED,goog.bind(this.maybeUpdateServerRoStatus_,this))}updateClientRoStatus_(o){if(!(this.runningServerUpdates_>0)){this.serverRoUpdate_=!0;try{var i={readOnly:!!o.docUpdate.readOnly};goog.object.extend(i,o.docUpdate.readOnlyReason||{}),this.readOnlyStatus_.setReadOnlyState(i)}finally{this.serverRoUpdate_=!1}}}maybeUpdateServerRoStatus_(o){this.serverRoUpdate_||(this.runningServerUpdates_+=1,this.actionsManager_.invokeOperation("SetReadOnlyStatusOperation",{"read-only":o.isReadOnly,reason:o.state.message,"reason-code":o.state.code},null,null,!0).then(goog.bind(function(){this.runningServerUpdates_-=1},this)))}};goog.require("goog.functions");goog.require("goog.object");namespace("sync.support");var x=sync.support.AuthorEditingSupport=function(t,o,i,n){this.editor=t,xc.call(this,t.layoutManager,t.getActionsManager(),t.editorViewport,o,i,n,t.disposeId),this.widgets=this.editor.widgets,this.workspaceState_=n,this.errorsModel_=new sl,this.attrActions=new q_(this.widgets,this),this.serverDeploymentId_="",goog.events.listen(this,sync.api.Editor.EventTypes.CUSTOM_MESSAGE_RECEIVED,goog.bind(function(r){this.editor.dispatchEvent(r)},this)),this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_),this.contextMenuConfiguration_=new $_};goog.inherits(x,xc);x.MAX_CONCURRENT_IMAGES=3;x.EDIT_PROFILING_ATTRS_ACTION_ID="Author/EditProfilingAttributes";x.prototype.registerSideViews=function(t){if(t.installView("review-panel-list",new p_),t.installView("attributes-panel-table",new Yy),this.isAutomaticValidationActive_()){var o=new Vy;t.installView("validation-panel-table",o)}if(this.options.searchMode!=="dialog"){var i=new lg(t);t.installView("find-replace-view",i)}};x.prototype.load=function(t,o,i){return this.serverDeploymentId_=t.id.substring(t.id.lastIndexOf(".")+1),this.registerSideViews(workspace.viewManager),x.superClass_.load.call(this,t,o,i).then(n=>{var r=9e4,s=parseInt(this.options.backupTimeout,10)||r;return this.editorBackup_=new xy(this.editor.preventLeave,this.xmlController,s,new E(this.getUrl()).getFileName(),this.workspaceState_),this.registerDisposable(this.editorBackup_),n})};x.prototype.buildEditModeModel=function(t){return new ft(t.modes)};x.prototype.initAfterLoad=function(t,o,i){x.superClass_.initAfterLoad.call(this,t,o,i),sync.select.setSelectionHandler(this.selectionHandler),t.editorCreated(this.editor);var n=new Xg(i);this.registerDisposable(n);var r=goog.userAgent.ANDROID&&!goog.userAgent.GECKO;r||goog.events.listen(n,Xg.EventType.DOCUMENT_CORRUPTED,goog.bind(this.restoreContent,this)),this.reviewsConnectorRenderer_=new Q_(this.viewportScroller),this.registerDisposable(this.reviewsConnectorRenderer_),new vl(this.controller,this.actionsManager).initReadOnlyHandling(this.getReadOnlyStatus(),o.isDocumentEditable,o.readOnlyReason),this.reviewsConnectorRenderer_.attach(this.selectionManager),this.spellChecker_=new m_(this.contextMenu,this.controller,this.layoutChangeTracker,this.domUpdateSilencer),this.enableTableDragHandle_(),this.lazyLoader.startVisible(x.MAX_CONCURRENT_IMAGES)};x.prototype.restoreContent=function(t){if(sync.rest.callAsync("RESTDocumentManager.reloadDocument",{docId:this.editor.docId}).then(goog.bind(function(n){this.problemReporter.showMessages(n.messages);var r=sync.model.XmlDom.getDocumentNode(this.editorViewport),s=h.getIdOfXmlNode(r),a=p.getSentinelNode(s,f.BEFORE),l=p.getSentinelNode(s,f.AFTER),c=this.editorViewport.childNodes[0];this.controller.exitDocument([c]),goog.dom.removeNode(r),goog.dom.removeNode(a),goog.dom.removeNode(l);var d=n.document,g=this.controller.parseHTML([d])[0],m=sync.util.getDocDomHelper(),v=m.document_.createDocumentFragment(),C=Array.prototype.slice.apply(g.childNodes);for(var N of C)goog.dom.appendChild(v,N);goog.dom.insertChildAt(c,v,0),this.controller.enterDocument([this.editorViewport.childNodes[0]])},this)).thenCatch(sync.util.error.reloadPage),t){var o=tr(msgs.ACTION_NOT_SUPPORTED_);if(t.msg){var i=goog.dom.createDom("div","",o,goog.dom.createDom("p","",t.msg));this.problemReporter.showError(i,!0)}else this.problemReporter.showErrorWithProblemReport(o)}};x.prototype.shouldSetDirty=function(t){return x.superClass_.shouldSetDirty.call(this,t)&&this.concurrentEditingManager.shouldSetEditorDirty(t)};x.prototype.initBeforeCreatingActions=function(t,o){x.superClass_.initBeforeCreatingActions.call(this,t,o);var i=t.peerSelections.map(Ea.fromDocumentUpdatePeerSelection);this.concurrentEditingManager=new xs(this.editor,this.options,this.docId,i,o,this.viewportScroller,this.domUpdateSilencer,this.workspaceState_),this.registerDisposable(this.concurrentEditingManager)};x.prototype.createActions=function(t,o,i){x.superClass_.createActions.call(this,t,o,i);var n=this.actionsManager,r=this.getReadOnlyStatus(),s=this.editor,a=this.markersModel,l=new Fy(s),c=this.options.trackChanges===sync.api.change_tracking.ChangeTrackingInitialState.FORCED||this.options.trackChanges===sync.api.change_tracking.ChangeTrackingInitialState.FORCED_OFF,d={"Author/AcceptChange":new N_(this.getSelectionManager(),t,a,r,c),"Author/RejectChange":new M_(this.userName,c,this.selectionManager,t,a,r),"Author/AcceptAllChanges":new x_(this,t,a,r),"Author/RejectAllChanges":new R_(this,t,a,r),"Author/AddComment":new H_(s.getEditingSupport(),t,a,this.selectionAdjuster,r),"Author/EditComment":new j_(s,t,a,r),"Author/RemoveComment":new O_(this.selectionManager,t,a,r),"Author/Reply":new P_(t,a,this.concurrentEditingManager,r),"Author/MarkAsDone":new k_(t,a,this.concurrentEditingManager,this.selectionManager,r),"Author/EditReference":new Uy(l,this.selectionManager),"Author/EditMarkerReference":new By(l,a),"Author/Refresh_references":new ur({id:"Author/Refresh_references",compatible:!0,roEnabled:!0},t,r,this.getScrollEventTarget(),this.selectionManager),"Author/Download":new Jl(s,""),"Author/ReportProblem":zo.getInstance(),"Author/About":new pl,"Author/ValidationResults":new W_,"App/FocusAttributesPanel":new Vc(this.selectionManager,r),"App/FocusAttributesPanelFromKeyboard":new V_(this.selectionManager,r),"Author/Print":new A_(this.controller.getXmlDocumentProvider(),workspace.getViewManager(),this.layoutManager),"Author/Help":new $r,"Author/Tab":new rh(n,this.xmlModel,!1),"Author/ShiftTab":new rh(n,this.xmlModel,!0),"General/Settings":new My(this.options),"Author/DeleteElement":new z_(t,r),"Author/UnwrapElement":new Y_(n,r),"Author/OpenImage":new X_(this.editor)},g=t.getChangeTrackingManager();let m="Author/TrackChanges";d[m]=new L_(s.docId,s,r,g,c),g.listen(sync.api.ChangeTrackingManager.EventType.CHANGE_TRACKING_TOGGLED,()=>this.actionsManager.refreshActionsStatus(m)),this.registerActions(d),this.saveAction=new Up(s.docId,s),n.registerAction("Author/Save",this.saveAction),this.options.autoSaveInterval&&n.registerAction("Author/Save",new ol(s,t,this.saveAction,this.options.autoSaveInterval)),n.registerAction("Author/MoveUp",new gh(!0,n,r)),n.registerAction("Author/MoveDown",new gh(!1,n,r)),this.addEditProfilingAttributesAction_(r),xs.isEnabled()&&this.options.sharedSessionCompatible&&n.registerAction(Tr.ID,new Tr(i,this.concurrentEditingManager,s,n)),this.resourceDragHandler_=new sync.view.ResourceDragHandler(this.getUrl(),n,t,i,this.getSelectionManager(),this.getLayoutChangeTracker(),this.concurrentEditingManager,this.scheduler),this.registerDisposable(this.resourceDragHandler_),this.saveAsAction=new v_(s.docId,s,this.problemReporter),this.saveAsAction.isEnabled()&&n.registerAction("Author/SaveAs",this.saveAsAction);var v=new D_(s,this.controller,this.problemReporter,this.safeShortcuts,s.preventLeave);n.registerAction("Author/ShowXML",v)};x.prototype.addEditProfilingAttributesAction_=function(t){var o=sync.options.ServerOptions.getServerOption("enable.edit.profiling.attributes"),i=!1;if(o==="true")i=!0;else if(o==="auto"){var n=this.editor.documentTypeId;i=n&&n.toLowerCase().indexOf("dita")!==-1}i&&this.actionsManager.registerAction(x.EDIT_PROFILING_ATTRS_ACTION_ID,new ev(this.xmlController,this.selectionManager,t))};x.prototype.canEditProfilingAttributes=function(){return!!this.getActionsManager().getActionById(x.EDIT_PROFILING_ATTRS_ACTION_ID)};x.prototype.editProfilingAttributes=function(){this.getActionsExecutor().executeAction(this.actionsManager.getActionById(x.EDIT_PROFILING_ATTRS_ACTION_ID))};x.prototype.getResourceDragHandler=function(){return this.resourceDragHandler_};x.prototype.supportsEditing=function(){return!0};x.prototype.getApplicationToolbar=function(){var t=new g_(this.editor,this.actionsManager,this.undoManager,this.actionsExecutor);return this.registerDisposable(t),!this.options.alwaysShowSaveButton&&this.options.autoSaveInterval&&this.options.autoSaveInterval<=5&&t.config.removeAction("Author/Save"),t};x.prototype.getFirstToolbar=function(){this.enableMarkerSelection();var t=new h_(this.controller.getChangeTrackingViewModesHandler(),this.actionsManager,this.selectionManager,this.markersModel,this.actionsExecutor);return this.registerDisposable(t),(this.options.trackChanges===sync.api.change_tracking.ChangeTrackingInitialState.FORCED||this.options.trackChanges===sync.api.change_tracking.ChangeTrackingInitialState.FORCED_OFF)&&(t.config.removeAction("Author/TrackChanges"),t.config.removeAction("Author/AcceptChange")),t};x.prototype.getOtherToolbars=function(t){this.installExtensionActions().then(o=>{if(Vt.logToolbarConfig("after adding actions defined in framework",o),o){var i=this.contextMenu;i.addEntries(o.contextualItems,this.contextMenuConfiguration_.getFrameworkActionsContextMenuIndex()),i.addEntries([this.contextMenuConfiguration_.getInsertElementEntry()]),o.contextualItems=i.getEntries(),this.editor.dispatchEvent(new sync.api.Editor.ActionsLoadedEvent(o)),Vt.logToolbarConfig("after dispatching sync.api.Editor.ActionsLoadedEvent",o);var n=new Be(this.actionsManager,this.actionsExecutor,this.selectionManager);this.registerDisposable(n),n.config=o,i.setEntries(o.contextualItems),i.flattenMenuIfOneItem(tr(msgs.INSERT_)),this.ccCustomizer_.addExtensionConfiguration(o.ccItems,o.filterCCItems),t(n)}else t(null)})};x.prototype.getEditingAreaToolbar=function(){var t=new ov(this.actionsManager,this.selectionManager,this.actionsExecutor,this.options["tags-mode"]);return this.registerDisposable(t),t};x.prototype.enableAutomaticValidation=function(){if(!this.validationEnabled_){if(this.validationEnabled_=!0,!goog.userAgent.ANDROID&&!goog.userAgent.MOBILE){var t=new Wy(this.errorsModel_,this.controller,this.widgets,goog.bind(function(){return!this.contextMenu.isVisible()},this),this.getScrollEventTarget());this.registerDisposable(t)}this.validationController=new ky(this.controller,this.errorsModel_),this.controller.registerDocumentFilter(new Ly(this.validationController,this.errorsModel_)),this.validationController.scheduleAutomaticValidation()}};x.prototype.registerAttributeActionsProvider=function(t){this.attrActions.registerAttributeActionsProvider(t)};x.prototype.getAttributeActionProvider=function(){return this.attrActions};x.prototype.getErrorsModel=function(){return this.errorsModel_};x.prototype.getSpellChecker=function(){return this.spellChecker_};x.prototype.createUIComponents=function(t,o){this.enableContextMenu(),this.options.hideBreadcrumb!=="true"&&this.options.hideBreadcrumb!==!0&&this.createBreadcrumbs(this.layoutManager.getEditorArea()),x.superClass_.createUIComponents.call(this,t,o),this.isAutomaticValidationActive_()&&this.enableAutomaticValidation(),t.attach(this.editModeModel)};x.prototype.createAndRegisterImageLoaderUpdateFilter=function(t){this.lazyLoader=new y_(this.editorViewport,this.layoutChangeTracker),this.registerDisposable(this.lazyLoader);var o=this.options["image-cache-size"];o&&this.lazyLoader.setInMemoryCacheSize(parseInt(o,10)),t.registerDocumentFilter(new __(this.lazyLoader)),t.listen(M.EventType.MODEL_CHANGED,goog.bind(function(){this.lazyLoader.loadImagesInViewport()},this))};x.prototype.isAutomaticValidationActive_=function(){var t=!0,o="validate.as.you.type",i=sync.options.ServerOptions.getServerOption(o);return this.options.hasOwnProperty(o)?t=sync.util.isOptionTrue(this.options[o]):i!==void 0&&i===!1&&(t=!1),t};x.prototype.createBreadcrumbs=function(){var t=this.editorViewport.querySelector("*[data-root=true]");t?(this.breadcrumbs=new py(t,this.getSelectionManager(),this.viewportScroller,this.actionsManager,this.actionsExecutor,this.elementNameEnhancer),this.registerDisposable(this.breadcrumbs),this.breadcrumbs.attach(this.controller,this.getEditingAreaToolbar())):console.log("Breadcrumbs not available.")};x.prototype.getContextMenuBuiltinEntries=function(){return this.contextMenuConfiguration_.getContextMenuBuiltinEntries()};x.prototype.enableMarkerSelection=function(){var t=new Py(this.markersModel,this.viewportScroller,this.selectionAdjuster,this.getSelectionManager());this.reviewsConnectorRenderer_&&t.setGuidingArrowRenderer(this.reviewsConnectorRenderer_),this.registerActions({"Author/PrevMarker":new F_(t,this.markersModel),"Author/NextMarker":new U_(t,this.markersModel)}),t.install(this.editModeModel,this.editorViewport)};x.prototype.enableTableDragHandle_=function(){if(!(goog.userAgent.ANDROID||goog.userAgent.MOBILE)){var t=new Oy(this.getSelectionManager(),this.actionsManager,this.controller,this.editor.layoutManager,this.editor.getReadOnlyStatus(),this.viewportScroller);this.registerDisposable(t)}};x.prototype.disposeInternal=function(){x.superClass_.disposeInternal.call(this);try{this.validationController&&this.validationController.dispose()}catch(t){console.error(t)}this.spellChecker_&&this.spellChecker_.dispose(),this.editorViewport&&goog.dom.removeChildren(this.editorViewport)};x.prototype.focus=function(){(!this.editableWidget_||!this.editableWidget_.focus())&&x.superClass_.focus.call(this)};x.prototype.markEditableWidgetAsActive=function(t,o){if(o){if(this.editableWidget_)throw new Error("Only one editable widget can be active at a time.");this.editableWidget_=t}else this.editableWidget_=null;let i=new Hp(t,o);this.dispatchEvent(i)};x.prototype.syncToAuthorMode=function(t){return this.editableWidget_?this.editableWidget_.commitChanges(t):goog.Promise.resolve(!0)};x.prototype.getReadOnlyStatus=function(){return this.editor.getReadOnlyStatus()};x.prototype.getUrl=function(){return this.editor.getUrl()};x.prototype.getWidgetsFactory=function(){return this.widgetsFactory_||(this.widgetsFactory_=new J_(this,this.layoutManager.getDocContainer())),this.widgetsFactory_};x.prototype.getConcurrentEditingManager=function(){return this.concurrentEditingManager};var av=x;sync.support.AuthorEditingSupport=x;namespace("sync.api");sync.api.WrapperEditingSupport=function(t){this.editingSupport=t,sync.api.EditingSupport.call(this,this.editingSupport.options),goog.events.listen(this.editingSupport,sync.support.EditingSupport.EventTypes.LINK_OPENED,goog.bind(function(o){this.dispatchEvent(new sync.support.EditingSupport.LinkOpenedEvent(o.url,o.external))},this)),this.registerDisposable(this.editingSupport)};goog.inherits(sync.api.WrapperEditingSupport,sync.api.EditingSupport);sync.api.WrapperEditingSupport.prototype.getActionsManager=function(){return this.editingSupport.getActionsManager()};sync.api.WrapperEditingSupport.prototype.getSelectionManager=function(){return this.editingSupport.getSelectionManager()};sync.api.WrapperEditingSupport.prototype.getHighlightsManager=function(){return this.editingSupport.getHighlightsManager()};sync.api.WrapperEditingSupport.prototype.getSpellChecker=function(){return this.editingSupport.getSpellChecker()};sync.api.WrapperEditingSupport.prototype.getContent=function(t){this.editingSupport.getContent(t)};sync.api.WrapperEditingSupport.prototype.load=function(t,o,i){return this.editingSupport.load(t,o,i)};sync.api.WrapperEditingSupport.prototype.getApplicationToolbar=function(){return this.editingSupport.getApplicationToolbar()};sync.api.WrapperEditingSupport.prototype.getFirstToolbar=function(){return this.editingSupport.getFirstToolbar()};sync.api.WrapperEditingSupport.prototype.getOtherToolbars=function(t){this.editingSupport.getOtherToolbars(t)};sync.api.WrapperEditingSupport.prototype.getType=function(){return this.editingSupport.getType()};sync.api.WrapperEditingSupport.prototype.focus=function(){this.editingSupport.focus()};sync.api.WrapperEditingSupport.prototype.getResourceDragHandler=function(){return this.editingSupport.getResourceDragHandler()};sync.api.WrapperEditingSupport.prototype.getUrl=function(){return this.editingSupport.getUrl()};sync.api.WrapperEditingSupport.prototype.scrollToAnchor=function(t){return this.editingSupport.scrollToAnchor(t)};sync.api.WrapperEditingSupport.prototype.getConcurrentEditingManager=function(){return this.editingSupport.getConcurrentEditingManager()};namespace("sync.api");sync.api.WrapperAuthorEditingSupport=function(t){sync.api.WrapperEditingSupport.call(this,t),this.editingSupport=t};goog.inherits(sync.api.WrapperAuthorEditingSupport,sync.api.WrapperEditingSupport);sync.api.WrapperAuthorEditingSupport.prototype.registerEnhancer=function(t,o){this.editingSupport.registerEnhancer(t,o)};sync.api.WrapperAuthorEditingSupport.prototype.getPersistentHighlightsManager=function(){return this.editingSupport.getPersistentHighlightsManager()};sync.api.WrapperAuthorEditingSupport.prototype.getDocument=function(){return this.editingSupport.getDocument()};sync.api.WrapperAuthorEditingSupport.prototype.getWidgetsFactory=function(){return this.editingSupport.getWidgetsFactory()};goog.require("goog.string");namespace("sync.editors");sync.editors.EditingSupportFactory={};sync.editors.EditingSupportFactory.providers_=[];sync.editors.EditingSupportFactory.createEditingSupport=function(t,o,i,n){for(var r,s=o.options,a=0;a<sync.editors.EditingSupportFactory.providers_.length;a++){var l=sync.editors.EditingSupportFactory.providers_[a];if(r=l.getEditingSupport(t,o,s),r)break}return r||(t&&goog.string.startsWith(t,"image/")?r=new wy(o,s):t&&!goog.string.startsWith(t,"text/xml")&&(goog.string.startsWith(t,"text/")||goog.string.startsWith(t,"application/json"))?r=new Ny(o,s):r=new av(o,s,i,n)),r};sync.editors.EditingSupportFactory.registerEditingSupportProvider=function(t){sync.editors.EditingSupportFactory.providers_.push(t)};var zne=sync.editors.EditingSupportFactory;var El=class extends goog.Disposable{constructor(){super()}generateDisposeId=function(){return Math.random().toString(36).substr(2,9)};load(o,i){var n,r=o.getServerLoadingOptions();if(o.roomId)n=sync.rest.callAsync("RESTDocumentManager.createModelInRoom",{$entity:{disposeId:i,roomId:o.roomId,userName:o.userName,options:r,shouldUseAuthenticatedUserName:o.shouldUseAuthenticatedUserName}});else{var s=o.content,a=o.sourceDocId;n=sync.rest.callAsync("RESTDocumentManager.retrieveDocument",{userName:o.userName,$entity:{disposeId:i,url:encodeURIComponent(o.url),content:s,sourceDocId:a,options:r}})}return n}loadMap(o,i){var n=o.content,r=o.sourceDocId;return sync.rest.callAsync("RESTDocumentManager.retrieveDITAMapDocument",{userName:o.userName,$entity:{disposeId:i,url:encodeURIComponent(o.url),content:n,sourceDocId:r,options:o.getServerLoadingOptions()}})}reload(o){return sync.rest.callAsync("RESTDocumentManager.reloadDocument",{docId:o})}};var Cl=class extends _{constructor(o){super({displayName:tr(msgs.LOGOUT_),description:tr(msgs.LOGOUT_)});this.authenticationManager_=o}actionPerformed(o){var i=o||goog.nullFunction;this.dialog_=this.getDialog(),this.dialog_.onSelect(goog.bind(function(n,r){n==="yes"?(r.preventDefault(),this.dialog_.hide(),this.authenticationManager_.logout().finally(i)):i()},this)),this.dialog_.setPreferredSize(400,null),this.dialog_.show()}getDialog(){var o=this.dialog_,i=goog.dom.createDom;return o||(o=workspace.createDialog("confirm-logout-dialog"),o.setTitle(tr(msgs.LOGOUT_)),o.setButtonConfiguration([{key:"yes",caption:tr(msgs.LOGOUT_)},{key:"no",caption:tr(msgs.CANCEL_)}]),this.dialog_=o),goog.dom.removeChildren(o.getElement()),goog.dom.appendChild(o.getElement(),i("p","logout-message",tr(msgs.LOGOUT_CONFIRMATION_))),goog.dom.appendChild(o.getElement(),i("p","unsaved-changes-warning",tr(msgs.LOGOUT_WARNING_))),o}dispose(){this.dialog_&&this.dialog_.dispose()}};goog.require("goog.array");goog.require("goog.object");goog.require("goog.events");goog.require("goog.dom");goog.require("goog.dom.classlist");goog.require("goog.dom.dataset");goog.require("goog.structs.Map");goog.require("goog.style");goog.require("goog.dom.Range");goog.require("goog.userAgent");goog.require("goog.Uri");goog.require("goog.debug.FancyWindow");goog.require("goog.debug.Console");goog.require("goog.events");goog.require("goog.events.EventTarget");goog.require("goog.net.XhrIo");goog.require("goog.ui.ac.AutoComplete");goog.require("goog.ui.ac.Renderer");goog.require("goog.ui.ac.InputHandler");namespace("sync");var w=function(t,o,i,n,r,s){sync.api.Editor.call(this),this.layoutManager=o,this.widgets=t,this.editorViewport=i,this.editingContextManager_=n,this.workspaceState_=r,this.actionsManager=new en,this.registerDisposable(this.actionsManager),this.frameworkActionContextMenuIndex=0,this.enhancers=[],this.readOnlyStatus_=new ue,this.registerDisposable(this.readOnlyStatus_),this.readOnlyStateRenderer_=new Ay(this.layoutManager,this.readOnlyStatus_),this.registerDisposable(this.readOnlyStateRenderer_),goog.events.listen(this.readOnlyStatus_,ue.EventTypes.READ_ONLY_STATUS_CHANGED,goog.bind(function(){this.actionsManager.refreshActionsStatus()},this)),this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_),this.options=null,this.loadingResolver_=goog.Promise.withResolver(),this.readOnlyStatus="acrolinx",this.fileServerConnector_=null,this.authorDocumentLoader_=new El,this.registerDisposable(this.authorDocumentLoader_),this.disposeId=this.authorDocumentLoader_.generateDisposeId(),this.loadingIndicator_=new gp(i),this.authenticationManager_=s};goog.inherits(w,sync.api.Editor);w.prototype.waitToLoad=function(){return this.loadingResolver_.promise};w.prototype.load=function(t){var o=this.load_(t,!1);o.then(this.loadingResolver_.resolve),o.thenCatch(this.loadingResolver_.reject)};w.prototype.setFileServerConnector=function(t){this.fileServerConnector_=t,goog.events.listen(this,sync.api.Editor.EventTypes.CUSTOM_MESSAGE_RECEIVED,goog.bind(function(o){var i=o.context,n=o.message.message,r=o.message.url;this.fileServerConnector_.getFileServer().login(n,goog.bind(function(){var s=sync.api.Editor.WebappMessageReceived.Context;if(i===s.LOAD)window.location.reload();else if(i===s.EDITING)this.getActionsManager().getActionById("Author/Refresh_references").actionPerformed(function(){});else if(i===s.SAVE)this.getActionsManager().getActionById("Author/Save").actionPerformed(function(){});else if(i===s.IMAGE)for(var a=document.querySelectorAll("img[data-src]"),l=0;l<a.length;l++)a[l].src=goog.dom.dataset.get(a[l],"src")},this),r)},this))};w.prototype.getFileServer=function(){return this.fileServerConnector_&&this.fileServerConnector_.getDescriptor()};w.prototype.createFileServerUrlChooser_=function(){var t=null;return this.fileServerConnector_&&(t=new Iy(this.fileServerConnector_,this)),t};w.prototype.setOptions=function(t){this.options=new Rc(t,this.editingContextManager_)};w.prototype.load_=function(t,o){this.options=new Rc(t,this.editingContextManager_);let i=!1;this.options.userName||(this.options.userName=tr(msgs.ANONYMOUS_),i=!0),this.userName=this.options.userName,this.options.shouldUseAuthenticatedUserName=i,this.options.autoSaveInterval=this.options.autoSaveInterval?Number(this.options.autoSaveInterval):0;var n=this.getReadOnlyState();n.readOnly&&(this.options.readOnlyState=n),this.getFileServer()&&!workspace.getUrlChooser()&&workspace.setUrlChooser(this.createFileServerUrlChooser_());var r,s=!1,a=this.workspaceState_.consumeSavedDocSessionInfo();return a&&!o?(s=!0,this.disposeId=a.disposeId,r=this.authorDocumentLoader_.reload(a.docId)):r=this.authorDocumentLoader_.load(this.options,this.disposeId),r.then(goog.bind(function(l){return l.authenticatedUserName?(this.options.isUserAuthenticated=!0,i&&(this.options.userName=l.authenticatedUserName,this.userName=this.options.userName)):this.options.isUserAuthenticated=!1,this.isDisposed()?(this.disposeServerSide(this.disposeId),goog.Promise.resolve()):this.init(l,this.editorViewport,this.widgets.getProblemReporter())},this)).thenCatch(goog.bind(this.retrieveDocumentFailed_,this,s,t))};w.prototype.isUserAuthenticated_=function(){return this.options?.isUserAuthenticated===!0};w.prototype.retrieveDocumentFailed_=function(t,o,i){if(this.isDisposed())return goog.Promise.resolve();var n=this.widgets.getProblemReporter();if(i instanceof sync.RESTException&&i.isUserActionRequired())this.dispatchEvent(new sync.api.Editor.WebappMessageReceived(i.getUserActionRequiredMessage(),sync.api.Editor.WebappMessageReceived.Context.LOAD));else{if(i instanceof sync.RESTException&&i.type==="license_error")throw n.reportLicensingProblem(this.editorViewport,i.message),i;if(t)return this.disposeId=this.authorDocumentLoader_.generateDisposeId(),this.load_(o,!0);i.statusCode===500?n.reportFormatNotSupported(this.editorViewport,new Oc(this.getUrl())):i.statusCode===404?o.roomId?n.reportRoomNotFound(this.editorViewport,i.message):n.reportFileNotFound(this.editorViewport,i.message):n.reportUnknownLoadingProblem(this.editorViewport,i.message,i)}throw i};w.prototype.reportFileNotFound=function(){this.widgets.getProblemReporter().reportFileNotFound(this.editorViewport,tr(msgs.RESOURCE_NOT_FOUND_)),this.loadingResolver_.reject(new sync.RESTException(404,"",null))};w.prototype.reportUnknownLoadingProblem=function(t,o){this.widgets.getProblemReporter().reportUnknownLoadingProblem(this.editorViewport,t,o),this.loadingResolver_.reject(new sync.RESTException(543,"",null))};w.prototype.init=function(t,o,i){this.updateUrl_(t.url),this.options.roomId=this.options.roomId||t.roomId,this.options.isRoomCreator=t.isRoomCreator,i.showMessages(t.messages||[]),this.docId=t.id,this.problemReporter=i,this.documentTypeId=t.documentTypeId,this.preventLeave=new Jr(workspace.state),this.registerDisposable(this.preventLeave),this.preventLeave.setEnabled(!this.isAutoSaveEnabled()),this.eventHandler_.listen(this.preventLeave,Jr.EventTypes.DIRTY_STATUS_CHANGED,function(r){this.dispatchEvent(new sync.api.Editor.DirtyStatusChangedEvent(r.isDirty))}.bind(this));var n=this.options.contentType||t.contentType;return this.editingSupport=sync.editors.EditingSupportFactory.createEditingSupport(n,this,workspace.a11y,workspace.state),this.editingSupport.listen(sync.api.EditingSupport.EventType.DIRTY_STATUS_CHANGED,function(r){this.setDirty(r.isDirty)}.bind(this)),this.enableKeepAlive_(this.editingSupport,this.docId,t.lockingEnabled),this.initEditingSupport_(this.editingSupport),this.registerDisposable(this.editingSupport),this.updateHiddenContentStripe(),this.editingSupport.load(t,o,i)};w.prototype.updateHiddenContentStripe=function(){this.editingContextManager_.updateHiddenContentState(),this.eventHandler_.listen(this.editingContextManager_,sync.api.EditingContextManager.EventTypes.CONTEXT_CHANGED,this.editingContextManager_.updateHiddenContentState.bind(this.editingContextManager_))};w.prototype.enableKeepAlive_=function(t,o,i){var n=sync.options.ServerOptions.getServerOption("always.send.keepalive")||i;if(n&&o){var r=Number(this.options.keepAliveIntervalSec),s=new Ty(o,this.problemReporter,workspace.state,workspace.errorHandler,r);s.start(),t.registerDisposable(s)}};w.prototype.openLink=function(t){if(this.dispatchEvent(t)){var o=this.getParentEventTarget();o&&o.handleLinkOpened(t)}};w.prototype.updateUrl_=function(t){var o=new E(this.options.url);o.setFragment(""),t&&o.getUrl()!==new E(t).getUrl()&&(this.options.url=t)};w.prototype.getUrl=function(){return this.options.url};w.prototype.getTitle=function(){return this.options.title||sync.util.getFileFromUrl(this.options.url)};w.prototype.disposeInternal=function(){this.disposeServerAndClientSide(),w.superClass_.disposeInternal.call(this)};w.prototype.disposeServerAndClientSide=function(){this.disposeServerAndClientSideInternal_(!1)};w.prototype.disposeServerAndClientSideOnTabClosed=function(){this.disposeServerAndClientSideInternal_(!0)};w.prototype.disposeServerAndClientSideInternal_=function(t){var o=Boolean(this.workspaceState_.getSavedDocSessionInfo());!o&&this.disposeId&&(t?this.disposeServerSideOnTabClosing_(this.disposeId):this.disposeServerSide(this.disposeId)),this.dispatchEvent(sync.api.Editor.EventTypes.DISPOSE)};w.prototype.disposeServerSideOnTabClosing_=function(t){var o=this.mustSaveEditorOnDispose_();if(navigator.sendBeacon){var i="../rest/"+it+"/doc/dispose/"+t+"/"+o+"/";navigator.sendBeacon(i)}else this.disposeServerSide()};w.prototype.disposeServerSide=function(){var t=this.mustSaveEditorOnDispose_(),o=this.getEditingSupport();o&&o.disposeServerResources&&o.disposeServerResources(t)};w.prototype.mustSaveEditorOnDispose_=function(){return this.isDirty()&&this.isAutoSaveEnabled()&&this.isAutoSaveActionInstalled_()};w.prototype.isAutoSaveActionInstalled_=function(){var t=this.getActionsManager().getActionById("Author/Save");return t instanceof ol};w.prototype.setDirty=function(t){this.isDirty()!==t&&this.preventLeave&&this.preventLeave.setDirty(t)};w.prototype.isDirty=function(){return this.preventLeave?this.preventLeave.isDirty():!1};w.prototype.createUIComponents=function(t,o){this.editingSupport.createUIComponents&&this.editingSupport.createUIComponents(t,o)};w.prototype.getOtherToolbars=function(t){this.editingSupport.getOtherToolbars(goog.bind(function(o){this.isDisposed()||t(this.getToolbar_(o))},this))};w.prototype.getApplicationToolbar=function(){var t=this.getToolbar_(this.editingSupport.getApplicationToolbar());return t&&(this.isUserAuthenticated_()?this.addLogoutAction_(t):this.addFileServerDisconnectAction_(t),Vt.logToolbarConfig("after adding built-in application toolbar actions",t.config),this.dispatchEvent(new sync.api.Editor.ActionsLoadedEvent(t.config)),Vt.logToolbarConfig("after dispatching sync.api.Editor.ActionsLoadedEvent",t.config)),t};w.prototype.getToolbar_=function(t){var o=null;return t instanceof Be?o=t:t instanceof Array&&(o=new Be(this.getActionsManager()),this.registerDisposable(o),o.config=new Co({toolbars:t})),o};w.prototype.addFileServerDisconnectAction_=function(t){if(this.fileServerConnector_&&this.fileServerConnector_.getFileServer()){var o=this.fileServerConnector_.getFileServer(),i=new jp(this,goog.bind(o.logout,o)),n=this.fileServerConnector_.getDescriptor().id+"/Logout";this.actionsManager.registerAction(n,i);var r=t.config.toolbars[0];if(r){var s=r.children[r.children.length-1];s.children.push({id:n,type:"action"})}}};w.prototype.addLogoutAction_=function(t){var o=new Cl(this.authenticationManager_),i="Author/Logout";this.actionsManager.registerAction(i,o);var n=t.config.toolbars[0];if(n){var r=n.children[n.children.length-1];r.children.push({id:i,type:"action"})}};w.prototype.getFirstToolbar=function(){var t=this.getToolbar_(this.editingSupport.getFirstToolbar());return t&&(Vt.logToolbarConfig("after adding built-in review toolbar actions",t.config),this.dispatchEvent(new sync.api.Editor.ActionsLoadedEvent(t.config)),Vt.logToolbarConfig("after dispatching sync.api.Editor.ActionsLoadedEvent",t.config)),t};w.prototype.getActionsManager=function(){return this.actionsManager};w.prototype.getPreventLeave=function(){return this.preventLeave};w.prototype.getController=function(){return this.editingSupport.getController()};w.prototype.registerAttributeActionsProvider=function(t){var o=this.editingSupport;if(o)o.getAttributeActionProvider().registerAttributeActionsProvider(t);else throw new Error("Editor not loaded")};w.prototype.getRootElement=function(){var t=this.editingSupport;return t&&t.getDocument().getDocumentElement()};w.prototype.getReadOnlyStatus=function(){return this.readOnlyStatus_};w.prototype.setReadOnlyState=function(t){this.readOnlyStatus_.setReadOnlyState(t)};w.prototype.getReadOnlyState=function(){return this.readOnlyStatus_.getReadOnlyState()};w.prototype.setReadOnlyStripeRenderer=function(t){this.readOnlyStateRenderer_.setStripeRenderer(t)};w.prototype.getEditingSupport=function(){return this.editingSupport};w.prototype.createBasicEditingSupport=function(){return new xc(null,this.actionsManager,this.editorViewport,this.options,workspace.a11y,workspace.state,this.disposeId,this.widgets)};w.prototype.registerEnhancer=function(t,o){this.editingSupport&&this.editingSupport.registerEnhancer&&this.editingSupport.registerEnhancer(t,o),this.enhancers.push({name:t,enhancer:o})};w.prototype.previewAuthorDocument=function(t,o){var i=new E(this.getUrl()),n=new E(t),r=this.editorViewport.querySelectorAll("div").length;if(r>1e3&&i.equalsIgnoringFragment(n))return goog.Promise.resolve(new by(o,this.editorViewport));var s=this.options.getPreviewLoadingOptions(this.userName,{url:t}),a=new Za(null,new en,o,s,workspace.a11y,workspace.state,this.authorDocumentLoader_.generateDisposeId(),this.widgets);return this.loadPreviewInternal_(o,s,a).then(goog.bind(function(l){return a.load(l,o,this.widgets.getProblemReporter())},this)).then(function(){return a.disposeServerResources(!1),a})};w.prototype.loadPreview=function(t,o){var i=this.options.getPreviewLoadingOptions(this.userName,o),n=new Za(null,new en,t,i,workspace.a11y,workspace.state,this.authorDocumentLoader_.generateDisposeId(),this.widgets);return this.loadPreviewInternal_(t,i,n).then(goog.bind(function(r){return this.enableKeepAlive_(n,r.id,r.lockingEnabled),n.load(r,t,this.widgets.getProblemReporter())},this))};w.prototype.loadPreviewInternal_=function(t,o,i){this.initEditingSupport_(i);var n={userName:this.userName,$entity:{disposeId:i.disposeId,url:encodeURIComponent(o.url),options:this.options.getServerOptions(o),parentDocId:this.docId}};o.content&&(n.$entity.content=o.content),o.sourceDocId&&(n.$entity.sourceDocId=o.sourceDocId);function r(){return sync.rest.callAsync("RESTDocumentManager.retrieveDocumentForPreview",n)}return this.fileServerConnector_?this.fileServerConnector_.callWithAuthHandling(r).thenCatch(goog.bind(this.retrieveDocumentPreviewFailed_,this,t,o.url)):r().thenCatch(goog.bind(this.retrieveDocumentPreviewFailed_,this,t,o.url))};w.prototype.initEditingSupport_=function(t){if(goog.events.listen(t,sp.EventTypes.LINK_OPENED,goog.bind(function(n){var r=new sync.api.Editor.LinkOpenedEvent(n.url,n.external);r.editingSupport=t,this.openLink(r)},this)),t.registerEnhancer)for(var o=0;o<this.enhancers.length;o++){var i=this.enhancers[o];t.registerEnhancer(i.name,i.enhancer)}};w.prototype.retrieveDocumentPreviewFailed_=function(t,o,i){var n=this.widgets.getProblemReporter();throw i.statusCode===500?n.reportFormatNotSupported(t,new Oc(o)):i.statusCode===404?n.reportFileNotFound(t,i.message):n.reportUnknownLoadingProblem(t),i};w.prototype.isAutoSaveEnabled=function(){return this.options.autoSaveInterval>0};w.prototype.triggerSave=function(t){var o=this.actionsManager.getActionById("Author/Save");if(o&&goog.isFunction(o.triggerSave)){var i=t||goog.nullFunction;o.triggerSave().then(function(){i(null,!0)},function(n){i(n,!1)})}};w.prototype.getEditingContextManager=function(){return this.editingContextManager_};w.prototype.getLoadingIndicator=function(){return this.loadingIndicator_};var lv=w;sync.Editor=w;namespace("sync.ui");var Yc=function(){};Yc.prototype.getTabHeaderImage=function(){return null};Yc.prototype.getTabHeaderDisplayName=function(){return null};Yc.prototype.insertTabContent=function(t){};var Sl=Yc;sync.ui.AbstractDashboardTab=Yc;goog.require("goog.ui.CustomButton");namespace("sync.ui");var sr=function(){};goog.inherits(sr,Sl);sr.prototype.getTabHeaderDisplayName=function(){var t=null;return this.createAction?t=this.createAction.name:this.openAction&&(t=this.openAction.name),t};sr.prototype.getTabHeaderImage=function(){var t=null;return this.openAction?t=this.openAction.getLargeIcon():this.createAction&&(t=this.createAction.getLargeIcon()),t};sr.prototype.insertTabContent=function(t){if(!this.actionsDiv){var o=goog.dom.createDom;this.actionsDiv=o("div","dashboard-containers-tab-actions-div"),this.createAction&&(this.createDocumentButton=new goog.ui.CustomButton([o("div",{id:"dashboard-containers-tab-new-action-image"}),tr(msgs.NEW_)]),this.createDocumentButton.render(this.actionsDiv),this.createDocumentButton.getElement().id="dashboard-containers-tab-new-action",goog.events.listen(this.createDocumentButton,"action",goog.bind(function(i){this.createAction.actionPerformed(goog.nullFunction)},this))),this.openAction&&(this.openDocumentButton=new goog.ui.CustomButton([o("div",{id:"dashboard-containers-tab-open-action-image"}),tr(msgs.FILE_OPEN_)]),this.openDocumentButton.render(this.actionsDiv),this.openDocumentButton.getElement().id="dashboard-containers-tab-open-action",goog.events.listen(this.openDocumentButton,"action",goog.bind(function(i){this.openAction.actionPerformed(goog.nullFunction)},this)))}t.appendChild(this.actionsDiv)};sr.prototype.getContainerName=function(){return this.name};sr.prototype.setCreateAction=function(t){this.createAction=t};sr.prototype.setOpenAction=function(t){this.openAction=t};var cv=sr;sync.ui.FilesContainerTab=sr;namespace("sync.view");var dv=class extends sync.react.Component{constructor(t){super(t)}componentDidMount(){this.props.doLogin&&this.props.doLogin(this.props.url,this.props.onLoginFinished)}shouldComponentUpdate(){return!1}render(){return sync.react.h("div",{className:"file-list-login-container"})}},pv=dv;sync.view.InlineLoginForm=dv;namespace("sync.view");var gv=class extends sync.react.Component{constructor(t){super(t);var o=t.fileServerConnector.getRootURL(),i=t.fileServerConnector.getCurrentBrowseURL(),n=i||o;this.state={rootUrl:o,browseUrl:n,currentSelectedUrl:null,fileName:null,errorMessage:null,loggedIn:null},this.rootURLStateChanged_=this.rootURLStateChanged_.bind(this),this.repositoryUrlChangedCallback_=this.repositoryUrlChangedCallback_.bind(this);var r=this.props.fileServerConnector.getFileServer();this.login_=r.login.bind(r),this.directoryLister_=new fs(r.listFiles?r.listFiles.bind(r):null),this.logout_=this.logout_.bind(this),this.hideMessage_=this.showErrorMessage_.bind(this,null),this.showErrorMessage_=this.showErrorMessage_.bind(this),this.currentUrlChanged_=this.currentUrlChanged_.bind(this),this.currentSelectedUrlChanged_=this.currentSelectedUrlChanged_.bind(this),this.openSelectedFile_=this.openSelectedFile_.bind(this),this.loginStatusChanged_=this.loginStatusChanged_.bind(this)}rootURLStateChanged_(t,o,i){this.props.fileServerConnector.setRootURL(t),this.props.fileServerConnector.setCurrentBrowseURL(o),this.setState({rootUrl:t,browseUrl:o,currentSelectedUrl:new E(i),errorMessage:null})}repositoryUrlChangedCallback_(t,o){var i=t?new E(t).getFolderUrl():null,n=o?new E(o).getFolderUrl():i;this.rootURLStateChanged_(i,n,o)}logout_(){if(!this.disconnectAction_){var t=goog.bind(function(i){this.rootURLStateChanged_(null,null,null),i()},this),o=goog.bind(function(i){var n=this.props.fileServerConnector.getFileServer();n.logout(goog.bind(t,this,i))},this);this.disconnectAction_=new jp(null,o)}this.disconnectAction_.actionPerformed()}loginStatusChanged_(t){this.setState({loggedIn:t})}componentWillUnmount(){this.mounted=!1,this.disconnectAction_&&(this.disconnectAction_.dispose(),this.disconnectAction_=null)}currentUrlChanged_(t){var o=this.props.fileServerConnector.getRootURL();if(this.state.rootUrl!==o)this.rootURLStateChanged_(o,this.props.fileServerConnector.getCurrentBrowseURL(),null);else{var i=null;t!==null&&(i=t.getFolderUrl()),this.rootURLStateChanged_(o,i,null)}}currentSelectedUrlChanged_(t){this.setState({currentSelectedUrl:t,errorMessage:null})}openSelectedFile_(){var t=new sync.api.Editor.LinkOpenedEvent(this.state.currentSelectedUrl.getUrl(),!1);workspace.openLink(t)}showErrorMessage_(t){this.setState({errorMessage:t})}componentDidMount(){this.mounted=!0,this.renderRootUrlInformation_()}renderRootUrlInformation_(){if(this.mounted&&this.rootURLInfoElement){var t=this.props.fileServerConnector.getFileServer().createRootUrlComponent(this.state.rootUrl,this.repositoryUrlChangedCallback_);t&&(goog.dom.removeChildren(this.rootURLInfoElement),goog.dom.appendChild(this.rootURLInfoElement,t))}}render(){var t=sync.react.genClasses(["filerepository-header",this.state.rootUrl&&"filerepository-header-has-root"]),o;return this.state.loggedIn===!0||this.state.loggedIn===null?o=sync.react.h(dd,{root:this.state.rootUrl,initialUrl:this.state.browseUrl,selectedUrl:this.state.currentSelectedUrl?this.state.currentSelectedUrl.getUrl():null,directoryLister:this.directoryLister_,currentUrlChanged:this.currentUrlChanged_,currentFileNameChanged:this.currentFileNameChanged_,currentSelectedUrlChanged:this.currentSelectedUrlChanged_,chooseFile:this.openSelectedFile_,purpose:sync.api.UrlChooser.Purpose.CHOOSE,includeNewAction:!0,onAuthenticationRequired:this.loginStatusChanged_.bind(this,!1)}):o=sync.react.h(pv,{url:this.state.browseUrl,doLogin:this.login_,onLoginFinished:this.loginStatusChanged_.bind(this,!0)}),sync.react.h("div",{className:"filerepository-container"},!this.state.rootUrl&&sync.react.h("div",{className:"file-server-login-container"}),sync.react.h("div",{className:t,ref:i=>this.headerElement=i},sync.react.h("div",{className:"filerepository-root-url-info",ref:i=>{this.rootURLInfoElement=i,this.renderRootUrlInformation_()}}),this.state.rootUrl&&(this.state.loggedIn||this.state.loggedIn===null)&&sync.react.h("button",{className:"filerepository-logout vertical-align-children file-browser-action",onClick:this.logout_,title:tr(msgs.DISCONNECT_),type:"button"},sync.react.h("div",{className:"ui-action-large-icon filerepository-logout-icon"}),sync.react.h("div",{className:"filerepository-logout-text"},tr(msgs.DISCONNECT_)))),this.state.rootUrl&&sync.react.h("div",{className:"filerepository-filebrowser-container"},sync.react.h("div",{className:"filerepository-filebrowser"},sync.react.h(Ho,{message:this.state.errorMessage,type:this.state.errorMessage?Ho.types.ERROR:null,hideMessage:this.hideMessage_}),o)))}},hv=gv;sync.view.FileServerComponent=gv;namespace("sync.view");var uv=class extends sync.react.Component{constructor(t){super(t);this.state={loading:!0,errorMessage:null},this.showErrorMessage_=this.showErrorMessage_.bind(this),this.hideErrorMessage_=this.showErrorMessage_.bind(this,null)}showErrorMessage_(t){this.setState({loading:!1,errorMessage:t})}componentDidMount(){this.props.fileServerConnector.init(goog.bind(function(){this.setState({loading:!1})},this),this.showErrorMessage_)}render(){return this.state.errorMessage?sync.react.h(Ho,{message:this.state.errorMessage,type:Ho.types.ERROR,hideMessage:this.hideErrorMessage_}):this.state.loading?sync.react.h(rd,null):sync.react.h(hv,{...this.props})}},mv=uv;sync.view.FileServerTabContent=uv;namespace("sync.ui");var aa=function(t){this.fileServerConnector_=t};goog.inherits(aa,Sl);aa.prototype.getTabHeaderDisplayName=function(){return this.fileServerConnector_.getDescriptor().name};aa.prototype.getTabHeaderImage=function(){return this.fileServerConnector_.getDescriptor().icon};aa.prototype.insertTabContent=function(t){var o=!this.fileServerDiv_;if(o&&(this.fileServerDiv_=goog.dom.createDom("div","dashboard-filerepository-div")),t.appendChild(this.fileServerDiv_),o){var i={fileServerConnector:this.fileServerConnector_};sync.react.render(sync.react.createElement(mv,i),this.fileServerDiv_)}};aa.prototype.getFileServerConnector=function(){return this.fileServerConnector_};var hh=aa;sync.ui.FileServerTab=aa;namespace("sync.actions");sync.actions.OpenAction=function(t){sync.actions.AbstractAction.call(this,""),this.urlChooser=t,this.largeIcon_=null,this.description_=tr(msgs.OPEN_DOCUMENT_),this.name=tr(msgs.FILE_OPEN_),this.actionId_=null};goog.inherits(sync.actions.OpenAction,sync.actions.AbstractAction);sync.actions.OpenAction.prototype.actionPerformed=function(t){this.urlChooser.chooseUrl(new sync.api.UrlChooser.Context(sync.api.UrlChooser.Type.GENERIC),goog.bind(this.openFile,this),sync.api.UrlChooser.Purpose.CHOOSE),t&&t()};sync.actions.OpenAction.prototype.getDisplayName=function(){return tr(msgs.FILE_OPEN_)};sync.actions.OpenAction.prototype.isEnabled=function(){};sync.actions.OpenAction.prototype.getLargeIcon=function(t){return this.largeIcon_};sync.actions.OpenAction.prototype.setLargeIcon=function(t){this.largeIcon_=t};sync.actions.OpenAction.prototype.getSmallIcon=function(t){return sync.util.image.getImageUrl("/images/New16.png",t)};sync.actions.OpenAction.prototype.getDescription=function(){return this.description_};sync.actions.OpenAction.prototype.setDescription=function(t){this.description_=t};sync.actions.OpenAction.prototype.setActionId=function(t){this.actionId_=t};sync.actions.OpenAction.prototype.getActionId=function(){return this.actionId_};sync.actions.OpenAction.prototype.setActionName=function(t){this.name=t};sync.actions.OpenAction.prototype.openFile=function(t){if(t){var o=new sync.api.Editor.LinkOpenedEvent(t,!1);workspace.openLink(o)}};sync.actions.OpenAction.prototype.renderLargeIcon=function(){var t=goog.dom.createDom;return t("div","dashboard-document-action",this.largeIcon_?sync.util.renderLargeIcon(this.largeIcon_):t("div","Open70"),this.name?t("div","dashboard-action-name",this.name):"")};namespace("sync.actions");var Tl=function(){this.actionsById=new goog.structs.Map,this.actionsById.set("Dashboard/Help",new $r),this.actionsById.set("Dashboard/ReportProblem",zo.getInstance()),this.actionsById.set("Dashboard/About",new pl),this.actionsStatusEventSource=new goog.events.EventTarget};goog.inherits(Tl,sync.api.ActionsManager);Tl.prototype.getActionById=function(t){return this.actionsById.get(t)};Tl.prototype.registerAction=function(t,o){this.actionsById.set(t,o)};Tl.prototype.getEventSource=function(){return null};var fv=Tl;sync.actions.DashboardActionsManager=Tl;namespace("sync.actions");var bl=function(t,o,i,n,r){this.actionId_=t,this.langCode_=o,this.displayName_=i,this.currentLanguageDiv_=n,this.trimLangCodeCallback_=r,sync.actions.AbstractAction.call(this,"")};goog.inherits(bl,sync.actions.AbstractAction);bl.prototype.actionPerformed=function(){this.currentLanguageDiv_.textContent=this.trimLangCodeCallback_(this.langCode_),k.getInstance().setOption(S.SELECTED_LANGUAGE,this.langCode_,!0),window.location.reload(!1)};bl.prototype.getDisplayName=function(){return this.displayName_};bl.prototype.getActionId=function(){return this.actionId_};var yv=bl;sync.actions.LanguageAction=bl;var cg=class{constructor(o,i){this.layoutManager_=o,this.authenticationManager_=i}installActions(){var o=goog.dom.createDom;this.actionsManager_=new fv;var i=this.layoutManager_.getHeaderBar();this.dashboardToolbarDiv_=o("div",["dashboard-menu","common-actions","vertical-align-children"]),this.dashboardToolbarDiv_.id="header-common-actions",goog.dom.appendChild(i,this.dashboardToolbarDiv_);var n=o("div","currentLanguage",this.trimLangCode_(sync.Translation.getLanguage())),r=this.getSupportedLanguagesActions_(n);if(this.dashboardToolbarDescriptor_=[],r){r.forEach(a=>{this.actionsManager_.registerAction(a.getActionId(),a)});var s=[];r.forEach(function(a){s.push({type:"action",id:a.getActionId()})}),this.dashboardToolbarDescriptor_.push({type:"list",name:"Language...",displayName:tr(msgs.LANGUAGE_),iconDom:o("div",["langMenu","vertical-align-children"],n,o("div",{style:"font-size: 8px;"},"\u25BC")),children:s})}this.moreMenuConfiguration_={type:"list",name:"More...",displayName:tr(msgs.MORE_ACTIONS_),iconDom:o("div","ui-icon-hamburger"),children:[{type:"action",id:"Dashboard/ReportProblem"},{type:"action",id:"Dashboard/Help"},{type:"action",id:"Dashboard/About"}]},this.dashboardToolbarDescriptor_.push(this.moreMenuConfiguration_),this.renderDashboardToolbar_()}renderDashboardToolbar_(){this.dashboardToolbar_&&this.dashboardToolbar_.dispose(),this.dashboardToolbarDiv_&&goog.dom.removeChildren(this.dashboardToolbarDiv_),this.dashboardToolbar_=new Be(this.actionsManager_),this.dashboardToolbar_.setDisplayShortcuts(!1),this.dashboardToolbar_.render([{type:"list",name:"Dashboard",displayName:tr(msgs.DASHBOARD_),children:this.dashboardToolbarDescriptor_}],this.dashboardToolbarDiv_)}installAdminLink(){goog.dom.appendChild(this.layoutManager_.getHeaderBar(),goog.dom.createDom("a",{className:"admin-page-link link-on-header",href:"admin.html",rel:"external",title:tr(msgs.GO_TO_ADMIN_PAGE_)},goog.dom.createDom("span","link-on-header__content",tr(msgs.ADMINISTRATION_PAGE_))))}installLogoutAction(){this.actionsManager_.registerAction("Dashboard/Logout",new Cl(this.authenticationManager_)),this.moreMenuConfiguration_.children.push({type:"sep"}),this.moreMenuConfiguration_.children.push({type:"action",id:"Dashboard/Logout"}),this.renderDashboardToolbar_()}trimLangCode_(o){return o.substr(0,2).toUpperCase()}getSupportedLanguagesActions_(o){var i=null,n=sync.Translation.supportedLanguages;return!sync.util.getURLParameter("lang")&&n&&n.length!==0&&n.forEach(goog.bind(function(r){i||(i=new goog.structs.Map);var s="Dashboard/"+r.code;i.set(s,new yv(s,r.code,r.description,o,this.trimLangCode_))},this)),i}};goog.require("goog.ui.TabBar");goog.require("goog.ui.Tab");goog.require("goog.structs.Map");namespace("sync");var Lo=function(t,o,i,n,r){this.wrapper=t,this.workspaceActionsManager_=o,this.fileServersManager_=i,this.layoutManager_=n,this.authenticationManager_=r,this.filesContainersTabs_=new goog.structs.Map,goog.dom.classlist.add(n.getLayoutContainer(),"dashboard"),n.getHeaderTitle().textContent=tr(msgs.DASHBOARD_)};Lo.prototype.selectTab_=function(t){var o=t.target;o instanceof goog.ui.Tab&&(goog.dom.removeChildren(this.selectedContainerContentElem_),o.dashboardTab.insertTabContent(this.selectedContainerContentElem_),k.getInstance().setOption(S.SELECTED_DASHBOARD_TAB,this.tabBar.indexOfChild(o)))};Lo.prototype.addTabs_=function(t,o){for(var i=goog.dom.createDom,n=0;n<t.length;n++){var r=t[n],s=r.getTabHeaderImage();s||(s=sync.util.computeHdpiIcon("images/no-sprite/DashboardFilesContainer.png"));var a=r.getTabHeaderDisplayName();if(a){var l=i("div","dashboard-document-action",s?sync.util.renderLargeIcon(s):i("div","Open70"),i("div","dashboard-action-name",a)),c=new goog.ui.Tab(l);c.dashboardTab=r,o.addChild(c,!0)}}};Lo.prototype.getFileServerTabToSelect_=function(t,o){var i=null;if(o){o.endsWith("/")||(o=o+"/");for(var n=t.getChildCount(),r=0;r<n;r++){var s=t.getChildAt(r);if(s&&s.dashboardTab&&s.dashboardTab instanceof hh){var a=s.dashboardTab.getFileServerConnector();if(o&&a.getDescriptor().matches(o)){a.setImposedFolderUrl(o),i=s;break}}}}return i};Lo.prototype.selectInitialTab_=function(t,o,i){var n=this.getFileServerTabToSelect_(t,o);if(o&&!n){var r=tr(msgs.COULD_NOT_OPEN_FOLDER_,[o]);setTimeout(function(){workspace.getNotificationManager().showError(r,!0)},0)}if(i&&!n&&(n=this.getTabByName_(i)),!n){var s=k.getInstance().getOption(S.SELECTED_DASHBOARD_TAB);s||(s=0),n=t.getChildAt(s),n||(n=t.getChildAt(0))}n&&n.setSelected(!0)};Lo.prototype.getTabByName_=function(t){for(var o=null,i=this.tabBar.getChildCount(),n=0;n<i;n++){var r=this.tabBar.getChildAt(n);if(r.getContent().textContent===t){o=r;break}}return o};Lo.prototype.load=function(t){this.createDashboardLayout(),this.createFileServersTabs_(),this.createOrUpdateFileContainers_(this.workspaceActionsManager_.getCreateActions(),!0),this.createOrUpdateFileContainers_(this.workspaceActionsManager_.getOpenActions(),!1);var o=new goog.ui.TabBar(goog.ui.TabBar.Location.TOP);o.setAutoSelectTabs(!1),this.tabBar=o;var i=this.filesContainersTabs_.getValues(),n=i.length;n===0?(this.selectedContainerContentElem_.style.display="none",this.filesContainersTabsElem_.style.display="none",this.wrapper.firstChild.appendChild(this.createAboutPageElement_())):(this.addTabs_(i,o),o.render(this.filesContainersTabsElem_)),goog.events.listen(o,goog.ui.Component.EventType.SELECT,goog.bind(this.selectTab_,this));var r=t.folderUrl;this.selectInitialTab_(o,r,t.selectedTabName),r&&sync.util.setUrlParameter("folderUrl");let s=new cg(this.layoutManager_,this.authenticationManager_);s.installActions(),sync.options.ServerOptions.getServerOption("show.admin.link")&&s.installAdminLink(),this.addLogoutActionIfUserAuthenticated_(s)};Lo.prototype.addLogoutActionIfUserAuthenticated_=function(t){sync.rest.callAsync("RESTApplicationAuthentication.getAuthenticatedUserInfo",{}).then(o=>{o&&t.installLogoutAction()})};Lo.prototype.createOrUpdateFileContainers_=function(t,o){for(var i=0;i<t.length;i++){var n=t[i],r=n.name,s=this.filesContainersTabs_.get(r);s||(s=new cv,this.filesContainersTabs_.set(r,s)),o?s.setCreateAction(n):s.setOpenAction(n)}};Lo.prototype.createFileServersTabs_=function(){var t=this.fileServersManager_.getFileServers();if(t)for(var o=0;o<t.length;o++){var i=t[o],n=new hh(i),r=i.getDescriptor().name;this.filesContainersTabs_.set(r,n)}};Lo.prototype.createDashboardLayout=function(){var t=goog.dom.createDom;this.filesContainersTabsElem_=t("div","dashboard-containers-tabs"),this.selectedContainerContentElem_=t("div","dashboard-containers-tab-content"),goog.dom.removeChildren(this.wrapper),this.wrapper.appendChild(t("div",{id:"dashboard-container"},this.filesContainersTabsElem_,this.selectedContainerContentElem_))};Lo.prototype.addFilesContainerTab=function(t){if(t instanceof Sl){var o=t.getTabHeaderDisplayName();o&&this.filesContainersTabs_.set(o,t)}};Lo.prototype.createAboutPageElement_=function(){var t=goog.dom.createDom;let o=t("div",{id:"about-page"});o.textContent=tr(msgs.LOADING_);let i=t("div",{className:"dashboard-about-section",id:"about-page-container"},o);return goog.dom.dataset.set(i,sync.Translation.captionAttr,tr(msgs.ABOUT_)),pl.retrieveAboutInfo().then(n=>{goog.dom.removeChildren(o),n?(goog.dom.append(o,sync.util.About.renderAboutInfo(n,!0)),goog.dom.removeNode(o.querySelector(".about-page-backup-error-message"))):goog.dom.append(o,goog.dom.createDom("div","",tr(msgs.COULD_NOT_LOAD_LICENSE_DETAILS_)))}),i};var _v=Lo;sync.Dashboard=Lo;namespace("sync.view");var Al=function(){this.element_=goog.dom.createDom("span","modified-indicator"),this.lastClassAdded_=null};Al.prototype.getElement=function(){return this.element_};Al.prototype.setDirty=function(t){t?this.setStatus("dirty"):this.updateStatusMarker_("autosave-status-clean","","")};Al.prototype.updateStatusMarker_=function(t,o,i){var n=this.element_;goog.dom.classlist.remove(n,this.lastClassAdded_),goog.dom.classlist.add(n,t),this.lastClassAdded_=t,n.textContent=o,n.title=i};Al.prototype.setStatus=function(t){switch(t){case"clean":this.updateStatusMarker_("autosave-status-clean"," - "+tr(msgs.SAVED_),tr(msgs.SAVED_LONG_DESC_));break;case"error":this.updateStatusMarker_("autosave-status-error"," - "+tr(msgs.SAVE_FAILED_),tr(msgs.SAVE_FAILED_LONG_DESC_));break;case"dirty":this.updateStatusMarker_("autosave-status-dirty","*","");break;case"saving":this.updateStatusMarker_("autosave-status-saving"," - "+tr(msgs.SAVING_)+"...",tr(msgs.SAVING_LONG_DESC_)+"...");break}};var vv=Al;sync.view.ModifiedIndicator=Al;goog.require("goog.ui.Prompt");goog.require("goog.ui.Dialog.Event");goog.require("goog.functions");namespace("sync.view");var Fo=function(t){this.urlChooser=null,this.problemReporter_=null,this.layoutManager_=t,this.modifiedIndicator_=new vv};Fo.prototype.getModifiedIndicator=function(){return this.modifiedIndicator_};Fo.prototype.getProblemReporter=function(){return this.problemReporter_};Fo.prototype.setUrlChooser=function(t){this.urlChooser=t};Fo.prototype.getUrlChooser=function(){return this.urlChooser};Fo.prototype.askUserAsPromise=function(t,o,i){return new goog.Promise(goog.bind(function(n,r){try{this.askUser(t,o,n,i)}catch(s){r(s)}},this))};Fo.prototype.askUser=function(t,o,i,n){var r=goog.dom.createDom,s=workspace.createDialog(),a=r("textarea","sync-prompt-input");a.value=n||"",s.getElement().appendChild(r("label","sync-prompt",[r("div","sync-prompt-label",o),a])),s.setTitle(t),s.setResizable(!0),s.setPreferredSize(415,300),s.setButtonConfiguration(sync.api.Dialog.ButtonConfiguration.OK_CANCEL);var l=goog.events.listen(a,goog.events.EventType.KEYUP,function(c){c.keyCode===goog.events.KeyCodes.ENTER&&c.ctrlKey&&(c.stopPropagation(),s.dispatchEvent(new goog.ui.Dialog.Event("ok","Ok")))});s.onSelect(function(c){var d;c==="ok"&&(d=a.value),s.dispose(),goog.events.unlistenByKey(l),i(d)}),s.show(),a.select()};Fo.prototype.init=function(){this.problemReporter_=new Nf(workspace.a11y);var t=goog.dom.createDom("span",["tag","tag-min","offscreen"],"\u25B7");this.getDialogContainer().appendChild(t)};Fo.prototype.getDialogContainer=function(){return this.layoutManager_.getDialogContainer()};Fo.prototype.createDialog=function(t,o,i){var n=this.getDialogContainer(),r=new Ef(n,t,o);return r.setFocusTargetProvider(goog.bind(this.getFocusAfterDialogCloses_,this,i)),r};Fo.prototype.getFocusAfterDialogCloses_=function(t,o){var i=t(),n=!o||!goog.dom.isInDocument(o)||!goog.style.isElementShown(o)||sync.model.XmlDom.isXmlNode(o)||this.layoutManager_.getLayoutContainer()===o||document.body===o||goog.dom.contains(this.layoutManager_.getNorthPane(),o);return i&&n?i.getEditingSupport():o};Fo.prototype.confirm=function(t,o){var i=goog.dom.createDom,n=workspace.createDialog();return n.getElement().appendChild(i("label","sync-prompt",i("span",null,o))),n.setTitle(t),n.setResizable(!0),n.setPreferredSize(415,220),n.setButtonConfiguration(sync.api.Dialog.ButtonConfiguration.OK_CANCEL),new goog.Promise(function(r){n.onSelect(function(s){n.dispose(),r(s==="ok")}),n.show()})};Fo.prototype.createInputDialog=function(t,o,i){var n=workspace.createDialog(i);n.setTitle(t);var r=goog.dom.createDom,s=r("input",{type:"text",name:"oxy-param-value",style:"width: 100%"});return sync.util.dom.setAttributes(s,{autofocus:"",autocorrect:"off",autocapitalize:"none"}),goog.dom.appendChild(n.getElement(),r("label","",tr(msgs.INPUT_)+" "+t+": ",s)),s.value="",n.show(),s.focus(),n.onSelect(function(a){a===goog.ui.Dialog.DefaultButtonKeys.OK?o(s.value):o(),n.dispose()}),n};var uh=Fo;sync.view.WidgetsBase=Fo;namespace("sync.view");var la=function(t){uh.call(this,t)};goog.inherits(la,uh);la.prototype.createInsertElementDropdown=function(){return new Gl};la.prototype.createSurroundWithDropdown=function(){return new Gl};la.prototype.createRenameDropdown=function(){return new Gl};la.prototype.createEnterDropdown=function(){return new Gl};var Ev=la;sync.view.Widgets=la;namespace("sync.view");var ei=function(t){var o=goog.dom.createDom;this.toolbar_=o("div","vertical-align-children"),this.toolbar_.id="builtin-toolbar",this.toolbarScroller_=o("div","toolbar-scroller",this.toolbar_),this.backButton_=o("button",["toolbar-back","scroll-button"]),this.backButton_.setAttribute("title",tr(msgs.SCROLL_TOOLBAR_LEFT_)),this.forwardButton_=o("button",["toolbar-forward","scroll-button"]),this.forwardButton_.setAttribute("title",tr(msgs.SCROLL_TOOLBAR_RIGHT_)),this.toolbarContainer_=o("div",["toolbar-container","forward-scroll-button-hidden","back-scroll-button-hidden"],this.backButton_,this.toolbarScroller_,this.forwardButton_),goog.dom.appendChild(t,this.toolbarContainer_);var i=goog.events.EventType;goog.events.listen(this.backButton_,i.CLICK,goog.bind(this.scrollBack_,this)),goog.events.listen(this.forwardButton_,i.CLICK,goog.bind(this.scrollForward_,this)),goog.events.listen(this.toolbarContainer_,i.MOUSEDOWN,goog.bind(function(a){var l=a.target;(l===toolbar||l===this.toolbarScroller_||l===this.toolbarContainer_)&&a.preventDefault()},this));var n=goog.bind(this.scheduleUpdateScrollButtons_,this);this.scrollDelay_=new goog.async.Delay(this.updateScrollButtons_,100,this),goog.events.listen(this.toolbarScroller_,i.SCROLL,n);var r=goog.dom.ViewportSizeMonitor.getInstanceForWindow(),s=new goog.dom.BufferedViewportSizeMonitor(r,500);goog.events.listen(s,i.RESIZE,n),this.scrollButtonsEnabled_=!1,this.stopAnimationDelay_=750,this.animationInProgress_=!1,this.highlightDiv_=null};ei.prototype.attach=function(t){goog.events.listen(t,ft.EventTypes.EDIT_MODE_CHANGED,goog.bind(this.scheduleUpdateScrollButtons_,this)),this.scheduleUpdateScrollButtons_()};ei.prototype.scheduleUpdateScrollButtons_=function(){this.scrollButtonsEnabled_&&this.scrollDelay_.start()};ei.prototype.updateScrollButtons_=function(){if(this.scrollButtonsEnabled_){var t=this.toolbar_.scrollWidth,o=this.toolbarScroller_.clientWidth,i=this.toolbarScroller_.scrollLeft,n=this.toolbarContainer_,r="back-scroll-button-hidden",s="forward-scroll-button-hidden",a=i>0;goog.dom.classlist.enable(n,r,!a);var l=t-i>o;goog.dom.classlist.enable(n,s,!l)}};ei.prototype.enableScrollButtons=function(){this.scrollButtonsEnabled_=!0,this.updateScrollButtons_()};ei.prototype.scrollBack_=function(){this.toolbarScroller_.scrollLeft-=200};ei.prototype.scrollForward_=function(){this.toolbarScroller_.scrollLeft+=200};ei.prototype.highlightToolbarAction=function(t){return Promise.resolve().then(()=>{var o=this.toolbarContainer_.querySelector('[name="'+t+'"]');return o.clientWidth!==0&&!this.animationInProgress_?(this.animationInProgress_=!0,this.scrollButtonIntoView_(o),this.highlightButtonWithAnAnimation_(o)):!0}).finally(()=>this.animationInProgress_=!1)};ei.prototype.getToolbar=function(){return this.toolbar_};ei.prototype.scrollButtonIntoView_=function(t){var o=t.clientWidth;o===0&&console.warn("Button is not on the current toolbar");var i=0,n=goog.style.getPageOffsetLeft(t);if(n<=this.backButton_.clientWidth)for(;n<=this.backButton_.clientWidth&&i<this.toolbar_.clientWidth;)this.scrollBack_(),i+=200,n=goog.style.getPageOffsetLeft(t);else if(n>=this.toolbarContainer_.clientWidth-this.forwardButton_.clientWidth)for(;n>=this.toolbarContainer_.clientWidth-this.forwardButton_.clientWidth-o&&i<this.toolbar_.clientWidth;)this.scrollForward_(),i+=200,n=goog.style.getPageOffsetLeft(t);n>=goog.style.getPageOffsetLeft(workspace.layoutManager.getEastPane())-o&&workspace.layoutManager.closeEastPane()};ei.prototype.createHighlightDiv_=function(t,o,i){this.highlightDiv_=goog.dom.createDom("div",{id:"boxHighlighted",className:"active",style:"left: "+t+"px;top: "+o+"px;height: "+i+"px;width: "+i+"px"}),goog.dom.appendChild(document.body,this.highlightDiv_)};ei.prototype.highlightButtonWithAnAnimation_=function(t){var o=200,i=t.clientWidth,n=t.clientHeight,r=goog.style.getPageOffset(t),s=Math.floor(r.x-o/2+i/2),a=Math.floor(r.y-o/2+n/2),l=this.highlightDiv_;return l?(goog.style.setStyle(l,{left:s+"px",top:a+"px"}),goog.dom.classlist.add(this.highlightDiv_,"active")):this.createHighlightDiv_(s,a,o),requestAnimationFrame(()=>goog.dom.classlist.add(this.highlightDiv_,"start")),sync.util.promise.delay(this.stopAnimationDelay_).then(()=>goog.dom.classlist.removeAll(this.highlightDiv_,["active","start"]))};var Cv=ei;sync.view.ToolbarController=ei;namespace("sync.api");sync.api.WorkspaceActionsManager=function(){};sync.api.WorkspaceActionsManager.prototype.registerCreateAction=function(t){};sync.api.WorkspaceActionsManager.prototype.registerOpenAction=function(t){};namespace("sync.actions");var ca=function(){this.createActions=[],this.openActions=[]};goog.inherits(ca,sync.api.WorkspaceActionsManager);ca.prototype.registerCreateAction=function(t){this.createActions.push(t)};ca.prototype.getCreateActions=function(){return this.createActions};ca.prototype.registerOpenAction=function(t){this.openActions.push(t)};ca.prototype.getOpenActions=function(){return this.openActions};var Sv=ca;sync.actions.WorkspaceActionsManager=ca;namespace("sync.api");sync.api.FileServersManager=function(){};sync.api.FileServersManager.prototype.registerFileServerConnector=function(t){};namespace("sync.fileserver");var Ti=function(t){this.fileServerDescriptor_=t,this.imposedFolderUrl_=null;var o=t.id;this.latestRootUrlKey_=o+".latestRootUrl",this.latestBrowseUrlKey_=o+".latestUrl";var i=t.fileServer;this.checkFileServerImplementation_(o,i),this.getDefaultRootUrl_=i.getDefaultRootUrl?goog.bind(i.getDefaultRootUrl,i):goog.nullFunction,i.setUserChangedCallback&&i.setUserChangedCallback(function(n){})};Ti.prototype.checkFileServerImplementation_=function(t,o){var i=["login","logout","createRootUrlComponent","getUrlInfo","getUserName"];for(var n of i)o[n]||console.error("Missing implementation for '"+n+"' function in '"+t+"' file server.")};Ti.prototype.getDescriptor=function(){return this.fileServerDescriptor_};Ti.prototype.getFileServer=function(){return this.fileServerDescriptor_.fileServer};Ti.prototype.setImposedFolderUrl=function(t){this.imposedFolderUrl_=t};Ti.prototype.init=function(t,o){if(this.imposedFolderUrl_)try{this.getFileServer().getUrlInfo(this.imposedFolderUrl_,goog.bind(function(i,n){this.setRootURL(i),this.setCurrentBrowseURL(n),t()},this),o)}catch(i){console.error(i),o(tr(msgs.COULD_NOT_OPEN_FOLDER_,[this.imposedFolderUrl_]))}else t()};Ti.prototype.getRootURL=function(){var t=null;try{t=localStorage.getItem(this.latestRootUrlKey_)}catch(o){console.warn(o)}return t||(t=this.getDefaultRootUrl_()),t};Ti.prototype.setRootURL=function(t){try{var o=this.getDefaultRootUrl_();o&&t===o||(t?localStorage.setItem(this.latestRootUrlKey_,t):localStorage.removeItem(this.latestRootUrlKey_))}catch(i){console.warn(i)}};Ti.prototype.getCurrentBrowseURL=function(){var t=null;try{if(t=localStorage.getItem(this.latestBrowseUrlKey_),t){var o=this.getRootURL();t.indexOf(o)!==0&&(t=null)}}catch(i){console.warn(i)}return t};Ti.prototype.setCurrentBrowseURL=function(t){try{t?localStorage.setItem(this.latestBrowseUrlKey_,t):localStorage.removeItem(this.latestBrowseUrlKey_)}catch(o){console.warn(o)}};Ti.prototype.callWithAuthHandling=function(t){return t().thenCatch(goog.bind(function(o){if(o instanceof sync.RESTException&&o.isUserActionRequired()){var i=this.getFileServer(),n=sync.util.promise.promisify(i.login,i);return n(o.getUserActionRequiredMessage().message).then(goog.bind(this.callWithAuthHandling,this,t))}throw o},this))};var Tv=Ti;sync.fileserver.FileServerConnector=Ti;namespace("sync");var Qc=function(){this.fileServersConnectors_=[]};goog.inherits(Qc,sync.api.FileServersManager);Qc.prototype.registerFileServerConnector=function(t){var o=new Tv(t);this.fileServersConnectors_.push(o)};Qc.prototype.getFileServers=function(){return this.fileServersConnectors_};var bv=Qc;sync.FileServersManager=Qc;namespace("sync.api");sync.api.EditingSupportManager=function(){};sync.api.EditingSupportManager.prototype.registerEditingSupportProvider=function(t){};namespace("sync.support");var dg=function(){};goog.inherits(dg,sync.api.EditingSupportManager);dg.prototype.registerEditingSupportProvider=function(t){sync.editors.EditingSupportFactory.registerEditingSupportProvider(t)};var Av=dg;sync.support.EditingSupportManager=dg;namespace("sync");var Iv={name:"Oxygen XML Web Author"},wv=Iv;sync.AppDesc=Iv;namespace("sync.actions");var mh=function(t){_.call(this,{keyStrokeStr:"M1 S",displayName:tr(msgs.SAVE_),description:tr(msgs.SAVE_)+" "+t,isEnabled:goog.functions.FALSE,largeIconClass:"Save24",smallIconClass:"Save24"})};goog.inherits(mh,_);var Dv=mh;sync.actions.DisabledSaveAction=mh;namespace("sync.actions");var fh=function(t,o){this.actionsManager_=t,this.preventLeave_=o};fh.prototype.suppress=function(t){var o=this.actionsManager_.getActionById("Author/Save");o&&this.actionsManager_.registerAction("Author/Save",new Dv(t)),this.preventLeave_.markAsCleanAutomatically()};var Nv=fh;sync.actions.SaveSuppressor=fh;namespace("sync.actions");var pg=function(){};pg.prototype.attach=function(t){t.listen(sync.api.Workspace.EventType.EDITOR_LOADED,this.onEditorLoaded_)};pg.prototype.onEditorLoaded_=function(t){var o=t.editor,i=o.getEditingSupport().getConcurrentEditingManager(),n=i&&i.getRoomType()===Tr.ROOM_TYPE&&!i.isCreator();if(n){var r=new Nv(o.getActionsManager(),o.getPreventLeave());r.suppress(tr(msgs.Share_session_save_disabled_cause_))}};var Mv=pg;sync.actions.GuestModeSetter=pg;goog.require("goog.Promise");namespace("sync.uncaughtErrorsCapture");(function(){var t=window._oxyerr_=[];function o(i){console.error(i);var n=10;t.length>=n&&t.shift();var r=i&&i.message;try{r=r||JSON.stringify(i)}catch{}t.push([new Date,"Msg: "+r,"URL: "+i.filename,"Line: "+i.lineno,"Col: "+i.colno,"Stack: "+(i.error&&i.error.stack)].join(`
`))}window.addEventListener("error",o),goog.Promise.setUnhandledRejectionHandler(o)})();var hae=sync.uncaughtErrorsCapture;namespace("sync.internal_api");var dE=function(t,o,i){this.content=o,this.diffType=t,this.leftUrl=i,this.rightUrl=null,this.baseUrl=null,this.leftEditorLabel=null,this.leftLabelTooltip=null,this.rightEditorLabel=null,this.sourceDocId=null,this.diffSourceDocId=null,this.runDiffOnChange="auto"};sync.internal_api.DiffParams=dE;namespace("sync.internal_api");var pE=class{constructor(t){}dispose(){}showDiffEditor(t,o){}getDiffEditorState(){}};sync.internal_api.DiffTool=pE;namespace("sync.internal_api");var gE={DIFF:"diff",MERGE:"merge"};sync.internal_api.DiffType=gE;namespace("sync.internal_api");var hE=class{constructor(t){}withLeftLabel(t,o){return this}withRightLabel(t){return this}withSubmitLabel(t){return this}compareWith(t,o){}canMerge(){return!1}mergeWith(t,o){}previewEdit(t,o){}};sync.internal_api.DiffApi=hE;namespace("sync.internal_api");var Aae=sync.internal_api;goog.require("goog.ui.tree.TreeNode");namespace("sync.ui");var Uo=function(t,o,i){var n=""+t.name;goog.ui.tree.TreeNode.call(this,n,o,i),this.setModel(t)};goog.inherits(Uo,goog.ui.tree.TreeNode);Uo.prototype.getPath=function(){var t=this.getParent(),o="";return t&&t.getPath&&(o=t.getPath()),o+"/"+(this.getModel().relativePath||this.getModel().name)};Uo.prototype.getIndexInParent=function(){for(var t=-1,o=this;o;)o=o.getPreviousSibling(),t++;return t};Uo.prototype.getPathForLocalization=function(){var t=this.getParent(),o=[];return t&&t.getPathForLocalization&&(o=t.getPathForLocalization()),o.push(this.getIndexInParent()),o};Uo.prototype.enterDocument=function(){if(Uo.superClass_.enterDocument.call(this),this.getModel().smallIcon){var t=this.getModel().smallIcon,o="url('"+sync.util.image.getImageUrl(t)+"')";goog.style.setStyle(this.getIconElement(),{backgroundImage:o,backgroundSize:"100%",backgroundPosition:"0% 0%"})}var i=this.getTree();if(i.getChildrenDraggable&&i.getChildrenDraggable()){var n=this.getElement().querySelector(".goog-tree-row .goog-tree-item-label")||this.getElement();n.setAttribute("draggable","true")}this.getModel().isFilteredOut&&this.getElement().classList.add("filtered-out")};Uo.prototype.setTreeInternal=function(t){Uo.superClass_.setTreeInternal.call(this,t),this.getModel().selected&&(this.select(),this.reveal(),delete this.getModel().selected)};Uo.prototype.onClick_=function(t){Uo.superClass_.onMouseDown.call(this,t)};Uo.prototype.onMouseDown=function(t){t.button===goog.events.BrowserEvent.MouseButton.MIDDLE&&t.type===goog.events.EventType.MOUSEDOWN&&Uo.superClass_.onMouseDown.call(this,t)};var xv=Uo;sync.ui.TreeNode=Uo;goog.require("goog.debug.DivConsole");goog.require("goog.debug.Trace");goog.require("goog.dom");goog.require("goog.math");goog.require("goog.style");goog.require("goog.ui.tree.TreeControl");goog.require("goog.dom.classlist");namespace("sync.ui");var ie=function(t,o,i){o=o||{};var n=o.treeRootName||"Root",r=typeof o.showRoot=="boolean"?o.showRoot:!0;this.prune=!!o.prune,this.workspaceOptions_=null,this.eventHandler_=new goog.events.EventHandler(this),window.workspace&&workspace.getWorkspaceOptions()&&(this.workspaceOptions_=workspace.getWorkspaceOptions(),this.eventHandler_.listen(this.workspaceOptions_.getEditingContextManager(),nd.EventTypes.SHOW_EXCLUDED_CONTENT_CHANGED,()=>{this.hideFilteredContent=this.getHideFilteredContent_(),this.dispatchEvent(ie.EventTypes.CHANGE_FILTERED_CONTENT)})),this.hideFilteredContent=this.getHideFilteredContent_();var s=o.draggableChildren;this.setChildrenDraggable(s);var a=goog.ui.tree.TreeControl.defaultConfig;goog.ui.tree.TreeControl.call(this,n,a),this.setShowRootNode(r),this.container_=t,this.makeTree_(i),this.setShowLines(!1),this.setShowExpandIcons(!0),this.eventHandler_.listen(this,goog.events.EventType.CHANGE,function(l){var c=l.target.getSelectedItem();if(c){var d=goog.style.getPageOffsetLeft(c.getLabelElement())-goog.style.getPageOffsetLeft(c.getExpandIconElement());sync.util.dom.scrollIntoViewWithMargin(c.getLabelElement(),t,new goog.math.Coordinate(d,0),this.config_.indentWidth)}}),this.eventHandler_.listen(t,goog.events.EventType.CLICK,function(){this.getTree().getElement().focus()},this),this.getHandler().listen(this.getElement(),goog.events.EventType.MOUSEUP,this.handleMouseUp_),this.dragStartListenerAdded_=!1,s&&this.toggleDragStartListener_(s)};goog.inherits(ie,goog.ui.tree.TreeControl);ie.prototype.getChildrenDraggable=function(){return this.childrenDraggable_};ie.prototype.setChildrenDraggable=function(t){this.childrenDraggable_=t};ie.prototype.toggleDragStartListener_=function(t){var o=this.getElement();t&&!this.dragStartListenerAdded_?(this.dragStartListenerAdded_=!0,this.eventHandler_.listen(o,goog.events.EventType.DRAGSTART,goog.bind(this.dispatchDragStartEvent,this))):(this.dragStartListenerAdded_=!1,this.eventHandler_.unlisten(o,goog.events.EventType.DRAGSTART))};ie.prototype.exitDocument=function(){this.eventHandler_.dispose(),ie.superClass_.exitDocument.call(this)};ie.prototype.makeTree_=function(t){for(var o=this.createTreeFromData_({type:"folder",children:t}),i=o.getChildren(),n=0;n<i.length;n++)this.add(i[n]);this.render(this.container_),sync.util.isMobile()?(this.setShowExpandIcons(!1),this.setShowLines(!1),this.setTouchFriendly_(!0)):this.setShowRootLines(!0)};ie.prototype.setTouchFriendly_=function(t){goog.dom.classlist.enable(this.container_,"sync-touch-friendly",t)};ie.prototype.getTouchFriendly=function(){return goog.dom.classlist.contains(this.container_,"sync-touch-friendly")};ie.prototype.createTreeFromData_=function(t){var o=t.children||[];this.hideFilteredContent===!0&&(o=goog.array.filter(o,s=>!s.isFilteredOut,this));var i=goog.array.map(o,this.createTreeFromData_,this);this.prune&&o.length===1&&o[0].type==="folder"&&(i=i[0].getChildren());for(var n=this.createNodeFromData(t),r=0;r<i.length;r++)n.add(i[r]);return n};ie.prototype.createNodeFromData=function(t){return new xv(t)};ie.prototype.addSubtree=function(t,o){if(!this.shouldExcludeNode_(o)){var i=this.createTreeFromData_(o);return t.add(i),i}};ie.prototype.shouldExcludeNode_=function(t){return this.hideFilteredContent===!0&&t.isFilteredOut};ie.EventTypes={CHANGE:goog.events.EventType.CHANGE,CHANGE_FILTERED_CONTENT:"changed_filtered_content",OPEN:"open",CHILD_DRAGSTART:"child_dragstart"};ie.prototype.handleMouseEvent_=function(t){if(sync.util.isMobile()&&t.type===goog.events.EventType.CLICK&&this.isFolderIconOrLabel_(t.target))ie.superClass_.handleMouseEvent_.call(this,t),this.dispatchOpenEvent(t,!1);else if(t.type===goog.events.EventType.DBLCLICK){if(!this.isFolderIconOrLabel_(t.target))return;this.dispatchOpenEvent(t,t.ctrlKey)&&ie.superClass_.handleMouseEvent_.call(this,t)}else if(t.button===goog.events.BrowserEvent.MouseButton.MIDDLE){if(!this.isFolderIconOrLabel_(t.target))return;t.type===goog.events.EventType.MOUSEDOWN&&(t.preventDefault(),ie.superClass_.handleMouseEvent_.call(this,t))}else t.type===goog.events.EventType.CLICK&&this.wasClickCanceled||ie.superClass_.handleMouseEvent_.call(this,t)};ie.prototype.handleMouseUp_=function(t){if(t.button===goog.events.BrowserEvent.MouseButton.MIDDLE){if(!this.isFolderIconOrLabel_(t.target))return;t.type===goog.events.EventType.MOUSEUP&&this.dispatchOpenEvent(t,!0)}};ie.prototype.handleKeyEvent=function(t){t.keyCode===goog.events.KeyCodes.ENTER?this.dispatchOpenEvent(t,t.ctrlKey)&&ie.superClass_.handleKeyEvent.call(this,t):(t.keyCode===goog.events.KeyCodes.ESC&&(this.wasClickCanceled=!0),ie.superClass_.handleKeyEvent.call(this,t))};ie.prototype.dispatchOpenEvent=function(t,o){var i=this.getSelectedItem(),n={type:ie.EventTypes.OPEN,node:i,newTab:o};return this.dispatchEvent(n)};ie.prototype.dispatchDragStartEvent=function(t){var o=this.getSelectedItem(),i={originalEvent:t,type:ie.EventTypes.CHILD_DRAGSTART,node:o};return this.dispatchEvent(i)};ie.prototype.isFolderIconOrLabel_=function(t){var o=goog.dom.classlist.contains(t,"goog-tree-expanded-folder-icon")||goog.dom.classlist.contains(t,"goog-tree-collapsed-folder-icon")||goog.dom.classlist.contains(t,"goog-tree-file-icon");return o||goog.dom.classlist.contains(t,"goog-tree-item-label")};ie.prototype.enterDocument=function(){ie.superClass_.enterDocument.call(this);var t=this.getElement();this.getHandler().listen(t,goog.events.EventType.MOUSEDOWN,goog.bind(function(){this.wasClickCanceled=!1},this))};ie.prototype.getHideFilteredContent_=function(){var t=this.workspaceOptions_&&this.workspaceOptions_.getOption("show.excluded.content");return t==="false"};sync.ui.TreeStructure=ie;namespace("sync.api");sync.api.CreateDocumentAction=function(t){sync.actions.AbstractAction.call(this,""),this.urlChooser=t,this.newFileHelper_=new ii,this.selectedTemplate_=null,this.dialog_=null,this.largeIcon_=null,this.description_=tr(msgs.CREATE_DOCUMENT_),this.actionId_=null,this.name=tr(msgs.NEW_)};goog.inherits(sync.api.CreateDocumentAction,sync.actions.AbstractAction);sync.api.CreateDocumentAction.prototype.actionPerformed=function(t){var o=this.dialog_;o||(o=this.createDialog(),o.setResizable(!0),o.setPreferredSize(965,645),this.dialog_=o),o.show(),o.onSelect(goog.bind(function(i,n){i==="ok"&&(this.selectedTemplate_?this.saveTemplate(this.selectedTemplate_):n.preventDefault())},this)),t&&t()};sync.api.CreateDocumentAction.prototype.saveTemplate=function(t){var o=t.location,i=o.substring(o.lastIndexOf("/")+1),n=t.type,r=sync.rest.getRestApiUrl("RESTAssetLoader.loadTemplate",{url:encodeURIComponent(o),type:n});this.urlChooser.saveFile(r,i,goog.bind(this.newFileHelper_.handleCreateFileResult,this))};sync.api.CreateDocumentAction.prototype.createDialog=function(){var t=workspace.createDialog();return t.setTitle(tr(msgs.CHOOSE_TEMPLATE_)),t.setButtonConfiguration(sync.api.Dialog.ButtonConfiguration.OK_CANCEL),this.newFileHelper_.renderTemplateChooser(t.getElement(),goog.bind(function(){t.hide(),this.saveTemplate(this.selectedTemplate_)},this),goog.bind(this.selectedTemplateChanged_,this)),t};sync.api.CreateDocumentAction.prototype.selectedTemplateChanged_=function(t){this.selectedTemplate_=t};sync.api.CreateDocumentAction.prototype.getDisplayName=function(){return tr(msgs.CREATE_)};sync.api.CreateDocumentAction.prototype.isEnabled=function(){};sync.api.CreateDocumentAction.prototype.getLargeIcon=function(){return this.largeIcon_};sync.api.CreateDocumentAction.prototype.setLargeIcon=function(t){this.largeIcon_=t};sync.api.CreateDocumentAction.prototype.getSmallIcon=function(t){return sync.util.image.getImageUrl("/images/New16.png",t)};sync.api.CreateDocumentAction.prototype.getDescription=function(){return this.description_};sync.api.CreateDocumentAction.prototype.setDescription=function(t){this.description_=t};sync.api.CreateDocumentAction.prototype.setActionId=function(t){this.actionId_=t};sync.api.CreateDocumentAction.prototype.getActionId=function(){return this.actionId_};sync.api.CreateDocumentAction.prototype.setActionName=function(t){this.name=t};sync.api.CreateDocumentAction.prototype.renderLargeIcon=function(){var t=goog.dom.createDom;return t("div","dashboard-document-action",this.largeIcon_?sync.util.renderLargeIcon(this.largeIcon_):t("div","New70"),this.name?t("div","dashboard-action-name",this.name):"")};sync.api.CreateDocumentAction.prototype.dispose=function(){this.dialog_&&this.dialog_.dispose()};namespace("sync.a11y.landmarks");var gg=sync.a11y.landmarks.Landmark=function(t){this.landmarkId_=t};gg.prototype.getElementId=function(){return this.landmarkId_};gg.prototype.focus=function(){};gg.prototype.canFocus=function(){return!0};var bi=gg;namespace("sync.a11y.landmarks");var Il=sync.a11y.landmarks.HeaderLandmark=function(t,o){bi.call(this,t),this.layoutManager_=o};goog.inherits(Il,bi);Il.prototype.getLogoEl_=function(){return document.querySelector("#header-logo")};Il.prototype.getToolbarEl_=function(){return document.querySelector('#builtin-toolbar *[tabindex="0"]')};Il.prototype.focus=function(){this.layoutManager_.hasAppBar()?this.getLogoEl_().focus():this.getToolbarEl_().focus()};Il.prototype.canFocus=function(){return this.layoutManager_.isNorthPaneShown()&&(this.getLogoEl_()||this.getToolbarEl_())};var Rv=Il;namespace("sync.a11y.landmarks");var yh=sync.a11y.landmarks.MainLandmark=function(t,o){bi.call(this,t),this.focusMain_=o};goog.inherits(yh,bi);yh.prototype.focus=function(){this.focusMain_()};var Ov=yh;namespace("sync.a11y.landmarks");var hg=sync.a11y.landmarks.EastLandmark=function(t,o){bi.call(this,t),this.layoutManager_=o};goog.inherits(hg,bi);hg.prototype.focus=function(){this.layoutManager_.openEastPane(),document.querySelector("#right-panel .navigation-rail__tab-bar").focus()};hg.prototype.canFocus=function(){return this.layoutManager_.isEastPaneShown()&&document.querySelector("#right-panel .navigation-rail__tab-bar")};var Pv=hg;namespace("sync.a11y.landmarks");var ug=sync.a11y.landmarks.WestLandmark=function(t,o){bi.call(this,t),this.layoutManager_=o};goog.inherits(ug,bi);ug.prototype.focus=function(){this.layoutManager_.openWestPane(),document.querySelector("#left-panel .navigation-rail__tab-bar").focus()};ug.prototype.canFocus=function(){return this.layoutManager_.isWestPaneShown()&&document.querySelector("#left-panel .navigation-rail__tab-bar")};var kv=ug;namespace("sync.a11y.landmarks");sync.a11y.landmarks.Landmarks=function(t){this.landmarks_=t,this.landmarkIds_=[],t.forEach(function(o,i){this.landmarkIds_.push(i)}.bind(this))};sync.a11y.landmarks.Landmarks.create=function(t,o){var i=new Map;return[new Rv("header",o),new Ov("editorContent",t),new Pv("right-panel",o),new kv("left-panel",o)].forEach(function(n){i.set(n.getElementId(),n)}),new sync.a11y.landmarks.Landmarks(i)};sync.a11y.landmarks.Landmarks.prototype.focusNextLandmark=function(t){var o=this.findParentLandmark_(t);if(o){var i=this.findNextFocusableLandmark_(o,!1);i&&i.focus()}};sync.a11y.landmarks.Landmarks.prototype.focusPrevLandmark=function(t){var o=this.findParentLandmark_(t);if(o){var i=this.findNextFocusableLandmark_(o,!0);i&&i.focus()}};sync.a11y.landmarks.Landmarks.prototype.findNextFocusableLandmark_=function(t,o){for(var i=goog.array.findIndex(this.landmarkIds_,function(a){return a===t.id}),n=null,r=i;n===null&&(r+=o?-1:1,r=(this.landmarkIds_.length+r)%this.landmarkIds_.length,r!==i);){var s=this.landmarkIds_[r];this.landmarks_.get(s).canFocus()&&(n=this.landmarks_.get(s))}return n};sync.a11y.landmarks.Landmarks.prototype.findParentLandmark_=function(t){return goog.dom.getAncestor(t,function(o){return goog.dom.isElement(o)&&this.landmarkIds_.indexOf(o.id)!==-1}.bind(this),!0)};sync.a11y.landmarks.Landmarks.prototype.initShortcuts=function(t){goog.events.listen(t,goog.events.EventType.KEYDOWN,function(o){o.keyCode===goog.events.KeyCodes.F6&&(goog.userAgent.MAC?o.metaKey:o.ctrlKey)&&(o.preventDefault(),o.getBrowserEvent().shiftKey?this.focusPrevLandmark(document.activeElement):this.focusNextLandmark(document.activeElement))}.bind(this))};var nle=sync.a11y.landmarks;namespace("sync.view");var mg=class{constructor(o){this.workspace_=o}install(){sync.util.getDocDomHelper().getWindow().imgerr=goog.bind(this.imageLoadingErrorHandler_,this),this.workspace_.listen(sync.api.Workspace.EventType.BEFORE_EDITOR_LOADED,o=>{this.currentEditor_=o.editor,this.hideImageBlockedByFirewallStripe_()})}imageLoadingErrorHandler_(o){o instanceof Array||(o=[o]);for(let r of o)sync.util.image.displayImagePlaceholder(r);var i=o[0]&&o[0].getAttribute("data-src");if(i){var n=this.buildXhrIoRequest_();n.listenOnce(goog.net.EventType.COMPLETE,function(){var r=n.getResponse(),s=401;if(n.getStatus()===s&&r){var a=JSON.parse(r);this.currentEditor_.dispatchEvent(new sync.api.Editor.WebappMessageReceived(a,sync.api.Editor.WebappMessageReceived.Context.IMAGE))}else n.getStatus()===403&&this.showImageBlockedByFirewallStripe_()}.bind(this)),n.send(i,"GET",null,sync.rest.CSRF_HEADER_MAP)}}buildXhrIoRequest_(){return new goog.net.XhrIo}showImageBlockedByFirewallStripe_(){this.imageBlockedByFirewallStripe_||(this.imageBlockedByFirewallStripe_=this.workspace_.createEditorStripe(sync.util.isMobile()?31:25),this.imageBlockedByFirewallStripe_.textContent=tr(msgs.IMAGES_BLOCKED_BY_FIREWALL_),this.imageBlockedByFirewallStripe_.title=tr(msgs.IMAGES_BLOCKED_BY_FIREWALL_),goog.dom.classlist.add(this.imageBlockedByFirewallStripe_,"flash-message-warn"))}hideImageBlockedByFirewallStripe_(){this.imageBlockedByFirewallStripe_&&(this.workspace_.removeEditorStripe(this.imageBlockedByFirewallStripe_),this.imageBlockedByFirewallStripe_=null)}};var wl=class extends sync.ui.TreeNode{constructor(o){super(o)}getUrl(){var o=this.getModel();return o.relativePath!=="map"&&!o.href?null:new sync.util.Url(o.href).getUrl()}};var _h=class extends EventTarget{constructor(){super();this.documentNode_=null}getDocumentNode(){return this.documentNode_}setDocumentNode(o){this.documentNode_=o,this.dispatchModelChangedEvent_()}updateNode(o){let i=o.id,n=this.findNodeLocation_(i);n.parentNode.children.splice(n.indexInParent,1,o),this.dispatchModelChangedEvent_()}deleteNode(o){let i=this.findNodeLocation_(o);i.parentNode.children.splice(i.indexInParent,1)}insertNodeAsFirstChild(o,i){this.findNodeLocation_(i).node.children.splice(0,0,o),this.dispatchModelChangedEvent_()}insertNodeAfter(o,i){let n=this.findNodeLocation_(i);n.parentNode.children.splice(n.indexInParent+1,0,o),this.dispatchModelChangedEvent_()}isDocumentOrRoot(o){return this.documentNode_.id===o||this.documentNode_.children[0]&&this.documentNode_.children[0].id===o}findNodeLocation_(o){o=parseInt(o);let i=[this.documentNode_];for(;i.length!==0;){let n=i.shift();for(let r=0;n.children&&r<n.children.length;r++){let s=n.children[r];if(s.id===o)return{node:s,parentNode:n,indexInParent:r};i.push(s)}}throw new Error("node not found in model "+o)}dispatchModelChangedEvent_(){this.dispatchEvent(new Event(_h.MODEL_CHANGED_EVENT_TYPE))}},da=_h;$c(da,"MODEL_CHANGED_EVENT_TYPE","dita-map-model-changed");var fg=class extends rn{constructor(o){super(o);this.model_=new da}getModel(){return this.model_}applyUpdate_(o){if(this.applySimplePatches_(Ne.of(o).patches),o.nodesIds&&o.fragments)for(let i of o.fragments)this.model_.updateNode(JSON.parse(i))}applySimplePatches_(o){if(!!o)for(var i=0;i<o.length;i++){var n=new vd(o[i]);if(n.type==="insert_node"){let r=JSON.parse(n.nodeHtml);n.pos.sentinelType===f.BEFORE?this.model_.insertNodeAsFirstChild(r,n.pos.nodeId):this.model_.insertNodeAfter(r,n.pos.nodeId)}else n.type==="delete_node"?this.model_.deleteNode(n.nodeId):n.type==="delete"||n.type==="insert"||n.type==="un-delete"||n.type==="add_marker"||n.type==="remove_marker"}}};var Dl=class{retrieveMap(o){let i,n;o.isProjectActive?(n="../rest/ditamap/presentation/byDitaProject",i={ditaProjectUrl:encodeURIComponent(o.ditaProjectUrl),ditaProjectContextId:encodeURIComponent(o.ditaProjectContextId)}):(n="../rest/ditamap/presentation",i={url:encodeURIComponent(o.ditamapUrl)},o.filterUrl&&(i.ditaval=encodeURIComponent(o.filterUrl)));let r=Object.keys(i).map(a=>encodeURIComponent(a)+"="+encodeURIComponent(i[a])).join("&");return fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"wafr"},body:r}).then(a=>a.json())}resolveTitles(o,i,n){let r;return o.isProjectActive?(r="../rest/ditamap/titles/byDitaProject?ditaProjectUrl="+encodeURIComponent(o.ditaProjectUrl),o.ditaProjectContextId&&(r=r+"&ditaProjectContextId="+encodeURIComponent(o.ditaProjectContextId))):(r="../rest/ditamap/titles?map="+encodeURIComponent(o.ditamapUrl),o.filterUrl&&(r=r+"&ditaval="+encodeURIComponent(o.filterUrl)+"&hideFilteredContent="+i)),fetch(r,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"wafr"},body:JSON.stringify(n)}).then(s=>s.json())}};var yg=class extends goog.Disposable{constructor(){super();this.stackResolveTitles=[],this.BATCH_SIZE=35}attach(o){if(goog.events.listen(o,goog.ui.tree.BaseNode.EventType.EXPAND,goog.bind(this.onExpand_,this)),!o.isSelected()){var i=[],n=[],r=o.getSelectedItem();i=i.concat(r.getParent().getChildren());for(var s=r;s.getParent();)s=s.getParent(),s instanceof wl&&(i.push(s),n=n.concat(s.getChildren()));this.enqueueResolveTitles_(i.concat(n))}}onExpand_(o){this.enqueueResolveTitles_(o.target.getChildren())}enqueueResolveTitles_(o){for(var i=[];o.length!==0;){var n=o.slice(0,this.BATCH_SIZE);i.push(n),o=o.slice(this.BATCH_SIZE)}i.reverse(),this.stackResolveTitles=this.stackResolveTitles.concat(i),this.pendingResolveTitles_||this.resolveTitles_(this.stackResolveTitles.pop())}resolveTitles_(o){if(!(!o||this.isDisposed())){for(var i=[],n=0;n<o.length;n++){var r=o[n];r.getUrl()&&!r.getModel().titleComputed&&i.push({url:r.getModel().href,path:r.getPathForLocalization()})}if(i.length!==0){this.pendingResolveTitles_=!0;var s=o[0].getTree().getDitaContext(),a=o[0].getTree().getHideFilteredContent();new Dl().resolveTitles(s,a,i).then(l=>this.onGetTitles_(o[0].tree,l)).catch(l=>{console.warn(l),this.isDisposed()||(this.pendingResolveTitles_=!1,this.resolveTitles_(this.stackResolveTitles.pop()))})}else this.resolveTitles_(this.stackResolveTitles.pop())}}onGetTitles_(o,i){if(!this.isDisposed()){this.pendingResolveTitles_=!1;for(var n=Object.keys(i),r=0;r<n.length;r++){var s=n[r],a=i[s];if(a!==null){var l=o.getNodeByPath(JSON.parse(s));this.updateTitle(l,a)}}this.resolveTitles_(this.stackResolveTitles.pop())}}updateTitle(o,i){o.getModel().titleComputed=!0,i!==void 0&&(o.setText(i),o.getModel().name=i)}};var _g=class extends sync.ui.TreeStructure{constructor(o,i,n,r){var s={treeRootName:"DITA Map",showRoot:!1,draggableChildren:!0};super(o,s,i);this.ditaContext_=sync.util.DitaContextUtil.clone(r),this.titlesPresenter_=new yg,this.titlesPresenter_.attach(this),this.registerDisposable(this.titlesPresenter_)}createNodeFromData(o){return new wl(o)}getNodeByPath(o){for(var i=this,n=0;n<o.length;n++){var r=o[n];if(!i){i=null;break}i=i.getChildAt(r)}return i}selectItemByUrl(o){var i=this.getEditorTreeEntry_(this,o);i&&(i.reveal(),i.select())}getEditorTreeEntry_(o,i){var n=o.getChildren(),r;for(r=0;r<n.length;r++){var s=n[r],a=s.getUrl();if(a===i)return s;var l=this.getEditorTreeEntry_(s,i);if(l)return l}}getDitaContext=function(){return this.ditaContext_};getHideFilteredContent=function(){return this.hideFilteredContent}};var vg=class extends Cu{constructor(){super()}getSelection(){return this.savedSelection_}setSelection=function(o,i){this.savedSelection_=o,this.dispatchEvent(sync.api.SelectionManager.EventType.SELECTION_CHANGED)};setNodeSelection=function(o){let i=new _o(o,f.BEFORE,0);var n=new _o(o,f.AFTER,0);this.setSelection(new sync.select.SavedSelection(i,n))}};var Eg=class extends Yr{constructor(o,i){super(i,"");this.editor_=i,this.docId_=o}save(){var o={id:this.docId_};return sync.rest.callAsync("RESTDocumentManager.save",o)}getSaveButton(){return document.querySelector('.goog-toolbar-button[name="DITA_Maps_Manager/Save"]')}getSavingProblemMessage(){return tr(msgs.DITA_MAP_DOCUMENT_COULD_NOT_BE_SAVED_)}getSavingErrorMessage(){return tr(msgs.ERROR_SAVING_DITA_MAP_DOCUMENT_)}};var Cg=class extends _{constructor(o,i,n){super({displayName:tr(msgs.REMOVE_REFERENCES_),smallIconClass:"Remove16"});this.controller_=i,this.selectionManager_=n,this.editor_=o}actionPerformed(o){var i=this.selectionManager_.getSelection(),n={id:this.controller_.docId,backspace:!1,count:1,wordLevel:!1,tagsDisplayMode:be.NO_TAGS};i.extend(n),sync.rest.callAsync("RESTDocumentControllers.documentController.removeText",n).then(r=>r.update).then(goog.bind(this.controller_.applyUpdate_,this.controller_)).then(()=>this.editor_.setDirty(!0)).thenCatch(()=>workspace.getNotificationManager().showError("Failed to remove references")).thenAlways(o||goog.nullFunction)}isEnabled(){var o=this.selectionManager_.getSelection();return o&&o.start&&!this.controller_.getModel().isDocumentOrRoot(o.start.nodeId)}};var as="DITA_Maps_Manager/Save",Sg=class extends pu{constructor(o){super({});this.editor_=o}createActions(o){let i=new _({displayName:"Insert Topicref",actionPerformed:s=>s()}),n=new sync.actions.InsertTopicRef(i,{getReadOnlyState:()=>this.editor_.getReadOnlyStatus().getReadOnlyState(),getActionsManager:()=>this.getActionsManager()});var r={};return r["insert.topicref"]=n,r[as]=new Eg(o,this.editor_),r["Author/InsertHardcodedTopicref"]=new _({displayName:"Insert Hardcoded Topicref",actionPerformed:s=>{this.actionsManager_.invokeOperation("ro.sync.ecss.extensions.commons.operations.InsertFragmentOperation",{fragment:"<topicref href='bogdan.test.dita'/>"},s),this.editor_.setDirty(!0)}}),r["DITA_Maps_Manager/RemoveReferences"]=new Cg(this.editor_,this.controller_,this.selectionManager_),r}getContextMenuBuiltinEntries(){return[{type:"action",id:"insert.topicref"},{type:"action",id:"Author/InsertHardcodedTopicref"},{type:"action",id:"DITA_Maps_Manager/RemoveReferences"}]}getController(){return this.controller_}getActionsManager(){return this.actionsManager_}getSelectionManager(){return this.selectionManager_}getHighlightsManager(){return null}getContent(o){}load(o,i,n){this.controller_=new fg(o.id),this.selectionManager_=new vg,this.actionsManager_=new en,new vl(this.controller_,this.actionsManager_).initReadOnlyHandling(this.editor_.getReadOnlyStatus(),o.isDocumentEditable,o.readOnlyReason);let r=new wp(this.controller_,this.selectionManager_);r.enableOperations(),this.actionsManager_.setOperationsInvoker(r);let s=this.createActions(o.id);for(let a of Object.keys(s)){let l=s[a];this.actionsManager_.registerAction(a,l)}this.controller_.getModel().setDocumentNode(JSON.parse(o.document))}getType(){return null}focus(){}getResourceDragHandler(){return null}getSpellChecker(){return null}getApplicationToolbar(){return null}getFirstToolbar(){return null}getOtherToolbars(o){o(null)}disposeInternal(){sync.api.EditingSupport.superClass_.disposeInternal.call(this)}getUrl(){return this.options.url}scrollToAnchor(o){return!1}getConcurrentEditingManager(){return null}};var Tg=class extends Th{constructor(){super();this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_),this.ditaMapEditingSupport_=new Sg(this),this.readOnlyStatus_=new ue,this.preventLeave_=new Jr(workspace.state),this.preventLeave_.setEnabled(!0),this.eventHandler_.listen(this.preventLeave_,Jr.EventTypes.DIRTY_STATUS_CHANGED,function(o){this.dispatchEvent(new sync.api.Editor.DirtyStatusChangedEvent(o.isDirty))}.bind(this))}load(o){let i=new El,n=new Rc({url:o},workspace.getEditingContextManager());return i.loadMap(n,i.generateDisposeId()).then(r=>{let s=null,a=null;this.ditaMapEditingSupport_.load(r,s,a)})}setDirty(o){this.isDirty()!==o&&this.preventLeave_.setDirty(o)}isDirty(){return this.preventLeave_.isDirty()}getEditingSupport(){return this.ditaMapEditingSupport_}getReadOnlyStatus(){return this.readOnlyStatus_}setReadOnlyState(o){this.readOnlyStatus_.setReadOnlyState(o)}};var bg=class extends goog.Disposable{constructor(){super();this.eventHandler_=new goog.events.EventHandler,this.registerDisposable(this.eventHandler_),this.contextManager_=workspace.getEditingContextManager(),this.currentContext_=null,this.ditaMapEditor_=new Tg;var o=this.contextManager_;goog.events.listen(o,sync.api.EditingContextManager.EventTypes.CONTEXT_CHANGED,goog.bind(function(n){this.refreshContextInView_(o.getDitaContext())},this));let i=workspace.getEditingContextManager().getDitaContext();this.refreshContextInView_(i),this.ditaMapEditor_.listen(sync.api.Editor.EventTypes.DIRTY_STATUS_CHANGED,function(n){this.getDitaMapViewActionsManager_().refreshActionsStatus(as)}.bind(this))}install(o){this.container=o,o.classList.add("dita-map-view-container");var i=goog.dom.createDom;this.mapNameRendering=i("div","dita-map-view__map-name"),this.chooseMapButtonContainer_=i("div"),this.chooseFilterButtonContainer_=i("div"),this.mapViewHeader=i("div","dita-map-view-header"),o.appendChild(this.mapViewHeader),this.updateViewHeader_(this.currentContext_?.isProjectActive),this.treeContainer=i("div","dita-map-view-tree"),o.appendChild(this.treeContainer),this.opened_=!1}updateViewHeader_(o){if(!this.mapViewHeader)return;let i=goog.dom.createDom;if(goog.dom.removeChildren(this.mapViewHeader),o)this.chooseContextCombo_||(this.contextCombo_=new Xa(this.container),this.chooseContextCombo_=this.contextCombo_.getInputElement(),goog.events.listen(this.contextCombo_.getEditableCombo(),goog.ui.Component.EventType.ACTION,n=>{let r=n.item.getModel();this.setContextIdAndRenderView_(r)})),this.mapViewHeader.appendChild(this.chooseContextCombo_);else{let n=i("div","dita-map-choose-map",this.mapNameRendering,this.chooseMapButtonContainer_),r=i("div","dita-map-choose-filter",this.chooseFilterButtonContainer_);this.mapViewHeader.appendChild(n),this.mapViewHeader.appendChild(r)}}show(){this.opened_||(this.opened_=!0,this.renderView_())}setEditor(o){var i=!0;!this.chooseMapButton_&&i&&(this.chooseMapButton_=this.createChooseMapButton_(),this.chooseMapButton_&&(this.chooseMapButtonContainer_.appendChild(this.chooseMapButton_),this.updateMapNameRendering_())),!this.chooseFilterButton_&&i&&(this.chooseFilterButton_=this.createChooseFilterButton_(),this.chooseFilterButton_&&(this.chooseFilterButtonContainer_.appendChild(this.chooseFilterButton_),this.updateFilterTooltipRendering_())),this.editor=o,this.selectCurrentFile_()}applyDialogChanges(o,i){let n=!0;wg.areDitaContextsEqual(this.currentContext_,o)&&(n=!1);let r=workspace.getWorkspaceOptions().getOption("show.excluded.content");r=r!=="false";let s=r!==i;if(!(!n&&!s)){var a=this.editor.getEditingSupport();if(a){var l=a.getActionsExecutor();l.executeDocumentTransaction(async()=>{n&&await this.setDitaContext_(o),(s||n)&&await this.setHideFilteredContent_(!i)})}else this.setDitaContext_(o),this.setHideFilteredContent_(!i)}}setHideFilteredContent_(o){return workspace.getWorkspaceOptions().setOption("show.excluded.content",o?"false":"true"),new Promise(i=>{this.editor.getActionsManager().invokeOperation("ro.sync.servlet.operation.SetHideFilteredContentOperation",{"hide.filtered.content":o},()=>{this.contextManager_.updateHiddenContentState(),i()})})}createChooseMapButton_(){return this.mapPicker_=new Gs("Open16_dark"),this.mapPicker_.setButtonTitle(tr(msgs.SET_DITA_MAP_)),this.mapPicker_.setFileSelectionListener(this.setMapAndRenderView_.bind(this)),this.mapPicker_.addButtonElementClass("dita-map-view-choose-map"),this.mapPicker_.setInitialUrl(this.currentContext_?.ditamapUrl),this.mapPicker_.getButtonElement()}createChooseFilterButton_(){return this.filterPicker_=new Gs("FilterToolbar16"),this.filterPicker_.setIconImageURL("/images/ProfilingToolbar16.png"),this.filterPicker_.setFileSelectionListener(this.setFilterAndRenderView_.bind(this)),this.filterPicker_.addButtonElementClass("dita-map-view-choose-filter"),this.filterPicker_.setInitialUrl(this.currentContext_?.filterUrl),this.filterPicker_.getButtonElement()}setMapAndRenderView_(o){if(!o)return;let i=sync.util.DitaContextUtil.clone(this.currentContext_);i.ditamapUrl=o,i.guessed=!1,this.setContextInEditor_(i)}setFilterAndRenderView_(o){if(!o)return;let i=sync.util.DitaContextUtil.clone(this.currentContext_);i.filterUrl=o,delete i.guessed,this.setContextInEditor_(i)}setContextIdAndRenderView_(o){let i=sync.util.DitaContextUtil.clone(this.currentContext_);delete i.guessed,i.ditaProjectContextId=o,this.setContextInEditor_(i)}setContextInEditor_(o){if(!wg.areDitaContextsEqual(this.currentContext_,o)){var i=this.editor?.getEditingSupport();if(i){var n=i.getActionsExecutor();n.executeDocumentTransaction(()=>{let r=this.setDitaContext_(o);return sync.util.promise.nativePromise(r)})}else this.setDitaContext_(o)}}setDitaContext_(o){let i=this.editor?this.editor.isDirty():!1,n=this.showSpinner_(),r=this.invokeSetCurrentDitaContextOperation(o),s=null;return r?s=r.then(goog.bind(function(a){n.hide(),a==="FAIL"?o.ditamapUrl&&this.renderError_():this.contextManager_.updateDitaContext(o)},this)).thenCatch(goog.bind(function(){n.hide(),this.renderError_()},this)).thenAlways(goog.bind(function(){this.editor&&this.editor.setDirty(i)},this)):s=this.renderContextInSideview(o),s.thenAlways(()=>{this.currentContext_!==o&&this.contextManager_.updateDitaContext(o)})}renderContextInSideview(o){return o.isProjectActive&&!o.ditaProjectContextId?(this.renderNoContextSelected_(),Promise.resolve()):this.retrieveMap_(o).then(goog.bind(function(i){i.root&&this.renderMapTree_(i.root),this.contextManager_.updateDitaContext(o)},this)).thenCatch(this.renderError_.bind(this))}invokeSetCurrentDitaContextOperation(o){let i,n;return o.isProjectActive?(i={ditaProjectUrl:o.ditaProjectUrl,ditaProjectContextId:o.ditaProjectContextId,render:!0},n="ro.sync.servlet.operation.SetDitaProjectContextOperation"):(i={ditamap:o.ditamapUrl,ditaval:o.filterUrl,render:!0},n="ro.sync.servlet.operation.SetDitaMapOperation"),this.editor?.getActionsManager().invokeOperation(n,i)}refreshContextInView_(o){(this.currentContext_===null||!sync.util.DitaContextUtil.areDitaContextsEqual(this.currentContext_,o))&&(o.isProjectActive!==this.currentContext_?.isProjectActive&&this.updateViewHeader_(o.isProjectActive),this.currentContext_=o,this.opened_&&this.renderView_())}updateMapNameRendering_(){let i=this.currentContext_&&this.currentContext_.ditamapUrl?new sync.util.Url(this.currentContext_.ditamapUrl).getFileName():tr(msgs.CHOOSE_DITA_MAP_);this.mapNameRendering.textContent=i,this.mapPicker_?.setButtonTitle(i),this.mapPicker_?.setInitialUrl(this.currentContext_.ditamapUrl)}updateFilterTooltipRendering_(){let i=this.currentContext_&&this.currentContext_.filterUrl?new sync.util.Url(this.currentContext_.filterUrl).getFileName():tr(msgs.NO_FILTER_SELECTED_);this.filterPicker_?.setButtonTitle(i),this.filterPicker_?.setInitialUrl(this.currentContext_.filterUrl)}renderView_(){this.currentContext_.isProjectActive?this.contextCombo_.update(this.currentContext_.ditaProjectUrl,this.currentContext_.ditaProjectContextId):(this.updateMapNameRendering_(),this.updateFilterTooltipRendering_()),this.retrieveMapAndRenderTree_()}retrieveMapAndRenderTree_(){if(!this.currentContext_){goog.dom.removeChildren(this.treeContainer);return}if(new URLSearchParams(window.location.search).has("supportsEditableDitaMap")&&this.currentContext_.ditamapUrl){let i=this.ditaMapEditor_.getEditingSupport();this.ditaMapEditor_.load(this.currentContext_.ditamapUrl).then(()=>{let n=i.getController().getModel();this.renderEditableDitaMapTree_(n,i),n.addEventListener(da.MODEL_CHANGED_EVENT_TYPE,()=>this.renderEditableDitaMapTree_(n,i))}).thenCatch(n=>console.error(n))}else this.renderContextInSideview(this.currentContext_)}isEditableDitaMapSupport(){return new URLSearchParams(window.location.search).has("supportsEditableDitaMap")}renderEditableDitaMapTree_(o,i){let n=this.renderMapTree_(o.getDocumentNode().children[0]);this.eventHandler_.listen(this.treeContainer,[goog.events.EventType.CLICK,goog.events.EventType.CONTEXTMENU,goog.events.EventType.DBLCLICK],a=>{let l=n.getNodeFromEvent_(a);i.getSelectionManager().setNodeSelection(l.model_.id)},!0);let r=i.getActionsManager(),s=new sync.view.PopupMenu(r);this.registerDisposable(s),s.attach(n.getElement()),i.getContextMenuBuiltinEntries().forEach(a=>{a.type==="action"&&s.addAction(a.id)})}showSpinner_(){goog.dom.removeChildren(this.treeContainer);var o=new sync.view.Spinner(this.treeContainer,1);return o.show(),o}retrieveMap_(o){var i=this.showSpinner_();try{return sync.util.promise.googPromise(new Dl().retrieveMap(o)).thenAlways(function(){i.hide()})}catch(n){return i.hide(),new goog.Promise.reject(n)}}renderMapTree_(o){this.foundCurrentDocumentInMap=!1;var i=this.treeContainer;goog.dom.removeChildren(i);var n=[this.generateNodeConfig_(o)],r=this.contextManager_.getDitaContext();this.tree&&this.tree.dispose();var s=new _g(i,n,this.currentContext_.ditamapUrl,r);return s.setChildrenDraggable(!0),s.listen(sync.ui.TreeStructure.EventTypes.CHANGE_FILTERED_CONTENT,()=>{this.renderMapTree_(o)}),this.tree=s,this.selectCurrentFile_(),s.isSelected()&&s.getChildAt(0).expand(),goog.style.scrollIntoContainerView(s.getSelectedItem().getElement(),i),goog.events.listen(s,sync.ui.TreeStructure.EventTypes.OPEN,goog.bind(function(a){a.node instanceof sync.ui.TreeNode&&(a.preventDefault(),this.openNode_(a.node,a.newTab))},this)),goog.events.listen(s,sync.ui.TreeStructure.EventTypes.CHILD_DRAGSTART,goog.bind(function(a){if(a.node instanceof sync.ui.TreeNode&&a.node.getUrl()){a.preventDefault();var l=this.editor.getEditingSupport(),c=l.getResourceDragHandler&&l.getResourceDragHandler();if(c){var d=a.originalEvent,g=d.getBrowserEvent().dataTransfer;c.addCustomData(g,{url:a.node.getUrl()})}}},this)),s}openNode_(o,i){var n=o.getUrl();!n||(!i&&this.editor&&this.editor.isDirty()&&!this.editor.isAutoSaveEnabled()?this.showDirtyDialog_(n):this.openUrl_(n,i))}showDirtyDialog_(o){if(!this.dirtyDialog){this.dirtyDialog=workspace.createDialog(),this.registerDisposable(this.dirtyDialog),this.dirtyDialog.setButtonConfiguration([{key:"new-tab",caption:tr(msgs.OPEN_IN_NEW_TAB)},{key:"cancel",caption:tr(msgs.CANCEL_)}]),this.dirtyDialog.setTitle(tr(msgs.UNSAVED_CHANGES));var i=this.dirtyDialog.getElement();i.classList.add("map-view-dirty-dialog"),i.appendChild(goog.dom.createTextNode(tr(msgs.FILE_HAS_UNSAVED_CHANGES)))}this.dirtyDialog.onSelect(goog.bind(function(n){n==="new-tab"&&this.openUrl_(o,!0)},this)),this.dirtyDialog.show()}openUrl_(o,i){var n=i?sync.api.Editor.LinkOpenedEvent.Target.BLANK:sync.api.Editor.LinkOpenedEvent.Target.SELF,r=new sync.api.Editor.LinkOpenedEvent(o,!1,null,n);workspace.openLink(r)}generateNodeConfig_(o){var i={};i.id=o.id,i.name=o.title,i.href=o.href,i.titleComputed=o.titleComputed;var n=o.nodeType;return i.relativePath=n,i.isFilteredOut=o.isFilteredOut,n==="MAP"||n==="MAPREF"?i.smallIcon="/images/DitaMapRoot16.png":n==="KEYDEF"?i.smallIcon="/images/DitaKeydefWithKeyword16.png":i.smallIcon="@6%2Fdita%2Fditamap.framework%2FDITA%20Map/img/Topic16.png",!this.foundCurrentDocumentInMap&&this.editor&&this.editor.getUrl()===o.href&&(i.selected=!0,this.foundCurrentDocumentInMap=!0),o.children&&(i.type="folder",i.children=o.children.map(this.generateNodeConfig_,this)),i}renderMessage_(o,i){let n=this.treeContainer;goog.dom.removeChildren(n);let r=goog.dom.createDom;if(i){let s=i.substring(i.lastIndexOf("/")+1),a="oxygen.html?url="+encodeURIComponent(i),l=r("div",null,r("a",{href:a,target:"_blank"},s));goog.events.listen(l,goog.events.EventType.CLICK,goog.bind(function(c){c.preventDefault(),this.openUrl_(i,!0)},this)),n.appendChild(r("div","dita-map-error-view",tr(o),l))}else n.appendChild(r("div","dita-map-error-view",tr(o)))}renderError_(o){o&&console.warn(o);let i;this.currentContext_.isProjectActive?i=this.currentContext_.ditaProjectUrl:i=this.currentContext_.ditamapUrl,this.renderMessage_(tr(msgs.DITA_MAP_LOAD_FAILED),i)}renderNoContextSelected_(){let o=this.currentContext_.ditaProjectUrl;this.renderMessage_(tr(msgs.NO_CONTEXT_SELECTED_),o)}selectCurrentFile_(){var o=new sync.util.Url(this.editor.getUrl());if(o.setFragment(""),this.tree){var i=this.tree.getSelectedItem(),n=i instanceof sync.ui.TreeNode;(!n||i.getUrl()!==o.getUrl())&&this.tree.selectItemByUrl(o.getUrl())}}getToolbarDescriptorActionsList(){var o=[];return this.isEditableDitaMapSupport()&&o.push({type:"action",id:as}),o}getToolbarActionsMap(){var o={};if(this.isEditableDitaMapSupport()){var i=new _({displayName:tr(msgs.SAVE_),description:tr(msgs.SAVE_),actionPerformed:n=>{var r=this.ditaMapEditor_.getEditingSupport().getActionsManager().getActionById(as);r.actionPerformed(n)},isEnabled:()=>this.ditaMapEditor_.getEditingSupport()&&this.ditaMapEditor_.getEditingSupport().getActionsManager()&&this.ditaMapEditor_.getEditingSupport().getActionsManager().getActionById(as)&&this.ditaMapEditor_.getEditingSupport().getActionsManager().getActionById(as).isEnabled(),smallIconPath:"/images/Save16.png",largeIconPath:"/images/Save24.png"});o[as]=i}return o}getDitaMapViewActionsManager_(){var o=workspace.getViewManager();return o.getActionsManager("dita-map-view")}setContextUpdateEnabled(o){this.setChooseMapButtonEnabled_(o),this.setChooseFilterButtonEnabled_(o),this.setDisableChooseContextComboEnabled_(o)}setChooseMapButtonEnabled_(o){this.chooseMapButton_&&(o?(this.chooseMapButton_.removeAttribute("disabled"),this.chooseMapButton_.removeAttribute("title")):(this.chooseMapButton_.setAttribute("disabled","disabled"),this.chooseMapButton_.setAttribute("title",tr(msgs.CHANGE_ROOT_MAP_DISABLED_))))}setChooseFilterButtonEnabled_(o){this.chooseFilterButton_&&(o?(this.chooseFilterButton_.removeAttribute("disabled"),this.chooseFilterButton_.removeAttribute("title")):(this.chooseFilterButton_.setAttribute("disabled","disabled"),this.chooseFilterButton_.setAttribute("title",tr(msgs.CHANGE_FILTER_DISABLED_))))}setDisableChooseContextComboEnabled_(o){this.contextCombo_&&this.contextCombo_.setEnabled(o)}};namespace("sync.api.dita");var vh=class extends sync.view.ViewRenderer{constructor(){super();this.ditaMapView_=new bg,this.configureContext_=new qs(this.applyDialogChanges_.bind(this))}getTitle(){return tr(msgs.DITA_Map)}getIcon(o){return sync.ext.Registry.extensionURL+sync.util.computeHdpiIcon("img/DITAMap24.png")}supportsEditor(){return!0}install(o){this.ditaMapView_.install(o)}opened(){this.ditaMapView_.show()}getToolbarDescriptor(){var o=this.ditaMapView_.getToolbarDescriptorActionsList();return o.push({type:"action",id:"Dita/ConfigureContext"}),{type:"list",children:o}}getToolbarActionsMap(){var o=this.ditaMapView_.getToolbarActionsMap();return o["Dita/ConfigureContext"]=this.configureContext_,o}editorChanged(o){this.ditaMapView_.setEditor(o),this.checkDisableConfigureContextAction_(o)}checkDisableConfigureContextAction_(o){var i=!0;let n=new URLSearchParams(window.location.search).has("editReferencesInPlace");var r=o.getEditingSupport();if(r){var s=r.getConcurrentEditingManager();s&&(s.isInRoom()?i=!1:s.listen(sync.api.ConcurrentEditingManager.EventType.CONCURRENT_EDITING_STARTED,this.setContextUpdateEnabled_.bind(this,!1)))}this.setContextUpdateEnabled_(i)}setContextUpdateEnabled_(o){this.configureContext_.setContextUpdateEnabled(o),this.ditaMapView_.setContextUpdateEnabled(o)}getDitaMapViewActionsManager_(){var o=workspace.getViewManager();return o.getActionsManager("dita-map-view")}applyDialogChanges_(o,i){this.ditaMapView_.applyDialogChanges(o,i)}};sync.api.dita.DitaMapView=vh;var Ag=class{constructor(o){this.workspaceState_=o;try{this.broadcastChannel_=new BroadcastChannel("channel"),this.broadcastChannel_.onmessage=this.processMessageEvent_.bind(this)}catch(i){console.warn(i)}}logout(){return sync.rest.callAsyncNative("RESTApplicationAuthentication.logout",{}).then(()=>{this.broadcastChannel_.postMessage(Ag.LOGGED_OUT),this.workspaceState_.hardReload()})}processMessageEvent_(o){o.data===Ag.LOGGED_OUT?this.workspaceState_.hardReload():console.warn(o)}},Jc=Ag;$c(Jc,"LOGGED_OUT","logout");goog.require("goog.events.EventTarget");goog.require("goog.events.KeyCodes");goog.require("goog.net.XhrIo");goog.require("goog.dom");goog.require("goog.structs.Map");goog.require("goog.log");namespace("sync");window.revManifestWebAuthor={};var P=function(){goog.events.EventTarget.call(this),this.dashboardAdditionalTabs_=[];var t=goog.dom.getElement;this.container=t("review"),this.workspaceOptions=new hs,this.isOnDashboard_=!this.workspaceOptions.getFirstEditorOptions().url,this.layoutManager=new Ge(this.container,t("editor-stripes"),!this.isOnDashboard_),this.landmarks_=sync.a11y.landmarks.Landmarks.create(this.focusEditor_.bind(this),this.layoutManager),this.serviceLoaderResolver_=sync.util.promise.createResolver(),this.serviceLoader=new Ch(this.serviceLoaderResolver_.promise),this.state=new ws,this.errorHandler=new Bd(this.state),this.workspaceActionsManager_=new Sv,this.fileServersManager_=new bv;var o=new Mv;o.attach(this),this.editingSupportManager_=new Av,this.docContainer=null,this.toolbarController=null,this.currentEditor=null,this.widgets=new Ev(this.layoutManager),this.viewManager=new eg(this.layoutManager),this.initialized=!1,this.documentTitleElement=null,this.referenceResolvers=new goog.structs.Map,this.noReloadNo=0,this.authenticationManager_=new Jc(this.state)};goog.inherits(P,sync.api.Workspace);P.prototype.init=function(){this.initialized=!0,this.landmarks_.initShortcuts(document.body),this.layoutManager.create(),this.docContainer=this.layoutManager.getDocContainer(),this.toolbarController=new Cv(this.layoutManager.getNorthPane()),this.initTitleElement_(),this.a11y=new Va,this.a11y.addSkipLinks(),sync.rest.initAutoRecovery(),this.imageLoadErrorHandler_=new mg(this),this.imageLoadErrorHandler_.install(),this.listen(sync.api.Editor.EventTypes.LINK_OPENED,this.enrichLinkOpenedEvent_,!0,this)};P.prototype.prepareForEditor=function(){var t=goog.dom.createDom("span",{id:"header-common-actions",class:"vertical-align-children common-actions"}),o=document.getElementsByClassName("header-left")[0];goog.dom.appendChild(o,t),goog.dom.appendChild(o,goog.dom.createDom("span",{id:"header-common-actions-sep"})),this.appBarActions=t,goog.events.listen(window,goog.events.EventType.UNLOAD,goog.bind(this.disposeEditorOnTabClose_,this),!0),goog.events.listen(window,goog.events.EventType.POPSTATE,goog.bind(this.historyChanged_,this))};P.prototype.initTitleElement_=function(){var t=this.layoutManager.getHeaderTitle(),o;if(t.childNodes.length===0){var i=goog.dom.createDom;o=i("span","editor-title"),goog.dom.removeChildren(t),goog.dom.appendChild(t,i("div",{id:"titleDiv",className:"vertical-align-children"},i("span","decorators"),o,this.widgets.getModifiedIndicator().getElement()))}else o=t.querySelector(".editor-title");this.documentTitleElement=o};P.prototype.focusEditor_=function(){var t=this.currentEditor&&this.currentEditor.getEditingSupport();t?t.focus():sync.util.dom.focusFirstTarget(document.querySelector('[role="main"]'))};P.prototype.attachFileServer=function(t,o){var i=this.fileServersManager_.getFileServers();for(var n of i){var r=n.getDescriptor();if(r.matches(t.url)){o.setFileServerConnector(n),t.userName=r.fileServer.getUserName()||t.userName;break}}};P.prototype.isOnDashboard=function(){return this.isOnDashboard_};P.prototype.loadFirstEditor=function(t){this.prepareForEditor(),this.loadEditor(t)};P.prototype.loadEditor=function(t){Vt.reset(),this.currentEditor=new lv(this.widgets,this.layoutManager,this.docContainer,this.workspaceOptions.getEditingContextManager(),this.state,this.authenticationManager_),this.currentEditor.setParentEventTarget(this),this.currentEditor.getLoadingIndicator().setVisible(!0),this.attachFileServer(t,this.currentEditor),this.currentEditor.waitToLoad().then(goog.bind(this.editorLoaded_,this,this.currentEditor)).thenCatch(goog.bind(this.editorLoadingFailed_,this,this.currentEditor));var o=new sync.api.Workspace.BeforeEditorOpenedEvent(sync.api.Workspace.EventType.BEFORE_EDITOR_LOADED,this.currentEditor,t);this.dispatchEvent(o)?(t=o.options,this.currentEditor.getLoadingIndicator().setVisible(!0),this.currentEditor.load(t)):(this.currentEditor.getLoadingIndicator().setVisible(!1),this.currentEditor.setOptions(t)),this.currentEditor.listen(sync.api.Editor.EventTypes.DIRTY_STATUS_CHANGED,goog.bind(function(i){this.widgets.getModifiedIndicator().setDirty(i.isDirty)},this))};P.prototype.editorLoaded_=function(t){t.isDisposed()||(this.setUserInfo(t.userName),this.setTitle(t.getTitle()),this.dispatchEvent(new sync.api.Workspace.EditorLifecycleEvent(sync.api.Workspace.EventType.EDITOR_LOADED,t)),this.viewManager.setEditor(t),this.createEditorViews_(t),this.showAfterReloadMessage_())};P.prototype.editorLoadingFailed_=function(t,o){t.isDisposed()||(console.warn(o),this.dispatchEvent(new sync.api.Workspace.EditorLifecycleEvent(sync.api.Workspace.EventType.EDITOR_LOADING_FAILED,this.currentEditor)),this.viewManager.setEditor(this.currentEditor))};P.prototype.enrichLinkOpenedEvent_=function(t){var o=this.workspaceOptions.getOpenLinkOptions();goog.object.extend(o,t.params),t.params=o};P.prototype.openLink=function(t){var o=this;this.currentEditor&&!this.currentEditor.isDisposed()&&(o=this.currentEditor),o.dispatchEvent(t)&&this.handleLinkOpened(t)};P.prototype.handleLinkOpened=function(t){var o=t.$actualUrl||t.url;if(!t.external){var i=t.editingSupport||this.currentEditor&&this.currentEditor.editingSupport;if(i&&this.maybeScrollToAnchor_(o,i))return}var n=t.params,r=t.external?o:hs.serializeQueryString(o,n);if(t.linkTarget===sync.api.Editor.LinkOpenedEvent.Target.SELF){var s=sync.options.ServerOptions.getServerOption("document.change.no.reload")&&!this.isOnDashboard()&&!t.forcePageReload;!t.external&&s?(n.url=o,this.workspaceOptions.updateUrlParameters(n),this.replaceEditor(n)):sync.util.open(r,"_self")}else sync.util.open(r)};P.prototype.dispatchBeforeEditorDisposed=function(){try{return this.dispatchEvent(new sync.api.Workspace.EditorLifecycleEvent(sync.api.Workspace.EventType.BEFORE_EDITOR_DISPOSED,this.currentEditor))}catch{}return!0};P.prototype.disposeEditorOnTabClose_=function(){this.currentEditor&&(this.dispatchBeforeEditorDisposed(),this.currentEditor.disposeServerAndClientSideOnTabClosed(),this.dispatchEvent(new sync.api.Workspace.EditorLifecycleEvent(sync.api.Workspace.EventType.EDITOR_DISPOSED,this.currentEditor)))};P.prototype.disposeEditor_=function(){if(this.currentEditor){if(!this.dispatchBeforeEditorDisposed())return;this.currentEditor.dispose(),this.dispatchEvent(new sync.api.Workspace.EditorLifecycleEvent(sync.api.Workspace.EventType.EDITOR_DISPOSED,this.currentEditor)),this.currentEditor=null}goog.dom.classlist.remove(goog.dom.getElement("header-common-actions-sep"),"sep"),this.setTitle("")};P.prototype.replaceEditor=function(t){this.disposeEditor_(),this.workspaceOptions.updateOptions(t),this.noReloadNo++,this.widgets.getModifiedIndicator().setDirty(!1),this.loadEditor(t)};P.prototype.loadDashboard=function(t){this.layoutManager.removeMainToolbar(),this.setUserInfo(t.userName),this.dispatchEvent(new sync.api.Workspace.DashboardLifecycleEvent(sync.api.Workspace.EventType.BEFORE_DASHBOARD_LOADED,t)),this.dashboard_=new _v(this.docContainer,this.workspaceActionsManager_,this.fileServersManager_,this.layoutManager,this.authenticationManager_);for(var o of this.dashboardAdditionalTabs_)this.dashboard_.addFilesContainerTab(o);this.dashboard_.load(t),this.dispatchEvent(new sync.api.Workspace.DashboardLifecycleEvent(sync.api.Workspace.EventType.DASHBOARD_LOADED,t))};P.prototype.addDashboardAdditionalTabs=function(t){this.dashboardAdditionalTabs_.push(t)};P.prototype.maybeScrollToAnchor_=function(t,o){var i=!1,n=o.getUrl();if(t.indexOf("#")===0)t=n+t,i=!0;else{var r=new E(t),s=new E(n);r.getDomain()===s.getDomain()&&r.getPathName()===s.getPathName()&&r.getScheme()===s.getScheme()&&r.getPort()===s.getPort()&&(i=!0)}return i?o.scrollToAnchor(t):!1};P.prototype.createEditorViews_=function(t){var o=this.toolbarController,i=o.getToolbar(),n=!1,r,s=t.getApplicationToolbar();if(s){var a=this.appBarActions;this.layoutManager.hasAppBar()||(a=i,n=!0),r=s.render(s.config.toolbars,a),r&&!n&&this.initCommonActionsDropdown_(this.appBarActions),n=n&&r,goog.dom.classlist.add(goog.dom.getElement("header-common-actions-sep"),"sep")}var l=t.getFirstToolbar();l&&(r=l.render(l.config.toolbars,i),n=n||r),t.getOtherToolbars(goog.bind(function(c){if(c){var d=c.render(c.config.toolbars,i);n=n||d}n?this.viewManager.addMainToolbar():this.viewManager.removeMainToolbar(),o.enableScrollButtons()},this)),t.createUIComponents(o,this.layoutManager.getSouthPane())};P.prototype.showAfterReloadMessage_=function(){var t=this.state.consumeAfterReloadMessage();t&&sync.util.dom.waitForHtmlDocToBeVisible().then(()=>{this.isDisposed()||this.getNotificationManager().showInfo(t)})};P.prototype.initCommonActionsDropdown_=function(t){if(!this.appBarDropdown_){this.appBarDropdown_=goog.dom.createDom("button",{id:"header-mobile-common-actions-dropdown",class:"vertical-align-children","data-role":"none"});var o=goog.dom.getElement("header-logo");goog.dom.insertSiblingAfter(this.appBarDropdown_,o);var i=goog.dom.getElement("header-common-actions-sep");goog.events.listen(this.appBarDropdown_,goog.events.EventType.CLICK,goog.bind(function(){goog.dom.classlist.toggle(t,"displayed-as-popup"),goog.dom.classlist.toggle(this.appBarDropdown_,"popup-displayed"),goog.dom.classlist.toggle(i,"popup-displayed")},this))}};P.prototype.setTitle=function(t,o){this.documentTitleElement.textContent=t,this.documentTitleElement.title=t,o=o||t,document.title=(o?o+" - ":"")+wv.name};P.prototype.setUserInfo=function(t){var o=document.getElementById("header-user-details");o.getElementsByClassName("user-name")[0].textContent=t||tr(msgs.ANONYMOUS_)};P.prototype.setUrlChooser=function(t){this.widgets.setUrlChooser(t)};P.prototype.getUrlChooser=function(){return this.widgets.getUrlChooser()};P.prototype.setStripesContainer=function(t){this.layoutManager.setStripesContainer(t)};P.prototype.createInputDialog=function(t,o,i){return this.widgets.createInputDialog(t,o,i)};P.prototype.createDialog=function(t,o){return this.widgets.createDialog(t,o,function(){return workspace.currentEditor})};P.prototype.getViewManager=function(){return this.viewManager};P.prototype.getActionsManager=function(){return this.workspaceActionsManager_};P.prototype.getFileServersManager=function(){return this.fileServersManager_};P.prototype.getEditingSupportManager=function(){return this.editingSupportManager_};P.prototype.getNotificationManager=function(){return this.widgets.getProblemReporter()};P.prototype.addRelativeReferencesResolver=function(t,o){this.referenceResolvers.set(t,o)};P.prototype.makeRelative=function(t,o){var i=t.split(":")[0],n=this.referenceResolvers.get(i),r=n&&n.call(null,t,o);return r||(r=sync.util.defaultRelativizeValueToUrl(o,t)),r};P.prototype.createEditorStripe=function(t,o,i){return this.layoutManager.createEditorStripe(t,o,i)};P.prototype.removeEditorStripe=function(t,o){this.layoutManager.removeEditorStripe(t,o)};P.prototype.addEditorStripe=function(t,o,i,n){this.layoutManager.addEditorStripe(t,o,i,n)};P.prototype.confirm=function(t,o){return this.widgets.confirm(t,o)};P.prototype.getOption=function(t,o){return k.getInstance().getOption(t,o)};P.prototype.setOption=function(t,o){k.getInstance().setOption(t,o,!0)};P.prototype.getWorkspaceOptions=function(){return this.workspaceOptions};P.prototype.load=function(){if(this.serviceLoaderResolver_.resolve(),this.widgets.init(),!sync.util.areCookiesEnabled())this.widgets.getProblemReporter().reportCookiesNotEnabled(this.docContainer);else if(sync.util.sameSiteNoneEnabledButOnHttp())this.widgets.getProblemReporter().reportSameSiteNoneNeedsHttps(this.docContainer);else if(sync.util.sameSiteNoneNeeded())this.widgets.getProblemReporter().reportSameSiteNoneNeeded(this.docContainer);else{var t=this.workspaceOptions.getFirstEditorOptions();t.url?workspace.loadFirstEditor(t):workspace.loadDashboard(t)}};P.prototype.historyChanged_=function(t){this.replaceEditor(t.state)};P.prototype.getEditingContextManager=function(){return this.workspaceOptions.getEditingContextManager()};var Lv=P;sync.Workspace=P;var uE=!!window.__karma__;if(!uE){let t=new Lv;t.init(),window.addEventListener("load",function(){t.load()}),window.workspace=t,sync.Translation.stopMessageTracking(),mE()}function mE(){document.querySelector("title").textContent=tr(msgs.WEB_AUTHOR_NAME_),document.querySelector("#header-logo").setAttribute("title",tr(msgs.GO_TO_DASHBOARD_,{$APP_NAME:tr(msgs.WEB_AUTHOR_NAME_)})),document.querySelector("#header-right .user-name").textContent=tr(msgs.ANONYMOUS_)}})();

window.revManifestWebAuthor = {"admin-page.css":"admin-page-1af6f13cbe.css","all.css":"all-37dae98658.css","text-page.css":"text-page-2095a1b80a.css","text-page.js":"text-page-04780a5f8b.js","text-page-body.js":"text-page-body-79b34d382b.js","print.css":"print-46ce803884.css"};
//# sourceMappingURL=workspace-caee3999f1.js.map

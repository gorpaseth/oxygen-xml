(()=>{(function(){var h={SAMPLES_:{en_US:"Samples",de_DE:"Beispiele",fr_FR:"Exemples",ja_JP:"\u4F8B",nl_NL:"Voorbeelden",zh_CN:"\u6837\u56FE"}};sync.Translation.addTranslations(h)})();(function(){class h extends sync.ui.AbstractDashboardTab{getTabHeaderImage(){return sync.util.computeHdpiIcon("../plugin-resources/samples/Samples70.png")}getTabHeaderDisplayName(){return tr(msgs.SAMPLES_)}insertTabContent(a){if(!this.samplesContainer){let e=goog.dom.createDom,l=new goog.dom.DomHelper;this.samplesContainer=e("div",{id:"dashboard-samples-container"}),this.samplesContainer.style.display="none",this.samplesContainer.style.position="relative";let t=this.retrieveSamplesDescriptor_();if(t){let p=t.highlightedActions||[],n=t.samples,r="";for(let i in n){let s=n[i],A=s.path,D=s.ditamap,v=s.ditaval,d=s.image,u=s.labels,x=s.newLabels,E=s.urlParams,U=s.new,b=s.highlightedActions||[];b=b.concat(p);let y=!1;d||(d="plugin-resources/samples/MissingImage.png",y=!0),d=sync.util.computeHdpiIcon(d);let k=sync.util.getURLParameter("author"),C=this.getSampleUrl_(A,D,v,k,E,b),S=s.name,O="sample-title-"+S.replace(/ /g,"-"),g=[];if(x){let m=x.split(",");for(let f in m){let c=m[f];c&&g.push(e("span","dashboard-new-sample-label",c.trim()))}}if(u){let m=u.split(",");for(let f in m){let c=m[f];c&&g.push(e("span","dashboard-sample-label",c.trim()))}}let w=e("div","dashboard-sample-image-wrp",e("img",{className:"dashboard-sample-image",alt:"",src:y?"../"+d:this.getSampleFileUrl_(d)}));goog.dom.appendChild(this.samplesContainer,e("a",{className:"dashboard-sample",target:"_blank",href:C,id:O},w,e("div","dashboard-sample-name",S),e("div","dashboard-sample-labels",g))),U&&goog.dom.classlist.add(w,"new-dashboard-sample")}this.addNewStylesheet_(l,r)}}a.appendChild(this.samplesContainer)}addNewStylesheet_(a,e){let l=a.createDom("style");l.textContent='#dashboard-samples-container {display: block !important;text-align: center;}#dashboard-samples-container .dashboard-sample-image-wrp {margin:25px 30px 0px;position: relative;}#dashboard-samples-container .new-dashboard-sample:before {    content: "";    height: 25px;    width: 37px;    top: -10px;    left: -5px;    position: absolute;    background: url(../plugin-resources/samples/NewSample.png) no-repeat left;}@media only screen and (min-width: 768px) {#dashboard-samples-container {padding: 10px 20px;}}#dashboard-samples-container .dashboard-sample-image {background-color: #FFFFFF;display: inline-block;height: 159px;width: 125px;margin:0;border: 2px solid #cccccc;}.dashboard-sample {width: 185px;display: inline-flex;flex-direction: column;align-items: center;margin: 10px 50px 10px 50px;text-decoration:none;position: relative;}.dashboard-sample-labels {display: block;margin-bottom: 10px; }.dashboard-sample-label, .dashboard-new-sample-label {font-size: 70%;border: 0px solid #ddd;border-radius: 4px;padding: 1px 6px;margin-left: 5px;cursor: pointer;white-space: nowrap; }.dashboard-sample-label {background-color: #b4b4b4;color: #fff; }.dashboard-new-sample-label {background-color: #fecb7c;color: #000;font-weight: bold; }.dashboard-sample-label:first-of-type, .dashboard-new-sample-label:first-of-type {margin-left: 0;}#dashboard-samples-container .dashboard-sample-image:hover {border-color: #34789d;}#dashboard-samples-container .dashboard-sample:hover .dashboard-sample-image {border-color: #34789d;}.dashboard-sample:hover .dashboard-sample-label {background-color: #34789d; }.dashboard-sample:hover .dashboard-new-sample-label {background-color: #fdb443; }.dashboard-sample-name {background-color: transparent;cursor:default;    font-family: Roboto, Arial, Helvetica, sans-serif;color: #595959;display:block;position: relative;margin: 10px 0px 5px;}'+(e||""),document.head.appendChild(l)}getSampleUrl_(a,e,l,t,p,n){let r="oxygen.html?";if(r+="url="+this.getSamplesOxyUrl_(a),e&&(r+="&ditamap="+this.getSamplesOxyUrl_(e)),l&&(r+="&dita.val.url="+this.getSamplesOxyUrl_(l)),p)for(let i in p){let s=p[i];(i==="diffUrl"||i==="diffBaseUrl"||i==="schematronUrl"||i==="dita.project.url")&&(s=this.getSamplesOxyUrl_(s)),r+="&"+i+"="+s}return t&&(r+="&author="+t),n.length&&(r+="&highlightedActions="+encodeURIComponent(JSON.stringify(n))),r}getSamplesOxyUrl_(a){return encodeURIComponent("samples://samples/"+a).replace("\\","/")}getSampleFileUrl_(a){let e=location.href,l=e.indexOf("/app/");return e.substring(0,l+1)+"plugins-dispatcher/samples-files"+"?sampleFilePath="+encodeURIComponent(a)}retrieveSamplesDescriptor_(){let a=new XMLHttpRequest;return a.open("GET",this.getSampleFileUrl_(".descriptor/samples.json"),!1),a.send(),JSON.parse(a.responseText)}}workspace.listen(sync.api.Workspace.EventType.BEFORE_DASHBOARD_LOADED,function(){workspace.addDashboardAdditionalTabs(new h)}),decodeURIComponent(sync.util.getURLParameter("url")).indexOf("samples://")===0&&(workspace.listen(sync.api.Workspace.EventType.BEFORE_EDITOR_LOADED,o=>{o.options.sharedSessionCompatible=!0,o.options.inplaceReferenceEditingSupported=!0}),workspace.listen(sync.api.Workspace.EventType.EDITOR_LOADED,o=>{(sync.options.PluginsOptions.getClientOption("samples_readonly")==="on"||o.editor.options.samples_readonly==="on")&&_(o.editor),workspace.setUrlChooser(new sync.api.FileBrowsingDialog)}));function _(o){o.listen(sync.api.Editor.EventTypes.ACTIONS_LOADED,function(a){let e=new sync.actions.Action({actionPerformed:l=>{o.isDirty()&&workspace.getNotificationManager().showWarning(tr(msgs.DOCUMENT_OPENED_AS_READ_ONLY_)),l()},keyStrokeStr:"M1 S"});if(o.getActionsManager().registerAction("WebdavServer/CantSaveAction",e,"M1 S"),a.actionsConfiguration.toolbars.length){let l=a.actionsConfiguration.toolbars[0].children;for(let t=0;t<l.length;t++)if(l[t].id==="Author/Save"){let n={id:"Author/Download",type:"action"};l.splice(t,1,n)}}})}})();})();
